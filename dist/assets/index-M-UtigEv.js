var qX=Object.defineProperty;var HX=(t,e,r)=>e in t?qX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var AO=(t,e,r)=>HX(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as GX}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nw={exports:{}},nm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO;function KX(){if(EO)return nm;EO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:s,ref:i!==void 0?i:null,props:a}}return nm.Fragment=e,nm.jsx=r,nm.jsxs=r,nm}var NO;function WX(){return NO||(NO=1,Nw.exports=KX()),Nw.exports}var u=WX(),kw={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function XX(){if(kO)return Rt;kO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function k(X,J,le){this.props=X,this.context=J,this.refs=w,this.updater=le||T}k.prototype.isReactComponent={},k.prototype.setState=function(X,J){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,J,"setState")},k.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function M(){}M.prototype=k.prototype;function C(X,J,le){this.props=X,this.context=J,this.refs=w,this.updater=le||T}var B=C.prototype=new M;B.constructor=C,S(B,k.prototype),B.isPureReactComponent=!0;var R=Array.isArray;function I(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function O(X,J,le){var Ee=le.ref;return{$$typeof:t,type:X,key:J,ref:Ee!==void 0?Ee:null,props:le}}function U(X,J){return O(X.type,J,X.props)}function P(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function V(X){var J={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(le){return J[le]})}var z=/\/+/g;function Q(X,J){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):J.toString(36)}function ee(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(I,I):(X.status="pending",X.then(function(J){X.status==="pending"&&(X.status="fulfilled",X.value=J)},function(J){X.status==="pending"&&(X.status="rejected",X.reason=J)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function K(X,J,le,Ee,oe){var Oe=typeof X;(Oe==="undefined"||Oe==="boolean")&&(X=null);var Me=!1;if(X===null)Me=!0;else switch(Oe){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(X.$$typeof){case t:case e:Me=!0;break;case m:return Me=X._init,K(Me(X._payload),J,le,Ee,oe)}}if(Me)return oe=oe(X),Me=Ee===""?"."+Q(X,0):Ee,R(oe)?(le="",Me!=null&&(le=Me.replace(z,"$&/")+"/"),K(oe,J,le,"",function($e){return $e})):oe!=null&&(P(oe)&&(oe=U(oe,le+(oe.key==null||X&&X.key===oe.key?"":(""+oe.key).replace(z,"$&/")+"/")+Me)),J.push(oe)),1;Me=0;var at=Ee===""?".":Ee+":";if(R(X))for(var Ae=0;Ae<X.length;Ae++)Ee=X[Ae],Oe=at+Q(Ee,Ae),Me+=K(Ee,J,le,Oe,oe);else if(Ae=b(X),typeof Ae=="function")for(X=Ae.call(X),Ae=0;!(Ee=X.next()).done;)Ee=Ee.value,Oe=at+Q(Ee,Ae++),Me+=K(Ee,J,le,Oe,oe);else if(Oe==="object"){if(typeof X.then=="function")return K(ee(X),J,le,Ee,oe);throw J=String(X),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(X,J,le){if(X==null)return X;var Ee=[],oe=0;return K(X,Ee,"","",function(Oe){return J.call(le,Oe,oe++)}),Ee}function Y(X){if(X._status===-1){var J=X._result;J=J(),J.then(function(le){(X._status===0||X._status===-1)&&(X._status=1,X._result=le)},function(le){(X._status===0||X._status===-1)&&(X._status=2,X._result=le)}),X._status===-1&&(X._status=0,X._result=J)}if(X._status===1)return X._result.default;throw X._result}var pe=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},ae={map:Z,forEach:function(X,J,le){Z(X,function(){J.apply(this,arguments)},le)},count:function(X){var J=0;return Z(X,function(){J++}),J},toArray:function(X){return Z(X,function(J){return J})||[]},only:function(X){if(!P(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Rt.Activity=p,Rt.Children=ae,Rt.Component=k,Rt.Fragment=r,Rt.Profiler=i,Rt.PureComponent=C,Rt.StrictMode=n,Rt.Suspense=d,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return A.H.useMemoCache(X)}},Rt.cache=function(X){return function(){return X.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(X,J,le){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ee=S({},X.props),oe=X.key;if(J!=null)for(Oe in J.key!==void 0&&(oe=""+J.key),J)!E.call(J,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&J.ref===void 0||(Ee[Oe]=J[Oe]);var Oe=arguments.length-2;if(Oe===1)Ee.children=le;else if(1<Oe){for(var Me=Array(Oe),at=0;at<Oe;at++)Me[at]=arguments[at+2];Ee.children=Me}return O(X.type,oe,Ee)},Rt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Rt.createElement=function(X,J,le){var Ee,oe={},Oe=null;if(J!=null)for(Ee in J.key!==void 0&&(Oe=""+J.key),J)E.call(J,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(oe[Ee]=J[Ee]);var Me=arguments.length-2;if(Me===1)oe.children=le;else if(1<Me){for(var at=Array(Me),Ae=0;Ae<Me;Ae++)at[Ae]=arguments[Ae+2];oe.children=at}if(X&&X.defaultProps)for(Ee in Me=X.defaultProps,Me)oe[Ee]===void 0&&(oe[Ee]=Me[Ee]);return O(X,Oe,oe)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(X){return{$$typeof:c,render:X}},Rt.isValidElement=P,Rt.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:Y}},Rt.memo=function(X,J){return{$$typeof:f,type:X,compare:J===void 0?null:J}},Rt.startTransition=function(X){var J=A.T,le={};A.T=le;try{var Ee=X(),oe=A.S;oe!==null&&oe(le,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(I,pe)}catch(Oe){pe(Oe)}finally{J!==null&&le.types!==null&&(J.types=le.types),A.T=J}},Rt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Rt.use=function(X){return A.H.use(X)},Rt.useActionState=function(X,J,le){return A.H.useActionState(X,J,le)},Rt.useCallback=function(X,J){return A.H.useCallback(X,J)},Rt.useContext=function(X){return A.H.useContext(X)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(X,J){return A.H.useDeferredValue(X,J)},Rt.useEffect=function(X,J){return A.H.useEffect(X,J)},Rt.useEffectEvent=function(X){return A.H.useEffectEvent(X)},Rt.useId=function(){return A.H.useId()},Rt.useImperativeHandle=function(X,J,le){return A.H.useImperativeHandle(X,J,le)},Rt.useInsertionEffect=function(X,J){return A.H.useInsertionEffect(X,J)},Rt.useLayoutEffect=function(X,J){return A.H.useLayoutEffect(X,J)},Rt.useMemo=function(X,J){return A.H.useMemo(X,J)},Rt.useOptimistic=function(X,J){return A.H.useOptimistic(X,J)},Rt.useReducer=function(X,J,le){return A.H.useReducer(X,J,le)},Rt.useRef=function(X){return A.H.useRef(X)},Rt.useState=function(X){return A.H.useState(X)},Rt.useSyncExternalStore=function(X,J,le){return A.H.useSyncExternalStore(X,J,le)},Rt.useTransition=function(){return A.H.useTransition()},Rt.version="19.2.4",Rt}var OO;function i7(){return OO||(OO=1,kw.exports=XX()),kw.exports}var F=i7();const ne=vr(F);var Ow={exports:{}},im={},jw={exports:{}},Cw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO;function QX(){return jO||(jO=1,(function(t){function e(K,Z){var Y=K.length;K.push(Z);e:for(;0<Y;){var pe=Y-1>>>1,ae=K[pe];if(0<i(ae,Z))K[pe]=Z,K[Y]=ae,Y=pe;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Z=K[0],Y=K.pop();if(Y!==Z){K[0]=Y;e:for(var pe=0,ae=K.length,X=ae>>>1;pe<X;){var J=2*(pe+1)-1,le=K[J],Ee=J+1,oe=K[Ee];if(0>i(le,Y))Ee<ae&&0>i(oe,le)?(K[pe]=oe,K[Ee]=Y,pe=Ee):(K[pe]=le,K[J]=Y,pe=J);else if(Ee<ae&&0>i(oe,Y))K[pe]=oe,K[Ee]=Y,pe=Ee;else break e}}return Z}function i(K,Z){var Y=K.sortIndex-Z.sortIndex;return Y!==0?Y:K.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],f=[],m=1,p=null,y=3,b=!1,T=!1,S=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function B(K){for(var Z=r(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=K)n(f),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=r(f)}}function R(K){if(S=!1,B(K),!T)if(r(d)!==null)T=!0,I||(I=!0,V());else{var Z=r(f);Z!==null&&ee(R,Z.startTime-K)}}var I=!1,A=-1,E=5,O=-1;function U(){return w?!0:!(t.unstable_now()-O<E)}function P(){if(w=!1,I){var K=t.unstable_now();O=K;var Z=!0;try{e:{T=!1,S&&(S=!1,M(A),A=-1),b=!0;var Y=y;try{t:{for(B(K),p=r(d);p!==null&&!(p.expirationTime>K&&U());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,y=p.priorityLevel;var ae=pe(p.expirationTime<=K);if(K=t.unstable_now(),typeof ae=="function"){p.callback=ae,B(K),Z=!0;break t}p===r(d)&&n(d),B(K)}else n(d);p=r(d)}if(p!==null)Z=!0;else{var X=r(f);X!==null&&ee(R,X.startTime-K),Z=!1}}break e}finally{p=null,y=Y,b=!1}Z=void 0}}finally{Z?V():I=!1}}}var V;if(typeof C=="function")V=function(){C(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=P,V=function(){Q.postMessage(null)}}else V=function(){k(P,0)};function ee(K,Z){A=k(function(){K(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(K){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var Y=y;y=Z;try{return K()}finally{y=Y}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=y;y=K;try{return Z()}finally{y=Y}},t.unstable_scheduleCallback=function(K,Z,Y){var pe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,K){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,K={id:m++,callback:Z,priorityLevel:K,startTime:Y,expirationTime:ae,sortIndex:-1},Y>pe?(K.sortIndex=Y,e(f,K),r(d)===null&&K===r(f)&&(S?(M(A),A=-1):S=!0,ee(R,Y-pe))):(K.sortIndex=ae,e(d,K),T||b||(T=!0,I||(I=!0,V()))),K},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(K){var Z=y;return function(){var Y=y;y=Z;try{return K.apply(this,arguments)}finally{y=Y}}}})(Cw)),Cw}var CO;function YX(){return CO||(CO=1,jw.exports=QX()),jw.exports}var Iw={exports:{}},Li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IO;function ZX(){if(IO)return Li;IO=1;var t=i7();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Li.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Li.flushSync=function(d){var f=s.T,m=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=f,n.p=m,n.d.f()}},Li.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Li.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Li.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):m==="script"&&n.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Li.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Li.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Li.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Li.requestFormReset=function(d){n.d.r(d)},Li.unstable_batchedUpdates=function(d,f){return d(f)},Li.useFormState=function(d,f,m){return s.H.useFormState(d,f,m)},Li.useFormStatus=function(){return s.H.useHostTransitionStatus()},Li.version="19.2.4",Li}var RO;function JX(){if(RO)return Iw.exports;RO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Iw.exports=ZX(),Iw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MO;function eQ(){if(MO)return im;MO=1;var t=YX(),e=i7(),r=JX();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(n(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,g=l;;){var x=h.return;if(x===null)break;var _=x.alternate;if(_===null){if(g=x.return,g!==null){h=g;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===h)return d(x),o;if(_===g)return d(x),l;_=_.sibling}throw Error(n(188))}if(h.return!==g.return)h=x,g=_;else{for(var L=!1,H=x.child;H;){if(H===h){L=!0,h=x,g=_;break}if(H===g){L=!0,g=x,h=_;break}H=H.sibling}if(!L){for(H=_.child;H;){if(H===h){L=!0,h=_,g=x;break}if(H===g){L=!0,g=_,h=x;break}H=H.sibling}if(!L)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function m(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=m(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(o){return o===null||typeof o!="object"?null:(o=P&&o[P]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList";case O:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case C:return o.displayName||"Context";case M:return(o._context.displayName||"Context")+".Consumer";case B:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case A:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case E:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var ee=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},pe=[],ae=-1;function X(o){return{current:o}}function J(o){0>ae||(o.current=pe[ae],pe[ae]=null,ae--)}function le(o,l){ae++,pe[ae]=o.current,o.current=l}var Ee=X(null),oe=X(null),Oe=X(null),Me=X(null);function at(o,l){switch(le(Oe,l),le(oe,o),le(Ee,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Wk(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Wk(l),o=Xk(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}J(Ee),le(Ee,o)}function Ae(){J(Ee),J(oe),J(Oe)}function $e(o){o.memoizedState!==null&&le(Me,o);var l=Ee.current,h=Xk(l,o.type);l!==h&&(le(oe,o),le(Ee,h))}function de(o){oe.current===o&&(J(Ee),J(oe)),Me.current===o&&(J(Me),Jf._currentValue=Y)}var ge,Ye;function Ke(o){if(ge===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);ge=l&&l[1]||"",Ye=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+o+Ye}var it=!1;function ut(o,l){if(!o||it)return"";it=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(Se){var _e=Se}Reflect.construct(o,[],Pe)}else{try{Pe.call()}catch(Se){_e=Se}o.call(Pe.prototype)}}else{try{throw Error()}catch(Se){_e=Se}(Pe=o())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(Se){if(Se&&_e&&typeof Se.stack=="string")return[Se.stack,_e.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),L=_[0],H=_[1];if(L&&H){var ie=L.split(`
`),xe=H.split(`
`);for(x=g=0;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;for(;x<xe.length&&!xe[x].includes("DetermineComponentFrameRoot");)x++;if(g===ie.length||x===xe.length)for(g=ie.length-1,x=xe.length-1;1<=g&&0<=x&&ie[g]!==xe[x];)x--;for(;1<=g&&0<=x;g--,x--)if(ie[g]!==xe[x]){if(g!==1||x!==1)do if(g--,x--,0>x||ie[g]!==xe[x]){var ke=`
`+ie[g].replace(" at new "," at ");return o.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",o.displayName)),ke}while(1<=g&&0<=x);break}}}finally{it=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Ke(h):""}function er(o,l){switch(o.tag){case 26:case 27:case 5:return Ke(o.type);case 16:return Ke("Lazy");case 13:return o.child!==l&&l!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return ut(o.type,!1);case 11:return ut(o.type.render,!1);case 1:return ut(o.type,!0);case 31:return Ke("Activity");default:return""}}function Ie(o){try{var l="",h=null;do l+=er(o,h),h=o,o=o.return;while(o);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var se=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,bt=t.unstable_shouldYield,Ze=t.unstable_requestPaint,Tt=t.unstable_now,Vt=t.unstable_getCurrentPriorityLevel,Bt=t.unstable_ImmediatePriority,At=t.unstable_UserBlockingPriority,nr=t.unstable_NormalPriority,an=t.unstable_LowPriority,qr=t.unstable_IdlePriority,Yn=t.log,dn=t.unstable_setDisableYieldValue,pi=null,Br=null;function hn(o){if(typeof Yn=="function"&&dn(o),Br&&typeof Br.setStrictMode=="function")try{Br.setStrictMode(pi,o)}catch{}}var lr=Math.clz32?Math.clz32:Ts,Ci=Math.log,Qa=Math.LN2;function Ts(o){return o>>>=0,o===0?32:31-(Ci(o)/Qa|0)|0}var As=256,Ln=262144,gr=4194304;function Bn(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function tr(o,l,h){var g=o.pendingLanes;if(g===0)return 0;var x=0,_=o.suspendedLanes,L=o.pingedLanes;o=o.warmLanes;var H=g&134217727;return H!==0?(g=H&~_,g!==0?x=Bn(g):(L&=H,L!==0?x=Bn(L):h||(h=H&~o,h!==0&&(x=Bn(h))))):(H=g&~_,H!==0?x=Bn(H):L!==0?x=Bn(L):h||(h=g&~o,h!==0&&(x=Bn(h)))),x===0?0:l!==0&&l!==x&&(l&_)===0&&(_=x&-x,h=l&-l,_>=h||_===32&&(h&4194048)!==0)?l:x}function gi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Xs(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Es(){var o=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),o}function Ii(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function sa(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function fn(o,l,h,g,x,_){var L=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var H=o.entanglements,ie=o.expirationTimes,xe=o.hiddenUpdates;for(h=L&~h;0<h;){var ke=31-lr(h),Pe=1<<ke;H[ke]=0,ie[ke]=-1;var _e=xe[ke];if(_e!==null)for(xe[ke]=null,ke=0;ke<_e.length;ke++){var Se=_e[ke];Se!==null&&(Se.lane&=-536870913)}h&=~Pe}g!==0&&Qs(o,g,0),_!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=_&~(L&~l))}function Qs(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var g=31-lr(l);o.entangledLanes|=l,o.entanglements[g]=o.entanglements[g]|1073741824|h&261930}function Ri(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var g=31-lr(h),x=1<<g;x&l|o[g]&l&&(o[g]|=l),h&=~x}}function Hi(o,l){var h=l&-l;return h=(h&42)!==0?1:Ys(h),(h&(o.suspendedLanes|l))!==0?0:h}function Ys(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function kn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function yi(){var o=Z.p;return o!==0?o:(o=window.event,o===void 0?32:vO(o.type))}function Zs(o,l){var h=Z.p;try{return Z.p=o,l()}finally{Z.p=h}}var Mi=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Mi,Hr="__reactProps$"+Mi,mn="__reactContainer$"+Mi,oa="__reactEvents$"+Mi,Pi="__reactListeners$"+Mi,Js="__reactHandles$"+Mi,Ns="__reactResources$"+Mi,la="__reactMarker$"+Mi;function lt(o){delete o[Sr],delete o[Hr],delete o[oa],delete o[Pi],delete o[Js]}function ce(o){var l=o[Sr];if(l)return l;for(var h=o.parentNode;h;){if(l=h[mn]||h[Sr]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=rO(o);o!==null;){if(h=o[Sr])return h;o=rO(o)}return l}o=h,h=o.parentNode}return null}function Le(o){if(o=o[Sr]||o[mn]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function Xe(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function jt(o){var l=o[Ns];return l||(l=o[Ns]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function qt(o){o[la]=!0}var Gr=new Set,Tr={};function Kr(o,l){sr(o,l),sr(o+"Capture",l)}function sr(o,l){for(Tr[o]=l,o=0;o<l.length;o++)Gr.add(l[o])}var fe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ce={},He={};function mt(o){return se.call(He,o)?!0:se.call(Ce,o)?!1:fe.test(o)?He[o]=!0:(Ce[o]=!0,!1)}function Pt(o,l,h){if(mt(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function kr(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function br(o,l,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+g)}}function Wr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function eo(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ro(o,l,h){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,_=g.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(L){h=""+L,_.call(this,L)}}),Object.defineProperty(o,l,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(L){h=""+L},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function $l(o){if(!o._valueTracker){var l=eo(o)?"checked":"value";o._valueTracker=Ro(o,l,""+o[l])}}function fu(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return o&&(g=eo(o)?o.checked?"true":"false":o.value),o=g,o!==h?(l.setValue(o),!0):!1}function Vl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Kt=/[\n"\\]/g;function Xr(o){return o.replace(Kt,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ks(o,l,h,g,x,_,L,H){o.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.type=L:o.removeAttribute("type"),l!=null?L==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Wr(l)):o.value!==""+Wr(l)&&(o.value=""+Wr(l)):L!=="submit"&&L!=="reset"||o.removeAttribute("value"),l!=null?G0(o,L,Wr(l)):h!=null?G0(o,L,Wr(h)):g!=null&&o.removeAttribute("value"),x==null&&_!=null&&(o.defaultChecked=!!_),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+Wr(H):o.removeAttribute("name")}function mu(o,l,h,g,x,_,L,H){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){$l(o);return}h=h!=null?""+Wr(h):"",l=l!=null?""+Wr(l):h,H||l===o.value||(o.value=l),o.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=H?o.checked:!!g,o.defaultChecked=!!g,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.name=L),$l(o)}function G0(o,l,h){l==="number"&&Vl(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function cr(o,l,h,g){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Wr(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function pu(o,l,h){if(l!=null&&(l=""+Wr(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+Wr(h):""}function Fl(o,l,h,g){if(l==null){if(g!=null){if(h!=null)throw Error(n(92));if(ee(g)){if(1<g.length)throw Error(n(93));g=g[0]}h=g}h==null&&(h=""),l=h}h=Wr(l),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g),$l(o)}function Ya(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var j2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ff(o,l,h){var g=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":g?o.setProperty(l,h):typeof h!="number"||h===0||j2.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function Gg(o,l,h){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&h[x]!==g&&ff(o,x,g)}else for(var _ in l)l.hasOwnProperty(_)&&ff(o,_,l[_])}function mf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),I2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(o){return I2.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function si(){}var K0=null;function W0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Mo=null,Na=null;function Kg(o){var l=Le(o);if(l&&(o=l.stateNode)){var h=o[Hr]||null;e:switch(o=l.stateNode,l.type){case"input":if(ks(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Xr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==o&&g.form===o.form){var x=g[Hr]||null;if(!x)throw Error(n(90));ks(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<h.length;l++)g=h[l],g.form===o.form&&fu(g)}break e;case"textarea":pu(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&cr(o,!!h.multiple,l,!1)}}}var pf=!1;function Wg(o,l,h){if(pf)return o(l,h);pf=!0;try{var g=o(l);return g}finally{if(pf=!1,(Mo!==null||Na!==null)&&(q1(),Mo&&(l=Mo,o=Na,Na=Mo=null,Kg(l),o)))for(l=0;l<o.length;l++)Kg(o[l])}}function ca(o,l){var h=o.stateNode;if(h===null)return null;var g=h[Hr]||null;if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gf=!1;if(Os)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){gf=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{gf=!1}var ka=null,X0=null,no=null;function ql(){if(no)return no;var o,l=X0,h=l.length,g,x="value"in ka?ka.value:ka.textContent,_=x.length;for(o=0;o<h&&l[o]===x[o];o++);var L=h-o;for(g=1;g<=L&&l[h-g]===x[_-g];g++);return no=x.slice(o,1<g?1-g:void 0)}function gu(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Hl(){return!0}function en(){return!1}function Di(o){function l(h,g,x,_,L){this._reactName=h,this._targetInst=x,this.type=g,this.nativeEvent=_,this.target=L,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(h=o[H],this[H]=h?h(_):_[H]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Hl:en,this.isPropagationStopped=en,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),l}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=Di(Po),Gl=p({},Po,{view:0,detail:0}),Xg=Di(Gl),Kl,Q0,Gi,vu=p({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Gi&&(Gi&&o.type==="mousemove"?(Kl=o.screenX-Gi.screenX,Q0=o.screenY-Gi.screenY):Q0=Kl=0,Gi=o),Kl)},movementY:function(o){return"movementY"in o?o.movementY:Q0}}),Qg=Di(vu),bu=p({},vu,{dataTransfer:0}),Yg=Di(bu),yf=p({},Gl,{relatedTarget:0}),Wl=Di(yf),Zg=p({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=Di(Zg),R2=p({},Po,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jg=Di(R2),xu=p({},Po,{data:0}),vf=Di(xu),e1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=xf[o])?!!l[o]:!1}function Xl(){return t1}var r1=p({},Gl,{key:function(o){if(o.key){var l=e1[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=gu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?bf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xl,charCode:function(o){return o.type==="keypress"?gu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?gu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),n1=Di(r1),Do=p({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=Di(Do),i1=p({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xl}),a1=Di(i1),s1=p({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z0=Di(s1),Ki=p({},vu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=Di(Ki),l1=p({},Po,{newState:0,oldState:0}),Ql=Di(l1),v=[9,13,27,32],j=Os&&"CompositionEvent"in window,$=null;Os&&"documentMode"in document&&($=document.documentMode);var W=Os&&"TextEvent"in window&&!$,ye=Os&&(!j||$&&8<$&&11>=$),Te=" ",Qe=!1;function xr(o,l){switch(o){case"keyup":return v.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ht=!1;function oi(o,l){switch(o){case"compositionend":return Un(l);case"keypress":return l.which!==32?null:(Qe=!0,Te);case"textInput":return o=l.data,o===Te&&Qe?null:o;default:return null}}function li(o,l){if(Ht)return o==="compositionend"||!j&&xr(o,l)?(o=ql(),no=X0=ka=null,Ht=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ye&&l.locale!=="ko"?null:l.data;default:return null}}var Yl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ua(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Yl[o.type]:l==="textarea"}function wu(o,l,h,g){Mo?Na?Na.push(g):Na=[g]:Mo=g,l=Y1(l,"onChange"),0<l.length&&(h=new yu("onChange","change",null,h,g),o.push({event:h,listeners:l}))}var Lo=null,_f=null;function yW(o){Vk(o,0)}function c1(o){var l=Xe(o);if(fu(l))return o}function oN(o,l){if(o==="change")return l}var lN=!1;if(Os){var M2;if(Os){var P2="oninput"in document;if(!P2){var cN=document.createElement("div");cN.setAttribute("oninput","return;"),P2=typeof cN.oninput=="function"}M2=P2}else M2=!1;lN=M2&&(!document.documentMode||9<document.documentMode)}function uN(){Lo&&(Lo.detachEvent("onpropertychange",dN),_f=Lo=null)}function dN(o){if(o.propertyName==="value"&&c1(_f)){var l=[];wu(l,_f,o,W0(o)),Wg(yW,l)}}function vW(o,l,h){o==="focusin"?(uN(),Lo=l,_f=h,Lo.attachEvent("onpropertychange",dN)):o==="focusout"&&uN()}function bW(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return c1(_f)}function xW(o,l){if(o==="click")return c1(l)}function wW(o,l){if(o==="input"||o==="change")return c1(l)}function _W(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Oa=typeof Object.is=="function"?Object.is:_W;function Sf(o,l){if(Oa(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var x=h[g];if(!se.call(l,x)||!Oa(o[x],l[x]))return!1}return!0}function hN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fN(o,l){var h=hN(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=l&&g>=l)return{node:h,offset:l-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=hN(h)}}function mN(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?mN(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function pN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Vl(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Vl(o.document)}return l}function D2(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var SW=Os&&"documentMode"in document&&11>=document.documentMode,J0=null,L2=null,Tf=null,B2=!1;function gN(o,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;B2||J0==null||J0!==Vl(g)||(g=J0,"selectionStart"in g&&D2(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Tf&&Sf(Tf,g)||(Tf=g,g=Y1(L2,"onSelect"),0<g.length&&(l=new yu("onSelect","select",null,l,h),o.push({event:l,listeners:g}),l.target=J0)))}function _u(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var ed={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionrun:_u("Transition","TransitionRun"),transitionstart:_u("Transition","TransitionStart"),transitioncancel:_u("Transition","TransitionCancel"),transitionend:_u("Transition","TransitionEnd")},U2={},yN={};Os&&(yN=document.createElement("div").style,"AnimationEvent"in window||(delete ed.animationend.animation,delete ed.animationiteration.animation,delete ed.animationstart.animation),"TransitionEvent"in window||delete ed.transitionend.transition);function Su(o){if(U2[o])return U2[o];if(!ed[o])return o;var l=ed[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in yN)return U2[o]=l[h];return o}var vN=Su("animationend"),bN=Su("animationiteration"),xN=Su("animationstart"),TW=Su("transitionrun"),AW=Su("transitionstart"),EW=Su("transitioncancel"),wN=Su("transitionend"),_N=new Map,z2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");z2.push("scrollEnd");function js(o,l){_N.set(o,l),Kr(l,[o])}var u1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Za=[],td=0,$2=0;function d1(){for(var o=td,l=$2=td=0;l<o;){var h=Za[l];Za[l++]=null;var g=Za[l];Za[l++]=null;var x=Za[l];Za[l++]=null;var _=Za[l];if(Za[l++]=null,g!==null&&x!==null){var L=g.pending;L===null?x.next=x:(x.next=L.next,L.next=x),g.pending=x}_!==0&&SN(h,x,_)}}function h1(o,l,h,g){Za[td++]=o,Za[td++]=l,Za[td++]=h,Za[td++]=g,$2|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function V2(o,l,h,g){return h1(o,l,h,g),f1(o)}function Tu(o,l){return h1(o,null,null,l),f1(o)}function SN(o,l,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var x=!1,_=o.return;_!==null;)_.childLanes|=h,g=_.alternate,g!==null&&(g.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(x=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,x&&l!==null&&(x=31-lr(h),o=_.hiddenUpdates,g=o[x],g===null?o[x]=[l]:g.push(l),l.lane=h|536870912),_):null}function f1(o){if(50<Gf)throw Gf=0,Y4=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var rd={};function NW(o,l,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(o,l,h,g){return new NW(o,l,h,g)}function F2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Bo(o,l){var h=o.alternate;return h===null?(h=ja(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function TN(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function m1(o,l,h,g,x,_){var L=0;if(g=o,typeof o=="function")F2(o)&&(L=1);else if(typeof o=="string")L=IX(o,h,Ee.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case O:return o=ja(31,h,l,x),o.elementType=O,o.lanes=_,o;case S:return Au(h.children,x,_,l);case w:L=8,x|=24;break;case k:return o=ja(12,h,l,x|2),o.elementType=k,o.lanes=_,o;case R:return o=ja(13,h,l,x),o.elementType=R,o.lanes=_,o;case I:return o=ja(19,h,l,x),o.elementType=I,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:L=10;break e;case M:L=9;break e;case B:L=11;break e;case A:L=14;break e;case E:L=16,g=null;break e}L=29,h=Error(n(130,o===null?"null":typeof o,"")),g=null}return l=ja(L,h,l,x),l.elementType=o,l.type=g,l.lanes=_,l}function Au(o,l,h,g){return o=ja(7,o,g,l),o.lanes=h,o}function q2(o,l,h){return o=ja(6,o,null,l),o.lanes=h,o}function AN(o){var l=ja(18,null,null,0);return l.stateNode=o,l}function H2(o,l,h){return l=ja(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var EN=new WeakMap;function Ja(o,l){if(typeof o=="object"&&o!==null){var h=EN.get(o);return h!==void 0?h:(l={value:o,source:l,stack:Ie(l)},EN.set(o,l),l)}return{value:o,source:l,stack:Ie(l)}}var nd=[],id=0,p1=null,Af=0,es=[],ts=0,Zl=null,io=1,ao="";function Uo(o,l){nd[id++]=Af,nd[id++]=p1,p1=o,Af=l}function NN(o,l,h){es[ts++]=io,es[ts++]=ao,es[ts++]=Zl,Zl=o;var g=io;o=ao;var x=32-lr(g)-1;g&=~(1<<x),h+=1;var _=32-lr(l)+x;if(30<_){var L=x-x%5;_=(g&(1<<L)-1).toString(32),g>>=L,x-=L,io=1<<32-lr(l)+x|h<<x|g,ao=_+o}else io=1<<_|h<<x|g,ao=o}function G2(o){o.return!==null&&(Uo(o,1),NN(o,1,0))}function K2(o){for(;o===p1;)p1=nd[--id],nd[id]=null,Af=nd[--id],nd[id]=null;for(;o===Zl;)Zl=es[--ts],es[ts]=null,ao=es[--ts],es[ts]=null,io=es[--ts],es[ts]=null}function kN(o,l){es[ts++]=io,es[ts++]=ao,es[ts++]=Zl,io=l.id,ao=l.overflow,Zl=o}var vi=null,tn=null,rr=!1,Jl=null,rs=!1,W2=Error(n(519));function ec(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ef(Ja(l,o)),W2}function ON(o){var l=o.stateNode,h=o.type,g=o.memoizedProps;switch(l[Sr]=o,l[Hr]=g,h){case"dialog":Xt("cancel",l),Xt("close",l);break;case"iframe":case"object":case"embed":Xt("load",l);break;case"video":case"audio":for(h=0;h<Wf.length;h++)Xt(Wf[h],l);break;case"source":Xt("error",l);break;case"img":case"image":case"link":Xt("error",l),Xt("load",l);break;case"details":Xt("toggle",l);break;case"input":Xt("invalid",l),mu(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Xt("invalid",l);break;case"textarea":Xt("invalid",l),Fl(l,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||g.suppressHydrationWarning===!0||Gk(l.textContent,h)?(g.popover!=null&&(Xt("beforetoggle",l),Xt("toggle",l)),g.onScroll!=null&&Xt("scroll",l),g.onScrollEnd!=null&&Xt("scrollend",l),g.onClick!=null&&(l.onclick=si),l=!0):l=!1,l||ec(o,!0)}function jN(o){for(vi=o.return;vi;)switch(vi.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:vi=vi.return}}function ad(o){if(o!==vi)return!1;if(!rr)return jN(o),rr=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||hw(o.type,o.memoizedProps)),h=!h),h&&tn&&ec(o),jN(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));tn=tO(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));tn=tO(o)}else l===27?(l=tn,mc(o.type)?(o=yw,yw=null,tn=o):tn=l):tn=vi?is(o.stateNode.nextSibling):null;return!0}function Eu(){tn=vi=null,rr=!1}function X2(){var o=Jl;return o!==null&&(ma===null?ma=o:ma.push.apply(ma,o),Jl=null),o}function Ef(o){Jl===null?Jl=[o]:Jl.push(o)}var Q2=X(null),Nu=null,zo=null;function tc(o,l,h){le(Q2,l._currentValue),l._currentValue=h}function $o(o){o._currentValue=Q2.current,J(Q2)}function Y2(o,l,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===h)break;o=o.return}}function Z2(o,l,h,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var _=x.dependencies;if(_!==null){var L=x.child;_=_.firstContext;e:for(;_!==null;){var H=_;_=x;for(var ie=0;ie<l.length;ie++)if(H.context===l[ie]){_.lanes|=h,H=_.alternate,H!==null&&(H.lanes|=h),Y2(_.return,h,o),g||(L=null);break e}_=H.next}}else if(x.tag===18){if(L=x.return,L===null)throw Error(n(341));L.lanes|=h,_=L.alternate,_!==null&&(_.lanes|=h),Y2(L,h,o),L=null}else L=x.child;if(L!==null)L.return=x;else for(L=x;L!==null;){if(L===o){L=null;break}if(x=L.sibling,x!==null){x.return=L.return,L=x;break}L=L.return}x=L}}function sd(o,l,h,g){o=null;for(var x=l,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var L=x.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var H=x.type;Oa(x.pendingProps.value,L.value)||(o!==null?o.push(H):o=[H])}}else if(x===Me.current){if(L=x.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Jf):o=[Jf])}x=x.return}o!==null&&Z2(l,o,h,g),l.flags|=262144}function g1(o){for(o=o.firstContext;o!==null;){if(!Oa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ku(o){Nu=o,zo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function bi(o){return CN(Nu,o)}function y1(o,l){return Nu===null&&ku(o),CN(o,l)}function CN(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},zo===null){if(o===null)throw Error(n(308));zo=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else zo=zo.next=l;return h}var kW=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},OW=t.unstable_scheduleCallback,jW=t.unstable_NormalPriority,zn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function J2(){return{controller:new kW,data:new Map,refCount:0}}function Nf(o){o.refCount--,o.refCount===0&&OW(jW,function(){o.controller.abort()})}var kf=null,e4=0,od=0,ld=null;function CW(o,l){if(kf===null){var h=kf=[];e4=0,od=nw(),ld={status:"pending",value:void 0,then:function(g){h.push(g)}}}return e4++,l.then(IN,IN),l}function IN(){if(--e4===0&&kf!==null){ld!==null&&(ld.status="fulfilled");var o=kf;kf=null,od=0,ld=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function IW(o,l){var h=[],g={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<h.length;x++)(0,h[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),g}var RN=K.S;K.S=function(o,l){gk=Tt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&CW(o,l),RN!==null&&RN(o,l)};var Ou=X(null);function t4(){var o=Ou.current;return o!==null?o:Ur.pooledCache}function v1(o,l){l===null?le(Ou,Ou.current):le(Ou,l.pool)}function MN(){var o=t4();return o===null?null:{parent:zn._currentValue,pool:o}}var cd=Error(n(460)),r4=Error(n(474)),b1=Error(n(542)),x1={then:function(){}};function PN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function DN(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(si,si),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,BN(o),o;default:if(typeof l.status=="string")l.then(si,si);else{if(o=Ur,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,BN(o),o}throw Cu=l,cd}}function ju(o){try{var l=o._init;return l(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Cu=h,cd):h}}var Cu=null;function LN(){if(Cu===null)throw Error(n(459));var o=Cu;return Cu=null,o}function BN(o){if(o===cd||o===b1)throw Error(n(483))}var ud=null,Of=0;function w1(o){var l=Of;return Of+=1,ud===null&&(ud=[]),DN(ud,o,l)}function jf(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function _1(o,l){throw l.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function UN(o){function l(me,ue){if(o){var ve=me.deletions;ve===null?(me.deletions=[ue],me.flags|=16):ve.push(ue)}}function h(me,ue){if(!o)return null;for(;ue!==null;)l(me,ue),ue=ue.sibling;return null}function g(me){for(var ue=new Map;me!==null;)me.key!==null?ue.set(me.key,me):ue.set(me.index,me),me=me.sibling;return ue}function x(me,ue){return me=Bo(me,ue),me.index=0,me.sibling=null,me}function _(me,ue,ve){return me.index=ve,o?(ve=me.alternate,ve!==null?(ve=ve.index,ve<ue?(me.flags|=67108866,ue):ve):(me.flags|=67108866,ue)):(me.flags|=1048576,ue)}function L(me){return o&&me.alternate===null&&(me.flags|=67108866),me}function H(me,ue,ve,Re){return ue===null||ue.tag!==6?(ue=q2(ve,me.mode,Re),ue.return=me,ue):(ue=x(ue,ve),ue.return=me,ue)}function ie(me,ue,ve,Re){var vt=ve.type;return vt===S?ke(me,ue,ve.props.children,Re,ve.key):ue!==null&&(ue.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===E&&ju(vt)===ue.type)?(ue=x(ue,ve.props),jf(ue,ve),ue.return=me,ue):(ue=m1(ve.type,ve.key,ve.props,null,me.mode,Re),jf(ue,ve),ue.return=me,ue)}function xe(me,ue,ve,Re){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ve.containerInfo||ue.stateNode.implementation!==ve.implementation?(ue=H2(ve,me.mode,Re),ue.return=me,ue):(ue=x(ue,ve.children||[]),ue.return=me,ue)}function ke(me,ue,ve,Re,vt){return ue===null||ue.tag!==7?(ue=Au(ve,me.mode,Re,vt),ue.return=me,ue):(ue=x(ue,ve),ue.return=me,ue)}function Pe(me,ue,ve){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=q2(""+ue,me.mode,ve),ue.return=me,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return ve=m1(ue.type,ue.key,ue.props,null,me.mode,ve),jf(ve,ue),ve.return=me,ve;case T:return ue=H2(ue,me.mode,ve),ue.return=me,ue;case E:return ue=ju(ue),Pe(me,ue,ve)}if(ee(ue)||V(ue))return ue=Au(ue,me.mode,ve,null),ue.return=me,ue;if(typeof ue.then=="function")return Pe(me,w1(ue),ve);if(ue.$$typeof===C)return Pe(me,y1(me,ue),ve);_1(me,ue)}return null}function _e(me,ue,ve,Re){var vt=ue!==null?ue.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return vt!==null?null:H(me,ue,""+ve,Re);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return ve.key===vt?ie(me,ue,ve,Re):null;case T:return ve.key===vt?xe(me,ue,ve,Re):null;case E:return ve=ju(ve),_e(me,ue,ve,Re)}if(ee(ve)||V(ve))return vt!==null?null:ke(me,ue,ve,Re,null);if(typeof ve.then=="function")return _e(me,ue,w1(ve),Re);if(ve.$$typeof===C)return _e(me,ue,y1(me,ve),Re);_1(me,ve)}return null}function Se(me,ue,ve,Re,vt){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return me=me.get(ve)||null,H(ue,me,""+Re,vt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:return me=me.get(Re.key===null?ve:Re.key)||null,ie(ue,me,Re,vt);case T:return me=me.get(Re.key===null?ve:Re.key)||null,xe(ue,me,Re,vt);case E:return Re=ju(Re),Se(me,ue,ve,Re,vt)}if(ee(Re)||V(Re))return me=me.get(ve)||null,ke(ue,me,Re,vt,null);if(typeof Re.then=="function")return Se(me,ue,ve,w1(Re),vt);if(Re.$$typeof===C)return Se(me,ue,ve,y1(ue,Re),vt);_1(ue,Re)}return null}function ht(me,ue,ve,Re){for(var vt=null,ur=null,gt=ue,Ut=ue=0,Yt=null;gt!==null&&Ut<ve.length;Ut++){gt.index>Ut?(Yt=gt,gt=null):Yt=gt.sibling;var dr=_e(me,gt,ve[Ut],Re);if(dr===null){gt===null&&(gt=Yt);break}o&&gt&&dr.alternate===null&&l(me,gt),ue=_(dr,ue,Ut),ur===null?vt=dr:ur.sibling=dr,ur=dr,gt=Yt}if(Ut===ve.length)return h(me,gt),rr&&Uo(me,Ut),vt;if(gt===null){for(;Ut<ve.length;Ut++)gt=Pe(me,ve[Ut],Re),gt!==null&&(ue=_(gt,ue,Ut),ur===null?vt=gt:ur.sibling=gt,ur=gt);return rr&&Uo(me,Ut),vt}for(gt=g(gt);Ut<ve.length;Ut++)Yt=Se(gt,me,Ut,ve[Ut],Re),Yt!==null&&(o&&Yt.alternate!==null&&gt.delete(Yt.key===null?Ut:Yt.key),ue=_(Yt,ue,Ut),ur===null?vt=Yt:ur.sibling=Yt,ur=Yt);return o&&gt.forEach(function(bc){return l(me,bc)}),rr&&Uo(me,Ut),vt}function St(me,ue,ve,Re){if(ve==null)throw Error(n(151));for(var vt=null,ur=null,gt=ue,Ut=ue=0,Yt=null,dr=ve.next();gt!==null&&!dr.done;Ut++,dr=ve.next()){gt.index>Ut?(Yt=gt,gt=null):Yt=gt.sibling;var bc=_e(me,gt,dr.value,Re);if(bc===null){gt===null&&(gt=Yt);break}o&&gt&&bc.alternate===null&&l(me,gt),ue=_(bc,ue,Ut),ur===null?vt=bc:ur.sibling=bc,ur=bc,gt=Yt}if(dr.done)return h(me,gt),rr&&Uo(me,Ut),vt;if(gt===null){for(;!dr.done;Ut++,dr=ve.next())dr=Pe(me,dr.value,Re),dr!==null&&(ue=_(dr,ue,Ut),ur===null?vt=dr:ur.sibling=dr,ur=dr);return rr&&Uo(me,Ut),vt}for(gt=g(gt);!dr.done;Ut++,dr=ve.next())dr=Se(gt,me,Ut,dr.value,Re),dr!==null&&(o&&dr.alternate!==null&&gt.delete(dr.key===null?Ut:dr.key),ue=_(dr,ue,Ut),ur===null?vt=dr:ur.sibling=dr,ur=dr);return o&&gt.forEach(function(FX){return l(me,FX)}),rr&&Uo(me,Ut),vt}function Cr(me,ue,ve,Re){if(typeof ve=="object"&&ve!==null&&ve.type===S&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:e:{for(var vt=ve.key;ue!==null;){if(ue.key===vt){if(vt=ve.type,vt===S){if(ue.tag===7){h(me,ue.sibling),Re=x(ue,ve.props.children),Re.return=me,me=Re;break e}}else if(ue.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===E&&ju(vt)===ue.type){h(me,ue.sibling),Re=x(ue,ve.props),jf(Re,ve),Re.return=me,me=Re;break e}h(me,ue);break}else l(me,ue);ue=ue.sibling}ve.type===S?(Re=Au(ve.props.children,me.mode,Re,ve.key),Re.return=me,me=Re):(Re=m1(ve.type,ve.key,ve.props,null,me.mode,Re),jf(Re,ve),Re.return=me,me=Re)}return L(me);case T:e:{for(vt=ve.key;ue!==null;){if(ue.key===vt)if(ue.tag===4&&ue.stateNode.containerInfo===ve.containerInfo&&ue.stateNode.implementation===ve.implementation){h(me,ue.sibling),Re=x(ue,ve.children||[]),Re.return=me,me=Re;break e}else{h(me,ue);break}else l(me,ue);ue=ue.sibling}Re=H2(ve,me.mode,Re),Re.return=me,me=Re}return L(me);case E:return ve=ju(ve),Cr(me,ue,ve,Re)}if(ee(ve))return ht(me,ue,ve,Re);if(V(ve)){if(vt=V(ve),typeof vt!="function")throw Error(n(150));return ve=vt.call(ve),St(me,ue,ve,Re)}if(typeof ve.then=="function")return Cr(me,ue,w1(ve),Re);if(ve.$$typeof===C)return Cr(me,ue,y1(me,ve),Re);_1(me,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ue!==null&&ue.tag===6?(h(me,ue.sibling),Re=x(ue,ve),Re.return=me,me=Re):(h(me,ue),Re=q2(ve,me.mode,Re),Re.return=me,me=Re),L(me)):h(me,ue)}return function(me,ue,ve,Re){try{Of=0;var vt=Cr(me,ue,ve,Re);return ud=null,vt}catch(gt){if(gt===cd||gt===b1)throw gt;var ur=ja(29,gt,null,me.mode);return ur.lanes=Re,ur.return=me,ur}finally{}}}var Iu=UN(!0),zN=UN(!1),rc=!1;function n4(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function i4(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function nc(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ic(o,l,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(yr&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=f1(o),SN(o,null,h),l}return h1(o,g,l,h),f1(o)}function Cf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ri(o,h)}}function a4(o,l){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var x=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var L={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?x=_=L:_=_.next=L,h=h.next}while(h!==null);_===null?x=_=l:_=_.next=l}else x=_=l;h={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var s4=!1;function If(){if(s4){var o=ld;if(o!==null)throw o}}function Rf(o,l,h,g){s4=!1;var x=o.updateQueue;rc=!1;var _=x.firstBaseUpdate,L=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var ie=H,xe=ie.next;ie.next=null,L===null?_=xe:L.next=xe,L=ie;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,H=ke.lastBaseUpdate,H!==L&&(H===null?ke.firstBaseUpdate=xe:H.next=xe,ke.lastBaseUpdate=ie))}if(_!==null){var Pe=x.baseState;L=0,ke=xe=ie=null,H=_;do{var _e=H.lane&-536870913,Se=_e!==H.lane;if(Se?(Qt&_e)===_e:(g&_e)===_e){_e!==0&&_e===od&&(s4=!0),ke!==null&&(ke=ke.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var ht=o,St=H;_e=l;var Cr=h;switch(St.tag){case 1:if(ht=St.payload,typeof ht=="function"){Pe=ht.call(Cr,Pe,_e);break e}Pe=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=St.payload,_e=typeof ht=="function"?ht.call(Cr,Pe,_e):ht,_e==null)break e;Pe=p({},Pe,_e);break e;case 2:rc=!0}}_e=H.callback,_e!==null&&(o.flags|=64,Se&&(o.flags|=8192),Se=x.callbacks,Se===null?x.callbacks=[_e]:Se.push(_e))}else Se={lane:_e,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ke===null?(xe=ke=Se,ie=Pe):ke=ke.next=Se,L|=_e;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;Se=H,H=Se.next,Se.next=null,x.lastBaseUpdate=Se,x.shared.pending=null}}while(!0);ke===null&&(ie=Pe),x.baseState=ie,x.firstBaseUpdate=xe,x.lastBaseUpdate=ke,_===null&&(x.shared.lanes=0),cc|=L,o.lanes=L,o.memoizedState=Pe}}function $N(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function VN(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)$N(h[o],l)}var dd=X(null),S1=X(0);function FN(o,l){o=Qo,le(S1,o),le(dd,l),Qo=o|l.baseLanes}function o4(){le(S1,Qo),le(dd,dd.current)}function l4(){Qo=S1.current,J(dd),J(S1)}var Ca=X(null),ns=null;function ac(o){var l=o.alternate;le(On,On.current&1),le(Ca,o),ns===null&&(l===null||dd.current!==null||l.memoizedState!==null)&&(ns=o)}function c4(o){le(On,On.current),le(Ca,o),ns===null&&(ns=o)}function qN(o){o.tag===22?(le(On,On.current),le(Ca,o),ns===null&&(ns=o)):sc()}function sc(){le(On,On.current),le(Ca,Ca.current)}function Ia(o){J(Ca),ns===o&&(ns=null),J(On)}var On=X(0);function T1(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||pw(h)||gw(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vo=0,Lt=null,Or=null,$n=null,A1=!1,hd=!1,Ru=!1,E1=0,Mf=0,fd=null,RW=0;function bn(){throw Error(n(321))}function u4(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Oa(o[h],l[h]))return!1;return!0}function d4(o,l,h,g,x,_){return Vo=_,Lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=o===null||o.memoizedState===null?N9:E4,Ru=!1,_=h(g,x),Ru=!1,hd&&(_=GN(l,h,g,x)),HN(o),_}function HN(o){K.H=Lf;var l=Or!==null&&Or.next!==null;if(Vo=0,$n=Or=Lt=null,A1=!1,Mf=0,fd=null,l)throw Error(n(300));o===null||Vn||(o=o.dependencies,o!==null&&g1(o)&&(Vn=!0))}function GN(o,l,h,g){Lt=o;var x=0;do{if(hd&&(fd=null),Mf=0,hd=!1,25<=x)throw Error(n(301));if(x+=1,$n=Or=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}K.H=k9,_=l(h,g)}while(hd);return _}function MW(){var o=K.H,l=o.useState()[0];return l=typeof l.then=="function"?Pf(l):l,o=o.useState()[0],(Or!==null?Or.memoizedState:null)!==o&&(Lt.flags|=1024),l}function h4(){var o=E1!==0;return E1=0,o}function f4(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function m4(o){if(A1){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}A1=!1}Vo=0,$n=Or=Lt=null,hd=!1,Mf=E1=0,fd=null}function Wi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Lt.memoizedState=$n=o:$n=$n.next=o,$n}function jn(){if(Or===null){var o=Lt.alternate;o=o!==null?o.memoizedState:null}else o=Or.next;var l=$n===null?Lt.memoizedState:$n.next;if(l!==null)$n=l,Or=o;else{if(o===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));Or=o,o={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},$n===null?Lt.memoizedState=$n=o:$n=$n.next=o}return $n}function N1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pf(o){var l=Mf;return Mf+=1,fd===null&&(fd=[]),o=DN(fd,o,l),l=Lt,($n===null?l.memoizedState:$n.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?N9:E4),o}function k1(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Pf(o);if(o.$$typeof===C)return bi(o)}throw Error(n(438,String(o)))}function p4(o){var l=null,h=Lt.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var g=Lt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=N1(),Lt.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),g=0;g<o;g++)h[g]=U;return l.index++,h}function Fo(o,l){return typeof l=="function"?l(o):l}function O1(o){var l=jn();return g4(l,Or,o)}function g4(o,l,h){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=h;var x=o.baseQueue,_=g.pending;if(_!==null){if(x!==null){var L=x.next;x.next=_.next,_.next=L}l.baseQueue=x=_,g.pending=null}if(_=o.baseState,x===null)o.memoizedState=_;else{l=x.next;var H=L=null,ie=null,xe=l,ke=!1;do{var Pe=xe.lane&-536870913;if(Pe!==xe.lane?(Qt&Pe)===Pe:(Vo&Pe)===Pe){var _e=xe.revertLane;if(_e===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Pe===od&&(ke=!0);else if((Vo&_e)===_e){xe=xe.next,_e===od&&(ke=!0);continue}else Pe={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ie===null?(H=ie=Pe,L=_):ie=ie.next=Pe,Lt.lanes|=_e,cc|=_e;Pe=xe.action,Ru&&h(_,Pe),_=xe.hasEagerState?xe.eagerState:h(_,Pe)}else _e={lane:Pe,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ie===null?(H=ie=_e,L=_):ie=ie.next=_e,Lt.lanes|=Pe,cc|=Pe;xe=xe.next}while(xe!==null&&xe!==l);if(ie===null?L=_:ie.next=H,!Oa(_,o.memoizedState)&&(Vn=!0,ke&&(h=ld,h!==null)))throw h;o.memoizedState=_,o.baseState=L,o.baseQueue=ie,g.lastRenderedState=_}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function y4(o){var l=jn(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,x=h.pending,_=l.memoizedState;if(x!==null){h.pending=null;var L=x=x.next;do _=o(_,L.action),L=L.next;while(L!==x);Oa(_,l.memoizedState)||(Vn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),h.lastRenderedState=_}return[_,g]}function KN(o,l,h){var g=Lt,x=jn(),_=rr;if(_){if(h===void 0)throw Error(n(407));h=h()}else h=l();var L=!Oa((Or||x).memoizedState,h);if(L&&(x.memoizedState=h,Vn=!0),x=x.queue,x4(QN.bind(null,g,x,o),[o]),x.getSnapshot!==l||L||$n!==null&&$n.memoizedState.tag&1){if(g.flags|=2048,md(9,{destroy:void 0},XN.bind(null,g,x,h,l),null),Ur===null)throw Error(n(349));_||(Vo&127)!==0||WN(g,l,h)}return h}function WN(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Lt.updateQueue,l===null?(l=N1(),Lt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function XN(o,l,h,g){l.value=h,l.getSnapshot=g,YN(l)&&ZN(o)}function QN(o,l,h){return h(function(){YN(l)&&ZN(o)})}function YN(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Oa(o,h)}catch{return!0}}function ZN(o){var l=Tu(o,2);l!==null&&pa(l,o,2)}function v4(o){var l=Wi();if(typeof o=="function"){var h=o;if(o=h(),Ru){hn(!0);try{h()}finally{hn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:o},l}function JN(o,l,h,g){return o.baseState=h,g4(o,Or,typeof g=="function"?g:Fo)}function PW(o,l,h,g,x){if(I1(o))throw Error(n(485));if(o=l.action,o!==null){var _={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){_.listeners.push(L)}};K.T!==null?h(!0):_.isTransition=!1,g(_),h=l.pending,h===null?(_.next=l.pending=_,e9(l,_)):(_.next=h.next,l.pending=h.next=_)}}function e9(o,l){var h=l.action,g=l.payload,x=o.state;if(l.isTransition){var _=K.T,L={};K.T=L;try{var H=h(x,g),ie=K.S;ie!==null&&ie(L,H),t9(o,l,H)}catch(xe){b4(o,l,xe)}finally{_!==null&&L.types!==null&&(_.types=L.types),K.T=_}}else try{_=h(x,g),t9(o,l,_)}catch(xe){b4(o,l,xe)}}function t9(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){r9(o,l,g)},function(g){return b4(o,l,g)}):r9(o,l,h)}function r9(o,l,h){l.status="fulfilled",l.value=h,n9(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,e9(o,h)))}function b4(o,l,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=h,n9(l),l=l.next;while(l!==g)}o.action=null}function n9(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function i9(o,l){return l}function a9(o,l){if(rr){var h=Ur.formState;if(h!==null){e:{var g=Lt;if(rr){if(tn){t:{for(var x=tn,_=rs;x.nodeType!==8;){if(!_){x=null;break t}if(x=is(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){tn=is(x.nextSibling),g=x.data==="F!";break e}}ec(g)}g=!1}g&&(l=h[0])}}return h=Wi(),h.memoizedState=h.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i9,lastRenderedState:l},h.queue=g,h=T9.bind(null,Lt,g),g.dispatch=h,g=v4(!1),_=A4.bind(null,Lt,!1,g.queue),g=Wi(),x={state:l,dispatch:null,action:o,pending:null},g.queue=x,h=PW.bind(null,Lt,x,_,h),x.dispatch=h,g.memoizedState=o,[l,h,!1]}function s9(o){var l=jn();return o9(l,Or,o)}function o9(o,l,h){if(l=g4(o,l,i9)[0],o=O1(Fo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Pf(l)}catch(L){throw L===cd?b1:L}else g=l;l=jn();var x=l.queue,_=x.dispatch;return h!==l.memoizedState&&(Lt.flags|=2048,md(9,{destroy:void 0},DW.bind(null,x,h),null)),[g,_,o]}function DW(o,l){o.action=l}function l9(o){var l=jn(),h=Or;if(h!==null)return o9(l,h,o);jn(),l=l.memoizedState,h=jn();var g=h.queue.dispatch;return h.memoizedState=o,[l,g,!1]}function md(o,l,h,g){return o={tag:o,create:h,deps:g,inst:l,next:null},l=Lt.updateQueue,l===null&&(l=N1(),Lt.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,l.lastEffect=o),o}function c9(){return jn().memoizedState}function j1(o,l,h,g){var x=Wi();Lt.flags|=o,x.memoizedState=md(1|l,{destroy:void 0},h,g===void 0?null:g)}function C1(o,l,h,g){var x=jn();g=g===void 0?null:g;var _=x.memoizedState.inst;Or!==null&&g!==null&&u4(g,Or.memoizedState.deps)?x.memoizedState=md(l,_,h,g):(Lt.flags|=o,x.memoizedState=md(1|l,_,h,g))}function u9(o,l){j1(8390656,8,o,l)}function x4(o,l){C1(2048,8,o,l)}function LW(o){Lt.flags|=4;var l=Lt.updateQueue;if(l===null)l=N1(),Lt.updateQueue=l,l.events=[o];else{var h=l.events;h===null?l.events=[o]:h.push(o)}}function d9(o){var l=jn().memoizedState;return LW({ref:l,nextImpl:o}),function(){if((yr&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function h9(o,l){return C1(4,2,o,l)}function f9(o,l){return C1(4,4,o,l)}function m9(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function p9(o,l,h){h=h!=null?h.concat([o]):null,C1(4,4,m9.bind(null,l,o),h)}function w4(){}function g9(o,l){var h=jn();l=l===void 0?null:l;var g=h.memoizedState;return l!==null&&u4(l,g[1])?g[0]:(h.memoizedState=[o,l],o)}function y9(o,l){var h=jn();l=l===void 0?null:l;var g=h.memoizedState;if(l!==null&&u4(l,g[1]))return g[0];if(g=o(),Ru){hn(!0);try{o()}finally{hn(!1)}}return h.memoizedState=[g,l],g}function _4(o,l,h){return h===void 0||(Vo&1073741824)!==0&&(Qt&261930)===0?o.memoizedState=l:(o.memoizedState=h,o=vk(),Lt.lanes|=o,cc|=o,h)}function v9(o,l,h,g){return Oa(h,l)?h:dd.current!==null?(o=_4(o,h,g),Oa(o,l)||(Vn=!0),o):(Vo&42)===0||(Vo&1073741824)!==0&&(Qt&261930)===0?(Vn=!0,o.memoizedState=h):(o=vk(),Lt.lanes|=o,cc|=o,l)}function b9(o,l,h,g,x){var _=Z.p;Z.p=_!==0&&8>_?_:8;var L=K.T,H={};K.T=H,A4(o,!1,l,h);try{var ie=x(),xe=K.S;if(xe!==null&&xe(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var ke=IW(ie,g);Df(o,l,ke,Pa(o))}else Df(o,l,g,Pa(o))}catch(Pe){Df(o,l,{then:function(){},status:"rejected",reason:Pe},Pa())}finally{Z.p=_,L!==null&&H.types!==null&&(L.types=H.types),K.T=L}}function BW(){}function S4(o,l,h,g){if(o.tag!==5)throw Error(n(476));var x=x9(o).queue;b9(o,x,l,Y,h===null?BW:function(){return w9(o),h(g)})}function x9(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:Y},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function w9(o){var l=x9(o);l.next===null&&(l=o.alternate.memoizedState),Df(o,l.next.queue,{},Pa())}function T4(){return bi(Jf)}function _9(){return jn().memoizedState}function S9(){return jn().memoizedState}function UW(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=Pa();o=nc(h);var g=ic(l,o,h);g!==null&&(pa(g,l,h),Cf(g,l,h)),l={cache:J2()},o.payload=l;return}l=l.return}}function zW(o,l,h){var g=Pa();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},I1(o)?A9(l,h):(h=V2(o,l,h,g),h!==null&&(pa(h,o,g),E9(h,l,g)))}function T9(o,l,h){var g=Pa();Df(o,l,h,g)}function Df(o,l,h,g){var x={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(I1(o))A9(l,x);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var L=l.lastRenderedState,H=_(L,h);if(x.hasEagerState=!0,x.eagerState=H,Oa(H,L))return h1(o,l,x,0),Ur===null&&d1(),!1}catch{}finally{}if(h=V2(o,l,x,g),h!==null)return pa(h,o,g),E9(h,l,g),!0}return!1}function A4(o,l,h,g){if(g={lane:2,revertLane:nw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},I1(o)){if(l)throw Error(n(479))}else l=V2(o,h,g,2),l!==null&&pa(l,o,2)}function I1(o){var l=o.alternate;return o===Lt||l!==null&&l===Lt}function A9(o,l){hd=A1=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function E9(o,l,h){if((h&4194048)!==0){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ri(o,h)}}var Lf={readContext:bi,use:k1,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};Lf.useEffectEvent=bn;var N9={readContext:bi,use:k1,useCallback:function(o,l){return Wi().memoizedState=[o,l===void 0?null:l],o},useContext:bi,useEffect:u9,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,j1(4194308,4,m9.bind(null,l,o),h)},useLayoutEffect:function(o,l){return j1(4194308,4,o,l)},useInsertionEffect:function(o,l){j1(4,2,o,l)},useMemo:function(o,l){var h=Wi();l=l===void 0?null:l;var g=o();if(Ru){hn(!0);try{o()}finally{hn(!1)}}return h.memoizedState=[g,l],g},useReducer:function(o,l,h){var g=Wi();if(h!==void 0){var x=h(l);if(Ru){hn(!0);try{h(l)}finally{hn(!1)}}}else x=l;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=zW.bind(null,Lt,o),[g.memoizedState,o]},useRef:function(o){var l=Wi();return o={current:o},l.memoizedState=o},useState:function(o){o=v4(o);var l=o.queue,h=T9.bind(null,Lt,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:w4,useDeferredValue:function(o,l){var h=Wi();return _4(h,o,l)},useTransition:function(){var o=v4(!1);return o=b9.bind(null,Lt,o.queue,!0,!1),Wi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var g=Lt,x=Wi();if(rr){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Ur===null)throw Error(n(349));(Qt&127)!==0||WN(g,l,h)}x.memoizedState=h;var _={value:h,getSnapshot:l};return x.queue=_,u9(QN.bind(null,g,_,o),[o]),g.flags|=2048,md(9,{destroy:void 0},XN.bind(null,g,_,h,l),null),h},useId:function(){var o=Wi(),l=Ur.identifierPrefix;if(rr){var h=ao,g=io;h=(g&~(1<<32-lr(g)-1)).toString(32)+h,l="_"+l+"R_"+h,h=E1++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=RW++,l="_"+l+"r_"+h.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:T4,useFormState:a9,useActionState:a9,useOptimistic:function(o){var l=Wi();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=A4.bind(null,Lt,!0,h),h.dispatch=l,[o,l]},useMemoCache:p4,useCacheRefresh:function(){return Wi().memoizedState=UW.bind(null,Lt)},useEffectEvent:function(o){var l=Wi(),h={impl:o};return l.memoizedState=h,function(){if((yr&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},E4={readContext:bi,use:k1,useCallback:g9,useContext:bi,useEffect:x4,useImperativeHandle:p9,useInsertionEffect:h9,useLayoutEffect:f9,useMemo:y9,useReducer:O1,useRef:c9,useState:function(){return O1(Fo)},useDebugValue:w4,useDeferredValue:function(o,l){var h=jn();return v9(h,Or.memoizedState,o,l)},useTransition:function(){var o=O1(Fo)[0],l=jn().memoizedState;return[typeof o=="boolean"?o:Pf(o),l]},useSyncExternalStore:KN,useId:_9,useHostTransitionStatus:T4,useFormState:s9,useActionState:s9,useOptimistic:function(o,l){var h=jn();return JN(h,Or,o,l)},useMemoCache:p4,useCacheRefresh:S9};E4.useEffectEvent=d9;var k9={readContext:bi,use:k1,useCallback:g9,useContext:bi,useEffect:x4,useImperativeHandle:p9,useInsertionEffect:h9,useLayoutEffect:f9,useMemo:y9,useReducer:y4,useRef:c9,useState:function(){return y4(Fo)},useDebugValue:w4,useDeferredValue:function(o,l){var h=jn();return Or===null?_4(h,o,l):v9(h,Or.memoizedState,o,l)},useTransition:function(){var o=y4(Fo)[0],l=jn().memoizedState;return[typeof o=="boolean"?o:Pf(o),l]},useSyncExternalStore:KN,useId:_9,useHostTransitionStatus:T4,useFormState:l9,useActionState:l9,useOptimistic:function(o,l){var h=jn();return Or!==null?JN(h,Or,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:p4,useCacheRefresh:S9};k9.useEffectEvent=d9;function N4(o,l,h,g){l=o.memoizedState,h=h(g,l),h=h==null?l:p({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var k4={enqueueSetState:function(o,l,h){o=o._reactInternals;var g=Pa(),x=nc(g);x.payload=l,h!=null&&(x.callback=h),l=ic(o,x,g),l!==null&&(pa(l,o,g),Cf(l,o,g))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var g=Pa(),x=nc(g);x.tag=1,x.payload=l,h!=null&&(x.callback=h),l=ic(o,x,g),l!==null&&(pa(l,o,g),Cf(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Pa(),g=nc(h);g.tag=2,l!=null&&(g.callback=l),l=ic(o,g,h),l!==null&&(pa(l,o,h),Cf(l,o,h))}};function O9(o,l,h,g,x,_,L){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,L):l.prototype&&l.prototype.isPureReactComponent?!Sf(h,g)||!Sf(x,_):!0}function j9(o,l,h,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==o&&k4.enqueueReplaceState(l,l.state,null)}function Mu(o,l){var h=l;if("ref"in l){h={};for(var g in l)g!=="ref"&&(h[g]=l[g])}if(o=o.defaultProps){h===l&&(h=p({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function C9(o){u1(o)}function I9(o){console.error(o)}function R9(o){u1(o)}function R1(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function M9(o,l,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function O4(o,l,h){return h=nc(h),h.tag=3,h.payload={element:null},h.callback=function(){R1(o,l)},h}function P9(o){return o=nc(o),o.tag=3,o}function D9(o,l,h,g){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var _=g.value;o.payload=function(){return x(_)},o.callback=function(){M9(l,h,g)}}var L=h.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(o.callback=function(){M9(l,h,g),typeof x!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function $W(o,l,h,g,x){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=h.alternate,l!==null&&sd(l,h,x,!0),h=Ca.current,h!==null){switch(h.tag){case 31:case 13:return ns===null?H1():h.alternate===null&&xn===0&&(xn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,g===x1?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([g]):l.add(g),ew(o,g,x)),!1;case 22:return h.flags|=65536,g===x1?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([g]):h.add(g)),ew(o,g,x)),!1}throw Error(n(435,h.tag))}return ew(o,g,x),H1(),!1}if(rr)return l=Ca.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==W2&&(o=Error(n(422),{cause:g}),Ef(Ja(o,h)))):(g!==W2&&(l=Error(n(423),{cause:g}),Ef(Ja(l,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=Ja(g,h),x=O4(o.stateNode,g,x),a4(o,x),xn!==4&&(xn=2)),!1;var _=Error(n(520),{cause:g});if(_=Ja(_,h),Hf===null?Hf=[_]:Hf.push(_),xn!==4&&(xn=2),l===null)return!0;g=Ja(g,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=O4(h.stateNode,g,o),a4(h,o),!1;case 1:if(l=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(uc===null||!uc.has(_))))return h.flags|=65536,x&=-x,h.lanes|=x,x=P9(x),D9(x,o,h,g),a4(h,x),!1}h=h.return}while(h!==null);return!1}var j4=Error(n(461)),Vn=!1;function xi(o,l,h,g){l.child=o===null?zN(l,null,h,g):Iu(l,o.child,h,g)}function L9(o,l,h,g,x){h=h.render;var _=l.ref;if("ref"in g){var L={};for(var H in g)H!=="ref"&&(L[H]=g[H])}else L=g;return ku(l),g=d4(o,l,h,L,_,x),H=h4(),o!==null&&!Vn?(f4(o,l,x),qo(o,l,x)):(rr&&H&&G2(l),l.flags|=1,xi(o,l,g,x),l.child)}function B9(o,l,h,g,x){if(o===null){var _=h.type;return typeof _=="function"&&!F2(_)&&_.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=_,U9(o,l,_,g,x)):(o=m1(h.type,null,g,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!B4(o,x)){var L=_.memoizedProps;if(h=h.compare,h=h!==null?h:Sf,h(L,g)&&o.ref===l.ref)return qo(o,l,x)}return l.flags|=1,o=Bo(_,g),o.ref=l.ref,o.return=l,l.child=o}function U9(o,l,h,g,x){if(o!==null){var _=o.memoizedProps;if(Sf(_,g)&&o.ref===l.ref)if(Vn=!1,l.pendingProps=g=_,B4(o,x))(o.flags&131072)!==0&&(Vn=!0);else return l.lanes=o.lanes,qo(o,l,x)}return C4(o,l,h,g,x)}function z9(o,l,h,g){var x=g.children,_=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,o!==null){for(g=l.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~_}else g=0,l.child=null;return $9(o,l,_,h,g)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&v1(l,_!==null?_.cachePool:null),_!==null?FN(l,_):o4(),qN(l);else return g=l.lanes=536870912,$9(o,l,_!==null?_.baseLanes|h:h,h,g)}else _!==null?(v1(l,_.cachePool),FN(l,_),sc(),l.memoizedState=null):(o!==null&&v1(l,null),o4(),sc());return xi(o,l,x,h),l.child}function Bf(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function $9(o,l,h,g,x){var _=t4();return _=_===null?null:{parent:zn._currentValue,pool:_},l.memoizedState={baseLanes:h,cachePool:_},o!==null&&v1(l,null),o4(),qN(l),o!==null&&sd(o,l,g,!0),l.childLanes=x,null}function M1(o,l){return l=D1({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function V9(o,l,h){return Iu(l,o.child,null,h),o=M1(l,l.pendingProps),o.flags|=2,Ia(l),l.memoizedState=null,o}function VW(o,l,h){var g=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(rr){if(g.mode==="hidden")return o=M1(l,g),l.lanes=536870912,Bf(null,o);if(c4(l),(o=tn)?(o=eO(o,rs),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Zl!==null?{id:io,overflow:ao}:null,retryLane:536870912,hydrationErrors:null},h=AN(o),h.return=l,l.child=h,vi=l,tn=null)):o=null,o===null)throw ec(l);return l.lanes=536870912,null}return M1(l,g)}var _=o.memoizedState;if(_!==null){var L=_.dehydrated;if(c4(l),x)if(l.flags&256)l.flags&=-257,l=V9(o,l,h);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(Vn||sd(o,l,h,!1),x=(h&o.childLanes)!==0,Vn||x){if(g=Ur,g!==null&&(L=Hi(g,h),L!==0&&L!==_.retryLane))throw _.retryLane=L,Tu(o,L),pa(g,o,L),j4;H1(),l=V9(o,l,h)}else o=_.treeContext,tn=is(L.nextSibling),vi=l,rr=!0,Jl=null,rs=!1,o!==null&&kN(l,o),l=M1(l,g),l.flags|=4096;return l}return o=Bo(o.child,{mode:g.mode,children:g.children}),o.ref=l.ref,l.child=o,o.return=l,o}function P1(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function C4(o,l,h,g,x){return ku(l),h=d4(o,l,h,g,void 0,x),g=h4(),o!==null&&!Vn?(f4(o,l,x),qo(o,l,x)):(rr&&g&&G2(l),l.flags|=1,xi(o,l,h,x),l.child)}function F9(o,l,h,g,x,_){return ku(l),l.updateQueue=null,h=GN(l,g,h,x),HN(o),g=h4(),o!==null&&!Vn?(f4(o,l,_),qo(o,l,_)):(rr&&g&&G2(l),l.flags|=1,xi(o,l,h,_),l.child)}function q9(o,l,h,g,x){if(ku(l),l.stateNode===null){var _=rd,L=h.contextType;typeof L=="object"&&L!==null&&(_=bi(L)),_=new h(g,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=k4,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=g,_.state=l.memoizedState,_.refs={},n4(l),L=h.contextType,_.context=typeof L=="object"&&L!==null?bi(L):rd,_.state=l.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(N4(l,h,L,g),_.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(L=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),L!==_.state&&k4.enqueueReplaceState(_,_.state,null),Rf(l,g,_,x),If(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(o===null){_=l.stateNode;var H=l.memoizedProps,ie=Mu(h,H);_.props=ie;var xe=_.context,ke=h.contextType;L=rd,typeof ke=="object"&&ke!==null&&(L=bi(ke));var Pe=h.getDerivedStateFromProps;ke=typeof Pe=="function"||typeof _.getSnapshotBeforeUpdate=="function",H=l.pendingProps!==H,ke||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H||xe!==L)&&j9(l,_,g,L),rc=!1;var _e=l.memoizedState;_.state=_e,Rf(l,g,_,x),If(),xe=l.memoizedState,H||_e!==xe||rc?(typeof Pe=="function"&&(N4(l,h,Pe,g),xe=l.memoizedState),(ie=rc||O9(l,h,ie,g,_e,xe,L))?(ke||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=xe),_.props=g,_.state=xe,_.context=L,g=ie):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{_=l.stateNode,i4(o,l),L=l.memoizedProps,ke=Mu(h,L),_.props=ke,Pe=l.pendingProps,_e=_.context,xe=h.contextType,ie=rd,typeof xe=="object"&&xe!==null&&(ie=bi(xe)),H=h.getDerivedStateFromProps,(xe=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L!==Pe||_e!==ie)&&j9(l,_,g,ie),rc=!1,_e=l.memoizedState,_.state=_e,Rf(l,g,_,x),If();var Se=l.memoizedState;L!==Pe||_e!==Se||rc||o!==null&&o.dependencies!==null&&g1(o.dependencies)?(typeof H=="function"&&(N4(l,h,H,g),Se=l.memoizedState),(ke=rc||O9(l,h,ke,g,_e,Se,ie)||o!==null&&o.dependencies!==null&&g1(o.dependencies))?(xe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Se,ie),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Se,ie)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Se),_.props=g,_.state=Se,_.context=ie,g=ke):(typeof _.componentDidUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),g=!1)}return _=g,P1(o,l),g=(l.flags&128)!==0,_||g?(_=l.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&g?(l.child=Iu(l,o.child,null,x),l.child=Iu(l,null,h,x)):xi(o,l,h,x),l.memoizedState=_.state,o=l.child):o=qo(o,l,x),o}function H9(o,l,h,g){return Eu(),l.flags|=256,xi(o,l,h,g),l.child}var I4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function R4(o){return{baseLanes:o,cachePool:MN()}}function M4(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Ma),o}function G9(o,l,h){var g=l.pendingProps,x=!1,_=(l.flags&128)!==0,L;if((L=_)||(L=o!==null&&o.memoizedState===null?!1:(On.current&2)!==0),L&&(x=!0,l.flags&=-129),L=(l.flags&32)!==0,l.flags&=-33,o===null){if(rr){if(x?ac(l):sc(),(o=tn)?(o=eO(o,rs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Zl!==null?{id:io,overflow:ao}:null,retryLane:536870912,hydrationErrors:null},h=AN(o),h.return=l,l.child=h,vi=l,tn=null)):o=null,o===null)throw ec(l);return gw(o)?l.lanes=32:l.lanes=536870912,null}var H=g.children;return g=g.fallback,x?(sc(),x=l.mode,H=D1({mode:"hidden",children:H},x),g=Au(g,x,h,null),H.return=l,g.return=l,H.sibling=g,l.child=H,g=l.child,g.memoizedState=R4(h),g.childLanes=M4(o,L,h),l.memoizedState=I4,Bf(null,g)):(ac(l),P4(l,H))}var ie=o.memoizedState;if(ie!==null&&(H=ie.dehydrated,H!==null)){if(_)l.flags&256?(ac(l),l.flags&=-257,l=D4(o,l,h)):l.memoizedState!==null?(sc(),l.child=o.child,l.flags|=128,l=null):(sc(),H=g.fallback,x=l.mode,g=D1({mode:"visible",children:g.children},x),H=Au(H,x,h,null),H.flags|=2,g.return=l,H.return=l,g.sibling=H,l.child=g,Iu(l,o.child,null,h),g=l.child,g.memoizedState=R4(h),g.childLanes=M4(o,L,h),l.memoizedState=I4,l=Bf(null,g));else if(ac(l),gw(H)){if(L=H.nextSibling&&H.nextSibling.dataset,L)var xe=L.dgst;L=xe,g=Error(n(419)),g.stack="",g.digest=L,Ef({value:g,source:null,stack:null}),l=D4(o,l,h)}else if(Vn||sd(o,l,h,!1),L=(h&o.childLanes)!==0,Vn||L){if(L=Ur,L!==null&&(g=Hi(L,h),g!==0&&g!==ie.retryLane))throw ie.retryLane=g,Tu(o,g),pa(L,o,g),j4;pw(H)||H1(),l=D4(o,l,h)}else pw(H)?(l.flags|=192,l.child=o.child,l=null):(o=ie.treeContext,tn=is(H.nextSibling),vi=l,rr=!0,Jl=null,rs=!1,o!==null&&kN(l,o),l=P4(l,g.children),l.flags|=4096);return l}return x?(sc(),H=g.fallback,x=l.mode,ie=o.child,xe=ie.sibling,g=Bo(ie,{mode:"hidden",children:g.children}),g.subtreeFlags=ie.subtreeFlags&65011712,xe!==null?H=Bo(xe,H):(H=Au(H,x,h,null),H.flags|=2),H.return=l,g.return=l,g.sibling=H,l.child=g,Bf(null,g),g=l.child,H=o.child.memoizedState,H===null?H=R4(h):(x=H.cachePool,x!==null?(ie=zn._currentValue,x=x.parent!==ie?{parent:ie,pool:ie}:x):x=MN(),H={baseLanes:H.baseLanes|h,cachePool:x}),g.memoizedState=H,g.childLanes=M4(o,L,h),l.memoizedState=I4,Bf(o.child,g)):(ac(l),h=o.child,o=h.sibling,h=Bo(h,{mode:"visible",children:g.children}),h.return=l,h.sibling=null,o!==null&&(L=l.deletions,L===null?(l.deletions=[o],l.flags|=16):L.push(o)),l.child=h,l.memoizedState=null,h)}function P4(o,l){return l=D1({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function D1(o,l){return o=ja(22,o,null,l),o.lanes=0,o}function D4(o,l,h){return Iu(l,o.child,null,h),o=P4(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function K9(o,l,h){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),Y2(o.return,l,h)}function L4(o,l,h,g,x,_){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:x,treeForkCount:_}:(L.isBackwards=l,L.rendering=null,L.renderingStartTime=0,L.last=g,L.tail=h,L.tailMode=x,L.treeForkCount=_)}function W9(o,l,h){var g=l.pendingProps,x=g.revealOrder,_=g.tail;g=g.children;var L=On.current,H=(L&2)!==0;if(H?(L=L&1|2,l.flags|=128):L&=1,le(On,L),xi(o,l,g,h),g=rr?Af:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&K9(o,h,l);else if(o.tag===19)K9(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&T1(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),L4(l,!1,x,h,_,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&T1(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}L4(l,!0,h,null,_,g);break;case"together":L4(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function qo(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),cc|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(sd(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=Bo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Bo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function B4(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&g1(o)))}function FW(o,l,h){switch(l.tag){case 3:at(l,l.stateNode.containerInfo),tc(l,zn,o.memoizedState.cache),Eu();break;case 27:case 5:$e(l);break;case 4:at(l,l.stateNode.containerInfo);break;case 10:tc(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,c4(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(ac(l),l.flags|=128,null):(h&l.child.childLanes)!==0?G9(o,l,h):(ac(l),o=qo(o,l,h),o!==null?o.sibling:null);ac(l);break;case 19:var x=(o.flags&128)!==0;if(g=(h&l.childLanes)!==0,g||(sd(o,l,h,!1),g=(h&l.childLanes)!==0),x){if(g)return W9(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),le(On,On.current),g)break;return null;case 22:return l.lanes=0,z9(o,l,h,l.pendingProps);case 24:tc(l,zn,o.memoizedState.cache)}return qo(o,l,h)}function X9(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)Vn=!0;else{if(!B4(o,h)&&(l.flags&128)===0)return Vn=!1,FW(o,l,h);Vn=(o.flags&131072)!==0}else Vn=!1,rr&&(l.flags&1048576)!==0&&NN(l,Af,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(o=ju(l.elementType),l.type=o,typeof o=="function")F2(o)?(g=Mu(o,g),l.tag=1,l=q9(null,l,o,g,h)):(l.tag=0,l=C4(null,l,o,g,h));else{if(o!=null){var x=o.$$typeof;if(x===B){l.tag=11,l=L9(null,l,o,g,h);break e}else if(x===A){l.tag=14,l=B9(null,l,o,g,h);break e}}throw l=Q(o)||o,Error(n(306,l,""))}}return l;case 0:return C4(o,l,l.type,l.pendingProps,h);case 1:return g=l.type,x=Mu(g,l.pendingProps),q9(o,l,g,x,h);case 3:e:{if(at(l,l.stateNode.containerInfo),o===null)throw Error(n(387));g=l.pendingProps;var _=l.memoizedState;x=_.element,i4(o,l),Rf(l,g,null,h);var L=l.memoizedState;if(g=L.cache,tc(l,zn,g),g!==_.cache&&Z2(l,[zn],h,!0),If(),g=L.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=H9(o,l,g,h);break e}else if(g!==x){x=Ja(Error(n(424)),l),Ef(x),l=H9(o,l,g,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(tn=is(o.firstChild),vi=l,rr=!0,Jl=null,rs=!0,h=zN(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Eu(),g===x){l=qo(o,l,h);break e}xi(o,l,g,h)}l=l.child}return l;case 26:return P1(o,l),o===null?(h=sO(l.type,null,l.pendingProps,null))?l.memoizedState=h:rr||(h=l.type,o=l.pendingProps,g=Z1(Oe.current).createElement(h),g[Sr]=l,g[Hr]=o,wi(g,h,o),qt(g),l.stateNode=g):l.memoizedState=sO(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return $e(l),o===null&&rr&&(g=l.stateNode=nO(l.type,l.pendingProps,Oe.current),vi=l,rs=!0,x=tn,mc(l.type)?(yw=x,tn=is(g.firstChild)):tn=x),xi(o,l,l.pendingProps.children,h),P1(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&rr&&((x=g=tn)&&(g=bX(g,l.type,l.pendingProps,rs),g!==null?(l.stateNode=g,vi=l,tn=is(g.firstChild),rs=!1,x=!0):x=!1),x||ec(l)),$e(l),x=l.type,_=l.pendingProps,L=o!==null?o.memoizedProps:null,g=_.children,hw(x,_)?g=null:L!==null&&hw(x,L)&&(l.flags|=32),l.memoizedState!==null&&(x=d4(o,l,MW,null,null,h),Jf._currentValue=x),P1(o,l),xi(o,l,g,h),l.child;case 6:return o===null&&rr&&((o=h=tn)&&(h=xX(h,l.pendingProps,rs),h!==null?(l.stateNode=h,vi=l,tn=null,o=!0):o=!1),o||ec(l)),null;case 13:return G9(o,l,h);case 4:return at(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Iu(l,null,g,h):xi(o,l,g,h),l.child;case 11:return L9(o,l,l.type,l.pendingProps,h);case 7:return xi(o,l,l.pendingProps,h),l.child;case 8:return xi(o,l,l.pendingProps.children,h),l.child;case 12:return xi(o,l,l.pendingProps.children,h),l.child;case 10:return g=l.pendingProps,tc(l,l.type,g.value),xi(o,l,g.children,h),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,ku(l),x=bi(x),g=g(x),l.flags|=1,xi(o,l,g,h),l.child;case 14:return B9(o,l,l.type,l.pendingProps,h);case 15:return U9(o,l,l.type,l.pendingProps,h);case 19:return W9(o,l,h);case 31:return VW(o,l,h);case 22:return z9(o,l,h,l.pendingProps);case 24:return ku(l),g=bi(zn),o===null?(x=t4(),x===null&&(x=Ur,_=J2(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=h),x=_),l.memoizedState={parent:g,cache:x},n4(l),tc(l,zn,x)):((o.lanes&h)!==0&&(i4(o,l),Rf(l,null,null,h),If()),x=o.memoizedState,_=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),tc(l,zn,g)):(g=_.cache,tc(l,zn,g),g!==x.cache&&Z2(l,[zn],h,!0))),xi(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Ho(o){o.flags|=4}function U4(o,l,h,g,x){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(_k())o.flags|=8192;else throw Cu=x1,r4}else o.flags&=-16777217}function Q9(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dO(l))if(_k())o.flags|=8192;else throw Cu=x1,r4}function L1(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Es():536870912,o.lanes|=l,vd|=l)}function Uf(o,l){if(!rr)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function rn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=h,l}function qW(o,l,h){var g=l.pendingProps;switch(K2(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(l),null;case 1:return rn(l),null;case 3:return h=l.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),$o(zn),Ae(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(ad(l)?Ho(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,X2())),rn(l),null;case 26:var x=l.type,_=l.memoizedState;return o===null?(Ho(l),_!==null?(rn(l),Q9(l,_)):(rn(l),U4(l,x,null,g,h))):_?_!==o.memoizedState?(Ho(l),rn(l),Q9(l,_)):(rn(l),l.flags&=-16777217):(o=o.memoizedProps,o!==g&&Ho(l),rn(l),U4(l,x,o,g,h)),null;case 27:if(de(l),h=Oe.current,x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Ho(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return rn(l),null}o=Ee.current,ad(l)?ON(l):(o=nO(x,g,h),l.stateNode=o,Ho(l))}return rn(l),null;case 5:if(de(l),x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Ho(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return rn(l),null}if(_=Ee.current,ad(l))ON(l);else{var L=Z1(Oe.current);switch(_){case 1:_=L.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=L.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=L.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?L.createElement("select",{is:g.is}):L.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?L.createElement(x,{is:g.is}):L.createElement(x)}}_[Sr]=l,_[Hr]=g;e:for(L=l.child;L!==null;){if(L.tag===5||L.tag===6)_.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===l)break e;for(;L.sibling===null;){if(L.return===null||L.return===l)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}l.stateNode=_;e:switch(wi(_,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ho(l)}}return rn(l),U4(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,h),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==g&&Ho(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(o=Oe.current,ad(l)){if(o=l.stateNode,h=l.memoizedProps,g=null,x=vi,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[Sr]=l,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||Gk(o.nodeValue,h)),o||ec(l,!0)}else o=Z1(o).createTextNode(g),o[Sr]=l,l.stateNode=o}return rn(l),null;case 31:if(h=l.memoizedState,o===null||o.memoizedState!==null){if(g=ad(l),h!==null){if(o===null){if(!g)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Sr]=l}else Eu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;rn(l),o=!1}else h=X2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return l.flags&256?(Ia(l),l):(Ia(l),null);if((l.flags&128)!==0)throw Error(n(558))}return rn(l),null;case 13:if(g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=ad(l),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Sr]=l}else Eu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;rn(l),x=!1}else x=X2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Ia(l),l):(Ia(l),null)}return Ia(l),(l.flags&128)!==0?(l.lanes=h,l):(h=g!==null,o=o!==null&&o.memoizedState!==null,h&&(g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==x&&(g.flags|=2048)),h!==o&&h&&(l.child.flags|=8192),L1(l,l.updateQueue),rn(l),null);case 4:return Ae(),o===null&&ow(l.stateNode.containerInfo),rn(l),null;case 10:return $o(l.type),rn(l),null;case 19:if(J(On),g=l.memoizedState,g===null)return rn(l),null;if(x=(l.flags&128)!==0,_=g.rendering,_===null)if(x)Uf(g,!1);else{if(xn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=T1(o),_!==null){for(l.flags|=128,Uf(g,!1),o=_.updateQueue,l.updateQueue=o,L1(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)TN(h,o),h=h.sibling;return le(On,On.current&1|2),rr&&Uo(l,g.treeForkCount),l.child}o=o.sibling}g.tail!==null&&Tt()>V1&&(l.flags|=128,x=!0,Uf(g,!1),l.lanes=4194304)}else{if(!x)if(o=T1(_),o!==null){if(l.flags|=128,x=!0,o=o.updateQueue,l.updateQueue=o,L1(l,o),Uf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!rr)return rn(l),null}else 2*Tt()-g.renderingStartTime>V1&&h!==536870912&&(l.flags|=128,x=!0,Uf(g,!1),l.lanes=4194304);g.isBackwards?(_.sibling=l.child,l.child=_):(o=g.last,o!==null?o.sibling=_:l.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Tt(),o.sibling=null,h=On.current,le(On,x?h&1|2:h&1),rr&&Uo(l,g.treeForkCount),o):(rn(l),null);case 22:case 23:return Ia(l),l4(),g=l.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(h&536870912)!==0&&(l.flags&128)===0&&(rn(l),l.subtreeFlags&6&&(l.flags|=8192)):rn(l),h=l.updateQueue,h!==null&&L1(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048),o!==null&&J(Ou),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),$o(zn),rn(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function HW(o,l){switch(K2(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return $o(zn),Ae(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return de(l),null;case 31:if(l.memoizedState!==null){if(Ia(l),l.alternate===null)throw Error(n(340));Eu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(Ia(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Eu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return J(On),null;case 4:return Ae(),null;case 10:return $o(l.type),null;case 22:case 23:return Ia(l),l4(),o!==null&&J(Ou),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return $o(zn),null;case 25:return null;default:return null}}function Y9(o,l){switch(K2(l),l.tag){case 3:$o(zn),Ae();break;case 26:case 27:case 5:de(l);break;case 4:Ae();break;case 31:l.memoizedState!==null&&Ia(l);break;case 13:Ia(l);break;case 19:J(On);break;case 10:$o(l.type);break;case 22:case 23:Ia(l),l4(),o!==null&&J(Ou);break;case 24:$o(zn)}}function zf(o,l){try{var h=l.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var x=g.next;h=x;do{if((h.tag&o)===o){g=void 0;var _=h.create,L=h.inst;g=_(),L.destroy=g}h=h.next}while(h!==x)}}catch(H){Er(l,l.return,H)}}function oc(o,l,h){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var _=x.next;g=_;do{if((g.tag&o)===o){var L=g.inst,H=L.destroy;if(H!==void 0){L.destroy=void 0,x=l;var ie=h,xe=H;try{xe()}catch(ke){Er(x,ie,ke)}}}g=g.next}while(g!==_)}}catch(ke){Er(l,l.return,ke)}}function Z9(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{VN(l,h)}catch(g){Er(o,o.return,g)}}}function J9(o,l,h){h.props=Mu(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){Er(o,l,g)}}function $f(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(x){Er(o,l,x)}}function so(o,l){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(x){Er(o,l,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){Er(o,l,x)}else h.current=null}function ek(o){var l=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(x){Er(o,o.return,x)}}function z4(o,l,h){try{var g=o.stateNode;fX(g,o.type,h,l),g[Hr]=l}catch(x){Er(o,o.return,x)}}function tk(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&mc(o.type)||o.tag===4}function $4(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||tk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&mc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function V4(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=si));else if(g!==4&&(g===27&&mc(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(V4(o,l,h),o=o.sibling;o!==null;)V4(o,l,h),o=o.sibling}function B1(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(g!==4&&(g===27&&mc(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(B1(o,l,h),o=o.sibling;o!==null;)B1(o,l,h),o=o.sibling}function rk(o){var l=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);wi(l,g,h),l[Sr]=o,l[Hr]=h}catch(_){Er(o,o.return,_)}}var Go=!1,Fn=!1,F4=!1,nk=typeof WeakSet=="function"?WeakSet:Set,ci=null;function GW(o,l){if(o=o.containerInfo,uw=ay,o=pN(o),D2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var x=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var L=0,H=-1,ie=-1,xe=0,ke=0,Pe=o,_e=null;t:for(;;){for(var Se;Pe!==h||x!==0&&Pe.nodeType!==3||(H=L+x),Pe!==_||g!==0&&Pe.nodeType!==3||(ie=L+g),Pe.nodeType===3&&(L+=Pe.nodeValue.length),(Se=Pe.firstChild)!==null;)_e=Pe,Pe=Se;for(;;){if(Pe===o)break t;if(_e===h&&++xe===x&&(H=L),_e===_&&++ke===g&&(ie=L),(Se=Pe.nextSibling)!==null)break;Pe=_e,_e=Pe.parentNode}Pe=Se}h=H===-1||ie===-1?null:{start:H,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(dw={focusedElem:o,selectionRange:h},ay=!1,ci=l;ci!==null;)if(l=ci,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ci=o;else for(;ci!==null;){switch(l=ci,_=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=l,x=_.memoizedProps,_=_.memoizedState,g=h.stateNode;try{var ht=Mu(h.type,x);o=g.getSnapshotBeforeUpdate(ht,_),g.__reactInternalSnapshotBeforeUpdate=o}catch(St){Er(h,h.return,St)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)mw(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,ci=o;break}ci=l.return}}function ik(o,l,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:Wo(o,h),g&4&&zf(5,h);break;case 1:if(Wo(o,h),g&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(L){Er(h,h.return,L)}else{var x=Mu(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(x,l,o.__reactInternalSnapshotBeforeUpdate)}catch(L){Er(h,h.return,L)}}g&64&&Z9(h),g&512&&$f(h,h.return);break;case 3:if(Wo(o,h),g&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{VN(o,l)}catch(L){Er(h,h.return,L)}}break;case 27:l===null&&g&4&&rk(h);case 26:case 5:Wo(o,h),l===null&&g&4&&ek(h),g&512&&$f(h,h.return);break;case 12:Wo(o,h);break;case 31:Wo(o,h),g&4&&ok(o,h);break;case 13:Wo(o,h),g&4&&lk(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=tX.bind(null,h),wX(o,h))));break;case 22:if(g=h.memoizedState!==null||Go,!g){l=l!==null&&l.memoizedState!==null||Fn,x=Go;var _=Fn;Go=g,(Fn=l)&&!_?Xo(o,h,(h.subtreeFlags&8772)!==0):Wo(o,h),Go=x,Fn=_}break;case 30:break;default:Wo(o,h)}}function ak(o){var l=o.alternate;l!==null&&(o.alternate=null,ak(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&lt(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var sn=null,da=!1;function Ko(o,l,h){for(h=h.child;h!==null;)sk(o,l,h),h=h.sibling}function sk(o,l,h){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(pi,h)}catch{}switch(h.tag){case 26:Fn||so(h,l),Ko(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Fn||so(h,l);var g=sn,x=da;mc(h.type)&&(sn=h.stateNode,da=!1),Ko(o,l,h),Qf(h.stateNode),sn=g,da=x;break;case 5:Fn||so(h,l);case 6:if(g=sn,x=da,sn=null,Ko(o,l,h),sn=g,da=x,sn!==null)if(da)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(h.stateNode)}catch(_){Er(h,l,_)}else try{sn.removeChild(h.stateNode)}catch(_){Er(h,l,_)}break;case 18:sn!==null&&(da?(o=sn,Zk(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Ed(o)):Zk(sn,h.stateNode));break;case 4:g=sn,x=da,sn=h.stateNode.containerInfo,da=!0,Ko(o,l,h),sn=g,da=x;break;case 0:case 11:case 14:case 15:oc(2,h,l),Fn||oc(4,h,l),Ko(o,l,h);break;case 1:Fn||(so(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"&&J9(h,l,g)),Ko(o,l,h);break;case 21:Ko(o,l,h);break;case 22:Fn=(g=Fn)||h.memoizedState!==null,Ko(o,l,h),Fn=g;break;default:Ko(o,l,h)}}function ok(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Ed(o)}catch(h){Er(l,l.return,h)}}}function lk(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ed(o)}catch(h){Er(l,l.return,h)}}function KW(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new nk),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new nk),l;default:throw Error(n(435,o.tag))}}function U1(o,l){var h=KW(o);l.forEach(function(g){if(!h.has(g)){h.add(g);var x=rX.bind(null,o,g);g.then(x,x)}})}function ha(o,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var x=h[g],_=o,L=l,H=L;e:for(;H!==null;){switch(H.tag){case 27:if(mc(H.type)){sn=H.stateNode,da=!1;break e}break;case 5:sn=H.stateNode,da=!1;break e;case 3:case 4:sn=H.stateNode.containerInfo,da=!0;break e}H=H.return}if(sn===null)throw Error(n(160));sk(_,L,x),sn=null,da=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)ck(l,o),l=l.sibling}var Cs=null;function ck(o,l){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ha(l,o),fa(o),g&4&&(oc(3,o,o.return),zf(3,o),oc(5,o,o.return));break;case 1:ha(l,o),fa(o),g&512&&(Fn||h===null||so(h,h.return)),g&64&&Go&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var x=Cs;if(ha(l,o),fa(o),g&512&&(Fn||h===null||so(h,h.return)),g&4){var _=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":_=x.getElementsByTagName("title")[0],(!_||_[la]||_[Sr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(g),x.head.insertBefore(_,x.querySelector("head > title"))),wi(_,g,h),_[Sr]=o,qt(_),g=_;break e;case"link":var L=cO("link","href",x).get(g+(h.href||""));if(L){for(var H=0;H<L.length;H++)if(_=L[H],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){L.splice(H,1);break t}}_=x.createElement(g),wi(_,g,h),x.head.appendChild(_);break;case"meta":if(L=cO("meta","content",x).get(g+(h.content||""))){for(H=0;H<L.length;H++)if(_=L[H],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){L.splice(H,1);break t}}_=x.createElement(g),wi(_,g,h),x.head.appendChild(_);break;default:throw Error(n(468,g))}_[Sr]=o,qt(_),g=_}o.stateNode=g}else uO(x,o.type,o.stateNode);else o.stateNode=lO(x,g,o.memoizedProps);else _!==g?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,g===null?uO(x,o.type,o.stateNode):lO(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&z4(o,o.memoizedProps,h.memoizedProps)}break;case 27:ha(l,o),fa(o),g&512&&(Fn||h===null||so(h,h.return)),h!==null&&g&4&&z4(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ha(l,o),fa(o),g&512&&(Fn||h===null||so(h,h.return)),o.flags&32){x=o.stateNode;try{Ya(x,"")}catch(ht){Er(o,o.return,ht)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,z4(o,x,h!==null?h.memoizedProps:x)),g&1024&&(F4=!0);break;case 6:if(ha(l,o),fa(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(ht){Er(o,o.return,ht)}}break;case 3:if(ty=null,x=Cs,Cs=J1(l.containerInfo),ha(l,o),Cs=x,fa(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ed(l.containerInfo)}catch(ht){Er(o,o.return,ht)}F4&&(F4=!1,uk(o));break;case 4:g=Cs,Cs=J1(o.stateNode.containerInfo),ha(l,o),fa(o),Cs=g;break;case 12:ha(l,o),fa(o);break;case 31:ha(l,o),fa(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,U1(o,g)));break;case 13:ha(l,o),fa(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&($1=Tt()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,U1(o,g)));break;case 22:x=o.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,xe=Go,ke=Fn;if(Go=xe||x,Fn=ke||ie,ha(l,o),Fn=ke,Go=xe,fa(o),g&8192)e:for(l=o.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(h===null||ie||Go||Fn||Pu(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){ie=h=l;try{if(_=ie.stateNode,x)L=_.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{H=ie.stateNode;var Pe=ie.memoizedProps.style,_e=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;H.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(ht){Er(ie,ie.return,ht)}}}else if(l.tag===6){if(h===null){ie=l;try{ie.stateNode.nodeValue=x?"":ie.memoizedProps}catch(ht){Er(ie,ie.return,ht)}}}else if(l.tag===18){if(h===null){ie=l;try{var Se=ie.stateNode;x?Jk(Se,!0):Jk(ie.stateNode,!1)}catch(ht){Er(ie,ie.return,ht)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,U1(o,h))));break;case 19:ha(l,o),fa(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,U1(o,g)));break;case 30:break;case 21:break;default:ha(l,o),fa(o)}}function fa(o){var l=o.flags;if(l&2){try{for(var h,g=o.return;g!==null;){if(tk(g)){h=g;break}g=g.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var x=h.stateNode,_=$4(o);B1(o,_,x);break;case 5:var L=h.stateNode;h.flags&32&&(Ya(L,""),h.flags&=-33);var H=$4(o);B1(o,H,L);break;case 3:case 4:var ie=h.stateNode.containerInfo,xe=$4(o);V4(o,xe,ie);break;default:throw Error(n(161))}}catch(ke){Er(o,o.return,ke)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function uk(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;uk(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Wo(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ik(o,l.alternate,l),l=l.sibling}function Pu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:oc(4,l,l.return),Pu(l);break;case 1:so(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&J9(l,l.return,h),Pu(l);break;case 27:Qf(l.stateNode);case 26:case 5:so(l,l.return),Pu(l);break;case 22:l.memoizedState===null&&Pu(l);break;case 30:Pu(l);break;default:Pu(l)}o=o.sibling}}function Xo(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=o,_=l,L=_.flags;switch(_.tag){case 0:case 11:case 15:Xo(x,_,h),zf(4,_);break;case 1:if(Xo(x,_,h),g=_,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(xe){Er(g,g.return,xe)}if(g=_,x=g.updateQueue,x!==null){var H=g.stateNode;try{var ie=x.shared.hiddenCallbacks;if(ie!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ie.length;x++)$N(ie[x],H)}catch(xe){Er(g,g.return,xe)}}h&&L&64&&Z9(_),$f(_,_.return);break;case 27:rk(_);case 26:case 5:Xo(x,_,h),h&&g===null&&L&4&&ek(_),$f(_,_.return);break;case 12:Xo(x,_,h);break;case 31:Xo(x,_,h),h&&L&4&&ok(x,_);break;case 13:Xo(x,_,h),h&&L&4&&lk(x,_);break;case 22:_.memoizedState===null&&Xo(x,_,h),$f(_,_.return);break;case 30:break;default:Xo(x,_,h)}l=l.sibling}}function q4(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Nf(h))}function H4(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Nf(o))}function Is(o,l,h,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)dk(o,l,h,g),l=l.sibling}function dk(o,l,h,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Is(o,l,h,g),x&2048&&zf(9,l);break;case 1:Is(o,l,h,g);break;case 3:Is(o,l,h,g),x&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Nf(o)));break;case 12:if(x&2048){Is(o,l,h,g),o=l.stateNode;try{var _=l.memoizedProps,L=_.id,H=_.onPostCommit;typeof H=="function"&&H(L,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ie){Er(l,l.return,ie)}}else Is(o,l,h,g);break;case 31:Is(o,l,h,g);break;case 13:Is(o,l,h,g);break;case 23:break;case 22:_=l.stateNode,L=l.alternate,l.memoizedState!==null?_._visibility&2?Is(o,l,h,g):Vf(o,l):_._visibility&2?Is(o,l,h,g):(_._visibility|=2,pd(o,l,h,g,(l.subtreeFlags&10256)!==0||!1)),x&2048&&q4(L,l);break;case 24:Is(o,l,h,g),x&2048&&H4(l.alternate,l);break;default:Is(o,l,h,g)}}function pd(o,l,h,g,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=o,L=l,H=h,ie=g,xe=L.flags;switch(L.tag){case 0:case 11:case 15:pd(_,L,H,ie,x),zf(8,L);break;case 23:break;case 22:var ke=L.stateNode;L.memoizedState!==null?ke._visibility&2?pd(_,L,H,ie,x):Vf(_,L):(ke._visibility|=2,pd(_,L,H,ie,x)),x&&xe&2048&&q4(L.alternate,L);break;case 24:pd(_,L,H,ie,x),x&&xe&2048&&H4(L.alternate,L);break;default:pd(_,L,H,ie,x)}l=l.sibling}}function Vf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,g=l,x=g.flags;switch(g.tag){case 22:Vf(h,g),x&2048&&q4(g.alternate,g);break;case 24:Vf(h,g),x&2048&&H4(g.alternate,g);break;default:Vf(h,g)}l=l.sibling}}var Ff=8192;function gd(o,l,h){if(o.subtreeFlags&Ff)for(o=o.child;o!==null;)hk(o,l,h),o=o.sibling}function hk(o,l,h){switch(o.tag){case 26:gd(o,l,h),o.flags&Ff&&o.memoizedState!==null&&RX(h,Cs,o.memoizedState,o.memoizedProps);break;case 5:gd(o,l,h);break;case 3:case 4:var g=Cs;Cs=J1(o.stateNode.containerInfo),gd(o,l,h),Cs=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=Ff,Ff=16777216,gd(o,l,h),Ff=g):gd(o,l,h));break;default:gd(o,l,h)}}function fk(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function qf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ci=g,pk(g,o)}fk(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)mk(o),o=o.sibling}function mk(o){switch(o.tag){case 0:case 11:case 15:qf(o),o.flags&2048&&oc(9,o,o.return);break;case 3:qf(o);break;case 12:qf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,z1(o)):qf(o);break;default:qf(o)}}function z1(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ci=g,pk(g,o)}fk(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:oc(8,l,l.return),z1(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,z1(l));break;default:z1(l)}o=o.sibling}}function pk(o,l){for(;ci!==null;){var h=ci;switch(h.tag){case 0:case 11:case 15:oc(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Nf(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,ci=g;else e:for(h=o;ci!==null;){g=ci;var x=g.sibling,_=g.return;if(ak(g),g===h){ci=null;break e}if(x!==null){x.return=_,ci=x;break e}ci=_}}}var WW={getCacheForType:function(o){var l=bi(zn),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h},cacheSignal:function(){return bi(zn).controller.signal}},XW=typeof WeakMap=="function"?WeakMap:Map,yr=0,Ur=null,Wt=null,Qt=0,Ar=0,Ra=null,lc=!1,yd=!1,G4=!1,Qo=0,xn=0,cc=0,Du=0,K4=0,Ma=0,vd=0,Hf=null,ma=null,W4=!1,$1=0,gk=0,V1=1/0,F1=null,uc=null,Zn=0,dc=null,bd=null,Yo=0,X4=0,Q4=null,yk=null,Gf=0,Y4=null;function Pa(){return(yr&2)!==0&&Qt!==0?Qt&-Qt:K.T!==null?nw():yi()}function vk(){if(Ma===0)if((Qt&536870912)===0||rr){var o=Ln;Ln<<=1,(Ln&3932160)===0&&(Ln=262144),Ma=o}else Ma=536870912;return o=Ca.current,o!==null&&(o.flags|=32),Ma}function pa(o,l,h){(o===Ur&&(Ar===2||Ar===9)||o.cancelPendingCommit!==null)&&(xd(o,0),hc(o,Qt,Ma,!1)),sa(o,h),((yr&2)===0||o!==Ur)&&(o===Ur&&((yr&2)===0&&(Du|=h),xn===4&&hc(o,Qt,Ma,!1)),oo(o))}function bk(o,l,h){if((yr&6)!==0)throw Error(n(327));var g=!h&&(l&127)===0&&(l&o.expiredLanes)===0||gi(o,l),x=g?ZW(o,l):J4(o,l,!0),_=g;do{if(x===0){yd&&!g&&hc(o,l,0,!1);break}else{if(h=o.current.alternate,_&&!QW(h)){x=J4(o,l,!1),_=!1;continue}if(x===2){if(_=l,o.errorRecoveryDisabledLanes&_)var L=0;else L=o.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){l=L;e:{var H=o;x=Hf;var ie=H.current.memoizedState.isDehydrated;if(ie&&(xd(H,L).flags|=256),L=J4(H,L,!1),L!==2){if(G4&&!ie){H.errorRecoveryDisabledLanes|=_,Du|=_,x=4;break e}_=ma,ma=x,_!==null&&(ma===null?ma=_:ma.push.apply(ma,_))}x=L}if(_=!1,x!==2)continue}}if(x===1){xd(o,0),hc(o,l,0,!0);break}e:{switch(g=o,_=x,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:hc(g,l,Ma,!lc);break e;case 2:ma=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=$1+300-Tt(),10<x)){if(hc(g,l,Ma,!lc),tr(g,0,!0)!==0)break e;Yo=l,g.timeoutHandle=Qk(xk.bind(null,g,h,ma,F1,W4,l,Ma,Du,vd,lc,_,"Throttled",-0,0),x);break e}xk(g,h,ma,F1,W4,l,Ma,Du,vd,lc,_,null,-0,0)}}break}while(!0);oo(o)}function xk(o,l,h,g,x,_,L,H,ie,xe,ke,Pe,_e,Se){if(o.timeoutHandle=-1,Pe=l.subtreeFlags,Pe&8192||(Pe&16785408)===16785408){Pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},hk(l,_,Pe);var ht=(_&62914560)===_?$1-Tt():(_&4194048)===_?gk-Tt():0;if(ht=MX(Pe,ht),ht!==null){Yo=_,o.cancelPendingCommit=ht(kk.bind(null,o,l,_,h,g,x,L,H,ie,ke,Pe,null,_e,Se)),hc(o,_,L,!xe);return}}kk(o,l,_,h,g,x,L,H,ie)}function QW(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var x=h[g],_=x.getSnapshot;x=x.value;try{if(!Oa(_(),x))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hc(o,l,h,g){l&=~K4,l&=~Du,o.suspendedLanes|=l,o.pingedLanes&=~l,g&&(o.warmLanes|=l),g=o.expirationTimes;for(var x=l;0<x;){var _=31-lr(x),L=1<<_;g[_]=-1,x&=~L}h!==0&&Qs(o,h,l)}function q1(){return(yr&6)===0?(Kf(0),!1):!0}function Z4(){if(Wt!==null){if(Ar===0)var o=Wt.return;else o=Wt,zo=Nu=null,m4(o),ud=null,Of=0,o=Wt;for(;o!==null;)Y9(o.alternate,o),o=o.return;Wt=null}}function xd(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,gX(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Yo=0,Z4(),Ur=o,Wt=h=Bo(o.current,null),Qt=l,Ar=0,Ra=null,lc=!1,yd=gi(o,l),G4=!1,vd=Ma=K4=Du=cc=xn=0,ma=Hf=null,W4=!1,(l&8)!==0&&(l|=l&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=l;0<g;){var x=31-lr(g),_=1<<x;l|=o[x],g&=~_}return Qo=l,d1(),h}function wk(o,l){Lt=null,K.H=Lf,l===cd||l===b1?(l=LN(),Ar=3):l===r4?(l=LN(),Ar=4):Ar=l===j4?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ra=l,Wt===null&&(xn=1,R1(o,Ja(l,o.current)))}function _k(){var o=Ca.current;return o===null?!0:(Qt&4194048)===Qt?ns===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?o===ns:!1}function Sk(){var o=K.H;return K.H=Lf,o===null?Lf:o}function Tk(){var o=K.A;return K.A=WW,o}function H1(){xn=4,lc||(Qt&4194048)!==Qt&&Ca.current!==null||(yd=!0),(cc&134217727)===0&&(Du&134217727)===0||Ur===null||hc(Ur,Qt,Ma,!1)}function J4(o,l,h){var g=yr;yr|=2;var x=Sk(),_=Tk();(Ur!==o||Qt!==l)&&(F1=null,xd(o,l)),l=!1;var L=xn;e:do try{if(Ar!==0&&Wt!==null){var H=Wt,ie=Ra;switch(Ar){case 8:Z4(),L=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(l=!0);var xe=Ar;if(Ar=0,Ra=null,wd(o,H,ie,xe),h&&yd){L=0;break e}break;default:xe=Ar,Ar=0,Ra=null,wd(o,H,ie,xe)}}YW(),L=xn;break}catch(ke){wk(o,ke)}while(!0);return l&&o.shellSuspendCounter++,zo=Nu=null,yr=g,K.H=x,K.A=_,Wt===null&&(Ur=null,Qt=0,d1()),L}function YW(){for(;Wt!==null;)Ak(Wt)}function ZW(o,l){var h=yr;yr|=2;var g=Sk(),x=Tk();Ur!==o||Qt!==l?(F1=null,V1=Tt()+500,xd(o,l)):yd=gi(o,l);e:do try{if(Ar!==0&&Wt!==null){l=Wt;var _=Ra;t:switch(Ar){case 1:Ar=0,Ra=null,wd(o,l,_,1);break;case 2:case 9:if(PN(_)){Ar=0,Ra=null,Ek(l);break}l=function(){Ar!==2&&Ar!==9||Ur!==o||(Ar=7),oo(o)},_.then(l,l);break e;case 3:Ar=7;break e;case 4:Ar=5;break e;case 7:PN(_)?(Ar=0,Ra=null,Ek(l)):(Ar=0,Ra=null,wd(o,l,_,7));break;case 5:var L=null;switch(Wt.tag){case 26:L=Wt.memoizedState;case 5:case 27:var H=Wt;if(L?dO(L):H.stateNode.complete){Ar=0,Ra=null;var ie=H.sibling;if(ie!==null)Wt=ie;else{var xe=H.return;xe!==null?(Wt=xe,G1(xe)):Wt=null}break t}}Ar=0,Ra=null,wd(o,l,_,5);break;case 6:Ar=0,Ra=null,wd(o,l,_,6);break;case 8:Z4(),xn=6;break e;default:throw Error(n(462))}}JW();break}catch(ke){wk(o,ke)}while(!0);return zo=Nu=null,K.H=g,K.A=x,yr=h,Wt!==null?0:(Ur=null,Qt=0,d1(),xn)}function JW(){for(;Wt!==null&&!bt();)Ak(Wt)}function Ak(o){var l=X9(o.alternate,o,Qo);o.memoizedProps=o.pendingProps,l===null?G1(o):Wt=l}function Ek(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=F9(h,l,l.pendingProps,l.type,void 0,Qt);break;case 11:l=F9(h,l,l.pendingProps,l.type.render,l.ref,Qt);break;case 5:m4(l);default:Y9(h,l),l=Wt=TN(l,Qo),l=X9(h,l,Qo)}o.memoizedProps=o.pendingProps,l===null?G1(o):Wt=l}function wd(o,l,h,g){zo=Nu=null,m4(l),ud=null,Of=0;var x=l.return;try{if($W(o,x,l,h,Qt)){xn=1,R1(o,Ja(h,o.current)),Wt=null;return}}catch(_){if(x!==null)throw Wt=x,_;xn=1,R1(o,Ja(h,o.current)),Wt=null;return}l.flags&32768?(rr||g===1?o=!0:yd||(Qt&536870912)!==0?o=!1:(lc=o=!0,(g===2||g===9||g===3||g===6)&&(g=Ca.current,g!==null&&g.tag===13&&(g.flags|=16384))),Nk(l,o)):G1(l)}function G1(o){var l=o;do{if((l.flags&32768)!==0){Nk(l,lc);return}o=l.return;var h=qW(l.alternate,l,Qo);if(h!==null){Wt=h;return}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=o}while(l!==null);xn===0&&(xn=5)}function Nk(o,l){do{var h=HW(o.alternate,o);if(h!==null){h.flags&=32767,Wt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){Wt=o;return}Wt=o=h}while(o!==null);xn=6,Wt=null}function kk(o,l,h,g,x,_,L,H,ie){o.cancelPendingCommit=null;do K1();while(Zn!==0);if((yr&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=$2,fn(o,h,_,L,H,ie),o===Ur&&(Wt=Ur=null,Qt=0),bd=l,dc=o,Yo=h,X4=_,Q4=x,yk=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,nX(nr,function(){return Rk(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=K.T,K.T=null,x=Z.p,Z.p=2,L=yr,yr|=4;try{GW(o,l,h)}finally{yr=L,Z.p=x,K.T=g}}Zn=1,Ok(),jk(),Ck()}}function Ok(){if(Zn===1){Zn=0;var o=dc,l=bd,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=K.T,K.T=null;var g=Z.p;Z.p=2;var x=yr;yr|=4;try{ck(l,o);var _=dw,L=pN(o.containerInfo),H=_.focusedElem,ie=_.selectionRange;if(L!==H&&H&&H.ownerDocument&&mN(H.ownerDocument.documentElement,H)){if(ie!==null&&D2(H)){var xe=ie.start,ke=ie.end;if(ke===void 0&&(ke=xe),"selectionStart"in H)H.selectionStart=xe,H.selectionEnd=Math.min(ke,H.value.length);else{var Pe=H.ownerDocument||document,_e=Pe&&Pe.defaultView||window;if(_e.getSelection){var Se=_e.getSelection(),ht=H.textContent.length,St=Math.min(ie.start,ht),Cr=ie.end===void 0?St:Math.min(ie.end,ht);!Se.extend&&St>Cr&&(L=Cr,Cr=St,St=L);var me=fN(H,St),ue=fN(H,Cr);if(me&&ue&&(Se.rangeCount!==1||Se.anchorNode!==me.node||Se.anchorOffset!==me.offset||Se.focusNode!==ue.node||Se.focusOffset!==ue.offset)){var ve=Pe.createRange();ve.setStart(me.node,me.offset),Se.removeAllRanges(),St>Cr?(Se.addRange(ve),Se.extend(ue.node,ue.offset)):(ve.setEnd(ue.node,ue.offset),Se.addRange(ve))}}}}for(Pe=[],Se=H;Se=Se.parentNode;)Se.nodeType===1&&Pe.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Pe.length;H++){var Re=Pe[H];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}ay=!!uw,dw=uw=null}finally{yr=x,Z.p=g,K.T=h}}o.current=l,Zn=2}}function jk(){if(Zn===2){Zn=0;var o=dc,l=bd,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=K.T,K.T=null;var g=Z.p;Z.p=2;var x=yr;yr|=4;try{ik(o,l.alternate,l)}finally{yr=x,Z.p=g,K.T=h}}Zn=3}}function Ck(){if(Zn===4||Zn===3){Zn=0,Ze();var o=dc,l=bd,h=Yo,g=yk;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Zn=5:(Zn=0,bd=dc=null,Ik(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(uc=null),kn(h),l=l.stateNode,Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(pi,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=K.T,x=Z.p,Z.p=2,K.T=null;try{for(var _=o.onRecoverableError,L=0;L<g.length;L++){var H=g[L];_(H.value,{componentStack:H.stack})}}finally{K.T=l,Z.p=x}}(Yo&3)!==0&&K1(),oo(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===Y4?Gf++:(Gf=0,Y4=o):Gf=0,Kf(0)}}function Ik(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Nf(l)))}function K1(){return Ok(),jk(),Ck(),Rk()}function Rk(){if(Zn!==5)return!1;var o=dc,l=X4;X4=0;var h=kn(Yo),g=K.T,x=Z.p;try{Z.p=32>h?32:h,K.T=null,h=Q4,Q4=null;var _=dc,L=Yo;if(Zn=0,bd=dc=null,Yo=0,(yr&6)!==0)throw Error(n(331));var H=yr;if(yr|=4,mk(_.current),dk(_,_.current,L,h),yr=H,Kf(0,!1),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(pi,_)}catch{}return!0}finally{Z.p=x,K.T=g,Ik(o,l)}}function Mk(o,l,h){l=Ja(h,l),l=O4(o.stateNode,l,2),o=ic(o,l,2),o!==null&&(sa(o,2),oo(o))}function Er(o,l,h){if(o.tag===3)Mk(o,o,h);else for(;l!==null;){if(l.tag===3){Mk(l,o,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(uc===null||!uc.has(g))){o=Ja(h,o),h=P9(2),g=ic(l,h,2),g!==null&&(D9(h,g,l,o),sa(g,2),oo(g));break}}l=l.return}}function ew(o,l,h){var g=o.pingCache;if(g===null){g=o.pingCache=new XW;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(h)||(G4=!0,x.add(h),o=eX.bind(null,o,l,h),l.then(o,o))}function eX(o,l,h){var g=o.pingCache;g!==null&&g.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Ur===o&&(Qt&h)===h&&(xn===4||xn===3&&(Qt&62914560)===Qt&&300>Tt()-$1?(yr&2)===0&&xd(o,0):K4|=h,vd===Qt&&(vd=0)),oo(o)}function Pk(o,l){l===0&&(l=Es()),o=Tu(o,l),o!==null&&(sa(o,l),oo(o))}function tX(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),Pk(o,h)}function rX(o,l){var h=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),Pk(o,h)}function nX(o,l){return Ve(o,l)}var W1=null,_d=null,tw=!1,X1=!1,rw=!1,fc=0;function oo(o){o!==_d&&o.next===null&&(_d===null?W1=_d=o:_d=_d.next=o),X1=!0,tw||(tw=!0,aX())}function Kf(o,l){if(!rw&&X1){rw=!0;do for(var h=!1,g=W1;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var _=0;else{var L=g.suspendedLanes,H=g.pingedLanes;_=(1<<31-lr(42|o)+1)-1,_&=x&~(L&~H),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,Uk(g,_))}else _=Qt,_=tr(g,g===Ur?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||gi(g,_)||(h=!0,Uk(g,_));g=g.next}while(h);rw=!1}}function iX(){Dk()}function Dk(){X1=tw=!1;var o=0;fc!==0&&pX()&&(o=fc);for(var l=Tt(),h=null,g=W1;g!==null;){var x=g.next,_=Lk(g,l);_===0?(g.next=null,h===null?W1=x:h.next=x,x===null&&(_d=h)):(h=g,(o!==0||(_&3)!==0)&&(X1=!0)),g=x}Zn!==0&&Zn!==5||Kf(o),fc!==0&&(fc=0)}function Lk(o,l){for(var h=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var L=31-lr(_),H=1<<L,ie=x[L];ie===-1?((H&h)===0||(H&g)!==0)&&(x[L]=Xs(H,l)):ie<=l&&(o.expiredLanes|=H),_&=~H}if(l=Ur,h=Qt,h=tr(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===l&&(Ar===2||Ar===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&rt(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||gi(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(g!==null&&rt(g),kn(h)){case 2:case 8:h=At;break;case 32:h=nr;break;case 268435456:h=qr;break;default:h=nr}return g=Bk.bind(null,o),h=Ve(h,g),o.callbackPriority=l,o.callbackNode=h,l}return g!==null&&g!==null&&rt(g),o.callbackPriority=2,o.callbackNode=null,2}function Bk(o,l){if(Zn!==0&&Zn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(K1()&&o.callbackNode!==h)return null;var g=Qt;return g=tr(o,o===Ur?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(bk(o,g,l),Lk(o,Tt()),o.callbackNode!=null&&o.callbackNode===h?Bk.bind(null,o):null)}function Uk(o,l){if(K1())return null;bk(o,l,!0)}function aX(){yX(function(){(yr&6)!==0?Ve(Bt,iX):Dk()})}function nw(){if(fc===0){var o=od;o===0&&(o=As,As<<=1,(As&261888)===0&&(As=256)),fc=o}return fc}function zk(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:to(""+o)}function $k(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function sX(o,l,h,g,x){if(l==="submit"&&h&&h.stateNode===x){var _=zk((x[Hr]||null).action),L=g.submitter;L&&(l=(l=L[Hr]||null)?zk(l.formAction):L.getAttribute("formAction"),l!==null&&(_=l,L=null));var H=new yu("action","action",null,g,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(fc!==0){var ie=L?$k(x,L):new FormData(x);S4(h,{pending:!0,data:ie,method:x.method,action:_},null,ie)}}else typeof _=="function"&&(H.preventDefault(),ie=L?$k(x,L):new FormData(x),S4(h,{pending:!0,data:ie,method:x.method,action:_},_,ie))},currentTarget:x}]})}}for(var iw=0;iw<z2.length;iw++){var aw=z2[iw],oX=aw.toLowerCase(),lX=aw[0].toUpperCase()+aw.slice(1);js(oX,"on"+lX)}js(vN,"onAnimationEnd"),js(bN,"onAnimationIteration"),js(xN,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(TW,"onTransitionRun"),js(AW,"onTransitionStart"),js(EW,"onTransitionCancel"),js(wN,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wf));function Vk(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],x=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var L=g.length-1;0<=L;L--){var H=g[L],ie=H.instance,xe=H.currentTarget;if(H=H.listener,ie!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=xe;try{_(x)}catch(ke){u1(ke)}x.currentTarget=null,_=ie}else for(L=0;L<g.length;L++){if(H=g[L],ie=H.instance,xe=H.currentTarget,H=H.listener,ie!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=xe;try{_(x)}catch(ke){u1(ke)}x.currentTarget=null,_=ie}}}}function Xt(o,l){var h=l[oa];h===void 0&&(h=l[oa]=new Set);var g=o+"__bubble";h.has(g)||(Fk(l,o,2,!1),h.add(g))}function sw(o,l,h){var g=0;l&&(g|=4),Fk(h,o,g,l)}var Q1="_reactListening"+Math.random().toString(36).slice(2);function ow(o){if(!o[Q1]){o[Q1]=!0,Gr.forEach(function(h){h!=="selectionchange"&&(cX.has(h)||sw(h,!1,o),sw(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Q1]||(l[Q1]=!0,sw("selectionchange",!1,l))}}function Fk(o,l,h,g){switch(vO(l)){case 2:var x=LX;break;case 8:x=BX;break;default:x=_w}h=x.bind(null,l,h,o),x=void 0,!gf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function lw(o,l,h,g,x){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var L=g.tag;if(L===3||L===4){var H=g.stateNode.containerInfo;if(H===x)break;if(L===4)for(L=g.return;L!==null;){var ie=L.tag;if((ie===3||ie===4)&&L.stateNode.containerInfo===x)return;L=L.return}for(;H!==null;){if(L=ce(H),L===null)return;if(ie=L.tag,ie===5||ie===6||ie===26||ie===27){g=_=L;continue e}H=H.parentNode}}g=g.return}Wg(function(){var xe=_,ke=W0(h),Pe=[];e:{var _e=_N.get(o);if(_e!==void 0){var Se=yu,ht=o;switch(o){case"keypress":if(gu(h)===0)break e;case"keydown":case"keyup":Se=n1;break;case"focusin":ht="focus",Se=Wl;break;case"focusout":ht="blur",Se=Wl;break;case"beforeblur":case"afterblur":Se=Wl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Yg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=a1;break;case vN:case bN:case xN:Se=Y0;break;case wN:Se=Z0;break;case"scroll":case"scrollend":Se=Xg;break;case"wheel":Se=o1;break;case"copy":case"cut":case"paste":Se=Jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=wf;break;case"toggle":case"beforetoggle":Se=Ql}var St=(l&4)!==0,Cr=!St&&(o==="scroll"||o==="scrollend"),me=St?_e!==null?_e+"Capture":null:_e;St=[];for(var ue=xe,ve;ue!==null;){var Re=ue;if(ve=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ve===null||me===null||(Re=ca(ue,me),Re!=null&&St.push(Xf(ue,Re,ve))),Cr)break;ue=ue.return}0<St.length&&(_e=new Se(_e,ht,null,h,ke),Pe.push({event:_e,listeners:St}))}}if((l&7)===0){e:{if(_e=o==="mouseover"||o==="pointerover",Se=o==="mouseout"||o==="pointerout",_e&&h!==K0&&(ht=h.relatedTarget||h.fromElement)&&(ce(ht)||ht[mn]))break e;if((Se||_e)&&(_e=ke.window===ke?ke:(_e=ke.ownerDocument)?_e.defaultView||_e.parentWindow:window,Se?(ht=h.relatedTarget||h.toElement,Se=xe,ht=ht?ce(ht):null,ht!==null&&(Cr=a(ht),St=ht.tag,ht!==Cr||St!==5&&St!==27&&St!==6)&&(ht=null)):(Se=null,ht=xe),Se!==ht)){if(St=Qg,Re="onMouseLeave",me="onMouseEnter",ue="mouse",(o==="pointerout"||o==="pointerover")&&(St=wf,Re="onPointerLeave",me="onPointerEnter",ue="pointer"),Cr=Se==null?_e:Xe(Se),ve=ht==null?_e:Xe(ht),_e=new St(Re,ue+"leave",Se,h,ke),_e.target=Cr,_e.relatedTarget=ve,Re=null,ce(ke)===xe&&(St=new St(me,ue+"enter",ht,h,ke),St.target=ve,St.relatedTarget=Cr,Re=St),Cr=Re,Se&&ht)t:{for(St=uX,me=Se,ue=ht,ve=0,Re=me;Re;Re=St(Re))ve++;Re=0;for(var vt=ue;vt;vt=St(vt))Re++;for(;0<ve-Re;)me=St(me),ve--;for(;0<Re-ve;)ue=St(ue),Re--;for(;ve--;){if(me===ue||ue!==null&&me===ue.alternate){St=me;break t}me=St(me),ue=St(ue)}St=null}else St=null;Se!==null&&qk(Pe,_e,Se,St,!1),ht!==null&&Cr!==null&&qk(Pe,Cr,ht,St,!0)}}e:{if(_e=xe?Xe(xe):window,Se=_e.nodeName&&_e.nodeName.toLowerCase(),Se==="select"||Se==="input"&&_e.type==="file")var ur=oN;else if(ua(_e))if(lN)ur=wW;else{ur=bW;var gt=vW}else Se=_e.nodeName,!Se||Se.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?xe&&mf(xe.elementType)&&(ur=oN):ur=xW;if(ur&&(ur=ur(o,xe))){wu(Pe,ur,h,ke);break e}gt&&gt(o,_e,xe),o==="focusout"&&xe&&_e.type==="number"&&xe.memoizedProps.value!=null&&G0(_e,"number",_e.value)}switch(gt=xe?Xe(xe):window,o){case"focusin":(ua(gt)||gt.contentEditable==="true")&&(J0=gt,L2=xe,Tf=null);break;case"focusout":Tf=L2=J0=null;break;case"mousedown":B2=!0;break;case"contextmenu":case"mouseup":case"dragend":B2=!1,gN(Pe,h,ke);break;case"selectionchange":if(SW)break;case"keydown":case"keyup":gN(Pe,h,ke)}var Ut;if(j)e:{switch(o){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Ht?xr(o,h)&&(Yt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Yt="onCompositionStart");Yt&&(ye&&h.locale!=="ko"&&(Ht||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Ht&&(Ut=ql()):(ka=ke,X0="value"in ka?ka.value:ka.textContent,Ht=!0)),gt=Y1(xe,Yt),0<gt.length&&(Yt=new vf(Yt,o,null,h,ke),Pe.push({event:Yt,listeners:gt}),Ut?Yt.data=Ut:(Ut=Un(h),Ut!==null&&(Yt.data=Ut)))),(Ut=W?oi(o,h):li(o,h))&&(Yt=Y1(xe,"onBeforeInput"),0<Yt.length&&(gt=new vf("onBeforeInput","beforeinput",null,h,ke),Pe.push({event:gt,listeners:Yt}),gt.data=Ut)),sX(Pe,o,xe,h,ke)}Vk(Pe,l)})}function Xf(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Y1(o,l){for(var h=l+"Capture",g=[];o!==null;){var x=o,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=ca(o,h),x!=null&&g.unshift(Xf(o,x,_)),x=ca(o,l),x!=null&&g.push(Xf(o,x,_))),o.tag===3)return g;o=o.return}return[]}function uX(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function qk(o,l,h,g,x){for(var _=l._reactName,L=[];h!==null&&h!==g;){var H=h,ie=H.alternate,xe=H.stateNode;if(H=H.tag,ie!==null&&ie===g)break;H!==5&&H!==26&&H!==27||xe===null||(ie=xe,x?(xe=ca(h,_),xe!=null&&L.unshift(Xf(h,xe,ie))):x||(xe=ca(h,_),xe!=null&&L.push(Xf(h,xe,ie)))),h=h.return}L.length!==0&&o.push({event:l,listeners:L})}var dX=/\r\n?/g,hX=/\u0000|\uFFFD/g;function Hk(o){return(typeof o=="string"?o:""+o).replace(dX,`
`).replace(hX,"")}function Gk(o,l){return l=Hk(l),Hk(o)===l}function jr(o,l,h,g,x,_){switch(h){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Ya(o,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Ya(o,""+g);break;case"className":kr(o,"class",g);break;case"tabIndex":kr(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(o,h,g);break;case"style":Gg(o,g,_);break;case"data":if(l!=="object"){kr(o,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=to(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(l!=="input"&&jr(o,l,"name",x.name,x,null),jr(o,l,"formEncType",x.formEncType,x,null),jr(o,l,"formMethod",x.formMethod,x,null),jr(o,l,"formTarget",x.formTarget,x,null)):(jr(o,l,"encType",x.encType,x,null),jr(o,l,"method",x.method,x,null),jr(o,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=to(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=si);break;case"onScroll":g!=null&&Xt("scroll",o);break;case"onScrollEnd":g!=null&&Xt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=to(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":Xt("beforetoggle",o),Xt("toggle",o),Pt(o,"popover",g);break;case"xlinkActuate":br(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":br(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":br(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":br(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":br(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":br(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":br(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":br(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":br(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Pt(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=C2.get(h)||h,Pt(o,h,g))}}function cw(o,l,h,g,x,_){switch(h){case"style":Gg(o,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"children":typeof g=="string"?Ya(o,g):(typeof g=="number"||typeof g=="bigint")&&Ya(o,""+g);break;case"onScroll":g!=null&&Xt("scroll",o);break;case"onScrollEnd":g!=null&&Xt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tr.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),l=h.slice(2,x?h.length-7:void 0),_=o[Hr]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(l,_,x),typeof g=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,g,x);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):Pt(o,h,g)}}}function wi(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",o),Xt("load",o);var g=!1,x=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var L=h[_];if(L!=null)switch(_){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:jr(o,l,_,L,h,null)}}x&&jr(o,l,"srcSet",h.srcSet,h,null),g&&jr(o,l,"src",h.src,h,null);return;case"input":Xt("invalid",o);var H=_=L=x=null,ie=null,xe=null;for(g in h)if(h.hasOwnProperty(g)){var ke=h[g];if(ke!=null)switch(g){case"name":x=ke;break;case"type":L=ke;break;case"checked":ie=ke;break;case"defaultChecked":xe=ke;break;case"value":_=ke;break;case"defaultValue":H=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(137,l));break;default:jr(o,l,g,ke,h,null)}}mu(o,_,H,ie,xe,L,x,!1);return;case"select":Xt("invalid",o),g=L=_=null;for(x in h)if(h.hasOwnProperty(x)&&(H=h[x],H!=null))switch(x){case"value":_=H;break;case"defaultValue":L=H;break;case"multiple":g=H;default:jr(o,l,x,H,h,null)}l=_,h=L,o.multiple=!!g,l!=null?cr(o,!!g,l,!1):h!=null&&cr(o,!!g,h,!0);return;case"textarea":Xt("invalid",o),_=x=g=null;for(L in h)if(h.hasOwnProperty(L)&&(H=h[L],H!=null))switch(L){case"value":g=H;break;case"defaultValue":x=H;break;case"children":_=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:jr(o,l,L,H,h,null)}Fl(o,g,x,_);return;case"option":for(ie in h)if(h.hasOwnProperty(ie)&&(g=h[ie],g!=null))switch(ie){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:jr(o,l,ie,g,h,null)}return;case"dialog":Xt("beforetoggle",o),Xt("toggle",o),Xt("cancel",o),Xt("close",o);break;case"iframe":case"object":Xt("load",o);break;case"video":case"audio":for(g=0;g<Wf.length;g++)Xt(Wf[g],o);break;case"image":Xt("error",o),Xt("load",o);break;case"details":Xt("toggle",o);break;case"embed":case"source":case"link":Xt("error",o),Xt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in h)if(h.hasOwnProperty(xe)&&(g=h[xe],g!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:jr(o,l,xe,g,h,null)}return;default:if(mf(l)){for(ke in h)h.hasOwnProperty(ke)&&(g=h[ke],g!==void 0&&cw(o,l,ke,g,h,void 0));return}}for(H in h)h.hasOwnProperty(H)&&(g=h[H],g!=null&&jr(o,l,H,g,h,null))}function fX(o,l,h,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,L=null,H=null,ie=null,xe=null,ke=null;for(Se in h){var Pe=h[Se];if(h.hasOwnProperty(Se)&&Pe!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":ie=Pe;default:g.hasOwnProperty(Se)||jr(o,l,Se,null,g,Pe)}}for(var _e in g){var Se=g[_e];if(Pe=h[_e],g.hasOwnProperty(_e)&&(Se!=null||Pe!=null))switch(_e){case"type":_=Se;break;case"name":x=Se;break;case"checked":xe=Se;break;case"defaultChecked":ke=Se;break;case"value":L=Se;break;case"defaultValue":H=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,l));break;default:Se!==Pe&&jr(o,l,_e,Se,g,Pe)}}ks(o,L,H,ie,xe,ke,_,x);return;case"select":Se=L=H=_e=null;for(_ in h)if(ie=h[_],h.hasOwnProperty(_)&&ie!=null)switch(_){case"value":break;case"multiple":Se=ie;default:g.hasOwnProperty(_)||jr(o,l,_,null,g,ie)}for(x in g)if(_=g[x],ie=h[x],g.hasOwnProperty(x)&&(_!=null||ie!=null))switch(x){case"value":_e=_;break;case"defaultValue":H=_;break;case"multiple":L=_;default:_!==ie&&jr(o,l,x,_,g,ie)}l=H,h=L,g=Se,_e!=null?cr(o,!!h,_e,!1):!!g!=!!h&&(l!=null?cr(o,!!h,l,!0):cr(o,!!h,h?[]:"",!1));return;case"textarea":Se=_e=null;for(H in h)if(x=h[H],h.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:jr(o,l,H,null,g,x)}for(L in g)if(x=g[L],_=h[L],g.hasOwnProperty(L)&&(x!=null||_!=null))switch(L){case"value":_e=x;break;case"defaultValue":Se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==_&&jr(o,l,L,x,g,_)}pu(o,_e,Se);return;case"option":for(var ht in h)if(_e=h[ht],h.hasOwnProperty(ht)&&_e!=null&&!g.hasOwnProperty(ht))switch(ht){case"selected":o.selected=!1;break;default:jr(o,l,ht,null,g,_e)}for(ie in g)if(_e=g[ie],Se=h[ie],g.hasOwnProperty(ie)&&_e!==Se&&(_e!=null||Se!=null))switch(ie){case"selected":o.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:jr(o,l,ie,_e,g,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in h)_e=h[St],h.hasOwnProperty(St)&&_e!=null&&!g.hasOwnProperty(St)&&jr(o,l,St,null,g,_e);for(xe in g)if(_e=g[xe],Se=h[xe],g.hasOwnProperty(xe)&&_e!==Se&&(_e!=null||Se!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,l));break;default:jr(o,l,xe,_e,g,Se)}return;default:if(mf(l)){for(var Cr in h)_e=h[Cr],h.hasOwnProperty(Cr)&&_e!==void 0&&!g.hasOwnProperty(Cr)&&cw(o,l,Cr,void 0,g,_e);for(ke in g)_e=g[ke],Se=h[ke],!g.hasOwnProperty(ke)||_e===Se||_e===void 0&&Se===void 0||cw(o,l,ke,_e,g,Se);return}}for(var me in h)_e=h[me],h.hasOwnProperty(me)&&_e!=null&&!g.hasOwnProperty(me)&&jr(o,l,me,null,g,_e);for(Pe in g)_e=g[Pe],Se=h[Pe],!g.hasOwnProperty(Pe)||_e===Se||_e==null&&Se==null||jr(o,l,Pe,_e,g,Se)}function Kk(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mX(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var x=h[g],_=x.transferSize,L=x.initiatorType,H=x.duration;if(_&&H&&Kk(L)){for(L=0,H=x.responseEnd,g+=1;g<h.length;g++){var ie=h[g],xe=ie.startTime;if(xe>H)break;var ke=ie.transferSize,Pe=ie.initiatorType;ke&&Kk(Pe)&&(ie=ie.responseEnd,L+=ke*(ie<H?1:(H-xe)/(ie-xe)))}if(--g,l+=8*(_+L)/(x.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var uw=null,dw=null;function Z1(o){return o.nodeType===9?o:o.ownerDocument}function Wk(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xk(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function hw(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fw=null;function pX(){var o=window.event;return o&&o.type==="popstate"?o===fw?!1:(fw=o,!0):(fw=null,!1)}var Qk=typeof setTimeout=="function"?setTimeout:void 0,gX=typeof clearTimeout=="function"?clearTimeout:void 0,Yk=typeof Promise=="function"?Promise:void 0,yX=typeof queueMicrotask=="function"?queueMicrotask:typeof Yk<"u"?function(o){return Yk.resolve(null).then(o).catch(vX)}:Qk;function vX(o){setTimeout(function(){throw o})}function mc(o){return o==="head"}function Zk(o,l){var h=l,g=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(g===0){o.removeChild(x),Ed(l);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")Qf(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Qf(h);for(var _=h.firstChild;_;){var L=_.nextSibling,H=_.nodeName;_[la]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=L}}else h==="body"&&Qf(o.ownerDocument.body);h=x}while(h);Ed(l)}function Jk(o,l){var h=o;o=0;do{var g=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=g}while(h)}function mw(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":mw(h),lt(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function bX(o,l,h,g){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[la])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=is(o.nextSibling),o===null)break}return null}function xX(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=is(o.nextSibling),o===null))return null;return o}function eO(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=is(o.nextSibling),o===null))return null;return o}function pw(o){return o.data==="$?"||o.data==="$~"}function gw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function wX(o,l){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||h.readyState!=="loading")l();else{var g=function(){l(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function is(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var yw=null;function tO(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(l===0)return is(o.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}o=o.nextSibling}return null}function rO(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return o;l--}else h!=="/$"&&h!=="/&"||l++}o=o.previousSibling}return null}function nO(o,l,h){switch(l=Z1(h),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Qf(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);lt(o)}var as=new Map,iO=new Set;function J1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Zo=Z.d;Z.d={f:_X,r:SX,D:TX,C:AX,L:EX,m:NX,X:OX,S:kX,M:jX};function _X(){var o=Zo.f(),l=q1();return o||l}function SX(o){var l=Le(o);l!==null&&l.tag===5&&l.type==="form"?w9(l):Zo.r(o)}var Sd=typeof document>"u"?null:document;function aO(o,l,h){var g=Sd;if(g&&typeof l=="string"&&l){var x=Xr(l);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),iO.has(x)||(iO.add(x),o={rel:o,crossOrigin:h,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),wi(l,"link",o),qt(l),g.head.appendChild(l)))}}function TX(o){Zo.D(o),aO("dns-prefetch",o,null)}function AX(o,l){Zo.C(o,l),aO("preconnect",o,l)}function EX(o,l,h){Zo.L(o,l,h);var g=Sd;if(g&&o&&l){var x='link[rel="preload"][as="'+Xr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+Xr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+Xr(h.imageSizes)+'"]')):x+='[href="'+Xr(o)+'"]';var _=x;switch(l){case"style":_=Td(o);break;case"script":_=Ad(o)}as.has(_)||(o=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),as.set(_,o),g.querySelector(x)!==null||l==="style"&&g.querySelector(Yf(_))||l==="script"&&g.querySelector(Zf(_))||(l=g.createElement("link"),wi(l,"link",o),qt(l),g.head.appendChild(l)))}}function NX(o,l){Zo.m(o,l);var h=Sd;if(h&&o){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+Xr(g)+'"][href="'+Xr(o)+'"]',_=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ad(o)}if(!as.has(_)&&(o=p({rel:"modulepreload",href:o},l),as.set(_,o),h.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Zf(_)))return}g=h.createElement("link"),wi(g,"link",o),qt(g),h.head.appendChild(g)}}}function kX(o,l,h){Zo.S(o,l,h);var g=Sd;if(g&&o){var x=jt(g).hoistableStyles,_=Td(o);l=l||"default";var L=x.get(_);if(!L){var H={loading:0,preload:null};if(L=g.querySelector(Yf(_)))H.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},h),(h=as.get(_))&&vw(o,h);var ie=L=g.createElement("link");qt(ie),wi(ie,"link",o),ie._p=new Promise(function(xe,ke){ie.onload=xe,ie.onerror=ke}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,ey(L,l,g)}L={type:"stylesheet",instance:L,count:1,state:H},x.set(_,L)}}}function OX(o,l){Zo.X(o,l);var h=Sd;if(h&&o){var g=jt(h).hoistableScripts,x=Ad(o),_=g.get(x);_||(_=h.querySelector(Zf(x)),_||(o=p({src:o,async:!0},l),(l=as.get(x))&&bw(o,l),_=h.createElement("script"),qt(_),wi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function jX(o,l){Zo.M(o,l);var h=Sd;if(h&&o){var g=jt(h).hoistableScripts,x=Ad(o),_=g.get(x);_||(_=h.querySelector(Zf(x)),_||(o=p({src:o,async:!0,type:"module"},l),(l=as.get(x))&&bw(o,l),_=h.createElement("script"),qt(_),wi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function sO(o,l,h,g){var x=(x=Oe.current)?J1(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Td(h.href),h=jt(x).hoistableStyles,g=h.get(l),g||(g={type:"style",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Td(h.href);var _=jt(x).hoistableStyles,L=_.get(o);if(L||(x=x.ownerDocument||x,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,L),(_=x.querySelector(Yf(o)))&&!_._p&&(L.instance=_,L.state.loading=5),as.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},as.set(o,h),_||CX(x,o,h,L.state))),l&&g===null)throw Error(n(528,""));return L}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ad(h),h=jt(x).hoistableScripts,g=h.get(l),g||(g={type:"script",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Td(o){return'href="'+Xr(o)+'"'}function Yf(o){return'link[rel="stylesheet"]['+o+"]"}function oO(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function CX(o,l,h,g){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=o.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),wi(l,"link",h),qt(l),o.head.appendChild(l))}function Ad(o){return'[src="'+Xr(o)+'"]'}function Zf(o){return"script[async]"+o}function lO(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var g=o.querySelector('style[data-href~="'+Xr(h.href)+'"]');if(g)return l.instance=g,qt(g),g;var x=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),qt(g),wi(g,"style",x),ey(g,h.precedence,o),l.instance=g;case"stylesheet":x=Td(h.href);var _=o.querySelector(Yf(x));if(_)return l.state.loading|=4,l.instance=_,qt(_),_;g=oO(h),(x=as.get(x))&&vw(g,x),_=(o.ownerDocument||o).createElement("link"),qt(_);var L=_;return L._p=new Promise(function(H,ie){L.onload=H,L.onerror=ie}),wi(_,"link",g),l.state.loading|=4,ey(_,h.precedence,o),l.instance=_;case"script":return _=Ad(h.src),(x=o.querySelector(Zf(_)))?(l.instance=x,qt(x),x):(g=h,(x=as.get(_))&&(g=p({},h),bw(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),qt(x),wi(x,"link",g),o.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,ey(g,h.precedence,o));return l.instance}function ey(o,l,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,_=x,L=0;L<g.length;L++){var H=g[L];if(H.dataset.precedence===l)_=H;else if(_!==x)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function vw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function bw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var ty=null;function cO(o,l,h){if(ty===null){var g=new Map,x=ty=new Map;x.set(h,g)}else x=ty,g=x.get(h),g||(g=new Map,x.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var _=h[x];if(!(_[la]||_[Sr]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var L=_.getAttribute(l)||"";L=o+L;var H=g.get(L);H?H.push(_):g.set(L,[_])}}return g}function uO(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function IX(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function dO(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function RX(o,l,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=Td(g.href),_=l.querySelector(Yf(x));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=ry.bind(o),l.then(o,o)),h.state.loading|=4,h.instance=_,qt(_);return}_=l.ownerDocument||l,g=oO(g),(x=as.get(x))&&vw(g,x),_=_.createElement("link"),qt(_);var L=_;L._p=new Promise(function(H,ie){L.onload=H,L.onerror=ie}),wi(_,"link",g),h.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=ry.bind(o),l.addEventListener("load",h),l.addEventListener("error",h))}}var xw=0;function MX(o,l){return o.stylesheets&&o.count===0&&iy(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var g=setTimeout(function(){if(o.stylesheets&&iy(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+l);0<o.imgBytes&&xw===0&&(xw=62500*mX());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&iy(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>xw?50:800)+l);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function ry(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)iy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ny=null;function iy(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ny=new Map,l.forEach(PX,o),ny=null,ry.call(o))}function PX(o,l){if(!(l.state.loading&4)){var h=ny.get(o);if(h)var g=h.get(null);else{h=new Map,ny.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var L=x[_];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(h.set(L.dataset.precedence,L),g=L)}g&&h.set(null,g)}x=l.instance,L=x.getAttribute("data-precedence"),_=h.get(L)||g,_===g&&h.set(null,x),h.set(L,x),this.count++,g=ry.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),_?_.parentNode.insertBefore(x,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),l.state.loading|=4}}var Jf={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function DX(o,l,h,g,x,_,L,H,ie){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function hO(o,l,h,g,x,_,L,H,ie,xe,ke,Pe){return o=new DX(o,l,h,L,ie,xe,ke,Pe,H),l=1,_===!0&&(l|=24),_=ja(3,null,null,l),o.current=_,_.stateNode=o,l=J2(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:g,isDehydrated:h,cache:l},n4(_),o}function fO(o){return o?(o=rd,o):rd}function mO(o,l,h,g,x,_){x=fO(x),g.context===null?g.context=x:g.pendingContext=x,g=nc(l),g.payload={element:h},_=_===void 0?null:_,_!==null&&(g.callback=_),h=ic(o,g,l),h!==null&&(pa(h,o,l),Cf(h,o,l))}function pO(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function ww(o,l){pO(o,l),(o=o.alternate)&&pO(o,l)}function gO(o){if(o.tag===13||o.tag===31){var l=Tu(o,67108864);l!==null&&pa(l,o,67108864),ww(o,67108864)}}function yO(o){if(o.tag===13||o.tag===31){var l=Pa();l=Ys(l);var h=Tu(o,l);h!==null&&pa(h,o,l),ww(o,l)}}var ay=!0;function LX(o,l,h,g){var x=K.T;K.T=null;var _=Z.p;try{Z.p=2,_w(o,l,h,g)}finally{Z.p=_,K.T=x}}function BX(o,l,h,g){var x=K.T;K.T=null;var _=Z.p;try{Z.p=8,_w(o,l,h,g)}finally{Z.p=_,K.T=x}}function _w(o,l,h,g){if(ay){var x=Sw(g);if(x===null)lw(o,l,g,sy,h),bO(o,g);else if(zX(x,o,l,h,g))g.stopPropagation();else if(bO(o,g),l&4&&-1<UX.indexOf(o)){for(;x!==null;){var _=Le(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var L=Bn(_.pendingLanes);if(L!==0){var H=_;for(H.pendingLanes|=2,H.entangledLanes|=2;L;){var ie=1<<31-lr(L);H.entanglements[1]|=ie,L&=~ie}oo(_),(yr&6)===0&&(V1=Tt()+500,Kf(0))}}break;case 31:case 13:H=Tu(_,2),H!==null&&pa(H,_,2),q1(),ww(_,2)}if(_=Sw(g),_===null&&lw(o,l,g,sy,h),_===x)break;x=_}x!==null&&g.stopPropagation()}else lw(o,l,g,null,h)}}function Sw(o){return o=W0(o),Tw(o)}var sy=null;function Tw(o){if(sy=null,o=ce(o),o!==null){var l=a(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=s(l),o!==null)return o;o=null}else if(h===31){if(o=c(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return sy=o,null}function vO(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Bt:return 2;case At:return 8;case nr:case an:return 32;case qr:return 268435456;default:return 32}default:return 32}}var Aw=!1,pc=null,gc=null,yc=null,em=new Map,tm=new Map,vc=[],UX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bO(o,l){switch(o){case"focusin":case"focusout":pc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":em.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(l.pointerId)}}function rm(o,l,h,g,x,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[x]},l!==null&&(l=Le(l),l!==null&&gO(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function zX(o,l,h,g,x){switch(l){case"focusin":return pc=rm(pc,o,l,h,g,x),!0;case"dragenter":return gc=rm(gc,o,l,h,g,x),!0;case"mouseover":return yc=rm(yc,o,l,h,g,x),!0;case"pointerover":var _=x.pointerId;return em.set(_,rm(em.get(_)||null,o,l,h,g,x)),!0;case"gotpointercapture":return _=x.pointerId,tm.set(_,rm(tm.get(_)||null,o,l,h,g,x)),!0}return!1}function xO(o){var l=ce(o.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=s(h),l!==null){o.blockedOn=l,Zs(o.priority,function(){yO(h)});return}}else if(l===31){if(l=c(h),l!==null){o.blockedOn=l,Zs(o.priority,function(){yO(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function oy(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=Sw(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);K0=g,h.target.dispatchEvent(g),K0=null}else return l=Le(h),l!==null&&gO(l),o.blockedOn=h,!1;l.shift()}return!0}function wO(o,l,h){oy(o)&&h.delete(l)}function $X(){Aw=!1,pc!==null&&oy(pc)&&(pc=null),gc!==null&&oy(gc)&&(gc=null),yc!==null&&oy(yc)&&(yc=null),em.forEach(wO),tm.forEach(wO)}function ly(o,l){o.blockedOn===l&&(o.blockedOn=null,Aw||(Aw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$X)))}var cy=null;function _O(o){cy!==o&&(cy=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cy===o&&(cy=null);for(var l=0;l<o.length;l+=3){var h=o[l],g=o[l+1],x=o[l+2];if(typeof g!="function"){if(Tw(g||h)===null)continue;break}var _=Le(h);_!==null&&(o.splice(l,3),l-=3,S4(_,{pending:!0,data:x,method:h.method,action:g},g,x))}}))}function Ed(o){function l(ie){return ly(ie,o)}pc!==null&&ly(pc,o),gc!==null&&ly(gc,o),yc!==null&&ly(yc,o),em.forEach(l),tm.forEach(l);for(var h=0;h<vc.length;h++){var g=vc[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<vc.length&&(h=vc[0],h.blockedOn===null);)xO(h),h.blockedOn===null&&vc.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var x=h[g],_=h[g+1],L=x[Hr]||null;if(typeof _=="function")L||_O(h);else if(L){var H=null;if(_&&_.hasAttribute("formAction")){if(x=_,L=_[Hr]||null)H=L.formAction;else if(Tw(x)!==null)continue}else H=L.action;typeof H=="function"?h[g+1]=H:(h.splice(g,3),g-=3),_O(h)}}}function SO(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(L){return x=L})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Ew(o){this._internalRoot=o}uy.prototype.render=Ew.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var h=l.current,g=Pa();mO(h,g,o,l,null,null)},uy.prototype.unmount=Ew.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;mO(o.current,2,null,o,null,null),q1(),l[mn]=null}};function uy(o){this._internalRoot=o}uy.prototype.unstable_scheduleHydration=function(o){if(o){var l=yi();o={blockedOn:null,target:o,priority:l};for(var h=0;h<vc.length&&l!==0&&l<vc[h].priority;h++);vc.splice(h,0,o),h===0&&xO(o)}};var TO=e.version;if(TO!=="19.2.4")throw Error(n(527,TO,"19.2.4"));Z.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=f(l),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var VX={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dy.isDisabled&&dy.supportsFiber)try{pi=dy.inject(VX),Br=dy}catch{}}return im.createRoot=function(o,l){if(!i(o))throw Error(n(299));var h=!1,g="",x=C9,_=I9,L=R9;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError)),l=hO(o,1,!1,null,null,h,g,null,x,_,L,SO),o[mn]=l.current,ow(o),new Ew(l)},im.hydrateRoot=function(o,l,h){if(!i(o))throw Error(n(299));var g=!1,x="",_=C9,L=I9,H=R9,ie=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(H=h.onRecoverableError),h.formState!==void 0&&(ie=h.formState)),l=hO(o,1,!0,l,h??null,g,x,ie,_,L,H,SO),l.context=fO(null),h=l.current,g=Pa(),g=Ys(g),x=nc(g),x.callback=null,ic(h,x,g),h=g,l.current.lanes=h,sa(l,h),oo(l),o[mn]=l.current,ow(o),new uy(l)},im.version="19.2.4",im}var PO;function tQ(){if(PO)return Ow.exports;PO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ow.exports=eQ(),Ow.exports}var rQ=tQ();const nQ=vr(rQ);var Ui=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Ui||{});const Rr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var nl=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(nl||{}),DO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},iQ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],c=t[r++],d=((i&7)<<18|(a&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},tz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,c=s?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|f>>6,b=f&63;d||(b=64,s||(y=64)),n.push(r[m],r[p],r[y],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ez(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const f=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||c==null||f==null||p==null)throw new aQ;const y=a<<2|c>>4;if(n.push(y),f!==64){const b=c<<4&240|f>>2;if(n.push(b),p!==64){const T=f<<6&192|p;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sQ=function(t){const e=ez(t);return tz.encodeByteArray(e,!0)},gv=function(t){return sQ(t).replace(/\./g,"")},rz=function(t){try{return tz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ=()=>oQ().__FIREBASE_DEFAULTS__,cQ=()=>{if(typeof process>"u"||typeof DO>"u")return;const t=DO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rz(t[1]);return e&&JSON.parse(e)},rx=()=>{try{return lQ()||cQ()||uQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nz=t=>{var e,r;return(r=(e=rx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},iz=t=>{const e=nz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},az=()=>{var t;return(t=rx())===null||t===void 0?void 0:t.config},sz=t=>{var e;return(e=rx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gv(JSON.stringify(r)),gv(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fQ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())}function mQ(){var t;const e=(t=rx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pQ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yQ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vQ(){const t=ri();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oz(){return!mQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lz(){try{return typeof indexedDB=="object"}catch{return!1}}function bQ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ="FirebaseError";class Gs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=xQ,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ug.prototype.create)}}class ug{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?wQ(a,n):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Gs(i,c,n)}}function wQ(t,e){return t.replace(_Q,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const _Q=/\{\$([^}]+)}/g;function SQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ah(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(LO(a)&&LO(s)){if(!ah(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function LO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function TQ(t,e){const r=new AQ(t,e);return r.subscribe.bind(r)}class AQ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");EQ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Rw),i.error===void 0&&(i.error=Rw),i.complete===void 0&&(i.complete=Rw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EQ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Rw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){return t&&t._delegate?t._delegate:t}let Sl=class{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new dQ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OQ(e))try{this.getOrInitializeService({instanceIdentifier:Gu})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Gu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gu){return this.instances.has(e)}getOptions(e=Gu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kQ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Gu){return this.component?this.component.multipleInstances?e:Gu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kQ(t){return t===Gu?void 0:t}function OQ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new NQ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Zt||(Zt={}));const CQ={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},IQ=Zt.INFO,RQ={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},MQ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=RQ[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a7{constructor(e){this.name=e,this._logLevel=IQ,this._logHandler=MQ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const PQ=(t,e)=>e.some(r=>t instanceof r);let BO,UO;function DQ(){return BO||(BO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LQ(){return UO||(UO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cz=new WeakMap,MS=new WeakMap,uz=new WeakMap,Mw=new WeakMap,s7=new WeakMap;function BQ(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(Vc(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&cz.set(r,t)}).catch(()=>{}),s7.set(e,t),e}function UQ(t){if(MS.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});MS.set(t,e)}let PS={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return MS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uz.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vc(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zQ(t){PS=t(PS)}function $Q(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Pw(this),e,...r);return uz.set(n,e.sort?e.sort():[e]),Vc(n)}:LQ().includes(t)?function(...e){return t.apply(Pw(this),e),Vc(cz.get(this))}:function(...e){return Vc(t.apply(Pw(this),e))}}function VQ(t){return typeof t=="function"?$Q(t):(t instanceof IDBTransaction&&UQ(t),PQ(t,DQ())?new Proxy(t,PS):t)}function Vc(t){if(t instanceof IDBRequest)return BQ(t);if(Mw.has(t))return Mw.get(t);const e=VQ(t);return e!==t&&(Mw.set(t,e),s7.set(e,t)),e}const Pw=t=>s7.get(t);function FQ(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),c=Vc(s);return n&&s.addEventListener("upgradeneeded",d=>{n(Vc(s.result),d.oldVersion,d.newVersion,Vc(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const qQ=["get","getKey","getAll","getAllKeys","count"],HQ=["put","add","delete","clear"],Dw=new Map;function zO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dw.get(e))return Dw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=HQ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||qQ.includes(r)))return;const a=async function(s,...c){const d=this.transaction(s,i?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(c.shift())),(await Promise.all([f[r](...c),i&&d.done]))[0]};return Dw.set(e,a),a}zQ(t=>({...t,get:(e,r,n)=>zO(e,r)||t.get(e,r,n),has:(e,r)=>!!zO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(KQ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function KQ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const DS="@firebase/app",$O="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new a7("@firebase/app"),WQ="@firebase/app-compat",XQ="@firebase/analytics-compat",QQ="@firebase/analytics",YQ="@firebase/app-check-compat",ZQ="@firebase/app-check",JQ="@firebase/auth",eY="@firebase/auth-compat",tY="@firebase/database",rY="@firebase/data-connect",nY="@firebase/database-compat",iY="@firebase/functions",aY="@firebase/functions-compat",sY="@firebase/installations",oY="@firebase/installations-compat",lY="@firebase/messaging",cY="@firebase/messaging-compat",uY="@firebase/performance",dY="@firebase/performance-compat",hY="@firebase/remote-config",fY="@firebase/remote-config-compat",mY="@firebase/storage",pY="@firebase/storage-compat",gY="@firebase/firestore",yY="@firebase/vertexai-preview",vY="@firebase/firestore-compat",bY="firebase",xY="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="[DEFAULT]",wY={[DS]:"fire-core",[WQ]:"fire-core-compat",[QQ]:"fire-analytics",[XQ]:"fire-analytics-compat",[ZQ]:"fire-app-check",[YQ]:"fire-app-check-compat",[JQ]:"fire-auth",[eY]:"fire-auth-compat",[tY]:"fire-rtdb",[rY]:"fire-data-connect",[nY]:"fire-rtdb-compat",[iY]:"fire-fn",[aY]:"fire-fn-compat",[sY]:"fire-iid",[oY]:"fire-iid-compat",[lY]:"fire-fcm",[cY]:"fire-fcm-compat",[uY]:"fire-perf",[dY]:"fire-perf-compat",[hY]:"fire-rc",[fY]:"fire-rc-compat",[mY]:"fire-gcs",[pY]:"fire-gcs-compat",[gY]:"fire-fst",[vY]:"fire-fst-compat",[yY]:"fire-vertex","fire-js":"fire-js",[bY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map,_Y=new Map,BS=new Map;function VO(t,e){try{t.container.addComponent(e)}catch(r){Tl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Wc(t){const e=t.name;if(BS.has(e))return Tl.debug(`There were multiple attempts to register component ${e}.`),!1;BS.set(e,t);for(const r of yv.values())VO(r,t);for(const r of _Y.values())VO(r,t);return!0}function hg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ll(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fc=new ug("app","Firebase",SY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Sl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=xY;function dz(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:LS,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Fc.create("bad-app-name",{appName:String(i)});if(r||(r=az()),!r)throw Fc.create("no-options");const a=yv.get(i);if(a){if(ah(r,a.options)&&ah(n,a.config))return a;throw Fc.create("duplicate-app",{appName:i})}const s=new jQ(i);for(const d of BS.values())s.addComponent(d);const c=new TY(r,n,s);return yv.set(i,c),c}function o7(t=LS){const e=yv.get(t);if(!e&&t===LS&&az())return dz();if(!e)throw Fc.create("no-app",{appName:t});return e}function hs(t,e,r){var n;let i=(n=wY[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tl.warn(c.join(" "));return}Wc(new Sl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="firebase-heartbeat-database",EY=1,rp="firebase-heartbeat-store";let Lw=null;function hz(){return Lw||(Lw=FQ(AY,EY,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rp)}catch(r){console.warn(r)}}}}).catch(t=>{throw Fc.create("idb-open",{originalErrorMessage:t.message})})),Lw}async function NY(t){try{const r=(await hz()).transaction(rp),n=await r.objectStore(rp).get(fz(t));return await r.done,n}catch(e){if(e instanceof Gs)Tl.warn(e.message);else{const r=Fc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tl.warn(r.message)}}}async function FO(t,e){try{const n=(await hz()).transaction(rp,"readwrite");await n.objectStore(rp).put(e,fz(t)),await n.done}catch(r){if(r instanceof Gs)Tl.warn(r.message);else{const n=Fc.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Tl.warn(n.message)}}}function fz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=1024,OY=720*60*60*1e3;class jY{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new IY(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=OY}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Tl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=qO(),{heartbeatsToSend:n,unsentEntries:i}=CY(this._heartbeatsCache.heartbeats),a=gv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Tl.warn(r),""}}}function qO(){return new Date().toISOString().substring(0,10)}function CY(t,e=kY){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),HO(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),HO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class IY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lz()?bQ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await NY(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return FO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return FO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HO(t){return gv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(t){Wc(new Sl("platform-logger",e=>new GQ(e),"PRIVATE")),Wc(new Sl("heartbeat",e=>new jY(e),"PRIVATE")),hs(DS,$O,t),hs(DS,$O,"esm2017"),hs("fire-js","")}RY("");var MY="firebase",PY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(MY,PY,"app");function l7(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function mz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DY=mz,pz=new ug("auth","Firebase",mz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new a7("@firebase/auth");function LY(t,...e){vv.logLevel<=Zt.WARN&&vv.warn(`Auth (${D0}): ${t}`,...e)}function Yy(t,...e){vv.logLevel<=Zt.ERROR&&vv.error(`Auth (${D0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,...e){throw u7(t,...e)}function Vs(t,...e){return u7(t,...e)}function c7(t,e,r){const n=Object.assign(Object.assign({},DY()),{[e]:r});return new ug("auth","Firebase",n).create(e,{appName:t.name})}function c0(t){return c7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BY(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&xo(t,"argument-error"),c7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function u7(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return pz.create(t,...e)}function It(t,e,...r){if(!t)throw u7(e,...r)}function cl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yy(e),new Error(e)}function Al(t,e){t||cl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UY(){return GO()==="http:"||GO()==="https:"}function GO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UY()||gQ()||"connection"in navigator)?navigator.onLine:!0}function $Y(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,r){this.shortDelay=e,this.longDelay=r,Al(r>e,"Short delay should be less than long delay!"),this.isMobile=fQ()||yQ()}get(){return zY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t,e){Al(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY=new fg(3e4,6e4);function h7(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wh(t,e,r,n,i={}){return yz(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const c=dg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},a);return pQ()||(f.referrerPolicy="no-referrer"),gz.fetch()(vz(t,t.config.apiHost,r,c),f)})}async function yz(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},VY),e);try{const i=new HY(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw fy(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const c=a.ok?s.errorMessage:s.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw fy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw fy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw fy(t,"user-disabled",s);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw c7(t,m,f);xo(t,m)}}catch(i){if(i instanceof Gs)throw i;xo(t,"network-request-failed",{message:String(i)})}}async function qY(t,e,r,n,i={}){const a=await Wh(t,e,r,n,i);return"mfaPendingCredential"in a&&xo(t,"multi-factor-auth-required",{_serverResponse:a}),a}function vz(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?d7(t.config,i):`${t.config.apiScheme}://${i}`}class HY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Vs(this.auth,"network-request-failed")),FY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Vs(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(t,e){return Wh(t,"POST","/v1/accounts:delete",e)}async function bz(t,e){return Wh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KY(t,e=!1){const r=Lr(t),n=await r.getIdToken(e),i=f7(n);It(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Dm(Bw(i.auth_time)),issuedAtTime:Dm(Bw(i.iat)),expirationTime:Dm(Bw(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bw(t){return Number(t)*1e3}function f7(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Yy("JWT malformed, contained fewer than 3 sections"),null;try{const i=rz(r);return i?JSON.parse(i):(Yy("Failed to decode base64 JWT payload"),null)}catch(i){return Yy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function KO(t){const e=f7(t);return It(e,"internal-error"),It(typeof e.exp<"u","internal-error"),It(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Gs&&WY(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function WY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dm(this.lastLoginAt),this.creationTime=Dm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(t){var e;const r=t.auth,n=await t.getIdToken(),i=await np(t,bz(r,{idToken:n}));It(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?xz(a.providerUserInfo):[],c=YY(t.providerData,s),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new zS(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function QY(t){const e=Lr(t);await bv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YY(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function xz(t){return t.map(e=>{var{providerId:r}=e,n=l7(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZY(t,e){const r=await yz(t,{},async()=>{const n=dg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=vz(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",gz.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function JY(t,e){return Wh(t,"POST","/v2/accounts:revokeToken",h7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){It(e.idToken,"internal-error"),It(typeof e.idToken<"u","internal-error"),It(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){It(e.length!==0,"internal-error");const r=KO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await ZY(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new Kd;return n&&(It(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(It(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(It(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kd,this.toJSON())}_performRefresh(){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e){It(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ul{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=l7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zS(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await np(this,this.stsTokenManager.getToken(this.auth,e));return It(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return KY(this,e)}reload(){return QY(this)}_assign(e){this!==e&&(It(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ul(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await bv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ll(this.auth.app))return Promise.reject(c0(this.auth));const e=await this.getIdToken();return await np(this,GY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,c,d,f,m;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(i=r.email)!==null&&i!==void 0?i:void 0,b=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,k=(f=r.createdAt)!==null&&f!==void 0?f:void 0,M=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:B,isAnonymous:R,providerData:I,stsTokenManager:A}=r;It(C&&A,e,"internal-error");const E=Kd.fromJSON(this.name,A);It(typeof C=="string",e,"internal-error"),xc(p,e.name),xc(y,e.name),It(typeof B=="boolean",e,"internal-error"),It(typeof R=="boolean",e,"internal-error"),xc(b,e.name),xc(T,e.name),xc(S,e.name),xc(w,e.name),xc(k,e.name),xc(M,e.name);const O=new ul({uid:C,auth:e,email:y,emailVerified:B,displayName:p,isAnonymous:R,photoURL:T,phoneNumber:b,tenantId:S,stsTokenManager:E,createdAt:k,lastLoginAt:M});return I&&Array.isArray(I)&&(O.providerData=I.map(U=>Object.assign({},U))),w&&(O._redirectEventId=w),O}static async _fromIdTokenResponse(e,r,n=!1){const i=new Kd;i.updateFromServerResponse(r);const a=new ul({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await bv(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];It(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?xz(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Kd;c.updateFromIdToken(n);const d=new ul({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Map;function dl(t){Al(t instanceof Function,"Expected a class definition");let e=WO.get(t);return e?(Al(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}wz.type="NONE";const XO=wz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e,r){return`firebase:${t}:${e}:${r}`}class Wd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Zy(this.userKey,i.apiKey,a),this.fullPersistenceKey=Zy("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ul._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Wd(dl(XO),e,n);const i=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||dl(XO);const s=Zy(n,e.config.apiKey,e.name);let c=null;for(const f of r)try{const m=await f._get(s);if(m){const p=ul._fromJSON(e,m);f!==a&&(c=p),a=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Wd(a,e,n):(a=d[0],c&&await a._set(s,c.toJSON()),await Promise.all(r.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new Wd(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Az(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_z(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nz(e))return"Blackberry";if(kz(e))return"Webos";if(Sz(e))return"Safari";if((e.includes("chrome/")||Tz(e))&&!e.includes("edge/"))return"Chrome";if(Ez(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function _z(t=ri()){return/firefox\//i.test(t)}function Sz(t=ri()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tz(t=ri()){return/crios\//i.test(t)}function Az(t=ri()){return/iemobile/i.test(t)}function Ez(t=ri()){return/android/i.test(t)}function Nz(t=ri()){return/blackberry/i.test(t)}function kz(t=ri()){return/webos/i.test(t)}function m7(t=ri()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eZ(t=ri()){var e;return m7(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tZ(){return vQ()&&document.documentMode===10}function Oz(t=ri()){return m7(t)||Ez(t)||kz(t)||Nz(t)||/windows phone/i.test(t)||Az(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t,e=[]){let r;switch(t){case"Browser":r=QO(ri());break;case"Worker":r=`${QO(ri())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${D0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,c)=>{try{const d=e(a);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nZ(t,e={}){return Wh(t,"GET","/v2/passwordPolicy",h7(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ=6;class aZ{constructor(e){var r,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:iZ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YO(this),this.idTokenSubscription=new YO(this),this.beforeStateQueue=new rZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=dl(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Wd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bz(this,{idToken:e}),n=await ul._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ll(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$Y()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ll(this.app))return Promise.reject(c0(this));const r=e?Lr(e):null;return r&&It(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&It(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ll(this.app)?Promise.reject(c0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ll(this.app)?Promise.reject(c0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nZ(this),r=new aZ(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ug("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await JY(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&dl(e)||this._popupRedirectResolver;It(r,this,"argument-error"),this.redirectPersistenceManager=await Wd.create(this,[dl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(c,this,"internal-error"),c.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,i);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&LY(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function nx(t){return Lr(t)}class YO{constructor(e){this.auth=e,this.observer=null,this.addObserver=TQ(r=>this.observer=r)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oZ(t){p7=t}function lZ(t){return p7.loadJS(t)}function cZ(){return p7.gapiScript}function uZ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(t,e){const r=hg(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(ah(a,e??{}))return i;xo(i,"already-initialized")}return r.initialize({options:e})}function hZ(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(dl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function fZ(t,e,r){const n=nx(t);It(n._canInitEmulator,n,"emulator-config-failed"),It(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Cz(e),{host:s,port:c}=mZ(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${a}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),pZ()}function Cz(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mZ(t){const e=Cz(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:ZO(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:ZO(s)}}}function ZO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pZ(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,r){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(t,e){return qY(t,"POST","/v1/accounts:signInWithIdp",h7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZ="http://localhost";class p0 extends Iz{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new p0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):xo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=l7(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new p0(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return Xd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Xd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Xd(e,r)}buildRequest(){const e={requestUri:gZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=dg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends g7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends mg{constructor(){super("facebook.com")}static credential(e){return p0._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nc.credential(e.oauthAccessToken)}catch{return null}}}Nc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends mg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return p0._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return sl.credential(r,n)}catch{return null}}}sl.GOOGLE_SIGN_IN_METHOD="google.com";sl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends mg{constructor(){super("github.com")}static credential(e){return p0._fromParams({providerId:kc.PROVIDER_ID,signInMethod:kc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kc.credentialFromTaggedObject(e)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kc.credential(e.oauthAccessToken)}catch{return null}}}kc.GITHUB_SIGN_IN_METHOD="github.com";kc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends mg{constructor(){super("twitter.com")}static credential(e,r){return p0._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Oc.credential(r,n)}catch{return null}}}Oc.TWITTER_SIGN_IN_METHOD="twitter.com";Oc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ul._fromIdTokenResponse(e,n,i),s=JO(n);return new sh({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=JO(n);return new sh({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function JO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends Gs{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,xv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new xv(e,r,n,i)}}function Rz(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xv._fromErrorAndOperation(t,a,e,n):a})}async function yZ(t,e,r=!1){const n=await np(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return sh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vZ(t,e,r=!1){const{auth:n}=t;if(ll(n.app))return Promise.reject(c0(n));const i="reauthenticate";try{const a=await np(t,Rz(n,i,e,t),r);It(a.idToken,n,"internal-error");const s=f7(a.idToken);It(s,n,"internal-error");const{sub:c}=s;return It(t.uid===c,n,"user-mismatch"),sh._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xo(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bZ(t,e,r=!1){if(ll(t.app))return Promise.reject(c0(t));const n="signIn",i=await Rz(t,n,e),a=await sh._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function xZ(t,e,r,n){return Lr(t).onIdTokenChanged(e,r,n)}function wZ(t,e,r){return Lr(t).beforeAuthStateChanged(e,r)}function _Z(t,e,r,n){return Lr(t).onAuthStateChanged(e,r,n)}function SZ(t){return Lr(t).signOut()}const wv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wv,"1"),this.storage.removeItem(wv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ=1e3,AZ=10;class Pz extends Mz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);tZ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AZ):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},TZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pz.type="LOCAL";const EZ=Pz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz extends Mz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Dz.type="SESSION";const Lz=Dz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NZ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new ix(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(s).map(async f=>f(r.origin,a)),d=await NZ(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ix.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((c,d)=>{const f=y7("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(){return window}function OZ(t){yo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function jZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CZ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IZ(){return Bz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz="firebaseLocalStorageDb",RZ=1,_v="firebaseLocalStorage",zz="fbase_key";class pg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ax(t,e){return t.transaction([_v],e?"readwrite":"readonly").objectStore(_v)}function MZ(){const t=indexedDB.deleteDatabase(Uz);return new pg(t).toPromise()}function $S(){const t=indexedDB.open(Uz,RZ);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(_v,{keyPath:zz})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(_v)?e(n):(n.close(),await MZ(),e(await $S()))})})}async function ej(t,e,r){const n=ax(t,!0).put({[zz]:e,value:r});return new pg(n).toPromise()}async function PZ(t,e){const r=ax(t,!1).get(e),n=await new pg(r).toPromise();return n===void 0?null:n.value}function tj(t,e){const r=ax(t,!0).delete(e);return new pg(r).toPromise()}const DZ=800,LZ=3;class $z{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $S(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>LZ)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ix._getInstance(IZ()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await jZ(),!this.activeServiceWorker)return;this.sender=new kZ(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $S();return await ej(e,wv,"1"),await tj(e,wv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>ej(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>PZ(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>tj(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ax(i,!1).getAll();return new pg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$z.type="LOCAL";const BZ=$z;new fg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t,e){return e?dl(e):(It(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7 extends Iz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Xd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Xd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function UZ(t){return bZ(t.auth,new v7(t),t.bypassAuthState)}function zZ(t){const{auth:e,user:r}=t;return It(r,e,"internal-error"),vZ(r,new v7(t),t.bypassAuthState)}async function $Z(t){const{auth:e,user:r}=t;return It(r,e,"internal-error"),yZ(r,new v7(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UZ;case"linkViaPopup":case"linkViaRedirect":return $Z;case"reauthViaPopup":case"reauthViaRedirect":return zZ;default:xo(this.auth,"internal-error")}}resolve(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ=new fg(2e3,1e4);async function FZ(t,e,r){if(ll(t.app))return Promise.reject(Vs(t,"operation-not-supported-in-this-environment"));const n=nx(t);BY(t,e,g7);const i=Vz(n,r);return new t0(n,"signInViaPopup",e,i).executeNotNull()}class t0 extends Fz{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,t0.currentPopupAction&&t0.currentPopupAction.cancel(),t0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return It(e,this.auth,"internal-error"),e}async onExecution(){Al(this.filter.length===1,"Popup operations only handle one event");const e=y7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VZ.get())};e()}}t0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qZ="pendingRedirect",Jy=new Map;class HZ extends Fz{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Jy.get(this.auth._key());if(!e){try{const n=await GZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Jy.set(this.auth._key(),e)}return this.bypassAuthState||Jy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GZ(t,e){const r=XZ(e),n=WZ(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function KZ(t,e){Jy.set(t._key(),e)}function WZ(t){return dl(t._redirectPersistence)}function XZ(t){return Zy(qZ,t.config.apiKey,t.name)}async function QZ(t,e,r=!1){if(ll(t.app))return Promise.reject(c0(t));const n=nx(t),i=Vz(n,e),s=await new HZ(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YZ=600*1e3;class ZZ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JZ(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!qz(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Vs(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(rj(e))}saveEventToCache(e){this.cachedEventUids.add(rj(e)),this.lastProcessedEventTime=Date.now()}}function rj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qz({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JZ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qz(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJ(t,e={}){return Wh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rJ=/^https?/;async function nJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eJ(t);for(const r of e)try{if(iJ(r))return}catch{}xo(t,"unauthorized-domain")}function iJ(t){const e=US(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!rJ.test(r))return!1;if(tJ.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aJ=new fg(3e4,6e4);function nj(){const t=yo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function sJ(t){return new Promise((e,r)=>{var n,i,a;function s(){nj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nj(),r(Vs(t,"network-request-failed"))},timeout:aJ.get()})}if(!((i=(n=yo().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=yo().gapi)===null||a===void 0)&&a.load)s();else{const c=uZ("iframefcb");return yo()[c]=()=>{gapi.load?s():r(Vs(t,"network-request-failed"))},lZ(`${cZ()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw ev=null,e})}let ev=null;function oJ(t){return ev=ev||sJ(t),ev}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ=new fg(5e3,15e3),cJ="__/auth/iframe",uJ="emulator/auth/iframe",dJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fJ(t){const e=t.config;It(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?d7(e,uJ):`https://${t.config.authDomain}/${cJ}`,n={apiKey:e.apiKey,appName:t.name,v:D0},i=hJ.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${dg(n).slice(1)}`}async function mJ(t){const e=await oJ(t),r=yo().gapi;return It(r,t,"internal-error"),e.open({where:document.body,url:fJ(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dJ,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Vs(t,"network-request-failed"),c=yo().setTimeout(()=>{a(s)},lJ.get());function d(){yo().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gJ=500,yJ=600,vJ="_blank",bJ="http://localhost";class ij{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xJ(t,e,r,n=gJ,i=yJ){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},pJ),{width:n.toString(),height:i.toString(),top:a,left:s}),f=ri().toLowerCase();r&&(c=Tz(f)?vJ:r),_z(f)&&(e=e||bJ,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[b,T])=>`${y}${b}=${T},`,"");if(eZ(f)&&c!=="_self")return wJ(e||"",c),new ij(null);const p=window.open(e||"",c,m);It(p,t,"popup-blocked");try{p.focus()}catch{}return new ij(p)}function wJ(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J="__/auth/handler",SJ="emulator/auth/handler",TJ=encodeURIComponent("fac");async function aj(t,e,r,n,i,a){It(t.config.authDomain,t,"auth-domain-config-required"),It(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:D0,eventId:i};if(e instanceof g7){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",SQ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))s[m]=p}if(e instanceof mg){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(s.scopes=m.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),f=d?`#${TJ}=${encodeURIComponent(d)}`:"";return`${AJ(t)}?${dg(c).slice(1)}${f}`}function AJ({config:t}){return t.emulator?d7(t,SJ):`https://${t.authDomain}/${_J}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="webStorageSupport";class EJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lz,this._completeRedirectFn=QZ,this._overrideRedirectResult=KZ}async _openPopup(e,r,n,i){var a;Al((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await aj(e,r,n,US(),i);return xJ(e,s,y7())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await aj(e,r,n,US(),i);return OZ(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Al(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await mJ(e),n=new ZZ(e);return r.register("authEvent",i=>(It(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Uw,{type:Uw},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Uw];s!==void 0&&r(!!s),xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=nJ(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Oz()||Sz()||m7()}}const NJ=EJ;var sj="@firebase/auth",oj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jJ(t){Wc(new Sl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;It(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jz(t)},f=new sZ(n,i,a,d);return hZ(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Wc(new Sl("auth-internal",e=>{const r=nx(e.getProvider("auth").getImmediate());return(n=>new kJ(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(sj,oj,OJ(t)),hs(sj,oj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CJ=300,IJ=sz("authIdTokenMaxAge")||CJ;let lj=null;const RJ=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>IJ)return;const i=r==null?void 0:r.token;lj!==i&&(lj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Hz(t=o7()){const e=hg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=dZ(t,{popupRedirectResolver:NJ,persistence:[BZ,EZ,Lz]}),n=sz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=RJ(a.toString());wZ(r,s,()=>s(r.currentUser)),xZ(r,c=>s(c))}}const i=nz("auth");return i&&fZ(r,`http://${i}`),r}function MJ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oZ({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Vs("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",MJ().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jJ("Browser");var cj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u0,Gz;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function O(){}O.prototype=E.prototype,A.D=E.prototype,A.prototype=new O,A.prototype.constructor=A,A.C=function(U,P,V){for(var z=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)z[Q-2]=arguments[Q];return E.prototype[P].apply(U,z)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,O){O||(O=0);var U=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)U[P]=E.charCodeAt(O++)|E.charCodeAt(O++)<<8|E.charCodeAt(O++)<<16|E.charCodeAt(O++)<<24;else for(P=0;16>P;++P)U[P]=E[O++]|E[O++]<<8|E[O++]<<16|E[O++]<<24;E=A.g[0],O=A.g[1],P=A.g[2];var V=A.g[3],z=E+(V^O&(P^V))+U[0]+3614090360&4294967295;E=O+(z<<7&4294967295|z>>>25),z=V+(P^E&(O^P))+U[1]+3905402710&4294967295,V=E+(z<<12&4294967295|z>>>20),z=P+(O^V&(E^O))+U[2]+606105819&4294967295,P=V+(z<<17&4294967295|z>>>15),z=O+(E^P&(V^E))+U[3]+3250441966&4294967295,O=P+(z<<22&4294967295|z>>>10),z=E+(V^O&(P^V))+U[4]+4118548399&4294967295,E=O+(z<<7&4294967295|z>>>25),z=V+(P^E&(O^P))+U[5]+1200080426&4294967295,V=E+(z<<12&4294967295|z>>>20),z=P+(O^V&(E^O))+U[6]+2821735955&4294967295,P=V+(z<<17&4294967295|z>>>15),z=O+(E^P&(V^E))+U[7]+4249261313&4294967295,O=P+(z<<22&4294967295|z>>>10),z=E+(V^O&(P^V))+U[8]+1770035416&4294967295,E=O+(z<<7&4294967295|z>>>25),z=V+(P^E&(O^P))+U[9]+2336552879&4294967295,V=E+(z<<12&4294967295|z>>>20),z=P+(O^V&(E^O))+U[10]+4294925233&4294967295,P=V+(z<<17&4294967295|z>>>15),z=O+(E^P&(V^E))+U[11]+2304563134&4294967295,O=P+(z<<22&4294967295|z>>>10),z=E+(V^O&(P^V))+U[12]+1804603682&4294967295,E=O+(z<<7&4294967295|z>>>25),z=V+(P^E&(O^P))+U[13]+4254626195&4294967295,V=E+(z<<12&4294967295|z>>>20),z=P+(O^V&(E^O))+U[14]+2792965006&4294967295,P=V+(z<<17&4294967295|z>>>15),z=O+(E^P&(V^E))+U[15]+1236535329&4294967295,O=P+(z<<22&4294967295|z>>>10),z=E+(P^V&(O^P))+U[1]+4129170786&4294967295,E=O+(z<<5&4294967295|z>>>27),z=V+(O^P&(E^O))+U[6]+3225465664&4294967295,V=E+(z<<9&4294967295|z>>>23),z=P+(E^O&(V^E))+U[11]+643717713&4294967295,P=V+(z<<14&4294967295|z>>>18),z=O+(V^E&(P^V))+U[0]+3921069994&4294967295,O=P+(z<<20&4294967295|z>>>12),z=E+(P^V&(O^P))+U[5]+3593408605&4294967295,E=O+(z<<5&4294967295|z>>>27),z=V+(O^P&(E^O))+U[10]+38016083&4294967295,V=E+(z<<9&4294967295|z>>>23),z=P+(E^O&(V^E))+U[15]+3634488961&4294967295,P=V+(z<<14&4294967295|z>>>18),z=O+(V^E&(P^V))+U[4]+3889429448&4294967295,O=P+(z<<20&4294967295|z>>>12),z=E+(P^V&(O^P))+U[9]+568446438&4294967295,E=O+(z<<5&4294967295|z>>>27),z=V+(O^P&(E^O))+U[14]+3275163606&4294967295,V=E+(z<<9&4294967295|z>>>23),z=P+(E^O&(V^E))+U[3]+4107603335&4294967295,P=V+(z<<14&4294967295|z>>>18),z=O+(V^E&(P^V))+U[8]+1163531501&4294967295,O=P+(z<<20&4294967295|z>>>12),z=E+(P^V&(O^P))+U[13]+2850285829&4294967295,E=O+(z<<5&4294967295|z>>>27),z=V+(O^P&(E^O))+U[2]+4243563512&4294967295,V=E+(z<<9&4294967295|z>>>23),z=P+(E^O&(V^E))+U[7]+1735328473&4294967295,P=V+(z<<14&4294967295|z>>>18),z=O+(V^E&(P^V))+U[12]+2368359562&4294967295,O=P+(z<<20&4294967295|z>>>12),z=E+(O^P^V)+U[5]+4294588738&4294967295,E=O+(z<<4&4294967295|z>>>28),z=V+(E^O^P)+U[8]+2272392833&4294967295,V=E+(z<<11&4294967295|z>>>21),z=P+(V^E^O)+U[11]+1839030562&4294967295,P=V+(z<<16&4294967295|z>>>16),z=O+(P^V^E)+U[14]+4259657740&4294967295,O=P+(z<<23&4294967295|z>>>9),z=E+(O^P^V)+U[1]+2763975236&4294967295,E=O+(z<<4&4294967295|z>>>28),z=V+(E^O^P)+U[4]+1272893353&4294967295,V=E+(z<<11&4294967295|z>>>21),z=P+(V^E^O)+U[7]+4139469664&4294967295,P=V+(z<<16&4294967295|z>>>16),z=O+(P^V^E)+U[10]+3200236656&4294967295,O=P+(z<<23&4294967295|z>>>9),z=E+(O^P^V)+U[13]+681279174&4294967295,E=O+(z<<4&4294967295|z>>>28),z=V+(E^O^P)+U[0]+3936430074&4294967295,V=E+(z<<11&4294967295|z>>>21),z=P+(V^E^O)+U[3]+3572445317&4294967295,P=V+(z<<16&4294967295|z>>>16),z=O+(P^V^E)+U[6]+76029189&4294967295,O=P+(z<<23&4294967295|z>>>9),z=E+(O^P^V)+U[9]+3654602809&4294967295,E=O+(z<<4&4294967295|z>>>28),z=V+(E^O^P)+U[12]+3873151461&4294967295,V=E+(z<<11&4294967295|z>>>21),z=P+(V^E^O)+U[15]+530742520&4294967295,P=V+(z<<16&4294967295|z>>>16),z=O+(P^V^E)+U[2]+3299628645&4294967295,O=P+(z<<23&4294967295|z>>>9),z=E+(P^(O|~V))+U[0]+4096336452&4294967295,E=O+(z<<6&4294967295|z>>>26),z=V+(O^(E|~P))+U[7]+1126891415&4294967295,V=E+(z<<10&4294967295|z>>>22),z=P+(E^(V|~O))+U[14]+2878612391&4294967295,P=V+(z<<15&4294967295|z>>>17),z=O+(V^(P|~E))+U[5]+4237533241&4294967295,O=P+(z<<21&4294967295|z>>>11),z=E+(P^(O|~V))+U[12]+1700485571&4294967295,E=O+(z<<6&4294967295|z>>>26),z=V+(O^(E|~P))+U[3]+2399980690&4294967295,V=E+(z<<10&4294967295|z>>>22),z=P+(E^(V|~O))+U[10]+4293915773&4294967295,P=V+(z<<15&4294967295|z>>>17),z=O+(V^(P|~E))+U[1]+2240044497&4294967295,O=P+(z<<21&4294967295|z>>>11),z=E+(P^(O|~V))+U[8]+1873313359&4294967295,E=O+(z<<6&4294967295|z>>>26),z=V+(O^(E|~P))+U[15]+4264355552&4294967295,V=E+(z<<10&4294967295|z>>>22),z=P+(E^(V|~O))+U[6]+2734768916&4294967295,P=V+(z<<15&4294967295|z>>>17),z=O+(V^(P|~E))+U[13]+1309151649&4294967295,O=P+(z<<21&4294967295|z>>>11),z=E+(P^(O|~V))+U[4]+4149444226&4294967295,E=O+(z<<6&4294967295|z>>>26),z=V+(O^(E|~P))+U[11]+3174756917&4294967295,V=E+(z<<10&4294967295|z>>>22),z=P+(E^(V|~O))+U[2]+718787259&4294967295,P=V+(z<<15&4294967295|z>>>17),z=O+(V^(P|~E))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(z<<21&4294967295|z>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+V&4294967295}n.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var O=E-this.blockSize,U=this.B,P=this.h,V=0;V<E;){if(P==0)for(;V<=O;)i(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<E;)if(U[P++]=A.charCodeAt(V++),P==this.blockSize){i(this,U),P=0;break}}else for(;V<E;)if(U[P++]=A[V++],P==this.blockSize){i(this,U),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var O=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=O&255,O/=256;for(this.u(A),A=Array(16),E=O=0;4>E;++E)for(var U=0;32>U;U+=8)A[O++]=this.g[E]>>>U&255;return A};function a(A,E){var O=c;return Object.prototype.hasOwnProperty.call(O,A)?O[A]:O[A]=E(A)}function s(A,E){this.h=E;for(var O=[],U=!0,P=A.length-1;0<=P;P--){var V=A[P]|0;U&&V==E||(O[P]=V,U=!1)}this.g=O}var c={};function d(A){return-128<=A&&128>A?a(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return w(f(-A));for(var E=[],O=1,U=0;A>=O;U++)E[U]=A/O|0,O*=4294967296;return new s(E,0)}function m(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return w(m(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(E,8)),U=p,P=0;P<A.length;P+=8){var V=Math.min(8,A.length-P),z=parseInt(A.substring(P,P+V),E);8>V?(V=f(Math.pow(E,V)),U=U.j(V).add(f(z))):(U=U.j(O),U=U.add(f(z)))}return U}var p=d(0),y=d(1),b=d(16777216);t=s.prototype,t.m=function(){if(S(this))return-w(this).m();for(var A=0,E=1,O=0;O<this.g.length;O++){var U=this.i(O);A+=(0<=U?U:4294967296+U)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(S(this))return"-"+w(this).toString(A);for(var E=f(Math.pow(A,6)),O=this,U="";;){var P=B(O,E).g;O=k(O,P.j(E));var V=((0<O.g.length?O.g[0]:O.h)>>>0).toString(A);if(O=P,T(O))return V+U;for(;6>V.length;)V="0"+V;U=V+U}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function S(A){return A.h==-1}t.l=function(A){return A=k(this,A),S(A)?-1:T(A)?0:1};function w(A){for(var E=A.g.length,O=[],U=0;U<E;U++)O[U]=~A.g[U];return new s(O,~A.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),O=[],U=0,P=0;P<=E;P++){var V=U+(this.i(P)&65535)+(A.i(P)&65535),z=(V>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);U=z>>>16,V&=65535,z&=65535,O[P]=z<<16|V}return new s(O,O[O.length-1]&-2147483648?-1:0)};function k(A,E){return A.add(w(E))}t.j=function(A){if(T(this)||T(A))return p;if(S(this))return S(A)?w(this).j(w(A)):w(w(this).j(A));if(S(A))return w(this.j(w(A)));if(0>this.l(b)&&0>A.l(b))return f(this.m()*A.m());for(var E=this.g.length+A.g.length,O=[],U=0;U<2*E;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var P=0;P<A.g.length;P++){var V=this.i(U)>>>16,z=this.i(U)&65535,Q=A.i(P)>>>16,ee=A.i(P)&65535;O[2*U+2*P]+=z*ee,M(O,2*U+2*P),O[2*U+2*P+1]+=V*ee,M(O,2*U+2*P+1),O[2*U+2*P+1]+=z*Q,M(O,2*U+2*P+1),O[2*U+2*P+2]+=V*Q,M(O,2*U+2*P+2)}for(U=0;U<E;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=E;U<2*E;U++)O[U]=0;return new s(O,0)};function M(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function C(A,E){this.g=A,this.h=E}function B(A,E){if(T(E))throw Error("division by zero");if(T(A))return new C(p,p);if(S(A))return E=B(w(A),E),new C(w(E.g),w(E.h));if(S(E))return E=B(A,w(E)),new C(w(E.g),E.h);if(30<A.g.length){if(S(A)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var O=y,U=E;0>=U.l(A);)O=R(O),U=R(U);var P=I(O,1),V=I(U,1);for(U=I(U,2),O=I(O,2);!T(U);){var z=V.add(U);0>=z.l(A)&&(P=P.add(O),V=z),U=I(U,1),O=I(O,1)}return E=k(A,P.j(E)),new C(P,E)}for(P=p;0<=A.l(E);){for(O=Math.max(1,Math.floor(A.m()/E.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),V=f(O),z=V.j(E);S(z)||0<z.l(A);)O-=U,V=f(O),z=V.j(E);T(V)&&(V=y),P=P.add(V),A=k(A,z)}return new C(P,A)}t.A=function(A){return B(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)&A.i(U);return new s(O,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)|A.i(U);return new s(O,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)^A.i(U);return new s(O,this.h^A.h)};function R(A){for(var E=A.g.length+1,O=[],U=0;U<E;U++)O[U]=A.i(U)<<1|A.i(U-1)>>>31;return new s(O,A.h)}function I(A,E){var O=E>>5;E%=32;for(var U=A.g.length-O,P=[],V=0;V<U;V++)P[V]=0<E?A.i(V+O)>>>E|A.i(V+O+1)<<32-E:A.i(V+O);return new s(P,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Gz=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=m,u0=s}).apply(typeof cj<"u"?cj:typeof self<"u"?self:typeof window<"u"?window:{});var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kz,km,Wz,tv,VS,Xz,Qz,Yz;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,j,$){return v==Array.prototype||v==Object.prototype||(v[j]=$.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof my=="object"&&my];for(var j=0;j<v.length;++j){var $=v[j];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=r(this);function i(v,j){if(j)e:{var $=n;v=v.split(".");for(var W=0;W<v.length-1;W++){var ye=v[W];if(!(ye in $))break e;$=$[ye]}v=v[v.length-1],W=$[v],j=j(W),j!=W&&j!=null&&e($,v,{configurable:!0,writable:!0,value:j})}}function a(v,j){v instanceof String&&(v+="");var $=0,W=!1,ye={next:function(){if(!W&&$<v.length){var Te=$++;return{value:j(Te,v[Te]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(v){return v||function(){return a(this,function(j,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var j=typeof v;return j=j!="object"?j:v?Array.isArray(v)?"array":j:"null",j=="array"||j=="object"&&typeof v.length=="number"}function f(v){var j=typeof v;return j=="object"&&v!=null||j=="function"}function m(v,j,$){return v.call.apply(v.bind,arguments)}function p(v,j,$){if(!v)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,W),v.apply(j,ye)}}return function(){return v.apply(j,arguments)}}function y(v,j,$){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function b(v,j){var $=Array.prototype.slice.call(arguments,1);return function(){var W=$.slice();return W.push.apply(W,arguments),v.apply(this,W)}}function T(v,j){function $(){}$.prototype=j.prototype,v.aa=j.prototype,v.prototype=new $,v.prototype.constructor=v,v.Qb=function(W,ye,Te){for(var Qe=Array(arguments.length-2),xr=2;xr<arguments.length;xr++)Qe[xr-2]=arguments[xr];return j.prototype[ye].apply(W,Qe)}}function S(v){const j=v.length;if(0<j){const $=Array(j);for(let W=0;W<j;W++)$[W]=v[W];return $}return[]}function w(v,j){for(let $=1;$<arguments.length;$++){const W=arguments[$];if(d(W)){const ye=v.length||0,Te=W.length||0;v.length=ye+Te;for(let Qe=0;Qe<Te;Qe++)v[ye+Qe]=W[Qe]}else v.push(W)}}class k{constructor(j,$){this.i=j,this.j=$,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function M(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function B(v){return B[" "](v),v}B[" "]=function(){};var R=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function I(v,j,$){for(const W in v)j.call($,v[W],W,v)}function A(v,j){for(const $ in v)j.call(void 0,v[$],$,v)}function E(v){const j={};for(const $ in v)j[$]=v[$];return j}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,j){let $,W;for(let ye=1;ye<arguments.length;ye++){W=arguments[ye];for($ in W)v[$]=W[$];for(let Te=0;Te<O.length;Te++)$=O[Te],Object.prototype.hasOwnProperty.call(W,$)&&(v[$]=W[$])}}function P(v){var j=1;v=v.split(":");const $=[];for(;0<j&&v.length;)$.push(v.shift()),j--;return v.length&&$.push(v.join(":")),$}function V(v){c.setTimeout(()=>{throw v},0)}function z(){var v=pe;let j=null;return v.g&&(j=v.g,v.g=v.g.next,v.g||(v.h=null),j.next=null),j}class Q{constructor(){this.h=this.g=null}add(j,$){const W=ee.get();W.set(j,$),this.h?this.h.next=W:this.g=W,this.h=W}}var ee=new k(()=>new K,v=>v.reset());class K{constructor(){this.next=this.g=this.h=null}set(j,$){this.h=j,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,pe=new Q,ae=()=>{const v=c.Promise.resolve(void 0);Z=()=>{v.then(X)}};var X=()=>{for(var v;v=z();){try{v.h.call(v.g)}catch($){V($)}var j=ee;j.j(v),100>j.h&&(j.h++,v.next=j.g,j.g=v)}Y=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(v,j){this.type=v,this.g=this.target=j,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,j=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const $=()=>{};c.addEventListener("test",$,j),c.removeEventListener("test",$,j)}catch{}return v})();function oe(v,j){if(le.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var $=this.type=v.type,W=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=j,j=v.relatedTarget){if(R){e:{try{B(j.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(j=null)}}else $=="mouseover"?j=v.fromElement:$=="mouseout"&&(j=v.toElement);this.relatedTarget=j,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Oe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&oe.aa.h.call(this)}}T(oe,le);var Oe={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),at=0;function Ae(v,j,$,W,ye){this.listener=v,this.proxy=null,this.src=j,this.type=$,this.capture=!!W,this.ha=ye,this.key=++at,this.da=this.fa=!1}function $e(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function de(v){this.src=v,this.g={},this.h=0}de.prototype.add=function(v,j,$,W,ye){var Te=v.toString();v=this.g[Te],v||(v=this.g[Te]=[],this.h++);var Qe=Ye(v,j,W,ye);return-1<Qe?(j=v[Qe],$||(j.fa=!1)):(j=new Ae(j,this.src,Te,!!W,ye),j.fa=$,v.push(j)),j};function ge(v,j){var $=j.type;if($ in v.g){var W=v.g[$],ye=Array.prototype.indexOf.call(W,j,void 0),Te;(Te=0<=ye)&&Array.prototype.splice.call(W,ye,1),Te&&($e(j),v.g[$].length==0&&(delete v.g[$],v.h--))}}function Ye(v,j,$,W){for(var ye=0;ye<v.length;++ye){var Te=v[ye];if(!Te.da&&Te.listener==j&&Te.capture==!!$&&Te.ha==W)return ye}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),it={};function ut(v,j,$,W,ye){if(Array.isArray(j)){for(var Te=0;Te<j.length;Te++)ut(v,j[Te],$,W,ye);return null}return $=Vt($),v&&v[Me]?v.K(j,$,f(W)?!!W.capture:!1,ye):er(v,j,$,!1,W,ye)}function er(v,j,$,W,ye,Te){if(!j)throw Error("Invalid event type");var Qe=f(ye)?!!ye.capture:!!ye,xr=Ze(v);if(xr||(v[Ke]=xr=new de(v)),$=xr.add(j,$,W,Qe,Te),$.proxy)return $;if(W=Ie(),$.proxy=W,W.src=v,W.listener=$,v.addEventListener)Ee||(ye=Qe),ye===void 0&&(ye=!1),v.addEventListener(j.toString(),W,ye);else if(v.attachEvent)v.attachEvent(rt(j.toString()),W);else if(v.addListener&&v.removeListener)v.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return $}function Ie(){function v($){return j.call(v.src,v.listener,$)}const j=bt;return v}function se(v,j,$,W,ye){if(Array.isArray(j))for(var Te=0;Te<j.length;Te++)se(v,j[Te],$,W,ye);else W=f(W)?!!W.capture:!!W,$=Vt($),v&&v[Me]?(v=v.i,j=String(j).toString(),j in v.g&&(Te=v.g[j],$=Ye(Te,$,W,ye),-1<$&&($e(Te[$]),Array.prototype.splice.call(Te,$,1),Te.length==0&&(delete v.g[j],v.h--)))):v&&(v=Ze(v))&&(j=v.g[j.toString()],v=-1,j&&(v=Ye(j,$,W,ye)),($=-1<v?j[v]:null)&&Ve($))}function Ve(v){if(typeof v!="number"&&v&&!v.da){var j=v.src;if(j&&j[Me])ge(j.i,v);else{var $=v.type,W=v.proxy;j.removeEventListener?j.removeEventListener($,W,v.capture):j.detachEvent?j.detachEvent(rt($),W):j.addListener&&j.removeListener&&j.removeListener(W),($=Ze(j))?(ge($,v),$.h==0&&($.src=null,j[Ke]=null)):$e(v)}}}function rt(v){return v in it?it[v]:it[v]="on"+v}function bt(v,j){if(v.da)v=!0;else{j=new oe(j,this);var $=v.listener,W=v.ha||v.src;v.fa&&Ve(v),v=$.call(W,j)}return v}function Ze(v){return v=v[Ke],v instanceof de?v:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(v){return typeof v=="function"?v:(v[Tt]||(v[Tt]=function(j){return v.handleEvent(j)}),v[Tt])}function Bt(){J.call(this),this.i=new de(this),this.M=this,this.F=null}T(Bt,J),Bt.prototype[Me]=!0,Bt.prototype.removeEventListener=function(v,j,$,W){se(this,v,j,$,W)};function At(v,j){var $,W=v.F;if(W)for($=[];W;W=W.F)$.push(W);if(v=v.M,W=j.type||j,typeof j=="string")j=new le(j,v);else if(j instanceof le)j.target=j.target||v;else{var ye=j;j=new le(W,v),U(j,ye)}if(ye=!0,$)for(var Te=$.length-1;0<=Te;Te--){var Qe=j.g=$[Te];ye=nr(Qe,W,!0,j)&&ye}if(Qe=j.g=v,ye=nr(Qe,W,!0,j)&&ye,ye=nr(Qe,W,!1,j)&&ye,$)for(Te=0;Te<$.length;Te++)Qe=j.g=$[Te],ye=nr(Qe,W,!1,j)&&ye}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var v=this.i,j;for(j in v.g){for(var $=v.g[j],W=0;W<$.length;W++)$e($[W]);delete v.g[j],v.h--}}this.F=null},Bt.prototype.K=function(v,j,$,W){return this.i.add(String(v),j,!1,$,W)},Bt.prototype.L=function(v,j,$,W){return this.i.add(String(v),j,!0,$,W)};function nr(v,j,$,W){if(j=v.i.g[String(j)],!j)return!0;j=j.concat();for(var ye=!0,Te=0;Te<j.length;++Te){var Qe=j[Te];if(Qe&&!Qe.da&&Qe.capture==$){var xr=Qe.listener,Un=Qe.ha||Qe.src;Qe.fa&&ge(v.i,Qe),ye=xr.call(Un,W)!==!1&&ye}}return ye&&!W.defaultPrevented}function an(v,j,$){if(typeof v=="function")$&&(v=y(v,$));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:c.setTimeout(v,j||0)}function qr(v){v.g=an(()=>{v.g=null,v.i&&(v.i=!1,qr(v))},v.l);const j=v.h;v.h=null,v.m.apply(null,j)}class Yn extends J{constructor(j,$){super(),this.m=j,this.l=$,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(v){J.call(this),this.h=v,this.g={}}T(dn,J);var pi=[];function Br(v){I(v.g,function(j,$){this.g.hasOwnProperty($)&&Ve(j)},v),v.g={}}dn.prototype.N=function(){dn.aa.N.call(this),Br(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hn=c.JSON.stringify,lr=c.JSON.parse,Ci=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Qa(){}Qa.prototype.h=null;function Ts(v){return v.h||(v.h=v.i())}function As(){}var Ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){le.call(this,"d")}T(gr,le);function Bn(){le.call(this,"c")}T(Bn,le);var tr={},gi=null;function Xs(){return gi=gi||new Bt}tr.La="serverreachability";function Es(v){le.call(this,tr.La,v)}T(Es,le);function Ii(v){const j=Xs();At(j,new Es(j))}tr.STAT_EVENT="statevent";function sa(v,j){le.call(this,tr.STAT_EVENT,v),this.stat=j}T(sa,le);function fn(v){const j=Xs();At(j,new sa(j,v))}tr.Ma="timingevent";function Qs(v,j){le.call(this,tr.Ma,v),this.size=j}T(Qs,le);function Ri(v,j){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},j)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function Ys(v,j,$,W,ye,Te){v.info(function(){if(v.g)if(Te)for(var Qe="",xr=Te.split("&"),Un=0;Un<xr.length;Un++){var Ht=xr[Un].split("=");if(1<Ht.length){var oi=Ht[0];Ht=Ht[1];var li=oi.split("_");Qe=2<=li.length&&li[1]=="type"?Qe+(oi+"="+Ht+"&"):Qe+(oi+"=redacted&")}}else Qe=null;else Qe=Te;return"XMLHTTP REQ ("+W+") [attempt "+ye+"]: "+j+`
`+$+`
`+Qe})}function kn(v,j,$,W,ye,Te,Qe){v.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ye+"]: "+j+`
`+$+`
`+Te+" "+Qe})}function yi(v,j,$,W){v.info(function(){return"XMLHTTP TEXT ("+j+"): "+Mi(v,$)+(W?" "+W:"")})}function Zs(v,j){v.info(function(){return"TIMEOUT: "+j})}Hi.prototype.info=function(){};function Mi(v,j){if(!v.g)return j;if(!j)return null;try{var $=JSON.parse(j);if($){for(v=0;v<$.length;v++)if(Array.isArray($[v])){var W=$[v];if(!(2>W.length)){var ye=W[1];if(Array.isArray(ye)&&!(1>ye.length)){var Te=ye[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(var Qe=1;Qe<ye.length;Qe++)ye[Qe]=""}}}}return hn($)}catch{return j}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mn;function oa(){}T(oa,Qa),oa.prototype.g=function(){return new XMLHttpRequest},oa.prototype.i=function(){return{}},mn=new oa;function Pi(v,j,$,W){this.j=v,this.i=j,this.l=$,this.R=W||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Js}function Js(){this.i=null,this.g="",this.h=!1}var Ns={},la={};function lt(v,j,$){v.L=1,v.v=pu(Xr(j)),v.m=$,v.P=!0,ce(v,null)}function ce(v,j){v.F=Date.now(),jt(v),v.A=Xr(v.v);var $=v.A,W=v.R;Array.isArray(W)||(W=[String(W)]),Mo($.i,"t",W),v.C=0,$=v.j.J,v.h=new Js,v.g=a1(v.j,$?j:null,!v.m),0<v.O&&(v.M=new Yn(y(v.Y,v,v.g),v.O)),j=v.U,$=v.g,W=v.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(pi[0]=ye.toString()),ye=pi);for(var Te=0;Te<ye.length;Te++){var Qe=ut($,ye[Te],W||j.handleEvent,!1,j.h||j);if(!Qe)break;j.g[Qe.key]=Qe}j=v.H?E(v.H):{},v.m?(v.u||(v.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,j)):(v.u="GET",v.g.ea(v.A,v.u,null,j)),Ii(),Ys(v.i,v.u,v.A,v.l,v.R,v.m)}Pi.prototype.ca=function(v){v=v.target;const j=this.M;j&&Gi(v)==3?j.j():this.Y(v)},Pi.prototype.Y=function(v){try{if(v==this.g)e:{const li=Gi(this.g);var j=this.g.Ba();const Yl=this.g.Z();if(!(3>li)&&(li!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||li!=4||j==7||(j==8||0>=Yl?Ii(3):Ii(2)),Gr(this);var $=this.g.Z();this.X=$;t:if(Le(this)){var W=vu(this.g);v="";var ye=W.length,Te=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Tr(this);var Qe="";break t}this.h.i=new c.TextDecoder}for(j=0;j<ye;j++)this.h.h=!0,v+=this.h.i.decode(W[j],{stream:!(Te&&j==ye-1)});W.length=0,this.h.g+=v,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=$==200,kn(this.i,this.u,this.A,this.l,this.R,li,$),this.o){if(this.T&&!this.K){t:{if(this.g){var xr,Un=this.g;if((xr=Un.g?Un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(xr)){var Ht=xr;break t}}Ht=null}if($=Ht)yi(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sr(this,$);else{this.o=!1,this.s=3,fn(12),Kr(this),Tr(this);break e}}if(this.P){$=!0;let ua;for(;!this.J&&this.C<Qe.length;)if(ua=Xe(this,Qe),ua==la){li==4&&(this.s=4,fn(14),$=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(ua==Ns){this.s=4,fn(15),yi(this.i,this.l,Qe,"[Invalid Chunk]"),$=!1;break}else yi(this.i,this.l,ua,null),sr(this,ua);if(Le(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),li!=4||Qe.length!=0||this.h.h||(this.s=1,fn(16),$=!1),this.o=this.o&&$,!$)yi(this.i,this.l,Qe,"[Invalid Chunked Response]"),Kr(this),Tr(this);else if(0<Qe.length&&!this.W){this.W=!0;var oi=this.j;oi.g==this&&oi.ba&&!oi.M&&(oi.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),xf(oi),oi.M=!0,fn(11))}}else yi(this.i,this.l,Qe,null),sr(this,Qe);li==4&&Kr(this),this.o&&!this.J&&(li==4?r1(this.j,this):(this.o=!1,jt(this)))}else Qg(this.g),$==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Kr(this),Tr(this)}}}catch{}finally{}};function Le(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Xe(v,j){var $=v.C,W=j.indexOf(`
`,$);return W==-1?la:($=Number(j.substring($,W)),isNaN($)?Ns:(W+=1,W+$>j.length?la:(j=j.slice(W,W+$),v.C=W+$,j)))}Pi.prototype.cancel=function(){this.J=!0,Kr(this)};function jt(v){v.S=Date.now()+v.I,qt(v,v.I)}function qt(v,j){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Ri(y(v.ba,v),j)}function Gr(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Pi.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Zs(this.i,this.A),this.L!=2&&(Ii(),fn(17)),Kr(this),this.s=2,Tr(this)):qt(this,this.S-v)};function Tr(v){v.j.G==0||v.J||r1(v.j,v)}function Kr(v){Gr(v);var j=v.M;j&&typeof j.ma=="function"&&j.ma(),v.M=null,Br(v.U),v.g&&(j=v.g,v.g=null,j.abort(),j.ma())}function sr(v,j){try{var $=v.j;if($.G!=0&&($.g==v||Pt($.h,v))){if(!v.K&&Pt($.h,v)&&$.G==3){try{var W=$.Da.g.parse(j)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ye=W;if(ye[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<v.F)Xl($),Wl($);else break e;bf($),fn(18)}}else $.za=ye[1],0<$.za-$.T&&37500>ye[2]&&$.F&&$.v==0&&!$.C&&($.C=Ri(y($.Za,$),6e3));if(1>=mt($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else Do($,11)}else if((v.K||$.g==v)&&Xl($),!M(j))for(ye=$.Da.g.parse(j),j=0;j<ye.length;j++){let Ht=ye[j];if($.T=Ht[0],Ht=Ht[1],$.G==2)if(Ht[0]=="c"){$.K=Ht[1],$.ia=Ht[2];const oi=Ht[3];oi!=null&&($.la=oi,$.j.info("VER="+$.la));const li=Ht[4];li!=null&&($.Aa=li,$.j.info("SVER="+$.Aa));const Yl=Ht[5];Yl!=null&&typeof Yl=="number"&&0<Yl&&(W=1.5*Yl,$.L=W,$.j.info("backChannelRequestTimeoutMs_="+W)),W=$;const ua=v.g;if(ua){const wu=ua.g?ua.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wu){var Te=W.h;Te.g||wu.indexOf("spdy")==-1&&wu.indexOf("quic")==-1&&wu.indexOf("h2")==-1||(Te.j=Te.l,Te.g=new Set,Te.h&&(kr(Te,Te.h),Te.h=null))}if(W.D){const Lo=ua.g?ua.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(W.ya=Lo,cr(W.I,W.D,Lo))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-v.F,$.j.info("Handshake RTT: "+$.R+"ms")),W=$;var Qe=v;if(W.qa=i1(W,W.J?W.ia:null,W.W),Qe.K){br(W.h,Qe);var xr=Qe,Un=W.L;Un&&(xr.I=Un),xr.B&&(Gr(xr),jt(xr)),W.g=Qe}else e1(W);0<$.i.length&&Y0($)}else Ht[0]!="stop"&&Ht[0]!="close"||Do($,7);else $.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Do($,7):yf($):Ht[0]!="noop"&&$.l&&$.l.ta(Ht),$.v=0)}}Ii(4)}catch{}}var fe=class{constructor(v,j){this.g=v,this.map=j}};function Ce(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function He(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function mt(v){return v.h?1:v.g?v.g.size:0}function Pt(v,j){return v.h?v.h==j:v.g?v.g.has(j):!1}function kr(v,j){v.g?v.g.add(j):v.h=j}function br(v,j){v.h&&v.h==j?v.h=null:v.g&&v.g.has(j)&&v.g.delete(j)}Ce.prototype.cancel=function(){if(this.i=Wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wr(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let j=v.i;for(const $ of v.g.values())j=j.concat($.D);return j}return S(v.i)}function eo(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var j=[],$=v.length,W=0;W<$;W++)j.push(v[W]);return j}j=[],$=0;for(W in v)j[$++]=v[W];return j}function Ro(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var j=[];v=v.length;for(var $=0;$<v;$++)j.push($);return j}j=[],$=0;for(const W in v)j[$++]=W;return j}}}function $l(v,j){if(v.forEach&&typeof v.forEach=="function")v.forEach(j,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,j,void 0);else for(var $=Ro(v),W=eo(v),ye=W.length,Te=0;Te<ye;Te++)j.call(void 0,W[Te],$&&$[Te],v)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vl(v,j){if(v){v=v.split("&");for(var $=0;$<v.length;$++){var W=v[$].indexOf("="),ye=null;if(0<=W){var Te=v[$].substring(0,W);ye=v[$].substring(W+1)}else Te=v[$];j(Te,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Kt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Kt){this.h=v.h,ks(this,v.j),this.o=v.o,this.g=v.g,mu(this,v.s),this.l=v.l;var j=v.i,$=new to;$.i=j.i,j.g&&($.g=new Map(j.g),$.h=j.h),G0(this,$),this.m=v.m}else v&&(j=String(v).match(fu))?(this.h=!1,ks(this,j[1]||"",!0),this.o=Fl(j[2]||""),this.g=Fl(j[3]||"",!0),mu(this,j[4]),this.l=Fl(j[5]||"",!0),G0(this,j[6]||"",!0),this.m=Fl(j[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Kt.prototype.toString=function(){var v=[],j=this.j;j&&v.push(Ya(j,ff,!0),":");var $=this.g;return($||j=="file")&&(v.push("//"),(j=this.o)&&v.push(Ya(j,ff,!0),"@"),v.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&v.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&v.push("/"),v.push(Ya($,$.charAt(0)=="/"?mf:Gg,!0))),($=this.i.toString())&&v.push("?",$),($=this.m)&&v.push("#",Ya($,I2)),v.join("")};function Xr(v){return new Kt(v)}function ks(v,j,$){v.j=$?Fl(j,!0):j,v.j&&(v.j=v.j.replace(/:$/,""))}function mu(v,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);v.s=j}else v.s=null}function G0(v,j,$){j instanceof to?(v.i=j,Kg(v.i,v.h)):($||(j=Ya(j,C2)),v.i=new to(j,v.h))}function cr(v,j,$){v.i.set(j,$)}function pu(v){return cr(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Fl(v,j){return v?j?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ya(v,j,$){return typeof v=="string"?(v=encodeURI(v).replace(j,j2),$&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function j2(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var ff=/[#\/\?@]/g,Gg=/[#\?:]/g,mf=/[#\?]/g,C2=/[#\?@]/g,I2=/#/g;function to(v,j){this.h=this.g=null,this.i=v||null,this.j=!!j}function si(v){v.g||(v.g=new Map,v.h=0,v.i&&Vl(v.i,function(j,$){v.add(decodeURIComponent(j.replace(/\+/g," ")),$)}))}t=to.prototype,t.add=function(v,j){si(this),this.i=null,v=Na(this,v);var $=this.g.get(v);return $||this.g.set(v,$=[]),$.push(j),this.h+=1,this};function K0(v,j){si(v),j=Na(v,j),v.g.has(j)&&(v.i=null,v.h-=v.g.get(j).length,v.g.delete(j))}function W0(v,j){return si(v),j=Na(v,j),v.g.has(j)}t.forEach=function(v,j){si(this),this.g.forEach(function($,W){$.forEach(function(ye){v.call(j,ye,W,this)},this)},this)},t.na=function(){si(this);const v=Array.from(this.g.values()),j=Array.from(this.g.keys()),$=[];for(let W=0;W<j.length;W++){const ye=v[W];for(let Te=0;Te<ye.length;Te++)$.push(j[W])}return $},t.V=function(v){si(this);let j=[];if(typeof v=="string")W0(this,v)&&(j=j.concat(this.g.get(Na(this,v))));else{v=Array.from(this.g.values());for(let $=0;$<v.length;$++)j=j.concat(v[$])}return j},t.set=function(v,j){return si(this),this.i=null,v=Na(this,v),W0(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[j]),this.h+=1,this},t.get=function(v,j){return v?(v=this.V(v),0<v.length?String(v[0]):j):j};function Mo(v,j,$){K0(v,j),0<$.length&&(v.i=null,v.g.set(Na(v,j),S($)),v.h+=$.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],j=Array.from(this.g.keys());for(var $=0;$<j.length;$++){var W=j[$];const Te=encodeURIComponent(String(W)),Qe=this.V(W);for(W=0;W<Qe.length;W++){var ye=Te;Qe[W]!==""&&(ye+="="+encodeURIComponent(String(Qe[W]))),v.push(ye)}}return this.i=v.join("&")};function Na(v,j){return j=String(j),v.j&&(j=j.toLowerCase()),j}function Kg(v,j){j&&!v.j&&(si(v),v.i=null,v.g.forEach(function($,W){var ye=W.toLowerCase();W!=ye&&(K0(this,W),Mo(this,ye,$))},v)),v.j=j}function pf(v,j){const $=new Hi;if(c.Image){const W=new Image;W.onload=b(ca,$,"TestLoadImage: loaded",!0,j,W),W.onerror=b(ca,$,"TestLoadImage: error",!1,j,W),W.onabort=b(ca,$,"TestLoadImage: abort",!1,j,W),W.ontimeout=b(ca,$,"TestLoadImage: timeout",!1,j,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=v}else j(!1)}function Wg(v,j){const $=new Hi,W=new AbortController,ye=setTimeout(()=>{W.abort(),ca($,"TestPingServer: timeout",!1,j)},1e4);fetch(v,{signal:W.signal}).then(Te=>{clearTimeout(ye),Te.ok?ca($,"TestPingServer: ok",!0,j):ca($,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ye),ca($,"TestPingServer: error",!1,j)})}function ca(v,j,$,W,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),W($)}catch{}}function Os(){this.g=new Ci}function gf(v,j,$){const W=$||"";try{$l(v,function(ye,Te){let Qe=ye;f(ye)&&(Qe=hn(ye)),j.push(W+Te+"="+encodeURIComponent(Qe))})}catch(ye){throw j.push(W+"type="+encodeURIComponent("_badmap")),ye}}function ro(v){this.l=v.Ub||null,this.j=v.eb||!1}T(ro,Qa),ro.prototype.g=function(){return new ka(this.l,this.j)},ro.prototype.i=(function(v){return function(){return v}})({});function ka(v,j){Bt.call(this),this.D=v,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ka,Bt),t=ka.prototype,t.open=function(v,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=j,this.readyState=1,ql(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(j.body=v),(this.D||c).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ql(this)),this.g&&(this.readyState=3,ql(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function X0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var j=v.value?v.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!v.done}))&&(this.response=this.responseText+=j)}v.done?no(this):ql(this),this.readyState==3&&X0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,no(this))},t.Qa=function(v){this.g&&(this.response=v,no(this))},t.ga=function(){this.g&&no(this)};function no(v){v.readyState=4,v.l=null,v.j=null,v.v=null,ql(v)}t.setRequestHeader=function(v,j){this.u.append(v,j)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],j=this.h.entries();for(var $=j.next();!$.done;)$=$.value,v.push($[0]+": "+$[1]),$=j.next();return v.join(`\r
`)};function ql(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function gu(v){let j="";return I(v,function($,W){j+=W,j+=":",j+=$,j+=`\r
`}),j}function Hl(v,j,$){e:{for(W in $){var W=!1;break e}W=!0}W||($=gu($),typeof v=="string"?$!=null&&encodeURIComponent(String($)):cr(v,j,$))}function en(v){Bt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(en,Bt);var Di=/^https?$/i,Po=["POST","PUT"];t=en.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,j,$,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);j=j?j.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mn.g(),this.v=this.o?Ts(this.o):Ts(mn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(j,String(v),!0),this.B=!1}catch(Te){yu(this,Te);return}if(v=$||"",$=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ye in W)$.set(ye,W[ye]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Te of W.keys())$.set(Te,W.get(Te));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from($.keys()).find(Te=>Te.toLowerCase()=="content-type"),ye=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Po,j,void 0))||W||ye||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Te,Qe]of $)this.g.setRequestHeader(Te,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Q0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Te){yu(this,Te)}};function yu(v,j){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=j,v.m=5,Gl(v),Kl(v)}function Gl(v){v.A||(v.A=!0,At(v,"complete"),At(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,At(this,"complete"),At(this,"abort"),Kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xg(this):this.bb())},t.bb=function(){Xg(this)};function Xg(v){if(v.h&&typeof s<"u"&&(!v.v[1]||Gi(v)!=4||v.Z()!=2)){if(v.u&&Gi(v)==4)an(v.Ea,0,v);else if(At(v,"readystatechange"),Gi(v)==4){v.h=!1;try{const Qe=v.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var $;if(!($=j)){var W;if(W=Qe===0){var ye=String(v.D).match(fu)[1]||null;!ye&&c.self&&c.self.location&&(ye=c.self.location.protocol.slice(0,-1)),W=!Di.test(ye?ye.toLowerCase():"")}$=W}if($)At(v,"complete"),At(v,"success");else{v.m=6;try{var Te=2<Gi(v)?v.g.statusText:""}catch{Te=""}v.l=Te+" ["+v.Z()+"]",Gl(v)}}finally{Kl(v)}}}}function Kl(v,j){if(v.g){Q0(v);const $=v.g,W=v.v[0]?()=>{}:null;v.g=null,v.v=null,j||At(v,"ready");try{$.onreadystatechange=W}catch{}}}function Q0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Gi(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var j=this.g.responseText;return v&&j.indexOf(v)==0&&(j=j.substring(v.length)),lr(j)}};function vu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Qg(v){const j={};v=(v.g&&2<=Gi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<v.length;W++){if(M(v[W]))continue;var $=P(v[W]);const ye=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Te=j[ye]||[];j[ye]=Te,Te.push($)}A(j,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bu(v,j,$){return $&&$.internalChannelParams&&$.internalChannelParams[v]||j}function Yg(v){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bu("baseRetryDelayMs",5e3,v),this.cb=bu("retryDelaySeedMs",1e4,v),this.Wa=bu("forwardChannelMaxRetries",2,v),this.wa=bu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new Ce(v&&v.concurrentRequestLimit),this.Da=new Os,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yg.prototype,t.la=8,t.G=1,t.connect=function(v,j,$,W){fn(0),this.W=v,this.H=j||{},$&&W!==void 0&&(this.H.OSID=$,this.H.OAID=W),this.F=this.X,this.I=i1(this,null,this.W),Y0(this)};function yf(v){if(Zg(v),v.G==3){var j=v.U++,$=Xr(v.I);if(cr($,"SID",v.K),cr($,"RID",j),cr($,"TYPE","terminate"),xu(v,$),j=new Pi(v,v.j,j),j.L=2,j.v=pu(Xr($)),$=!1,c.navigator&&c.navigator.sendBeacon)try{$=c.navigator.sendBeacon(j.v.toString(),"")}catch{}!$&&c.Image&&(new Image().src=j.v,$=!0),$||(j.g=a1(j.j,null),j.g.ea(j.v)),j.F=Date.now(),jt(j)}wf(v)}function Wl(v){v.g&&(xf(v),v.g.cancel(),v.g=null)}function Zg(v){Wl(v),v.u&&(c.clearTimeout(v.u),v.u=null),Xl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function Y0(v){if(!He(v.h)&&!v.s){v.s=!0;var j=v.Ga;Z||ae(),Y||(Z(),Y=!0),pe.add(j,v),v.B=0}}function R2(v,j){return mt(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=j.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Ri(y(v.Ga,v,j),n1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ye=new Pi(this,this.j,v);let Te=this.o;if(this.S&&(Te?(Te=E(Te),U(Te,this.S)):Te=this.S),this.m!==null||this.O||(ye.H=Te,Te=null),this.P)e:{for(var j=0,$=0;$<this.i.length;$++){t:{var W=this.i[$];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(j+=W,4096<j){j=$;break e}if(j===4096||$===this.i.length-1){j=$+1;break e}}j=1e3}else j=1e3;j=vf(this,ye,j),$=Xr(this.I),cr($,"RID",v),cr($,"CVER",22),this.D&&cr($,"X-HTTP-Session-Id",this.D),xu(this,$),Te&&(this.O?j="headers="+encodeURIComponent(String(gu(Te)))+"&"+j:this.m&&Hl($,this.m,Te)),kr(this.h,ye),this.Ua&&cr($,"TYPE","init"),this.P?(cr($,"$req",j),cr($,"SID","null"),ye.T=!0,lt(ye,$,null)):lt(ye,$,j),this.G=2}}else this.G==3&&(v?Jg(this,v):this.i.length==0||He(this.h)||Jg(this))};function Jg(v,j){var $;j?$=j.l:$=v.U++;const W=Xr(v.I);cr(W,"SID",v.K),cr(W,"RID",$),cr(W,"AID",v.T),xu(v,W),v.m&&v.o&&Hl(W,v.m,v.o),$=new Pi(v,v.j,$,v.B+1),v.m===null&&($.H=v.o),j&&(v.i=j.D.concat(v.i)),j=vf(v,$,1e3),$.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),kr(v.h,$),lt($,W,j)}function xu(v,j){v.H&&I(v.H,function($,W){cr(j,W,$)}),v.l&&$l({},function($,W){cr(j,W,$)})}function vf(v,j,$){$=Math.min(v.i.length,$);var W=v.l?y(v.l.Na,v.l,v):null;e:{var ye=v.i;let Te=-1;for(;;){const Qe=["count="+$];Te==-1?0<$?(Te=ye[0].g,Qe.push("ofs="+Te)):Te=0:Qe.push("ofs="+Te);let xr=!0;for(let Un=0;Un<$;Un++){let Ht=ye[Un].g;const oi=ye[Un].map;if(Ht-=Te,0>Ht)Te=Math.max(0,ye[Un].g-100),xr=!1;else try{gf(oi,Qe,"req"+Ht+"_")}catch{W&&W(oi)}}if(xr){W=Qe.join("&");break e}}}return v=v.i.splice(0,$),j.D=v,W}function e1(v){if(!v.g&&!v.u){v.Y=1;var j=v.Fa;Z||ae(),Y||(Z(),Y=!0),pe.add(j,v),v.v=0}}function bf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Ri(y(v.Fa,v),n1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,t1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Ri(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Wl(this),t1(this))};function xf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function t1(v){v.g=new Pi(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var j=Xr(v.qa);cr(j,"RID","rpc"),cr(j,"SID",v.K),cr(j,"AID",v.T),cr(j,"CI",v.F?"0":"1"),!v.F&&v.ja&&cr(j,"TO",v.ja),cr(j,"TYPE","xmlhttp"),xu(v,j),v.m&&v.o&&Hl(j,v.m,v.o),v.L&&(v.g.I=v.L);var $=v.g;v=v.ia,$.L=1,$.v=pu(Xr(j)),$.m=null,$.P=!0,ce($,v)}t.Za=function(){this.C!=null&&(this.C=null,Wl(this),bf(this),fn(19))};function Xl(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function r1(v,j){var $=null;if(v.g==j){Xl(v),xf(v),v.g=null;var W=2}else if(Pt(v.h,j))$=j.D,br(v.h,j),W=1;else return;if(v.G!=0){if(j.o)if(W==1){$=j.m?j.m.length:0,j=Date.now()-j.F;var ye=v.B;W=Xs(),At(W,new Qs(W,$)),Y0(v)}else e1(v);else if(ye=j.s,ye==3||ye==0&&0<j.X||!(W==1&&R2(v,j)||W==2&&bf(v)))switch($&&0<$.length&&(j=v.h,j.i=j.i.concat($)),ye){case 1:Do(v,5);break;case 4:Do(v,10);break;case 3:Do(v,6);break;default:Do(v,2)}}}function n1(v,j){let $=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||($*=2),$*j}function Do(v,j){if(v.j.info("Error code "+j),j==2){var $=y(v.fb,v),W=v.Xa;const ye=!W;W=new Kt(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ks(W,"https"),pu(W),ye?pf(W.toString(),$):Wg(W.toString(),$)}else fn(2);v.G=0,v.l&&v.l.sa(j),wf(v),Zg(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function wf(v){if(v.G=0,v.ka=[],v.l){const j=Wr(v.h);(j.length!=0||v.i.length!=0)&&(w(v.ka,j),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function i1(v,j,$){var W=$ instanceof Kt?Xr($):new Kt($);if(W.g!="")j&&(W.g=j+"."+W.g),mu(W,W.s);else{var ye=c.location;W=ye.protocol,j=j?j+"."+ye.hostname:ye.hostname,ye=+ye.port;var Te=new Kt(null);W&&ks(Te,W),j&&(Te.g=j),ye&&mu(Te,ye),$&&(Te.l=$),W=Te}return $=v.D,j=v.ya,$&&j&&cr(W,$,j),cr(W,"VER",v.la),xu(v,W),W}function a1(v,j,$){if(j&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=v.Ca&&!v.pa?new en(new ro({eb:$})):new en(v.pa),j.Ha(v.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function s1(){}t=s1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Z0(){}Z0.prototype.g=function(v,j){return new Ki(v,j)};function Ki(v,j){Bt.call(this),this.g=new Yg(j),this.l=v,this.h=j&&j.messageUrlParams||null,v=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(v?v["X-WebChannel-Content-Type"]=j.messageContentType:v={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(v?v["X-WebChannel-Client-Profile"]=j.va:v={"X-WebChannel-Client-Profile":j.va}),this.g.S=v,(v=j&&j.Sb)&&!M(v)&&(this.g.m=v),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!M(j)&&(this.g.D=j,v=this.h,v!==null&&j in v&&(v=this.h,j in v&&delete v[j])),this.j=new Ql(this)}T(Ki,Bt),Ki.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ki.prototype.close=function(){yf(this.g)},Ki.prototype.o=function(v){var j=this.g;if(typeof v=="string"){var $={};$.__data__=v,v=$}else this.u&&($={},$.__data__=hn(v),v=$);j.i.push(new fe(j.Ya++,v)),j.G==3&&Y0(j)},Ki.prototype.N=function(){this.g.l=null,delete this.j,yf(this.g),delete this.g,Ki.aa.N.call(this)};function o1(v){gr.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var j=v.__sm__;if(j){e:{for(const $ in j){v=$;break e}v=void 0}(this.i=v)&&(v=this.i,j=j!==null&&v in j?j[v]:void 0),this.data=j}else this.data=v}T(o1,gr);function l1(){Bn.call(this),this.status=1}T(l1,Bn);function Ql(v){this.g=v}T(Ql,s1),Ql.prototype.ua=function(){At(this.g,"a")},Ql.prototype.ta=function(v){At(this.g,new o1(v))},Ql.prototype.sa=function(v){At(this.g,new l1)},Ql.prototype.ra=function(){At(this.g,"b")},Z0.prototype.createWebChannel=Z0.prototype.g,Ki.prototype.send=Ki.prototype.o,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,Yz=function(){return new Z0},Qz=function(){return Xs()},Xz=tr,VS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,tv=Sr,Hr.COMPLETE="complete",Wz=Hr,As.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,km=As,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,Kz=en}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});const uj="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new a7("@firebase/firestore");function Ld(){return g0.logLevel}function ze(t,...e){if(g0.logLevel<=Zt.DEBUG){const r=e.map(b7);g0.debug(`Firestore (${Xh}): ${t}`,...r)}}function In(t,...e){if(g0.logLevel<=Zt.ERROR){const r=e.map(b7);g0.error(`Firestore (${Xh}): ${t}`,...r)}}function ip(t,...e){if(g0.logLevel<=Zt.WARN){const r=e.map(b7);g0.warn(`Firestore (${Xh}): ${t}`,...r)}}function b7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t="Unexpected state"){const e=`FIRESTORE (${Xh}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function pt(t,e){t||ct()}function ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Gs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r($i.UNAUTHENTICATED)))}shutdown(){}}class LJ{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pt(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let a=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fs,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},c=d=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pt(typeof n.accessToken=="string"),new PJ(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new $i(e)}}class BJ{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UJ{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new BJ(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r($i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $J{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){pt(this.o===void 0);const n=a=>{a.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(pt(typeof r.token=="string"),this.R=r.token,new zJ(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=VJ(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Mt(t,e){return t<e?-1:t>e?1:0}function oh(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function Jz(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new We(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new We(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new We(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new vn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,r,n){r===void 0?r=0:r>e.length&&ct(),n===void 0?n=e.length-r:n>e.length-r&&ct(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ap.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ap?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class hr extends ap{construct(e,r,n){return new hr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new We(Ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new hr(r)}static emptyPath(){return new hr([])}}const FJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ap{construct(e,r,n){return new yn(e,r,n)}static isValidIdentifier(e){return FJ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yn(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new We(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new We(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new We(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(n+=c,i++):(a(),i++)}if(a(),s)throw new We(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(r)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(hr.fromString(e))}static fromName(e){return new tt(hr.fromString(e).popFirst(5))}static empty(){return new tt(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return hr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new hr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function FS(t){return t.fields.find((e=>e.kind===2))}function Ku(t){return t.fields.filter((e=>e.kind!==2))}Sv.UNKNOWN_ID=-1;class rv{constructor(e,r){this.fieldPath=e,this.kind=r}}class sp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new sp(0,Wa.min())}}function e$(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(n===1e9?new vn(r+1,0):new vn(r,n));return new Wa(i,tt.empty(),e)}function t$(t){return new Wa(t.readTime,t.key,-1)}class Wa{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Wa(yt.min(),tt.empty(),-1)}static max(){return new Wa(yt.max(),tt.empty(),-1)}}function x7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=tt.comparator(t.documentKey,e.documentKey),r!==0?r:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){if(t.code!==Ne.FAILED_PRECONDITION||t.message!==r$)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new we(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof we?r:we.resolve(r)}catch(r){return we.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):we.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):we.reject(r)}static resolve(e){return new we(((r,n)=>{r(e)}))}static reject(e){return new we(((r,n)=>{n(e)}))}static waitFor(e){return new we(((r,n)=>{let i=0,a=0,s=!1;e.forEach((c=>{++i,c.next((()=>{++a,s&&a===i&&r()}),(d=>n(d)))})),s=!0,a===i&&r()}))}static or(e){let r=we.resolve(!1);for(const n of e)r=r.next((i=>i?we.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new we(((n,i)=>{const a=e.length,s=new Array(a);let c=0;for(let d=0;d<a;d++){const f=d;r(e[f]).next((m=>{s[f]=m,++c,c===a&&n(s)}),(m=>i(m)))}}))}static doWhile(e,r){return new we(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Fs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Lm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=w7(n.target.error);this.V.reject(new Lm(e,i))}}static open(e,r,n,i){try{return new sx(r,e.transaction(i,n))}catch(a){throw new Lm(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new HJ(r)}}class qc{constructor(e,r,n){this.name=e,this.version=r,this.p=n,qc.S(ri())===12.2&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lz())return!1;if(qc.v())return!0;const e=ri(),r=qc.S(e),n=0<r&&r<10,i=i$(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ze("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new Lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new We(Ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new We(Ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Lm(e,s))},i.onupgradeneeded=a=>{ze("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.O(s,i.transaction,a.oldVersion,this.version).next((()=>{ze("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=sx.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next((f=>(c.g(),f))).catch((f=>(c.abort(f),we.reject(f)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,f=d.name!=="FirebaseError"&&s<3;if(ze("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function i$(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class qJ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Qu(this.B.delete())}}class Lm extends We{constructor(e,r){super(Ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function nu(t){return t.name==="IndexedDbTransactionError"}class HJ{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ze("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Qu(n)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next((r=>(r===void 0&&(r=null),ze("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new we(((s,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{s(d.target.result)}}))}{const a=this.cursor(n),s=[];return this.W(a,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new we(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}j(e,r){ze("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((a,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new we(((n,i)=>{r.onerror=a=>{const s=w7(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new we(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void i();const d=new qJ(c),f=r(c.primaryKey,c.value,d);if(f instanceof we){const m=f.catch((p=>(d.done(),we.reject(p))));n.push(m)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}})).next((()=>we.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Qu(t){return new we(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=w7(n.target.error);r(i)}}))}let dj=!1;function w7(t){const e=qc.S(ri());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dj||(dj=!0,setTimeout((()=>{throw n}),0)),n}}return t}class GJ{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ze("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ze("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){nu(r)?ze("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ru(r)}await this.X(6e4)}))}}class KJ{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,a=!0;return we.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return ze("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next((c=>{i-=c,n.add(s)}));a=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(i,a))).next((c=>(ze("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,a)=>{const s=t$(a);x7(s,n)>0&&(n=s)})),new Wa(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wa.oe=-1;function gg(t){return t==null}function op(t){return t===0&&1/t==-1/0}function a$(t){return typeof t=="number"&&Number.isInteger(t)&&!op(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=hj(e)),e=WJ(t.get(r),e);return hj(e)}function WJ(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case"":r+="";break;default:r+=a}}return r}function hj(t){return t+""}function uo(t){const e=t.length;if(pt(e>=2),e===2)return pt(t.charAt(0)===""&&t.charAt(1)===""),hr.emptyPath();const r=e-2,n=[];let i="";for(let a=0;a<e;){const s=t.indexOf("",a);switch((s<0||s>r)&&ct(),t.charAt(s+1)){case"":const c=t.substring(a,s);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:ct()}a=s+2}return new hr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){return[t,na(e)]}function s$(t,e,r){return[t,na(e),r]}const XJ={},QJ=["prefixPath","collectionGroup","readTime","documentId"],YJ=["prefixPath","collectionGroup","documentId"],ZJ=["collectionGroup","readTime","prefixPath","documentId"],JJ=["canonicalId","targetId"],eee=["targetId","path"],tee=["path","targetId"],ree=["collectionId","parent"],nee=["indexId","uid"],iee=["uid","sequenceNumber"],aee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],see=["indexId","uid","orderedDocumentKey"],oee=["userId","collectionPath","documentId"],lee=["userId","collectionPath","largestBatchId"],cee=["userId","collectionGroup","largestBatchId"],o$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uee=[...o$,"documentOverlays"],l$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c$=l$,_7=[...c$,"indexConfiguration","indexState","indexEntries"],dee=_7,hee=[..._7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends n${constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ii(t,e){const r=ft(t);return qc.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function L0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function u$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,r){this.comparator=e,this.root=r||Ai.EMPTY}insert(e,r){return new Jr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(e){return new Jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new py(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new py(this.root,e,this.comparator,!1)}getReverseIterator(){return new py(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new py(this.root,e,this.comparator,!0)}}class py{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ai{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Ai.RED,this.left=i??Ai.EMPTY,this.right=a??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Ai(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Ai.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1;Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(e,r,n,i,a){return this}insert(e,r,n){return new Ai(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Jr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new pj(this.data.getIterator())}getIteratorFrom(e){return new pj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Dr(this.comparator);return r.data=e,r}}class pj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new _a([])}unionWith(e){let r=new Dr(yn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new _a(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return oh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new d$("Invalid base64 string: "+a):a}})(e);return new Dn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const fee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(t){if(pt(!!t),typeof t=="string"){let e=0;const r=fee.exec(t);if(pt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:on(t.seconds),nanos:on(t.nanos)}}function on(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xc(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function T7(t){const e=t.mapValue.fields.__previous_value__;return S7(e)?T7(e):e}function lp(t){const e=El(t.mapValue.fields.__local_write_time__.timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mee{constructor(e,r,n,i,a,s,c,d,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}}class y0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new y0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof y0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iv={nullValue:"NULL_VALUE"};function v0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S7(t)?4:h$(t)?9007199254740991:ox(t)?10:11:ct()}function wo(t,e){if(t===e)return!0;const r=v0(t);if(r!==v0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lp(t).isEqual(lp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=El(i.timestampValue),c=El(a.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Xc(i.bytesValue).isEqual(Xc(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return on(i.geoPointValue.latitude)===on(a.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return on(i.integerValue)===on(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=on(i.doubleValue),c=on(a.doubleValue);return s===c?op(s)===op(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return oh(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},c=a.mapValue.fields||{};if(mj(s)!==mj(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!wo(s[d],c[d])))return!1;return!0})(t,e);default:return ct()}}function cp(t,e){return(t.values||[]).find((r=>wo(r,e)))!==void 0}function Qc(t,e){if(t===e)return 0;const r=v0(t),n=v0(e);if(r!==n)return Mt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const c=on(a.integerValue||a.doubleValue),d=on(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return gj(t.timestampValue,e.timestampValue);case 4:return gj(lp(t),lp(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return(function(a,s){const c=Xc(a),d=Xc(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const c=a.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=Mt(c[f],d[f]);if(m!==0)return m}return Mt(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const c=Mt(on(a.latitude),on(s.latitude));return c!==0?c:Mt(on(a.longitude),on(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return yj(t.arrayValue,e.arrayValue);case 10:return(function(a,s){var c,d,f,m;const p=a.fields||{},y=s.fields||{},b=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=Mt(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:yj(b,T)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Mc.mapValue&&s===Mc.mapValue)return 0;if(a===Mc.mapValue)return 1;if(s===Mc.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const y=Mt(d[p],m[p]);if(y!==0)return y;const b=Qc(c[d[p]],f[m[p]]);if(b!==0)return b}return Mt(d.length,m.length)})(t.mapValue,e.mapValue);default:throw ct()}}function gj(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const r=El(t),n=El(e),i=Mt(r.seconds,n.seconds);return i!==0?i:Mt(r.nanos,n.nanos)}function yj(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Qc(r[i],n[i]);if(a)return a}return Mt(r.length,n.length)}function lh(t){return HS(t)}function HS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=El(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Xc(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return tt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=HS(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${HS(r.fields[s])}`;return i+"}"})(t.mapValue):ct()}function up(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function GS(t){return!!t&&"integerValue"in t}function dp(t){return!!t&&"arrayValue"in t}function vj(t){return!!t&&"nullValue"in t}function bj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function av(t){return!!t&&"mapValue"in t}function ox(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Bm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return L0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Bm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Bm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function h$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const f$={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function pee(t){return"nullValue"in t?iv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?up(y0.empty(),tt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ox(t)?f$:{mapValue:{}}:ct()}function gee(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?up(y0.empty(),tt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?f$:"mapValue"in t?ox(t)?{mapValue:{}}:Mc:ct()}function xj(t,e){const r=Qc(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function wj(t,e){const r=Qc(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!av(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bm(r)}setAll(e){let r=yn.emptyPath(),n={},i=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=c.popLast()}s?n[c.lastSegment()]=Bm(s):i.push(c.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());av(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];av(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){L0(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new ki(Bm(this.value))}}function m$(t){const e=[];return L0(t.fields,((r,n)=>{const i=new yn([r]);if(av(n)){const a=m$(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new _a(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,r,n,i,a,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=c}static newInvalidDocument(e){return new ln(e,0,yt.min(),yt.min(),yt.min(),ki.empty(),0)}static newFoundDocument(e,r,n,i){return new ln(e,1,r,yt.min(),n,i,0)}static newNoDocument(e,r){return new ln(e,2,r,yt.min(),yt.min(),ki.empty(),0)}static newUnknownDocument(e,r){return new ln(e,3,r,yt.min(),yt.min(),ki.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,r){this.position=e,this.inclusive=r}}function _j(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=tt.comparator(tt.fromName(s.referenceValue),r.key):n=Qc(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Sj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!wo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,r="asc"){this.field=e,this.dir=r}}function yee(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p$=class{};class Jt extends p${constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new vee(e,r,n):r==="array-contains"?new wee(e,n):r==="in"?new w$(e,n):r==="not-in"?new _ee(e,n):r==="array-contains-any"?new See(e,n):new Jt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new bee(e,n):new xee(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Qc(r,this.value)):r!==null&&v0(this.value)===v0(r)&&this.matchesComparison(Qc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nr extends p${constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Nr(e,r)}matches(e){return uh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uh(t){return t.op==="and"}function KS(t){return t.op==="or"}function A7(t){return g$(t)&&uh(t)}function g$(t){for(const e of t.filters)if(e instanceof Nr)return!1;return!0}function WS(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+lh(t.value);if(A7(t))return t.filters.map((e=>WS(e))).join(",");{const e=t.filters.map((r=>WS(r))).join(",");return`${t.op}(${e})`}}function y$(t,e){return t instanceof Jt?(function(n,i){return i instanceof Jt&&n.op===i.op&&n.field.isEqual(i.field)&&wo(n.value,i.value)})(t,e):t instanceof Nr?(function(n,i){return i instanceof Nr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,c)=>a&&y$(s,i.filters[c])),!0):!1})(t,e):void ct()}function v$(t,e){const r=t.filters.concat(e);return Nr.create(r,t.op)}function b$(t){return t instanceof Jt?(function(r){return`${r.field.canonicalString()} ${r.op} ${lh(r.value)}`})(t):t instanceof Nr?(function(r){return r.op.toString()+" {"+r.getFilters().map(b$).join(" ,")+"}"})(t):"Filter"}class vee extends Jt{constructor(e,r,n){super(e,r,n),this.key=tt.fromName(n.referenceValue)}matches(e){const r=tt.comparator(e.key,this.key);return this.matchesComparison(r)}}class bee extends Jt{constructor(e,r){super(e,"in",r),this.keys=x$("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class xee extends Jt{constructor(e,r){super(e,"not-in",r),this.keys=x$("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function x$(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>tt.fromName(n.referenceValue)))}class wee extends Jt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return dp(r)&&cp(r.arrayValue,this.value)}}class w$ extends Jt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&cp(this.value.arrayValue,r)}}class _ee extends Jt{constructor(e,r){super(e,"not-in",r)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!cp(this.value.arrayValue,r)}}class See extends Jt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!dp(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>cp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(e,r=null,n=[],i=[],a=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=c,this.ue=null}}function XS(t,e=null,r=[],n=[],i=null,a=null,s=null){return new Tee(t,e,r,n,i,a,s)}function b0(t){const e=ft(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>WS(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),gg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>lh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>lh(n))).join(",")),e.ue=r}return e.ue}function yg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!yee(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!y$(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sj(t.startAt,e.startAt)&&Sj(t.endAt,e.endAt)}function Tv(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Av(t,e){return t.filters.filter((r=>r instanceof Jt&&r.field.isEqual(e)))}function Tj(t,e,r){let n=iv,i=!0;for(const a of Av(t,e)){let s=iv,c=!0;switch(a.op){case"<":case"<=":s=pee(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,c=!1;break;case"!=":case"not-in":s=iv}xj({value:n,inclusive:i},{value:s,inclusive:c})<0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];xj({value:n,inclusive:i},{value:s,inclusive:r.inclusive})<0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}function Aj(t,e,r){let n=Mc,i=!0;for(const a of Av(t,e)){let s=Mc,c=!0;switch(a.op){case">=":case">":s=gee(a.value),c=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,c=!1;break;case"!=":case"not-in":s=Mc}wj({value:n,inclusive:i},{value:s,inclusive:c})>0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];wj({value:n,inclusive:i},{value:s,inclusive:r.inclusive})>0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,r=null,n=[],i=[],a=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _$(t,e,r,n,i,a,s,c){return new Qh(t,e,r,n,i,a,s,c)}function vg(t){return new Qh(t)}function Ej(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function S$(t){return t.collectionGroup!==null}function Um(t){const e=ft(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Dr(yn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new hp(a,n))})),r.has(yn.keyField().canonicalString())||e.ce.push(new hp(yn.keyField(),n))}return e.ce}function qa(t){const e=ft(t);return e.le||(e.le=Aee(e,Um(t))),e.le}function Aee(t,e){if(t.limitType==="F")return XS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new hp(i.field,a)}));const r=t.endAt?new ch(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ch(t.startAt.position,t.startAt.inclusive):null;return XS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function QS(t,e){const r=t.filters.concat([e]);return new Qh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Ev(t,e,r){return new Qh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function lx(t,e){return yg(qa(t),qa(e))&&t.limitType===e.limitType}function T$(t){return`${b0(qa(t))}|lt:${t.limitType}`}function Bd(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>b$(i))).join(", ")}]`),gg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>lh(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>lh(i))).join(",")),`Target(${n})`})(qa(t))}; limitType=${t.limitType})`}function bg(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):tt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of Um(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(s,c,d){const f=_j(s,c,d);return s.inclusive?f<=0:f<0})(n.startAt,Um(n),i)||n.endAt&&!(function(s,c,d){const f=_j(s,c,d);return s.inclusive?f>=0:f>0})(n.endAt,Um(n),i))})(t,e)}function A$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E$(t){return(e,r)=>{let n=!1;for(const i of Um(t)){const a=Eee(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Eee(t,e,r){const n=t.field.isKeyField()?tt.comparator(e.key,r.key):(function(a,s,c){const d=s.data.field(a),f=c.data.field(a);return d!==null&&f!==null?Qc(d,f):ct()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){L0(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return u$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee=new Jr(tt.comparator);function $a(){return Nee}const N$=new Jr(tt.comparator);function Om(...t){let e=N$;for(const r of t)e=e.insert(r.key,r);return e}function k$(t){let e=N$;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function ho(){return zm()}function O$(){return zm()}function zm(){return new iu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const kee=new Jr(tt.comparator),Oee=new Dr(tt.comparator);function Gt(...t){let e=Oee;for(const r of t)e=e.add(r);return e}const jee=new Dr(Mt);function E7(){return jee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:op(e)?"-0":e}}function j$(t){return{integerValue:""+t}}function Cee(t,e){return a$(e)?j$(e):N7(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this._=void 0}}function Iee(t,e,r){return t instanceof fp?(function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&S7(a)&&(a=T7(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}})(r,e):t instanceof x0?I$(t,e):t instanceof dh?R$(t,e):(function(i,a){const s=C$(i,a),c=Nj(s)+Nj(i.Pe);return GS(s)&&GS(i.Pe)?j$(c):N7(i.serializer,c)})(t,e)}function Ree(t,e,r){return t instanceof x0?I$(t,e):t instanceof dh?R$(t,e):r}function C$(t,e){return t instanceof mp?(function(n){return GS(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class fp extends cx{}class x0 extends cx{constructor(e){super(),this.elements=e}}function I$(t,e){const r=M$(e);for(const n of t.elements)r.some((i=>wo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class dh extends cx{constructor(e){super(),this.elements=e}}function R$(t,e){let r=M$(e);for(const n of t.elements)r=r.filter((i=>!wo(i,n)));return{arrayValue:{values:r}}}class mp extends cx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Nj(t){return on(t.integerValue||t.doubleValue)}function M$(t){return dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,r){this.field=e,this.transform=r}}function Mee(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof x0&&i instanceof x0||n instanceof dh&&i instanceof dh?oh(n.elements,i.elements,wo):n instanceof mp&&i instanceof mp?wo(n.Pe,i.Pe):n instanceof fp&&i instanceof fp})(t.transform,e.transform)}class Pee{constructor(e,r){this.version=e,this.transformResults=r}}class Rn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ux{}function D$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xg(t.key,Rn.none()):new Yh(t.key,t.data,Rn.none());{const r=t.data,n=ki.empty();let i=new Dr(yn.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Pl(t.key,n,new _a(i.toArray()),Rn.none())}}function Dee(t,e,r){t instanceof Yh?(function(i,a,s){const c=i.value.clone(),d=Oj(i.fieldTransforms,a,s.transformResults);c.setAll(d),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof Pl?(function(i,a,s){if(!sv(i.precondition,a))return void a.convertToUnknownDocument(s.version);const c=Oj(i.fieldTransforms,a,s.transformResults),d=a.data;d.setAll(L$(i)),d.setAll(c),a.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function $m(t,e,r,n){return t instanceof Yh?(function(a,s,c,d){if(!sv(a.precondition,s))return c;const f=a.value.clone(),m=jj(a.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,r,n):t instanceof Pl?(function(a,s,c,d){if(!sv(a.precondition,s))return c;const f=jj(a.fieldTransforms,d,s),m=s.data;return m.setAll(L$(a)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,s,c){return sv(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function Lee(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=C$(n.transform,i||null);a!=null&&(r===null&&(r=ki.empty()),r.set(n.field,a))}return r||null}function kj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&oh(n,i,((a,s)=>Mee(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yh extends ux{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pl extends ux{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function L$(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function Oj(t,e,r){const n=new Map;pt(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,c=e.data.field(a.field);n.set(a.field,Ree(s,c,r[i]))}return n}function jj(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,Iee(a,s,e))}return n}class xg extends ux{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k7 extends ux{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Dee(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=$m(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=$m(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=O$();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let c=this.applyToLocalView(s,a.mutatedFields);c=r.has(i.key)?null:c;const d=D$(s,c);d!==null&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(yt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,((r,n)=>kj(r,n)))&&oh(this.baseMutations,e.baseMutations,((r,n)=>kj(r,n)))}}class j7{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){pt(e.mutations.length===n.length);let i=(function(){return kee})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new j7(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bee{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,ir;function B$(t){switch(t){default:return ct();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0}}function U$(t){if(t===void 0)return In("GRPC error has no .code"),Ne.UNKNOWN;switch(t){case qn.OK:return Ne.OK;case qn.CANCELLED:return Ne.CANCELLED;case qn.UNKNOWN:return Ne.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Ne.INTERNAL;case qn.UNAVAILABLE:return Ne.UNAVAILABLE;case qn.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case qn.NOT_FOUND:return Ne.NOT_FOUND;case qn.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case qn.ABORTED:return Ne.ABORTED;case qn.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case qn.DATA_LOSS:return Ne.DATA_LOSS;default:return ct()}}(ir=qn||(qn={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uee(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee=new u0([4294967295,4294967295],0);function Cj(t){const e=Uee().encode(t),r=new Gz;return r.update(e),new Uint8Array(r.digest())}function Ij(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new u0([r,n],0),new u0([i,a],0)]}class I7{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new jm(`Invalid padding: ${r}`);if(n<0)throw new jm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new jm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new jm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=u0.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(u0.fromNumber(n)));return i.compare(zee)===1&&(i=new u0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Cj(e),[n,i]=Ij(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);if(!this.de(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new I7(a,i,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=Cj(e),[n,i]=Ij(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class jm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,_g.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new wg(yt.min(),i,new Jr(Mt),$a(),Gt())}}class _g{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new _g(n,r,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class z${constructor(e,r){this.targetId=e,this.me=r}}class $${constructor(e,r,n=Dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Rj{constructor(){this.fe=0,this.ge=Pj(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Gt(),r=Gt(),n=Gt();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:ct()}})),new _g(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Pj()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $ee{constructor(e){this.Le=e,this.Be=new Map,this.ke=$a(),this.qe=Mj(),this.Qe=new Jr(Mt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ct()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(Tv(a))if(n===0){const s=new tt(a.path);this.Ue(r,s,ln.newNoDocument(s,yt.min()))}else pt(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,f)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,c;try{s=Xc(n).toUint8Array()}catch(d){if(d instanceof d$)return ip("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new I7(s,i,a)}catch(d){return ip(d instanceof jm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,a,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((a,s)=>{const c=this.Je(s);if(c){if(a.current&&Tv(c.target)){const d=new tt(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,ln.newNoDocument(d,e))}a.be&&(r.set(s,a.ve()),a.Ce())}}));let n=Gt();this.qe.forEach(((a,s)=>{let c=!0;s.forEachWhile((d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(a))})),this.ke.forEach(((a,s)=>s.setReadTime(e)));const i=new wg(e,r,this.Qe,this.ke,n);return this.ke=$a(),this.qe=Mj(),this.Qe=new Jr(Mt),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Rj,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Dr(Mt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ze("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rj),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Mj(){return new Jr(tt.comparator)}function Pj(){return new Jr(tt.comparator)}const Vee={asc:"ASCENDING",desc:"DESCENDING"},Fee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qee={and:"AND",or:"OR"};class Hee{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function YS(t,e){return t.useProto3Json||gg(e)?e:{value:e}}function hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Gee(t,e){return hh(t,e.toTimestamp())}function hi(t){return pt(!!t),yt.fromTimestamp((function(r){const n=El(r);return new vn(n.seconds,n.nanos)})(t))}function R7(t,e){return ZS(t,e).canonicalString()}function ZS(t,e){const r=(function(i){return new hr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function F$(t){const e=hr.fromString(t);return pt(Z$(e)),e}function pp(t,e){return R7(t.databaseId,e.path)}function gl(t,e){const r=F$(e);if(r.get(1)!==t.databaseId.projectId)throw new We(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new We(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new tt(G$(r))}function q$(t,e){return R7(t.databaseId,e)}function H$(t){const e=F$(t);return e.length===4?hr.emptyPath():G$(e)}function JS(t){return new hr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G$(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Dj(t,e,r){return{name:pp(t,e),fields:r.value.mapValue.fields}}function Kee(t,e,r){const n=gl(t,e.name),i=hi(e.updateTime),a=e.createTime?hi(e.createTime):yt.min(),s=new ki({mapValue:{fields:e.fields}}),c=ln.newFoundDocument(n,i,a,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Wee(t,e){return"found"in e?(function(n,i){pt(!!i.found),i.found.name,i.found.updateTime;const a=gl(n,i.found.name),s=hi(i.found.updateTime),c=i.found.createTime?hi(i.found.createTime):yt.min(),d=new ki({mapValue:{fields:i.found.fields}});return ln.newFoundDocument(a,s,c,d)})(t,e):"missing"in e?(function(n,i){pt(!!i.missing),pt(!!i.readTime);const a=gl(n,i.missing),s=hi(i.readTime);return ln.newNoDocument(a,s)})(t,e):ct()}function Xee(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ct()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,m){return f.useProto3Json?(pt(m===void 0||typeof m=="string"),Dn.fromBase64String(m||"")):(pt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Dn.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(f){const m=f.code===void 0?Ne.UNKNOWN:U$(f.code);return new We(m,f.message||"")})(s);r=new $$(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=gl(t,n.document.name),a=hi(n.document.updateTime),s=n.document.createTime?hi(n.document.createTime):yt.min(),c=new ki({mapValue:{fields:n.document.fields}}),d=ln.newFoundDocument(i,a,s,c),f=n.targetIds||[],m=n.removedTargetIds||[];r=new ov(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=gl(t,n.document),a=n.readTime?hi(n.readTime):yt.min(),s=ln.newNoDocument(i,a),c=n.removedTargetIds||[];r=new ov([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=gl(t,n.document),a=n.removedTargetIds||[];r=new ov([],a,i,null)}else{if(!("filter"in e))return ct();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new Bee(i,a),c=n.targetId;r=new z$(c,s)}}return r}function gp(t,e){let r;if(e instanceof Yh)r={update:Dj(t,e.key,e.value)};else if(e instanceof xg)r={delete:pp(t,e.key)};else if(e instanceof Pl)r={update:Dj(t,e.key,e.data),updateMask:tte(e.fieldMask)};else{if(!(e instanceof k7))return ct();r={verify:pp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const c=s.transform;if(c instanceof fp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof x0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof dh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mp)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw ct()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Gee(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ct()})(t,e.precondition)),r}function eT(t,e){const r=e.currentDocument?(function(a){return a.updateTime!==void 0?Rn.updateTime(hi(a.updateTime)):a.exists!==void 0?Rn.exists(a.exists):Rn.none()})(e.currentDocument):Rn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,c){let d=null;if("setToServerValue"in c)pt(c.setToServerValue==="REQUEST_TIME"),d=new fp;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];d=new x0(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];d=new dh(m)}else"increment"in c?d=new mp(s,c.increment):ct();const f=yn.fromServerFormat(c.fieldPath);return new P$(f,d)})(t,i))):[];if(e.update){e.update.name;const i=gl(t,e.update.name),a=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const f=d.fieldPaths||[];return new _a(f.map((m=>yn.fromServerFormat(m))))})(e.updateMask);return new Pl(i,a,s,r,n)}return new Yh(i,a,r,n)}if(e.delete){const i=gl(t,e.delete);return new xg(i,r)}if(e.verify){const i=gl(t,e.verify);return new k7(i,r)}return ct()}function Qee(t,e){return t&&t.length>0?(pt(e!==void 0),t.map((r=>(function(i,a){let s=i.updateTime?hi(i.updateTime):hi(a);return s.isEqual(yt.min())&&(s=hi(a)),new Pee(s,i.transformResults||[])})(r,e)))):[]}function K$(t,e){return{documents:[q$(t,e.path)]}}function W$(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=q$(t,i);const a=(function(f){if(f.length!==0)return Y$(Nr.create(f,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:Ud(y.field),direction:Zee(y.dir)}})(m)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=YS(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:r,parent:i}}function X$(t){let e=H$(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){pt(n===1);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];r.where&&(a=(function(p){const y=Q$(p);return y instanceof Nr&&A7(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(p){return p.map((y=>(function(T){return new hp(zd(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,gg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(p){const y=!!p.before,b=p.values||[];return new ch(b,y)})(r.startAt));let f=null;return r.endAt&&(f=(function(p){const y=!p.before,b=p.values||[];return new ch(b,y)})(r.endAt)),_$(e,i,s,a,c,"F",d,f)}function Yee(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Q$(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=zd(r.unaryFilter.field);return Jt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=zd(r.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=zd(r.unaryFilter.field);return Jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zd(r.unaryFilter.field);return Jt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ct()}})(t):t.fieldFilter!==void 0?(function(r){return Jt.create(zd(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Nr.create(r.compositeFilter.filters.map((n=>Q$(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ct()}})(r.compositeFilter.op))})(t):ct()}function Zee(t){return Vee[t]}function Jee(t){return Fee[t]}function ete(t){return qee[t]}function Ud(t){return{fieldPath:t.canonicalString()}}function zd(t){return yn.fromServerFormat(t.fieldPath)}function Y$(t){return t instanceof Jt?(function(r){if(r.op==="=="){if(bj(r.value))return{unaryFilter:{field:Ud(r.field),op:"IS_NAN"}};if(vj(r.value))return{unaryFilter:{field:Ud(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(bj(r.value))return{unaryFilter:{field:Ud(r.field),op:"IS_NOT_NAN"}};if(vj(r.value))return{unaryFilter:{field:Ud(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(r.field),op:Jee(r.op),value:r.value}}})(t):t instanceof Nr?(function(r){const n=r.getFilters().map((i=>Y$(i)));return n.length===1?n[0]:{compositeFilter:{op:ete(r.op),filters:n}}})(t):ct()}function tte(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function Z$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,r,n,i,a=yt.min(),s=yt.min(),c=Dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new hl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.ct=e}}function rte(t,e){let r;if(e.document)r=Kee(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=tt.fromSegments(e.noDocument.path),i=_0(e.noDocument.readTime);r=ln.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const n=tt.fromSegments(e.unknownDocument.path),i=_0(e.unknownDocument.version);r=ln.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const a=new vn(i[0],i[1]);return yt.fromTimestamp(a)})(e.readTime)),r}function Lj(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Nv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:pp(a,s.key),fields:s.data.value.mapValue.fields,updateTime:hh(a,s.version.toTimestamp()),createTime:hh(a,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:w0(e.version)};else{if(!e.isUnknownDocument())return ct();n.unknownDocument={path:r.path.toArray(),version:w0(e.version)}}return n}function Nv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function w0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _0(t){const e=new vn(t.seconds,t.nanoseconds);return yt.fromTimestamp(e)}function Yu(t,e){const r=(e.baseMutations||[]).map((a=>eT(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>eT(t.ct,a))),i=vn.fromMillis(e.localWriteTimeMs);return new O7(e.batchId,i,r,n)}function Cm(t){const e=_0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?_0(t.lastLimboFreeSnapshotVersion):yt.min();let n;return n=(function(a){return a.documents!==void 0})(t.query)?(function(a){return pt(a.documents.length===1),qa(vg(H$(a.documents[0])))})(t.query):(function(a){return qa(X$(a))})(t.query),new hl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Dn.fromBase64String(t.resumeToken))}function eV(t,e){const r=w0(e.snapshotVersion),n=w0(e.lastLimboFreeSnapshotVersion);let i;i=Tv(e.target)?K$(t.ct,e.target):W$(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:b0(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function tV(t){const e=X$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ev(e,e.limit,"L"):e}function zw(t,e){return new C7(e.largestBatchId,eT(t.ct,e.overlayMutation))}function Bj(t,e){const r=e.path.lastSegment();return[t,na(e.path.popLast()),r]}function Uj(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:w0(n.readTime),documentKey:na(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{getBundleMetadata(e,r){return zj(e).get(r).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:_0(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,r){return zj(e).put((function(i){return{bundleId:i.id,createTime:w0(hi(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return $j(e).get(r).next((n=>{if(n)return(function(a){return{name:a.name,query:tV(a.bundledQuery),readTime:_0(a.readTime)}})(n)}))}saveNamedQuery(e,r){return $j(e).put((function(i){return{name:i.name,readTime:w0(hi(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function zj(t){return ii(t,"bundles")}function $j(t){return ii(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new dx(e,n)}getOverlay(e,r){return am(e).get(Bj(this.userId,r)).next((n=>n?zw(this.serializer,n):null))}getOverlays(e,r){const n=ho();return we.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((a,s)=>{const c=new C7(r,s);i.push(this.ht(e,c))})),we.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((s=>i.add(na(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(am(e).j("collectionPathOverlayIndex",c))})),we.waitFor(a)}getOverlaysForCollection(e,r,n){const i=ho(),a=na(r),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return am(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const f=zw(this.serializer,d);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const a=ho();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return am(e).J({index:"collectionGroupOverlayIndex",range:c},((d,f,m)=>{const p=zw(this.serializer,f);a.size()<i||p.largestBatchId===s?(a.set(p.getKey(),p),s=p.largestBatchId):m.done()})).next((()=>a))}ht(e,r){return am(e).put((function(i,a,s){const[c,d,f]=Bj(a,s.mutation.key);return{userId:a,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:gp(i.ct,s.mutation)}})(this.serializer,this.userId,r))}}function am(t){return ii(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{Pt(e){return ii(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?Dn.fromUint8Array(n):Dn.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(on(e.integerValue));else if("doubleValue"in e){const n=on(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),op(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=El(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Xc(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?h$(e)?this.dt(r,Number.MAX_SAFE_INTEGER):ox(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):ct()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const a=e.fields||{};this.dt(r,53);const s="value",c=((i=(n=a[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(on(c)),this.Vt(s,r),this.Tt(a[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),tt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Zu.vt=new Zu;function ate(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Vj(t){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=ate(255&n[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class ste{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=Vj(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=Vj(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class ote{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lte{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class sm{constructor(){this.jt=new ste,this.Ht=new ote(this.jt),this.Jt=new lte(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ju(this.indexId,this.documentKey,this.arrayValue,n)}}function wc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Fj(t.arrayValue,e.arrayValue),r!==0?r:(r=Fj(t.directionalValue,e.directionalValue),r!==0?r:tt.comparator(t.documentKey,e.documentKey)))}function Fj(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.Xt=new Dr(((r,n)=>yn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(pt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=FS(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ku(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.sn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Dr(yn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new rv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new rv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new rv(n.field,n.dir==="asc"?0:1)));return new Sv(Sv.UNKNOWN_ID,this.collectionId,r,sp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){var e,r;if(pt(t instanceof Jt||t instanceof Nr),t instanceof Jt){if(t instanceof w$){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((a=>Jt.create(t.field,"==",a))))||[];return Nr.create(i,"or")}return t}const n=t.filters.map((i=>rV(i)));return Nr.create(n,t.op)}function cte(t){if(t.getFilters().length===0)return[];const e=nT(rV(t));return pt(nV(e)),tT(e)||rT(e)?[e]:e.getFilters()}function tT(t){return t instanceof Jt}function rT(t){return t instanceof Nr&&A7(t)}function nV(t){return tT(t)||rT(t)||(function(r){if(r instanceof Nr&&KS(r)){for(const n of r.getFilters())if(!tT(n)&&!rT(n))return!1;return!0}return!1})(t)}function nT(t){if(pt(t instanceof Jt||t instanceof Nr),t instanceof Jt)return t;if(t.filters.length===1)return nT(t.filters[0]);const e=t.filters.map((n=>nT(n)));let r=Nr.create(e,t.op);return r=kv(r),nV(r)?r:(pt(r instanceof Nr),pt(uh(r)),pt(r.filters.length>1),r.filters.reduce(((n,i)=>M7(n,i))))}function M7(t,e){let r;return pt(t instanceof Jt||t instanceof Nr),pt(e instanceof Jt||e instanceof Nr),r=t instanceof Jt?e instanceof Jt?(function(i,a){return Nr.create([i,a],"and")})(t,e):Hj(t,e):e instanceof Jt?Hj(e,t):(function(i,a){if(pt(i.filters.length>0&&a.filters.length>0),uh(i)&&uh(a))return v$(i,a.getFilters());const s=KS(i)?i:a,c=KS(i)?a:i,d=s.filters.map((f=>M7(f,c)));return Nr.create(d,"or")})(t,e),kv(r)}function Hj(t,e){if(uh(e))return v$(e,t.getFilters());{const r=e.filters.map((n=>M7(t,n)));return Nr.create(r,"or")}}function kv(t){if(pt(t instanceof Jt||t instanceof Nr),t instanceof Jt)return t;const e=t.getFilters();if(e.length===1)return kv(e[0]);if(g$(t))return t;const r=e.map((i=>kv(i))),n=[];return r.forEach((i=>{i instanceof Jt?n.push(i):i instanceof Nr&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Nr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(){this.un=new P7}addToCollectionParentIndex(e,r){return this.un.add(r),we.resolve()}getCollectionParents(e,r){return we.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return we.resolve()}deleteFieldIndex(e,r){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,r){return we.resolve()}getDocumentsMatchingTarget(e,r){return we.resolve(null)}getIndexType(e,r){return we.resolve(0)}getFieldIndexes(e,r){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,r){return we.resolve(Wa.min())}getMinOffsetFromCollectionGroup(e,r){return we.resolve(Wa.min())}updateCollectionGroup(e,r,n){return we.resolve()}updateIndexEntries(e,r){return we.resolve()}}class P7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Dr(hr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Dr(hr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Uint8Array(0);class dte{constructor(e,r){this.databaseId=r,this.cn=new P7,this.ln=new iu((n=>b0(n)),((n,i)=>yg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const a={collectionId:n,parent:na(i)};return Gj(e).put(a)}return we.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[Jz(r),""],!1,!0);return Gj(e).U(i).next((a=>{for(const s of a){if(s.collectionId!==r)break;n.push(uo(s.parent))}return n}))}addFieldIndex(e,r){const n=om(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete i.indexId;const a=n.add(i);if(r.indexState){const s=Od(e);return a.next((c=>{s.put(Uj(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return a.next()}deleteFieldIndex(e,r){const n=om(e),i=Od(e),a=kd(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=om(e),n=kd(e),i=Od(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return we.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new qj(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,r){const n=kd(e);let i=!0;const a=new Map;return we.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{i&&(i=!!c),a.set(s,c)})))).next((()=>{if(i){let s=Gt();const c=[];return we.forEach(a,((d,f)=>{ze("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${b0(r)}`);const m=(function(C,B){const R=FS(B);if(R===void 0)return null;for(const I of Av(C,R.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null})(f,d),p=(function(C,B){const R=new Map;for(const I of Ku(B))for(const A of Av(C,I.fieldPath))switch(A.op){case"==":case"in":R.set(I.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return R.set(I.fieldPath.canonicalString(),A.value),Array.from(R.values())}return null})(f,d),y=(function(C,B){const R=[];let I=!0;for(const A of Ku(B)){const E=A.kind===0?Tj(C,A.fieldPath,C.startAt):Aj(C,A.fieldPath,C.startAt);R.push(E.value),I&&(I=E.inclusive)}return new ch(R,I)})(f,d),b=(function(C,B){const R=[];let I=!0;for(const A of Ku(B)){const E=A.kind===0?Aj(C,A.fieldPath,C.endAt):Tj(C,A.fieldPath,C.endAt);R.push(E.value),I&&(I=E.inclusive)}return new ch(R,I)})(f,d),T=this.In(d,f,y),S=this.In(d,f,b),w=this.Tn(d,f,p),k=this.En(d.indexId,m,T,y.inclusive,S,b.inclusive,w);return we.forEach(k,(M=>n.G(M,r.limit).next((C=>{C.forEach((B=>{const R=tt.fromSegments(B.documentKey);s.has(R)||(s=s.add(R),c.push(R))}))}))))})).next((()=>c))}return we.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=cte(Nr.create(e.filters,"and")).map((n=>XS(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,a,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,a.length),f=d/(r!=null?r.length:1),m=[];for(let p=0;p<d;++p){const y=r?this.dn(r[p/f]):gy,b=this.An(e,y,n[p%f],i),T=this.Rn(e,y,a[p%f],s),S=c.map((w=>this.An(e,y,w,!0)));m.push(...this.createRange(b,T,S))}return m}An(e,r,n,i){const a=new Ju(e,tt.empty(),r,n);return i?a:a.Zt()}Rn(e,r,n,i){const a=new Ju(e,tt.empty(),r,n);return i?a.Zt():a}Pn(e,r){const n=new qj(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const c of a)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const i=this.hn(r);return we.forEach(i,(a=>this.Pn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(d){let f=new Dr(yn.comparator),m=!1;for(const p of d.filters)for(const y of p.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?m=!0:f=f.add(y.field));for(const p of d.orderBy)p.field.isKeyField()||(f=f.add(p.field));return f.size+(m?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new sm;for(const i of Ku(e)){const a=r.data.field(i.fieldPath);if(a==null)return null;const s=n.Yt(i.kind);Zu.vt.It(a,s)}return n.zt()}dn(e){const r=new sm;return Zu.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new sm;return Zu.vt.It(up(this.databaseId,r),n.Yt((function(a){const s=Ku(a);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new sm);let a=0;for(const s of Ku(e)){const c=n[a++];for(const d of i)if(this.fn(r,s.fieldPath)&&dp(c))i=this.gn(i,s,c);else{const f=d.Yt(s.kind);Zu.vt.It(c,f)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const c of i){const d=new sm;d.seed(c.zt()),Zu.vt.It(s,d.Yt(r.kind)),a.push(d)}return a}fn(e,r){return!!e.filters.find((n=>n instanceof Jt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=om(e),i=Od(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((a=>{const s=[];return we.forEach(a,(c=>i.get([c.indexId,this.uid]).next((d=>{s.push((function(m,p){const y=p?new sp(p.sequenceNumber,new Wa(_0(p.readTime),new tt(uo(p.documentKey)),p.largestBatchId)):sp.empty(),b=m.fields.map((([T,S])=>new rv(yn.fromServerFormat(T),S)));return new Sv(m.indexId,m.collectionGroup,b,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Mt(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=om(e),a=Od(e);return this.yn(e).next((s=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>we.forEach(c,(d=>a.put(Uj(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return we.forEach(r,((i,a)=>{const s=n.get(i.collectionGroup);return(s?we.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(n.set(i.collectionGroup,c),we.forEach(c,(d=>this.wn(e,i,d).next((f=>{const m=this.Sn(a,d);return f.isEqual(m)?we.resolve():this.bn(e,a,d,f,m)})))))))}))}Dn(e,r,n,i){return kd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return kd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=kd(e);let a=new Dr(wc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{a=a.add(new Ju(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>a))}Sn(e,r){let n=new Dr(wc);const i=this.Vn(r,e);if(i==null)return n;const a=FS(r);if(a!=null){const s=e.data.field(a.fieldPath);if(dp(s))for(const c of s.arrayValue.values||[])n=n.add(new Ju(r.indexId,e.key,this.dn(c),i))}else n=n.add(new Ju(r.indexId,e.key,gy,i));return n}bn(e,r,n,i,a){ze("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,f,m,p,y){const b=d.getIterator(),T=f.getIterator();let S=Nd(b),w=Nd(T);for(;S||w;){let k=!1,M=!1;if(S&&w){const C=m(S,w);C<0?M=!0:C>0&&(k=!0)}else S!=null?M=!0:k=!0;k?(p(w),w=Nd(T)):M?(y(S),S=Nd(b)):(S=Nd(b),w=Nd(T))}})(i,a,wc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),we.waitFor(s)}yn(e){let r=1;return Od(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>wc(s,c))).filter(((s,c,d)=>!c||wc(s,d[c-1])!==0));const i=[];i.push(e);for(const s of n){const c=wc(s,e),d=wc(s,r);if(c===0)i[0]=e.Zt();else if(c>0&&d<0)i.push(s),i.push(s.Zt());else if(d>0)break}i.push(r);const a=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const c=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,gy,[]],d=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,gy,[]];a.push(IDBKeyRange.bound(c,d))}return a}Cn(e,r){return wc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Kj)}getMinOffset(e,r){return we.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||ct())))).next(Kj)}}function Gj(t){return ii(t,"collectionParents")}function kd(t){return ii(t,"indexEntries")}function om(t){return ii(t,"indexConfiguration")}function Od(t){return ii(t,"indexState")}function Kj(t){pt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;x7(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new Wa(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ya{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ya(e,ya.DEFAULT_COLLECTION_PERCENTILE,ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),a=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((m,p,y)=>(c++,y.delete())));a.push(d.next((()=>{pt(c===1)})));const f=[];for(const m of r.mutations){const p=s$(e,m.key.path,r.batchId);a.push(i.delete(p)),f.push(m.key)}return we.waitFor(a).next((()=>f))}function Ov(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ct();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya.DEFAULT_COLLECTION_PERCENTILE=10,ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ya.DEFAULT=new ya(41943040,ya.DEFAULT_COLLECTION_PERCENTILE,ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ya.DISABLED=new ya(-1,0,0);class hx{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){pt(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new hx(a,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).J({index:"userMutationsIndex",range:n},((i,a,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const a=$d(e),s=_c(e);return s.add({}).next((c=>{pt(typeof c=="number");const d=new O7(c,r,n,i),f=(function(b,T,S){const w=S.baseMutations.map((M=>gp(b.ct,M))),k=S.mutations.map((M=>gp(b.ct,M)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:k}})(this.serializer,this.userId,d),m=[];let p=new Dr(((y,b)=>Mt(y.canonicalString(),b.canonicalString())));for(const y of i){const b=s$(this.userId,y.key.path,c);p=p.add(y.key.path.popLast()),m.push(s.put(f)),m.push(a.put(b,XJ))}return p.forEach((y=>{m.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),we.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,r){return _c(e).get(r).next((n=>n?(pt(n.userId===this.userId),Yu(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?we.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return _c(e).J({index:"userMutationsIndex",range:i},((s,c,d)=>{c.userId===this.userId&&(pt(c.batchId>=n),a=Yu(this.serializer,c)),d.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return _c(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).U("userMutationsIndex",r).next((n=>n.map((i=>Yu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=nv(this.userId,r.path),i=IDBKeyRange.lowerBound(n),a=[];return $d(e).J({range:i},((s,c,d)=>{const[f,m,p]=s,y=uo(m);if(f===this.userId&&r.path.isEqual(y))return _c(e).get(p).next((b=>{if(!b)throw ct();pt(b.userId===this.userId),a.push(Yu(this.serializer,b))}));d.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Dr(Mt);const i=[];return r.forEach((a=>{const s=nv(this.userId,a.path),c=IDBKeyRange.lowerBound(s),d=$d(e).J({range:c},((f,m,p)=>{const[y,b,T]=f,S=uo(b);y===this.userId&&a.path.isEqual(S)?n=n.add(T):p.done()}));i.push(d)})),we.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,a=nv(this.userId,n),s=IDBKeyRange.lowerBound(a);let c=new Dr(Mt);return $d(e).J({range:s},((d,f,m)=>{const[p,y,b]=d,T=uo(y);p===this.userId&&n.isPrefixOf(T)?T.length===i&&(c=c.add(b)):m.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],i=[];return r.forEach((a=>{i.push(_c(e).get(a).next((s=>{if(s===null)throw ct();pt(s.userId===this.userId),n.push(Yu(this.serializer,s))})))})),we.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return iV(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),we.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return we.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return $d(e).J({range:n},((a,s,c)=>{if(a[0]===this.userId){const d=uo(a[1]);i.push(d)}else c.done()})).next((()=>{pt(i.length===0)}))}))}containsKey(e,r){return aV(e,this.userId,r)}Nn(e){return sV(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function aV(t,e,r){const n=nv(e,r.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return $d(t).J({range:a,H:!0},((c,d,f)=>{const[m,p,y]=c;m===e&&p===i&&(s=!0),f.done()})).next((()=>s))}function _c(t){return ii(t,"mutations")}function $d(t){return ii(t,"documentMutations")}function sV(t){return ii(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new S0(0)}static kn(){return new S0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new S0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>yt.fromTimestamp(new vn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>jd(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(pt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const a=[];return jd(e).J(((s,c)=>{const d=Cm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))})).next((()=>we.waitFor(a))).next((()=>i))}forEachTarget(e,r){return jd(e).J(((n,i)=>{const a=Cm(i);r(a)}))}qn(e){return Xj(e).get("targetGlobalKey").next((r=>(pt(r!==null),r)))}Qn(e,r){return Xj(e).put("targetGlobalKey",r)}Kn(e,r){return jd(e).put(eV(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=b0(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return jd(e).J({range:i,index:"queryTargetsIndex"},((s,c,d)=>{const f=Cm(c);yg(r,f.target)&&(a=f,d.done())})).next((()=>a))}addMatchingKeys(e,r,n){const i=[],a=jc(e);return r.forEach((s=>{const c=na(s.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,s))})),we.waitFor(i)}removeMatchingKeys(e,r,n){const i=jc(e);return we.forEach(r,(a=>{const s=na(a.path);return we.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,r){const n=jc(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=jc(e);let a=Gt();return i.J({range:n,H:!0},((s,c,d)=>{const f=uo(s[1]),m=new tt(f);a=a.add(m)})).next((()=>a))}containsKey(e,r){const n=na(r.path),i=IDBKeyRange.bound([n],[Jz(n)],!1,!0);let a=0;return jc(e).J({index:"documentTargetsIndex",H:!0,range:i},(([s,c],d,f)=>{s!==0&&(a++,f.done())})).next((()=>a>0))}ot(e,r){return jd(e).get(r).next((n=>n?Cm(n):null))}}function jd(t){return ii(t,"targets")}function Xj(t){return ii(t,"targetGlobal")}function jc(t){return ii(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj([t,e],[r,n]){const i=Mt(t,r);return i===0?Mt(e,n):i}class fte{constructor(e){this.Un=e,this.buffer=new Dr(Qj),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Qj(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class mte{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){nu(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ru(r)}await this.Hn(3e5)}))}}class pte{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return we.resolve(wa.oe);const n=new fte(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(Wj)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wj):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,a,s,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,c=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),Ld()<=Zt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${p} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function gte(t,e){return new pte(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yte{constructor(e,r){this.db=e,this.garbageCollector=gte(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return yy(e,n)}removeReference(e,r,n){return yy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return yy(e,r)}nr(e,r){return(function(i,a){let s=!1;return sV(i).Y((c=>aV(i,c,a).next((d=>(d&&(s=!0),we.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((f=>{if(!f)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,yt.min()),jc(e).delete((function(p){return[0,na(p.path)]})(s)))))}));i.push(d)}})).next((()=>we.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return yy(e,r)}tr(e,r){const n=jc(e);let i,a=wa.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:f})=>{s===0?(a!==wa.oe&&r(new tt(uo(i)),a),a=f,i=d):a=wa.oe})).next((()=>{a!==wa.oe&&r(new tt(uo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yy(t,e){return jc(t).put((function(n,i){return{targetId:0,path:na(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.changes=new iu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?we.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vte{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Lu(e).put(n)}removeEntry(e,r,n){return Lu(e).delete((function(a,s){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Nv(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=ln.newInvalidDocument(r);return Lu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lm(r))},((i,a)=>{n=this.ir(r,a)})).next((()=>n))}sr(e,r){let n={size:0,document:ln.newInvalidDocument(r)};return Lu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lm(r))},((i,a)=>{n={document:this.ir(r,a),size:Ov(a)}})).next((()=>n))}getEntries(e,r){let n=$a();return this._r(e,r,((i,a)=>{const s=this.ir(i,a);n=n.insert(i,s)})).next((()=>n))}ar(e,r){let n=$a(),i=new Jr(tt.comparator);return this._r(e,r,((a,s)=>{const c=this.ir(a,s);n=n.insert(a,c),i=i.insert(a,Ov(s))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return we.resolve();let i=new Dr(Jj);r.forEach((d=>i=i.add(d)));const a=IDBKeyRange.bound(lm(i.first()),lm(i.last())),s=i.getIterator();let c=s.getNext();return Lu(e).J({index:"documentKeyIndex",range:a},((d,f,m)=>{const p=tt.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&Jj(c,p)<0;)n(c,null),c=s.getNext();c&&c.isEqual(p)&&(n(c,f),c=s.hasNext()?s.getNext():null),c?m.$(lm(c)):m.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,a){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),Nv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lu(e).U(IDBKeyRange.bound(c,d,!0)).next((f=>{a==null||a.incrementDocumentReadCount(f.length);let m=$a();for(const p of f){const y=this.ir(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);y.isFoundDocument()&&(bg(r,y)||i.has(y.key))&&(m=m.insert(y.key,y))}return m}))}getAllFromCollectionGroup(e,r,n,i){let a=$a();const s=Zj(r,n),c=Zj(r,Wa.max());return Lu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,f,m)=>{const p=this.ir(tt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(p.key,p),a.size===i&&m.done()})).next((()=>a))}newChangeBuffer(e){return new bte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return Yj(e).get("remoteDocumentGlobalKey").next((r=>(pt(!!r),r)))}rr(e,r){return Yj(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=rte(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(yt.min())))return n}return ln.newInvalidDocument(e)}}function lV(t){return new vte(t)}class bte extends oV{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new iu((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new Dr(((a,s)=>Mt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const c=this.lr.get(a);if(r.push(this.cr.removeEntry(e,a,c.readTime)),s.isValidDocument()){const d=Lj(this.cr.serializer,s);i=i.add(a.path.popLast());const f=Ov(d);n+=f-c.size,r.push(this.cr.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=Lj(this.cr.serializer,s.convertToNoDocument(yt.min()));r.push(this.cr.addEntry(e,a,d))}})),i.forEach((a=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),r.push(this.cr.updateMetadata(e,n)),we.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((a,s)=>{this.lr.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function Yj(t){return ii(t,"remoteDocumentGlobal")}function Lu(t){return ii(t,"remoteDocumentsV14")}function lm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zj(t,e){const r=e.documentKey.path.toArray();return[t,Nv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Jj(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(i=Mt(r[a],n[a]),i)return i;return i=Mt(r.length,n.length),i||(i=Mt(r[r.length-2],n[n.length-2]),i||Mt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&$m(n.mutation,i,_a.empty(),vn.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Gt()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Gt()){const i=ho();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let s=Om();return a.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=ho();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Gt())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,i){let a=$a();const s=zm(),c=(function(){return zm()})();return r.forEach(((d,f)=>{const m=n.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof Pl)?a=a.insert(f.key,f):m!==void 0?(s.set(f.key,m.mutation.getFieldMask()),$m(m.mutation,f,m.mutation.getFieldMask(),vn.now())):s.set(f.key,_a.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,m)=>s.set(f,m))),r.forEach(((f,m)=>{var p;return c.set(f,new xte(m,(p=s.get(f))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=zm();let i=new Jr(((s,c)=>s-c)),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const f=r.get(d);if(f===null)return;let m=n.get(d)||_a.empty();m=c.applyToLocalView(f,m),n.set(d,m);const p=(i.get(c.batchId)||Gt()).add(d);i=i.insert(c.batchId,p)}))})).next((()=>{const s=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,p=O$();m.forEach((y=>{if(!a.has(y)){const b=D$(r.get(y),n.get(y));b!==null&&p.set(y,b),a=a.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return we.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(s){return tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):S$(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):we.resolve(ho());let c=-1,d=a;return s.next((f=>we.forEach(f,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?we.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,Gt()))).next((m=>({batchId:c,changes:k$(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new tt(r)).next((n=>{let i=Om();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Om();return this.indexManager.getCollectionParents(e,a).next((c=>we.forEach(c,(d=>{const f=(function(p,y){return new Qh(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((m=>{m.forEach(((p,y)=>{s=s.insert(p,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((s=>{a.forEach(((d,f)=>{const m=f.getKey();s.get(m)===null&&(s=s.insert(m,ln.newInvalidDocument(m)))}));let c=Om();return s.forEach(((d,f)=>{const m=a.get(d);m!==void 0&&$m(m.mutation,f,_a.empty(),vn.now()),bg(r,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return we.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:hi(i.createTime)}})(r)),we.resolve()}getNamedQuery(e,r){return we.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:tV(i.bundledQuery),readTime:hi(i.readTime)}})(r)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(){this.overlays=new Jr(tt.comparator),this.Ir=new Map}getOverlay(e,r){return we.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ho();return we.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.ht(e,r,a)})),we.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),we.resolve()}getOverlaysForCollection(e,r,n){const i=ho(),a=r.length+1,s=new tt(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return we.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new Jr(((f,m)=>f-m));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>n){let m=a.get(f.largestBatchId);m===null&&(m=ho(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=ho(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=i)););return we.resolve(c)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new C7(r,n));let a=this.Ir.get(r);a===void 0&&(a=Gt(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(){this.Tr=new Dr(ui.Er),this.dr=new Dr(ui.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ui(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ui(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new tt(new hr([])),n=new ui(r,e),i=new ui(r,e+1),a=[];return this.dr.forEachInRange([n,i],(s=>{this.Vr(s),a.push(s.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new tt(new hr([])),n=new ui(r,e),i=new ui(r,e+1);let a=Gt();return this.dr.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const r=new ui(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ui{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return tt.comparator(e.key,r.key)||Mt(e.wr,r.wr)}static Ar(e,r){return Mt(e.wr,r.wr)||tt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Dr(ui.Er)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new O7(a,r,n,i);this.mutationQueue.push(s);for(const c of i)this.br=this.br.add(new ui(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,r){return we.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ui(r,0),i=new ui(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],(s=>{const c=this.Dr(s.wr);a.push(c)})),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Dr(Mt);return r.forEach((i=>{const a=new ui(i,0),s=new ui(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],(c=>{n=n.add(c.wr)}))})),we.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;tt.isDocumentKey(a)||(a=a.child(""));const s=new ui(new tt(a),0);let c=new Dr(Mt);return this.br.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.wr)),!0)}),s),we.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){pt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return we.forEach(r.mutations,(i=>{const a=new ui(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ui(r,0),i=this.br.firstAfterOrEqual(n);return we.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e){this.Mr=e,this.docs=(function(){return new Jr(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return we.resolve(n?n.document.mutableCopy():ln.newInvalidDocument(r))}getEntries(e,r){let n=$a();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():ln.newInvalidDocument(i))})),we.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=$a();const s=r.path,c=new tt(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||x7(t$(m),n)<=0||(i.has(m.key)||bg(r,m))&&(a=a.insert(m.key,m.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,r,n,i){ct()}Or(e,r){return we.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Ete(this)}getSize(e){return we.resolve(this.size)}}class Ete extends oV{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),we.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nte{constructor(e){this.persistence=e,this.Nr=new iu((r=>b0(r)),yg),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new D7,this.targetCount=0,this.kr=S0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),we.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new S0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,we.resolve()}updateTargetData(e,r){return this.Kn(r),we.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),we.waitFor(a).next((()=>i))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return we.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),we.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),we.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),we.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return we.resolve(n)}containsKey(e,r){return we.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,r){this.qr={},this.overlays={},this.Qr=new wa(0),this.Kr=!1,this.Kr=!0,this.$r=new Ste,this.referenceDelegate=e(this),this.Ur=new Nte(this),this.indexManager=new ute,this.remoteDocumentCache=(function(i){return new Ate(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new J$(r),this.Gr=new wte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new _te,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Tte(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ze("MemoryPersistence","Starting transaction:",e);const i=new kte(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,r){return we.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class kte extends n${constructor(e){super(),this.currentSequenceNumber=e}}class fx{constructor(e){this.persistence=e,this.Jr=new D7,this.Yr=null}static Zr(e){return new fx(e)}get Xr(){if(this.Yr)return this.Yr;throw ct()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),we.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),we.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),we.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Xr,(n=>{const i=tt.fromPath(n);return this.ei(e,i).next((a=>{a||r.removeEntry(i,yt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return we.or([()=>we.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{constructor(e){this.serializer=e}O(e,r,n,i){const a=new sx("createOrUpgrade",r);n<1&&i>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fj,{unique:!0}),d.createObjectStore("documentMutations")})(e),eC(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=we.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),eC(e)),s=s.next((()=>(function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(d,f){return f.store("mutations").U().next((m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fj,{unique:!0});const p=f.store("mutations"),y=m.map((b=>p.put(b)));return we.waitFor(y)}))})(e,a)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.ni(a)))),n<6&&i>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&i>=7&&(s=s.next((()=>this.ii(a)))),n<8&&i>=8&&(s=s.next((()=>this.si(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.oi(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:oee});f.createIndex("collectionPathOverlayIndex",lee,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",cee,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:QJ});f.createIndex("documentKeyIndex",YJ),f.createIndex("collectionGroupIndex",ZJ)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.ai(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:nee}).createIndex("sequenceNumberIndex",iee,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:aee}).createIndex("documentKeyIndex",see,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=Ov(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>we.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>we.forEach(c,(d=>{pt(d.userId===a.userId);const f=Yu(this.serializer,d);return iV(e,a.userId,f).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return n.J(((s,c)=>{const d=new hr(s),f=(function(p){return[0,na(p)]})(d);a.push(r.get(f).next((m=>m?we.resolve():(p=>r.put({targetId:0,path:na(p),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>we.waitFor(a)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:ree});const n=r.store("collectionParents"),i=new P7,a=s=>{if(i.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:na(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new hr(s);return a(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],f)=>{const m=uo(c);return a(m.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const a=Cm(i),s=eV(this.serializer,a);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((a,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(p){return p.document?new tt(hr.fromString(p.document.name).popFirst(5)):p.noDocument?tt.fromSegments(p.noDocument.path):p.unknownDocument?tt.fromSegments(p.unknownDocument.path):ct()})(s).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(c.put(f))})).next((()=>we.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=lV(this.serializer),a=new uV(fx.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var f;let m=(f=c.get(d.userId))!==null&&f!==void 0?f:Gt();Yu(this.serializer,d).keys().forEach((p=>m=m.add(p))),c.set(d.userId,m)})),we.forEach(c,((d,f)=>{const m=new $i(f),p=dx.lt(this.serializer,m),y=a.getIndexManager(m),b=hx.lt(m,this.serializer,y,a.referenceDelegate);return new cV(i,b,p,y).recalculateAndSaveOverlaysForDocumentKeys(new qS(r,wa.oe),d).next()}))}))}}function eC(t){t.createObjectStore("targetDocuments",{keyPath:eee}).createIndex("documentTargetsIndex",tee,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JJ,{unique:!0}),t.createObjectStore("targetGlobal")}const $w="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class L7{constructor(e,r,n,i,a,s,c,d,f,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=a,this.window=s,this.document=c,this.ci=f,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!L7.D())throw new We(Ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yte(this,i),this.Ai=r+"main",this.serializer=new J$(d),this.Ri=new qc(this.Ai,this.hi,new Ote(this.serializer)),this.$r=new ite,this.Ur=new hte(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lV(this.serializer),this.Gr=new nte,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(Ne.FAILED_PRECONDITION,$w);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new wa(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(nu(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return cm(e).get("owner").next((r=>we.resolve(this.vi(r))))}Ci(e){return vy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=ii(r,"clientMetadata");return n.U().next((i=>{const a=this.xi(i,18e5),s=i.filter((c=>a.indexOf(c)===-1));return we.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?we.resolve(!0):cm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new We(Ne.FAILED_PRECONDITION,$w);return!1}}return!(!this.networkEnabled||!this.inForeground)||vy(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&ze("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new qS(e,wa.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>vy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return hx.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dte(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ze("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",a=(function(d){return d===17?hee:d===16?dee:d===15?_7:d===14?c$:d===13?l$:d===12?uee:d===11?o$:void ct()})(this.hi);let s;return this.Ri.runTransaction(e,i,a,(c=>(s=new qS(c,this.Qr?this.Qr.next():wa.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw In(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new We(Ne.FAILED_PRECONDITION,r$);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return cm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new We(Ne.FAILED_PRECONDITION,$w)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cm(e).put("owner",r)}static D(){return qc.D()}bi(e){const r=cm(e);return r.get("owner").next((n=>this.vi(n)?(ze("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):we.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(In(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;oz()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ze("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return In("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){In("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cm(t){return ii(t,"owner")}function vy(t){return ii(t,"clientMetadata")}function dV(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Gt(),i=Gt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new B7(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return oz()?8:i$(ri())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.Zi(e,r,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new jte;return this.Xi(e,r,s).next((c=>{if(a.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>a.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(Ld()<=Zt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Bd(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),we.resolve()):(Ld()<=Zt.DEBUG&&ze("QueryEngine","Query:",Bd(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Ld()<=Zt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Bd(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qa(r))):we.resolve())}Yi(e,r){if(Ej(r))return we.resolve(null);let n=qa(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=Ev(r,null,"F"),n=qa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=Gt(...a);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.ts(r,c);return this.ns(r,f,s,d.readTime)?this.Yi(e,Ev(r,null,"F")):this.rs(e,f,r,d)}))))})))))}Zi(e,r,n,i){return Ej(r)||i.isEqual(yt.min())?we.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const s=this.ts(r,a);return this.ns(r,s,n,i)?we.resolve(null):(Ld()<=Zt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bd(r)),this.rs(e,s,r,e$(i,-1)).next((c=>c)))}))}ts(e,r){let n=new Dr(E$(e));return r.forEach(((i,a)=>{bg(e,a)&&(n=n.add(a))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return Ld()<=Zt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Bd(r)),this.Ji.getDocumentsMatchingQuery(e,r,Wa.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Jr(Mt),this._s=new iu((a=>b0(a)),yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function fV(t,e,r,n){return new Cte(t,e,r,n)}async function mV(t,e){const r=ft(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],c=[];let d=Gt();for(const f of i){s.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of a){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(n,d).next((f=>({hs:f,removedBatchIds:s,addedBatchIds:c})))}))}))}function Ite(t,e){const r=ft(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,m){const p=f.batch,y=p.keys();let b=we.resolve();return y.forEach((T=>{b=b.next((()=>m.getEntry(d,T))).next((S=>{const w=f.docVersions.get(T);pt(w!==null),S.version.compareTo(w)<0&&(p.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),m.addEntry(S)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Gt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function pV(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Rte(t,e){const r=ft(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];e.targetChanges.forEach(((m,p)=>{const y=i.get(p);if(!y)return;c.push(r.Ur.removeMatchingKeys(a,m.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(a,m.addedDocuments,p))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(Dn.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,n)),i=i.insert(p,b),(function(S,w,k){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(y,b,m)&&c.push(r.Ur.updateTargetData(a,b))}));let d=$a(),f=Gt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(Mte(a,s,e.documentUpdates).next((m=>{d=m.Ps,f=m.Is}))),!n.isEqual(yt.min())){const m=r.Ur.getLastRemoteSnapshotVersion(a).next((p=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));c.push(m)}return we.waitFor(c).next((()=>s.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(r.os=i,a)))}function Mte(t,e,r){let n=Gt(),i=Gt();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let s=$a();return r.forEach(((c,d)=>{const f=a.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(yt.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):ze("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ps:s,Is:i}}))}function Pte(t,e){const r=ft(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function jv(t,e){const r=ft(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((a=>a?(i=a,we.resolve(i)):r.Ur.allocateTargetId(n).next((s=>(i=new hl(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function fh(t,e,r){const n=ft(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!nu(s))throw s;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function iT(t,e,r){const n=ft(t);let i=yt.min(),a=Gt();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,f,m){const p=ft(d),y=p._s.get(m);return y!==void 0?we.resolve(p.os.get(y)):p.Ur.getTargetData(f,m)})(n,s,qa(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{a=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?i:yt.min(),r?a:Gt()))).next((c=>(vV(n,A$(e),c),{documents:c,Ts:a})))))}function gV(t,e){const r=ft(t),n=ft(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((s=>s?s.target:null))))}function yV(t,e){const r=ft(t),n=r.us.get(e)||yt.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,e$(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(vV(r,e,i),i)))}function vV(t,e,r){let n=t.us.get(e)||yt.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.us.set(e,n)}function tC(t,e){return`firestore_clients_${t}_${e}`}function rC(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Vw(t,e){return`firestore_targets_${t}_${e}`}class Cv{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new We(i.error.code,i.error.message))),s?new Cv(e,r,i.state,a):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new We(n.error.code,n.error.message))),a?new Vm(e,n.state,i):(In("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=E7();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=a$(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new Iv(e,a):(In("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class U7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new U7(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aT{constructor(){this.activeTargetIds=E7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fw{constructor(e,r,n,i,a){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Jr(Mt),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=tC(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new aT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(tC(this.persistenceKey,n));if(i){const a=Iv.Rs(n,i);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Vw(this.persistenceKey,e));if(i){const a=Vm.Rs(e,i);a&&(n=a.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vw(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ze("SharedClientState","READ",e,r),r}setItem(e,r){ze("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(a){let s=wa.oe;if(a!=null)try{const c=JSON.parse(a);pt(typeof c=="number"),s=c}catch(c){In("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==wa.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new Cv(this.currentUser,e,r,n),a=rC(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Vs())}Qs(e){const r=rC(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=Vw(this.persistenceKey,e),a=new Vm(e,r,n);this.setItem(i,a.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Iv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Cv.Rs(new $i(a),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return Vm.Rs(i,r)}Ls(e){return U7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(n),s=[],c=[];return a.forEach((d=>{i.has(d)||s.push(d)})),i.forEach((d=>{a.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=E7();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class bV{constructor(){this.so=new aT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let by=null;function qw(){return by===null?by=(function(){return 268435456+Math.round(2147483648*Math.random())})():by++,"0x"+by.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="WebChannelConnection";class Ute extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,s){const c=qw(),d=this.xo(r,n.toUriEncodedString());ze("RestConnection",`Sending RPC '${r}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,a,s),this.No(r,d,f,i).then((m=>(ze("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw ip("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",d,"request:",i),m}))}Lo(r,n,i,a,s,c){return this.Mo(r,n,i,a,s)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xh})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>r[s]=a)),i&&i.headers.forEach(((a,s)=>r[s]=a))}xo(r,n){const i=Lte[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=qw();return new Promise(((s,c)=>{const d=new Kz;d.setWithCredentials(!0),d.listenOnce(Wz.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case tv.NO_ERROR:const m=d.getResponseJson();ze(Bi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),s(m);break;case tv.TIMEOUT:ze(Bi,`RPC '${e}' ${a} timed out`),c(new We(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case tv.HTTP_ERROR:const p=d.getStatus();if(ze(Bi,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=(function(w){const k=w.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(k)>=0?k:Ne.UNKNOWN})(b.status);c(new We(T,b.message))}else c(new We(Ne.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new We(Ne.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{ze(Bi,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);ze(Bi,`RPC '${e}' ${a} sending request:`,i),d.send(r,"POST",f,n,15)}))}Bo(e,r,n){const i=qw(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yz(),c=Qz(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const m=a.join("");ze(Bi,`Creating RPC '${e}' stream ${i}: ${m}`,d);const p=s.createWebChannel(m,d);let y=!1,b=!1;const T=new Bte({Io:w=>{b?ze(Bi,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(ze(Bi,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),ze(Bi,`RPC '${e}' stream ${i} sending:`,w),p.send(w))},To:()=>p.close()}),S=(w,k,M)=>{w.listen(k,(C=>{try{M(C)}catch(B){setTimeout((()=>{throw B}),0)}}))};return S(p,km.EventType.OPEN,(()=>{b||(ze(Bi,`RPC '${e}' stream ${i} transport opened.`),T.yo())})),S(p,km.EventType.CLOSE,(()=>{b||(b=!0,ze(Bi,`RPC '${e}' stream ${i} transport closed`),T.So())})),S(p,km.EventType.ERROR,(w=>{b||(b=!0,ip(Bi,`RPC '${e}' stream ${i} transport errored:`,w),T.So(new We(Ne.UNAVAILABLE,"The operation could not be completed")))})),S(p,km.EventType.MESSAGE,(w=>{var k;if(!b){const M=w.data[0];pt(!!M);const C=M,B=C.error||((k=C[0])===null||k===void 0?void 0:k.error);if(B){ze(Bi,`RPC '${e}' stream ${i} received error:`,B);const R=B.status;let I=(function(O){const U=qn[O];if(U!==void 0)return U$(U)})(R),A=B.message;I===void 0&&(I=Ne.INTERNAL,A="Unknown error status: "+R+" with message "+B.message),b=!0,T.So(new We(I,A)),p.close()}else ze(Bi,`RPC '${e}' stream ${i} received:`,M),T.bo(M)}})),S(c,Xz.STAT_EVENT,(w=>{w.stat===VS.PROXY?ze(Bi,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===VS.NOPROXY&&ze(Bi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return typeof window<"u"?window:null}function lv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){return new Hee(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,r,n,i,a,s,c,d){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new z7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ne.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new We(Ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zte extends wV{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Xee(this.serializer,e),n=(function(a){if(!("targetChange"in a))return yt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?yt.min():s.readTime?hi(s.readTime):yt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=JS(this.serializer),r.addTarget=(function(a,s){let c;const d=s.target;if(c=Tv(d)?{documents:K$(a,d)}:{query:W$(a,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=V$(a,s.resumeToken);const f=YS(a,s.expectedCount);f!==null&&(c.expectedCount=f)}else if(s.snapshotVersion.compareTo(yt.min())>0){c.readTime=hh(a,s.snapshotVersion.toTimestamp());const f=YS(a,s.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const n=Yee(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=JS(this.serializer),r.removeTarget=e,this.a_(r)}}class $te extends wV{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Qee(e.writeResults,e.commitTime),n=hi(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=JS(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>gp(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new We(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Mo(e,ZS(r,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(Ne.UNKNOWN,a.toString())}))}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,ZS(r,n),i,s,c,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(Ne.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Fte{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):ze("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qte{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((s=>{n.enqueueAndForget((async()=>{B0(this)&&(ze("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const f=ft(d);f.L_.add(4),await Sg(f),f.q_.set("Unknown"),f.L_.delete(4),await px(f)})(this))}))})),this.q_=new Fte(n,i)}}async function px(t){if(B0(t))for(const e of t.B_)await e(!0)}async function Sg(t){for(const e of t.B_)await e(!1)}function gx(t,e){const r=ft(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),F7(r)?V7(r):Jh(r).r_()&&$7(r,e))}function mh(t,e){const r=ft(t),n=Jh(r);r.N_.delete(e),n.r_()&&_V(r,e),r.N_.size===0&&(n.r_()?n.o_():B0(r)&&r.q_.set("Unknown"))}function $7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Jh(t).A_(e)}function _V(t,e){t.Q_.xe(e),Jh(t).R_(e)}function V7(t){t.Q_=new $ee({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Jh(t).start(),t.q_.v_()}function F7(t){return B0(t)&&!Jh(t).n_()&&t.N_.size>0}function B0(t){return ft(t).L_.size===0}function SV(t){t.Q_=void 0}async function Hte(t){t.q_.set("Online")}async function Gte(t){t.N_.forEach(((e,r)=>{$7(t,e)}))}async function Kte(t,e){SV(t),F7(t)?(t.q_.M_(e),V7(t)):t.q_.set("Unknown")}async function Wte(t,e,r){if(t.q_.set("Online"),e instanceof $$&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(n){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Rv(t,n)}else if(e instanceof ov?t.Q_.Ke(e):e instanceof z$?t.Q_.He(e):t.Q_.We(e),!r.isEqual(yt.min()))try{const n=await pV(t.localStore);r.compareTo(n)>=0&&await(function(a,s){const c=a.Q_.rt(s);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.N_.get(f);m&&a.N_.set(f,m.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,f)=>{const m=a.N_.get(d);if(!m)return;a.N_.set(d,m.withResumeToken(Dn.EMPTY_BYTE_STRING,m.snapshotVersion)),_V(a,d);const p=new hl(m.target,d,f,m.sequenceNumber);$7(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){ze("RemoteStore","Failed to raise snapshot:",n),await Rv(t,n)}}async function Rv(t,e,r){if(!nu(e))throw e;t.L_.add(1),await Sg(t),t.q_.set("Offline"),r||(r=()=>pV(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ze("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await px(t)}))}function TV(t,e){return e().catch((r=>Rv(t,r,e)))}async function Zh(t){const e=ft(t),r=Yc(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xte(e);)try{const i=await Pte(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,Qte(e,i)}catch(i){await Rv(e,i)}AV(e)&&EV(e)}function Xte(t){return B0(t)&&t.O_.length<10}function Qte(t,e){t.O_.push(e);const r=Yc(t);r.r_()&&r.V_&&r.m_(e.mutations)}function AV(t){return B0(t)&&!Yc(t).n_()&&t.O_.length>0}function EV(t){Yc(t).start()}async function Yte(t){Yc(t).p_()}async function Zte(t){const e=Yc(t);for(const r of t.O_)e.m_(r.mutations)}async function Jte(t,e,r){const n=t.O_.shift(),i=j7.from(n,e,r);await TV(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Zh(t)}async function ere(t,e){e&&Yc(t).V_&&await(async function(n,i){if((function(s){return B$(s)&&s!==Ne.ABORTED})(i.code)){const a=n.O_.shift();Yc(n).s_(),await TV(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Zh(n)}})(t,e),AV(t)&&EV(t)}async function iC(t,e){const r=ft(t);r.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const n=B0(r);r.L_.add(3),await Sg(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await px(r)}async function sT(t,e){const r=ft(t);e?(r.L_.delete(2),await px(r)):e||(r.L_.add(2),await Sg(r),r.q_.set("Unknown"))}function Jh(t){return t.K_||(t.K_=(function(r,n,i){const a=ft(r);return a.w_(),new zte(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Hte.bind(null,t),Ro:Gte.bind(null,t),mo:Kte.bind(null,t),d_:Wte.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),F7(t)?V7(t):t.q_.set("Unknown")):(await t.K_.stop(),SV(t))}))),t.K_}function Yc(t){return t.U_||(t.U_=(function(r,n,i){const a=ft(r);return a.w_(),new $te(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yte.bind(null,t),mo:ere.bind(null,t),f_:Zte.bind(null,t),g_:Jte.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Zh(t)):(await t.U_.stop(),t.O_.length>0&&(ze("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,c=new q7(e,r,s,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H7(t,e){if(In("AsyncQueue",`${e}: ${t}`),nu(t))return new We(Ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||tt.comparator(r.key,n.key):(r,n)=>tt.comparator(r.key,n.key),this.keyedMap=Om(),this.sortedSet=new Jr(this.comparator)}static emptySet(e){return new Qd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Qd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Qd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.W_=new Jr(tt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ct():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class ph{constructor(e,r,n,i,a,s,c,d,f){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new ph(e,r,Qd.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class rre{constructor(){this.queries=sC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=ft(r),a=i.queries;i.queries=sC(),a.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new We(Ne.ABORTED,"Firestore shutting down"))}}function sC(){return new iu((t=>T$(t)),lx)}async function G7(t,e){const r=ft(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new tre,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const c=H7(s,`Initialization of query '${Bd(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&W7(r)}async function K7(t,e){const r=ft(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function nre(t,e){const r=ft(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const c of s.j_)c.X_(i)&&(n=!0);s.z_=i}}n&&W7(r)}function ire(t,e,r){const n=ft(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function W7(t){t.Y_.forEach((e=>{e.next()}))}var oT,oC;(oC=oT||(oT={})).ea="default",oC.Cache="cache";class X7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ph(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.key=e}}class kV{constructor(e){this.key=e}}class are{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Gt(),this.mutatedKeys=Gt(),this.Aa=E$(e),this.Ra=new Qd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new aC,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,p)=>{const y=i.get(m),b=bg(this.query,p)?p:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;y&&b?y.data.isEqual(b.data)?T!==S&&(n.track({type:3,doc:b}),w=!0):this.ga(y,b)||(n.track({type:2,doc:b}),w=!0,(d&&this.Aa(b,d)>0||f&&this.Aa(b,f)<0)&&(c=!0)):!y&&b?(n.track({type:0,doc:b}),w=!0):y&&!b&&(n.track({type:1,doc:y}),w=!0,(d||f)&&(c=!0)),w&&(b?(s=s.add(b),a=S?a.add(m):a.delete(m)):(s=s.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{Ra:s,fa:n,ns:c,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((m,p)=>(function(b,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return S(b)-S(T)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),i=i!=null&&i;const c=r&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,f=d!==this.Ea;return this.Ea=d,s.length!==0||f?{snapshot:new ph(this.query,e.Ra,a,s,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new aC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Gt(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new kV(n))})),this.da.forEach((n=>{e.has(n)||r.push(new NV(n))})),r}ba(e){this.Ta=e.Ts,this.da=Gt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ph.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sre{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class ore{constructor(e){this.key=e,this.va=!1}}class lre{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new iu((c=>T$(c)),lx),this.Ma=new Map,this.xa=new Set,this.Oa=new Jr(tt.comparator),this.Na=new Map,this.La=new D7,this.Ba={},this.ka=new Map,this.qa=S0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function cre(t,e,r=!0){const n=yx(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await OV(n,e,r,!0),i}async function ure(t,e){const r=yx(t);await OV(r,e,!0,!1)}async function OV(t,e,r,n){const i=await jv(t.localStore,qa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let c;return n&&(c=await Q7(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&gx(t.remoteStore,i),c}async function Q7(t,e,r,n,i){t.Ka=(p,y,b)=>(async function(S,w,k,M){let C=w.view.ma(k);C.ns&&(C=await iT(S.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,C))));const B=M&&M.targetChanges.get(w.targetId),R=M&&M.targetMismatches.get(w.targetId)!=null,I=w.view.applyChanges(C,S.isPrimaryClient,B,R);return lT(S,w.targetId,I.wa),I.snapshot})(t,p,y,b);const a=await iT(t.localStore,e,!0),s=new are(e,a.Ts),c=s.ma(a.documents),d=_g.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),f=s.applyChanges(c,t.isPrimaryClient,d);lT(t,r,f.wa);const m=new sre(e,r,s);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),f.snapshot}async function dre(t,e,r){const n=ft(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter((s=>!lx(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await fh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&mh(n.remoteStore,i.targetId),gh(n,i.targetId)})).catch(ru)):(gh(n,i.targetId),await fh(n.localStore,i.targetId,!0))}async function hre(t,e){const r=ft(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),mh(r.remoteStore,n.targetId))}async function fre(t,e,r){const n=e8(t);try{const i=await(function(s,c){const d=ft(s),f=vn.now(),m=c.reduce(((b,T)=>b.add(T.key)),Gt());let p,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=$a(),S=Gt();return d.cs.getEntries(b,m).next((w=>{T=w,T.forEach(((k,M)=>{M.isValidDocument()||(S=S.add(k))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,T))).next((w=>{p=w;const k=[];for(const M of c){const C=Lee(M,p.get(M.key).overlayedDocument);C!=null&&k.push(new Pl(M.key,C,m$(C.value.mapValue),Rn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,k,c)})).next((w=>{y=w;const k=w.applyToLocalDocumentSet(p,S);return d.documentOverlayCache.saveOverlays(b,w.batchId,k)}))})).then((()=>({batchId:y.batchId,changes:k$(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,c,d){let f=s.Ba[s.currentUser.toKey()];f||(f=new Jr(Mt)),f=f.insert(c,d),s.Ba[s.currentUser.toKey()]=f})(n,i.batchId,r),await au(n,i.changes),await Zh(n.remoteStore)}catch(i){const a=H7(i,"Failed to persist write");r.reject(a)}}async function jV(t,e){const r=ft(t);try{const n=await Rte(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=r.Na.get(a);s&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?pt(s.va):i.removedDocuments.size>0&&(pt(s.va),s.va=!1))})),await au(r,n,e)}catch(n){await ru(n)}}function lC(t,e,r){const n=ft(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((a,s)=>{const c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(s,c){const d=ft(s);d.onlineState=c;let f=!1;d.queries.forEach(((m,p)=>{for(const y of p.j_)y.Z_(c)&&(f=!0)})),f&&W7(d)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function mre(t,e,r){const n=ft(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let s=new Jr(tt.comparator);s=s.insert(a,ln.newNoDocument(a,yt.min()));const c=Gt().add(a),d=new wg(yt.min(),new Map,new Jr(Mt),s,c);await jV(n,d),n.Oa=n.Oa.remove(a),n.Na.delete(e),J7(n)}else await fh(n.localStore,e,!1).then((()=>gh(n,e,r))).catch(ru)}async function pre(t,e){const r=ft(t),n=e.batch.batchId;try{const i=await Ite(r.localStore,e);Z7(r,n,null),Y7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await au(r,i)}catch(i){await ru(i)}}async function gre(t,e,r){const n=ft(t);try{const i=await(function(s,c){const d=ft(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next((p=>(pt(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(f,p)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(n.localStore,e);Z7(n,e,r),Y7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await au(n,i)}catch(i){await ru(i)}}function Y7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function Z7(t,e,r){const n=ft(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function gh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||CV(t,n)}))}function CV(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(mh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),J7(t))}function lT(t,e,r){for(const n of r)n instanceof NV?(t.La.addReference(n.key,e),yre(t,n)):n instanceof kV?(ze("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||CV(t,n.key)):ct()}function yre(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ze("SyncEngine","New document in limbo: "+r),t.xa.add(n),J7(t))}function J7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new tt(hr.fromString(e)),n=t.qa.next();t.Na.set(n,new ore(r)),t.Oa=t.Oa.insert(r,n),gx(t.remoteStore,new hl(qa(vg(r.path)),n,"TargetPurposeLimboResolution",wa.oe))}}async function au(t,e,r){const n=ft(t),i=[],a=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((f=>{var m;if((f||r)&&n.isPrimaryClient){const p=f?!f.fromCache:(m=r==null?void 0:r.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){i.push(f);const p=B7.Wi(d.targetId,f);a.push(p)}})))})),await Promise.all(s),n.Ca.d_(i),await(async function(d,f){const m=ft(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>we.forEach(f,(y=>we.forEach(y.$i,(b=>m.persistence.referenceDelegate.addReference(p,y.targetId,b))).next((()=>we.forEach(y.Ui,(b=>m.persistence.referenceDelegate.removeReference(p,y.targetId,b)))))))))}catch(p){if(!nu(p))throw p;ze("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const y=p.targetId;if(!p.fromCache){const b=m.os.get(y),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T);m.os=m.os.insert(y,S)}}})(n.localStore,a))}async function vre(t,e){const r=ft(t);if(!r.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const n=await mV(r.localStore,e);r.currentUser=e,(function(a,s){a.ka.forEach((c=>{c.forEach((d=>{d.reject(new We(Ne.CANCELLED,s))}))})),a.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await au(r,n.hs)}}function bre(t,e){const r=ft(t),n=r.Na.get(e);if(n&&n.va)return Gt().add(n.key);{let i=Gt();const a=r.Ma.get(e);if(!a)return i;for(const s of a){const c=r.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}async function xre(t,e){const r=ft(t),n=await iT(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&lT(r,e.targetId,i.wa),i}async function wre(t,e){const r=ft(t);return yV(r.localStore,e).then((n=>au(r,n)))}async function _re(t,e,r,n){const i=ft(t),a=await(function(c,d){const f=ft(c),m=ft(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(p=>m.Mn(p,d).next((y=>y?f.localDocuments.getDocuments(p,y):we.resolve(null)))))})(i.localStore,e);a!==null?(r==="pending"?await Zh(i.remoteStore):r==="acknowledged"||r==="rejected"?(Z7(i,e,n||null),Y7(i,e),(function(c,d){ft(ft(c).mutationQueue).On(d)})(i.localStore,e)):ct(),await au(i,a)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Sre(t,e){const r=ft(t);if(yx(r),e8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await cC(r,n.toArray());r.Qa=!0,await sT(r.remoteStore,!0);for(const a of i)gx(r.remoteStore,a)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((a,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then((()=>(gh(r,s),fh(r.localStore,s,!0)))),mh(r.remoteStore,s)})),await i,await cC(r,n),(function(s){const c=ft(s);c.Na.forEach(((d,f)=>{mh(c.remoteStore,f)})),c.La.pr(),c.Na=new Map,c.Oa=new Jr(tt.comparator)})(r),r.Qa=!1,await sT(r.remoteStore,!1)}}async function cC(t,e,r){const n=ft(t),i=[],a=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await jv(n.localStore,qa(d[0]));for(const f of d){const m=n.Fa.get(f),p=await xre(n,m);p.snapshot&&a.push(p.snapshot)}}else{const f=await gV(n.localStore,s);c=await jv(n.localStore,f),await Q7(n,IV(f),s,!1,c.resumeToken)}i.push(c)}return n.Ca.d_(a),i}function IV(t){return _$(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Tre(t){return(function(r){return ft(ft(r).persistence).Qi()})(ft(t).localStore)}async function Are(t,e,r,n){const i=ft(t);if(i.Qa)return void ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.Ma.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const s=await yV(i.localStore,A$(a[0])),c=wg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Dn.EMPTY_BYTE_STRING);await au(i,s,c);break}case"rejected":await fh(i.localStore,e,!0),gh(i,e,n);break;default:ct()}}async function Ere(t,e,r){const n=yx(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){ze("SyncEngine","Adding an already active target "+i);continue}const a=await gV(n.localStore,i),s=await jv(n.localStore,a);await Q7(n,IV(a),s.targetId,!1,s.resumeToken),gx(n.remoteStore,s)}for(const i of r)n.Ma.has(i)&&await fh(n.localStore,i,!1).then((()=>{mh(n.remoteStore,i),gh(n,i)})).catch(ru)}}function yx(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mre.bind(null,e),e.Ca.d_=nre.bind(null,e.eventManager),e.Ca.$a=ire.bind(null,e.eventManager),e}function e8(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gre.bind(null,e),e}class yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}Ga(e){return new uV(fx.Zr,this.serializer)}Wa(e){return new bV}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yp.provider={build:()=>new yp};class RV extends yp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await e8(this.Ja.syncEngine),await Zh(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new mte(n,e.asyncQueue,r)}Ha(e,r){const n=new KJ(r,this.persistence);return new GJ(e.asyncQueue,n)}Ga(e){const r=dV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ya.withCacheSize(this.cacheSizeBytes):ya.DEFAULT;return new L7(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,xV(),lv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bV}}class Nre extends RV{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Fw&&(this.sharedClientState.syncEngine={no:_re.bind(null,r),ro:Are.bind(null,r),io:Ere.bind(null,r),Qi:Tre.bind(null,r),eo:wre.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Sre(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=xV();if(!Fw.D(r))throw new We(Ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=dV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fw(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class vp{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>lC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=vre.bind(null,this.syncEngine),await sT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rre})()}createDatastore(e){const r=mx(e.databaseInfo.databaseId),n=(function(a){return new Ute(a)})(e.databaseInfo);return(function(a,s,c,d){return new Vte(a,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,s,c){return new qte(n,i,a,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>lC(this.syncEngine,r,0)),(function(){return nC.D()?new nC:new Dte})())}createSyncEngine(e,r){return(function(i,a,s,c,d,f,m){const p=new lre(i,a,s,c,d,f);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const a=ft(i);ze("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Sg(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}vp.provider={build:()=>new vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(Ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,a){const s=ft(i),c={documents:a.map((p=>pp(s.serializer,p)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,hr.emptyPath(),c,a.length),f=new Map;d.forEach((p=>{const y=Wee(s.serializer,p);f.set(y.key.toString(),y)}));const m=[];return a.forEach((p=>{const y=f.get(p.toString());pt(!!y),m.push(y)})),m})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new xg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=tt.fromPath(n);this.mutations.push(new k7(i,this.precondition(i)))})),await(async function(n,i){const a=ft(n),s={writes:i.map((c=>gp(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,hr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw ct();r=yt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new We(Ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(yt.min())?Rn.exists(!1):Rn.updateTime(r):Rn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(yt.min()))throw new We(Ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(r)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,r,n,i,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=a,this._u=n.maxAttempts,this.t_=new z7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new kre(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!gg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!B$(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=Zz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{ze("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(ze("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=H7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Hw(t,e){t.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await mV(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function uC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Cre(t);ze("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>iC(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>iC(e.remoteStore,i))),t._onlineComponents=e}async function Cre(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hw(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ne.FAILED_PRECONDITION||i.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;ip("Error using user provided cache. Falling back to memory cache: "+r),await Hw(t,new yp)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),await Hw(t,new yp);return t._offlineComponents}async function r8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),await uC(t,t._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),await uC(t,new vp))),t._onlineComponents}function Ire(t){return r8(t).then((e=>e.syncEngine))}function Rre(t){return r8(t).then((e=>e.datastore))}async function Mv(t){const e=await r8(t),r=e.eventManager;return r.onListen=cre.bind(null,e.syncEngine),r.onUnlisten=dre.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=ure.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=hre.bind(null,e.syncEngine),r}function Mre(t,e,r={}){const n=new Fs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new t8({next:y=>{m.Za(),s.enqueueAndForget((()=>K7(a,p)));const b=y.docs.has(c);!b&&y.fromCache?f.reject(new We(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&d&&d.source==="server"?f.reject(new We(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new X7(vg(c.path),m,{includeMetadataChanges:!0,_a:!0});return G7(a,p)})(await Mv(t),t.asyncQueue,e,r,n))),n.promise}function Pre(t,e,r={}){const n=new Fs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new t8({next:y=>{m.Za(),s.enqueueAndForget((()=>K7(a,p))),y.fromCache&&d.source==="server"?f.reject(new We(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new X7(c,m,{includeMetadataChanges:!0,_a:!0});return G7(a,p)})(await Mv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t,e,r){if(!r)throw new We(Ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Dre(t,e,r,n){if(e===!0&&n===!0)throw new We(Ne.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hC(t){if(!tt.isDocumentKey(t))throw new We(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fC(t){if(tt.isDocumentKey(t))throw new We(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ct()}function Ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vx(t);throw new We(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Lre(t,e){if(e<=0)throw new We(Ne.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new We(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MV((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new We(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new We(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new We(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class n8{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mC(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new DJ;switch(n.type){case"firstParty":return new UJ(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new We(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=dC.get(r);n&&(ze("ComponentProvider","Removing Datastore"),dC.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dl(this.firestore,e,this._query)}}class Oi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oi(this.firestore,e,this._key)}}class Hc extends Dl{constructor(e,r,n){super(e,r,vg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oi(this.firestore,null,new tt(e))}withConverter(e){return new Hc(this.firestore,e,this._path)}}function ar(t,e,...r){if(t=Lr(t),PV("collection","path",e),t instanceof n8){const n=hr.fromString(e,...r);return fC(n),new Hc(t,null,n)}{if(!(t instanceof Oi||t instanceof Hc))throw new We(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(hr.fromString(e,...r));return fC(n),new Hc(t.firestore,null,n)}}function ot(t,e,...r){if(t=Lr(t),arguments.length===1&&(e=Zz.newId()),PV("doc","path",e),t instanceof n8){const n=hr.fromString(e,...r);return hC(n),new Oi(t,null,new tt(n))}{if(!(t instanceof Oi||t instanceof Hc))throw new We(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(hr.fromString(e,...r));return hC(n),new Oi(t.firestore,t instanceof Hc?t.converter:null,new tt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new z7(this,"async_queue_retry"),this.Vu=()=>{const n=lv();n&&ze("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=lv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=lv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Fs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!nu(e))throw e;ze("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw In("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=q7.createAndSchedule(this,e,r,n,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&ct()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function gC(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class _o extends n8{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new pC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pC(e),this._firestoreClient=void 0,await e}}}function Bre(t,e,r){r||(r="(default)");const n=hg(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),a=n.getOptions(r);if(ah(a,e))return i;throw new We(Ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new We(Ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Tg(t){if(t._terminated)throw new We(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ure(t),t._firestoreClient}function Ure(t){var e,r,n;const i=t._freezeSettings(),a=(function(c,d,f,m){return new mee(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,MV(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jre(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new T0(Dn.fromBase64String(e))}catch(r){throw new We(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new T0(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new We(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new We(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new We(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zre=/^__.*__$/;class $re{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Pl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Yh(e,this.data,r,this.fieldTransforms)}}class DV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Pl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function LV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class xx{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LV(this.Cu)&&zre.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vre{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||mx(e)}Qu(e,r,n,i=!1){return new xx({Cu:e,methodName:r,qu:n,path:yn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eg(t){const e=t._freezeSettings(),r=mx(t._databaseId);return new Vre(t._databaseId,!!e.ignoreUndefinedProperties,r)}function s8(t,e,r,n,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);l8("Data must be an object, but it was:",s,n);const c=zV(n,s);let d,f;if(a.merge)d=new _a(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const y=cT(e,p,r);if(!s.contains(y))throw new We(Ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);VV(m,y)||m.push(y)}d=new _a(m),f=s.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,f=s.fieldTransforms;return new $re(new ki(c),d,f)}class wx extends bx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wx}}function Fre(t,e,r){return new xx({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class o8 extends bx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Fre(this,e,!0),n=this.Ku.map((a=>ef(a,r))),i=new x0(n);return new P$(e.path,i)}isEqual(e){return e instanceof o8&&ah(this.Ku,e.Ku)}}function BV(t,e,r,n){const i=t.Qu(1,e,r);l8("Data must be an object, but it was:",i,n);const a=[],s=ki.empty();L0(n,((d,f)=>{const m=c8(e,d,r);f=Lr(f);const p=i.Nu(m);if(f instanceof wx)a.push(m);else{const y=ef(f,p);y!=null&&(a.push(m),s.set(m,y))}}));const c=new _a(a);return new DV(s,c,i.fieldTransforms)}function UV(t,e,r,n,i,a){const s=t.Qu(1,e,r),c=[cT(e,n,r)],d=[i];if(a.length%2!=0)throw new We(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(cT(e,a[y])),d.push(a[y+1]);const f=[],m=ki.empty();for(let y=c.length-1;y>=0;--y)if(!VV(f,c[y])){const b=c[y];let T=d[y];T=Lr(T);const S=s.Nu(b);if(T instanceof wx)f.push(b);else{const w=ef(T,S);w!=null&&(f.push(b),m.set(b,w))}}const p=new _a(f);return new DV(m,p,s.fieldTransforms)}function qre(t,e,r,n=!1){return ef(r,t.Qu(n?4:3,e))}function ef(t,e){if($V(t=Lr(t)))return l8("Unsupported field value:",e,t),zV(t,e);if(t instanceof bx)return(function(n,i){if(!LV(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const c of n){let d=ef(c,i.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),s++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=Lr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Cee(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=vn.fromDate(n);return{timestampValue:hh(i.serializer,a)}}if(n instanceof vn){const a=new vn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:hh(i.serializer,a)}}if(n instanceof i8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof T0)return{bytesValue:V$(i.serializer,n._byteString)};if(n instanceof Oi){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:R7(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof a8)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return N7(c.serializer,d)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${vx(n)}`)})(t,e)}function zV(t,e){const r={};return u$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):L0(t,((n,i)=>{const a=ef(i,e.Mu(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function $V(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vn||t instanceof i8||t instanceof T0||t instanceof Oi||t instanceof bx||t instanceof a8)}function l8(t,e,r){if(!$V(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=vx(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function cT(t,e,r){if((e=Lr(e))instanceof Ag)return e._internalPath;if(typeof e=="string")return c8(t,e);throw Pv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Hre=new RegExp("[~\\*/\\[\\]]");function c8(t,e,r){if(e.search(Hre)>=0)throw Pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Ag(...e.split("."))._internalPath}catch{throw Pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Pv(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||s)&&(d+=" (found",a&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new We(Ne.INVALID_ARGUMENT,c+t+d)}function VV(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(_x("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Gre extends Dv{data(){return super.data()}}function _x(t,e){return typeof e=="string"?c8(t,e):e instanceof Ag?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u8{}class d8 extends u8{}function wn(t,e,...r){let n=[];e instanceof u8&&n.push(e),n=n.concat(r),(function(a){const s=a.filter((d=>d instanceof h8)).length,c=a.filter((d=>d instanceof Sx)).length;if(s>1||s>0&&c>0)throw new We(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Sx extends d8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Sx(e,r,n)}_apply(e){const r=this._parse(e);return qV(e._query,r),new Dl(e.firestore,e.converter,QS(e._query,r))}_parse(e){const r=Eg(e.firestore);return(function(a,s,c,d,f,m,p){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new We(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){vC(p,m);const b=[];for(const T of p)b.push(yC(d,a,T));y={arrayValue:{values:b}}}else y=yC(d,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||vC(p,m),y=qre(c,s,p,m==="in"||m==="not-in");return Jt.create(f,m,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Cn(t,e,r){const n=e,i=_x("where",t);return Sx._create(i,n,r)}class h8 extends u8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new h8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Nr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let s=i;const c=a.getFlattenedFilters();for(const d of c)qV(s,d),s=QS(s,d)})(e._query,r),new Dl(e.firestore,e.converter,QS(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f8 extends d8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new f8(e,r)}_apply(e){const r=(function(i,a,s){if(i.startAt!==null)throw new We(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hp(a,s)})(e._query,this._field,this._direction);return new Dl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Qh(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function um(t,e="asc"){const r=e,n=_x("orderBy",t);return f8._create(n,r)}class m8 extends d8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new m8(e,r,n)}_apply(e){return new Dl(e.firestore,e.converter,Ev(e._query,this._limit,this._limitType))}}function Bu(t){return Lre("limit",t),m8._create("limit",t,"F")}function yC(t,e,r){if(typeof(r=Lr(r))=="string"){if(r==="")throw new We(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S$(e)&&r.indexOf("/")!==-1)throw new We(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(hr.fromString(r));if(!tt.isDocumentKey(n))throw new We(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return up(t,new tt(n))}if(r instanceof Oi)return up(t,r._key);throw new We(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vx(r)}.`)}function vC(t,e){if(!Array.isArray(t)||t.length===0)throw new We(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qV(t,e){const r=(function(i,a){for(const s of i)for(const c of s.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new We(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class HV{convertValue(e,r="none"){switch(v0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ct()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return L0(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((s=>on(s.doubleValue)));return new a8(a)}convertGeoPoint(e){return new i8(on(e.latitude),on(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=T7(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(lp(e));default:return null}}convertTimestamp(e){const r=El(e);return new vn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=hr.fromString(e);pt(Z$(n));const i=new y0(n.get(1),n.get(3)),a=new tt(n.popFirst(5));return i.isEqual(r)||In(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Kre extends HV{constructor(e){super(),this.firestore=e}convertBytes(e){return new T0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Oi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class g8 extends Dv{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new cv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(_x("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class cv extends g8{data(e={}){return super.data(e)}}class GV{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Vd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new cv(this._firestore,this._userDataWriter,n.key,n,new Vd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new We(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((c=>{const d=new cv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new cv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:Wre(c.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Wre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){t=Ta(t,Oi);const e=Ta(t.firestore,_o);return Mre(Tg(e),t._key).then((r=>KV(e,t,r)))}class Tx extends HV{constructor(e){super(),this.firestore=e}convertBytes(e){return new T0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Oi(this.firestore,null,r)}}function dm(t){t=Ta(t,Dl);const e=Ta(t.firestore,_o),r=Tg(e),n=new Tx(e);return FV(t._query),Pre(r,t._query).then((i=>new GV(e,n,t,i)))}function Zi(t,e,r){t=Ta(t,Oi);const n=Ta(t.firestore,_o),i=p8(t.converter,e,r);return Ax(n,[s8(Eg(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Rn.none())])}function Ir(t,e,r,...n){t=Ta(t,Oi);const i=Ta(t.firestore,_o),a=Eg(i);let s;return s=typeof(e=Lr(e))=="string"||e instanceof Ag?UV(a,"updateDoc",t._key,e,r,n):BV(a,"updateDoc",t._key,e),Ax(i,[s.toMutation(t._key,Rn.exists(!0))])}function Da(t){return Ax(Ta(t.firestore,_o),[new xg(t._key,Rn.none())])}function Cd(t,e){const r=Ta(t.firestore,_o),n=ot(t),i=p8(t.converter,e);return Ax(r,[s8(Eg(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Rn.exists(!1))]).then((()=>n))}function Si(t,...e){var r,n,i;t=Lr(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gC(e[s])||(a=e[s],s++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(gC(e[s])){const p=e[s];e[s]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[s+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let d,f,m;if(t instanceof Oi)f=Ta(t.firestore,_o),m=vg(t._key.path),d={next:p=>{e[s]&&e[s](KV(f,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Ta(t,Dl);f=Ta(p.firestore,_o),m=p._query;const y=new Tx(f);d={next:b=>{e[s]&&e[s](new GV(f,y,p,b))},error:e[s+1],complete:e[s+2]},FV(t._query)}return(function(y,b,T,S){const w=new t8(S),k=new X7(b,w,T);return y.asyncQueue.enqueueAndForget((async()=>G7(await Mv(y),k))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>K7(await Mv(y),k)))}})(Tg(f),m,c,d)}function Ax(t,e){return(function(n,i){const a=new Fs;return n.asyncQueue.enqueueAndForget((async()=>fre(await Ire(n),i,a))),a.promise})(Tg(t),e)}function KV(t,e,r){const n=r.docs.get(e._key),i=new Tx(t);return new g8(t,i,e._key,n,new Vd(r.hasPendingWrites,r.fromCache),e.converter)}class Xre{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Jre(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Qre(t){return new Xre(t)}class Yre{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vp.provider,this._offlineComponentProvider={build:r=>new RV(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Zre{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vp.provider,this._offlineComponentProvider={build:r=>new Nre(r,e==null?void 0:e.cacheSizeBytes)}}}function Jre(t){return new Yre(void 0)}function ene(){return new Zre}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tne={maxAttempts:5};function hm(t,e){if((t=Lr(t)).firestore!==e)throw new We(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rne extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Eg(r)}get(r){const n=hm(r,this._firestore),i=new Kre(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return ct();const s=a[0];if(s.isFoundDocument())return new Dv(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Dv(this._firestore,i,n._key,null,n.converter);throw ct()}))}set(r,n,i){const a=hm(r,this._firestore),s=p8(a.converter,n,i),c=s8(this._dataReader,"Transaction.set",a._key,s,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(r,n,i,...a){const s=hm(r,this._firestore);let c;return c=typeof(n=Lr(n))=="string"||n instanceof Ag?UV(this._dataReader,"Transaction.update",s._key,n,i,a):BV(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=hm(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=hm(e,this._firestore),n=new Tx(this._firestore);return super.get(e).then((i=>new g8(this._firestore,n,r._key,i._document,new Vd(!1,!1),r.converter)))}}function Gw(t,e,r){t=Ta(t,_o);const n=Object.assign(Object.assign({},tne),r);return(function(a){if(a.maxAttempts<1)throw new We(Ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,s,c){const d=new Fs;return a.asyncQueue.enqueueAndForget((async()=>{const f=await Rre(a);new Ore(a.asyncQueue,f,c,s,d).au()})),d.promise})(Tg(t),(i=>e(new rne(t,i))),n)}function nne(...t){return new o8("arrayUnion",t)}(function(e,r=!0){(function(i){Xh=i})(D0),Wc(new Sl("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),c=new _o(new LJ(n.getProvider("auth-internal")),new $J(n.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new We(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new y0(f.options.projectId,m)})(s,i),s);return a=Object.assign({useFetchStreams:r},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),hs(uj,"4.7.3",e),hs(uj,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="firebasestorage.googleapis.com",XV="storageBucket",ine=120*1e3,ane=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Gs{constructor(e,r,n=0){super(Kw(e),`Firebase Storage: ${r} (${Kw(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var En;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(En||(En={}));function Kw(t){return"storage/"+t}function y8(){const t="An unknown error occurred, please check the error payload for server response.";return new Nn(En.UNKNOWN,t)}function sne(t){return new Nn(En.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function one(t){return new Nn(En.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lne(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nn(En.UNAUTHENTICATED,t)}function cne(){return new Nn(En.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function une(t){return new Nn(En.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dne(){return new Nn(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hne(){return new Nn(En.CANCELED,"User canceled the upload/download.")}function fne(t){return new Nn(En.INVALID_URL,"Invalid URL '"+t+"'.")}function mne(t){return new Nn(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pne(){return new Nn(En.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XV+"' property when initializing the app?")}function gne(){return new Nn(En.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yne(){return new Nn(En.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vne(t){return new Nn(En.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uT(t){return new Nn(En.INVALID_ARGUMENT,t)}function QV(){return new Nn(En.APP_DELETED,"The Firebase app was deleted.")}function bne(t){return new Nn(En.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fm(t,e){return new Nn(En.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function fm(t){throw new Nn(En.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Va.makeFromUrl(e,r)}catch{return new Va(e,"")}if(n.path==="")return n;throw mne(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+i+s,"i"),d={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${m}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},S=r===WV?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",k=new RegExp(`^https?://${S}/${i}/${w}`,"i"),C=[{regex:c,indices:d,postModify:a},{regex:b,indices:T,postModify:f},{regex:k,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<C.length;B++){const R=C[B],I=R.regex.exec(e);if(I){const A=I[R.indices.bucket];let E=I[R.indices.path];E||(E=""),n=new Va(A,E),R.postModify(n);break}}if(n==null)throw fne(e);return n}}class xne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wne(t,e,r){let n=1,i=null,a=null,s=!1,c=0;function d(){return c===2}let f=!1;function m(...w){f||(f=!0,e.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,t(b,d())},w)}function y(){a&&clearTimeout(a)}function b(w,...k){if(f){y();return}if(w){y(),m.call(null,w,...k);return}if(d()||s){y(),m.call(null,w,...k);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,p(C)}let T=!1;function S(w){T||(T=!0,y(),!f&&(i!==null?(w||(c=2),clearTimeout(i),p(0)):w||(c=1)))}return p(0),a=setTimeout(()=>{s=!0,S(!0)},r),S}function _ne(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sne(t){return t!==void 0}function Tne(t){return typeof t=="object"&&!Array.isArray(t)}function v8(t){return typeof t=="string"||t instanceof String}function bC(t){return b8()&&t instanceof Blob}function b8(){return typeof Blob<"u"}function xC(t,e,r,n){if(n<e)throw uT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw uT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function YV(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var d0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(d0||(d0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ane(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(e,r,n,i,a,s,c,d,f,m,p,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new xy(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const c=a.getErrorCode()===d0.NO_ERROR,d=a.getStatus();if(!c||Ane(d,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===d0.ABORT;n(!1,new xy(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new xy(f,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Sne(d)?a(d):a()}catch(d){s(d)}else if(c!==null){const d=y8();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(i.canceled){const d=this.appDelete_?QV():hne();s(d)}else{const d=dne();s(d)}};this.canceled_?r(!1,new xy(!1,null,!0)):this.backoffId_=wne(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_ne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xy{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Nne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function One(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Cne(t,e,r,n,i,a,s=!0){const c=YV(t.urlParams),d=t.url+c,f=Object.assign({},t.headers);return One(f,e),Nne(f,r),kne(f,a),jne(f,n),new Ene(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ine(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rne(...t){const e=Ine();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(b8())return new Blob(t);throw new Nn(En.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Mne(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pne(t){if(typeof atob>"u")throw vne("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ww{constructor(e,r){this.data=e,this.contentType=r||null}}function Dne(t,e){switch(t){case fo.RAW:return new Ww(ZV(e));case fo.BASE64:case fo.BASE64URL:return new Ww(JV(t,e));case fo.DATA_URL:return new Ww(Bne(e),Une(e))}throw y8()}function ZV(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Lne(t){let e;try{e=decodeURIComponent(t)}catch{throw Fm(fo.DATA_URL,"Malformed data URL.")}return ZV(e)}function JV(t,e){switch(t){case fo.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Fm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fo.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Fm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Pne(e)}catch(i){throw i.message.includes("polyfill")?i:Fm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class eF{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Fm(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=zne(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Bne(t){const e=new eF(t);return e.base64?JV(fo.BASE64,e.rest):Lne(e.rest)}function Une(t){return new eF(t).contentType}function zne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,r){let n=0,i="";bC(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(bC(this.data_)){const n=this.data_,i=Mne(n,e,r);return i===null?null:new Cc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Cc(n,!0)}}static getBlob(...e){if(b8()){const r=e.map(n=>n instanceof Cc?n.data_:n);return new Cc(Rne.apply(null,r))}else{const r=e.map(s=>v8(s)?Dne(fo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)i[a++]=s[c]}),new Cc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){let e;try{e=JSON.parse(t)}catch{return null}return Tne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Vne(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function rF(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fne(t,e){return e}class Xi{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||Fne}}let wy=null;function qne(t){return!v8(t)||t.length<2?t:rF(t)}function nF(){if(wy)return wy;const t=[];t.push(new Xi("bucket")),t.push(new Xi("generation")),t.push(new Xi("metageneration")),t.push(new Xi("name","fullPath",!0));function e(a,s){return qne(s)}const r=new Xi("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new Xi("size");return i.xform=n,t.push(i),t.push(new Xi("timeCreated")),t.push(new Xi("updated")),t.push(new Xi("md5Hash",null,!0)),t.push(new Xi("cacheControl",null,!0)),t.push(new Xi("contentDisposition",null,!0)),t.push(new Xi("contentEncoding",null,!0)),t.push(new Xi("contentLanguage",null,!0)),t.push(new Xi("contentType",null,!0)),t.push(new Xi("metadata","customMetadata",!0)),wy=t,wy}function Hne(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new Va(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function Gne(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return Hne(n,t),n}function iF(t,e,r){const n=tF(e);return n===null?null:Gne(t,n,r)}function Kne(t,e,r,n){const i=tF(e);if(i===null||!v8(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const m=t.bucket,p=t.fullPath,y="/b/"+s(m)+"/o/"+s(p),b=Ex(y,r,n),T=YV({alt:"media",token:f});return b+T})[0]}function Wne(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class x8{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t){if(!t)throw y8()}function Xne(t,e){function r(n,i){const a=iF(t,i,e);return aF(a!==null),a}return r}function Qne(t,e){function r(n,i){const a=iF(t,i,e);return aF(a!==null),Kne(a,i,t.host,t._protocol)}return r}function sF(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=cne():i=lne():r.getStatus()===402?i=one(t.bucket):r.getStatus()===403?i=une(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function oF(t){const e=sF(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=sne(t.path)),a.serverResponse=i.serverResponse,a}return r}function Yne(t,e,r){const n=e.fullServerUrl(),i=Ex(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,c=new x8(i,a,Qne(t,r),s);return c.errorHandler=oF(e),c}function Zne(t,e){const r=e.fullServerUrl(),n=Ex(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function s(d,f){}const c=new x8(n,i,s,a);return c.successCodes=[200,204],c.errorHandler=oF(e),c}function Jne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eie(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Jne(null,e)),n}function tie(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let B=0;B<2;B++)C=C+Math.random().toString().slice(2);return C}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const f=eie(e,n,i),m=Wne(f,r),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+d+"--",b=Cc.getBlob(p,n,y);if(b===null)throw gne();const T={name:f.fullPath},S=Ex(a,t.host,t._protocol),w="POST",k=t.maxUploadRetryTime,M=new x8(S,w,Xne(t,r),k);return M.urlParams=T,M.headers=s,M.body=b.uploadData(),M.errorHandler=sF(e),M}class rie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=d0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=d0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=d0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw fm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nie extends rie{initXhr(){this.xhr_.responseType="text"}}function w8(){return new nie}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,r){this._service=e,r instanceof Va?this._location=r:this._location=Va.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new A0(e,r)}get root(){const e=new Va(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rF(this._location.path)}get storage(){return this._service}get parent(){const e=$ne(this._location.path);if(e===null)return null;const r=new Va(this._location.bucket,e);return new A0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw bne(e)}}function iie(t,e,r){t._throwIfRoot("uploadBytes");const n=tie(t.storage,t._location,nF(),new Cc(e,!0),r);return t.storage.makeRequestWithTokens(n,w8).then(i=>({metadata:i,ref:t}))}function aie(t){t._throwIfRoot("getDownloadURL");const e=Yne(t.storage,t._location,nF());return t.storage.makeRequestWithTokens(e,w8).then(r=>{if(r===null)throw yne();return r})}function sie(t){t._throwIfRoot("deleteObject");const e=Zne(t.storage,t._location);return t.storage.makeRequestWithTokens(e,w8)}function oie(t,e){const r=Vne(t._location.path,e),n=new Va(t._location.bucket,r);return new A0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(t){return/^[A-Za-z]+:\/\//.test(t)}function cie(t,e){return new A0(t,e)}function lF(t,e){if(t instanceof _8){const r=t;if(r._bucket==null)throw pne();const n=new A0(r,r._bucket);return e!=null?lF(n,e):n}else return e!==void 0?oie(t,e):t}function uie(t,e){if(e&&lie(e)){if(t instanceof _8)return cie(t,e);throw uT("To use ref(service, url), the first argument must be a Storage instance.")}else return lF(t,e)}function wC(t,e){const r=e==null?void 0:e[XV];return r==null?null:Va.makeFromBucketSpec(r,t)}function die(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:hQ(i,t.app.options.projectId))}class _8{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=WV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ine,this._maxUploadRetryTime=ane,this._requests=new Set,i!=null?this._bucket=Va.makeFromBucketSpec(i,this._host):this._bucket=wC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Va.makeFromBucketSpec(this._url,e):this._bucket=wC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new A0(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new xne(QV());{const s=Cne(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const _C="@firebase/storage",SC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="storage";function dT(t,e,r){return t=Lr(t),iie(t,e,r)}function Lv(t){return t=Lr(t),aie(t)}function hie(t){return t=Lr(t),sie(t)}function qm(t,e){return t=Lr(t),uie(t,e)}function fie(t=o7(),e){t=Lr(t);const n=hg(t,cF).getImmediate({identifier:e}),i=iz("storage");return i&&mie(n,...i),n}function mie(t,e,r,n={}){die(t,e,r,n)}function pie(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _8(r,n,i,e,D0)}function gie(){Wc(new Sl(cF,pie,"PUBLIC").setMultipleInstances(!0)),hs(_C,SC,""),hs(_C,SC,"esm2017")}gie();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yie="type.googleapis.com/google.protobuf.Int64Value",vie="type.googleapis.com/google.protobuf.UInt64Value";function uF(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function hT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>hT(e));if(typeof t=="function"||typeof t=="object")return uF(t,e=>hT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case yie:case vie:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bv(e)):typeof t=="function"||typeof t=="object"?uF(t,e=>Bv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yd extends Gs{constructor(e,r,n){super(`${S8}/${e}`,r||""),this.details=n}}function bie(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function xie(t,e){let r=bie(t),n=r,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!TC[s])return new Yd("internal","internal");r=TC[s],n=s}const c=a.message;typeof c=="string"&&(n=c),i=a.details,i!==void 0&&(i=Bv(i))}}catch{}return r==="ok"?null:new Yd(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="us-central1";function _ie(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Yd("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Sie{constructor(e,r,n,i,a=fT,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new wie(r,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=fT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Tie(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Aie(t,e,r){return(n=>Nie(t,e,n,{}))}async function Eie(t,e,r,n){r["Content-Type"]="application/json";let i;try{i=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function Nie(t,e,r,n){const i=t._url(e);return kie(t,i,r,n)}async function kie(t,e,r,n){r=hT(r);const i={data:r},a={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=_ie(c),f=await Promise.race([Eie(e,i,a,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new Yd("cancelled","Firebase Functions instance was deleted.");const m=xie(f.status,f.json);if(m)throw m;if(!f.json)throw new Yd("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new Yd("internal","Response is missing data field.");return{data:Bv(p)}}const AC="@firebase/functions",EC="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie="auth-internal",jie="app-check-internal",Cie="messaging-internal";function Iie(t,e){const r=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),s=n.getProvider(Oie),c=n.getProvider(Cie),d=n.getProvider(jie);return new Sie(a,s,c,d,i,t)};Wc(new Sl(S8,r,"PUBLIC").setMultipleInstances(!0)),hs(AC,EC,e),hs(AC,EC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rie(t=o7(),e=fT){const n=hg(Lr(t),S8).getImmediate({identifier:e}),i=iz("functions");return i&&Mie(n,...i),n}function Mie(t,e,r){Tie(Lr(t),e,r)}function Vr(t,e,r){return Aie(Lr(t),e)}Iie(fetch.bind(self));const dF={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Pie=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Pie)if(!dF[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const Nx=dz(dF),mT=Hz(Nx),Die=new sl,Be=Bre(Nx,{localCache:Qre({tabManager:ene()})}),Hm=fie(Nx),Fr=Rie(Nx),Lie=Vr(Fr,"awardXP"),Bie=Vr(Fr,"acceptQuest"),Uie=Vr(Fr,"deployMission"),zie=Vr(Fr,"resolveQuest"),$ie=Vr(Fr,"equipItem"),Vie=Vr(Fr,"disenchantItem"),Fie=Vr(Fr,"craftItem"),qie=Vr(Fr,"adminUpdateInventory"),Hie=Vr(Fr,"adminUpdateEquipped"),Gie=Vr(Fr,"submitEngagement"),Kie=Vr(Fr,"sendClassMessage");Vr(Fr,"uploadQuestionBank");const hF=Vr(Fr,"awardQuestionXP"),Wie=Vr(Fr,"updateStreak"),Xie=Vr(Fr,"claimDailyLogin"),Qie=Vr(Fr,"spinFortuneWheel"),Yie=Vr(Fr,"unlockSkill"),Zie=Vr(Fr,"addSocket"),Jie=Vr(Fr,"socketGem"),eae=Vr(Fr,"dealBossDamage"),tae=Vr(Fr,"answerBossQuiz"),rae=Vr(Fr,"createParty"),nae=Vr(Fr,"joinParty"),iae=Vr(Fr,"completeTutoring"),aae=Vr(Fr,"claimKnowledgeLoot"),sae=Vr(Fr,"purchaseCosmetic"),oae=Vr(Fr,"claimDailyChallenge"),Uv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fF=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...c},d)=>F.createElement("svg",{ref:d,...cae,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:fF("lucide",i),...c},[...s.map(([f,m])=>F.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const r=F.forwardRef(({className:n,...i},a)=>F.createElement(uae,{ref:a,iconNode:e,className:fF(`lucide-${lae(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=De("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=De("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=De("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=De("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=De("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=De("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=De("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=De("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=De("Component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=De("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=De("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=De("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=De("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=De("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=De("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=De("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=De("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=De("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=De("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=De("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=De("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=De("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=De("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=De("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=De("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=De("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=De("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=De("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=De("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=De("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=De("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=De("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=De("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=De("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=De("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=De("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=De("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=De("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=De("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=De("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=De("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=De("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=De("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=De("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=De("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=De("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=De("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=De("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=De("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=De("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=De("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ese="kellporter2@paps.net",TF="Mr. Porter",tse=[{name:"Dashboard",icon:u.jsx(jae,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:u.jsx(jx,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:u.jsx(Zc,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:u.jsx(So,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:u.jsx(N8,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:u.jsx(Zd,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:u.jsx(So,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:u.jsx(E0,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:u.jsx(Eae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:u.jsx(xae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:u.jsx(vh,{className:"w-5 h-5"}),role:"STUDENT"}],LC=new Set,Jo=(t,e,r)=>LC.has(t)?()=>{}:Si(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&LC.add(t)}),Fe={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Jo("xp_events",ar(Be,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Zi(ot(Be,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Da(ot(Be,"xp_events",t))},subscribeToQuests:t=>Jo("quests",ar(Be,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Zi(ot(Be,"quests",t.id),t)},deleteQuest:async t=>{await Da(ot(Be,"quests",t))},acceptQuest:async(t,e)=>{await Bie({questId:e})},deployMission:async(t,e)=>{await Uie({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await zie({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Fe.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await $ie({itemId:e.id,classType:r})},disenchantItem:async(t,e,r)=>{await Vie({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Fie({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r)=>{await qie({userId:t,inventory:e,currency:r})},adminUpdateEquipped:async(t,e)=>{await Hie({userId:t,equipped:e})},updateUserAppearance:async(t,e,r)=>{try{const n=ot(Be,"users",t);r?await Ir(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await Ir(n,{"gamification.appearance":e})}catch(n){console.error("Error updating appearance:",n)}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const i=new Date(t.mutedUntil);if(i>new Date)throw new Error(`You are muted until ${i.toLocaleTimeString()}.`)}await Kie({content:e,channelId:r,classType:n})}catch(i){throw console.error("Error sending message:",i),i}},toggleReaction:async(t,e,r)=>{const n=ot(Be,"class_messages",t);await Gw(Be,async i=>{const a=await i.get(n);if(!a.exists())return;const c={...a.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(f=>{c[f]=(c[f]||[]).filter(m=>m!==r),c[f].length===0&&delete c[f]}),d||(c[e]||(c[e]=[]),c[e].push(r)),i.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ot(Be,"class_messages",t);await Gw(Be,async n=>{const i=await n.get(r);if(!i.exists())return;const s=[...i.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=ot(Be,"class_messages",t);await Ir(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Da(ot(Be,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=wn(ar(Be,"class_messages"),Cn("isFlagged","==",!0),Bu(50));return Si(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ot(Be,"class_messages",t);await Ir(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Fe.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await Ir(ot(Be,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},subscribeToChannelMessages:(t,e)=>{const r=wn(ar(Be,"class_messages"),Cn("channelId","==",t),Bu(100));return Si(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime()),e(i)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:t=>{const e=wn(ar(Be,"conversations"),um("lastMessageAt","desc"));return Si(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=wn(ar(Be,`conversations/${t}/messages`),um("timestamp","asc"));return Si(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Ui.ADMIN?TF:e.name,content:r,timestamp:new Date().toISOString()};await Cd(ar(Be,`conversations/${t}/messages`),n),await Ir(ot(Be,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await Ir(ot(Be,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=wn(ar(Be,"chat_flags"),Cn("isResolved","==",!1));return Si(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await Ir(ot(Be,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=wn(ar(Be,"chat_flags"),Cn("messageId","==",t),Cn("isResolved","==",!1)),n=(await dm(e)).docs.map(i=>Ir(i.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=wn(ar(Be,"evidence"),Cn("studentId","==",t),Cn("weekId","==",e));return Si(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));r(a)},i=>console.error("Evidence subscription error:",i))},uploadEvidence:async t=>{await Zi(ot(Be,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const i=qm(Hm,n.imageUrl);return hie(i).catch(a=>console.warn("File missing:",a))});await Promise.all(e);const r=t.map(n=>Da(ot(Be,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Zi(ot(Be,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ot(Be,"users",t);await Ir(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await Ir(ot(Be,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await Ir(ot(Be,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=ar(Be,"users");return Si(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,...a}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=ar(Be,"assignments");return Si(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,title:a.title,description:a.description,classType:a.classType,status:a.status,unit:a.unit||"Unassigned Unit",category:a.category||"Supplemental",htmlContent:a.htmlContent,contentUrl:a.contentUrl,resources:a.resources||[],publicComments:(a.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:a.dueDate}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=wn(ar(Be,"submissions"),um("submittedAt","desc"),Bu(200));return Si(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId,userName:a.userName,assignmentId:a.assignmentId,assignmentTitle:a.assignmentTitle,metrics:a.metrics||Uv(),submittedAt:a.submittedAt,status:a.status,score:a.score,hasUnreadAdmin:a.hasUnreadAdmin||!1,hasUnreadStudent:a.hasUnreadStudent||!1,isPinned:a.isPinned||!1,isArchived:a.isArchived||!1,privateComments:(a.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=wn(ar(Be,"submissions"),Cn("userId","==",t),Bu(50));return Si(r,n=>{const i=n.docs.map(a=>{const s=a.data();return{id:a.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Uv(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((a,s)=>new Date(s.submittedAt||"").getTime()-new Date(a.submittedAt||"").getTime());e(i)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=ar(Be,"allowed_emails");return Si(e,r=>{const n=r.docs.map(i=>({email:i.id,classType:i.data().classType,classTypes:i.data().classTypes||[i.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=ar(Be,"class_configs");return Si(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null};t.id?await Zi(ot(Be,"assignments",t.id),e,{merge:!0}):await Cd(ar(Be,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await Ir(ot(Be,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Da(ot(Be,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ot(Be,"allowed_emails",t),n=await ea(r),i=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],a=Array.from(new Set([...i,e]));await Zi(r,{classType:e,classTypes:a});const s=wn(ar(Be,"users"),Cn("email","==",t)),c=await dm(s);await Promise.all(c.docs.map(async d=>{const f=d.data(),m=f.enrolledClasses||(f.classType?[f.classType]:[]),p=Array.from(new Set([...m,e]));await Ir(ot(Be,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:p})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await Ir(ot(Be,"allowed_emails",t),{section:e});const r=wn(ar(Be,"users"),Cn("email","==",t)),n=await dm(r);await Promise.all(n.docs.map(async i=>{await Ir(ot(Be,"users",i.id),{section:e})}))}catch(r){console.error(r)}},removeFromWhitelist:async t=>{try{await Da(ot(Be,"allowed_emails",t));const e=wn(ar(Be,"users"),Cn("email","==",t)),r=await dm(e);await Promise.all(r.docs.map(async n=>{await Ir(ot(Be,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ot(Be,"users",t),n=await ea(r);if(n.exists()){const i=n.data(),a=i.enrolledClasses||(i.classType?[i.classType]:[]),s=Array.from(new Set([...a,e]));await Ir(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=i.email;if(c){const d=await ea(ot(Be,"allowed_emails",c)),f=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],m=Array.from(new Set([...f,e]));await Zi(ot(Be,"allowed_emails",c),{classType:e,classTypes:m})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await ea(ot(Be,"users",t));if(e.exists()){const r=e.data().email;await Da(ot(Be,"allowed_emails",r))}await Da(ot(Be,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Zi(ot(Be,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ot(Be,"users",t),n=await ea(r);if(!n.exists())return;const a=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,a&&await Da(ot(Be,"allowed_emails",a))):(s.isWhitelisted=!0,a&&await Zi(ot(Be,"allowed_emails",a),{classType:e[0],classTypes:e})),await Ir(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ot(Be,"users",t),n=await ea(r);if(n.exists()){const i=n.data().enrolledClasses||[],a=Array.from(new Set([...i,e]));await Ir(r,{classType:e,enrolledClasses:a,isWhitelisted:!0});const s=n.data().email;s&&await Zi(ot(Be,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await Ir(ot(Be,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Lie({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,i,a)=>(await Gie({assignmentId:r,assignmentTitle:n,userName:e,metrics:i,classType:a})).data,subscribeToLeaderboard:t=>{const e=wn(ar(Be,"users"),Cn("role","==","STUDENT"));return Si(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Zi(ot(Be,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Da(ot(Be,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=qm(Hm,`resources/${e}_${t.name}`);return await dT(r,t),await Lv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=qm(Hm,`resources/html/${e}_${t.name}`);return await dT(r,t),await Lv(r)},subscribeToAnnouncements:t=>{const e=wn(ar(Be,"announcements"),um("createdAt","desc"),Bu(20));return Jo("announcements",e,r=>{const n=new Date,i=r.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||new Date(a.expiresAt)>n);t(i)})},createAnnouncement:async t=>{await Cd(ar(Be,"announcements"),t)},deleteAnnouncement:async t=>{await Da(ot(Be,"announcements",t))},dismissAnnouncement:async(t,e)=>{await Ir(ot(Be,"users",t),{"gamification.dismissedAnnouncements":nne(e)})},subscribeToNotifications:(t,e)=>{const r=wn(ar(Be,"notifications"),Cn("userId","==",t),um("timestamp","desc"),Bu(50));return Si(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await Ir(ot(Be,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=wn(ar(Be,"notifications"),Cn("userId","==",t),Cn("isRead","==",!1)),n=(await dm(e)).docs.map(i=>Ir(i.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Cd(ar(Be,"notifications"),t)},notifyUsers:async(t,e,r,n,i)=>{const a=t.map(s=>Cd(ar(Be,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:i||{}}));await Promise.all(a)},updateCodename:async(t,e)=>{await Ir(ot(Be,"users",t),{"gamification.codename":e})},updateEngagementStreak:async()=>(await Wie({})).data,claimDailyLogin:async()=>(await Xie({})).data,spinFortuneWheel:async t=>(await Qie({classType:t})).data,unlockSkill:async(t,e,r)=>(await Yie({skillId:t,specialization:e,cost:r})).data,addSocket:async(t,e)=>(await Zie({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Jie({itemId:t,gemId:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=wn(ar(Be,"boss_encounters"),Cn("isActive","==",!0));return Jo("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},dealBossDamage:async(t,e,r)=>(await eae({bossId:t,damage:e,userName:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=wn(ar(Be,"boss_quizzes"),Cn("isActive","==",!0));return Jo("boss_quizzes",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.classType===t||a.classType==="GLOBAL");e(i)})},answerBossQuiz:async(t,e,r)=>(await tae({quizId:t,questionId:e,answer:r})).data,createParty:async(t,e)=>(await rae({questId:t,userName:e})).data,joinParty:async(t,e)=>(await nae({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Si(ot(Be,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Cd(ar(Be,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await Ir(ot(Be,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},subscribeToTutoringSessions:(t,e)=>{const r=wn(ar(Be,"tutoring_sessions"),Cn("classType","==",t),Bu(50));return Jo("tutoring_sessions",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()),e(i)})},completeTutoring:async(t,e)=>(await iae({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=wn(ar(Be,"knowledge_gates"),Cn("isActive","==",!0));return Jo("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await aae({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=wn(ar(Be,"seasonal_cosmetics"),Cn("isAvailable","==",!0));return Jo("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await sae({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await Ir(ot(Be,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=wn(ar(Be,"daily_challenges"),Cn("date","==",e));return Jo("daily_challenges",r,n=>{t(n.docs.map(i=>({id:i.id,...i.data()})))})},claimDailyChallenge:async(t,e)=>(await oae({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const i=ot(Be,"users",t);await Gw(Be,async a=>{var f;const s=await a.get(i);if(!s.exists())return;const c=((f=s.data().gamification)==null?void 0:f.activeDailyChallenges)||[];if(c.find(m=>m.challengeId===e)){const m=c.map(p=>p.challengeId===e?{...p,progress:r,completed:n}:p);a.update(i,{"gamification.activeDailyChallenges":m})}else a.update(i,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await ea(ot(Be,"users",t));return e.exists()?{id:e.id,...e.data()}:null}},AF=F.createContext(null),qi=()=>{const t=F.useContext(AF);if(!t)throw new Error("useToast must be used within ToastProvider");return t},rse={success:u.jsx(An,{className:"w-5 h-5 text-green-400 shrink-0"}),error:u.jsx(gs,{className:"w-5 h-5 text-red-400 shrink-0"}),info:u.jsx(pF,{className:"w-5 h-5 text-blue-400 shrink-0"})},nse={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},ise=({children:t})=>{const[e,r]=F.useState([]),n=F.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(f=>[...f,{id:d,message:s,type:c}]),setTimeout(()=>{r(f=>f.filter(m=>m.id!==d))},4e3)},[]),i=F.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),a={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return u.jsxs(AF.Provider,{value:a,children:[t,u.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>u.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${nse[s.type]}`,children:[rse[s.type],u.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),u.jsx("button",{onClick:()=>i(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:u.jsx(ys,{className:"w-4 h-4"})})]},s.id))})]})},ase=()=>{const[t,e]=F.useState(navigator.onLine),[r,n]=F.useState(!1);return F.useEffect(()=>{const i=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{e(!1),n(!1)};return window.addEventListener("online",i),window.addEventListener("offline",a),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}},[]),t&&!r?null:u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?u.jsxs(u.Fragment,{children:[u.jsx(Jae,{className:"w-4 h-4"}),"Connection restored"]}):u.jsxs(u.Fragment,{children:[u.jsx(Zae,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})},Ha=({isOpen:t,onClose:e,title:r,children:n,maxWidth:i="max-w-md"})=>(F.useEffect(()=>{const a=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),t?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${i} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[u.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:u.jsx(ys,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),sse=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[i,a]=ne.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=ne.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,f]=ne.useState(!1),m=qi(),p=S=>{a(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;f(!0);try{await n(i),s!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Fe.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),m.error("Failed to save settings.")}finally{f(!1)}},b=({icon:S,title:w,description:k,value:M,onToggle:C})=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${M?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:u.jsx(S,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-white text-sm",children:w}),u.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:k})]})]}),u.jsx("button",{onClick:C,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${M?"bg-purple-600":"bg-white/20"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${M?"translate-x-6":"translate-x-1"}`})})]});return u.jsx(Ha,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:Bae,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:i.liveBackground,onToggle:()=>p("liveBackground")}),u.jsx(b,{icon:vae,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:i.performanceMode,onToggle:()=>p("performanceMode")})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:fs,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:i.privacyMode,onToggle:()=>p("privacyMode")}),i.privacyMode&&u.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),u.jsx("input",{type:"text",value:s,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:zae,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:i.compactView,onToggle:()=>p("compactView")}),u.jsx(b,{icon:Yae,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:i.soundEffects!==!1,onToggle:()=>a(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),u.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?u.jsx(Fa,{className:"w-5 h-5 animate-spin"}):u.jsx(xF,{className:"w-5 h-5"}),"Apply Changes"]})]})})},ose=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:i})=>{var T,S;const[a,s]=F.useState(""),[c,d]=F.useState(!1),[f,m]=F.useState(!1),p=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};F.useEffect(()=>{if(!p.liveBackground){s("");return}(async()=>{try{const k=qm(Hm,"public/background.mp4"),M=await Lv(k);s(M)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[p.liveBackground]);const y=async w=>{await Fe.updateUserSettings(t.id,w)},b=()=>{const w=tse.filter(k=>!(k.role==="ADMIN"&&t.role!==Ui.ADMIN||k.role==="STUDENT"&&t.role!==Ui.STUDENT));return u.jsx(u.Fragment,{children:w.map(k=>u.jsxs("button",{onClick:()=>{n(k.name),m(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${p.compactView?"py-2.5":"py-3"} ${r===k.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[u.jsx("span",{className:`${r===k.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:k.icon}),u.jsx("span",{className:"font-medium text-sm",children:k.name})]},k.name))})};return u.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${p.performanceMode?"perf-mode":""}`,children:[u.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),p.liveBackground&&a&&u.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:u.jsx("source",{src:a,type:"video/mp4"})},a)}),u.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${p.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${p.performanceMode?"":"backdrop-blur-[3px]"}`}),u.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:u.jsx(vh,{className:"w-5 h-5 text-white"})}),u.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),u.jsx("button",{onClick:()=>m(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:u.jsx(Rae,{className:"w-6 h-6"})})]}),f&&u.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[u.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>m(!1)}),u.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-white",children:p.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),u.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-white",children:u.jsx(ys,{className:"w-6 h-6"})})]}),u.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:u.jsx(b,{})}),u.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[u.jsxs("button",{onClick:()=>{d(!0),m(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[u.jsx(_p,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Settings"})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[u.jsx(jC,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),u.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${p.compactView?"w-60":"w-72"}`,children:u.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${p.performanceMode?"":"backdrop-blur-2xl"}`,children:[u.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[u.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:u.jsx(vh,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),u.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Ui.ADMIN?"Admin System":"Operative Terminal"})]})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:u.jsx(b,{})}),u.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold truncate text-white",children:p.privacyMode?((S=t.gamification)==null?void 0:S.codename)||"Agent":t.name}),u.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),u.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:u.jsx(_p,{className:"w-4 h-4"})})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[u.jsx(jC,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),u.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${p.performanceMode?"no-anim":"animate-slide-up"}`,children:u.jsx("div",{className:"max-w-7xl mx-auto h-full",children:i})}),u.jsx(sse,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class va{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new va(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Ga{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Ga(r,va.range(this,e))}}class Ge{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;i=s.start,a=s.end,i===c.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var d=c.slice(i,a).replace(/[^]/g,"$&"),f;i>15?f=""+c.slice(i-15,i):f=c.slice(0,i);var m;a+15<c.length?m=c.slice(a,a+15)+"":m=c.slice(a),n+=f+d+m}var p=new Error(n);return p.name="ParseError",p.__proto__=Ge.prototype,p.position=i,i!=null&&a!=null&&(p.length=a-i),p.rawMessage=e,p}}Ge.prototype.__proto__=Error.prototype;var lse=function(e,r){return e===void 0?r:e},cse=/([A-Z])/g,use=function(e){return e.replace(cse,"-$1").toLowerCase()},dse={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},hse=/[&><"']/g;function fse(t){return String(t).replace(hse,e=>dse[e])}var EF=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},mse=function(e){var r=EF(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},pse=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},gse=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},mr={deflt:lse,escape:fse,hyphenate:use,getBaseElem:EF,isCharacterBox:mse,protocolFromUrl:gse},dv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function yse(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class O8{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in dv)if(dv.hasOwnProperty(r)){var n=dv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:yse(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new Ge("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=mr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Sc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return co[vse[this.id]]}sub(){return co[bse[this.id]]}fracNum(){return co[xse[this.id]]}fracDen(){return co[wse[this.id]]}cramp(){return co[_se[this.id]]}text(){return co[Sse[this.id]]}isTight(){return this.size>=2}}var j8=0,Vv=1,Jd=2,yl=3,Tp=4,us=5,bh=6,ta=7,co=[new Sc(j8,0,!1),new Sc(Vv,0,!0),new Sc(Jd,1,!1),new Sc(yl,1,!0),new Sc(Tp,2,!1),new Sc(us,2,!0),new Sc(bh,3,!1),new Sc(ta,3,!0)],vse=[Tp,us,Tp,us,bh,ta,bh,ta],bse=[us,us,us,us,ta,ta,ta,ta],xse=[Jd,yl,Tp,us,bh,ta,bh,ta],wse=[yl,yl,us,us,ta,ta,ta,ta],_se=[Vv,Vv,yl,yl,us,us,ta,ta],Sse=[j8,Vv,Jd,yl,Jd,yl,Jd,yl],_t={DISPLAY:co[j8],TEXT:co[Jd],SCRIPT:co[Tp],SCRIPTSCRIPT:co[bh]},bT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Tse(t){for(var e=0;e<bT.length;e++)for(var r=bT[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}var hv=[];bT.forEach(t=>t.blocks.forEach(e=>hv.push(...e)));function NF(t){for(var e=0;e<hv.length;e+=2)if(t>=hv[e]&&t<=hv[e+1])return!0;return!1}var Id=80,Ase=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Ese=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Nse=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},kse=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Ose=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},jse=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Cse=function(e,r,n){var i=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},Ise=function(e,r,n){r=1e3*r;var i="";switch(e){case"sqrtMain":i=Ase(r,Id);break;case"sqrtSize1":i=Ese(r,Id);break;case"sqrtSize2":i=Nse(r,Id);break;case"sqrtSize3":i=kse(r,Id);break;case"sqrtSize4":i=Ose(r,Id);break;case"sqrtTall":i=Cse(r,Id,n)}return i},Rse=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},BC={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Mse=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ng{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var mo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Sy={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},UC={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Pse(t,e){mo[t]=e}function C8(t,e,r){if(!mo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=mo[e][n];if(!i&&t[0]in UC&&(n=UC[t[0]].charCodeAt(0),i=mo[e][n]),!i&&r==="text"&&NF(n)&&(i=mo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Zw={};function Dse(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Zw[e]){var r=Zw[e]={cssEmPerMu:Sy.quad[e]/18};for(var n in Sy)Sy.hasOwnProperty(n)&&(r[n]=Sy[n][e])}return Zw[e]}var Lse=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],zC=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],$C=function(e,r){return r.size<2?e:Lse[e-1][r.size-1]};class al{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||al.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=zC[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new al(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:$C(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:zC[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=$C(al.BASESIZE,e);return this.size===r&&this.textSize===al.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==al.BASESIZE?["sizing","reset-size"+this.size,"size"+al.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Dse(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}al.BASESIZE=6;var xT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Bse={ex:!0,em:!0,mu:!0},kF=function(e){return typeof e!="string"&&(e=e.unit),e in xT||e in Bse||e==="ex"},gn=function(e,r){var n;if(e.unit in xT)n=xT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new Ge("Invalid unit: '"+e.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},Je=function(e){return+e.toFixed(4)+"em"},Jc=function(e){return e.filter(r=>r).join(" ")},OF=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},jF=function(e){var r=document.createElement(e);r.className=Jc(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},Use=/[\s"'>/=\x00-\x1f]/,CF=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+mr.escape(Jc(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=mr.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+mr.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(Use.test(a))throw new Ge("Invalid attribute name '"+a+"'");r+=" "+a+'="'+mr.escape(this.attributes[a])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class kg{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,OF.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return jF.call(this,"span")}toMarkup(){return CF.call(this,"span")}}class I8{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,OF.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return jF.call(this,"a")}toMarkup(){return CF.call(this,"a")}}class zse{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+mr.escape(this.src)+'"'+(' alt="'+mr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=mr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+mr.escape(r)+'"'),e+="'/>",e}}var $se={:"",:"",:"",:""};class vs{constructor(e,r,n,i,a,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var f=Tse(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[]/.test(this.text)&&(this.text=$se[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=Je(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Jc(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=mr.escape(Jc(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=mr.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+mr.escape(n)+'"');var a=mr.escape(this.text);return e?(r+=">",r+=a,r+="</span>",r):a}}class kl{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+mr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class eu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",BC[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+mr.escape(this.alternate)+'"/>':'<path d="'+mr.escape(BC[this.pathName])+'"/>'}}class wT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+mr.escape(this.attributes[r])+'"');return e+="/>",e}}function VC(t){if(t instanceof vs)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Vse(t){if(t instanceof kg)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Fse={bin:1,close:1,inner:1,open:1,punct:1,rel:1},qse={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Zr={math:{},text:{}};function N(t,e,r,n,i,a){Zr[t][i]={font:e,group:r,replace:n},a&&n&&(Zr[t][n]=Zr[t][i])}var D="math",Ue="text",q="main",te="ams",un="accent-token",st="bin",aa="close",tf="inner",wt="mathord",Qn="op-token",Xa="open",Cx="punct",re="rel",Ll="spacing",he="textord";N(D,q,re,"","\\equiv",!0);N(D,q,re,"","\\prec",!0);N(D,q,re,"","\\succ",!0);N(D,q,re,"","\\sim",!0);N(D,q,re,"","\\perp");N(D,q,re,"","\\preceq",!0);N(D,q,re,"","\\succeq",!0);N(D,q,re,"","\\simeq",!0);N(D,q,re,"","\\mid",!0);N(D,q,re,"","\\ll",!0);N(D,q,re,"","\\gg",!0);N(D,q,re,"","\\asymp",!0);N(D,q,re,"","\\parallel");N(D,q,re,"","\\bowtie",!0);N(D,q,re,"","\\smile",!0);N(D,q,re,"","\\sqsubseteq",!0);N(D,q,re,"","\\sqsupseteq",!0);N(D,q,re,"","\\doteq",!0);N(D,q,re,"","\\frown",!0);N(D,q,re,"","\\ni",!0);N(D,q,re,"","\\propto",!0);N(D,q,re,"","\\vdash",!0);N(D,q,re,"","\\dashv",!0);N(D,q,re,"","\\owns");N(D,q,Cx,".","\\ldotp");N(D,q,Cx,"","\\cdotp");N(D,q,he,"#","\\#");N(Ue,q,he,"#","\\#");N(D,q,he,"&","\\&");N(Ue,q,he,"&","\\&");N(D,q,he,"","\\aleph",!0);N(D,q,he,"","\\forall",!0);N(D,q,he,"","\\hbar",!0);N(D,q,he,"","\\exists",!0);N(D,q,he,"","\\nabla",!0);N(D,q,he,"","\\flat",!0);N(D,q,he,"","\\ell",!0);N(D,q,he,"","\\natural",!0);N(D,q,he,"","\\clubsuit",!0);N(D,q,he,"","\\wp",!0);N(D,q,he,"","\\sharp",!0);N(D,q,he,"","\\diamondsuit",!0);N(D,q,he,"","\\Re",!0);N(D,q,he,"","\\heartsuit",!0);N(D,q,he,"","\\Im",!0);N(D,q,he,"","\\spadesuit",!0);N(D,q,he,"","\\S",!0);N(Ue,q,he,"","\\S");N(D,q,he,"","\\P",!0);N(Ue,q,he,"","\\P");N(D,q,he,"","\\dag");N(Ue,q,he,"","\\dag");N(Ue,q,he,"","\\textdagger");N(D,q,he,"","\\ddag");N(Ue,q,he,"","\\ddag");N(Ue,q,he,"","\\textdaggerdbl");N(D,q,aa,"","\\rmoustache",!0);N(D,q,Xa,"","\\lmoustache",!0);N(D,q,aa,"","\\rgroup",!0);N(D,q,Xa,"","\\lgroup",!0);N(D,q,st,"","\\mp",!0);N(D,q,st,"","\\ominus",!0);N(D,q,st,"","\\uplus",!0);N(D,q,st,"","\\sqcap",!0);N(D,q,st,"","\\ast");N(D,q,st,"","\\sqcup",!0);N(D,q,st,"","\\bigcirc",!0);N(D,q,st,"","\\bullet",!0);N(D,q,st,"","\\ddagger");N(D,q,st,"","\\wr",!0);N(D,q,st,"","\\amalg");N(D,q,st,"&","\\And");N(D,q,re,"","\\longleftarrow",!0);N(D,q,re,"","\\Leftarrow",!0);N(D,q,re,"","\\Longleftarrow",!0);N(D,q,re,"","\\longrightarrow",!0);N(D,q,re,"","\\Rightarrow",!0);N(D,q,re,"","\\Longrightarrow",!0);N(D,q,re,"","\\leftrightarrow",!0);N(D,q,re,"","\\longleftrightarrow",!0);N(D,q,re,"","\\Leftrightarrow",!0);N(D,q,re,"","\\Longleftrightarrow",!0);N(D,q,re,"","\\mapsto",!0);N(D,q,re,"","\\longmapsto",!0);N(D,q,re,"","\\nearrow",!0);N(D,q,re,"","\\hookleftarrow",!0);N(D,q,re,"","\\hookrightarrow",!0);N(D,q,re,"","\\searrow",!0);N(D,q,re,"","\\leftharpoonup",!0);N(D,q,re,"","\\rightharpoonup",!0);N(D,q,re,"","\\swarrow",!0);N(D,q,re,"","\\leftharpoondown",!0);N(D,q,re,"","\\rightharpoondown",!0);N(D,q,re,"","\\nwarrow",!0);N(D,q,re,"","\\rightleftharpoons",!0);N(D,te,re,"","\\nless",!0);N(D,te,re,"","\\@nleqslant");N(D,te,re,"","\\@nleqq");N(D,te,re,"","\\lneq",!0);N(D,te,re,"","\\lneqq",!0);N(D,te,re,"","\\@lvertneqq");N(D,te,re,"","\\lnsim",!0);N(D,te,re,"","\\lnapprox",!0);N(D,te,re,"","\\nprec",!0);N(D,te,re,"","\\npreceq",!0);N(D,te,re,"","\\precnsim",!0);N(D,te,re,"","\\precnapprox",!0);N(D,te,re,"","\\nsim",!0);N(D,te,re,"","\\@nshortmid");N(D,te,re,"","\\nmid",!0);N(D,te,re,"","\\nvdash",!0);N(D,te,re,"","\\nvDash",!0);N(D,te,re,"","\\ntriangleleft");N(D,te,re,"","\\ntrianglelefteq",!0);N(D,te,re,"","\\subsetneq",!0);N(D,te,re,"","\\@varsubsetneq");N(D,te,re,"","\\subsetneqq",!0);N(D,te,re,"","\\@varsubsetneqq");N(D,te,re,"","\\ngtr",!0);N(D,te,re,"","\\@ngeqslant");N(D,te,re,"","\\@ngeqq");N(D,te,re,"","\\gneq",!0);N(D,te,re,"","\\gneqq",!0);N(D,te,re,"","\\@gvertneqq");N(D,te,re,"","\\gnsim",!0);N(D,te,re,"","\\gnapprox",!0);N(D,te,re,"","\\nsucc",!0);N(D,te,re,"","\\nsucceq",!0);N(D,te,re,"","\\succnsim",!0);N(D,te,re,"","\\succnapprox",!0);N(D,te,re,"","\\ncong",!0);N(D,te,re,"","\\@nshortparallel");N(D,te,re,"","\\nparallel",!0);N(D,te,re,"","\\nVDash",!0);N(D,te,re,"","\\ntriangleright");N(D,te,re,"","\\ntrianglerighteq",!0);N(D,te,re,"","\\@nsupseteqq");N(D,te,re,"","\\supsetneq",!0);N(D,te,re,"","\\@varsupsetneq");N(D,te,re,"","\\supsetneqq",!0);N(D,te,re,"","\\@varsupsetneqq");N(D,te,re,"","\\nVdash",!0);N(D,te,re,"","\\precneqq",!0);N(D,te,re,"","\\succneqq",!0);N(D,te,re,"","\\@nsubseteqq");N(D,te,st,"","\\unlhd");N(D,te,st,"","\\unrhd");N(D,te,re,"","\\nleftarrow",!0);N(D,te,re,"","\\nrightarrow",!0);N(D,te,re,"","\\nLeftarrow",!0);N(D,te,re,"","\\nRightarrow",!0);N(D,te,re,"","\\nleftrightarrow",!0);N(D,te,re,"","\\nLeftrightarrow",!0);N(D,te,re,"","\\vartriangle");N(D,te,he,"","\\hslash");N(D,te,he,"","\\triangledown");N(D,te,he,"","\\lozenge");N(D,te,he,"","\\circledS");N(D,te,he,"","\\circledR");N(Ue,te,he,"","\\circledR");N(D,te,he,"","\\measuredangle",!0);N(D,te,he,"","\\nexists");N(D,te,he,"","\\mho");N(D,te,he,"","\\Finv",!0);N(D,te,he,"","\\Game",!0);N(D,te,he,"","\\backprime");N(D,te,he,"","\\blacktriangle");N(D,te,he,"","\\blacktriangledown");N(D,te,he,"","\\blacksquare");N(D,te,he,"","\\blacklozenge");N(D,te,he,"","\\bigstar");N(D,te,he,"","\\sphericalangle",!0);N(D,te,he,"","\\complement",!0);N(D,te,he,"","\\eth",!0);N(Ue,q,he,"","");N(D,te,he,"","\\diagup");N(D,te,he,"","\\diagdown");N(D,te,he,"","\\square");N(D,te,he,"","\\Box");N(D,te,he,"","\\Diamond");N(D,te,he,"","\\yen",!0);N(Ue,te,he,"","\\yen",!0);N(D,te,he,"","\\checkmark",!0);N(Ue,te,he,"","\\checkmark");N(D,te,he,"","\\beth",!0);N(D,te,he,"","\\daleth",!0);N(D,te,he,"","\\gimel",!0);N(D,te,he,"","\\digamma",!0);N(D,te,he,"","\\varkappa");N(D,te,Xa,"","\\@ulcorner",!0);N(D,te,aa,"","\\@urcorner",!0);N(D,te,Xa,"","\\@llcorner",!0);N(D,te,aa,"","\\@lrcorner",!0);N(D,te,re,"","\\leqq",!0);N(D,te,re,"","\\leqslant",!0);N(D,te,re,"","\\eqslantless",!0);N(D,te,re,"","\\lesssim",!0);N(D,te,re,"","\\lessapprox",!0);N(D,te,re,"","\\approxeq",!0);N(D,te,st,"","\\lessdot");N(D,te,re,"","\\lll",!0);N(D,te,re,"","\\lessgtr",!0);N(D,te,re,"","\\lesseqgtr",!0);N(D,te,re,"","\\lesseqqgtr",!0);N(D,te,re,"","\\doteqdot");N(D,te,re,"","\\risingdotseq",!0);N(D,te,re,"","\\fallingdotseq",!0);N(D,te,re,"","\\backsim",!0);N(D,te,re,"","\\backsimeq",!0);N(D,te,re,"","\\subseteqq",!0);N(D,te,re,"","\\Subset",!0);N(D,te,re,"","\\sqsubset",!0);N(D,te,re,"","\\preccurlyeq",!0);N(D,te,re,"","\\curlyeqprec",!0);N(D,te,re,"","\\precsim",!0);N(D,te,re,"","\\precapprox",!0);N(D,te,re,"","\\vartriangleleft");N(D,te,re,"","\\trianglelefteq");N(D,te,re,"","\\vDash",!0);N(D,te,re,"","\\Vvdash",!0);N(D,te,re,"","\\smallsmile");N(D,te,re,"","\\smallfrown");N(D,te,re,"","\\bumpeq",!0);N(D,te,re,"","\\Bumpeq",!0);N(D,te,re,"","\\geqq",!0);N(D,te,re,"","\\geqslant",!0);N(D,te,re,"","\\eqslantgtr",!0);N(D,te,re,"","\\gtrsim",!0);N(D,te,re,"","\\gtrapprox",!0);N(D,te,st,"","\\gtrdot");N(D,te,re,"","\\ggg",!0);N(D,te,re,"","\\gtrless",!0);N(D,te,re,"","\\gtreqless",!0);N(D,te,re,"","\\gtreqqless",!0);N(D,te,re,"","\\eqcirc",!0);N(D,te,re,"","\\circeq",!0);N(D,te,re,"","\\triangleq",!0);N(D,te,re,"","\\thicksim");N(D,te,re,"","\\thickapprox");N(D,te,re,"","\\supseteqq",!0);N(D,te,re,"","\\Supset",!0);N(D,te,re,"","\\sqsupset",!0);N(D,te,re,"","\\succcurlyeq",!0);N(D,te,re,"","\\curlyeqsucc",!0);N(D,te,re,"","\\succsim",!0);N(D,te,re,"","\\succapprox",!0);N(D,te,re,"","\\vartriangleright");N(D,te,re,"","\\trianglerighteq");N(D,te,re,"","\\Vdash",!0);N(D,te,re,"","\\shortmid");N(D,te,re,"","\\shortparallel");N(D,te,re,"","\\between",!0);N(D,te,re,"","\\pitchfork",!0);N(D,te,re,"","\\varpropto");N(D,te,re,"","\\blacktriangleleft");N(D,te,re,"","\\therefore",!0);N(D,te,re,"","\\backepsilon");N(D,te,re,"","\\blacktriangleright");N(D,te,re,"","\\because",!0);N(D,te,re,"","\\llless");N(D,te,re,"","\\gggtr");N(D,te,st,"","\\lhd");N(D,te,st,"","\\rhd");N(D,te,re,"","\\eqsim",!0);N(D,q,re,"","\\Join");N(D,te,re,"","\\Doteq",!0);N(D,te,st,"","\\dotplus",!0);N(D,te,st,"","\\smallsetminus");N(D,te,st,"","\\Cap",!0);N(D,te,st,"","\\Cup",!0);N(D,te,st,"","\\doublebarwedge",!0);N(D,te,st,"","\\boxminus",!0);N(D,te,st,"","\\boxplus",!0);N(D,te,st,"","\\divideontimes",!0);N(D,te,st,"","\\ltimes",!0);N(D,te,st,"","\\rtimes",!0);N(D,te,st,"","\\leftthreetimes",!0);N(D,te,st,"","\\rightthreetimes",!0);N(D,te,st,"","\\curlywedge",!0);N(D,te,st,"","\\curlyvee",!0);N(D,te,st,"","\\circleddash",!0);N(D,te,st,"","\\circledast",!0);N(D,te,st,"","\\centerdot");N(D,te,st,"","\\intercal",!0);N(D,te,st,"","\\doublecap");N(D,te,st,"","\\doublecup");N(D,te,st,"","\\boxtimes",!0);N(D,te,re,"","\\dashrightarrow",!0);N(D,te,re,"","\\dashleftarrow",!0);N(D,te,re,"","\\leftleftarrows",!0);N(D,te,re,"","\\leftrightarrows",!0);N(D,te,re,"","\\Lleftarrow",!0);N(D,te,re,"","\\twoheadleftarrow",!0);N(D,te,re,"","\\leftarrowtail",!0);N(D,te,re,"","\\looparrowleft",!0);N(D,te,re,"","\\leftrightharpoons",!0);N(D,te,re,"","\\curvearrowleft",!0);N(D,te,re,"","\\circlearrowleft",!0);N(D,te,re,"","\\Lsh",!0);N(D,te,re,"","\\upuparrows",!0);N(D,te,re,"","\\upharpoonleft",!0);N(D,te,re,"","\\downharpoonleft",!0);N(D,q,re,"","\\origof",!0);N(D,q,re,"","\\imageof",!0);N(D,te,re,"","\\multimap",!0);N(D,te,re,"","\\leftrightsquigarrow",!0);N(D,te,re,"","\\rightrightarrows",!0);N(D,te,re,"","\\rightleftarrows",!0);N(D,te,re,"","\\twoheadrightarrow",!0);N(D,te,re,"","\\rightarrowtail",!0);N(D,te,re,"","\\looparrowright",!0);N(D,te,re,"","\\curvearrowright",!0);N(D,te,re,"","\\circlearrowright",!0);N(D,te,re,"","\\Rsh",!0);N(D,te,re,"","\\downdownarrows",!0);N(D,te,re,"","\\upharpoonright",!0);N(D,te,re,"","\\downharpoonright",!0);N(D,te,re,"","\\rightsquigarrow",!0);N(D,te,re,"","\\leadsto");N(D,te,re,"","\\Rrightarrow",!0);N(D,te,re,"","\\restriction");N(D,q,he,"","`");N(D,q,he,"$","\\$");N(Ue,q,he,"$","\\$");N(Ue,q,he,"$","\\textdollar");N(D,q,he,"%","\\%");N(Ue,q,he,"%","\\%");N(D,q,he,"_","\\_");N(Ue,q,he,"_","\\_");N(Ue,q,he,"_","\\textunderscore");N(D,q,he,"","\\angle",!0);N(D,q,he,"","\\infty",!0);N(D,q,he,"","\\prime");N(D,q,he,"","\\triangle");N(D,q,he,"","\\Gamma",!0);N(D,q,he,"","\\Delta",!0);N(D,q,he,"","\\Theta",!0);N(D,q,he,"","\\Lambda",!0);N(D,q,he,"","\\Xi",!0);N(D,q,he,"","\\Pi",!0);N(D,q,he,"","\\Sigma",!0);N(D,q,he,"","\\Upsilon",!0);N(D,q,he,"","\\Phi",!0);N(D,q,he,"","\\Psi",!0);N(D,q,he,"","\\Omega",!0);N(D,q,he,"A","");N(D,q,he,"B","");N(D,q,he,"E","");N(D,q,he,"Z","");N(D,q,he,"H","");N(D,q,he,"I","");N(D,q,he,"K","");N(D,q,he,"M","");N(D,q,he,"N","");N(D,q,he,"O","");N(D,q,he,"P","");N(D,q,he,"T","");N(D,q,he,"X","");N(D,q,he,"","\\neg",!0);N(D,q,he,"","\\lnot");N(D,q,he,"","\\top");N(D,q,he,"","\\bot");N(D,q,he,"","\\emptyset");N(D,te,he,"","\\varnothing");N(D,q,wt,"","\\alpha",!0);N(D,q,wt,"","\\beta",!0);N(D,q,wt,"","\\gamma",!0);N(D,q,wt,"","\\delta",!0);N(D,q,wt,"","\\epsilon",!0);N(D,q,wt,"","\\zeta",!0);N(D,q,wt,"","\\eta",!0);N(D,q,wt,"","\\theta",!0);N(D,q,wt,"","\\iota",!0);N(D,q,wt,"","\\kappa",!0);N(D,q,wt,"","\\lambda",!0);N(D,q,wt,"","\\mu",!0);N(D,q,wt,"","\\nu",!0);N(D,q,wt,"","\\xi",!0);N(D,q,wt,"","\\omicron",!0);N(D,q,wt,"","\\pi",!0);N(D,q,wt,"","\\rho",!0);N(D,q,wt,"","\\sigma",!0);N(D,q,wt,"","\\tau",!0);N(D,q,wt,"","\\upsilon",!0);N(D,q,wt,"","\\phi",!0);N(D,q,wt,"","\\chi",!0);N(D,q,wt,"","\\psi",!0);N(D,q,wt,"","\\omega",!0);N(D,q,wt,"","\\varepsilon",!0);N(D,q,wt,"","\\vartheta",!0);N(D,q,wt,"","\\varpi",!0);N(D,q,wt,"","\\varrho",!0);N(D,q,wt,"","\\varsigma",!0);N(D,q,wt,"","\\varphi",!0);N(D,q,st,"","*",!0);N(D,q,st,"+","+");N(D,q,st,"","-",!0);N(D,q,st,"","\\cdot",!0);N(D,q,st,"","\\circ",!0);N(D,q,st,"","\\div",!0);N(D,q,st,"","\\pm",!0);N(D,q,st,"","\\times",!0);N(D,q,st,"","\\cap",!0);N(D,q,st,"","\\cup",!0);N(D,q,st,"","\\setminus",!0);N(D,q,st,"","\\land");N(D,q,st,"","\\lor");N(D,q,st,"","\\wedge",!0);N(D,q,st,"","\\vee",!0);N(D,q,he,"","\\surd");N(D,q,Xa,"","\\langle",!0);N(D,q,Xa,"","\\lvert");N(D,q,Xa,"","\\lVert");N(D,q,aa,"?","?");N(D,q,aa,"!","!");N(D,q,aa,"","\\rangle",!0);N(D,q,aa,"","\\rvert");N(D,q,aa,"","\\rVert");N(D,q,re,"=","=");N(D,q,re,":",":");N(D,q,re,"","\\approx",!0);N(D,q,re,"","\\cong",!0);N(D,q,re,"","\\ge");N(D,q,re,"","\\geq",!0);N(D,q,re,"","\\gets");N(D,q,re,">","\\gt",!0);N(D,q,re,"","\\in",!0);N(D,q,re,"","\\@not");N(D,q,re,"","\\subset",!0);N(D,q,re,"","\\supset",!0);N(D,q,re,"","\\subseteq",!0);N(D,q,re,"","\\supseteq",!0);N(D,te,re,"","\\nsubseteq",!0);N(D,te,re,"","\\nsupseteq",!0);N(D,q,re,"","\\models");N(D,q,re,"","\\leftarrow",!0);N(D,q,re,"","\\le");N(D,q,re,"","\\leq",!0);N(D,q,re,"<","\\lt",!0);N(D,q,re,"","\\rightarrow",!0);N(D,q,re,"","\\to");N(D,te,re,"","\\ngeq",!0);N(D,te,re,"","\\nleq",!0);N(D,q,Ll,"","\\ ");N(D,q,Ll,"","\\space");N(D,q,Ll,"","\\nobreakspace");N(Ue,q,Ll,"","\\ ");N(Ue,q,Ll,""," ");N(Ue,q,Ll,"","\\space");N(Ue,q,Ll,"","\\nobreakspace");N(D,q,Ll,null,"\\nobreak");N(D,q,Ll,null,"\\allowbreak");N(D,q,Cx,",",",");N(D,q,Cx,";",";");N(D,te,st,"","\\barwedge",!0);N(D,te,st,"","\\veebar",!0);N(D,q,st,"","\\odot",!0);N(D,q,st,"","\\oplus",!0);N(D,q,st,"","\\otimes",!0);N(D,q,he,"","\\partial",!0);N(D,q,st,"","\\oslash",!0);N(D,te,st,"","\\circledcirc",!0);N(D,te,st,"","\\boxdot",!0);N(D,q,st,"","\\bigtriangleup");N(D,q,st,"","\\bigtriangledown");N(D,q,st,"","\\dagger");N(D,q,st,"","\\diamond");N(D,q,st,"","\\star");N(D,q,st,"","\\triangleleft");N(D,q,st,"","\\triangleright");N(D,q,Xa,"{","\\{");N(Ue,q,he,"{","\\{");N(Ue,q,he,"{","\\textbraceleft");N(D,q,aa,"}","\\}");N(Ue,q,he,"}","\\}");N(Ue,q,he,"}","\\textbraceright");N(D,q,Xa,"{","\\lbrace");N(D,q,aa,"}","\\rbrace");N(D,q,Xa,"[","\\lbrack",!0);N(Ue,q,he,"[","\\lbrack",!0);N(D,q,aa,"]","\\rbrack",!0);N(Ue,q,he,"]","\\rbrack",!0);N(D,q,Xa,"(","\\lparen",!0);N(D,q,aa,")","\\rparen",!0);N(Ue,q,he,"<","\\textless",!0);N(Ue,q,he,">","\\textgreater",!0);N(D,q,Xa,"","\\lfloor",!0);N(D,q,aa,"","\\rfloor",!0);N(D,q,Xa,"","\\lceil",!0);N(D,q,aa,"","\\rceil",!0);N(D,q,he,"\\","\\backslash");N(D,q,he,"","|");N(D,q,he,"","\\vert");N(Ue,q,he,"|","\\textbar",!0);N(D,q,he,"","\\|");N(D,q,he,"","\\Vert");N(Ue,q,he,"","\\textbardbl");N(Ue,q,he,"~","\\textasciitilde");N(Ue,q,he,"\\","\\textbackslash");N(Ue,q,he,"^","\\textasciicircum");N(D,q,re,"","\\uparrow",!0);N(D,q,re,"","\\Uparrow",!0);N(D,q,re,"","\\downarrow",!0);N(D,q,re,"","\\Downarrow",!0);N(D,q,re,"","\\updownarrow",!0);N(D,q,re,"","\\Updownarrow",!0);N(D,q,Qn,"","\\coprod");N(D,q,Qn,"","\\bigvee");N(D,q,Qn,"","\\bigwedge");N(D,q,Qn,"","\\biguplus");N(D,q,Qn,"","\\bigcap");N(D,q,Qn,"","\\bigcup");N(D,q,Qn,"","\\int");N(D,q,Qn,"","\\intop");N(D,q,Qn,"","\\iint");N(D,q,Qn,"","\\iiint");N(D,q,Qn,"","\\prod");N(D,q,Qn,"","\\sum");N(D,q,Qn,"","\\bigotimes");N(D,q,Qn,"","\\bigoplus");N(D,q,Qn,"","\\bigodot");N(D,q,Qn,"","\\oint");N(D,q,Qn,"","\\oiint");N(D,q,Qn,"","\\oiiint");N(D,q,Qn,"","\\bigsqcup");N(D,q,Qn,"","\\smallint");N(Ue,q,tf,"","\\textellipsis");N(D,q,tf,"","\\mathellipsis");N(Ue,q,tf,"","\\ldots",!0);N(D,q,tf,"","\\ldots",!0);N(D,q,tf,"","\\@cdots",!0);N(D,q,tf,"","\\ddots",!0);N(D,q,he,"","\\varvdots");N(Ue,q,he,"","\\varvdots");N(D,q,un,"","\\acute");N(D,q,un,"","\\grave");N(D,q,un,"","\\ddot");N(D,q,un,"~","\\tilde");N(D,q,un,"","\\bar");N(D,q,un,"","\\breve");N(D,q,un,"","\\check");N(D,q,un,"^","\\hat");N(D,q,un,"","\\vec");N(D,q,un,"","\\dot");N(D,q,un,"","\\mathring");N(D,q,wt,"","\\@imath");N(D,q,wt,"","\\@jmath");N(D,q,he,"","");N(D,q,he,"","");N(Ue,q,he,"","\\i",!0);N(Ue,q,he,"","\\j",!0);N(Ue,q,he,"","\\ss",!0);N(Ue,q,he,"","\\ae",!0);N(Ue,q,he,"","\\oe",!0);N(Ue,q,he,"","\\o",!0);N(Ue,q,he,"","\\AE",!0);N(Ue,q,he,"","\\OE",!0);N(Ue,q,he,"","\\O",!0);N(Ue,q,un,"","\\'");N(Ue,q,un,"","\\`");N(Ue,q,un,"","\\^");N(Ue,q,un,"","\\~");N(Ue,q,un,"","\\=");N(Ue,q,un,"","\\u");N(Ue,q,un,"","\\.");N(Ue,q,un,"","\\c");N(Ue,q,un,"","\\r");N(Ue,q,un,"","\\v");N(Ue,q,un,"",'\\"');N(Ue,q,un,"","\\H");N(Ue,q,un,"","\\textcircled");var IF={"--":!0,"---":!0,"``":!0,"''":!0};N(Ue,q,he,"","--",!0);N(Ue,q,he,"","\\textendash");N(Ue,q,he,"","---",!0);N(Ue,q,he,"","\\textemdash");N(Ue,q,he,"","`",!0);N(Ue,q,he,"","\\textquoteleft");N(Ue,q,he,"","'",!0);N(Ue,q,he,"","\\textquoteright");N(Ue,q,he,"","``",!0);N(Ue,q,he,"","\\textquotedblleft");N(Ue,q,he,"","''",!0);N(Ue,q,he,"","\\textquotedblright");N(D,q,he,"","\\degree",!0);N(Ue,q,he,"","\\degree");N(Ue,q,he,"","\\textdegree",!0);N(D,q,he,"","\\pounds");N(D,q,he,"","\\mathsterling",!0);N(Ue,q,he,"","\\pounds");N(Ue,q,he,"","\\textsterling",!0);N(D,te,he,"","\\maltese");N(Ue,te,he,"","\\maltese");var FC='0123456789/@."';for(var Jw=0;Jw<FC.length;Jw++){var qC=FC.charAt(Jw);N(D,q,he,qC,qC)}var HC='0123456789!@*()-=+";:?/.,';for(var e5=0;e5<HC.length;e5++){var GC=HC.charAt(e5);N(Ue,q,he,GC,GC)}var Fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var t5=0;t5<Fv.length;t5++){var Ty=Fv.charAt(t5);N(D,q,wt,Ty,Ty),N(Ue,q,he,Ty,Ty)}N(D,te,he,"C","");N(Ue,te,he,"C","");N(D,te,he,"H","");N(Ue,te,he,"H","");N(D,te,he,"N","");N(Ue,te,he,"N","");N(D,te,he,"P","");N(Ue,te,he,"P","");N(D,te,he,"Q","");N(Ue,te,he,"Q","");N(D,te,he,"R","");N(Ue,te,he,"R","");N(D,te,he,"Z","");N(Ue,te,he,"Z","");N(D,q,wt,"h","");N(Ue,q,wt,"h","");var Nt="";for(var Qi=0;Qi<Fv.length;Qi++){var _n=Fv.charAt(Qi);Nt=String.fromCharCode(55349,56320+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56372+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56424+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56580+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56684+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56736+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56788+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56840+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56944+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Qi<26&&(Nt=String.fromCharCode(55349,56632+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt),Nt=String.fromCharCode(55349,56476+Qi),N(D,q,wt,_n,Nt),N(Ue,q,he,_n,Nt))}Nt="";N(D,q,wt,"k",Nt);N(Ue,q,he,"k",Nt);for(var Uu=0;Uu<10;Uu++){var Tc=Uu.toString();Nt=String.fromCharCode(55349,57294+Uu),N(D,q,wt,Tc,Nt),N(Ue,q,he,Tc,Nt),Nt=String.fromCharCode(55349,57314+Uu),N(D,q,wt,Tc,Nt),N(Ue,q,he,Tc,Nt),Nt=String.fromCharCode(55349,57324+Uu),N(D,q,wt,Tc,Nt),N(Ue,q,he,Tc,Nt),Nt=String.fromCharCode(55349,57334+Uu),N(D,q,wt,Tc,Nt),N(Ue,q,he,Tc,Nt)}var _T="";for(var r5=0;r5<_T.length;r5++){var Ay=_T.charAt(r5);N(D,q,wt,Ay,Ay),N(Ue,q,he,Ay,Ay)}var Ey=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],KC=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Hse=function(e,r){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=r==="math"?0:1;if(119808<=a&&a<120484){var c=Math.floor((a-119808)/26);return[Ey[c][2],Ey[c][s]]}else if(120782<=a&&a<=120831){var d=Math.floor((a-120782)/10);return[KC[d][2],KC[d][s]]}else{if(a===120485||a===120486)return[Ey[0][2],Ey[0][s]];if(120486<a&&a<120782)return["",""];throw new Ge("Unsupported character: "+e)}},Ix=function(e,r,n){return Zr[n][e]&&Zr[n][e].replace&&(e=Zr[n][e].replace),{value:e,metrics:C8(e,r,n)}},Ds=function(e,r,n,i,a){var s=Ix(e,r,n),c=s.metrics;e=s.value;var d;if(c){var f=c.italic;(n==="text"||i&&i.font==="mathit")&&(f=0),d=new vs(e,c.height,c.depth,f,c.skew,c.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new vs(e,0,0,0,0,0,a);if(i){d.maxFontSize=i.sizeMultiplier,i.style.isTight()&&d.classes.push("mtight");var m=i.getColor();m&&(d.style.color=m)}return d},Gse=function(e,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&Ix(e,"Main-Bold",r).metrics?Ds(e,"Main-Bold",r,n,i.concat(["mathbf"])):e==="\\"||Zr[r][e].font==="main"?Ds(e,"Main-Regular",r,n,i):Ds(e,"AMS-Regular",r,n,i.concat(["amsrm"]))},Kse=function(e,r,n,i,a){return a!=="textord"&&Ix(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Wse=function(e,r,n){var i=e.mode,a=e.text,s=["mord"],c=i==="math"||i==="text"&&r.font,d=c?r.font:r.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=Hse(a,i)),f.length>0)return Ds(a,f,i,r,s.concat(m));if(d){var p,y;if(d==="boldsymbol"){var b=Kse(a,i,r,s,n);p=b.fontName,y=[b.fontClass]}else c?(p=PF[d].fontName,y=[d]):(p=Ny(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(Ix(a,p,i).metrics)return Ds(a,p,i,r,s.concat(y));if(IF.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<a.length;S++)T.push(Ds(a[S],p,i,r,s.concat(y)));return MF(T)}}if(n==="mathord")return Ds(a,"Math-Italic",i,r,s.concat(["mathnormal"]));if(n==="textord"){var w=Zr[i][a]&&Zr[i][a].font;if(w==="ams"){var k=Ny("amsrm",r.fontWeight,r.fontShape);return Ds(a,k,i,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var M=Ny("textrm",r.fontWeight,r.fontShape);return Ds(a,M,i,r,s.concat(r.fontWeight,r.fontShape))}else{var C=Ny(w,r.fontWeight,r.fontShape);return Ds(a,C,i,r,s.concat(C,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Xse=(t,e)=>{if(Jc(t.classes)!==Jc(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},Qse=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof vs&&n instanceof vs&&Xse(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},R8=function(e){for(var r=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=i},ga=function(e,r,n,i){var a=new kg(e,r,n,i);return R8(a),a},RF=(t,e,r,n)=>new kg(t,e,r,n),Yse=function(e,r,n){var i=ga([e],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=Je(i.height),i.maxFontSize=1,i},Zse=function(e,r,n,i){var a=new I8(e,r,n,i);return R8(a),a},MF=function(e){var r=new Ng(e);return R8(r),r},Jse=function(e,r){return e instanceof Ng?ga([],[e],r):e},eoe=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,a=i,s=1;s<r.length;s++){var c=-r[s].shift-a-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);a=a+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:i}}var f;if(e.positionType==="top"){for(var m=e.positionData,p=0;p<e.children.length;p++){var y=e.children[p];m-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}f=m}else if(e.positionType==="bottom")f=-e.positionData;else{var b=e.children[0];if(b.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-b.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-b.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},toe=function(e,r){for(var{children:n,depth:i}=eoe(e),a=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;a=Math.max(a,d.maxFontSize,d.height)}}a+=2;var f=ga(["pstrut"],[]);f.style.height=Je(a);for(var m=[],p=i,y=i,b=i,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")b+=S.size;else{var w=S.elem,k=S.wrapperClasses||[],M=S.wrapperStyle||{},C=ga(k,[f,w],void 0,M);C.style.top=Je(-a-b-w.depth),S.marginLeft&&(C.style.marginLeft=S.marginLeft),S.marginRight&&(C.style.marginRight=S.marginRight),m.push(C),b+=w.height+w.depth}p=Math.min(p,b),y=Math.max(y,b)}var B=ga(["vlist"],m);B.style.height=Je(y);var R;if(p<0){var I=ga([],[]),A=ga(["vlist"],[I]);A.style.height=Je(-p);var E=ga(["vlist-s"],[new vs("")]);R=[ga(["vlist-r"],[B,E]),ga(["vlist-r"],[A])]}else R=[ga(["vlist-r"],[B])];var O=ga(["vlist-t"],R);return R.length===2&&O.classes.push("vlist-t2"),O.height=y,O.depth=-p,O},roe=(t,e)=>{var r=ga(["mspace"],[],e),n=gn(t,e);return r.style.marginRight=Je(n),r},Ny=function(e,r,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",i+"-"+a},PF={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},DF={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},noe=function(e,r){var[n,i,a]=DF[e],s=new eu(n),c=new kl([s],{width:Je(i),height:Je(a),style:"width:"+Je(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),d=RF(["overlay"],[c],r);return d.height=a,d.style.height=Je(a),d.style.width=Je(i),d},be={fontMap:PF,makeSymbol:Ds,mathsym:Gse,makeSpan:ga,makeSvgSpan:RF,makeLineSpan:Yse,makeAnchor:Zse,makeFragment:MF,wrapFragment:Jse,makeVList:toe,makeOrd:Wse,makeGlue:roe,staticSvg:noe,svgData:DF,tryCombineChars:Qse},pn={number:3,unit:"mu"},zu={number:4,unit:"mu"},el={number:5,unit:"mu"},ioe={mord:{mop:pn,mbin:zu,mrel:el,minner:pn},mop:{mord:pn,mop:pn,mrel:el,minner:pn},mbin:{mord:zu,mop:zu,mopen:zu,minner:zu},mrel:{mord:el,mop:el,mopen:el,minner:el},mopen:{},mclose:{mop:pn,mbin:zu,mrel:el,minner:pn},mpunct:{mord:pn,mop:pn,mrel:el,mopen:pn,mclose:pn,mpunct:pn,minner:pn},minner:{mord:pn,mop:pn,mbin:zu,mrel:el,mopen:pn,mpunct:pn,minner:pn}},aoe={mord:{mop:pn},mop:{mord:pn,mop:pn},mbin:{},mrel:{},mopen:{},mclose:{mop:pn},mpunct:{},minner:{mop:pn}},LF={},qv={},Hv={};function nt(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},d=0;d<r.length;++d)LF[r[d]]=c;e&&(a&&(qv[e]=a),s&&(Hv[e]=s))}function U0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;nt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Gv=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Mn=function(e){return e.type==="ordgroup"?e.body:[e]},Ol=be.makeSpan,soe=["leftmost","mbin","mopen","mrel","mop","mpunct"],ooe=["rightmost","mrel","mclose","mpunct"],loe={display:_t.DISPLAY,text:_t.TEXT,script:_t.SCRIPT,scriptscript:_t.SCRIPTSCRIPT},coe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ni=function(e,r,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var c=or(e[s],r);if(c instanceof Ng){var d=c.children;a.push(...d)}else a.push(c)}if(be.tryCombineChars(a),!n)return a;var f=r;if(e.length===1){var m=e[0];m.type==="sizing"?f=r.havingSize(m.size):m.type==="styling"&&(f=r.havingStyle(loe[m.style]))}var p=Ol([i[0]||"leftmost"],[],r),y=Ol([i[1]||"rightmost"],[],r),b=n==="root";return WC(a,(T,S)=>{var w=S.classes[0],k=T.classes[0];w==="mbin"&&ooe.includes(k)?S.classes[0]="mord":k==="mbin"&&soe.includes(w)&&(T.classes[0]="mord")},{node:p},y,b),WC(a,(T,S)=>{var w=ST(S),k=ST(T),M=w&&k?T.hasClass("mtight")?aoe[w][k]:ioe[w][k]:null;if(M)return be.makeGlue(M,f)},{node:p},y,b),a},WC=function t(e,r,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var c=e[s],d=BF(c);if(d){t(d.children,r,n,null,a);continue}var f=!c.hasClass("mspace");if(f){var m=r(c,n.node);m&&(n.insertAfter?n.insertAfter(m):(e.unshift(m),s++))}f?n.node=c:a&&c.hasClass("newline")&&(n.node=Ol(["leftmost"])),n.insertAfter=(p=>y=>{e.splice(p+1,0,y),s++})(s)}i&&e.pop()},BF=function(e){return e instanceof Ng||e instanceof I8||e instanceof kg&&e.hasClass("enclosing")?e:null},uoe=function t(e,r){var n=BF(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e},ST=function(e,r){return e?(r&&(e=uoe(e,r)),coe[e.classes[0]]||null):null},Ap=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Ol(r.concat(n))},or=function(e,r,n){if(!e)return Ol();if(qv[e.type]){var i=qv[e.type](e,r);if(n&&r.size!==n.size){i=Ol(r.sizingClasses(n),[i],r);var a=r.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new Ge("Got group of unknown type: '"+e.type+"'")};function ky(t,e){var r=Ol(["base"],t,e),n=Ol(["strut"]);return n.style.height=Je(r.height+r.depth),r.depth&&(n.style.verticalAlign=Je(-r.depth)),r.children.unshift(n),r}function TT(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=ni(t,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(a.push(ky(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(ky(s,e)),s=[]),a.push(n[c]));s.length>0&&a.push(ky(s,e));var f;r?(f=ky(ni(r,e,!0)),f.classes=["tag"],a.push(f)):i&&a.push(i);var m=Ol(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=Je(m.height+m.depth),m.depth&&(p.style.verticalAlign=Je(-m.depth))}return m}function UF(t){return new Ng(t)}class Ua{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Jc(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof po&&this.children[n+1]instanceof po){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof po;)i+=this.children[++n].toText();e.appendChild(new po(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=mr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+mr.escape(Jc(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class po{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return mr.escape(this.toText())}toText(){return this.text}}class doe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Je(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Je(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var qe={MathNode:Ua,TextNode:po,SpaceNode:doe,newDocumentFragment:UF},bs=function(e,r,n){return Zr[r][e]&&Zr[r][e].replace&&e.charCodeAt(0)!==55349&&!(IF.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Zr[r][e].replace),new qe.TextNode(e)},M8=function(e){return e.length===1?e[0]:new qe.MathNode("mrow",e)},P8=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;Zr[i][a]&&Zr[i][a].replace&&(a=Zr[i][a].replace);var s=be.fontMap[n].fontName;return C8(a,s,i)?be.fontMap[n].variant:null};function n5(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof po&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof po&&r.text===","}else return!1}var Aa=function(e,r,n){if(e.length===1){var i=$r(e[0],r);return n&&i instanceof Ua&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,c=0;c<e.length;c++){var d=$r(e[c],r);if(d instanceof Ua&&s instanceof Ua){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(n5(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&n5(s))d.children=[...s.children,...d.children],a.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||n5(s))){var f=d.children[0];f instanceof Ua&&f.type==="mn"&&(f.children=[...s.children,...f.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var m=s.children[0];if(m instanceof po&&m.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var p=d.children[0];p instanceof po&&p.text.length>0&&(p.text=p.text.slice(0,1)+""+p.text.slice(1),a.pop())}}}a.push(d),s=d}return a},tu=function(e,r,n){return M8(Aa(e,r,n))},$r=function(e,r){if(!e)return new qe.MathNode("mrow");if(Hv[e.type]){var n=Hv[e.type](e,r);return n}else throw new Ge("Got group of unknown type: '"+e.type+"'")};function XC(t,e,r,n,i){var a=Aa(t,r),s;a.length===1&&a[0]instanceof Ua&&["mrow","mtable"].includes(a[0].type)?s=a[0]:s=new qe.MathNode("mrow",a);var c=new qe.MathNode("annotation",[new qe.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new qe.MathNode("semantics",[s,c]),f=new qe.MathNode("math",[d]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&f.setAttribute("display","block");var m=i?"katex":"katex-mathml";return be.makeSpan([m],[f])}var zF=function(e){return new al({style:e.displayMode?_t.DISPLAY:_t.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},$F=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=be.makeSpan(n,[e])}return e},hoe=function(e,r,n){var i=zF(n),a;if(n.output==="mathml")return XC(e,r,i,n.displayMode,!0);if(n.output==="html"){var s=TT(e,i);a=be.makeSpan(["katex"],[s])}else{var c=XC(e,r,i,n.displayMode,!1),d=TT(e,i);a=be.makeSpan(["katex"],[c,d])}return $F(a,n)},foe=function(e,r,n){var i=zF(n),a=TT(e,i),s=be.makeSpan(["katex"],[a]);return $F(s,n)},moe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},poe=function(e){var r=new qe.MathNode("mo",[new qe.TextNode(moe[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},goe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},yoe=function(e){return e.type==="ordgroup"?e.body.length:1},voe=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var f=e,m=yoe(f.base),p,y,b;if(m>5)d==="widehat"||d==="widecheck"?(p=420,c=2364,b=.42,y=d+"4"):(p=312,c=2340,b=.34,y="tilde4");else{var T=[1,1,2,2,3,3][m];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],p=[0,239,300,360,420][T],b=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],p=[0,260,286,306,312][T],b=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new eu(y),w=new kl([S],{width:"100%",height:Je(b),viewBox:"0 0 "+c+" "+p,preserveAspectRatio:"none"});return{span:be.makeSvgSpan([],[w],r),minWidth:0,height:b}}else{var k=[],M=goe[d],[C,B,R]=M,I=R/1e3,A=C.length,E,O;if(A===1){var U=M[3];E=["hide-tail"],O=[U]}else if(A===2)E=["halfarrow-left","halfarrow-right"],O=["xMinYMin","xMaxYMin"];else if(A===3)E=["brace-left","brace-center","brace-right"],O=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var P=0;P<A;P++){var V=new eu(C[P]),z=new kl([V],{width:"400em",height:Je(I),viewBox:"0 0 "+c+" "+R,preserveAspectRatio:O[P]+" slice"}),Q=be.makeSvgSpan([E[P]],[z],r);if(A===1)return{span:Q,minWidth:B,height:I};Q.style.height=Je(I),k.push(Q)}return{span:be.makeSpan(["stretchy"],k,r),minWidth:B,height:I}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=Je(s),a>0&&(i.style.minWidth=Je(a)),i},boe=function(e,r,n,i,a){var s,c=e.height+e.depth+n+i;if(/fbox|color|angl/.test(r)){if(s=be.makeSpan(["stretchy",r],[],a),r==="fbox"){var d=a.color&&a.getColor();d&&(s.style.borderColor=d)}}else{var f=[];/^[bx]cancel$/.test(r)&&f.push(new wT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&f.push(new wT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new kl(f,{width:"100%",height:Je(c)});s=be.makeSvgSpan([],[m],a)}return s.height=c,s.style.height=Je(c),s},jl={encloseSpan:boe,mathMLnode:poe,svgSpan:voe};function $t(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function D8(t){var e=Rx(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Rx(t){return t&&(t.type==="atom"||qse.hasOwnProperty(t.type))?t:null}var L8=(t,e)=>{var r,n,i;t&&t.type==="supsub"?(n=$t(t.base,"accent"),r=n.base,t.base=r,i=Vse(or(t,e)),t.base=n):(n=$t(t,"accent"),r=n.base);var a=or(r,e.havingCrampedStyle()),s=n.isShifty&&mr.isCharacterBox(r),c=0;if(s){var d=mr.getBaseElem(r),f=or(d,e.havingCrampedStyle());c=VC(f).skew}var m=n.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=jl.svgSpan(n,e),y=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+Je(2*c)+")",marginLeft:Je(2*c)}:void 0}]},e);else{var b,T;n.label==="\\vec"?(b=be.staticSvg("vec",e),T=be.svgData.vec[1]):(b=be.makeOrd({mode:n.mode,text:n.label},e,"textord"),b=VC(b),b.italic=0,T=b.width,m&&(p+=b.depth)),y=be.makeSpan(["accent-body"],[b]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),p=a.height);var w=c;S||(w-=T/2),y.style.left=Je(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:y}]},e)}var k=be.makeSpan(["mord","accent"],[y],e);return i?(i.children[0]=k,i.height=Math.max(k.height,i.height),i.classes[0]="mord",i):k},VF=(t,e)=>{var r=t.isStretchy?jl.mathMLnode(t.label):new qe.MathNode("mo",[bs(t.label,t.mode)]),n=new qe.MathNode("mover",[$r(t.base,e),r]);return n.setAttribute("accent","true"),n},xoe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));nt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Gv(e[0]),n=!xoe.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:L8,mathmlBuilder:VF});nt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:L8,mathmlBuilder:VF});nt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(t,e)=>{var r=or(t.base,e),n=jl.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,a=be.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return be.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(t,e)=>{var r=jl.mathMLnode(t.label),n=new qe.MathNode("munder",[$r(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Oy=t=>{var e=new qe.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};nt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),i=be.wrapFragment(or(t.body,n,e),e),a=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=be.wrapFragment(or(t.below,n,e),e),s.classes.push(a+"-arrow-pad"));var c=jl.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,f=-e.fontMetrics().axisHeight-.5*c.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(f-=i.depth);var m;if(s){var p=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;m=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:p}]},e)}else m=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d}]},e);return m.children[0].children[0].children[1].classes.push("svg-align"),be.makeSpan(["mrel","x-arrow"],[m],e)},mathmlBuilder(t,e){var r=jl.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var i=Oy($r(t.body,e));if(t.below){var a=Oy($r(t.below,e));n=new qe.MathNode("munderover",[r,a,i])}else n=new qe.MathNode("mover",[r,i])}else if(t.below){var s=Oy($r(t.below,e));n=new qe.MathNode("munder",[r,s])}else n=Oy(),n=new qe.MathNode("mover",[r,n]);return n}});var woe=be.makeSpan;function FF(t,e){var r=ni(t.body,e,!0);return woe([t.mclass],r,e)}function qF(t,e){var r,n=Aa(t.body,e);return t.mclass==="minner"?r=new qe.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new qe.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new qe.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}nt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Mn(i),isCharacterBox:mr.isCharacterBox(i)}},htmlBuilder:FF,mathmlBuilder:qF});var Mx=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};nt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:Mx(e[0]),body:Mn(e[1]),isCharacterBox:mr.isCharacterBox(e[1])}}});nt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,i=e[1],a=e[0],s;n!=="\\stackrel"?s=Mx(i):s="mrel";var c={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Mn(i)},d={type:"supsub",mode:a.mode,base:c,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:mr.isCharacterBox(d)}},htmlBuilder:FF,mathmlBuilder:qF});nt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:Mx(e[0]),body:Mn(e[0])}},htmlBuilder(t,e){var r=ni(t.body,e,!0),n=be.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Aa(t.body,e),n=new qe.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var _oe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},QC=()=>({type:"styling",body:[],mode:"math",style:"display"}),YC=t=>t.type==="textord"&&t.text==="@",Soe=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Toe(t,e,r){var n=_oe[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[a],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[i,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Aoe(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ge("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],c=QC(),d=0;d<s.length;d++)if(!YC(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var f=D8(s[d]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var y=!0,b=d+1;b<s.length;b++){if(Soe(s[b],f)){y=!1,d=b;break}if(YC(s[b]))throw new Ge("Missing a "+f+" character to complete a CD arrow.",s[b]);m[p].body.push(s[b])}if(y)throw new Ge("Missing a "+f+" character to complete a CD arrow.",s[d])}else throw new Ge('Expected one of "<>AV=|." after @',s[d]);var T=Toe(f,m,t),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),c=QC()}a%2===0?n.push(c):n.shift(),n=[],i.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}nt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=be.wrapFragment(or(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=Je(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new qe.MathNode("mrow",[$r(t.label,e)]);return r=new qe.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new qe.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});nt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=be.wrapFragment(or(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new qe.MathNode("mrow",[$r(t.fragment,e)])}});nt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=$t(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var c=$t(i[s],"textord");a+=c.text}var d=parseInt(a),f;if(isNaN(d))throw new Ge("\\@char has non-numeric argument "+a);if(d<0||d>=1114111)throw new Ge("\\@char with invalid code point "+a);return d<=65535?f=String.fromCharCode(d):(d-=65536,f=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:f}}});var HF=(t,e)=>{var r=ni(t.body,e.withColor(t.color),!1);return be.makeFragment(r)},GF=(t,e)=>{var r=Aa(t.body,e.withColor(t.color)),n=new qe.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};nt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=$t(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:Mn(i)}},htmlBuilder:HF,mathmlBuilder:GF});nt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=$t(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:HF,mathmlBuilder:GF});nt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&$t(i,"size").value}},htmlBuilder(t,e){var r=be.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=Je(gn(t.size,e)))),r},mathmlBuilder(t,e){var r=new qe.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",Je(gn(t.size,e)))),r}});var AT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},KF=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ge("Expected a control sequence",t);return e},Eoe=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},WF=(t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)};nt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(AT[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=AT[n.text]),$t(e.parseFunction(),"internal");throw new Ge("Invalid token after macro prefix",n)}});nt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Ge("Expected a control sequence",n);for(var a=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Ge('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new Ge('Argument number "'+n.text+'" out of order');a++,c.push([])}else{if(n.text==="EOF")throw new Ge("Expected a macro definition");c[a].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(i,{tokens:d,numArgs:a,delimiters:c},r===AT[r]),{type:"internal",mode:e.mode}}});nt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=KF(e.gullet.popToken());e.gullet.consumeSpaces();var i=Eoe(e);return WF(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});nt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=KF(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return WF(e,n,a,r==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Im=function(e,r,n){var i=Zr.math[e]&&Zr.math[e].replace,a=C8(i||e,r,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return a},B8=function(e,r,n,i){var a=n.havingBaseStyle(r),s=be.makeSpan(i.concat(a.sizingClasses(n)),[e],n),c=a.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=a.sizeMultiplier,s},XF=function(e,r,n){var i=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Je(a),e.height-=a,e.depth+=a},Noe=function(e,r,n,i,a,s){var c=be.makeSymbol(e,"Main-Regular",a,i),d=B8(c,r,i,s);return n&&XF(d,i,r),d},koe=function(e,r,n,i){return be.makeSymbol(e,"Size"+r+"-Regular",n,i)},QF=function(e,r,n,i,a,s){var c=koe(e,r,a,i),d=B8(be.makeSpan(["delimsizing","size"+r],[c],i),_t.TEXT,i,s);return n&&XF(d,i,_t.TEXT),d},i5=function(e,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=be.makeSpan(["delimsizinginner",i],[be.makeSpan([],[be.makeSymbol(e,r,n)])]);return{type:"elem",elem:a}},a5=function(e,r,n){var i=mo["Size4-Regular"][e.charCodeAt(0)]?mo["Size4-Regular"][e.charCodeAt(0)][4]:mo["Size1-Regular"][e.charCodeAt(0)][4],a=new eu("inner",Rse(e,Math.round(1e3*r))),s=new kl([a],{width:Je(i),height:Je(r),style:"width:"+Je(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=be.makeSvgSpan([],[s],n);return c.height=r,c.style.height=Je(r),c.style.width=Je(i),{type:"elem",elem:c}},ET=.008,jy={type:"kern",size:-1*ET},Ooe=["|","\\lvert","\\rvert","\\vert"],joe=["\\|","\\lVert","\\rVert","\\Vert"],YF=function(e,r,n,i,a,s){var c,d,f,m,p="",y=0;c=f=m=e,d=null;var b="Size1-Regular";e==="\\uparrow"?f=m="":e==="\\Uparrow"?f=m="":e==="\\downarrow"?c=f="":e==="\\Downarrow"?c=f="":e==="\\updownarrow"?(c="\\uparrow",f="",m="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",f="",m="\\Downarrow"):Ooe.includes(e)?(f="",p="vert",y=333):joe.includes(e)?(f="",p="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",f="",m="",b="Size4-Regular",p="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",f="",m="",b="Size4-Regular",p="rbrack",y=667):e==="\\lfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="lfloor",y=667):e==="\\lceil"||e===""?(c="",f=m="",b="Size4-Regular",p="lceil",y=667):e==="\\rfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="rfloor",y=667):e==="\\rceil"||e===""?(c="",f=m="",b="Size4-Regular",p="rceil",y=667):e==="("||e==="\\lparen"?(c="",f="",m="",b="Size4-Regular",p="lparen",y=875):e===")"||e==="\\rparen"?(c="",f="",m="",b="Size4-Regular",p="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\lgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\rgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",m="",f="",b="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",m="",f="",b="Size4-Regular");var T=Im(c,b,a),S=T.height+T.depth,w=Im(f,b,a),k=w.height+w.depth,M=Im(m,b,a),C=M.height+M.depth,B=0,R=1;if(d!==null){var I=Im(d,b,a);B=I.height+I.depth,R=2}var A=S+C+B,E=Math.max(0,Math.ceil((r-A)/(R*k))),O=A+E*R*k,U=i.fontMetrics().axisHeight;n&&(U*=i.sizeMultiplier);var P=O/2-U,V=[];if(p.length>0){var z=O-S-C,Q=Math.round(O*1e3),ee=Mse(p,Math.round(z*1e3)),K=new eu(p,ee),Z=(y/1e3).toFixed(3)+"em",Y=(Q/1e3).toFixed(3)+"em",pe=new kl([K],{width:Z,height:Y,viewBox:"0 0 "+y+" "+Q}),ae=be.makeSvgSpan([],[pe],i);ae.height=Q/1e3,ae.style.width=Z,ae.style.height=Y,V.push({type:"elem",elem:ae})}else{if(V.push(i5(m,b,a)),V.push(jy),d===null){var X=O-S-C+2*ET;V.push(a5(f,X,i))}else{var J=(O-S-C-B)/2+2*ET;V.push(a5(f,J,i)),V.push(jy),V.push(i5(d,b,a)),V.push(jy),V.push(a5(f,J,i))}V.push(jy),V.push(i5(c,b,a))}var le=i.havingBaseStyle(_t.TEXT),Ee=be.makeVList({positionType:"bottom",positionData:P,children:V},le);return B8(be.makeSpan(["delimsizing","mult"],[Ee],le),_t.TEXT,i,s)},s5=80,o5=.08,l5=function(e,r,n,i,a){var s=Ise(e,i,n),c=new eu(e,s),d=new kl([c],{width:"400em",height:Je(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return be.makeSvgSpan(["hide-tail"],[d],a)},Coe=function(e,r){var n=r.havingBaseSizing(),i=tq("\\surd",e*n.sizeMultiplier,eq,n),a=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,f=0,m=0,p;return i.type==="small"?(m=1e3+1e3*s+s5,e<1?a=1:e<1.4&&(a=.7),d=(1+s+o5)/a,f=(1+s)/a,c=l5("sqrtMain",d,m,s,r),c.style.minWidth="0.853em",p=.833/a):i.type==="large"?(m=(1e3+s5)*Gm[i.size],f=(Gm[i.size]+s)/a,d=(Gm[i.size]+s+o5)/a,c=l5("sqrtSize"+i.size,d,m,s,r),c.style.minWidth="1.02em",p=1/a):(d=e+s+o5,f=e+s,m=Math.floor(1e3*e+s)+s5,c=l5("sqrtTall",d,m,s,r),c.style.minWidth="0.742em",p=1.056),c.height=f,c.style.height=Je(d),{span:c,advanceWidth:p,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*a}},ZF=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Ioe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],JF=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Gm=[0,1.2,1.8,2.4,3],Roe=function(e,r,n,i,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),ZF.includes(e)||JF.includes(e))return QF(e,r,!1,n,i,a);if(Ioe.includes(e))return YF(e,Gm[r],!1,n,i,a);throw new Ge("Illegal delimiter: '"+e+"'")},Moe=[{type:"small",style:_t.SCRIPTSCRIPT},{type:"small",style:_t.SCRIPT},{type:"small",style:_t.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Poe=[{type:"small",style:_t.SCRIPTSCRIPT},{type:"small",style:_t.SCRIPT},{type:"small",style:_t.TEXT},{type:"stack"}],eq=[{type:"small",style:_t.SCRIPTSCRIPT},{type:"small",style:_t.SCRIPT},{type:"small",style:_t.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Doe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},tq=function(e,r,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var c=Im(e,Doe(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var f=i.havingBaseStyle(n[s].style);d*=f.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},rq=function(e,r,n,i,a,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;JF.includes(e)?c=Moe:ZF.includes(e)?c=eq:c=Poe;var d=tq(e,r,c,i);return d.type==="small"?Noe(e,d.style,n,i,a,s):d.type==="large"?QF(e,d.size,n,i,a,s):YF(e,r,n,i,a,s)},Loe=function(e,r,n,i,a,s){var c=i.fontMetrics().axisHeight*i.sizeMultiplier,d=901,f=5/i.fontMetrics().ptPerEm,m=Math.max(r-c,n+c),p=Math.max(m/500*d,2*m-f);return rq(e,p,!0,i,a,s)},vl={sqrtImage:Coe,sizedDelim:Roe,sizeToMaxHeight:Gm,customSizedDelim:rq,leftRightDelim:Loe},ZC={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Boe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Px(t,e){var r=Rx(t);if(r&&Boe.includes(r.text))return r;throw r?new Ge("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Ge("Invalid delimiter type '"+t.type+"'",t)}nt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=Px(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:ZC[t.funcName].size,mclass:ZC[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?be.makeSpan([t.mclass]):vl.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(bs(t.delim,t.mode));var r=new qe.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=Je(vl.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function JC(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}nt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Ge("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Px(e[0],t).text,color:r}}});nt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Px(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=$t(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(t,e)=>{JC(t);for(var r=ni(t.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<r.length;s++)r[s].isMiddle?a=!0:(n=Math.max(r[s].height,n),i=Math.max(r[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var c;if(t.left==="."?c=Ap(e,["mopen"]):c=vl.leftRightDelim(t.left,n,i,e,t.mode,["mopen"]),r.unshift(c),a)for(var d=1;d<r.length;d++){var f=r[d],m=f.isMiddle;m&&(r[d]=vl.leftRightDelim(m.delim,n,i,m.options,t.mode,[]))}var p;if(t.right===".")p=Ap(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;p=vl.leftRightDelim(t.right,n,i,y,t.mode,["mclose"])}return r.push(p),be.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{JC(t);var r=Aa(t.body,e);if(t.left!=="."){var n=new qe.MathNode("mo",[bs(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new qe.MathNode("mo",[bs(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return M8(r)}});nt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Px(e[0],t);if(!t.parser.leftrightDepth)throw new Ge("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Ap(e,[]);else{r=vl.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?bs("|","text"):bs(t.delim,t.mode),n=new qe.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var U8=(t,e)=>{var r=be.wrapFragment(or(t.body,e),e),n=t.label.slice(1),i=e.sizeMultiplier,a,s=0,c=mr.isCharacterBox(t.body);if(n==="sout")a=be.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=gn({number:.6,unit:"pt"},e),f=gn({number:.35,unit:"ex"},e),m=e.havingBaseSizing();i=i/m.sizeMultiplier;var p=r.height+r.depth+d+f;r.style.paddingLeft=Je(p/2+d);var y=Math.floor(1e3*p*i),b=jse(y),T=new kl([new eu("phase",b)],{width:"400em",height:Je(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=be.makeSvgSpan(["hide-tail"],[T],e),a.style.height=Je(p),s=r.depth+d+f}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,k=0;/box/.test(n)?(k=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:k),w=S):n==="angl"?(k=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*k,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),a=jl.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=Je(k)):n==="angl"&&k!==.049&&(a.style.borderTopWidth=Je(k),a.style.borderRightWidth=Je(k)),s=r.depth+w,t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,t.borderColor&&(a.style.borderColor=t.borderColor))}var M;if(t.backgroundColor)M=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];M=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:C}]},e)}return/cancel/.test(n)&&(M.height=r.height,M.depth=r.depth),/cancel/.test(n)&&!c?be.makeSpan(["mord","cancel-lap"],[M],e):be.makeSpan(["mord"],[M],e)},z8=(t,e)=>{var r=0,n=new qe.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[$r(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};nt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=$t(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:U8,mathmlBuilder:z8});nt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=$t(e[0],"color-token").color,s=$t(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:c}},htmlBuilder:U8,mathmlBuilder:z8});nt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});nt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:U8,mathmlBuilder:z8});nt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var nq={};function No(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},d=0;d<r.length;++d)nq[r[d]]=c;a&&(qv[e]=a),s&&(Hv[e]=s)}var iq={};function G(t,e){iq[t]=e}function eI(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var Dx=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Ge("{"+t.envName+"} can be used only in display mode.")};function $8(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function su(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:y}=e;if(t.gullet.beginGroup(),f||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var b=t.gullet.expandMacroAsText("\\arraystretch");if(b==null)s=1;else if(s=parseFloat(b),!s||s<0)throw new Ge("Invalid \\arraystretch: "+b)}t.gullet.beginGroup();var T=[],S=[T],w=[],k=[],M=d!=null?[]:void 0;function C(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function B(){M&&(t.gullet.macros.get("\\df@tag")?(M.push(t.subparse([new Ga("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):M.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),k.push(eI(t));;){var R=t.parseExpression(!1,f?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),R={type:"ordgroup",mode:t.mode,body:R},r&&(R={type:"styling",mode:t.mode,style:r,body:[R]}),T.push(R);var I=t.fetch().text;if(I==="&"){if(p&&T.length===p){if(f||c)throw new Ge("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(I==="\\end"){B(),T.length===1&&R.type==="styling"&&R.body[0].body.length===0&&(S.length>1||!m)&&S.pop(),k.length<S.length+1&&k.push([]);break}else if(I==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),w.push(A?A.value:null),B(),k.push(eI(t)),T=[],S.push(T),C()}else throw new Ge("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:s,body:S,cols:a,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:k,colSeparationType:c,tags:M,leqno:y}}function V8(t){return t.slice(0,1)==="d"?"display":"text"}var ko=function(e,r){var n,i,a=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(a),f=[],m=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),p=1/r.fontMetrics().ptPerEm,y=5*p;if(e.colSeparationType&&e.colSeparationType==="small"){var b=r.havingStyle(_t.SCRIPT).sizeMultiplier;y=.2778*(b/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?gn({number:3,unit:"ex"},r):12*p,S=3*p,w=e.arraystretch*T,k=.7*w,M=.3*w,C=0;function B(Ie){for(var se=0;se<Ie.length;++se)se>0&&(C+=.25),f.push({pos:C,isDashed:Ie[se]})}for(B(s[0]),n=0;n<e.body.length;++n){var R=e.body[n],I=k,A=M;c<R.length&&(c=R.length);var E=new Array(R.length);for(i=0;i<R.length;++i){var O=or(R[i],r);A<O.depth&&(A=O.depth),I<O.height&&(I=O.height),E[i]=O}var U=e.rowGaps[n],P=0;U&&(P=gn(U,r),P>0&&(P+=M,A<P&&(A=P),P=0)),e.addJot&&(A+=S),E.height=I,E.depth=A,C+=I,E.pos=C,C+=A+P,d[n]=E,B(s[n+1])}var V=C/2+r.fontMetrics().axisHeight,z=e.cols||[],Q=[],ee,K,Z=[];if(e.tags&&e.tags.some(Ie=>Ie))for(n=0;n<a;++n){var Y=d[n],pe=Y.pos-V,ae=e.tags[n],X=void 0;ae===!0?X=be.makeSpan(["eqn-num"],[],r):ae===!1?X=be.makeSpan([],[],r):X=be.makeSpan([],ni(ae,r,!0),r),X.depth=Y.depth,X.height=Y.height,Z.push({type:"elem",elem:X,shift:pe})}for(i=0,K=0;i<c||K<z.length;++i,++K){for(var J=z[K]||{},le=!0;J.type==="separator";){if(le||(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(r.fontMetrics().doubleRuleSep),Q.push(ee)),J.separator==="|"||J.separator===":"){var Ee=J.separator==="|"?"solid":"dashed",oe=be.makeSpan(["vertical-separator"],[],r);oe.style.height=Je(C),oe.style.borderRightWidth=Je(m),oe.style.borderRightStyle=Ee,oe.style.margin="0 "+Je(-m/2);var Oe=C-V;Oe&&(oe.style.verticalAlign=Je(-Oe)),Q.push(oe)}else throw new Ge("Invalid separator type: "+J.separator);K++,J=z[K]||{},le=!1}if(!(i>=c)){var Me=void 0;(i>0||e.hskipBeforeAndAfter)&&(Me=mr.deflt(J.pregap,y),Me!==0&&(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(Me),Q.push(ee)));var at=[];for(n=0;n<a;++n){var Ae=d[n],$e=Ae[i];if($e){var de=Ae.pos-V;$e.depth=Ae.depth,$e.height=Ae.height,at.push({type:"elem",elem:$e,shift:de})}}at=be.makeVList({positionType:"individualShift",children:at},r),at=be.makeSpan(["col-align-"+(J.align||"c")],[at]),Q.push(at),(i<c-1||e.hskipBeforeAndAfter)&&(Me=mr.deflt(J.postgap,y),Me!==0&&(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(Me),Q.push(ee)))}}if(d=be.makeSpan(["mtable"],Q),f.length>0){for(var ge=be.makeLineSpan("hline",r,m),Ye=be.makeLineSpan("hdashline",r,m),Ke=[{type:"elem",elem:d,shift:0}];f.length>0;){var it=f.pop(),ut=it.pos-V;it.isDashed?Ke.push({type:"elem",elem:Ye,shift:ut}):Ke.push({type:"elem",elem:ge,shift:ut})}d=be.makeVList({positionType:"individualShift",children:Ke},r)}if(Z.length===0)return be.makeSpan(["mord"],[d],r);var er=be.makeVList({positionType:"individualShift",children:Z},r);return er=be.makeSpan(["tag"],[er],r),be.makeFragment([d,er])},Uoe={c:"center ",l:"left ",r:"right "},Oo=function(e,r){for(var n=[],i=new qe.MathNode("mtd",[],["mtr-glue"]),a=new qe.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],f=0;f<c.length;f++)d.push(new qe.MathNode("mtd",[$r(c[f],r)]));e.tags&&e.tags[s]&&(d.unshift(i),d.push(i),e.leqno?d.unshift(a):d.push(a)),n.push(new qe.MathNode("mtr",d))}var m=new qe.MathNode("mtable",n),p=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);m.setAttribute("rowspacing",Je(p));var y="",b="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,k=0,M=T.length;T[0].type==="separator"&&(y+="top ",k=1),T[T.length-1].type==="separator"&&(y+="bottom ",M-=1);for(var C=k;C<M;C++)T[C].type==="align"?(b+=Uoe[T[C].align],w&&(S+="none "),w=!0):T[C].type==="separator"&&w&&(S+=T[C].separator==="|"?"solid ":"dashed ",w=!1);m.setAttribute("columnalign",b.trim()),/[sd]/.test(S)&&m.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var B=e.cols||[],R="",I=1;I<B.length;I++)R+=I%2?"0em ":"1em ";m.setAttribute("columnspacing",R.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var A="",E=e.hLinesBeforeRow;y+=E[0].length>0?"left ":"",y+=E[E.length-1].length>0?"right ":"";for(var O=1;O<E.length-1;O++)A+=E[O].length===0?"none ":E[O][0]?"dashed ":"solid ";return/[sd]/.test(A)&&m.setAttribute("rowlines",A.trim()),y!==""&&(m=new qe.MathNode("menclose",[m]),m.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(m=new qe.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},aq=function(e,r){e.envName.indexOf("ed")===-1&&Dx(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=su(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:$8(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,f={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var m="",p=0;p<r[0].body.length;p++){var y=$t(r[0].body[p],"textord");m+=y.text}c=Number(m),d=c*2}var b=!d;s.body.forEach(function(k){for(var M=1;M<k.length;M+=2){var C=$t(k[M],"styling"),B=$t(C.body[0],"ordgroup");B.body.unshift(f)}if(b)d<k.length&&(d=k.length);else{var R=k.length/2;if(c<R)throw new Ge("Too many math in a row: "+("expected "+c+", but got "+R),k[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&b&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=b?"align":"alignat",s};No({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=Rx(e[0]),n=r?[e[0]]:$t(e[0],"ordgroup").body,i=n.map(function(s){var c=D8(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Ge("Unknown column alignment: "+d,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return su(t.parser,a,V8(t.envName))},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new Ge("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=su(t.parser,n,V8(t.envName)),s=Math.max(0,...a.body.map(c=>c.length));return a.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=su(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=Rx(e[0]),n=r?[e[0]]:$t(e[0],"ordgroup").body,i=n.map(function(s){var c=D8(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Ge("Unknown column alignment: "+d,s)});if(i.length>1)throw new Ge("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=su(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Ge("{subarray} can contain only one column");return a},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=su(t.parser,e,V8(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:aq,htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&Dx(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:$8(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return su(t.parser,e,"display")},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:aq,htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Dx(t);var e={autoTag:$8(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return su(t.parser,e,"display")},htmlBuilder:ko,mathmlBuilder:Oo});No({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Dx(t),Aoe(t.parser)},htmlBuilder:ko,mathmlBuilder:Oo});G("\\nonumber","\\gdef\\@eqnsw{0}");G("\\notag","\\nonumber");nt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Ge(t.funcName+" valid only within array environment")}});var tI=nq;nt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new Ge("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=$t(i.body[s],"textord").text;if(n==="\\begin"){if(!tI.hasOwnProperty(a))throw new Ge("No such environment: "+a,i);var c=tI[a],{args:d,optArgs:f}=r.parseArguments("\\begin{"+a+"}",c),m={mode:r.mode,envName:a,parser:r},p=c.handler(m,d,f);r.expect("\\end",!1);var y=r.nextToken,b=$t(r.parseFunction(),"environment");if(b.name!==a)throw new Ge("Mismatch: \\begin{"+a+"} matched by \\end{"+b.name+"}",y);return p}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var sq=(t,e)=>{var r=t.font,n=e.withFont(r);return or(t.body,n)},oq=(t,e)=>{var r=t.font,n=e.withFont(r);return $r(t.body,n)},rI={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};nt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=Gv(e[0]),a=n;return a in rI&&(a=rI[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}},htmlBuilder:sq,mathmlBuilder:oq});nt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],i=mr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Mx(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});nt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:a}=r,s=r.parseExpression(!0,i),c="math"+n.slice(1);return{type:"font",mode:a,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:sq,mathmlBuilder:oq});var lq=(t,e)=>{var r=e;return t==="display"?r=r.id>=_t.SCRIPT.id?r.text():_t.DISPLAY:t==="text"&&r.size===_t.DISPLAY.size?r=_t.TEXT:t==="script"?r=_t.SCRIPT:t==="scriptscript"&&(r=_t.SCRIPTSCRIPT),r},F8=(t,e)=>{var r=lq(t.size,e.style),n=r.fracNum(),i=r.fracDen(),a;a=e.havingStyle(n);var s=or(t.numer,a,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}a=e.havingStyle(i);var f=or(t.denom,a,e),m,p,y;t.hasBarLine?(t.barSize?(p=gn(t.barSize,e),m=be.makeLineSpan("frac-line",e,p)):m=be.makeLineSpan("frac-line",e),p=m.height,y=m.height):(m=null,p=0,y=e.fontMetrics().defaultRuleThickness);var b,T,S;r.size===_t.DISPLAY.size||t.size==="display"?(b=e.fontMetrics().num1,p>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(p>0?(b=e.fontMetrics().num2,T=y):(b=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(m){var M=e.fontMetrics().axisHeight;b-s.depth-(M+.5*p)<T&&(b+=T-(b-s.depth-(M+.5*p))),M-.5*p-(f.height-S)<T&&(S+=T-(M-.5*p-(f.height-S)));var C=-(M-.5*p);w=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:m,shift:C},{type:"elem",elem:s,shift:-b}]},e)}else{var k=b-s.depth-(f.height-S);k<T&&(b+=.5*(T-k),S+=.5*(T-k)),w=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:s,shift:-b}]},e)}a=e.havingStyle(r),w.height*=a.sizeMultiplier/e.sizeMultiplier,w.depth*=a.sizeMultiplier/e.sizeMultiplier;var B;r.size===_t.DISPLAY.size?B=e.fontMetrics().delim1:r.size===_t.SCRIPTSCRIPT.size?B=e.havingStyle(_t.SCRIPT).fontMetrics().delim2:B=e.fontMetrics().delim2;var R,I;return t.leftDelim==null?R=Ap(e,["mopen"]):R=vl.customSizedDelim(t.leftDelim,B,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?I=be.makeSpan([]):t.rightDelim==null?I=Ap(e,["mclose"]):I=vl.customSizedDelim(t.rightDelim,B,!0,e.havingStyle(r),t.mode,["mclose"]),be.makeSpan(["mord"].concat(a.sizingClasses(e)),[R,be.makeSpan(["mfrac"],[w]),I],e)},q8=(t,e)=>{var r=new qe.MathNode("mfrac",[$r(t.numer,e),$r(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=gn(t.barSize,e);r.setAttribute("linethickness",Je(n))}var i=lq(t.size,e.style);if(i.size!==e.style.size){r=new qe.MathNode("mstyle",[r]);var a=i.size===_t.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new qe.MathNode("mo",[new qe.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new qe.MathNode("mo",[new qe.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return M8(s)}return r};nt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1],s,c=null,d=null,f="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:c,rightDelim:d,size:f,barSize:null}},htmlBuilder:F8,mathmlBuilder:q8});nt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});nt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var nI=["display","text","script","scriptscript"],iI=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};nt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],i=e[5],a=Gv(e[0]),s=a.type==="atom"&&a.family==="open"?iI(a.text):null,c=Gv(e[1]),d=c.type==="atom"&&c.family==="close"?iI(c.text):null,f=$t(e[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var y="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){var T=$t(b.body[0],"textord");y=nI[Number(T.text)]}}else b=$t(b,"textord"),y=nI[Number(b.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:m,barSize:p,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:F8,mathmlBuilder:q8});nt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:$t(e[0],"size").value,token:i}}});nt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=pse($t(e[1],"infix").size),s=e[2],c=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:c,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:F8,mathmlBuilder:q8});var cq=(t,e)=>{var r=e.style,n,i;t.type==="supsub"?(n=t.sup?or(t.sup,e.havingStyle(r.sup()),e):or(t.sub,e.havingStyle(r.sub()),e),i=$t(t.base,"horizBrace")):i=$t(t,"horizBrace");var a=or(i.base,e.havingBaseStyle(_t.DISPLAY)),s=jl.svgSpan(i,e),c;if(i.isOver?(c=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=be.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=be.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e);i.isOver?c=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=be.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return be.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e)},zoe=(t,e)=>{var r=jl.mathMLnode(t.label);return new qe.MathNode(t.isOver?"mover":"munder",[$r(t.base,e),r])};nt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:cq,mathmlBuilder:zoe});nt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],i=$t(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Mn(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=ni(t.body,e,!1);return be.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=tu(t.body,e);return r instanceof Ua||(r=new Ua("mrow",[r])),r.setAttribute("href",t.href),r}});nt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=$t(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Mn(c)}}});nt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Mn(e[0])}},htmlBuilder(t,e){var r=ni(t.body,e,!1);return be.makeFragment(r)},mathmlBuilder(t,e){return new qe.MathNode("mrow",Aa(t.body,e))}});nt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:i}=t,a=$t(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=a,c={command:"\\htmlClass",class:a};break;case"\\htmlId":d.id=a,c={command:"\\htmlId",id:a};break;case"\\htmlStyle":d.style=a,c={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m],y=p.indexOf("=");if(y<0)throw new Ge("\\htmlData key/value '"+p+"' missing equals sign");var b=p.slice(0,y),T=p.slice(y+1);d["data-"+b.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:Mn(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=ni(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=be.makeSpan(n,r,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&i.setAttribute(a,t.attributes[a]);return i},mathmlBuilder:(t,e)=>tu(t.body,e)});nt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Mn(e[0]),mathml:Mn(e[1])}},htmlBuilder:(t,e)=>{var r=ni(t.html,e,!1);return be.makeFragment(r)},mathmlBuilder:(t,e)=>tu(t.mathml,e)});var c5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Ge("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!kF(n))throw new Ge("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};nt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=$t(r[0],"raw").string,f=d.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var y=p[1].trim();switch(p[0].trim()){case"alt":c=y;break;case"width":i=c5(y);break;case"height":a=c5(y);break;case"totalheight":s=c5(y);break;default:throw new Ge("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var b=$t(e[0],"url").url;return c===""&&(c=b,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:b})?{type:"includegraphics",mode:n.mode,alt:c,width:i,height:a,totalheight:s,src:b}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=gn(t.height,e),n=0;t.totalheight.number>0&&(n=gn(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=gn(t.width,e));var a={height:Je(r+n)};i>0&&(a.width=Je(i)),n>0&&(a.verticalAlign=Je(-n));var s=new zse(t.src,t.alt,a);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new qe.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=gn(t.height,e),i=0;if(t.totalheight.number>0&&(i=gn(t.totalheight,e)-n,r.setAttribute("valign",Je(-i))),r.setAttribute("height",Je(n+i)),t.width.number>0){var a=gn(t.width,e);r.setAttribute("width",Je(a))}return r.setAttribute("src",t.src),r}});nt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=$t(e[0],"size");if(r.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(t,e){return be.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=gn(t.dimension,e);return new qe.SpaceNode(r)}});nt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=be.makeSpan([],[or(t.body,e)]),r=be.makeSpan(["inner"],[r],e)):r=be.makeSpan(["inner"],[or(t.body,e)]);var n=be.makeSpan(["fix"],[]),i=be.makeSpan([t.alignment],[r,n],e),a=be.makeSpan(["strut"]);return a.style.height=Je(i.height+i.depth),i.depth&&(a.style.verticalAlign=Je(-i.depth)),i.children.unshift(a),i=be.makeSpan(["thinbox"],[i],e),be.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var r=new qe.MathNode("mpadded",[$r(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});nt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}});nt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Ge("Mismatched "+t.funcName)}});var aI=(t,e)=>{switch(e.style.size){case _t.DISPLAY.size:return t.display;case _t.TEXT.size:return t.text;case _t.SCRIPT.size:return t.script;case _t.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};nt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Mn(e[0]),text:Mn(e[1]),script:Mn(e[2]),scriptscript:Mn(e[3])}},htmlBuilder:(t,e)=>{var r=aI(t,e),n=ni(r,e,!1);return be.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=aI(t,e);return tu(r,e)}});var uq=(t,e,r,n,i,a,s)=>{t=be.makeSpan([],[t]);var c=r&&mr.isCharacterBox(r),d,f;if(e){var m=or(e,n.havingStyle(i.sup()),n);f={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-m.depth)}}if(r){var p=or(r,n.havingStyle(i.sub()),n);d={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}var y;if(f&&d){var b=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=be.makeVList({positionType:"bottom",positionData:b,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:Je(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Je(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=be.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:Je(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(f){var S=t.depth+s;y=be.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Je(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&a!==0&&!c){var k=be.makeSpan(["mspace"],[],n);k.style.marginRight=Je(a),w.unshift(k)}return be.makeSpan(["mop","op-limits"],w,n)},dq=["\\smallint"],rf=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=$t(t.base,"op"),i=!0):a=$t(t,"op");var s=e.style,c=!1;s.size===_t.DISPLAY.size&&a.symbol&&!dq.includes(a.name)&&(c=!0);var d;if(a.symbol){var f=c?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),d=be.makeSymbol(a.name,f,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),m.length>0){var p=d.italic,y=be.staticSvg(m+"Size"+(c?"2":"1"),e);d=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),a.name="\\"+m,d.classes.unshift("mop"),d.italic=p}}else if(a.body){var b=ni(a.body,e,!0);b.length===1&&b[0]instanceof vs?(d=b[0],d.classes[0]="mop"):d=be.makeSpan(["mop"],b,e)}else{for(var T=[],S=1;S<a.name.length;S++)T.push(be.mathsym(a.name[S],a.mode,e));d=be.makeSpan(["mop"],T,e)}var w=0,k=0;return(d instanceof vs||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,k=d.italic),i?uq(d,r,n,e,s,k,w):(w&&(d.style.position="relative",d.style.top=Je(w)),d)},Og=(t,e)=>{var r;if(t.symbol)r=new Ua("mo",[bs(t.name,t.mode)]),dq.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Ua("mo",Aa(t.body,e));else{r=new Ua("mi",[new po(t.name.slice(1))]);var n=new Ua("mo",[bs("","text")]);t.parentIsSupSub?r=new Ua("mrow",[r,n]):r=UF([r,n])}return r},$oe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};nt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=$oe[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:rf,mathmlBuilder:Og});nt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Mn(n)}},htmlBuilder:rf,mathmlBuilder:Og});var Voe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};nt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:rf,mathmlBuilder:Og});nt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:rf,mathmlBuilder:Og});nt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Voe[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:rf,mathmlBuilder:Og});var hq=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=$t(t.base,"operatorname"),i=!0):a=$t(t,"operatorname");var s;if(a.body.length>0){for(var c=a.body.map(p=>{var y=p.text;return typeof y=="string"?{type:"textord",mode:p.mode,text:y}:p}),d=ni(c,e.withFont("mathrm"),!0),f=0;f<d.length;f++){var m=d[f];m instanceof vs&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=be.makeSpan(["mop"],d,e)}else s=be.makeSpan(["mop"],[],e);return i?uq(s,r,n,e,e.style,0,0):s},Foe=(t,e)=>{for(var r=Aa(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(!(a instanceof qe.SpaceNode))if(a instanceof qe.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof qe.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(m=>m.toText()).join("");r=[new qe.TextNode(c)]}var d=new qe.MathNode("mi",r);d.setAttribute("mathvariant","normal");var f=new qe.MathNode("mo",[bs("","text")]);return t.parentIsSupSub?new qe.MathNode("mrow",[d,f]):qe.newDocumentFragment([d,f])};nt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:Mn(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:hq,mathmlBuilder:Foe});G("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");U0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?be.makeFragment(ni(t.body,e,!1)):be.makeSpan(["mord"],ni(t.body,e,!0),e)},mathmlBuilder(t,e){return tu(t.body,e,!0)}});nt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=or(t.body,e.havingCrampedStyle()),n=be.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return be.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var r=new qe.MathNode("mo",[new qe.TextNode("")]);r.setAttribute("stretchy","true");var n=new qe.MathNode("mover",[$r(t.body,e),r]);return n.setAttribute("accent","true"),n}});nt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Mn(n)}},htmlBuilder:(t,e)=>{var r=ni(t.body,e.withPhantom(),!1);return be.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Aa(t.body,e);return new qe.MathNode("mphantom",r)}});nt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=be.makeSpan([],[or(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),be.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Aa(Mn(t.body),e),n=new qe.MathNode("mphantom",r),i=new qe.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});nt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=be.makeSpan(["inner"],[or(t.body,e.withPhantom())]),n=be.makeSpan(["fix"],[]);return be.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Aa(Mn(t.body),e),n=new qe.MathNode("mphantom",r),i=new qe.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});nt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=$t(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=or(t.body,e),n=gn(t.dy,e);return be.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new qe.MathNode("mpadded",[$r(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});nt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});nt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],a=$t(e[0],"size"),s=$t(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&$t(i,"size").value,width:a.value,height:s.value}},htmlBuilder(t,e){var r=be.makeSpan(["mord","rule"],[],e),n=gn(t.width,e),i=gn(t.height,e),a=t.shift?gn(t.shift,e):0;return r.style.borderRightWidth=Je(n),r.style.borderTopWidth=Je(i),r.style.bottom=Je(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=i*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=gn(t.width,e),n=gn(t.height,e),i=t.shift?gn(t.shift,e):0,a=e.color&&e.getColor()||"black",s=new qe.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",Je(r)),s.setAttribute("height",Je(n));var c=new qe.MathNode("mpadded",[s]);return i>=0?c.setAttribute("height",Je(i)):(c.setAttribute("height",Je(i)),c.setAttribute("depth",Je(-i))),c.setAttribute("voffset",Je(i)),c}});function fq(t,e,r){for(var n=ni(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return be.makeFragment(n)}var sI=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],qoe=(t,e)=>{var r=e.havingSize(t.size);return fq(t.body,r,e)};nt({type:"sizing",names:sI,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:sI.indexOf(n)+1,body:a}},htmlBuilder:qoe,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Aa(t.body,r),i=new qe.MathNode("mstyle",n);return i.setAttribute("mathsize",Je(r.sizeMultiplier)),i}});nt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,i=!1,a=!1,s=r[0]&&$t(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var f=s.body[d];if(c=f.text,c==="t")i=!0;else if(c==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var m=e[0];return{type:"smash",mode:n.mode,body:m,smashHeight:i,smashDepth:a}},htmlBuilder:(t,e)=>{var r=be.makeSpan([],[or(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return be.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var r=new qe.MathNode("mpadded",[$r(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});nt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(t,e){var r=or(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=be.wrapFragment(r,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<_t.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,c=r.height+r.depth+s+i,{span:d,ruleWidth:f,advanceWidth:m}=vl.sqrtImage(c,e),p=d.height-f;p>r.height+r.depth+s&&(s=(s+p-r.height-r.depth)/2);var y=d.height-r.height-s-f;r.style.paddingLeft=Je(m);var b=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:f}]},e);if(t.index){var T=e.havingStyle(_t.SCRIPTSCRIPT),S=or(t.index,T,e),w=.6*(b.height-b.depth),k=be.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),M=be.makeSpan(["root"],[k]);return be.makeSpan(["mord","sqrt"],[M,b],e)}else return be.makeSpan(["mord","sqrt"],[b],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new qe.MathNode("mroot",[$r(r,e),$r(n,e)]):new qe.MathNode("msqrt",[$r(r,e)])}});var oI={display:_t.DISPLAY,text:_t.TEXT,script:_t.SCRIPT,scriptscript:_t.SCRIPTSCRIPT};nt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(t,e){var r=oI[t.style],n=e.havingStyle(r).withFont("");return fq(t.body,n,e)},mathmlBuilder(t,e){var r=oI[t.style],n=e.havingStyle(r),i=Aa(t.body,n),a=new qe.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return a.setAttribute("scriptlevel",c[0]),a.setAttribute("displaystyle",c[1]),a}});var Hoe=function(e,r){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===_t.DISPLAY.size||n.alwaysHandleSupSub);return i?rf:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===_t.DISPLAY.size||n.limits);return a?hq:null}else{if(n.type==="accent")return mr.isCharacterBox(n.base)?L8:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?cq:null}else return null}else return null};U0({type:"supsub",htmlBuilder(t,e){var r=Hoe(t,e);if(r)return r(t,e);var{base:n,sup:i,sub:a}=t,s=or(n,e),c,d,f=e.fontMetrics(),m=0,p=0,y=n&&mr.isCharacterBox(n);if(i){var b=e.havingStyle(e.style.sup());c=or(i,b,e),y||(m=s.height-b.fontMetrics().supDrop*b.sizeMultiplier/e.sizeMultiplier)}if(a){var T=e.havingStyle(e.style.sub());d=or(a,T,e),y||(p=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===_t.DISPLAY?S=f.sup1:e.style.cramped?S=f.sup3:S=f.sup2;var w=e.sizeMultiplier,k=Je(.5/f.ptPerEm/w),M=null;if(d){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof vs||C)&&(M=Je(-s.italic))}var B;if(c&&d){m=Math.max(m,S,c.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var R=f.defaultRuleThickness,I=4*R;if(m-c.depth-(d.height-p)<I){p=I-(m-c.depth)+d.height;var A=.8*f.xHeight-(m-c.depth);A>0&&(m+=A,p-=A)}var E=[{type:"elem",elem:d,shift:p,marginRight:k,marginLeft:M},{type:"elem",elem:c,shift:-m,marginRight:k}];B=be.makeVList({positionType:"individualShift",children:E},e)}else if(d){p=Math.max(p,f.sub1,d.height-.8*f.xHeight);var O=[{type:"elem",elem:d,marginLeft:M,marginRight:k}];B=be.makeVList({positionType:"shift",positionData:p,children:O},e)}else if(c)m=Math.max(m,S,c.depth+.25*f.xHeight),B=be.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:c,marginRight:k}]},e);else throw new Error("supsub must have either sup or sub.");var U=ST(s,"right")||"mord";return be.makeSpan([U],[s,be.makeSpan(["msupsub"],[B])],e)},mathmlBuilder(t,e){var r=!1,n,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var a=[$r(t.base,e)];t.sub&&a.push($r(t.sub,e)),t.sup&&a.push($r(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var f=t.base;f&&f.type==="op"&&f.limits&&e.style===_t.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(e.style===_t.DISPLAY||f.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===_t.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===_t.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===_t.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===_t.DISPLAY)?s="mover":s="msup"}return new qe.MathNode(s,a)}});U0({type:"atom",htmlBuilder(t,e){return be.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new qe.MathNode("mo",[bs(t.text,t.mode)]);if(t.family==="bin"){var n=P8(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var mq={mi:"italic",mn:"normal",mtext:"normal"};U0({type:"mathord",htmlBuilder(t,e){return be.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new qe.MathNode("mi",[bs(t.text,t.mode,e)]),n=P8(t,e)||"italic";return n!==mq[r.type]&&r.setAttribute("mathvariant",n),r}});U0({type:"textord",htmlBuilder(t,e){return be.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=bs(t.text,t.mode,e),n=P8(t,e)||"normal",i;return t.mode==="text"?i=new qe.MathNode("mtext",[r]):/[0-9]/.test(t.text)?i=new qe.MathNode("mn",[r]):t.text==="\\prime"?i=new qe.MathNode("mo",[r]):i=new qe.MathNode("mi",[r]),n!==mq[i.type]&&i.setAttribute("mathvariant",n),i}});var u5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},d5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};U0({type:"spacing",htmlBuilder(t,e){if(d5.hasOwnProperty(t.text)){var r=d5[t.text].className||"";if(t.mode==="text"){var n=be.makeOrd(t,e,"textord");return n.classes.push(r),n}else return be.makeSpan(["mspace",r],[be.mathsym(t.text,t.mode,e)],e)}else{if(u5.hasOwnProperty(t.text))return be.makeSpan(["mspace",u5[t.text]],[],e);throw new Ge('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(d5.hasOwnProperty(t.text))r=new qe.MathNode("mtext",[new qe.TextNode("")]);else{if(u5.hasOwnProperty(t.text))return new qe.MathNode("mspace");throw new Ge('Unknown type of space "'+t.text+'"')}return r}});var lI=()=>{var t=new qe.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};U0({type:"tag",mathmlBuilder(t,e){var r=new qe.MathNode("mtable",[new qe.MathNode("mtr",[lI(),new qe.MathNode("mtd",[tu(t.body,e)]),lI(),new qe.MathNode("mtd",[tu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var cI={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},uI={"\\textbf":"textbf","\\textmd":"textmd"},Goe={"\\textit":"textit","\\textup":"textup"},dI=(t,e)=>{var r=t.font;if(r){if(cI[r])return e.withTextFontFamily(cI[r]);if(uI[r])return e.withTextFontWeight(uI[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Goe[r])};nt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:Mn(i),font:n}},htmlBuilder(t,e){var r=dI(t,e),n=ni(t.body,r,!0);return be.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=dI(t,e);return tu(t.body,r)}});nt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=or(t.body,e),n=be.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=be.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return be.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var r=new qe.MathNode("mo",[new qe.TextNode("")]);r.setAttribute("stretchy","true");var n=new qe.MathNode("munder",[$r(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});nt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=or(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return be.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new qe.MathNode("mpadded",[$r(t.body,e)],["vcenter"])}});nt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Ge("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=hI(t),n=[],i=e.havingStyle(e.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),n.push(be.makeSymbol(s,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return be.makeSpan(["mord","text"].concat(i.sizingClasses(e)),be.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new qe.TextNode(hI(t)),n=new qe.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var hI=t=>t.body.replace(/ /g,t.star?"":""),Pc=LF,pq=`[ \r
	]`,Koe="\\\\[a-zA-Z@]+",Woe="\\\\[^\uD800-\uDFFF]",Xoe="("+Koe+")"+pq+"*",Qoe=`\\\\(
|[ \r	]+
?)[ \r	]*`,NT="[-]",Yoe=new RegExp(NT+"+$"),Zoe="("+pq+"+)|"+(Qoe+"|")+"([!-\\[\\]---]"+(NT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(NT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Xoe)+("|"+Woe+")");class fI{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Zoe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Ga("EOF",new va(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Ge("Unexpected character: '"+e[r]+"'",new Ga(e[r],new va(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Ga(i,new va(this,r,this.tokenRegex.lastIndex))}}class Joe{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ge("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var ele=iq;G("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});G("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});G("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});G("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});G("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});G("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");G("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var mI={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};G("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ge("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=mI[e.text],n==null||n>=r)throw new Ge("Invalid base-"+r+" digit "+e.text);for(var i;(i=mI[t.future().text])!=null&&i<r;)n*=r,n+=i,t.popToken()}return"\\@char{"+n+"}"});var H8=(t,e,r,n)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new Ge("\\newcommand's first argument must be a macro name");var a=i[0].text,s=t.isDefined(a);if(s&&!e)throw new Ge("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!r)throw new Ge("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var c=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var d="",f=t.expandNextToken();f.text!=="]"&&f.text!=="EOF";)d+=f.text,f=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Ge("Invalid number of arguments: "+d);c=parseInt(d),i=t.consumeArg().tokens}return s&&n||t.macros.set(a,{tokens:i,numArgs:c}),""};G("\\newcommand",t=>H8(t,!1,!0,!1));G("\\renewcommand",t=>H8(t,!0,!1,!1));G("\\providecommand",t=>H8(t,!0,!0,!0));G("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});G("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});G("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Pc[r],Zr.math[r],Zr.text[r]),""});G("\\bgroup","{");G("\\egroup","}");G("~","\\nobreakspace");G("\\lq","`");G("\\rq","'");G("\\aa","\\r a");G("\\AA","\\r A");G("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");G("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");G("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");G("","\\mathscr{B}");G("","\\mathscr{E}");G("","\\mathscr{F}");G("","\\mathscr{H}");G("","\\mathscr{I}");G("","\\mathscr{L}");G("","\\mathscr{M}");G("","\\mathscr{R}");G("","\\mathfrak{C}");G("","\\mathfrak{H}");G("","\\mathfrak{Z}");G("\\Bbbk","\\Bbb{k}");G("","\\cdotp");G("\\llap","\\mathllap{\\textrm{#1}}");G("\\rlap","\\mathrlap{\\textrm{#1}}");G("\\clap","\\mathclap{\\textrm{#1}}");G("\\mathstrut","\\vphantom{(}");G("\\underbar","\\underline{\\text{#1}}");G("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');G("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");G("\\ne","\\neq");G("","\\neq");G("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");G("","\\notin");G("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");G("","\\perp");G("","\\mathclose{!\\mkern-0.8mu!}");G("","\\notni");G("","\\ulcorner");G("","\\urcorner");G("","\\llcorner");G("","\\lrcorner");G("","\\copyright");G("","\\textregistered");G("","\\textregistered");G("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');G("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');G("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');G("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');G("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");G("","\\vdots");G("\\varGamma","\\mathit{\\Gamma}");G("\\varDelta","\\mathit{\\Delta}");G("\\varTheta","\\mathit{\\Theta}");G("\\varLambda","\\mathit{\\Lambda}");G("\\varXi","\\mathit{\\Xi}");G("\\varPi","\\mathit{\\Pi}");G("\\varSigma","\\mathit{\\Sigma}");G("\\varUpsilon","\\mathit{\\Upsilon}");G("\\varPhi","\\mathit{\\Phi}");G("\\varPsi","\\mathit{\\Psi}");G("\\varOmega","\\mathit{\\Omega}");G("\\substack","\\begin{subarray}{c}#1\\end{subarray}");G("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");G("\\boxed","\\fbox{$\\displaystyle{#1}$}");G("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");G("\\implies","\\DOTSB\\;\\Longrightarrow\\;");G("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");G("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");G("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var pI={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};G("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in pI?e=pI[r]:(r.slice(0,4)==="\\not"||r in Zr.math&&["bin","rel"].includes(Zr.math[r].group))&&(e="\\dotsb"),e});var G8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};G("\\dotso",function(t){var e=t.future().text;return e in G8?"\\ldots\\,":"\\ldots"});G("\\dotsc",function(t){var e=t.future().text;return e in G8&&e!==","?"\\ldots\\,":"\\ldots"});G("\\cdots",function(t){var e=t.future().text;return e in G8?"\\@cdots\\,":"\\@cdots"});G("\\dotsb","\\cdots");G("\\dotsm","\\cdots");G("\\dotsi","\\!\\cdots");G("\\dotsx","\\ldots\\,");G("\\DOTSI","\\relax");G("\\DOTSB","\\relax");G("\\DOTSX","\\relax");G("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");G("\\,","\\tmspace+{3mu}{.1667em}");G("\\thinspace","\\,");G("\\>","\\mskip{4mu}");G("\\:","\\tmspace+{4mu}{.2222em}");G("\\medspace","\\:");G("\\;","\\tmspace+{5mu}{.2777em}");G("\\thickspace","\\;");G("\\!","\\tmspace-{3mu}{.1667em}");G("\\negthinspace","\\!");G("\\negmedspace","\\tmspace-{4mu}{.2222em}");G("\\negthickspace","\\tmspace-{5mu}{.277em}");G("\\enspace","\\kern.5em ");G("\\enskip","\\hskip.5em\\relax");G("\\quad","\\hskip1em\\relax");G("\\qquad","\\hskip2em\\relax");G("\\tag","\\@ifstar\\tag@literal\\tag@paren");G("\\tag@paren","\\tag@literal{({#1})}");G("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Ge("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});G("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");G("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");G("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");G("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");G("\\newline","\\\\\\relax");G("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var gq=Je(mo["Main-Regular"][84][1]-.7*mo["Main-Regular"][65][1]);G("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+gq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");G("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+gq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");G("\\hspace","\\@ifstar\\@hspacer\\@hspace");G("\\@hspace","\\hskip #1\\relax");G("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");G("\\ordinarycolon",":");G("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");G("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');G("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');G("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');G("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');G("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');G("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');G("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');G("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');G("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');G("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');G("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');G("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');G("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');G("","\\dblcolon");G("","\\eqcolon");G("","\\coloneqq");G("","\\eqqcolon");G("","\\Coloneqq");G("\\ratio","\\vcentcolon");G("\\coloncolon","\\dblcolon");G("\\colonequals","\\coloneqq");G("\\coloncolonequals","\\Coloneqq");G("\\equalscolon","\\eqqcolon");G("\\equalscoloncolon","\\Eqqcolon");G("\\colonminus","\\coloneq");G("\\coloncolonminus","\\Coloneq");G("\\minuscolon","\\eqcolon");G("\\minuscoloncolon","\\Eqcolon");G("\\coloncolonapprox","\\Colonapprox");G("\\coloncolonsim","\\Colonsim");G("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");G("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");G("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");G("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");G("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");G("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");G("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");G("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");G("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");G("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");G("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");G("\\ngeqq","\\html@mathml{\\@ngeqq}{}");G("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");G("\\nleqq","\\html@mathml{\\@nleqq}{}");G("\\nleqslant","\\html@mathml{\\@nleqslant}{}");G("\\nshortmid","\\html@mathml{\\@nshortmid}{}");G("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");G("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");G("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");G("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");G("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");G("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");G("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");G("\\imath","\\html@mathml{\\@imath}{}");G("\\jmath","\\html@mathml{\\@jmath}{}");G("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");G("","\\llbracket");G("","\\rrbracket");G("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");G("","\\lBrace");G("","\\rBrace");G("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");G("","\\minuso");G("\\darr","\\downarrow");G("\\dArr","\\Downarrow");G("\\Darr","\\Downarrow");G("\\lang","\\langle");G("\\rang","\\rangle");G("\\uarr","\\uparrow");G("\\uArr","\\Uparrow");G("\\Uarr","\\Uparrow");G("\\N","\\mathbb{N}");G("\\R","\\mathbb{R}");G("\\Z","\\mathbb{Z}");G("\\alef","\\aleph");G("\\alefsym","\\aleph");G("\\Alpha","\\mathrm{A}");G("\\Beta","\\mathrm{B}");G("\\bull","\\bullet");G("\\Chi","\\mathrm{X}");G("\\clubs","\\clubsuit");G("\\cnums","\\mathbb{C}");G("\\Complex","\\mathbb{C}");G("\\Dagger","\\ddagger");G("\\diamonds","\\diamondsuit");G("\\empty","\\emptyset");G("\\Epsilon","\\mathrm{E}");G("\\Eta","\\mathrm{H}");G("\\exist","\\exists");G("\\harr","\\leftrightarrow");G("\\hArr","\\Leftrightarrow");G("\\Harr","\\Leftrightarrow");G("\\hearts","\\heartsuit");G("\\image","\\Im");G("\\infin","\\infty");G("\\Iota","\\mathrm{I}");G("\\isin","\\in");G("\\Kappa","\\mathrm{K}");G("\\larr","\\leftarrow");G("\\lArr","\\Leftarrow");G("\\Larr","\\Leftarrow");G("\\lrarr","\\leftrightarrow");G("\\lrArr","\\Leftrightarrow");G("\\Lrarr","\\Leftrightarrow");G("\\Mu","\\mathrm{M}");G("\\natnums","\\mathbb{N}");G("\\Nu","\\mathrm{N}");G("\\Omicron","\\mathrm{O}");G("\\plusmn","\\pm");G("\\rarr","\\rightarrow");G("\\rArr","\\Rightarrow");G("\\Rarr","\\Rightarrow");G("\\real","\\Re");G("\\reals","\\mathbb{R}");G("\\Reals","\\mathbb{R}");G("\\Rho","\\mathrm{P}");G("\\sdot","\\cdot");G("\\sect","\\S");G("\\spades","\\spadesuit");G("\\sub","\\subset");G("\\sube","\\subseteq");G("\\supe","\\supseteq");G("\\Tau","\\mathrm{T}");G("\\thetasym","\\vartheta");G("\\weierp","\\wp");G("\\Zeta","\\mathrm{Z}");G("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");G("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");G("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");G("\\bra","\\mathinner{\\langle{#1}|}");G("\\ket","\\mathinner{|{#1}\\rangle}");G("\\braket","\\mathinner{\\langle{#1}\\rangle}");G("\\Bra","\\left\\langle#1\\right|");G("\\Ket","\\left|#1\\right\\rangle");var yq=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=p=>y=>{t&&(y.macros.set("|",s),i.length&&y.macros.set("\\|",c));var b=p;if(!p&&i.length){var T=y.future();T.text==="|"&&(y.popToken(),b=!0)}return{tokens:b?i:n,numArgs:0}};e.macros.set("|",d(!1)),i.length&&e.macros.set("\\|",d(!0));var f=e.consumeArg().tokens,m=e.expandTokens([...a,...f,...r]);return e.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};G("\\bra@ket",yq(!1));G("\\bra@set",yq(!0));G("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");G("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");G("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");G("\\angln","{\\angl n}");G("\\blue","\\textcolor{##6495ed}{#1}");G("\\orange","\\textcolor{##ffa500}{#1}");G("\\pink","\\textcolor{##ff00af}{#1}");G("\\red","\\textcolor{##df0030}{#1}");G("\\green","\\textcolor{##28ae7b}{#1}");G("\\gray","\\textcolor{gray}{#1}");G("\\purple","\\textcolor{##9d38bd}{#1}");G("\\blueA","\\textcolor{##ccfaff}{#1}");G("\\blueB","\\textcolor{##80f6ff}{#1}");G("\\blueC","\\textcolor{##63d9ea}{#1}");G("\\blueD","\\textcolor{##11accd}{#1}");G("\\blueE","\\textcolor{##0c7f99}{#1}");G("\\tealA","\\textcolor{##94fff5}{#1}");G("\\tealB","\\textcolor{##26edd5}{#1}");G("\\tealC","\\textcolor{##01d1c1}{#1}");G("\\tealD","\\textcolor{##01a995}{#1}");G("\\tealE","\\textcolor{##208170}{#1}");G("\\greenA","\\textcolor{##b6ffb0}{#1}");G("\\greenB","\\textcolor{##8af281}{#1}");G("\\greenC","\\textcolor{##74cf70}{#1}");G("\\greenD","\\textcolor{##1fab54}{#1}");G("\\greenE","\\textcolor{##0d923f}{#1}");G("\\goldA","\\textcolor{##ffd0a9}{#1}");G("\\goldB","\\textcolor{##ffbb71}{#1}");G("\\goldC","\\textcolor{##ff9c39}{#1}");G("\\goldD","\\textcolor{##e07d10}{#1}");G("\\goldE","\\textcolor{##a75a05}{#1}");G("\\redA","\\textcolor{##fca9a9}{#1}");G("\\redB","\\textcolor{##ff8482}{#1}");G("\\redC","\\textcolor{##f9685d}{#1}");G("\\redD","\\textcolor{##e84d39}{#1}");G("\\redE","\\textcolor{##bc2612}{#1}");G("\\maroonA","\\textcolor{##ffbde0}{#1}");G("\\maroonB","\\textcolor{##ff92c6}{#1}");G("\\maroonC","\\textcolor{##ed5fa6}{#1}");G("\\maroonD","\\textcolor{##ca337c}{#1}");G("\\maroonE","\\textcolor{##9e034e}{#1}");G("\\purpleA","\\textcolor{##ddd7ff}{#1}");G("\\purpleB","\\textcolor{##c6b9fc}{#1}");G("\\purpleC","\\textcolor{##aa87ff}{#1}");G("\\purpleD","\\textcolor{##7854ab}{#1}");G("\\purpleE","\\textcolor{##543b78}{#1}");G("\\mintA","\\textcolor{##f5f9e8}{#1}");G("\\mintB","\\textcolor{##edf2df}{#1}");G("\\mintC","\\textcolor{##e0e5cc}{#1}");G("\\grayA","\\textcolor{##f6f7f7}{#1}");G("\\grayB","\\textcolor{##f0f1f2}{#1}");G("\\grayC","\\textcolor{##e3e5e6}{#1}");G("\\grayD","\\textcolor{##d6d8da}{#1}");G("\\grayE","\\textcolor{##babec2}{#1}");G("\\grayF","\\textcolor{##888d93}{#1}");G("\\grayG","\\textcolor{##626569}{#1}");G("\\grayH","\\textcolor{##3b3e40}{#1}");G("\\grayI","\\textcolor{##21242c}{#1}");G("\\kaBlue","\\textcolor{##314453}{#1}");G("\\kaGreen","\\textcolor{##71B307}{#1}");var vq={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class tle{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Joe(ele,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new fI(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new Ga("EOF",n.loc)),this.pushTokens(i),new Ga("",va.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,c=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new Ge("Extra }",a)}else if(a.text==="EOF")throw new Ge("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[c]==="{")&&a.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:a}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Ge("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new Ge("Use of the macro doesn't match its definition",a)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ge("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new Ge("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var c=a.length-1;c>=0;--c){var d=a[c];if(d.text==="#"){if(c===0)throw new Ge("Incomplete placeholder at end of macro body",d);if(d=a[--c],d.text==="#")a.splice(c+1,1);else if(/^[1-9]$/.test(d.text))a.splice(c,2,...s[+d.text-1]);else throw new Ge("Not a valid argument number",d)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Ga(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var c=new fI(i,this.settings),d=[],f=c.lex();f.text!=="EOF";)d.push(f),f=c.lex();d.reverse();var m={tokens:d,numArgs:a};return m}return i}isDefined(e){return this.macros.has(e)||Pc.hasOwnProperty(e)||Zr.math.hasOwnProperty(e)||Zr.text.hasOwnProperty(e)||vq.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Pc.hasOwnProperty(e)&&!Pc[e].primitive}}var gI=/^[]/,Cy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),h5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},yI={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Lx{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new tle(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Ge("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Ga("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(Lx.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Pc[i.text]&&Pc[i.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(r!==-1)throw new Ge("only one infix operator per group",e[i].token);r=i,n=e[i].replaceWith}if(r!==-1&&n){var a,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var f;return n==="\\\\abovefrac"?f=this.callFunction(n,[a,e[r],s],[]):f=this.callFunction(n,[a,s],[]),[f]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new Ge("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var s=a.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new Ge("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new Ge("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new Ge("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new Ge("Double superscript",a);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Cy[a.text]){var f=gI.test(a.text),m=[];for(m.push(new Ga(Cy[a.text])),this.consume();;){var p=this.fetch().text;if(!Cy[p]||gI.test(p)!==f)break;m.unshift(new Ga(Cy[p])),this.consume()}var y=this.subparse(m);f?i={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(e,r){var n=this.fetch(),i=n.text,a=Pc[i];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new Ge("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new Ge("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new Ge("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(i,a);return this.callFunction(i,s,c,n,e)}callFunction(e,r,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},c=Pc[e];if(c&&c.handler)return c.handler(s,r,n);throw new Ge("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(c="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)a.push(f);else if(f!=null)i.push(f);else throw new Ge("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new Ge("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new Ge("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Ge("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,r){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new Ge("Invalid "+r+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Ge("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new Ge("Invalid size: '"+r.text+"'",r);var a={number:+(i[1]+i[2]),unit:i[3]};if(!kF(a))throw new Ge("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(i),s}parseGroup(e,r){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:va.range(n,d),body:c,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!vq.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Ge("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:va.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:va.range(i,e[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:va.range(i,e[n+1]),text:a+a}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Ge(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}yI.hasOwnProperty(r[0])&&!Zr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=yI[r[0]]+r.slice(1));var a=Yoe.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var s;if(Zr[this.mode][r]){this.settings.strict&&this.mode==="math"&&_T.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Zr[this.mode][r].group,d=va.range(e),f;if(Fse.hasOwnProperty(c)){var m=c;f={type:"atom",mode:this.mode,family:m,loc:d,text:r}}else f={type:c,mode:this.mode,loc:d,text:r};s=f}else if(r.charCodeAt(0)>=128)this.settings.strict&&(NF(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:va.range(e),text:r};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var y=a[0][p];if(!h5[y])throw new Ge("Unknown accent ' "+y+"'",e);var b=h5[y][this.mode]||h5[y].text;if(!b)throw new Ge("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:va.range(e),label:b,isStretchy:!1,isShifty:!0,base:s}}return s}}Lx.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var K8=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Lx(e,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Ge("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new Ga("\\df@tag")])}]}return i},bq=function(e,r,n){r.textContent="";var i=W8(e,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),bq=function(){throw new Ge("KaTeX doesn't work in quirks mode.")});var rle=function(e,r){var n=W8(e,r).toMarkup();return n},nle=function(e,r){var n=new O8(r);return K8(e,n)},xq=function(e,r,n){if(n.throwOnError||!(e instanceof Ge))throw e;var i=be.makeSpan(["katex-error"],[new vs(r)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},W8=function(e,r){var n=new O8(r);try{var i=K8(e,n);return hoe(i,e,n)}catch(a){return xq(a,e,n)}},ile=function(e,r){var n=new O8(r);try{var i=K8(e,n);return foe(i,e,n)}catch(a){return xq(a,e,n)}},ale="0.16.28",sle={Span:kg,Anchor:I8,SymbolNode:vs,SvgNode:kl,PathNode:eu,LineNode:wT},Kv={version:ale,render:bq,renderToString:rle,ParseError:Ge,SETTINGS_SCHEMA:dv,__parse:nle,__renderToDomTree:W8,__renderToHTMLTree:ile,__setFontMetrics:Pse,__defineSymbol:N,__defineFunction:nt,__defineMacro:G,__domTree:sle};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function kT(t,e){return kT=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},kT(t,e)}function ole(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fv(t,e,r){return ole()?fv=Reflect.construct:fv=function(i,a,s){var c=[null];c.push.apply(c,a);var d=Function.bind.apply(i,c),f=new d;return s&&kT(f,s.prototype),f},fv.apply(null,arguments)}function Ps(t){return lle(t)||cle(t)||ule(t)||dle()}function lle(t){if(Array.isArray(t))return OT(t)}function cle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ule(t,e){if(t){if(typeof t=="string")return OT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(t,e)}}function OT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hle=Object.hasOwnProperty,vI=Object.setPrototypeOf,fle=Object.isFrozen,mle=Object.getPrototypeOf,ple=Object.getOwnPropertyDescriptor,ia=Object.freeze,xs=Object.seal,gle=Object.create,wq=typeof Reflect<"u"&&Reflect,Wv=wq.apply,jT=wq.construct;Wv||(Wv=function(e,r,n){return e.apply(r,n)});ia||(ia=function(e){return e});xs||(xs=function(e){return e});jT||(jT=function(e,r){return fv(e,Ps(r))});var yle=ws(Array.prototype.forEach),bI=ws(Array.prototype.pop),mm=ws(Array.prototype.push),mv=ws(String.prototype.toLowerCase),f5=ws(String.prototype.toString),xI=ws(String.prototype.match),Rs=ws(String.prototype.replace),vle=ws(String.prototype.indexOf),ble=ws(String.prototype.trim),_i=ws(RegExp.prototype.test),m5=xle(TypeError);function ws(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Wv(t,e,n)}}function xle(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return jT(t,r)}}function Ft(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:mv,vI&&vI(t,null);for(var i=e.length;i--;){var a=e[i];if(typeof a=="string"){var s=r(a);s!==a&&(fle(e)||(e[i]=s),a=s)}t[a]=!0}return t}function $u(t){var e=gle(null),r;for(r in t)Wv(hle,t,[r])===!0&&(e[r]=t[r]);return e}function Iy(t,e){for(;t!==null;){var r=ple(t,e);if(r){if(r.get)return ws(r.get);if(typeof r.value=="function")return ws(r.value)}t=mle(t)}function n(i){return console.warn("fallback value for",i),null}return n}var wI=ia(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),p5=ia(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),g5=ia(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wle=ia(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),y5=ia(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),_le=ia(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_I=ia(["#text"]),SI=ia(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),v5=ia(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TI=ia(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ry=ia(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sle=xs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Tle=xs(/<%[\w\W]*|[\w\W]*%>/gm),Ale=xs(/\${[\w\W]*}/gm),Ele=xs(/^data-[\-\w.\u00B7-\uFFFF]+$/),Nle=xs(/^aria-[\-\w]+$/),kle=xs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ole=xs(/^(?:\w+script|data):/i),jle=xs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cle=xs(/^html$/i),Ile=xs(/^[a-z][.\w]*(-[.\w]+)+$/i),Rle=function(){return typeof window>"u"?null:window},Mle=function(e,r){if(Ic(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function _q(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rle(),e=function(ce){return _q(ce)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,f=t.NamedNodeMap,m=f===void 0?t.NamedNodeMap||t.MozNamedAttrMap:f,p=t.HTMLFormElement,y=t.DOMParser,b=t.trustedTypes,T=c.prototype,S=Iy(T,"cloneNode"),w=Iy(T,"nextSibling"),k=Iy(T,"childNodes"),M=Iy(T,"parentNode");if(typeof a=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var B=Mle(b,r),R=B?B.createHTML(""):"",I=n,A=I.implementation,E=I.createNodeIterator,O=I.createDocumentFragment,U=I.getElementsByTagName,P=r.importNode,V={};try{V=$u(n).documentMode?n.documentMode:{}}catch{}var z={};e.isSupported=typeof M=="function"&&A&&A.createHTMLDocument!==void 0&&V!==9;var Q=Sle,ee=Tle,K=Ale,Z=Ele,Y=Nle,pe=Ole,ae=jle,X=Ile,J=kle,le=null,Ee=Ft({},[].concat(Ps(wI),Ps(p5),Ps(g5),Ps(y5),Ps(_I))),oe=null,Oe=Ft({},[].concat(Ps(SI),Ps(v5),Ps(TI),Ps(Ry))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,Ae=null,$e=!0,de=!0,ge=!1,Ye=!0,Ke=!1,it=!0,ut=!1,er=!1,Ie=!1,se=!1,Ve=!1,rt=!1,bt=!0,Ze=!1,Tt="user-content-",Vt=!0,Bt=!1,At={},nr=null,an=Ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qr=null,Yn=Ft({},["audio","video","img","source","image","track"]),dn=null,pi=Ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Br="http://www.w3.org/1998/Math/MathML",hn="http://www.w3.org/2000/svg",lr="http://www.w3.org/1999/xhtml",Ci=lr,Qa=!1,Ts=null,As=Ft({},[Br,hn,lr],f5),Ln,gr=["application/xhtml+xml","text/html"],Bn="text/html",tr,gi=null,Xs=n.createElement("form"),Es=function(ce){return ce instanceof RegExp||ce instanceof Function},Ii=function(ce){gi&&gi===ce||((!ce||Ic(ce)!=="object")&&(ce={}),ce=$u(ce),Ln=gr.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Ln=Bn:Ln=ce.PARSER_MEDIA_TYPE,tr=Ln==="application/xhtml+xml"?f5:mv,le="ALLOWED_TAGS"in ce?Ft({},ce.ALLOWED_TAGS,tr):Ee,oe="ALLOWED_ATTR"in ce?Ft({},ce.ALLOWED_ATTR,tr):Oe,Ts="ALLOWED_NAMESPACES"in ce?Ft({},ce.ALLOWED_NAMESPACES,f5):As,dn="ADD_URI_SAFE_ATTR"in ce?Ft($u(pi),ce.ADD_URI_SAFE_ATTR,tr):pi,qr="ADD_DATA_URI_TAGS"in ce?Ft($u(Yn),ce.ADD_DATA_URI_TAGS,tr):Yn,nr="FORBID_CONTENTS"in ce?Ft({},ce.FORBID_CONTENTS,tr):an,at="FORBID_TAGS"in ce?Ft({},ce.FORBID_TAGS,tr):{},Ae="FORBID_ATTR"in ce?Ft({},ce.FORBID_ATTR,tr):{},At="USE_PROFILES"in ce?ce.USE_PROFILES:!1,$e=ce.ALLOW_ARIA_ATTR!==!1,de=ce.ALLOW_DATA_ATTR!==!1,ge=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Ye=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=ce.SAFE_FOR_TEMPLATES||!1,it=ce.SAFE_FOR_XML!==!1,ut=ce.WHOLE_DOCUMENT||!1,se=ce.RETURN_DOM||!1,Ve=ce.RETURN_DOM_FRAGMENT||!1,rt=ce.RETURN_TRUSTED_TYPE||!1,Ie=ce.FORCE_BODY||!1,bt=ce.SANITIZE_DOM!==!1,Ze=ce.SANITIZE_NAMED_PROPS||!1,Vt=ce.KEEP_CONTENT!==!1,Bt=ce.IN_PLACE||!1,J=ce.ALLOWED_URI_REGEXP||J,Ci=ce.NAMESPACE||lr,Me=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&Es(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&Es(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Me.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(de=!1),Ve&&(se=!0),At&&(le=Ft({},Ps(_I)),oe=[],At.html===!0&&(Ft(le,wI),Ft(oe,SI)),At.svg===!0&&(Ft(le,p5),Ft(oe,v5),Ft(oe,Ry)),At.svgFilters===!0&&(Ft(le,g5),Ft(oe,v5),Ft(oe,Ry)),At.mathMl===!0&&(Ft(le,y5),Ft(oe,TI),Ft(oe,Ry))),ce.ADD_TAGS&&(le===Ee&&(le=$u(le)),Ft(le,ce.ADD_TAGS,tr)),ce.ADD_ATTR&&(oe===Oe&&(oe=$u(oe)),Ft(oe,ce.ADD_ATTR,tr)),ce.ADD_URI_SAFE_ATTR&&Ft(dn,ce.ADD_URI_SAFE_ATTR,tr),ce.FORBID_CONTENTS&&(nr===an&&(nr=$u(nr)),Ft(nr,ce.FORBID_CONTENTS,tr)),Vt&&(le["#text"]=!0),ut&&Ft(le,["html","head","body"]),le.table&&(Ft(le,["tbody"]),delete at.tbody),ia&&ia(ce),gi=ce)},sa=Ft({},["mi","mo","mn","ms","mtext"]),fn=Ft({},["annotation-xml"]),Qs=Ft({},["title","style","font","a","script"]),Ri=Ft({},p5);Ft(Ri,g5),Ft(Ri,wle);var Hi=Ft({},y5);Ft(Hi,_le);var Ys=function(ce){var Le=M(ce);(!Le||!Le.tagName)&&(Le={namespaceURI:Ci,tagName:"template"});var Xe=mv(ce.tagName),jt=mv(Le.tagName);return Ts[ce.namespaceURI]?ce.namespaceURI===hn?Le.namespaceURI===lr?Xe==="svg":Le.namespaceURI===Br?Xe==="svg"&&(jt==="annotation-xml"||sa[jt]):!!Ri[Xe]:ce.namespaceURI===Br?Le.namespaceURI===lr?Xe==="math":Le.namespaceURI===hn?Xe==="math"&&fn[jt]:!!Hi[Xe]:ce.namespaceURI===lr?Le.namespaceURI===hn&&!fn[jt]||Le.namespaceURI===Br&&!sa[jt]?!1:!Hi[Xe]&&(Qs[Xe]||!Ri[Xe]):!!(Ln==="application/xhtml+xml"&&Ts[ce.namespaceURI]):!1},kn=function(ce){mm(e.removed,{element:ce});try{ce.parentNode.removeChild(ce)}catch{try{ce.outerHTML=R}catch{ce.remove()}}},yi=function(ce,Le){try{mm(e.removed,{attribute:Le.getAttributeNode(ce),from:Le})}catch{mm(e.removed,{attribute:null,from:Le})}if(Le.removeAttribute(ce),ce==="is"&&!oe[ce])if(se||Ve)try{kn(Le)}catch{}else try{Le.setAttribute(ce,"")}catch{}},Zs=function(ce){var Le,Xe;if(Ie)ce="<remove></remove>"+ce;else{var jt=xI(ce,/^[\r\n\t ]+/);Xe=jt&&jt[0]}Ln==="application/xhtml+xml"&&Ci===lr&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");var qt=B?B.createHTML(ce):ce;if(Ci===lr)try{Le=new y().parseFromString(qt,Ln)}catch{}if(!Le||!Le.documentElement){Le=A.createDocument(Ci,"template",null);try{Le.documentElement.innerHTML=Qa?R:qt}catch{}}var Gr=Le.body||Le.documentElement;return ce&&Xe&&Gr.insertBefore(n.createTextNode(Xe),Gr.childNodes[0]||null),Ci===lr?U.call(Le,ut?"html":"body")[0]:ut?Le.documentElement:Gr},Mi=function(ce){return E.call(ce.ownerDocument||ce,ce,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Sr=function(ce){return ce instanceof p&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof m)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},Hr=function(ce){return Ic(s)==="object"?ce instanceof s:ce&&Ic(ce)==="object"&&typeof ce.nodeType=="number"&&typeof ce.nodeName=="string"},mn=function(ce,Le,Xe){z[ce]&&yle(z[ce],function(jt){jt.call(e,Le,Xe,gi)})},oa=function(ce){var Le;if(mn("beforeSanitizeElements",ce,null),Sr(ce)||_i(/[\u0080-\uFFFF]/,ce.nodeName))return kn(ce),!0;var Xe=tr(ce.nodeName);if(mn("uponSanitizeElement",ce,{tagName:Xe,allowedTags:le}),ce.hasChildNodes()&&!Hr(ce.firstElementChild)&&(!Hr(ce.content)||!Hr(ce.content.firstElementChild))&&_i(/<[/\w]/g,ce.innerHTML)&&_i(/<[/\w]/g,ce.textContent)||Xe==="select"&&_i(/<template/i,ce.innerHTML)||ce.nodeType===7||it&&ce.nodeType===8&&_i(/<[/\w]/g,ce.data))return kn(ce),!0;if(!le[Xe]||at[Xe]){if(!at[Xe]&&Js(Xe)&&(Me.tagNameCheck instanceof RegExp&&_i(Me.tagNameCheck,Xe)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Xe)))return!1;if(Vt&&!nr[Xe]){var jt=M(ce)||ce.parentNode,qt=k(ce)||ce.childNodes;if(qt&&jt)for(var Gr=qt.length,Tr=Gr-1;Tr>=0;--Tr){var Kr=S(qt[Tr],!0);Kr.__removalCount=(ce.__removalCount||0)+1,jt.insertBefore(Kr,w(ce))}}return kn(ce),!0}return ce instanceof c&&!Ys(ce)||(Xe==="noscript"||Xe==="noembed"||Xe==="noframes")&&_i(/<\/no(script|embed|frames)/i,ce.innerHTML)?(kn(ce),!0):(Ke&&ce.nodeType===3&&(Le=ce.textContent,Le=Rs(Le,Q," "),Le=Rs(Le,ee," "),Le=Rs(Le,K," "),ce.textContent!==Le&&(mm(e.removed,{element:ce.cloneNode()}),ce.textContent=Le)),mn("afterSanitizeElements",ce,null),!1)},Pi=function(ce,Le,Xe){if(bt&&(Le==="id"||Le==="name")&&(Xe in n||Xe in Xs))return!1;if(!(de&&!Ae[Le]&&_i(Z,Le))){if(!($e&&_i(Y,Le))){if(!oe[Le]||Ae[Le]){if(!(Js(ce)&&(Me.tagNameCheck instanceof RegExp&&_i(Me.tagNameCheck,ce)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(ce))&&(Me.attributeNameCheck instanceof RegExp&&_i(Me.attributeNameCheck,Le)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(Le))||Le==="is"&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&_i(Me.tagNameCheck,Xe)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Xe))))return!1}else if(!dn[Le]){if(!_i(J,Rs(Xe,ae,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&ce!=="script"&&vle(Xe,"data:")===0&&qr[ce])){if(!(ge&&!_i(pe,Rs(Xe,ae,"")))){if(Xe)return!1}}}}}}return!0},Js=function(ce){return ce!=="annotation-xml"&&xI(ce,X)},Ns=function(ce){var Le,Xe,jt,qt;mn("beforeSanitizeAttributes",ce,null);var Gr=ce.attributes;if(!(!Gr||Sr(ce))){var Tr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe};for(qt=Gr.length;qt--;){Le=Gr[qt];var Kr=Le,sr=Kr.name,fe=Kr.namespaceURI;if(Xe=sr==="value"?Le.value:ble(Le.value),jt=tr(sr),Tr.attrName=jt,Tr.attrValue=Xe,Tr.keepAttr=!0,Tr.forceKeepAttr=void 0,mn("uponSanitizeAttribute",ce,Tr),Xe=Tr.attrValue,!Tr.forceKeepAttr&&(yi(sr,ce),!!Tr.keepAttr)){if(!Ye&&_i(/\/>/i,Xe)){yi(sr,ce);continue}Ke&&(Xe=Rs(Xe,Q," "),Xe=Rs(Xe,ee," "),Xe=Rs(Xe,K," "));var Ce=tr(ce.nodeName);if(Pi(Ce,jt,Xe)){if(Ze&&(jt==="id"||jt==="name")&&(yi(sr,ce),Xe=Tt+Xe),it&&_i(/((--!?|])>)|<\/(style|title)/i,Xe)){yi(sr,ce);continue}if(B&&Ic(b)==="object"&&typeof b.getAttributeType=="function"&&!fe)switch(b.getAttributeType(Ce,jt)){case"TrustedHTML":{Xe=B.createHTML(Xe);break}case"TrustedScriptURL":{Xe=B.createScriptURL(Xe);break}}try{fe?ce.setAttributeNS(fe,sr,Xe):ce.setAttribute(sr,Xe),Sr(ce)?kn(ce):bI(e.removed)}catch{}}}}mn("afterSanitizeAttributes",ce,null)}},la=function lt(ce){var Le,Xe=Mi(ce);for(mn("beforeSanitizeShadowDOM",ce,null);Le=Xe.nextNode();)mn("uponSanitizeShadowNode",Le,null),oa(Le),Ns(Le),Le.content instanceof i&&lt(Le.content);mn("afterSanitizeShadowDOM",ce,null)};return e.sanitize=function(lt){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le,Xe,jt,qt,Gr;if(Qa=!lt,Qa&&(lt="<!-->"),typeof lt!="string"&&!Hr(lt))if(typeof lt.toString=="function"){if(lt=lt.toString(),typeof lt!="string")throw m5("dirty is not a string, aborting")}else throw m5("toString is not a function");if(!e.isSupported){if(Ic(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof lt=="string")return t.toStaticHTML(lt);if(Hr(lt))return t.toStaticHTML(lt.outerHTML)}return lt}if(er||Ii(ce),e.removed=[],typeof lt=="string"&&(Bt=!1),Bt){if(lt.nodeName){var Tr=tr(lt.nodeName);if(!le[Tr]||at[Tr])throw m5("root node is forbidden and cannot be sanitized in-place")}}else if(lt instanceof s)Le=Zs("<!---->"),Xe=Le.ownerDocument.importNode(lt,!0),Xe.nodeType===1&&Xe.nodeName==="BODY"||Xe.nodeName==="HTML"?Le=Xe:Le.appendChild(Xe);else{if(!se&&!Ke&&!ut&&lt.indexOf("<")===-1)return B&&rt?B.createHTML(lt):lt;if(Le=Zs(lt),!Le)return se?null:rt?R:""}Le&&Ie&&kn(Le.firstChild);for(var Kr=Mi(Bt?lt:Le);jt=Kr.nextNode();)jt.nodeType===3&&jt===qt||(oa(jt),Ns(jt),jt.content instanceof i&&la(jt.content),qt=jt);if(qt=null,Bt)return lt;if(se){if(Ve)for(Gr=O.call(Le.ownerDocument);Le.firstChild;)Gr.appendChild(Le.firstChild);else Gr=Le;return(oe.shadowroot||oe.shadowrootmod)&&(Gr=P.call(r,Gr,!0)),Gr}var sr=ut?Le.outerHTML:Le.innerHTML;return ut&&le["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&_i(Cle,Le.ownerDocument.doctype.name)&&(sr="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+sr),Ke&&(sr=Rs(sr,Q," "),sr=Rs(sr,ee," "),sr=Rs(sr,K," ")),B&&rt?B.createHTML(sr):sr},e.setConfig=function(lt){Ii(lt),er=!0},e.clearConfig=function(){gi=null,er=!1},e.isValidAttribute=function(lt,ce,Le){gi||Ii({});var Xe=tr(lt),jt=tr(ce);return Pi(Xe,jt,Le)},e.addHook=function(lt,ce){typeof ce=="function"&&(z[lt]=z[lt]||[],mm(z[lt],ce))},e.removeHook=function(lt){if(z[lt])return bI(z[lt])},e.removeHooks=function(lt){z[lt]&&(z[lt]=[])},e.removeAllHooks=function(){z={}},e}var Sq=_q();let b5=null,Tq=!0;function Ple(t){Tq=t}function Dle(){if(!b5){const t=window.AudioContext||window.webkitAudioContext;b5=new t}return b5}function Ot(t,e,r="sine",n=.15){if(Tq)try{const i=Dle(),a=i.createOscillator(),s=i.createGain();a.type=r,a.frequency.setValueAtTime(t,i.currentTime),s.gain.setValueAtTime(n,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),a.connect(s),s.connect(i.destination),a.start(i.currentTime),a.stop(i.currentTime+e)}catch{}}const Ei={xpGain:()=>{Ot(600,.1,"sine",.1),setTimeout(()=>Ot(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Ot(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{Ot(1200,.15,"sine",.08),setTimeout(()=>Ot(1500,.12,"sine",.06),100),setTimeout(()=>Ot(1800,.2,"triangle",.05),180)},questAccept:()=>{Ot(440,.15,"square",.06),setTimeout(()=>Ot(660,.2,"square",.06),120)},questDeploy:()=>{Ot(880,.12,"sawtooth",.05),setTimeout(()=>Ot(660,.12,"sawtooth",.05),100),setTimeout(()=>Ot(550,.2,"sawtooth",.04),200)},equip:()=>{Ot(200,.05,"square",.1),setTimeout(()=>Ot(400,.08,"sine",.08),50)},salvage:()=>{Ot(300,.15,"sawtooth",.06),setTimeout(()=>Ot(200,.2,"sawtooth",.04),100),setTimeout(()=>Ot(100,.3,"sawtooth",.03),200)},craft:()=>{Ot(150,.08,"square",.1),setTimeout(()=>Ot(800,.2,"triangle",.08),60)},error:()=>{Ot(200,.15,"square",.08),setTimeout(()=>Ot(150,.2,"square",.06),120)},messageSend:()=>{Ot(500,.06,"sine",.05)},notification:()=>{Ot(800,.1,"sine",.06),setTimeout(()=>Ot(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>Ot(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{Ot(523,.12,"sine",.08),setTimeout(()=>Ot(659,.12,"sine",.07),100),setTimeout(()=>Ot(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>Ot(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{Ot(523,.15,"triangle",.1),setTimeout(()=>Ot(784,.15,"triangle",.1),120),setTimeout(()=>Ot(1047,.3,"sine",.12),240)},skillUnlock:()=>{Ot(300,.1,"sawtooth",.06),setTimeout(()=>Ot(600,.1,"sawtooth",.06),80),setTimeout(()=>Ot(900,.15,"sine",.08),160)},bossHit:()=>{Ot(100,.1,"square",.12),setTimeout(()=>Ot(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Ot(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{Ot(1200,.08,"sine",.08),setTimeout(()=>Ot(1600,.1,"sine",.06),60),setTimeout(()=>Ot(2e3,.15,"triangle",.04),120)},partyJoin:()=>{Ot(440,.1,"sine",.06),setTimeout(()=>Ot(554,.1,"sine",.06),80),setTimeout(()=>Ot(659,.15,"sine",.05),160)},chestOpen:()=>{Ot(200,.15,"square",.06),setTimeout(()=>Ot(300,.1,"square",.05),100),setTimeout(()=>Ot(500,.1,"triangle",.06),200),setTimeout(()=>Ot(800,.2,"sine",.08),350)}},Lle=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:i,classType:a})=>{const s=F.useRef(Uv()),c=F.useRef(Date.now()),d=F.useRef(t),[f,m]=F.useState(!0),[p,y]=F.useState(0),[b,T]=F.useState(!1),[S,w]=F.useState(null),[k,M]=F.useState(0),[C,B]=F.useState(0),R=F.useRef(null),I=F.useRef(null),A=F.useRef(new Set);F.useEffect(()=>{d.current=t},[t]);const E=F.useCallback(()=>{c.current=Date.now(),f||m(!0)},[f]);return F.useEffect(()=>{const O=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),f||m(!0)):f&&m(!1)},1e3);return()=>clearInterval(O)},[f]),F.useEffect(()=>{const O=["mousemove","keydown","scroll","click"];return O.forEach(U=>window.addEventListener(U,E)),()=>O.forEach(U=>window.removeEventListener(U,E))},[E]),F.useEffect(()=>()=>{d.current(s.current)},[]),F.useEffect(()=>{if(!n||!i)return;const O=async U=>{var ee,K,Z,Y,pe,ae,X,J;const P=R.current;if(!P)return;const V=P.src?new URL(P.src).origin:"";if(U.origin!==window.location.origin&&U.origin!==V)return;const z=U.origin,Q=U.data;if(!(!Q||typeof Q!="object"||!((ee=Q.type)!=null&&ee.startsWith("portal-"))))switch(E(),Q.type){case"portal-ready":{T(!0);try{const le=await ea(ot(Be,"practice_progress",`${n}_${i}`)),Ee=le.exists()?le.data():null,oe=Ee?{state:Ee.state||null,currentQuestion:Ee.currentQuestion??0}:null,Oe=(Ee==null?void 0:Ee.answeredQuestions)||[];Oe.forEach(Me=>A.current.add(Me)),M(Oe.length),(K=P.contentWindow)==null||K.postMessage({type:"portal-init",payload:{userId:n,savedState:oe}},z)}catch(le){console.error("Bridge: Failed to load saved state",le),(Z=P.contentWindow)==null||Z.postMessage({type:"portal-init",payload:{userId:n,savedState:null}},z)}break}case"portal-save":{const{state:le,currentQuestion:Ee}=Q.payload||{};if(!le)break;try{await Zi(ot(Be,"practice_progress",`${n}_${i}`),{userId:n,assignmentId:i,state:le,currentQuestion:Ee??0,answeredQuestions:Array.from(A.current),lastUpdated:new Date().toISOString()},{merge:!0}),(Y=P.contentWindow)==null||Y.postMessage({type:"portal-save-ok"},z)}catch(oe){console.error("Bridge: Save failed",oe),(pe=P.contentWindow)==null||pe.postMessage({type:"portal-save-error"},z)}break}case"portal-answer":{const{questionId:le,correct:Ee,attempts:oe}=Q.payload||{};if(!le)break;if(Ee&&!A.current.has(le)){A.current.add(le),M(Me=>Me+1);const Oe=oe===1?15:10;try{const at=(await hF({assignmentId:i,questionId:le,xpAmount:Oe,classType:a||"Uncategorized"})).data;if(at.awarded){const Ae=at.serverXP||Oe;B($e=>$e+Ae),w({text:`+${Ae} XP`,type:"success"}),Ei.xpGain(),setTimeout(()=>w(null),2e3)}(ae=P.contentWindow)==null||ae.postMessage({type:"portal-xp-result",payload:{questionId:le,awarded:at.awarded,xp:at.serverXP||Oe}},z)}catch(Me){console.error("Bridge: XP award failed",Me),(X=P.contentWindow)==null||X.postMessage({type:"portal-xp-result",payload:{questionId:le,awarded:!1,xp:0}},z)}}else Ee&&((J=P.contentWindow)==null||J.postMessage({type:"portal-xp-result",payload:{questionId:le,awarded:!1,xp:0}},z));break}}};return window.addEventListener("message",O),()=>window.removeEventListener("message",O)},[n,i,a,E]),F.useEffect(()=>{if(I.current&&r){const O=r.replace(/\$(.*?)\$/g,(U,P)=>{try{return Kv.renderToString(P,{throwOnError:!1})}catch{return P}});I.current.innerHTML=Sq.sanitize(O,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${f?"text-green-400":"text-yellow-500"}`,children:[f?u.jsx(T8,{className:"w-4 h-4"}):u.jsx(ps,{className:"w-4 h-4 animate-pulse"}),f?"Active Session":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(p/60),"m ",p%60,"s"]}),b&&k>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[u.jsx(An,{className:"w-3 h-3"})," ",k," answered"]}),b&&C>0&&u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[u.jsx(Kn,{className:"w-3 h-3"})," ",C," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[b&&u.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[u.jsx(Kn,{className:"w-3 h-3"})," XP Linked"]}),!f&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(gs,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&u.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:u.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?u.jsx(An,{className:"w-4 h-4"}):u.jsx(bp,{className:"w-4 h-4"}),S.text]})}),u.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?u.jsx("iframe",{ref:R,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:E}):u.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:u.jsxs("div",{className:"text-center",children:[u.jsx(xp,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),u.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&u.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[u.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[u.jsx(gF,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),u.jsx("div",{ref:I,className:"proctor-content text-sm leading-relaxed"})]})]})]})},Ble=()=>{const[t,e]=F.useState(!1),[r,n]=F.useState(null),i=async()=>{e(!0),n(null);try{await FZ(mT,Die)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},a=r&&r.includes("api-key-not-valid");return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[u.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:u.jsxs("div",{className:"p-10 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&u.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(gs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"break-words",children:[u.jsx("strong",{children:"Login Failed:"})," ",r]})]}),a&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[u.jsx(Sae,{className:"w-4 h-4"}),"Action Required:"]}),u.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",u.jsx("code",{children:"lib/firebase.ts"})," and replace",u.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),u.jsx("button",{onClick:i,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Sign in with Google"})]})}),u.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),u.jsx("span",{children:""}),u.jsx("span",{children:"Firebase Auth"})]})]})})]})},Aq=F.createContext(null),ou=()=>{const t=F.useContext(Aq);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},Ule=({children:t})=>{const[e,r]=F.useState({isOpen:!1,options:{message:""}}),n=F.useRef(null),i=F.useRef(null),a=F.useCallback(m=>new Promise(p=>{n.current=p,r({isOpen:!0,options:m})}),[]),s=F.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!0),n.current=null,r(p=>({...p,isOpen:!1}))},[]),c=F.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!1),n.current=null,r(p=>({...p,isOpen:!1}))},[]);F.useEffect(()=>{if(e.isOpen){const m=setTimeout(()=>{var p;(p=i.current)==null||p.focus()},50);return()=>clearTimeout(m)}},[e.isOpen]),F.useEffect(()=>{if(!e.isOpen)return;const m=p=>{p.key==="Escape"&&c(),p.key==="Enter"&&s()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,f={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return u.jsxs(Aq.Provider,{value:{confirm:a},children:[t,e.isOpen&&u.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),u.jsxs("div",{className:`relative bg-gray-900 border ${f.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[u.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[u.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${f.icon} shrink-0`,children:u.jsx(gs,{className:"w-5 h-5"})}),u.jsxs("div",{children:[e.options.title&&u.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),u.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),u.jsx("button",{ref:i,onClick:s,className:`flex-1 py-2.5 ${f.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),u.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},AI={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:u.jsx(pF,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:u.jsx(gs,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:u.jsx(Uae,{className:"w-4 h-4"})}},zle=({announcements:t,studentIds:e})=>{const{confirm:r}=ou(),n=qi(),[i,a]=F.useState(!1),[s,c]=F.useState(""),[d,f]=F.useState(""),[m,p]=F.useState("INFO"),[y,b]=F.useState("GLOBAL"),T=async()=>{if(!(!s.trim()||!d.trim()))try{await Fe.createAnnouncement({title:s.trim(),content:d.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN"}),await Fe.notifyUsers(e,"ANNOUNCEMENT",s.trim(),d.trim().slice(0,100)),c(""),f(""),a(!1),n.success("Announcement broadcast sent.")}catch{n.error("Failed to create announcement.")}},S=async w=>{await r({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Fe.deleteAnnouncement(w)};return u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(yT,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[u.jsx(Nl,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?u.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[u.jsx(yT,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(w=>{const k=AI[w.priority]||AI.INFO;return u.jsxs("div",{className:`p-3 ${k.bg} border ${k.border} rounded-xl flex justify-between items-start`,children:[u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:`mt-0.5 ${k.text}`,children:k.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-white",children:w.title}),u.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.content}),u.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[w.classType==="GLOBAL"?"All Classes":w.classType,"  ",new Date(w.createdAt).toLocaleDateString()]})]})]}),u.jsx("button",{onClick:()=>S(w.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:u.jsx(Fi,{className:"w-3.5 h-3.5"})})]},w.id)})}),u.jsx(Ha,{isOpen:i,onClose:()=>a(!1),title:"New Announcement",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),u.jsx("input",{type:"text",value:s,onChange:w=>c(w.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),u.jsx("textarea",{value:d,onChange:w=>f(w.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),u.jsxs("select",{value:m,onChange:w=>p(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"INFO",children:"Info"}),u.jsx("option",{value:"WARNING",children:"Warning"}),u.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),u.jsxs("select",{value:y,onChange:w=>b(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Rr).filter(w=>w!=="Uncategorized").map(w=>u.jsx("option",{value:w,children:w},w))]})]})]}),u.jsx("button",{onClick:T,disabled:!s.trim()||!d.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},EI=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],$le=["I","II","III","IV","V"],Vle=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},xh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,EI.length-1),i=EI[n]||"Unknownium",a=$le[r],s=n+1,c=Vle(s);return{rankName:`${i} ${a}`,tierColor:c.color,tierGlow:c.glow}},Vu={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50},NI=t=>{const e=t.affixes.reduce((i,a)=>i+a.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},Bx=t=>{var i;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((i=t.gamification)!=null&&i.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(a=>{a.stats&&Object.entries(a.stats).forEach(([s,c])=>{e[s]+=c})}),e},jg=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let i=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&i.length===0&&(i=[10]);const a=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=a*10+s}),Math.floor(e))},Qr=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Ux(t,e){var i;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(i=r.classProfiles)==null?void 0:i[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const Fle=({student:t,submissions:e,assignments:r,onClose:n})=>{var w,k,M,C,B,R,I,A,E,O;const i=((w=t.gamification)==null?void 0:w.level)||1,a=((k=t.gamification)==null?void 0:k.xp)||0,s=((M=t.gamification)==null?void 0:M.currency)||0,c=xh(i),d=Bx(t),f=t.enrolledClasses||(t.classType?[t.classType]:[]),m=((B=(C=t.gamification)==null?void 0:C.completedQuests)==null?void 0:B.length)||0,p=((I=(R=t.gamification)==null?void 0:R.activeQuests)==null?void 0:I.filter(U=>U.status==="ACCEPTED"||U.status==="DEPLOYED").length)||0,y=F.useMemo(()=>f.map(U=>{var Z,Y;const P=((Y=(Z=t.gamification)==null?void 0:Z.classXp)==null?void 0:Y[U])||0,V=Ux(t,U),z=jg(V.equipped),Q=V.inventory.length,ee=e.filter(pe=>{const ae=r.find(X=>X.id===pe.assignmentId);return(ae==null?void 0:ae.classType)===U}),K=Math.round(ee.reduce((pe,ae)=>{var X;return pe+(((X=ae.metrics)==null?void 0:X.engagementTime)||0)},0)/60);return{cls:U,classXp:P,gearScore:z,inventoryCount:Q,resourcesViewed:ee.length,totalTime:K}}),[t,e,r,f]),b=F.useMemo(()=>e.filter(U=>U.submittedAt).sort((U,P)=>new Date(P.submittedAt).getTime()-new Date(U.submittedAt).getTime()).slice(0,10).map(U=>{var P,V;return{...U,assignmentTitle:((P=r.find(z=>z.id===U.assignmentId))==null?void 0:P.title)||U.assignmentTitle,classType:((V=r.find(z=>z.id===U.assignmentId))==null?void 0:V.classType)||"Unknown"}}),[e,r]),T=Math.round(e.reduce((U,P)=>{var V;return U+(((V=P.metrics)==null?void 0:V.engagementTime)||0)},0)/60),S=F.useMemo(()=>{const U=new Set;e.forEach(K=>{if(K.submittedAt){const Z=new Date(K.submittedAt),Y=Z.getFullYear(),pe=new Date(Y,0,1),ae=Math.ceil(((Z.getTime()-pe.getTime())/864e5+pe.getDay()+1)/7);U.add(`${Y}-W${ae}`)}});const P=new Date,V=P.getFullYear(),z=new Date(V,0,1),Q=Math.ceil(((P.getTime()-z.getTime())/864e5+z.getDay()+1)/7);let ee=0;for(let K=Q;K>0&&U.has(`${V}-W${K}`);K--)ee++;return ee},[e]);return u.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:n}),u.jsxs("div",{className:"relative w-full max-w-lg bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[u.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${c.tierGlow} shadow-xl`,children:t.avatarUrl?u.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${c.tierColor.split(" ")[0]}`}):u.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${c.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",i]})]}),((A=t.gamification)==null?void 0:A.codename)&&u.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),u.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:u.jsx(ys,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(Kn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:a.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(ps,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[T,"m"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(qs,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(gT,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:m}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(CC,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:s}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(E8,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[S,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),u.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([U,P])=>u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:U}),u.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,P)}%`}})}),u.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:P})]},U))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),u.jsx("div",{className:"space-y-3",children:y.map(U=>u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:U.cls}),u.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[U.classXp.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[u.jsxs("span",{children:[u.jsx(fs,{className:"w-3 h-3 inline mr-0.5"}),U.gearScore," GS"]}),u.jsxs("span",{children:[u.jsx(CC,{className:"w-3 h-3 inline mr-0.5"}),U.inventoryCount," items"]}),u.jsxs("span",{children:[u.jsx(qs,{className:"w-3 h-3 inline mr-0.5"}),U.resourcesViewed," viewed"]}),u.jsxs("span",{children:[u.jsx(ps,{className:"w-3 h-3 inline mr-0.5"}),U.totalTime,"m"]})]})]},U.cls))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),b.length===0?u.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):u.jsx("div",{className:"space-y-2",children:b.map(U=>{var V;const P=Math.round((((V=U.metrics)==null?void 0:V.engagementTime)||0)/60);return u.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${P>=5?"bg-green-500":P>=1?"bg-yellow-500":"bg-gray-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs text-white font-bold truncate",children:U.assignmentTitle}),u.jsxs("div",{className:"text-[10px] text-gray-500",children:[U.classType,"  ",P,"m engaged"]})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:U.submittedAt?new Date(U.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},U.id)})})]}),p>0&&u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),u.jsx("div",{className:"space-y-2",children:(O=(E=t.gamification)==null?void 0:E.activeQuests)==null?void 0:O.filter(U=>U.status==="ACCEPTED"||U.status==="DEPLOYED").map(U=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(gT,{className:`w-3.5 h-3.5 ${U.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),u.jsx("span",{className:"text-xs text-white",children:U.questId})]}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${U.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:U.status})]},U.questId))})]}),u.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[u.jsxs("div",{children:["Email: ",t.email]}),u.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),u.jsxs("div",{children:["Enrolled: ",f.join(", ")||"None"]}),u.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),u.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&u.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})]})},qle=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=ou(),[i,a]=F.useState(null),[s,c]=F.useState([]),[d,f]=F.useState([]),[m,p]=F.useState(Date.now());F.useEffect(()=>{const A=Fe.subscribeToChatFlags(c),E=Fe.subscribeToAnnouncements(f),O=setInterval(()=>p(Date.now()),6e4);return()=>{A(),E(),clearInterval(O)}},[]);const y=t.filter(A=>A.role==="STUDENT"),b=y.length,T=Math.round(y.reduce((A,E)=>{var O;return A+(((O=E.stats)==null?void 0:O.totalTime)||0)},0)/(b||1)),S=y.reduce((A,E)=>{var O;return A+(((O=E.stats)==null?void 0:O.problemsCompleted)||0)},0),w=y.reduce((A,E)=>{var O;return A+(((O=E.gamification)==null?void 0:O.xp)||0)},0),k=y.filter(A=>A.mutedUntil&&new Date(A.mutedUntil).getTime()>m),M=async A=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Fe.muteUser(A,0)},C=async(A,E)=>{const O=new Date(E).getTime(),U=new Date(Math.max(O,Date.now())+3600*1e3),P=Math.ceil((U.getTime()-Date.now())/6e4);await Fe.muteUser(A,P)},B=({label:A,value:E,icon:O,color:U})=>u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[u.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${U}`,children:O}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:E}),u.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:A})]}),u.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${U}`})]}),R=A=>{const O=new Date(A).getTime()-m;if(O<=0)return"Expired";const U=Math.ceil(O/6e4);return U>60?`${Math.ceil(U/60)} hrs`:`${U} mins`},I=A=>{if(!A)return"Never";const E=new Date(A),O=Date.now()-E.getTime(),U=Math.floor(O/6e4);if(U<1)return"Just now";if(U<60)return`${U}m ago`;const P=Math.floor(U/60);return P<24?`${P}h ago`:E.toLocaleDateString()};return u.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[u.jsx("div",{className:"flex justify-between items-end",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),u.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(B,{label:"Total Students",value:b,icon:u.jsx(Zc,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),u.jsx(B,{label:"Total XP Awarded",value:w.toLocaleString(),icon:u.jsx(Kn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),u.jsx(B,{label:"Resources Viewed",value:S,icon:u.jsx(A8,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),u.jsx(B,{label:"Avg Active Time",value:`${T}m`,icon:u.jsx(ps,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?u.jsx(gs,{className:"w-5 h-5"}):u.jsx(jx,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(zv,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):u.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(A=>u.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-bold text-white",children:[A.senderName," ",u.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",A.classType]})]}),u.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',A.content,'"']})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(A.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsxs("button",{onClick:async()=>{await Fe.resolveFlag(A.id),A.messageId&&await Fe.unflagMessage(A.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx(kx,{className:"w-3 h-3"})," Dismiss"]}),u.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Fe.resolveFlag(A.id),A.messageId&&await Fe.deleteMessage(A.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx(Fi,{className:"w-3 h-3"})," Delete"]})]})]},A.id))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[u.jsx(Mae,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),k.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(Zc,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[u.jsx("th",{className:"pb-2",children:"Operative"}),u.jsx("th",{className:"pb-2",children:"Remaining"}),u.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:k.map(A=>u.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[u.jsxs("td",{className:"py-3",children:[u.jsx("div",{className:"text-sm font-bold text-white",children:A.name}),u.jsx("div",{className:"text-[10px] text-gray-500",children:A.classType})]}),u.jsx("td",{className:"py-3",children:u.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:R(A.mutedUntil)})}),u.jsx("td",{className:"py-3 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>C(A.id,A.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:u.jsx($v,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>M(A.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:u.jsx(zv,{className:"w-3.5 h-3.5"})})]})})]},A.id))})]})})]})]}),u.jsx("div",{className:"mt-8",children:u.jsx(zle,{announcements:d,studentIds:y.map(A=>A.id)})}),u.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[u.jsx("th",{className:"p-3",children:"Student"}),u.jsx("th",{className:"p-3",children:"Class"}),u.jsx("th",{className:"p-3 text-center",children:"Last Seen"}),u.jsx("th",{className:"p-3 text-center",children:"Total Time"}),u.jsx("th",{className:"p-3 text-center",children:"Resources"}),u.jsx("th",{className:"p-3 text-right",children:"XP"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const A=Math.max(1,...y.map(E=>{var O;return((O=E.gamification)==null?void 0:O.xp)||0}));return y.sort((E,O)=>{var U,P;return(((U=O.gamification)==null?void 0:U.xp)||0)-(((P=E.gamification)==null?void 0:P.xp)||0)}).map(E=>{var ee,K,Z;const O=((ee=E.gamification)==null?void 0:ee.xp)||0,U=Math.round(O/A*100),P=E.lastLoginAt,V=P?Date.now()-new Date(P).getTime():1/0,z=V<36e5?"text-green-400":V<864e5?"text-yellow-400":V<1/0?"text-red-400":"text-gray-600",Q=V<36e5?"bg-green-500":V<864e5?"bg-yellow-500":V<1/0?"bg-red-500":"bg-gray-600";return u.jsxs("tr",{className:"hover:bg-white/5 transition cursor-pointer",onClick:()=>a(E),children:[u.jsx("td",{className:"p-3 font-bold text-white",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[E.avatarUrl?u.jsx("img",{src:E.avatarUrl,alt:E.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:E.name.charAt(0)}),u.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Q}`})]}),u.jsx("span",{className:"truncate max-w-[120px]",children:E.name})]})}),u.jsx("td",{className:"p-3 text-sm text-gray-400",children:E.classType}),u.jsx("td",{className:`p-3 text-center text-xs font-mono ${z}`,children:I(E.lastLoginAt)}),u.jsxs("td",{className:"p-3 text-center text-white",children:[((K=E.stats)==null?void 0:K.totalTime)||0,"m"]}),u.jsx("td",{className:"p-3 text-center text-white",children:((Z=E.stats)==null?void 0:Z.problemsCompleted)||0}),u.jsx("td",{className:"p-3 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${U}%`}})}),u.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:O})]})})]},E.id)})})()})]})})]}),i&&u.jsx(Fle,{student:i,submissions:r.filter(A=>A.userId===i.id),assignments:e,onClose:()=>a(null)})]})},Hle=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const i=qi(),{confirm:a}=ou(),[s,c]=F.useState(new Set),[d,f]=F.useState(Rr.AP_PHYSICS),[m,p]=F.useState(!1),[y,b]=F.useState(!1),[T,S]=F.useState(""),[w,k]=F.useState(Rr.AP_PHYSICS),[M,C]=F.useState(""),[B,R]=F.useState(""),[I,A]=F.useState(!1),[E,O]=F.useState(!1),[U,P]=F.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[V,z]=F.useState(10),[Q,ee]=F.useState("single"),[K,Z]=F.useState([]),[Y,pe]=F.useState(!1),ae=F.useRef(null),X=t.filter(se=>se.role==="STUDENT"),J=F.useMemo(()=>e.filter(se=>!t.some(Ve=>Ve.email.toLowerCase()===se.email.toLowerCase())),[e,t]),le=F.useMemo(()=>[...Array.from(new Set([...Object.values(Rr).filter(Ve=>Ve!==Rr.UNCATEGORIZED),...r.map(Ve=>Ve.className)])).sort(),Rr.UNCATEGORIZED],[r]),Ee=se=>{const Ve=X.filter(Ze=>{var Tt,Vt;return((Tt=Ze.enrolledClasses)==null?void 0:Tt.includes(se))||se===Rr.UNCATEGORIZED&&(((Vt=Ze.enrolledClasses)==null?void 0:Vt.length)===0||!Ze.enrolledClasses)}),rt=Ve.every(Ze=>s.has(Ze.id)),bt=new Set(s);Ve.forEach(Ze=>{rt?bt.delete(Ze.id):bt.add(Ze.id)}),c(bt)},oe=se=>{const Ve=new Set(s);Ve.has(se)?Ve.delete(se):Ve.add(se),c(Ve)},Oe=async()=>{if(s.size>0){const se=Array.from(s).map(async Ve=>{const rt=t.find(bt=>bt.id===Ve);if(rt){const bt=rt.enrolledClasses||[],Ze=Array.from(new Set([...bt.filter(Tt=>Tt!==Rr.UNCATEGORIZED),d]));await Fe.updateUserEnrolledClasses(Ve,Ze)}});await Promise.all(se),c(new Set)}},Me=async se=>{if(s.size>0){if(!await a({message:`Remove ${s.size} students from ${se}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const Ve=Array.from(s).map(async rt=>{const bt=t.find(Ze=>Ze.id===rt);if(bt){const Tt=(bt.enrolledClasses||[]).filter(Vt=>Vt!==se);await Fe.updateUserEnrolledClasses(rt,Tt)}});await Promise.all(Ve),c(new Set)}},at=async(se,Ve)=>{if(await a({message:`Remove ${se.name} from ${Ve}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const bt=(se.enrolledClasses||[]).filter(Ze=>Ze!==Ve);await Fe.updateUserEnrolledClasses(se.id,bt)}},Ae=async(se,Ve)=>{await a({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${Ve}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Fe.removeUser(se)},$e=async se=>{se!==Rr.UNCATEGORIZED&&await a({message:`Delete group config ${se}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Fe.deleteClassConfig(se)},de=async se=>{await a({message:`Cancel invite for ${se}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Fe.removeFromWhitelist(se)},ge=(se,Ve)=>{se!==Rr.UNCATEGORIZED&&(R(se),A(!0),Ve?(P(Ve.features),z(Ve.xpPerMinute||10)):(P({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),z(10)),b(!0))},Ye=se=>{se.preventDefault(),n(T,w),M.trim()&&Fe.updateWhitelistSection(T,M.trim()),S(""),C(""),p(!1)},Ke=se=>{var bt;const Ve=(bt=se.target.files)==null?void 0:bt[0];if(!Ve)return;const rt=new FileReader;rt.onload=Ze=>{var qr,Yn;const Tt=(qr=Ze.target)==null?void 0:qr.result;if(!Tt)return;const Vt=Tt.split(/\r?\n/).filter(dn=>dn.trim()),Bt=(Yn=Vt[0])!=null&&Yn.toLowerCase().includes("email")?1:0,At=new Set(e.map(dn=>dn.email.toLowerCase())),nr=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,an=Vt.slice(Bt).map(dn=>{const pi=dn.includes("	")?dn.split("	"):dn.split(","),Br=(pi[0]||"").trim().toLowerCase(),hn=(pi[1]||"").trim()||Rr.AP_PHYSICS,lr=(pi[2]||"").trim();let Ci="pending";return nr.test(Br)?At.has(Br)&&(Ci="duplicate"):Ci="invalid",{email:Br,classType:hn,section:lr,status:Ci}}).filter(dn=>dn.email.length>0);Z(an)},rt.readAsText(Ve),se.target.value=""},it=async()=>{const se=K.filter(rt=>rt.status==="pending");if(se.length===0)return;pe(!0);let Ve=0;for(const rt of se)try{await Fe.addToWhitelist(rt.email,rt.classType),rt.section&&await Fe.updateWhitelistSection(rt.email,rt.section),rt.status="success",Ve++}catch{rt.status="invalid"}Z([...K]),pe(!1),i.success(`${Ve} operative${Ve!==1?"s":""} imported successfully.`),K.every(rt=>rt.status==="success"||rt.status==="duplicate")&&setTimeout(()=>{p(!1),Z([]),ee("single")},1500)},ut=async se=>{if(se.preventDefault(),!!B){O(!0);try{await Fe.saveClassConfig({id:B,className:B,features:U,xpPerMinute:V}),R(""),b(!1),A(!1)}catch(Ve){console.error("Failed to save config:",Ve),i.error("Failed to save class configuration.")}finally{O(!1)}}},er=se=>{if(!se)return"Never";const Ve=new Date(se),rt=Date.now()-Ve.getTime(),bt=Math.floor(rt/6e4);if(bt<60)return`${bt}m ago`;const Ze=Math.floor(bt/60);return Ze<24?`${Ze}h ago`:Ve.toLocaleDateString()},Ie=se=>{const Ve=se===Rr.UNCATEGORIZED,rt=X.filter(Ze=>{var Tt;return((Tt=Ze.enrolledClasses)==null?void 0:Tt.includes(se))||Ve&&(!Ze.enrolledClasses||Ze.enrolledClasses.length===0)}),bt=r.find(Ze=>Ze.className===se);return u.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${Ve?"opacity-90":""}`,children:[u.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${Ve?"bg-orange-500/10":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h3",{className:`font-bold text-lg tracking-wide ${Ve?"text-orange-300":"text-white"}`,children:[Ve&&u.jsx(yae,{className:"w-5 h-5 inline mr-2 mb-1"}),se]}),u.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${Ve?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[rt.length," Registered"]}),!Ve&&u.jsx("button",{onClick:()=>ge(se,bt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:u.jsx(_p,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex gap-2",children:[s.size>0&&Array.from(s).some(Ze=>rt.find(Tt=>Tt.id===Ze))&&u.jsxs("button",{onClick:()=>Me(se),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[u.jsx(Xae,{className:"w-3 h-3"})," Remove Selected"]}),!Ve&&u.jsxs("button",{onClick:()=>$e(se),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[u.jsx(Fi,{className:"w-3 h-3"}),"Config"]})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[u.jsx("th",{className:"w-12 p-4 text-center",children:rt.length>0&&u.jsx("button",{onClick:()=>Ee(se),className:"hover:text-purple-400 transition",children:u.jsx(PC,{className:"w-4 h-4"})})}),u.jsx("th",{className:"text-left p-4",children:"Operative"}),u.jsx("th",{className:"text-center p-4",children:"System Status"}),u.jsx("th",{className:"text-center p-4",children:"Last Seen"}),u.jsx("th",{className:"text-center p-4",children:"Class XP"}),u.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:rt.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 italic text-sm",children:Ve?"No restricted operatives found.":"No students registered in this roster yet."})}):rt.map(Ze=>{var Vt,Bt,At,nr;const Tt=((Bt=(Vt=Ze.gamification)==null?void 0:Vt.classXp)==null?void 0:Bt[se])||0;return u.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(Ze.id)?"bg-purple-500/10":""}`,children:[u.jsx("td",{className:"p-4 text-center",children:u.jsx("button",{onClick:()=>oe(Ze.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(Ze.id)?u.jsx(Gae,{className:"w-4 h-4 text-purple-500"}):u.jsx(PC,{className:"w-4 h-4 group-hover:text-gray-400"})})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Ze.avatarUrl,alt:Ze.name,className:"w-8 h-8 rounded-full border border-white/10"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Ze.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[Ze.email,Ze.section?`  ${Ze.section}`:""]})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Ze.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Ze.isWhitelisted?u.jsx(RC,{className:"w-3 h-3"}):u.jsx(jx,{className:"w-3 h-3"}),Ze.isWhitelisted?"Authorized":"Restricted"]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[u.jsx(ps,{className:"w-3 h-3"}),er(Ze.lastLoginAt)]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-lg text-purple-300",children:Tt.toLocaleString()}),(((At=Ze.enrolledClasses)==null?void 0:At.length)||0)>1&&u.jsxs("details",{className:"mt-1",children:[u.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),u.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(nr=Ze.enrolledClasses)==null?void 0:nr.map(an=>{var qr,Yn;return u.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[u.jsx("span",{className:`truncate ${an===se?"text-purple-400 font-bold":"text-gray-500"}`,children:an}),u.jsx("span",{className:"text-gray-400 font-mono",children:(((Yn=(qr=Ze.gamification)==null?void 0:qr.classXp)==null?void 0:Yn[an])||0).toLocaleString()})]},an)})})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsx("div",{className:"flex items-center justify-center gap-2",children:u.jsx("button",{onClick:()=>Ve?Ae(Ze.id,Ze.name):at(Ze,se),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:Ve?"Permanently Delete":"Remove from this Class",children:u.jsx(ys,{className:"w-4 h-4"})})})})]},Ze.id)})})]})})]},se)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),u.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[u.jsxs("button",{onClick:()=>{R(""),P({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),A(!1),b(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[u.jsx(_p,{className:"w-4 h-4"}),"Class Config"]}),u.jsxs("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[u.jsx(DC,{className:"w-4 h-4"}),"Invite Student"]})]})]}),J.length>0&&u.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[u.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[u.jsx(Iae,{className:"w-4 h-4"})," Pending Class Invitations (",J.length,")"]}),u.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),u.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:J.map(se=>u.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:se.email}),u.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[u.jsx(RC,{className:"w-3 h-3 text-amber-500"}),u.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(se.classTypes||[se.classType]).join(", ")," Access"]})]})]}),u.jsx("button",{onClick:()=>de(se.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:u.jsx(Fi,{className:"w-3.5 h-3.5"})})]},se.email))})]}),u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[u.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),u.jsxs("div",{className:"relative w-full sm:w-auto",children:[u.jsx("select",{value:d,onChange:se=>f(se.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:le.filter(se=>se!==Rr.UNCATEGORIZED).map(se=>u.jsxs("option",{value:se,children:["Apply ",se," Access"]},se))}),u.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),u.jsxs("button",{onClick:Oe,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[u.jsx(Nl,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),u.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),u.jsx("div",{className:"pb-12",children:le.map(se=>Ie(se))}),u.jsxs(Ha,{isOpen:m,onClose:()=>{p(!1),Z([]),ee("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[u.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[u.jsxs("button",{onClick:()=>{ee("single"),Z([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Q==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(DC,{className:"w-3.5 h-3.5"})," Single"]}),u.jsxs("button",{onClick:()=>ee("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Q==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(Sp,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),Q==="single"?u.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),u.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:T,onChange:se=>S(se.target.value),placeholder:"student@gmail.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),u.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:w,onChange:se=>k(se.target.value),children:le.filter(se=>se!==Rr.UNCATEGORIZED).map(se=>u.jsx("option",{value:se,children:se},se))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),u.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:M,onChange:se=>C(se.target.value),placeholder:"e.g. Period 3, Block A"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),u.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[u.jsx("input",{type:"file",ref:ae,accept:".csv,.tsv,.txt",onChange:Ke,className:"hidden"}),K.length===0?u.jsxs(u.Fragment,{children:[u.jsx(Sp,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),u.jsx("button",{onClick:()=>{var se;return(se=ae.current)==null?void 0:se.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",u.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),u.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),u.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:u.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",u.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",u.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",u.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):u.jsxs(u.Fragment,{children:[u.jsx(A8,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),u.jsxs("p",{className:"text-sm font-bold text-white",children:[K.length," records parsed"]}),u.jsx("button",{onClick:()=>{Z([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),K.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:u.jsxs("table",{className:"w-full text-left text-xs",children:[u.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[u.jsx("th",{className:"p-2 pl-3",children:"Email"}),u.jsx("th",{className:"p-2",children:"Class"}),u.jsx("th",{className:"p-2",children:"Section"}),u.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:K.map((se,Ve)=>u.jsxs("tr",{className:se.status==="invalid"?"bg-red-500/5":se.status==="duplicate"?"bg-yellow-500/5":se.status==="success"?"bg-green-500/5":"",children:[u.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:se.email}),u.jsx("td",{className:"p-2 text-gray-400",children:se.classType}),u.jsx("td",{className:"p-2 text-gray-500",children:se.section||""}),u.jsx("td",{className:"p-2 pr-3 text-right",children:u.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${se.status==="pending"?"bg-blue-500/20 text-blue-400":se.status==="success"?"bg-green-500/20 text-green-400":se.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:se.status})})]},Ve))})]})}),u.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("span",{className:"text-blue-400",children:[K.filter(se=>se.status==="pending").length," ready"]}),u.jsxs("span",{className:"text-yellow-400",children:[K.filter(se=>se.status==="duplicate").length," duplicates"]}),u.jsxs("span",{className:"text-red-400",children:[K.filter(se=>se.status==="invalid").length," invalid"]}),K.some(se=>se.status==="success")&&u.jsxs("span",{className:"text-green-400",children:[K.filter(se=>se.status==="success").length," imported"]})]})}),K.filter(se=>se.status==="duplicate").length>0&&u.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[u.jsx(gs,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),u.jsx("button",{onClick:it,disabled:Y||K.filter(se=>se.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:Y?u.jsxs(u.Fragment,{children:[u.jsx(Fa,{className:"w-4 h-4 animate-spin"})," Importing..."]}):u.jsxs(u.Fragment,{children:["Import ",K.filter(se=>se.status==="pending").length," Operatives"]})})]})]})]}),u.jsx(Ha,{isOpen:y,onClose:()=>b(!1),title:I?"Edit Class Node Config":"Initialize New Class Node",children:u.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),u.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:B,onChange:se=>R(se.target.value),placeholder:"e.g. AP Physics Period 4"}),I&&u.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),u.jsxs("div",{className:"border-t border-white/10 pt-4",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.physicsLab,onChange:se=>P({...U,physicsLab:se.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.evidenceLocker,onChange:se=>P({...U,evidenceLocker:se.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.leaderboard,onChange:se=>P({...U,leaderboard:se.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.physicsTools,onChange:se=>P({...U,physicsTools:se.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.communications,onChange:se=>P({...U,communications:se.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"number",min:1,max:100,value:V,onChange:se=>z(Math.max(1,Math.min(100,parseInt(se.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),u.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),u.jsx("button",{type:"submit",disabled:E,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${E?"opacity-70 cursor-not-allowed":""}`,children:E?u.jsxs(u.Fragment,{children:[u.jsx(Fa,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):I?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Ac={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},kI={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},Gle=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,Kle=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,Wle=({assignment:t,isOpen:e,onClose:r})=>{const n=qi(),i=F.useRef(null),[a,s]=F.useState([]),[c,d]=F.useState(!0),[f,m]=F.useState(!1),[p,y]=F.useState(t.category==="Practice Set"?"reading":"manage"),[b,T]=F.useState(null),[S,w]=F.useState(null),[k,M]=F.useState(""),[C,B]=F.useState(null),[R,I]=F.useState(!1),[A,E]=F.useState(null),[O,U]=F.useState({}),[P,V]=F.useState(null),[z,Q]=F.useState(!0),[ee,K]=F.useState(null),[Z,Y]=F.useState(null),[pe,ae]=F.useState(null),[X,J]=F.useState(!1),le=F.useRef(null),Ee=t.category==="Practice Set";F.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const se=await ea(ot(Be,"question_banks",t.id));se.exists()?s(se.data().questions||[]):s([]);const Ve=await ea(ot(Be,"reading_materials",t.id));Ve.exists()?K(Ve.data()):K(null)}catch(se){console.error("Failed to load bank:",se),s([])}finally{d(!1)}})()},[e,t.id]);const oe=async Ie=>{m(!0);try{await Zi(ot(Be,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ie,questionCount:Ie.length,updatedAt:new Date().toISOString()}),s(Ie)}catch(se){n.error("Failed to save: "+(se instanceof Error?se.message:"Unknown error"))}finally{m(!1)}},Oe=async Ie=>{const se=a.filter(Ve=>Ve.id!==Ie);await oe(se),n.success("Question removed."),C===Ie&&B(null)},Me=async()=>{try{await Da(ot(Be,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},at=()=>{navigator.clipboard.writeText(Gle(t.title,t.classType,t.description)),I(!0),setTimeout(()=>I(!1),2e3),n.success("Prompt copied!")},Ae=()=>{navigator.clipboard.writeText(Kle(t.title,t.classType,t.description)),J(!0),setTimeout(()=>J(!1),2e3),n.success("Reading prompt copied!")},$e=async Ie=>{var Ve;const se=(Ve=Ie.target.files)==null?void 0:Ve[0];if(se){ae(null),Y(null);try{let bt=(await se.text()).replace(/```json\s*|```\s*/g,"").trim();bt=bt.replace(/[\x00-\x1F\x7F]/g,Vt=>Vt===`
`||Vt==="\r"||Vt==="	"?" ":"");let Ze;try{Ze=JSON.parse(bt)}catch{const Vt=bt.match(/\{[\s\S]*\}/);if(Vt)Ze=JSON.parse(Vt[0]);else throw new Error("No JSON object found.")}if(!Ze.title||!Ze.sections||!Array.isArray(Ze.sections))throw new Error("Missing required fields: title and sections array.");const Tt=Ze.sections.filter(Vt=>!Vt.title||!Vt.content);if(Tt.length>0)throw new Error(`${Tt.length} section(s) missing title or content.`);Y(Ze)}catch(rt){ae(rt instanceof Error?rt.message:"Parse failed.")}le.current&&(le.current.value="")}},de=async()=>{if(Z){m(!0);try{await Zi(ot(Be,"reading_materials",t.id),{...Z,assignmentId:t.id,updatedAt:new Date().toISOString()}),K(Z),Y(null),n.success(`Study material uploaded: ${Z.sections.length} sections!`)}catch(Ie){n.error("Failed to save: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{m(!1)}}},ge=async()=>{m(!0);try{await Da(ot(Be,"reading_materials",t.id)),K(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{m(!1)}},Ye=async Ie=>{var Ve;const se=(Ve=Ie.target.files)==null?void 0:Ve[0];if(se){V(null),E(null);try{let bt=(await se.text()).replace(/```json\s*|```\s*/g,"").trim();bt=bt.replace(/[\x00-\x1F\x7F]/g,At=>At===`
`||At==="\r"||At==="	"?" ":"");let Ze;try{Ze=JSON.parse(bt)}catch{const At=bt.match(/\[[\s\S]*\]/);if(At)try{Ze=JSON.parse(At[0])}catch{const nr=At[0];let an=null;for(let qr=nr.length-1;qr>0;qr--)if(nr[qr]==="}")try{an=JSON.parse(nr.slice(0,qr+1)+"]");break}catch{}if(an)Ze=an;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let nr=null;const an="["+bt;for(let qr=an.length-1;qr>0;qr--)if(an[qr]==="}")try{nr=JSON.parse(an.slice(0,qr+1)+"]");break}catch{}if(nr)Ze=nr;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(Ze)||Ze.length===0)throw new Error("Must be a non-empty JSON array.");const Tt=Ze.filter(At=>At.id&&At.tier&&At.type&&At.stem&&At.options&&At.correctAnswer),Vt=Ze.length-Tt.length;if(Tt.length===0){V("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const Bt={};Tt.forEach(At=>{const nr=At.tier;Bt[nr]=(Bt[nr]||0)+1}),E(Tt),U(Bt),Vt>0&&n.success(`Parsed ${Tt.length} questions (${Vt} skipped  missing fields).`)}catch(rt){V(rt instanceof Error?rt.message:"Parse failed.")}i.current&&(i.current.value="")}},Ke=async()=>{if(!A)return;let Ie;if(z&&a.length>0){const se=new Set(a.map(rt=>rt.id)),Ve=A.map((rt,bt)=>({...rt,id:se.has(rt.id)?`${rt.id}_${Date.now()}_${bt}`:rt.id}));Ie=[...a,...Ve]}else Ie=A;await oe(Ie),n.success(`${z?"Added":"Replaced with"} ${A.length} questions. Total: ${Ie.length}`),E(null),y("manage")},it=F.useMemo(()=>{let Ie=a;if(b&&(Ie=Ie.filter(se=>se.tier===b)),S&&(Ie=Ie.filter(se=>se.type===S)),k){const se=k.toLowerCase();Ie=Ie.filter(Ve=>Ve.stem.toLowerCase().includes(se)||Ve.id.toLowerCase().includes(se))}return Ie},[a,b,S,k]),ut=F.useMemo(()=>{const Ie={1:0,2:0,3:0};return a.forEach(se=>{Ie[se.tier]=(Ie[se.tier]||0)+1}),Ie},[a]),er=F.useMemo(()=>{const Ie={};return a.forEach(se=>{Ie[se.type]=(Ie[se.type]||0)+1}),Ie},[a]);return e?u.jsx(Ha,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:u.jsxs("div",{className:"text-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[u.jsx(Qw,{className:"w-5 h-5 text-purple-400 shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),u.jsx("div",{className:"text-xs mt-1",children:c?u.jsx("span",{className:"text-gray-500",children:"Loading..."}):a.length>0?u.jsxs("span",{className:"text-emerald-400",children:[a.length," questions loaded"]}):u.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),a.length>0&&!c&&u.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ie=>u.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Ac[Ie].bg} ${Ac[Ie].border} border`,children:[u.jsx("div",{className:`text-sm font-bold ${Ac[Ie].text}`,children:ut[Ie]}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ie]})]},Ie))})]}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[!Ee&&u.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Qw,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",a.length,")"]}),!Ee&&u.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Nl,{className:"w-3.5 h-3.5 inline mr-1.5"}),a.length>0?"Add More":"Create Bank"]}),u.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(qs,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",ee?`(${ee.sections.length})`:""]})]}),p==="manage"&&u.jsx("div",{className:"space-y-3",children:c?u.jsx("div",{className:"py-12 text-center",children:u.jsx(Fa,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):a.length===0?u.jsxs("div",{className:"py-12 text-center",children:[u.jsx(Qw,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[u.jsx(wF,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),u.jsx("input",{value:k,onChange:Ie=>M(Ie.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ie=>u.jsxs("button",{onClick:()=>T(b===Ie?null:Ie),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b===Ie?`${Ac[Ie].bg} ${Ac[Ie].text} ${Ac[Ie].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ie," (",ut[Ie],")"]},Ie))]})]}),Object.keys(er).length>1&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(er).sort((Ie,se)=>se[1]-Ie[1]).map(([Ie,se])=>u.jsxs("button",{onClick:()=>w(S===Ie?null:Ie),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Ie?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[kI[Ie]||Ie," (",se,")"]},Ie))}),u.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:it.length===0?u.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):it.map(Ie=>{const se=Ac[Ie.tier]||Ac[1],Ve=C===Ie.id;return u.jsxs("div",{className:`rounded-xl border transition ${Ve?`${se.border} ${se.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[u.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>B(Ve?null:Ie.id),children:[u.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${se.bg} ${se.text}`,children:["T",Ie.tier]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[u.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ie.id}),u.jsx("span",{className:"text-[8px] text-gray-600",children:""}),u.jsx("span",{className:"text-[8px] text-gray-500",children:kI[Ie.type]||Ie.type}),u.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Kn,{className:"w-2.5 h-2.5"}),Ie.xp]})]}),u.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ie.stem})]}),u.jsx(h0,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${Ve?"rotate-90":""}`})]}),Ve&&u.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ie.context&&u.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ie.context}),u.jsx("div",{className:"space-y-1",children:Ie.options.map(rt=>{const bt=Array.isArray(Ie.correctAnswer)?Ie.correctAnswer.includes(rt.id):Ie.correctAnswer===rt.id;return u.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${bt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[u.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[rt.id.toUpperCase(),"."]}),u.jsx("span",{children:rt.text}),bt&&u.jsx(An,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},rt.id)})}),u.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ie.explanation]}),Ie.linkedFollowUp&&u.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ie.linkedFollowUp.stem]}),u.jsxs("button",{onClick:()=>Oe(Ie.id),disabled:f,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[u.jsx(Fi,{className:"w-3 h-3"})," Delete Question"]})]})]},Ie.id)})}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[u.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",it.length," of ",a.length]}),u.jsxs("button",{onClick:Me,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx(Fi,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),p==="add"&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),u.jsx("button",{onClick:at,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${R?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:R?u.jsxs(u.Fragment,{children:[u.jsx(An,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(pT,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),u.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",u.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[u.jsx(OC,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:i,type:"file",accept:".json,.txt",onChange:Ye,className:"hidden"})]})]}),P&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(gs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:P})]}),A&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(An,{className:"w-4 h-4 text-emerald-400"}),u.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),u.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ie=>u.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[u.jsx("div",{className:"text-base font-bold text-white",children:O[Ie]||0}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ie]})]},Ie))}),a.length>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>Q(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[u.jsx(Nl,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",a.length," + ",A.length,")"]}),u.jsxs("button",{onClick:()=>Q(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[u.jsx(bp,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Ke,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Fa,{className:"w-4 h-4 animate-spin"}):u.jsx(Sp,{className:"w-4 h-4"}),f?"Saving...":`Upload ${A.length} Questions`]}),u.jsx("button",{onClick:()=>E(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx(Fi,{className:"w-4 h-4"})})]})]})]}),p==="reading"&&u.jsxs("div",{className:"space-y-5",children:[ee?u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qs,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:ee.title})]}),u.jsxs("button",{onClick:ge,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx(Fi,{className:"w-3 h-3"})," Remove"]})]}),ee.description&&u.jsx("p",{className:"text-xs text-gray-400",children:ee.description}),u.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[u.jsxs("span",{children:[ee.sections.length," sections"]}),ee.estimatedMinutes&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsxs("span",{children:["~",ee.estimatedMinutes," min read"]})]})]}),u.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:ee.sections.map((Ie,se)=>u.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:se+1}),u.jsx("span",{className:"truncate",children:Ie.title})]},se))})]}):u.jsxs("div",{className:"py-6 text-center",children:[u.jsx(qs,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),u.jsx("button",{onClick:Ae,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?u.jsxs(u.Fragment,{children:[u.jsx(An,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(pT,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[u.jsx(OC,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:le,type:"file",accept:".json,.txt",onChange:$e,className:"hidden"})]})]}),pe&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(gs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:pe})]}),Z&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(An,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),u.jsxs("p",{className:"text-xs text-gray-400",children:[Z.sections.length," sections  ~",Z.estimatedMinutes||"?"," min read"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:de,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Fa,{className:"w-4 h-4 animate-spin"}):u.jsx(Sp,{className:"w-4 h-4"}),f?"Saving...":"Upload Study Material"]}),u.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx(Fi,{className:"w-4 h-4"})})]})]})]}),f&&u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[u.jsx(Fa,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},OI=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],Xle={Textbook:u.jsx(qs,{className:"w-4 h-4"}),Simulation:u.jsx(T8,{className:"w-4 h-4"}),"Lab Guide":u.jsx(Ox,{className:"w-4 h-4"}),"Practice Set":u.jsx(So,{className:"w-4 h-4"}),Article:u.jsx(yF,{className:"w-4 h-4"}),"Video Lesson":u.jsx(SF,{className:"w-4 h-4"}),Supplemental:u.jsx(N8,{className:"w-4 h-4"})},Qle=({assignments:t,submissions:e,classConfigs:r,onCreateAssignment:n,onPreviewAssignment:i})=>{const a=qi(),{confirm:s}=ou(),[c,d]=F.useState(!1),[f,m]=F.useState(!1),[p,y]=F.useState(!1),[b,T]=F.useState("All Classes"),[S,w]=F.useState("All Categories"),[k,M]=F.useState(new Set),[C,B]=F.useState(null),[R,I]=F.useState({title:"",description:"",status:nl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[A,E]=F.useState(new Set([Rr.AP_PHYSICS])),[O,U]=F.useState(!1),P=F.useMemo(()=>{const Y=Object.values(Rr).filter(ae=>ae!==Rr.UNCATEGORIZED),pe=(r||[]).map(ae=>ae.className);return Array.from(new Set(["All Classes",...Y,...pe]))},[r]),V=F.useMemo(()=>t.filter(Y=>{const pe=b==="All Classes"||Y.classType===b,ae=S==="All Categories"||Y.category===S;return pe&&ae}),[t,b,S]),z=F.useMemo(()=>{const Y={};return V.forEach(pe=>{const ae=b==="All Classes"?`${pe.classType.toUpperCase()}  ${pe.unit||"Unassigned"}`:pe.unit||"Unassigned";Y[ae]||(Y[ae]=[]),Y[ae].push(pe)}),Object.keys(Y).sort().reduce((pe,ae)=>(pe[ae]=Y[ae],pe),{})},[V,b]),Q=async Y=>{if(Y.preventDefault(),A.size===0){a.error("Select a target class.");return}y(!0);try{f&&R.id?await n({...R,classType:Array.from(A)[0]}):await Promise.all(Array.from(A).map(pe=>n({...R,classType:pe}))),d(!1),m(!1)}catch(pe){console.error(pe)}finally{y(!1)}},ee=Y=>{I(Y),E(new Set([Y.classType])),m(!0),d(!0)},K=async Y=>{const pe=Y.status===nl.ACTIVE?nl.ARCHIVED:nl.ACTIVE;await Fe.updateAssignmentStatus(Y.id,pe)},Z=F.useMemo(()=>[...Array.isArray(e)?e:[]].sort((pe,ae)=>{const X=new Date(pe.submittedAt||0).getTime();return new Date(ae.submittedAt||0).getTime()-X}),[e]);return u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),u.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),u.jsxs("button",{onClick:()=>{I({title:"",description:"",status:nl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),m(!1),d(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[u.jsx(Nl,{className:"w-5 h-5"})," Deploy Resource"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:b,onChange:Y=>T(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:P.map(Y=>u.jsx("option",{value:Y,children:Y},Y))}),u.jsx(Hs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:S,onChange:Y=>w(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),OI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))]}),u.jsx(Hs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(z).map(([Y,pe])=>u.jsxs("div",{className:"mb-6 last:mb-0",children:[u.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[u.jsx("button",{onClick:()=>{const ae=new Set(k);ae.has(Y)?ae.delete(Y):ae.add(Y),M(ae)},className:"text-gray-400 hover:text-white transition",children:k.has(Y)?u.jsx(Hs,{className:"w-4 h-4"}):u.jsx(h0,{className:"w-4 h-4"})}),u.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Y}),u.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!k.has(Y)&&u.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:pe.map(ae=>u.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ae.status===nl.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ae.status===nl.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Xle[ae.category||"Supplemental"]}),u.jsxs("div",{className:"truncate flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ae.title}),u.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ae.classType})]}),u.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ae.description})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[u.jsx("button",{onClick:()=>B(ae),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:u.jsx(yh,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i==null?void 0:i(ae.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:u.jsx(Lae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>ee(ae),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:u.jsx($ae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>K(ae),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ae.status===nl.ACTIVE?u.jsx(dae,{className:"w-4 h-4"}):u.jsx(xp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:async()=>{await s({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Fe.deleteAssignment(ae.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:u.jsx(Fi,{className:"w-4 h-4"})})]})]},ae.id))})]},Y))})]}),u.jsx("div",{className:"lg:col-span-4",children:u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[u.jsx(ps,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),u.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Z.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[u.jsx(ps,{className:"w-10 h-10 text-gray-700 mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Z.map(Y=>u.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Y.userName}),u.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Y.assignmentTitle})]}),u.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Y.score)," XP"]})]}),u.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[u.jsxs("span",{children:[Math.round(Y.metrics.engagementTime/60),"m active"]}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Y.submittedAt||"").toLocaleDateString()})]})]},Y.id))]})]})})]}),u.jsx(Ha,{isOpen:c,onClose:()=>d(!1),title:f?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:u.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.title,onChange:Y=>I({...R,title:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.unit,onChange:Y=>I({...R,unit:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),u.jsx("select",{value:R.category,onChange:Y=>I({...R,category:Y.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:OI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:P.filter(Y=>Y!=="All Classes").map(Y=>u.jsx("button",{type:"button",onClick:()=>{const pe=new Set(A);pe.has(Y)?pe.size>1&&pe.delete(Y):pe.add(Y),E(pe)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${A.has(Y)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Y},Y))})]}),u.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[u.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),u.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Y=>{var pe;if((pe=Y.target.files)!=null&&pe[0]){U(!0);try{const ae=await Fe.uploadHtmlResource(Y.target.files[0]);I({...R,contentUrl:ae}),a.success("File uploaded!")}catch(ae){a.error("Upload failed: "+(ae instanceof Error?ae.message:"Unknown error"))}finally{U(!1)}}}}),O&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[u.jsx(Fa,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!O&&R.contentUrl&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[u.jsx(zv,{className:"w-4 h-4"})," Resource uploaded"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",u.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),u.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:R.description,onChange:Y=>I({...R,description:Y.target.value})})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:p?u.jsx(Fa,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),C&&u.jsx(Wle,{assignment:C,isOpen:!!C,onClose:()=>B(null)})]})},Yle=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Zle=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:i})=>{var a,s,c,d,f,m;return t?u.jsx(Ha,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:u.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[u.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((a=t.gamification)==null?void 0:a.level)||1]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-cyan-400",children:((s=t.gamification)==null?void 0:s.currency)||0})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>i(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:u.jsx(Nl,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:u.jsx(ys,{className:"w-4 h-4"})})]})]})]}),u.jsxs("div",{className:"border-b border-white/5 pb-6",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Active Loadout"}),u.jsx("div",{className:"flex gap-2 flex-wrap",children:Yle.map(p=>{var b,T;const y=(T=(b=t.gamification)==null?void 0:b.equipped)==null?void 0:T[p];return u.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?Qr(y.rarity).border+" "+Qr(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),u.jsx("button",{onClick:()=>n(t,p),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:u.jsx(ys,{className:"w-3 h-3"})})]}):u.jsx("span",{className:"text-[8px] text-gray-600",children:p})},p)})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),u.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[(d=(c=t.gamification)==null?void 0:c.inventory)==null?void 0:d.map((p,y)=>u.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${Qr(p.rarity).border}`,children:[u.jsx("div",{className:`text-[8px] font-bold ${Qr(p.rarity).text} text-center truncate w-full`,children:p.name}),u.jsx("div",{className:"text-[8px] text-gray-500",children:p.slot}),u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:u.jsx("button",{onClick:()=>r(t,p),className:"p-2 text-red-400 hover:text-red-200",children:u.jsx(Fi,{className:"w-4 h-4"})})})]},y)),(((m=(f=t.gamification)==null?void 0:f.inventory)==null?void 0:m.length)||0)===0&&u.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},Jle=[10,50,100,-10,-50,-100],ece=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,i]=F.useState(50);if(!t)return null;const a=()=>{r(t,n),i(50)};return u.jsx(Ha,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[u.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500",children:t.email}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jle.map(c=>u.jsx("button",{onClick:()=>i(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),u.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>i(parseInt(c.target.value)||0)})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:a,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},tce=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&u.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,i)=>{const a=n.quest.type==="CUSTOM";return u.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),u.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[u.jsx(So,{className:"w-3 h-3"}),n.quest.title]})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[u.jsxs("div",{className:"text-center md:text-right",children:[u.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),u.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[u.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:a?"Manual Review":"Auto-Check"}),u.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:a?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!a&&n.roll===0&&u.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:u.jsx(bae,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),u.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:u.jsx(kx,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:u.jsx(ys,{className:"w-5 h-5"})})]})]})]})]},i)})]}),jI={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1},rce=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:i,isSubmitting:a})=>u.jsx(Ha,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:u.jsxs("form",{onSubmit:i,className:"space-y-4 text-gray-200 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),u.jsx("input",{value:r.title,onChange:s=>n({...r,title:s.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),u.jsx("textarea",{value:r.description,onChange:s=>n({...r,description:s.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[u.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Mission Bounties"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),u.jsx("input",{type:"number",value:r.xpReward,onChange:s=>n({...r,xpReward:parseInt(s.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),u.jsx("input",{type:"number",value:r.fluxReward,onChange:s=>n({...r,fluxReward:parseInt(s.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),u.jsxs("select",{value:r.lootRarity,onChange:s=>n({...r,lootRarity:s.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[u.jsx("option",{value:"",children:"None"}),u.jsx("option",{value:"COMMON",children:"Common"}),u.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),u.jsx("option",{value:"RARE",children:"Rare"}),u.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Category"}),u.jsxs("select",{value:r.type,onChange:s=>n({...r,type:s.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[u.jsx("option",{value:"REVIEW_QUESTIONS",children:"Answer Review Questions"}),u.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement Time"}),u.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material Reading"}),u.jsx("option",{value:"SKILL_CHECK",children:"Agent Skill Check"}),u.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Starts At"}),u.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:s=>n({...r,startsAt:s.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Duration (Hours)"}),u.jsx("input",{type:"number",value:r.durationHours,onChange:s=>n({...r,durationHours:parseInt(s.target.value)}),placeholder:"0 (Infinite)",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),u.jsxs("div",{className:"border-t border-white/10 pt-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-3 px-1",children:"Skill Check Parameters (Optional)"}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Tech",value:r.techReq||"",onChange:s=>n({...r,techReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Focus",value:r.focusReq||"",onChange:s=>n({...r,focusReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Analysis",value:r.analysisReq||"",onChange:s=>n({...r,analysisReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Charisma",value:r.charismaReq||"",onChange:s=>n({...r,charismaReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Failure Die (D-X)"}),u.jsx("input",{type:"number",value:r.dieSides,onChange:s=>n({...r,dieSides:parseInt(s.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Consequence Text"}),u.jsx("input",{type:"text",value:r.consequence,onChange:s=>n({...r,consequence:s.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white"})]})]}),u.jsx("div",{className:"mt-3",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400",children:[u.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:s=>n({...r,isGroup:s.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"})," Group Mission (Requires multiple agents)"]})})]}),u.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:a?"Transmitting...":"Broadcast Mission"})]})}),nce=({users:t})=>{const e=qi(),{confirm:r}=ou(),[n,i]=F.useState("OPERATIVES"),[a,s]=F.useState(""),[c,d]=F.useState("All Classes"),[f,m]=F.useState("All Sections"),[p,y]=F.useState("XP_DESC"),[b,T]=F.useState([]),[S,w]=F.useState([]),[k,M]=F.useState(null),[C,B]=F.useState(null),[R,I]=F.useState(!1),[A,E]=F.useState(!1),[O,U]=F.useState(jI),[P,V]=F.useState(!1),[z,Q]=F.useState([]),[ee,K]=F.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Rr.AP_PHYSICS});F.useEffect(()=>{const de=Fe.subscribeToXPEvents(T),ge=Fe.subscribeToQuests(w);return()=>{de(),ge()}},[]),F.useEffect(()=>{const de=[];t.forEach(ge=>{var Ye,Ke;(Ke=(Ye=ge.gamification)==null?void 0:Ye.activeQuests)==null||Ke.forEach(it=>{const ut=S.find(er=>er.id===it.questId);ut&&(it.status==="DEPLOYED"||it.status==="ACCEPTED")&&de.push({user:ge,quest:ut,status:it.status,roll:it.deploymentRoll,acceptedAt:it.acceptedAt})})}),Q(de)},[t,S,n]);const Z=F.useMemo(()=>t.filter(de=>de.role==="STUDENT"),[t]),Y=F.useMemo(()=>{const de=new Set;return Z.forEach(ge=>{ge.section&&de.add(ge.section)}),Array.from(de).sort()},[Z]),pe=F.useMemo(()=>Z.filter(de=>{var it;const ge=de.name.toLowerCase().includes(a.toLowerCase())||de.email.toLowerCase().includes(a.toLowerCase()),Ye=c==="All Classes"||de.classType===c||((it=de.enrolledClasses)==null?void 0:it.includes(c)),Ke=f==="All Sections"||de.section===f;return ge&&Ye&&Ke}).sort((de,ge)=>{var Ye,Ke,it,ut;return p==="XP_DESC"?(((Ye=ge.gamification)==null?void 0:Ye.xp)||0)-(((Ke=de.gamification)==null?void 0:Ke.xp)||0):p==="XP_ASC"?(((it=de.gamification)==null?void 0:it.xp)||0)-(((ut=ge.gamification)==null?void 0:ut.xp)||0):de.name.localeCompare(ge.name)}),[Z,a,c,f,p]),ae=async(de,ge)=>{try{await Fe.adjustUserXP(de.id,ge,de.classType||Rr.UNCATEGORIZED),e.success(`${ge>0?"+":""}${ge} XP applied to ${de.name}.`)}catch{e.error("Failed to adjust XP.")}M(null)},X=async de=>{de.preventDefault(),await Fe.saveXPEvent({id:Math.random().toString(36).substring(2,9),title:ee.title,multiplier:ee.multiplier,isActive:!0,type:ee.type,targetClass:ee.type==="CLASS_SPECIFIC"?ee.targetClass:void 0}),I(!1),K({title:"",multiplier:2,type:"GLOBAL",targetClass:Rr.AP_PHYSICS})},J=async de=>{de.preventDefault(),V(!0);try{const ge={};O.techReq>0&&(ge.tech=O.techReq),O.focusReq>0&&(ge.focus=O.focusReq),O.analysisReq>0&&(ge.analysis=O.analysisReq),O.charismaReq>0&&(ge.charisma=O.charismaReq);const Ye=new Date;Ye.setHours(Ye.getHours()+(O.durationHours||0));const Ke={id:Math.random().toString(36).substring(2,9),title:O.title,description:O.description,xpReward:O.xpReward,fluxReward:O.fluxReward,isActive:!0,type:O.type,statRequirements:ge,startsAt:O.startsAt?new Date(O.startsAt).toISOString():null,expiresAt:O.durationHours>0?Ye.toISOString():null,itemRewardRarity:O.lootRarity||null,rollDieSides:O.dieSides||20,consequenceText:O.consequence||null,isGroupQuest:O.isGroup};await Fe.saveQuest(Ke),e.success(`Mission "${Ke.title}" deployed.`),U(jI),E(!1)}catch(ge){console.error("Failed to issue mission:",ge),e.error("Failed to issue mission.")}finally{V(!1)}},le=async de=>{await Fe.saveXPEvent({...de,isActive:!de.isActive})},Ee=async de=>{await Fe.saveQuest({...de,isActive:!de.isActive})},oe=async(de,ge)=>{var Ke,it;if(!await r({message:`Confiscate ${ge.name} from ${de.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const Ye=(((Ke=de.gamification)==null?void 0:Ke.inventory)||[]).filter(ut=>ut.id!==ge.id);await Fe.adminUpdateInventory(de.id,Ye,((it=de.gamification)==null?void 0:it.currency)||0),B(ut=>ut?{...ut,gamification:{...ut.gamification,inventory:Ye}}:null)},Oe=async(de,ge)=>{var Ke;if(!await r({message:`Force unequip ${ge} from ${de.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const Ye={...(Ke=de.gamification)==null?void 0:Ke.equipped};delete Ye[ge],await Fe.adminUpdateEquipped(de.id,Ye),B(it=>it?{...it,gamification:{...it.gamification,equipped:Ye}}:null)},Me=async(de,ge)=>{var Ke,it;const Ye=Math.max(0,(((Ke=de.gamification)==null?void 0:Ke.currency)||0)+ge);await Fe.adminUpdateInventory(de.id,((it=de.gamification)==null?void 0:it.inventory)||[],Ye),B(ut=>ut?{...ut,gamification:{...ut.gamification,currency:Ye}}:null)},at=async(de,ge,Ye,Ke)=>{try{await Fe.resolveQuest(de,ge,Ye,Ke),e.success(Ye?`Mission "${ge.title}" approved.`:`Mission "${ge.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},Ae=async de=>{const ge=de.quest.rollDieSides||20,Ye=Math.floor(Math.random()*ge)+1;e.info(`Rolled a ${Ye} on a D${ge}. ${Ye===ge?"CRITICAL SUCCESS!":"Failure confirmed."}`),await at(de.user.id,de.quest,Ye===ge,de.user.classType)},$e=({id:de,label:ge,icon:Ye})=>u.jsxs("button",{onClick:()=>i(de),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===de?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[u.jsx(Ye,{className:"w-4 h-4"}),ge]});return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),u.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),u.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&u.jsxs("button",{onClick:()=>I(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[u.jsx(Fae,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&u.jsxs("button",{onClick:()=>E(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[u.jsx(mae,{className:"w-4 h-4"})," Issue Mission"]})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[u.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[u.jsx($e,{id:"OPERATIVES",label:"Operatives",icon:fs}),u.jsx($e,{id:"PROTOCOLS",label:"XP Protocols",icon:Kn}),u.jsx($e,{id:"MISSIONS",label:"Missions",icon:So}),u.jsx($e,{id:"MISSION_CONTROL",label:"Mission Control",icon:Zd})]}),u.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(wF,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),u.jsx("input",{type:"text",placeholder:"Search name, operative ID or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:a,onChange:de=>s(de.target.value)})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Tae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),u.jsxs("select",{value:c,onChange:de=>d(de.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Classes"}),Object.values(Rr).map(de=>u.jsx("option",{value:de,children:de},de))]}),u.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Y.length>0&&u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:f,onChange:de=>m(de.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Sections"}),Y.map(de=>u.jsx("option",{value:de,children:de},de))]}),u.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),u.jsx("div",{className:"relative",children:u.jsxs("select",{value:p,onChange:de=>y(de.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{value:"XP_DESC",children:"Highest XP"}),u.jsx("option",{value:"XP_ASC",children:"Lowest XP"}),u.jsx("option",{value:"NAME",children:"Alphabetical"})]})})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[u.jsx("th",{className:"pb-4 pl-4",children:"Operative"}),u.jsx("th",{className:"pb-4",children:"Status"}),u.jsx("th",{className:"pb-4 text-center",children:"XP Points"}),u.jsx("th",{className:"pb-4 text-center",children:"Gear Score"}),u.jsx("th",{className:"pb-4 text-right pr-4",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:pe.map(de=>{var ge,Ye,Ke,it;return u.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[u.jsx("td",{className:"py-4 pl-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:de.avatarUrl,className:"w-10 h-10 rounded-xl border border-white/10",alt:de.name}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-200",children:de.name}),u.jsx("div",{className:"text-[10px] font-mono text-gray-500 uppercase",children:((ge=de.gamification)==null?void 0:ge.codename)||"UNASSIGNED"})]})]})}),u.jsx("td",{className:"py-4",children:u.jsx("span",{className:"text-[10px] bg-purple-500/10 text-purple-400 px-2 py-1 rounded border border-purple-500/20 font-bold uppercase",children:de.classType})}),u.jsxs("td",{className:"py-4 text-center",children:[u.jsx("div",{className:"text-xl font-black text-white",children:((Ke=(Ye=de.gamification)==null?void 0:Ye.xp)==null?void 0:Ke.toLocaleString())||0}),u.jsx("div",{className:"text-[8px] text-gray-500 font-bold uppercase tracking-tighter",children:"Accumulated XP"})]}),u.jsx("td",{className:"py-4 text-center",children:u.jsx("span",{className:"text-sm font-bold text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded border border-yellow-500/20",children:jg((it=de.gamification)==null?void 0:it.equipped)})}),u.jsx("td",{className:"py-4 text-right pr-4",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>B(de),className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20",title:"Inspect Inventory",children:u.jsx(Zd,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>M(de),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20",title:"Adjust XP",children:u.jsx(Nl,{className:"w-4 h-4"})})]})})]},de.id)})})]})})]}),n==="PROTOCOLS"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(de=>u.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${de.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[de.isActive&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${de.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:u.jsx(Kn,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>Fe.deleteXPEvent(de.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx(Fi,{className:"w-4 h-4"})})]}),u.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:de.title}),u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[de.multiplier,"x"]}),u.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:de.type==="GLOBAL"?"Global Uplink":de.targetClass}),u.jsx("button",{onClick:()=>le(de),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${de.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:de.isActive?"Active":"Offline"})]})]},de.id)),u.jsxs("button",{onClick:()=>I(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:u.jsx(Nl,{className:"w-6 h-6"})}),u.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&u.jsx("div",{className:"space-y-4",children:S.map(de=>u.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${de.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${de.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:u.jsx(E0,{className:"w-7 h-7"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-white",children:de.title}),u.jsx("p",{className:"text-sm text-gray-500",children:de.description}),de.statRequirements&&u.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(de.statRequirements).map(([ge,Ye])=>u.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ye," ",ge]},ge))}),u.jsxs("div",{className:"flex gap-3 mt-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:de.type}),u.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",de.xpReward," XP"]}),de.itemRewardRarity&&u.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:"LOOT DROP"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>Ee(de),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${de.isActive?"bg-purple-600":"bg-gray-700"}`,children:u.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${de.isActive?"translate-x-6":""}`})}),u.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:de.isActive?"Active":"Standby"})]}),u.jsx("button",{onClick:()=>Fe.deleteQuest(de.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx(Fi,{className:"w-4 h-4"})})]})]},de.id))}),n==="MISSION_CONTROL"&&u.jsx(tce,{deployments:z,onResolveQuest:at,onRollForSalvation:Ae})]})]}),u.jsx(Zle,{user:C,onClose:()=>B(null),onDeleteItem:oe,onUnequipItem:Oe,onGrantFlux:Me}),u.jsx(rce,{isOpen:A,onClose:()=>E(!1),form:O,setForm:U,onSubmit:J,isSubmitting:P}),u.jsx(Ha,{isOpen:R,onClose:()=>I(!1),title:"New XP Protocol Deployment",children:u.jsxs("form",{onSubmit:X,className:"space-y-4 text-gray-100 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),u.jsx("input",{value:ee.title,onChange:de=>K({...ee,title:de.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),u.jsx("input",{type:"number",step:"0.5",value:ee.multiplier,onChange:de=>K({...ee,multiplier:parseFloat(de.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),u.jsxs("select",{value:ee.type,onChange:de=>K({...ee,type:de.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[u.jsx("option",{value:"GLOBAL",children:"Global Node"}),u.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),ee.type==="CLASS_SPECIFIC"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),u.jsx("select",{value:ee.targetClass,onChange:de=>K({...ee,targetClass:de.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Rr).map(de=>u.jsx("option",{value:de,children:de},de))})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),u.jsx(ece,{user:k,onClose:()=>M(null),onAdjust:ae})]})},ice={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:u.jsx(vF,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:u.jsx(mF,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:u.jsx(_F,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},ace=({onToggleChat:t})=>{const[e,r]=F.useState(null),[n,i]=F.useState(!1),a=c=>{e===c?r(null):(r(c),i(!1))};if(!e)return u.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[u.jsxs("button",{onClick:()=>a("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[u.jsx(_F,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),u.jsxs("button",{onClick:()=>a("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[u.jsx(mF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),u.jsxs("button",{onClick:()=>a("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[u.jsx(vF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&u.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[u.jsx(vT,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=ice[e];return u.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[u.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),u.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>i(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?u.jsx(gF,{className:"w-4 h-4"}):u.jsx(Dae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:u.jsx(ys,{className:"w-4 h-4"})})]})]}),!n&&u.jsx("div",{className:"flex-1 bg-white relative",children:u.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},sce=["","","","","","","",""],oce=["","","","","","","","","","","","","","","","","","","","","","","","","",""],lce=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:i,onOpenResource:a})=>{var Ee;const{confirm:s}=ou(),[c,d]=F.useState([]),[f,m]=F.useState(""),[p,y]=F.useState("Main"),[b,T]=F.useState(!1),[S,w]=F.useState(!1),[k,M]=F.useState(null),[C,B]=F.useState(null),[R,I]=F.useState([]),A=F.useRef(null),E=F.useRef(null),O=F.useMemo(()=>Object.values(Rr).filter(oe=>{var Ae;if(oe===Rr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Oe=i.find($e=>$e.className===oe),Me=(Ae=t.enrolledClasses)==null?void 0:Ae.includes(oe),at=Oe?Oe.features.communications:!0;return Me&&at}),[i,t.role,t.enrolledClasses]),[U,P]=F.useState(O[0]||""),V=F.useMemo(()=>p==="Resources"&&C?`res_${C}`:p==="Resources"&&!C||!U?"":`class_${U.replace(/\s+/g,"_").toLowerCase()}`,[U,p,C]),z=F.useRef(null),Q=F.useMemo(()=>n.filter(oe=>oe.classType===U&&oe.status!=="DRAFT"),[n,U]),ee=F.useMemo(()=>c.filter(oe=>{var Oe;return oe.isGlobalPinned||((Oe=oe.pinnedBy)==null?void 0:Oe.includes(t.id))}),[c,t.id]),K=F.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]);F.useEffect(()=>{if(!e)return;let oe="";if(p==="Resources"&&C?oe=`res_${C}`:(p==="Main"||p==="Bookmarks")&&(oe=`class_${U.replace(/\s+/g,"_").toLowerCase()}`),!oe)return;T(!0);const Oe=Fe.subscribeToChannelMessages(oe,Me=>{d(Me),T(!1)});return()=>{Oe()}},[e,U,p,C]),F.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const oe=Fe.subscribeToFlaggedMessages(Oe=>{I(Oe)});return()=>oe()},[e,t.role]),F.useEffect(()=>{z.current&&(z.current.scrollTop=z.current.scrollHeight)},[c,b,p,C]),F.useEffect(()=>{const oe=Oe=>{A.current&&!A.current.contains(Oe.target)&&w(!1),E.current&&!E.current.contains(Oe.target)&&M(null)};return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[]),F.useEffect(()=>{if(!e)return;const oe=Oe=>{Oe.key==="Escape"&&r()};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[e,r]);const Z=F.useCallback(async oe=>{if(oe.preventDefault(),!(!f.trim()||!V)&&!K)try{await Fe.sendMessage(t,f,V,U),m(""),w(!1)}catch(Oe){console.error("Failed to send message:",Oe)}},[f,V,K,t,U]),Y=F.useCallback(async(oe,Oe)=>{try{await Fe.toggleReaction(oe,Oe,t.id),M(null)}catch(Me){console.error(Me)}},[t.id]),pe=F.useCallback(async oe=>{try{await Fe.togglePersonalPin(oe,t.id)}catch(Oe){console.error(Oe)}},[t.id]),ae=F.useCallback(async(oe,Oe)=>{try{await Fe.toggleGlobalPin(oe,!Oe)}catch(Me){console.error(Me)}},[]),X=async oe=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Fe.deleteMessage(oe)}catch(Oe){console.error(Oe)}},J=async oe=>{try{await Fe.unflagMessage(oe),await Fe.resolveFlagByMessageId(oe)}catch(Oe){console.error(Oe)}},le=async oe=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Fe.resolveFlagByMessageId(oe),await Fe.deleteMessage(oe)}catch(Oe){console.error(Oe)}};return e?u.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[p==="Resources"&&C?u.jsx("button",{onClick:()=>B(null),className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:u.jsx(gae,{className:"w-5 h-5"})}):u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:u.jsx(vT,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:p==="Moderation"?"Moderation Queue":p==="Resources"?C?(Ee=Q.find(oe=>oe.id===C))==null?void 0:Ee.title:"Class Resources":U}),p!=="Resources"&&p!=="Moderation"&&O.length>1&&u.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[u.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:U}),u.jsx(Hs,{className:"w-3 h-3 text-gray-500 ml-1"}),u.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:U,onChange:oe=>P(oe.target.value),children:O.map(oe=>u.jsx("option",{value:oe,children:oe},oe))})]})]})]}),u.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:u.jsx(ys,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[u.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${p==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(vT,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${p==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(qs,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${p==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(NC,{className:"w-5 h-5"})}),t.role==="ADMIN"&&u.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${p==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[u.jsx(fs,{className:"w-5 h-5"}),R.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:R.length})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative",children:[p==="Resources"&&!C&&u.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:u.jsx("div",{className:"space-y-2",children:Q.map(oe=>u.jsxs("div",{onClick:()=>B(oe.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:u.jsx(Nae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:oe.title}),u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:oe.unit})]})]}),u.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),a==null||a(oe.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:u.jsx(_ae,{className:"w-4 h-4"})})]},oe.id))})}),p==="Moderation"&&t.role==="ADMIN"&&u.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(gs,{className:"w-4 h-4 text-red-400"}),u.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),u.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[R.length," item",R.length!==1?"s":""]})]}),R.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[u.jsx(fs,{className:"w-10 h-10 mb-3 opacity-30"}),u.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):u.jsx("div",{className:"space-y-3",children:R.map(oe=>{var Oe;return u.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300",children:oe.senderName}),u.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(oe.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-sm text-gray-200 mb-1",children:oe.content}),oe.systemNote&&u.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:oe.systemNote}),u.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:((Oe=oe.channelId)==null?void 0:Oe.replace("class_","").replace(/_/g," "))||"unknown channel"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>J(oe.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[u.jsx(kx,{className:"w-3.5 h-3.5"})," Approve"]}),u.jsxs("button",{onClick:()=>le(oe.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[u.jsx(Fi,{className:"w-3.5 h-3.5"})," Delete"]})]})]},oe.id)})})]}),(p==="Main"||p==="Bookmarks"||p==="Resources"&&C)&&u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:z,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(p==="Bookmarks"?ee:c).map((oe,Oe)=>{var Ae;const Me=oe.senderId===t.id,at=Oe>0&&c[Oe-1].senderId===oe.senderId&&new Date(oe.timestamp).getTime()-new Date(c[Oe-1].timestamp).getTime()<3e5;return u.jsxs("div",{className:`group flex flex-col ${Me?"items-end":"items-start"} ${at?"mt-1":"mt-4"}`,children:[!at&&u.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[u.jsx("span",{className:`text-xs font-bold ${Me?"text-indigo-400":"text-gray-300"}`,children:oe.senderName}),u.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),oe.isGlobalPinned&&u.jsx(IC,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),u.jsxs("div",{className:"relative max-w-[85%]",children:[u.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Me?"right-0":"left-0"} z-30`,children:[u.jsx("button",{onClick:()=>M(oe.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:u.jsx(MC,{className:"w-3.5 h-3.5 text-yellow-400"})}),u.jsx("button",{onClick:()=>pe(oe.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Ae=oe.pinnedBy)!=null&&Ae.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:u.jsx(NC,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ae(oe.id,!!oe.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${oe.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:u.jsx(IC,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>X(oe.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:u.jsx(Fi,{className:"w-3.5 h-3.5"})})]})]}),k===oe.id&&u.jsx("div",{ref:E,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Me?"right-0":"left-0"}`,children:sce.map($e=>u.jsx("button",{onClick:()=>Y(oe.id,$e),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:$e},$e))}),u.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Me?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${oe.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${oe.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:oe.content}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:oe.reactions&&Object.entries(oe.reactions).map(([$e,de])=>{const ge=de;return ge.length>0&&u.jsxs("button",{onClick:()=>Y(oe.id,$e),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ge.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[$e," ",ge.length]},$e)})})]})]},oe.id)})}),u.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:u.jsxs("form",{onSubmit:Z,className:"relative flex items-center gap-2",children:[S&&u.jsx("div",{ref:A,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:oce.map(oe=>u.jsx("button",{type:"button",onClick:()=>m(Oe=>Oe+oe),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:oe},oe))}),u.jsx("button",{type:"button",onClick:()=>w(!S),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:u.jsx(MC,{className:"w-5 h-5"})}),u.jsx("input",{type:"text",value:f,onChange:oe=>m(oe.target.value),placeholder:K?"Transmission Disabled":"Type message...",disabled:!V||K,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),u.jsx("button",{type:"submit",disabled:!V||K||!f.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:u.jsx(qae,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function Eq(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Eq(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function zt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Eq(t))&&(n&&(n+=" "),n+=e);return n}var x5,CI;function Ea(){if(CI)return x5;CI=1;var t=Array.isArray;return x5=t,x5}var w5,II;function Nq(){if(II)return w5;II=1;var t=typeof hy=="object"&&hy&&hy.Object===Object&&hy;return w5=t,w5}var _5,RI;function jo(){if(RI)return _5;RI=1;var t=Nq(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return _5=r,_5}var S5,MI;function Cg(){if(MI)return S5;MI=1;var t=jo(),e=t.Symbol;return S5=e,S5}var T5,PI;function cce(){if(PI)return T5;PI=1;var t=Cg(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function a(s){var c=r.call(s,i),d=s[i];try{s[i]=void 0;var f=!0}catch{}var m=n.call(s);return f&&(c?s[i]=d:delete s[i]),m}return T5=a,T5}var A5,DI;function uce(){if(DI)return A5;DI=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return A5=r,A5}var E5,LI;function Bl(){if(LI)return E5;LI=1;var t=Cg(),e=cce(),r=uce(),n="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):r(c)}return E5=s,E5}var N5,BI;function Ul(){if(BI)return N5;BI=1;function t(e){return e!=null&&typeof e=="object"}return N5=t,N5}var k5,UI;function nf(){if(UI)return k5;UI=1;var t=Bl(),e=Ul(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return k5=n,k5}var O5,zI;function X8(){if(zI)return O5;zI=1;var t=Ea(),e=nf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(t(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return O5=i,O5}var j5,$I;function lu(){if($I)return j5;$I=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return j5=t,j5}var C5,VI;function Q8(){if(VI)return C5;VI=1;var t=Bl(),e=lu(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==i||d==r||d==a}return C5=s,C5}var I5,FI;function dce(){if(FI)return I5;FI=1;var t=jo(),e=t["__core-js_shared__"];return I5=e,I5}var R5,qI;function hce(){if(qI)return R5;qI=1;var t=dce(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return R5=r,R5}var M5,HI;function kq(){if(HI)return M5;HI=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return M5=r,M5}var P5,GI;function fce(){if(GI)return P5;GI=1;var t=Q8(),e=hce(),r=lu(),n=kq(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,f=c.hasOwnProperty,m=RegExp("^"+d.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!r(y)||e(y))return!1;var b=t(y)?m:a;return b.test(n(y))}return P5=p,P5}var D5,KI;function mce(){if(KI)return D5;KI=1;function t(e,r){return e==null?void 0:e[r]}return D5=t,D5}var L5,WI;function z0(){if(WI)return L5;WI=1;var t=fce(),e=mce();function r(n,i){var a=e(n,i);return t(a)?a:void 0}return L5=r,L5}var B5,XI;function zx(){if(XI)return B5;XI=1;var t=z0(),e=t(Object,"create");return B5=e,B5}var U5,QI;function pce(){if(QI)return U5;QI=1;var t=zx();function e(){this.__data__=t?t(null):{},this.size=0}return U5=e,U5}var z5,YI;function gce(){if(YI)return z5;YI=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return z5=t,z5}var $5,ZI;function yce(){if(ZI)return $5;ZI=1;var t=zx(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(t){var c=s[a];return c===e?void 0:c}return n.call(s,a)?s[a]:void 0}return $5=i,$5}var V5,JI;function vce(){if(JI)return V5;JI=1;var t=zx(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return V5=n,V5}var F5,eR;function bce(){if(eR)return F5;eR=1;var t=zx(),e="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&i===void 0?e:i,this}return F5=r,F5}var q5,tR;function xce(){if(tR)return q5;tR=1;var t=pce(),e=gce(),r=yce(),n=vce(),i=bce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,q5=a,q5}var H5,rR;function wce(){if(rR)return H5;rR=1;function t(){this.__data__=[],this.size=0}return H5=t,H5}var G5,nR;function Y8(){if(nR)return G5;nR=1;function t(e,r){return e===r||e!==e&&r!==r}return G5=t,G5}var K5,iR;function $x(){if(iR)return K5;iR=1;var t=Y8();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return K5=e,K5}var W5,aR;function _ce(){if(aR)return W5;aR=1;var t=$x(),e=Array.prototype,r=e.splice;function n(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():r.call(a,s,1),--this.size,!0}return W5=n,W5}var X5,sR;function Sce(){if(sR)return X5;sR=1;var t=$x();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return X5=e,X5}var Q5,oR;function Tce(){if(oR)return Q5;oR=1;var t=$x();function e(r){return t(this.__data__,r)>-1}return Q5=e,Q5}var Y5,lR;function Ace(){if(lR)return Y5;lR=1;var t=$x();function e(r,n){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Y5=e,Y5}var Z5,cR;function Vx(){if(cR)return Z5;cR=1;var t=wce(),e=_ce(),r=Sce(),n=Tce(),i=Ace();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Z5=a,Z5}var J5,uR;function Z8(){if(uR)return J5;uR=1;var t=z0(),e=jo(),r=t(e,"Map");return J5=r,J5}var e3,dR;function Ece(){if(dR)return e3;dR=1;var t=xce(),e=Vx(),r=Z8();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return e3=n,e3}var t3,hR;function Nce(){if(hR)return t3;hR=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return t3=t,t3}var r3,fR;function Fx(){if(fR)return r3;fR=1;var t=Nce();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return r3=e,r3}var n3,mR;function kce(){if(mR)return n3;mR=1;var t=Fx();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return n3=e,n3}var i3,pR;function Oce(){if(pR)return i3;pR=1;var t=Fx();function e(r){return t(this,r).get(r)}return i3=e,i3}var a3,gR;function jce(){if(gR)return a3;gR=1;var t=Fx();function e(r){return t(this,r).has(r)}return a3=e,a3}var s3,yR;function Cce(){if(yR)return s3;yR=1;var t=Fx();function e(r,n){var i=t(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return s3=e,s3}var o3,vR;function J8(){if(vR)return o3;vR=1;var t=Ece(),e=kce(),r=Oce(),n=jce(),i=Cce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,o3=a,o3}var l3,bR;function Oq(){if(bR)return l3;bR=1;var t=J8(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,c=i?i.apply(this,s):s[0],d=a.cache;if(d.has(c))return d.get(c);var f=n.apply(this,s);return a.cache=d.set(c,f)||d,f};return a.cache=new(r.Cache||t),a}return r.Cache=t,l3=r,l3}var c3,xR;function Ice(){if(xR)return c3;xR=1;var t=Oq(),e=500;function r(n){var i=t(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return c3=r,c3}var u3,wR;function Rce(){if(wR)return u3;wR=1;var t=Ice(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,c,d,f){a.push(d?f.replace(r,"$1"):c||s)}),a});return u3=n,u3}var d3,_R;function eE(){if(_R)return d3;_R=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=r(e[n],n,e);return a}return d3=t,d3}var h3,SR;function Mce(){if(SR)return h3;SR=1;var t=Cg(),e=eE(),r=Ea(),n=nf(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return a?a.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return h3=s,h3}var f3,TR;function jq(){if(TR)return f3;TR=1;var t=Mce();function e(r){return r==null?"":t(r)}return f3=e,f3}var m3,AR;function Cq(){if(AR)return m3;AR=1;var t=Ea(),e=X8(),r=Rce(),n=jq();function i(a,s){return t(a)?a:e(a,s)?[a]:r(n(a))}return m3=i,m3}var p3,ER;function qx(){if(ER)return p3;ER=1;var t=nf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return p3=e,p3}var g3,NR;function tE(){if(NR)return g3;NR=1;var t=Cq(),e=qx();function r(n,i){i=t(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return g3=r,g3}var y3,kR;function Iq(){if(kR)return y3;kR=1;var t=tE();function e(r,n,i){var a=r==null?void 0:t(r,n);return a===void 0?i:a}return y3=e,y3}var Pce=Iq();const ms=vr(Pce);var v3,OR;function Dce(){if(OR)return v3;OR=1;function t(e){return e==null}return v3=t,v3}var Lce=Dce();const Dt=vr(Lce);var b3,jR;function Bce(){if(jR)return b3;jR=1;var t=Bl(),e=Ea(),r=Ul(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return b3=i,b3}var Uce=Bce();const N0=vr(Uce);var zce=Q8();const Ct=vr(zce);var $ce=lu();const af=vr($ce);var x3={exports:{}},wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function Vce(){if(CR)return wr;CR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var k=w.$$typeof;switch(k){case t:switch(w=w.type,w){case r:case i:case n:case f:case m:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case p:case a:return w;default:return k}}case e:return k}}}return wr.ContextConsumer=s,wr.ContextProvider=a,wr.Element=t,wr.ForwardRef=d,wr.Fragment=r,wr.Lazy=y,wr.Memo=p,wr.Portal=e,wr.Profiler=i,wr.StrictMode=n,wr.Suspense=f,wr.SuspenseList=m,wr.isAsyncMode=function(){return!1},wr.isConcurrentMode=function(){return!1},wr.isContextConsumer=function(w){return S(w)===s},wr.isContextProvider=function(w){return S(w)===a},wr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},wr.isForwardRef=function(w){return S(w)===d},wr.isFragment=function(w){return S(w)===r},wr.isLazy=function(w){return S(w)===y},wr.isMemo=function(w){return S(w)===p},wr.isPortal=function(w){return S(w)===e},wr.isProfiler=function(w){return S(w)===i},wr.isStrictMode=function(w){return S(w)===n},wr.isSuspense=function(w){return S(w)===f},wr.isSuspenseList=function(w){return S(w)===m},wr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===f||w===m||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===p||w.$$typeof===a||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},wr.typeOf=S,wr}var IR;function Fce(){return IR||(IR=1,x3.exports=Vce()),x3.exports}var qce=Fce(),w3,RR;function Rq(){if(RR)return w3;RR=1;var t=Bl(),e=Ul(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return w3=n,w3}var _3,MR;function Hce(){if(MR)return _3;MR=1;var t=Rq();function e(r){return t(r)&&r!=+r}return _3=e,_3}var Gce=Hce();const Ig=vr(Gce);var Kce=Rq();const Wce=vr(Kce);var Us=function(e){return e===0?0:e>0?1:-1},r0=function(e){return N0(e)&&e.indexOf("%")===e.length-1},et=function(e){return Wce(e)&&!Ig(e)},Xce=function(e){return Dt(e)},ti=function(e){return et(e)||N0(e)},Qce=0,Rg=function(e){var r=++Qce;return"".concat(e||"").concat(r)},zs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(e)&&!N0(e))return n;var a;if(r0(e)){var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return Ig(a)&&(a=n),i&&a>r&&(a=r),a},Rc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Yce=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},ba=function(e,r){return et(e)&&et(r)?function(n){return e+n*(r-e)}:function(){return r}};function Xv(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ms(n,e))===r})}var Zce=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,i=0,a=0,s=0,c=1/0,d=-1/0,f=0,m=0,p=0;p<r;p++)f=e[p].cx||0,m=e[p].cy||0,n+=f,i+=m,a+=f*m,s+=f*f,c=Math.min(c,f),d=Math.max(d,f);var y=r*s!==n*n?(r*a-n*i)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(i-y*n)/r}},Jce=function(e,r){return et(e)&&et(r)?e-r:N0(e)&&N0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function eh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function CT(t){"@babel/helpers - typeof";return CT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CT(t)}var eue=["viewBox","children"],tue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PR=["points","pathLength"],S3={svg:eue,polygon:PR,polyline:PR},rE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Qv=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(F.isValidElement(e)&&(n=e.props),!af(n))return null;var i={};return Object.keys(n).forEach(function(a){rE.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},rue=function(e,r,n){return function(i){return e(r,n,i),null}},k0=function(e,r,n){if(!af(e)||CT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];rE.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=rue(s,r,n))}),i},nue=["children"],iue=["children"];function DR(t,e){if(t==null)return{};var r=aue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var LR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},bl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},BR=null,T3=null,nE=function t(e){if(e===BR&&Array.isArray(T3))return T3;var r=[];return F.Children.forEach(e,function(n){Dt(n)||(qce.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),T3=r,BR=e,r};function Ka(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return bl(i)}):n=[bl(e)],nE(t).forEach(function(i){var a=ms(i,"type.displayName")||ms(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function Ba(t,e){var r=Ka(t,e);return r&&r[0]}var UR=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!et(n)||n<=0||!et(i)||i<=0)},sue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],oue=function(e){return e&&e.type&&N0(e.type)&&sue.indexOf(e.type)>=0},lue=function(e,r,n,i){var a,s=(a=S3==null?void 0:S3[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Ct(e)&&(i&&s.includes(r)||tue.includes(r))||n&&rE.includes(r)},xt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(F.isValidElement(e)&&(i=e.props),!af(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;lue((c=i)===null||c===void 0?void 0:c[s],s,r,n)&&(a[s]=i[s])}),a},IT=function t(e,r){if(e===r)return!0;var n=F.Children.count(e);if(n!==F.Children.count(r))return!1;if(n===0)return!0;if(n===1)return zR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!zR(a,s))return!1}return!0},zR=function(e,r){if(Dt(e)&&Dt(r))return!0;if(!Dt(e)&&!Dt(r)){var n=e.props||{},i=n.children,a=DR(n,nue),s=r.props||{},c=s.children,d=DR(s,iue);return i&&c?eh(a,d)&&IT(i,c):!i&&!c?eh(a,d):!1}return!1},$R=function(e,r){var n=[],i={};return nE(e).forEach(function(a,s){if(oue(a))n.push(a);else if(a){var c=bl(a.type),d=r[c]||{},f=d.handler,m=d.once;if(f&&(!m||!i[c])){var p=f(a,c,s);n.push(p),i[c]=!0}}}),n},cue=function(e){var r=e&&e.type;return r&&LR[r]?LR[r]:null},uue=function(e,r){return nE(r).indexOf(e)},due=["children","width","height","viewBox","className","style","title","desc"];function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RT.apply(this,arguments)}function hue(t,e){if(t==null)return{};var r=fue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function MT(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,s=t.style,c=t.title,d=t.desc,f=hue(t,due),m=i||{width:r,height:n,x:0,y:0},p=zt("recharts-surface",a);return ne.createElement("svg",RT({},xt(f,!0,"svg"),{className:p,width:r,height:n,style:s,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),ne.createElement("title",null,c),ne.createElement("desc",null,d),e)}var mue=["children","className"];function PT(){return PT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PT.apply(this,arguments)}function pue(t,e){if(t==null)return{};var r=gue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var fr=ne.forwardRef(function(t,e){var r=t.children,n=t.className,i=pue(t,mue),a=zt("recharts-layer",n);return ne.createElement("g",PT({className:a},xt(i,!0),{ref:e}),r)}),xl=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},A3,VR;function yue(){if(VR)return A3;VR=1;function t(e,r,n){var i=-1,a=e.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+r];return s}return A3=t,A3}var E3,FR;function vue(){if(FR)return E3;FR=1;var t=yue();function e(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:t(r,n,i)}return E3=e,E3}var N3,qR;function Mq(){if(qR)return N3;qR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+i+a+"]");function d(f){return c.test(f)}return N3=d,N3}var k3,HR;function bue(){if(HR)return k3;HR=1;function t(e){return e.split("")}return k3=t,k3}var O3,GR;function xue(){if(GR)return O3;GR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="["+t+"]",c="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+d+")",m="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",T=f+"?",S="["+a+"]?",w="(?:"+b+"(?:"+[m,p,y].join("|")+")"+S+T+")*",k=S+T+w,M="(?:"+[m+c+"?",c,p,y,s].join("|")+")",C=RegExp(d+"(?="+d+")|"+M+k,"g");function B(R){return R.match(C)||[]}return O3=B,O3}var j3,KR;function wue(){if(KR)return j3;KR=1;var t=bue(),e=Mq(),r=xue();function n(i){return e(i)?r(i):t(i)}return j3=n,j3}var C3,WR;function _ue(){if(WR)return C3;WR=1;var t=vue(),e=Mq(),r=wue(),n=jq();function i(a){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),f=c?t(c,1).join(""):s.slice(1);return d[a]()+f}}return C3=i,C3}var I3,XR;function Sue(){if(XR)return I3;XR=1;var t=_ue(),e=t("toUpperCase");return I3=e,I3}var Tue=Sue();const Hx=vr(Tue);function Yr(t){return function(){return t}}const Pq=Math.cos,Yv=Math.sin,Ks=Math.sqrt,Zv=Math.PI,Gx=2*Zv,DT=Math.PI,LT=2*DT,Wu=1e-6,Aue=LT-Wu;function Dq(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Eue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Dq;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Nue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Dq:Eue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,d=n-e,f=i-r,m=s-e,p=c-r,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>Wu)if(!(Math.abs(p*d-f*m)>Wu)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let b=n-s,T=i-c,S=d*d+f*f,w=b*b+T*T,k=Math.sqrt(S),M=Math.sqrt(y),C=a*Math.tan((DT-Math.acos((S+y-w)/(2*k*M)))/2),B=C/M,R=C/k;Math.abs(B-1)>Wu&&this._append`L${e+B*m},${r+B*p}`,this._append`A${a},${a},0,0,${+(p*b>m*T)},${this._x1=e+R*d},${this._y1=r+R*f}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),d=n*Math.sin(i),f=e+c,m=r+d,p=1^s,y=s?i-a:a-i;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Wu||Math.abs(this._y1-m)>Wu)&&this._append`L${f},${m}`,n&&(y<0&&(y=y%LT+LT),y>Aue?this._append`A${n},${n},0,1,${p},${e-c},${r-d}A${n},${n},0,1,${p},${this._x1=f},${this._y1=m}`:y>Wu&&this._append`A${n},${n},0,${+(y>=DT)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function iE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Nue(e)}function aE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Lq(t){this._context=t}Lq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Kx(t){return new Lq(t)}function Bq(t){return t[0]}function Uq(t){return t[1]}function zq(t,e){var r=Yr(!0),n=null,i=Kx,a=null,s=iE(c);t=typeof t=="function"?t:t===void 0?Bq:Yr(t),e=typeof e=="function"?e:e===void 0?Uq:Yr(e);function c(d){var f,m=(d=aE(d)).length,p,y=!1,b;for(n==null&&(a=i(b=s())),f=0;f<=m;++f)!(f<m&&r(p=d[f],f,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(p,f,d),+e(p,f,d));if(b)return a=null,b+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Yr(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Yr(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Yr(!!d),c):r},c.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),c):i},c.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),c):n},c}function My(t,e,r){var n=null,i=Yr(!0),a=null,s=Kx,c=null,d=iE(f);t=typeof t=="function"?t:t===void 0?Bq:Yr(+t),e=typeof e=="function"?e:Yr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Uq:Yr(+r);function f(p){var y,b,T,S=(p=aE(p)).length,w,k=!1,M,C=new Array(S),B=new Array(S);for(a==null&&(c=s(M=d())),y=0;y<=S;++y){if(!(y<S&&i(w=p[y],y,p))===k)if(k=!k)b=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=b;--T)c.point(C[T],B[T]);c.lineEnd(),c.areaEnd()}k&&(C[y]=+t(w,y,p),B[y]=+e(w,y,p),c.point(n?+n(w,y,p):C[y],r?+r(w,y,p):B[y]))}if(M)return c=null,M+""||null}function m(){return zq().defined(i).curve(s).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Yr(+p),n=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Yr(+p),f):t},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Yr(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Yr(+p),r=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Yr(+p),f):e},f.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Yr(+p),f):r},f.lineX0=f.lineY0=function(){return m().x(t).y(e)},f.lineY1=function(){return m().x(t).y(r)},f.lineX1=function(){return m().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Yr(!!p),f):i},f.curve=function(p){return arguments.length?(s=p,a!=null&&(c=s(a)),f):s},f.context=function(p){return arguments.length?(p==null?a=c=null:c=s(a=p),f):a},f}class $q{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function kue(t){return new $q(t,!0)}function Oue(t){return new $q(t,!1)}const sE={draw(t,e){const r=Ks(e/Zv);t.moveTo(r,0),t.arc(0,0,r,0,Gx)}},jue={draw(t,e){const r=Ks(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Vq=Ks(1/3),Cue=Vq*2,Iue={draw(t,e){const r=Ks(e/Cue),n=r*Vq;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Rue={draw(t,e){const r=Ks(e),n=-r/2;t.rect(n,n,r,r)}},Mue=.8908130915292852,Fq=Yv(Zv/10)/Yv(7*Zv/10),Pue=Yv(Gx/10)*Fq,Due=-Pq(Gx/10)*Fq,Lue={draw(t,e){const r=Ks(e*Mue),n=Pue*r,i=Due*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=Gx*a/5,c=Pq(s),d=Yv(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*i,d*n+c*i)}t.closePath()}},R3=Ks(3),Bue={draw(t,e){const r=-Ks(e/(R3*3));t.moveTo(0,r*2),t.lineTo(-R3*r,-r),t.lineTo(R3*r,-r),t.closePath()}},ss=-.5,os=Ks(3)/2,BT=1/Ks(12),Uue=(BT/2+1)*3,zue={draw(t,e){const r=Ks(e/Uue),n=r/2,i=r*BT,a=n,s=r*BT+r,c=-a,d=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(c,d),t.lineTo(ss*n-os*i,os*n+ss*i),t.lineTo(ss*a-os*s,os*a+ss*s),t.lineTo(ss*c-os*d,os*c+ss*d),t.lineTo(ss*n+os*i,ss*i-os*n),t.lineTo(ss*a+os*s,ss*s-os*a),t.lineTo(ss*c+os*d,ss*d-os*c),t.closePath()}};function $ue(t,e){let r=null,n=iE(i);t=typeof t=="function"?t:Yr(t||sE),e=typeof e=="function"?e:Yr(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Yr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Yr(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Jv(){}function eb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function qq(t){this._context=t}qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vue(t){return new qq(t)}function Hq(t){this._context=t}Hq.prototype={areaStart:Jv,areaEnd:Jv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:eb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fue(t){return new Hq(t)}function Gq(t){this._context=t}Gq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:eb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function que(t){return new Gq(t)}function Kq(t){this._context=t}Kq.prototype={areaStart:Jv,areaEnd:Jv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Hue(t){return new Kq(t)}function QR(t){return t<0?-1:1}function YR(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),c=(a*i+s*n)/(n+i);return(QR(a)+QR(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function ZR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function M3(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,c=(a-n)/3;t._context.bezierCurveTo(n+c,i+c*e,a-c,s-c*r,a,s)}function tb(t){this._context=t}tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:M3(this,this._t0,ZR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,M3(this,ZR(this,r=YR(this,t,e)),r);break;default:M3(this,this._t0,r=YR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Wq(t){this._context=new Xq(t)}(Wq.prototype=Object.create(tb.prototype)).point=function(t,e){tb.prototype.point.call(this,e,t)};function Xq(t){this._context=t}Xq.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Gue(t){return new tb(t)}function Kue(t){return new Wq(t)}function Qq(t){this._context=t}Qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=JR(t),i=JR(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function JR(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Wue(t){return new Qq(t)}function Wx(t,e){this._context=t,this._t=e}Wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Xue(t){return new Wx(t,.5)}function Que(t){return new Wx(t,0)}function Yue(t){return new Wx(t,1)}function wh(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,c=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function UT(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Zue(t,e){return t[e]}function Jue(t){const e=[];return e.key=t,e}function e0e(){var t=Yr([]),e=UT,r=wh,n=Zue;function i(a){var s=Array.from(t.apply(this,arguments),Jue),c,d=s.length,f=-1,m;for(const p of a)for(c=0,++f;c<d;++c)(s[c][f]=[0,+n(p,s[c].key,f,a)]).data=p;for(c=0,m=aE(e(s));c<d;++c)s[m[c]].index=c;return r(s,m),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Yr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Yr(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?UT:typeof a=="function"?a:Yr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??wh,i):r},i}function t0e(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}wh(t,e)}}function r0e(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,c=0;s<i;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}wh(t,e)}}function n0e(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var c=0,d=0,f=0;c<s;++c){for(var m=t[e[c]],p=m[n][1]||0,y=m[n-1][1]||0,b=(p-y)/2,T=0;T<c;++T){var S=t[e[T]],w=S[n][1]||0,k=S[n-1][1]||0;b+=w-k}d+=p,f+=b*p}i[n-1][1]+=i[n-1][0]=r,d&&(r-=f/d)}i[n-1][1]+=i[n-1][0]=r,wh(t,e)}}function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}var i0e=["type","size","sizeType"];function zT(){return zT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zT.apply(this,arguments)}function eM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(r),!0).forEach(function(n){a0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a0e(t,e,r){return e=s0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s0e(t){var e=o0e(t,"string");return Ep(e)=="symbol"?e:e+""}function o0e(t,e){if(Ep(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l0e(t,e){if(t==null)return{};var r=c0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function c0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Yq={symbolCircle:sE,symbolCross:jue,symbolDiamond:Iue,symbolSquare:Rue,symbolStar:Lue,symbolTriangle:Bue,symbolWye:zue},u0e=Math.PI/180,d0e=function(e){var r="symbol".concat(Hx(e));return Yq[r]||sE},h0e=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*u0e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},f0e=function(e,r){Yq["symbol".concat(Hx(e))]=r},Xx=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,s=e.sizeType,c=s===void 0?"area":s,d=l0e(e,i0e),f=tM(tM({},d),{},{type:n,size:a,sizeType:c}),m=function(){var w=d0e(n),k=$ue().type(w).size(h0e(a,c,n));return k()},p=f.className,y=f.cx,b=f.cy,T=xt(f,!0);return y===+y&&b===+b&&a===+a?ne.createElement("path",zT({},T,{className:zt("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(b,")"),d:m()})):null};Xx.registerSymbol=f0e;function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function $T(){return $T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$T.apply(this,arguments)}function rM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m0e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(r),!0).forEach(function(n){Np(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g0e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jq(n.key),n)}}function y0e(t,e,r){return e&&g0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v0e(t,e,r){return e=rb(e),b0e(t,Zq()?Reflect.construct(e,r||[],rb(t).constructor):e.apply(t,r))}function b0e(t,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x0e(t)}function x0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zq=function(){return!!t})()}function rb(t){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(t)}function w0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VT(t,e)}function Np(t,e,r){return e=Jq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jq(t){var e=_0e(t,"string");return _h(e)=="symbol"?e:e+""}function _0e(t,e){if(_h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ls=32,oE=(function(t){function e(){return p0e(this,e),v0e(this,e,arguments)}return w0e(e,t),y0e(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=ls/2,s=ls/6,c=ls/3,d=n.inactive?i:n.color;if(n.type==="plainline")return ne.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:ls,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return ne.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(ls,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return ne.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ls/8,"h").concat(ls,"v").concat(ls*3/4,"h").concat(-ls,"z"),className:"recharts-legend-icon"});if(ne.isValidElement(n.legendIcon)){var f=m0e({},n);return delete f.legendIcon,ne.cloneElement(n.legendIcon,f)}return ne.createElement(Xx,{fill:d,cx:a,cy:a,size:ls,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,d=i.formatter,f=i.inactiveColor,m={x:0,y:0,width:ls,height:ls},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(b,T){var S=b.formatter||d,w=zt(Np(Np({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",b.inactive));if(b.type==="none")return null;var k=Ct(b.value)?null:b.value;xl(!Ct(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var M=b.inactive?f:b.color;return ne.createElement("li",$T({className:w,style:p,key:"legend-item-".concat(T)},k0(n.props,b,T)),ne.createElement(MT,{width:s,height:s,viewBox:m,style:y},n.renderIcon(b)),ne.createElement("span",{className:"recharts-legend-item-text",style:{color:M}},S?S(k,b,T):k))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ne.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(F.PureComponent);Np(oE,"displayName","Legend");Np(oE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var P3,nM;function S0e(){if(nM)return P3;nM=1;var t=Vx();function e(){this.__data__=new t,this.size=0}return P3=e,P3}var D3,iM;function T0e(){if(iM)return D3;iM=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return D3=t,D3}var L3,aM;function A0e(){if(aM)return L3;aM=1;function t(e){return this.__data__.get(e)}return L3=t,L3}var B3,sM;function E0e(){if(sM)return B3;sM=1;function t(e){return this.__data__.has(e)}return B3=t,B3}var U3,oM;function N0e(){if(oM)return U3;oM=1;var t=Vx(),e=Z8(),r=J8(),n=200;function i(a,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([a,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(a,s),this.size=c.size,this}return U3=i,U3}var z3,lM;function eH(){if(lM)return z3;lM=1;var t=Vx(),e=S0e(),r=T0e(),n=A0e(),i=E0e(),a=N0e();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,z3=s,z3}var $3,cM;function k0e(){if(cM)return $3;cM=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return $3=e,$3}var V3,uM;function O0e(){if(uM)return V3;uM=1;function t(e){return this.__data__.has(e)}return V3=t,V3}var F3,dM;function tH(){if(dM)return F3;dM=1;var t=J8(),e=k0e(),r=O0e();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,F3=n,F3}var q3,hM;function rH(){if(hM)return q3;hM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return q3=t,q3}var H3,fM;function nH(){if(fM)return H3;fM=1;function t(e,r){return e.has(r)}return H3=t,H3}var G3,mM;function iH(){if(mM)return G3;mM=1;var t=tH(),e=rH(),r=nH(),n=1,i=2;function a(s,c,d,f,m,p){var y=d&n,b=s.length,T=c.length;if(b!=T&&!(y&&T>b))return!1;var S=p.get(s),w=p.get(c);if(S&&w)return S==c&&w==s;var k=-1,M=!0,C=d&i?new t:void 0;for(p.set(s,c),p.set(c,s);++k<b;){var B=s[k],R=c[k];if(f)var I=y?f(R,B,k,c,s,p):f(B,R,k,s,c,p);if(I!==void 0){if(I)continue;M=!1;break}if(C){if(!e(c,function(A,E){if(!r(C,E)&&(B===A||m(B,A,d,f,p)))return C.push(E)})){M=!1;break}}else if(!(B===R||m(B,R,d,f,p))){M=!1;break}}return p.delete(s),p.delete(c),M}return G3=a,G3}var K3,pM;function j0e(){if(pM)return K3;pM=1;var t=jo(),e=t.Uint8Array;return K3=e,K3}var W3,gM;function C0e(){if(gM)return W3;gM=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,a){n[++r]=[a,i]}),n}return W3=t,W3}var X3,yM;function lE(){if(yM)return X3;yM=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return X3=t,X3}var Q3,vM;function I0e(){if(vM)return Q3;vM=1;var t=Cg(),e=j0e(),r=Y8(),n=iH(),i=C0e(),a=lE(),s=1,c=2,d="[object Boolean]",f="[object Date]",m="[object Error]",p="[object Map]",y="[object Number]",b="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",k="[object ArrayBuffer]",M="[object DataView]",C=t?t.prototype:void 0,B=C?C.valueOf:void 0;function R(I,A,E,O,U,P,V){switch(E){case M:if(I.byteLength!=A.byteLength||I.byteOffset!=A.byteOffset)return!1;I=I.buffer,A=A.buffer;case k:return!(I.byteLength!=A.byteLength||!P(new e(I),new e(A)));case d:case f:case y:return r(+I,+A);case m:return I.name==A.name&&I.message==A.message;case b:case S:return I==A+"";case p:var z=i;case T:var Q=O&s;if(z||(z=a),I.size!=A.size&&!Q)return!1;var ee=V.get(I);if(ee)return ee==A;O|=c,V.set(I,A);var K=n(z(I),z(A),O,U,P,V);return V.delete(I),K;case w:if(B)return B.call(I)==B.call(A)}return!1}return Q3=R,Q3}var Y3,bM;function aH(){if(bM)return Y3;bM=1;function t(e,r){for(var n=-1,i=r.length,a=e.length;++n<i;)e[a+n]=r[n];return e}return Y3=t,Y3}var Z3,xM;function R0e(){if(xM)return Z3;xM=1;var t=aH(),e=Ea();function r(n,i,a){var s=i(n);return e(n)?s:t(s,a(n))}return Z3=r,Z3}var J3,wM;function M0e(){if(wM)return J3;wM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var c=e[n];r(c,n,e)&&(s[a++]=c)}return s}return J3=t,J3}var e6,_M;function P0e(){if(_M)return e6;_M=1;function t(){return[]}return e6=t,e6}var t6,SM;function D0e(){if(SM)return t6;SM=1;var t=M0e(),e=P0e(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(c){return n.call(s,c)}))}:e;return t6=a,t6}var r6,TM;function L0e(){if(TM)return r6;TM=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return r6=t,r6}var n6,AM;function B0e(){if(AM)return n6;AM=1;var t=Bl(),e=Ul(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return n6=n,n6}var i6,EM;function cE(){if(EM)return i6;EM=1;var t=B0e(),e=Ul(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return i6=a,i6}var Rm={exports:{}},a6,NM;function U0e(){if(NM)return a6;NM=1;function t(){return!1}return a6=t,a6}Rm.exports;var kM;function sH(){return kM||(kM=1,(function(t,e){var r=jo(),n=U0e(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||n;t.exports=f})(Rm,Rm.exports)),Rm.exports}var s6,OM;function uE(){if(OM)return s6;OM=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return s6=r,s6}var o6,jM;function dE(){if(jM)return o6;jM=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return o6=e,o6}var l6,CM;function z0e(){if(CM)return l6;CM=1;var t=Bl(),e=dE(),r=Ul(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",m="[object Number]",p="[object Object]",y="[object RegExp]",b="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",k="[object DataView]",M="[object Float32Array]",C="[object Float64Array]",B="[object Int8Array]",R="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",U="[object Uint32Array]",P={};P[M]=P[C]=P[B]=P[R]=P[I]=P[A]=P[E]=P[O]=P[U]=!0,P[n]=P[i]=P[w]=P[a]=P[k]=P[s]=P[c]=P[d]=P[f]=P[m]=P[p]=P[y]=P[b]=P[T]=P[S]=!1;function V(z){return r(z)&&e(z.length)&&!!P[t(z)]}return l6=V,l6}var c6,IM;function oH(){if(IM)return c6;IM=1;function t(e){return function(r){return e(r)}}return c6=t,c6}var Mm={exports:{}};Mm.exports;var RM;function $0e(){return RM||(RM=1,(function(t,e){var r=Nq(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,c=(function(){try{var d=i&&i.require&&i.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(Mm,Mm.exports)),Mm.exports}var u6,MM;function lH(){if(MM)return u6;MM=1;var t=z0e(),e=oH(),r=$0e(),n=r&&r.isTypedArray,i=n?e(n):t;return u6=i,u6}var d6,PM;function V0e(){if(PM)return d6;PM=1;var t=L0e(),e=cE(),r=Ea(),n=sH(),i=uE(),a=lH(),s=Object.prototype,c=s.hasOwnProperty;function d(f,m){var p=r(f),y=!p&&e(f),b=!p&&!y&&n(f),T=!p&&!y&&!b&&a(f),S=p||y||b||T,w=S?t(f.length,String):[],k=w.length;for(var M in f)(m||c.call(f,M))&&!(S&&(M=="length"||b&&(M=="offset"||M=="parent")||T&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||i(M,k)))&&w.push(M);return w}return d6=d,d6}var h6,DM;function F0e(){if(DM)return h6;DM=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return h6=e,h6}var f6,LM;function cH(){if(LM)return f6;LM=1;function t(e,r){return function(n){return e(r(n))}}return f6=t,f6}var m6,BM;function q0e(){if(BM)return m6;BM=1;var t=cH(),e=t(Object.keys,Object);return m6=e,m6}var p6,UM;function H0e(){if(UM)return p6;UM=1;var t=F0e(),e=q0e(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&s.push(c);return s}return p6=i,p6}var g6,zM;function Mg(){if(zM)return g6;zM=1;var t=Q8(),e=dE();function r(n){return n!=null&&e(n.length)&&!t(n)}return g6=r,g6}var y6,$M;function Qx(){if($M)return y6;$M=1;var t=V0e(),e=H0e(),r=Mg();function n(i){return r(i)?t(i):e(i)}return y6=n,y6}var v6,VM;function G0e(){if(VM)return v6;VM=1;var t=R0e(),e=D0e(),r=Qx();function n(i){return t(i,r,e)}return v6=n,v6}var b6,FM;function K0e(){if(FM)return b6;FM=1;var t=G0e(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,c,d,f,m){var p=c&e,y=t(a),b=y.length,T=t(s),S=T.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var k=y[w];if(!(p?k in s:n.call(s,k)))return!1}var M=m.get(a),C=m.get(s);if(M&&C)return M==s&&C==a;var B=!0;m.set(a,s),m.set(s,a);for(var R=p;++w<b;){k=y[w];var I=a[k],A=s[k];if(d)var E=p?d(A,I,k,s,a,m):d(I,A,k,a,s,m);if(!(E===void 0?I===A||f(I,A,c,d,m):E)){B=!1;break}R||(R=k=="constructor")}if(B&&!R){var O=a.constructor,U=s.constructor;O!=U&&"constructor"in a&&"constructor"in s&&!(typeof O=="function"&&O instanceof O&&typeof U=="function"&&U instanceof U)&&(B=!1)}return m.delete(a),m.delete(s),B}return b6=i,b6}var x6,qM;function W0e(){if(qM)return x6;qM=1;var t=z0(),e=jo(),r=t(e,"DataView");return x6=r,x6}var w6,HM;function X0e(){if(HM)return w6;HM=1;var t=z0(),e=jo(),r=t(e,"Promise");return w6=r,w6}var _6,GM;function uH(){if(GM)return _6;GM=1;var t=z0(),e=jo(),r=t(e,"Set");return _6=r,_6}var S6,KM;function Q0e(){if(KM)return S6;KM=1;var t=z0(),e=jo(),r=t(e,"WeakMap");return S6=r,S6}var T6,WM;function Y0e(){if(WM)return T6;WM=1;var t=W0e(),e=Z8(),r=X0e(),n=uH(),i=Q0e(),a=Bl(),s=kq(),c="[object Map]",d="[object Object]",f="[object Promise]",m="[object Set]",p="[object WeakMap]",y="[object DataView]",b=s(t),T=s(e),S=s(r),w=s(n),k=s(i),M=a;return(t&&M(new t(new ArrayBuffer(1)))!=y||e&&M(new e)!=c||r&&M(r.resolve())!=f||n&&M(new n)!=m||i&&M(new i)!=p)&&(M=function(C){var B=a(C),R=B==d?C.constructor:void 0,I=R?s(R):"";if(I)switch(I){case b:return y;case T:return c;case S:return f;case w:return m;case k:return p}return B}),T6=M,T6}var A6,XM;function Z0e(){if(XM)return A6;XM=1;var t=eH(),e=iH(),r=I0e(),n=K0e(),i=Y0e(),a=Ea(),s=sH(),c=lH(),d=1,f="[object Arguments]",m="[object Array]",p="[object Object]",y=Object.prototype,b=y.hasOwnProperty;function T(S,w,k,M,C,B){var R=a(S),I=a(w),A=R?m:i(S),E=I?m:i(w);A=A==f?p:A,E=E==f?p:E;var O=A==p,U=E==p,P=A==E;if(P&&s(S)){if(!s(w))return!1;R=!0,O=!1}if(P&&!O)return B||(B=new t),R||c(S)?e(S,w,k,M,C,B):r(S,w,A,k,M,C,B);if(!(k&d)){var V=O&&b.call(S,"__wrapped__"),z=U&&b.call(w,"__wrapped__");if(V||z){var Q=V?S.value():S,ee=z?w.value():w;return B||(B=new t),C(Q,ee,k,M,B)}}return P?(B||(B=new t),n(S,w,k,M,C,B)):!1}return A6=T,A6}var E6,QM;function hE(){if(QM)return E6;QM=1;var t=Z0e(),e=Ul();function r(n,i,a,s,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,a,s,r,c)}return E6=r,E6}var N6,YM;function J0e(){if(YM)return N6;YM=1;var t=eH(),e=hE(),r=1,n=2;function i(a,s,c,d){var f=c.length,m=f,p=!d;if(a==null)return!m;for(a=Object(a);f--;){var y=c[f];if(p&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++f<m;){y=c[f];var b=y[0],T=a[b],S=y[1];if(p&&y[2]){if(T===void 0&&!(b in a))return!1}else{var w=new t;if(d)var k=d(T,S,b,a,s,w);if(!(k===void 0?e(S,T,r|n,d,w):k))return!1}}return!0}return N6=i,N6}var k6,ZM;function dH(){if(ZM)return k6;ZM=1;var t=lu();function e(r){return r===r&&!t(r)}return k6=e,k6}var O6,JM;function ede(){if(JM)return O6;JM=1;var t=dH(),e=Qx();function r(n){for(var i=e(n),a=i.length;a--;){var s=i[a],c=n[s];i[a]=[s,c,t(c)]}return i}return O6=r,O6}var j6,eP;function hH(){if(eP)return j6;eP=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return j6=t,j6}var C6,tP;function tde(){if(tP)return C6;tP=1;var t=J0e(),e=ede(),r=hH();function n(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return C6=n,C6}var I6,rP;function rde(){if(rP)return I6;rP=1;function t(e,r){return e!=null&&r in Object(e)}return I6=t,I6}var R6,nP;function nde(){if(nP)return R6;nP=1;var t=Cq(),e=cE(),r=Ea(),n=uE(),i=dE(),a=qx();function s(c,d,f){d=t(d,c);for(var m=-1,p=d.length,y=!1;++m<p;){var b=a(d[m]);if(!(y=c!=null&&f(c,b)))break;c=c[b]}return y||++m!=p?y:(p=c==null?0:c.length,!!p&&i(p)&&n(b,p)&&(r(c)||e(c)))}return R6=s,R6}var M6,iP;function ide(){if(iP)return M6;iP=1;var t=rde(),e=nde();function r(n,i){return n!=null&&e(n,i,t)}return M6=r,M6}var P6,aP;function ade(){if(aP)return P6;aP=1;var t=hE(),e=Iq(),r=ide(),n=X8(),i=dH(),a=hH(),s=qx(),c=1,d=2;function f(m,p){return n(m)&&i(p)?a(s(m),p):function(y){var b=e(y,m);return b===void 0&&b===p?r(y,m):t(p,b,c|d)}}return P6=f,P6}var D6,sP;function sf(){if(sP)return D6;sP=1;function t(e){return e}return D6=t,D6}var L6,oP;function sde(){if(oP)return L6;oP=1;function t(e){return function(r){return r==null?void 0:r[e]}}return L6=t,L6}var B6,lP;function ode(){if(lP)return B6;lP=1;var t=tE();function e(r){return function(n){return t(n,r)}}return B6=e,B6}var U6,cP;function lde(){if(cP)return U6;cP=1;var t=sde(),e=ode(),r=X8(),n=qx();function i(a){return r(a)?t(n(a)):e(a)}return U6=i,U6}var z6,uP;function Co(){if(uP)return z6;uP=1;var t=tde(),e=ade(),r=sf(),n=Ea(),i=lde();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):i(s)}return z6=a,z6}var $6,dP;function fH(){if(dP)return $6;dP=1;function t(e,r,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(e[s],s,e))return s;return-1}return $6=t,$6}var V6,hP;function cde(){if(hP)return V6;hP=1;function t(e){return e!==e}return V6=t,V6}var F6,fP;function ude(){if(fP)return F6;fP=1;function t(e,r,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return F6=t,F6}var q6,mP;function dde(){if(mP)return q6;mP=1;var t=fH(),e=cde(),r=ude();function n(i,a,s){return a===a?r(i,a,s):t(i,e,s)}return q6=n,q6}var H6,pP;function hde(){if(pP)return H6;pP=1;var t=dde();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return H6=e,H6}var G6,gP;function fde(){if(gP)return G6;gP=1;function t(e,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(r,e[i]))return!0;return!1}return G6=t,G6}var K6,yP;function mde(){if(yP)return K6;yP=1;function t(){}return K6=t,K6}var W6,vP;function pde(){if(vP)return W6;vP=1;var t=uH(),e=mde(),r=lE(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return W6=i,W6}var X6,bP;function gde(){if(bP)return X6;bP=1;var t=tH(),e=hde(),r=fde(),n=nH(),i=pde(),a=lE(),s=200;function c(d,f,m){var p=-1,y=e,b=d.length,T=!0,S=[],w=S;if(m)T=!1,y=r;else if(b>=s){var k=f?null:i(d);if(k)return a(k);T=!1,y=n,w=new t}else w=f?[]:S;e:for(;++p<b;){var M=d[p],C=f?f(M):M;if(M=m||M!==0?M:0,T&&C===C){for(var B=w.length;B--;)if(w[B]===C)continue e;f&&w.push(C),S.push(M)}else y(w,C,m)||(w!==S&&w.push(C),S.push(M))}return S}return X6=c,X6}var Q6,xP;function yde(){if(xP)return Q6;xP=1;var t=Co(),e=gde();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return Q6=r,Q6}var vde=yde();const wP=vr(vde);function mH(t,e,r){return e===!0?wP(t,r):Ct(e)?wP(t,e):t}function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}var bde=["ref"];function _P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(r),!0).forEach(function(n){Yx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gH(n.key),n)}}function wde(t,e,r){return e&&SP(t.prototype,e),r&&SP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _de(t,e,r){return e=nb(e),Sde(t,pH()?Reflect.construct(e,r||[],nb(t).constructor):e.apply(t,r))}function Sde(t,e){if(e&&(Sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tde(t)}function Tde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pH=function(){return!!t})()}function nb(t){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nb(t)}function Ade(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FT(t,e)}function FT(t,e){return FT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},FT(t,e)}function Yx(t,e,r){return e=gH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gH(t){var e=Ede(t,"string");return Sh(e)=="symbol"?e:e+""}function Ede(t,e){if(Sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Nde(t,e){if(t==null)return{};var r=kde(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kde(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ode(t){return t.value}function jde(t,e){if(ne.isValidElement(t))return ne.cloneElement(t,e);if(typeof t=="function")return ne.createElement(t,e);e.ref;var r=Nde(e,bde);return ne.createElement(oE,r)}var TP=1,th=(function(t){function e(){var r;xde(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=_de(this,e,[].concat(i)),Yx(r,"lastBoundingBox",{width:-1,height:-1}),r}return Ade(e,t),wde(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>TP||Math.abs(i.height-this.lastBoundingBox.height)>TP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?tl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,d=i.margin,f=i.chartWidth,m=i.chartHeight,p,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var b=this.getBBoxSnapshot();p={left:((f||0)-b.width)/2}}else p=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((m||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return tl(tl({},p),y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,c=i.height,d=i.wrapperStyle,f=i.payloadUniqBy,m=i.payload,p=tl(tl({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ne.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(b){n.wrapperNode=b}},jde(a,tl(tl({},this.props),{},{payload:mH(m,f,Ode)})))}}],[{key:"getWithHeight",value:function(n,i){var a=tl(tl({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&et(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])})(F.PureComponent);Yx(th,"displayName","Legend");Yx(th,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Y6,AP;function Cde(){if(AP)return Y6;AP=1;var t=Cg(),e=cE(),r=Ea(),n=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(n&&a&&a[n])}return Y6=i,Y6}var Z6,EP;function yH(){if(EP)return Z6;EP=1;var t=aH(),e=Cde();function r(n,i,a,s,c){var d=-1,f=n.length;for(a||(a=e),c||(c=[]);++d<f;){var m=n[d];i>0&&a(m)?i>1?r(m,i-1,a,s,c):t(c,m):s||(c[c.length]=m)}return c}return Z6=r,Z6}var J6,NP;function Ide(){if(NP)return J6;NP=1;function t(e){return function(r,n,i){for(var a=-1,s=Object(r),c=i(r),d=c.length;d--;){var f=c[e?d:++a];if(n(s[f],f,s)===!1)break}return r}}return J6=t,J6}var e_,kP;function Rde(){if(kP)return e_;kP=1;var t=Ide(),e=t();return e_=e,e_}var t_,OP;function vH(){if(OP)return t_;OP=1;var t=Rde(),e=Qx();function r(n,i){return n&&t(n,i,e)}return t_=r,t_}var r_,jP;function Mde(){if(jP)return r_;jP=1;var t=Mg();function e(r,n){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var s=i.length,c=n?s:-1,d=Object(i);(n?c--:++c<s)&&a(d[c],c,d)!==!1;);return i}}return r_=e,r_}var n_,CP;function fE(){if(CP)return n_;CP=1;var t=vH(),e=Mde(),r=e(t);return n_=r,n_}var i_,IP;function bH(){if(IP)return i_;IP=1;var t=fE(),e=Mg();function r(n,i){var a=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,f){s[++a]=i(c,d,f)}),s}return i_=r,i_}var a_,RP;function Pde(){if(RP)return a_;RP=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return a_=t,a_}var s_,MP;function Dde(){if(MP)return s_;MP=1;var t=nf();function e(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,c=t(r),d=n!==void 0,f=n===null,m=n===n,p=t(n);if(!f&&!p&&!c&&r>n||c&&d&&m&&!f&&!p||a&&d&&m||!i&&m||!s)return 1;if(!a&&!c&&!p&&r<n||p&&i&&s&&!a&&!c||f&&i&&s||!d&&s||!m)return-1}return 0}return s_=e,s_}var o_,PP;function Lde(){if(PP)return o_;PP=1;var t=Dde();function e(r,n,i){for(var a=-1,s=r.criteria,c=n.criteria,d=s.length,f=i.length;++a<d;){var m=t(s[a],c[a]);if(m){if(a>=f)return m;var p=i[a];return m*(p=="desc"?-1:1)}}return r.index-n.index}return o_=e,o_}var l_,DP;function Bde(){if(DP)return l_;DP=1;var t=eE(),e=tE(),r=Co(),n=bH(),i=Pde(),a=oH(),s=Lde(),c=sf(),d=Ea();function f(m,p,y){p.length?p=t(p,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):p=[c];var b=-1;p=t(p,a(r));var T=n(m,function(S,w,k){var M=t(p,function(C){return C(S)});return{criteria:M,index:++b,value:S}});return i(T,function(S,w){return s(S,w,y)})}return l_=f,l_}var c_,LP;function Ude(){if(LP)return c_;LP=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return c_=t,c_}var u_,BP;function zde(){if(BP)return u_;BP=1;var t=Ude(),e=Math.max;function r(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,c=-1,d=e(s.length-i,0),f=Array(d);++c<d;)f[c]=s[i+c];c=-1;for(var m=Array(i+1);++c<i;)m[c]=s[c];return m[i]=a(f),t(n,this,m)}}return u_=r,u_}var d_,UP;function $de(){if(UP)return d_;UP=1;function t(e){return function(){return e}}return d_=t,d_}var h_,zP;function xH(){if(zP)return h_;zP=1;var t=z0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return h_=e,h_}var f_,$P;function Vde(){if($P)return f_;$P=1;var t=$de(),e=xH(),r=sf(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return f_=n,f_}var m_,VP;function Fde(){if(VP)return m_;VP=1;var t=800,e=16,r=Date.now;function n(i){var a=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return m_=n,m_}var p_,FP;function qde(){if(FP)return p_;FP=1;var t=Vde(),e=Fde(),r=e(t);return p_=r,p_}var g_,qP;function Hde(){if(qP)return g_;qP=1;var t=sf(),e=zde(),r=qde();function n(i,a){return r(e(i,a,t),i+"")}return g_=n,g_}var y_,HP;function Zx(){if(HP)return y_;HP=1;var t=Y8(),e=Mg(),r=uE(),n=lu();function i(a,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],a):!1}return y_=i,y_}var v_,GP;function Gde(){if(GP)return v_;GP=1;var t=yH(),e=Bde(),r=Hde(),n=Zx(),i=r(function(a,s){if(a==null)return[];var c=s.length;return c>1&&n(a,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return v_=i,v_}var Kde=Gde();const mE=vr(Kde);function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qT.apply(this,arguments)}function Wde(t,e){return Zde(t)||Yde(t,e)||Qde(t,e)||Xde()}function Xde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qde(t,e){if(t){if(typeof t=="string")return KP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KP(t,e)}}function KP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yde(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Zde(t){if(Array.isArray(t))return t}function WP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function b_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(r),!0).forEach(function(n){Jde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jde(t,e,r){return e=ehe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ehe(t){var e=the(t,"string");return kp(e)=="symbol"?e:e+""}function the(t,e){if(kp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rhe(t){return Array.isArray(t)&&ti(t[0])&&ti(t[1])?t.join(" ~ "):t}var nhe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,f=d===void 0?{}:d,m=e.payload,p=e.formatter,y=e.itemSorter,b=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,k=e.accessibilityLayer,M=k===void 0?!1:k,C=function(){if(m&&m.length){var V={padding:0,margin:0},z=(y?mE(m,y):m).map(function(Q,ee){if(Q.type==="none")return null;var K=b_({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},c),Z=Q.formatter||p||rhe,Y=Q.value,pe=Q.name,ae=Y,X=pe;if(Z&&ae!=null&&X!=null){var J=Z(Y,pe,Q,ee,m);if(Array.isArray(J)){var le=Wde(J,2);ae=le[0],X=le[1]}else ae=J}return ne.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ee),style:K},ti(X)?ne.createElement("span",{className:"recharts-tooltip-item-name"},X):null,ti(X)?ne.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ne.createElement("span",{className:"recharts-tooltip-item-value"},ae),ne.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return ne.createElement("ul",{className:"recharts-tooltip-item-list",style:V},z)}return null},B=b_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=b_({margin:0},f),I=!Dt(S),A=I?S:"",E=zt("recharts-default-tooltip",b),O=zt("recharts-tooltip-label",T);I&&w&&m!==void 0&&m!==null&&(A=w(S,m));var U=M?{role:"status","aria-live":"assertive"}:{};return ne.createElement("div",qT({className:E,style:B},U),ne.createElement("p",{className:O,style:R},ne.isValidElement(A)?A:"".concat(A)),C())};function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function Py(t,e,r){return e=ihe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ihe(t){var e=ahe(t,"string");return Op(e)=="symbol"?e:e+""}function ahe(t,e){if(Op(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pm="recharts-tooltip-wrapper",she={visibility:"hidden"};function ohe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return zt(pm,Py(Py(Py(Py({},"".concat(pm,"-right"),et(r)&&e&&et(e.x)&&r>=e.x),"".concat(pm,"-left"),et(r)&&e&&et(e.x)&&r<e.x),"".concat(pm,"-bottom"),et(n)&&e&&et(e.y)&&n>=e.y),"".concat(pm,"-top"),et(n)&&e&&et(e.y)&&n<e.y))}function XP(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,f=t.viewBoxDimension;if(a&&et(a[n]))return a[n];var m=r[n]-c-i,p=r[n]+i;if(e[n])return s[n]?m:p;if(s[n]){var y=m,b=d[n];return y<b?Math.max(p,d[n]):Math.max(m,d[n])}var T=p+c,S=d[n]+f;return T>S?Math.max(m,d[n]):Math.max(p,d[n])}function lhe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function che(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,f,m,p;return s.height>0&&s.width>0&&r?(m=XP({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),p=XP({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),f=lhe({translateX:m,translateY:p,useTranslate3d:c})):f=she,{cssProperties:f,cssClasses:ohe({translateX:m,translateY:p,coordinate:r})}}function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function QP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function YP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(r),!0).forEach(function(n){GT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_H(n.key),n)}}function hhe(t,e,r){return e&&dhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fhe(t,e,r){return e=ib(e),mhe(t,wH()?Reflect.construct(e,r||[],ib(t).constructor):e.apply(t,r))}function mhe(t,e){if(e&&(Th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return phe(t)}function phe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wH=function(){return!!t})()}function ib(t){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ib(t)}function ghe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HT(t,e)}function HT(t,e){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HT(t,e)}function GT(t,e,r){return e=_H(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _H(t){var e=yhe(t,"string");return Th(e)=="symbol"?e:e+""}function yhe(t,e){if(Th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZP=1,vhe=(function(t){function e(){var r;uhe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=fhe(this,e,[].concat(i)),GT(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),GT(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,f,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(f=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&f!==void 0?f:0}})}}),r}return ghe(e,t),hhe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>ZP||Math.abs(n.height-this.state.lastBoundingBox.height)>ZP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.children,m=i.coordinate,p=i.hasPayload,y=i.isAnimationActive,b=i.offset,T=i.position,S=i.reverseDirection,w=i.useTranslate3d,k=i.viewBox,M=i.wrapperStyle,C=che({allowEscapeViewBox:s,coordinate:m,offsetTopLeft:b,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:k}),B=C.cssClasses,R=C.cssProperties,I=YP(YP({transition:y&&a?"transform ".concat(c,"ms ").concat(d):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&p?"visible":"hidden",position:"absolute",top:0,left:0},M);return ne.createElement("div",{tabIndex:-1,className:B,style:I,ref:function(E){n.wrapperNode=E}},f)}}])})(F.PureComponent),bhe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},$0={isSsr:bhe()};function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function JP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(r),!0).forEach(function(n){pE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function whe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TH(n.key),n)}}function _he(t,e,r){return e&&whe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function She(t,e,r){return e=ab(e),The(t,SH()?Reflect.construct(e,r||[],ab(t).constructor):e.apply(t,r))}function The(t,e){if(e&&(Ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ahe(t)}function Ahe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SH=function(){return!!t})()}function ab(t){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(t)}function Ehe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KT(t,e)}function KT(t,e){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KT(t,e)}function pE(t,e,r){return e=TH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TH(t){var e=Nhe(t,"string");return Ah(e)=="symbol"?e:e+""}function Nhe(t,e){if(Ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function khe(t){return t.dataKey}function Ohe(t,e){return ne.isValidElement(t)?ne.cloneElement(t,e):typeof t=="function"?ne.createElement(t,e):ne.createElement(nhe,e)}var lo=(function(t){function e(){return xhe(this,e),She(this,e,arguments)}return Ehe(e,t),_he(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.content,m=i.coordinate,p=i.filterNull,y=i.isAnimationActive,b=i.offset,T=i.payload,S=i.payloadUniqBy,w=i.position,k=i.reverseDirection,M=i.useTranslate3d,C=i.viewBox,B=i.wrapperStyle,R=T??[];p&&R.length&&(R=mH(T.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),S,khe));var I=R.length>0;return ne.createElement(vhe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:a,coordinate:m,hasPayload:I,offset:b,position:w,reverseDirection:k,useTranslate3d:M,viewBox:C,wrapperStyle:B},Ohe(f,eD(eD({},this.props),{},{payload:R})))}}])})(F.PureComponent);pE(lo,"displayName","Tooltip");pE(lo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!$0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var x_,tD;function jhe(){if(tD)return x_;tD=1;var t=jo(),e=function(){return t.Date.now()};return x_=e,x_}var w_,rD;function Che(){if(rD)return w_;rD=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return w_=e,w_}var __,nD;function Ihe(){if(nD)return __;nD=1;var t=Che(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return __=r,__}var S_,iD;function AH(){if(iD)return S_;iD=1;var t=Ihe(),e=lu(),r=nf(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=e(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=t(f);var p=a.test(f);return p||s.test(f)?c(f.slice(2),p?2:8):i.test(f)?n:+f}return S_=d,S_}var T_,aD;function Rhe(){if(aD)return T_;aD=1;var t=lu(),e=jhe(),r=AH(),n="Expected a function",i=Math.max,a=Math.min;function s(c,d,f){var m,p,y,b,T,S,w=0,k=!1,M=!1,C=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(f)&&(k=!!f.leading,M="maxWait"in f,y=M?i(r(f.maxWait)||0,d):y,C="trailing"in f?!!f.trailing:C);function B(z){var Q=m,ee=p;return m=p=void 0,w=z,b=c.apply(ee,Q),b}function R(z){return w=z,T=setTimeout(E,d),k?B(z):b}function I(z){var Q=z-S,ee=z-w,K=d-Q;return M?a(K,y-ee):K}function A(z){var Q=z-S,ee=z-w;return S===void 0||Q>=d||Q<0||M&&ee>=y}function E(){var z=e();if(A(z))return O(z);T=setTimeout(E,I(z))}function O(z){return T=void 0,C&&m?B(z):(m=p=void 0,b)}function U(){T!==void 0&&clearTimeout(T),w=0,m=S=p=T=void 0}function P(){return T===void 0?b:O(e())}function V(){var z=e(),Q=A(z);if(m=arguments,p=this,S=z,Q){if(T===void 0)return R(S);if(M)return clearTimeout(T),T=setTimeout(E,d),B(S)}return T===void 0&&(T=setTimeout(E,d)),b}return V.cancel=U,V.flush=P,V}return T_=s,T_}var A_,sD;function Mhe(){if(sD)return A_;sD=1;var t=Rhe(),e=lu(),r="Expected a function";function n(i,a,s){var c=!0,d=!0;if(typeof i!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(i,a,{leading:c,maxWait:a,trailing:d})}return A_=n,A_}var Phe=Mhe();const EH=vr(Phe);function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function oD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(r),!0).forEach(function(n){Dhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dhe(t,e,r){return e=Lhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lhe(t){var e=Bhe(t,"string");return jp(e)=="symbol"?e:e+""}function Bhe(t,e){if(jp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uhe(t,e){return Fhe(t)||Vhe(t,e)||$he(t,e)||zhe()}function zhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $he(t,e){if(t){if(typeof t=="string")return lD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lD(t,e)}}function lD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vhe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Fhe(t){if(Array.isArray(t))return t}var NH=F.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,s=a===void 0?"100%":a,c=t.height,d=c===void 0?"100%":c,f=t.minWidth,m=f===void 0?0:f,p=t.minHeight,y=t.maxHeight,b=t.children,T=t.debounce,S=T===void 0?0:T,w=t.id,k=t.className,M=t.onResize,C=t.style,B=C===void 0?{}:C,R=F.useRef(null),I=F.useRef();I.current=M,F.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var A=F.useState({containerWidth:i.width,containerHeight:i.height}),E=Uhe(A,2),O=E[0],U=E[1],P=F.useCallback(function(z,Q){U(function(ee){var K=Math.round(z),Z=Math.round(Q);return ee.containerWidth===K&&ee.containerHeight===Z?ee:{containerWidth:K,containerHeight:Z}})},[]);F.useEffect(function(){var z=function(pe){var ae,X=pe[0].contentRect,J=X.width,le=X.height;P(J,le),(ae=I.current)===null||ae===void 0||ae.call(I,J,le)};S>0&&(z=EH(z,S,{trailing:!0,leading:!1}));var Q=new ResizeObserver(z),ee=R.current.getBoundingClientRect(),K=ee.width,Z=ee.height;return P(K,Z),Q.observe(R.current),function(){Q.disconnect()}},[P,S]);var V=F.useMemo(function(){var z=O.containerWidth,Q=O.containerHeight;if(z<0||Q<0)return null;xl(r0(s)||r0(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),xl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var ee=r0(s)?z:s,K=r0(d)?Q:d;r&&r>0&&(ee?K=ee/r:K&&(ee=K*r),y&&K>y&&(K=y)),xl(ee>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ee,K,s,d,m,p,r);var Z=!Array.isArray(b)&&bl(b.type).endsWith("Chart");return ne.Children.map(b,function(Y){return ne.isValidElement(Y)?F.cloneElement(Y,Dy({width:ee,height:K},Z?{style:Dy({height:"100%",width:"100%",maxHeight:K,maxWidth:ee},Y.props.style)}:{})):Y})},[r,b,d,y,p,m,O,s]);return ne.createElement("div",{id:w?"".concat(w):void 0,className:zt("recharts-responsive-container",k),style:Dy(Dy({},B),{},{width:s,height:d,minWidth:m,minHeight:p,maxHeight:y}),ref:R},V)}),gE=function(e){return null};gE.displayName="Cell";function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function cD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(r),!0).forEach(function(n){qhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qhe(t,e,r){return e=Hhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hhe(t){var e=Ghe(t,"string");return Cp(e)=="symbol"?e:e+""}function Ghe(t,e){if(Cp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rd={widthCache:{},cacheCount:0},Khe=2e3,Whe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uD="recharts_measurement_span";function Xhe(t){var e=WT({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Km=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||$0.isSsr)return{width:0,height:0};var n=Xhe(r),i=JSON.stringify({text:e,copyStyle:n});if(Rd.widthCache[i])return Rd.widthCache[i];try{var a=document.getElementById(uD);a||(a=document.createElement("span"),a.setAttribute("id",uD),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=WT(WT({},Whe),n);Object.assign(a.style,s),a.textContent="".concat(e);var c=a.getBoundingClientRect(),d={width:c.width,height:c.height};return Rd.widthCache[i]=d,++Rd.cacheCount>Khe&&(Rd.cacheCount=0,Rd.widthCache={}),d}catch{return{width:0,height:0}}},Qhe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function sb(t,e){return efe(t)||Jhe(t,e)||Zhe(t,e)||Yhe()}function Yhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zhe(t,e){if(t){if(typeof t=="string")return dD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dD(t,e)}}function dD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jhe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function efe(t){if(Array.isArray(t))return t}function tfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nfe(n.key),n)}}function rfe(t,e,r){return e&&hD(t.prototype,e),r&&hD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nfe(t){var e=ife(t,"string");return Ip(e)=="symbol"?e:e+""}function ife(t,e){if(Ip(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,afe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ofe=Object.keys(kH),Fd="NaN";function lfe(t,e){return t*kH[e]}var Ly=(function(){function t(e,r){tfe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!afe.test(r)&&(this.num=NaN,this.unit=""),ofe.includes(r)&&(this.num=lfe(e,r),this.unit="px")}return rfe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=sfe.exec(r))!==null&&n!==void 0?n:[],a=sb(i,3),s=a[1],c=a[2];return new t(parseFloat(s),c??"")}}])})();function OH(t){if(t.includes(Fd))return Fd;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=fD.exec(e))!==null&&r!==void 0?r:[],i=sb(n,4),a=i[1],s=i[2],c=i[3],d=Ly.parse(a??""),f=Ly.parse(c??""),m=s==="*"?d.multiply(f):d.divide(f);if(m.isNaN())return Fd;e=e.replace(fD,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=mD.exec(e))!==null&&p!==void 0?p:[],b=sb(y,4),T=b[1],S=b[2],w=b[3],k=Ly.parse(T??""),M=Ly.parse(w??""),C=S==="+"?k.add(M):k.subtract(M);if(C.isNaN())return Fd;e=e.replace(mD,C.toString())}return e}var pD=/\(([^()]*)\)/;function cfe(t){for(var e=t;e.includes("(");){var r=pD.exec(e),n=sb(r,2),i=n[1];e=e.replace(pD,OH(i))}return e}function ufe(t){var e=t.replace(/\s+/g,"");return e=cfe(e),e=OH(e),e}function dfe(t){try{return ufe(t)}catch{return Fd}}function E_(t){var e=dfe(t.slice(5,-1));return e===Fd?"":e}var hfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ffe=["dx","dy","angle","className","breakAll"];function XT(){return XT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XT.apply(this,arguments)}function gD(t,e){if(t==null)return{};var r=mfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yD(t,e){return vfe(t)||yfe(t,e)||gfe(t,e)||pfe()}function pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(t,e){if(t){if(typeof t=="string")return vD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vD(t,e)}}function vD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function vfe(t){if(Array.isArray(t))return t}var jH=/[ \f\n\r\t\v\u2028\u2029]+/,CH=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];Dt(r)||(n?a=r.toString().split(""):a=r.toString().split(jH));var s=a.map(function(d){return{word:d,width:Km(d,i).width}}),c=n?0:Km("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},bfe=function(e,r,n,i,a){var s=e.maxLines,c=e.children,d=e.style,f=e.breakAll,m=et(s),p=c,y=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ee.reduce(function(K,Z){var Y=Z.word,pe=Z.width,ae=K[K.length-1];if(ae&&(i==null||a||ae.width+pe+n<Number(i)))ae.words.push(Y),ae.width+=pe+n;else{var X={words:[Y],width:pe};K.push(X)}return K},[])},b=y(r),T=function(ee){return ee.reduce(function(K,Z){return K.width>Z.width?K:Z})};if(!m)return b;for(var S="",w=function(ee){var K=p.slice(0,ee),Z=CH({breakAll:f,style:d,children:K+S}).wordsWithComputedWidth,Y=y(Z),pe=Y.length>s||T(Y).width>Number(i);return[pe,Y]},k=0,M=p.length-1,C=0,B;k<=M&&C<=p.length-1;){var R=Math.floor((k+M)/2),I=R-1,A=w(I),E=yD(A,2),O=E[0],U=E[1],P=w(R),V=yD(P,1),z=V[0];if(!O&&!z&&(k=R+1),O&&z&&(M=R-1),!O&&z){B=U;break}C++}return B||b},bD=function(e){var r=Dt(e)?[]:e.toString().split(jH);return[{words:r}]},xfe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!$0.isSsr){var d,f,m=CH({breakAll:s,children:i,style:a});if(m){var p=m.wordsWithComputedWidth,y=m.spaceWidth;d=p,f=y}else return bD(i);return bfe({breakAll:s,children:i,maxLines:c,style:a},d,f,r,n)}return bD(i)},xD="#808080",Eh=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,f=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,y=e.textAnchor,b=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,k=w===void 0?xD:w,M=gD(e,hfe),C=F.useMemo(function(){return xfe({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:p,style:M.style,width:M.width})},[M.breakAll,M.children,M.maxLines,p,M.style,M.width]),B=M.dx,R=M.dy,I=M.angle,A=M.className,E=M.breakAll,O=gD(M,ffe);if(!ti(n)||!ti(a))return null;var U=n+(et(B)?B:0),P=a+(et(R)?R:0),V;switch(S){case"start":V=E_("calc(".concat(f,")"));break;case"middle":V=E_("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(f," / 2))"));break;default:V=E_("calc(".concat(C.length-1," * -").concat(c,")"));break}var z=[];if(p){var Q=C[0].width,ee=M.width;z.push("scale(".concat((et(ee)?ee/Q:1)/Q,")"))}return I&&z.push("rotate(".concat(I,", ").concat(U,", ").concat(P,")")),z.length&&(O.transform=z.join(" ")),ne.createElement("text",XT({},xt(O,!0),{x:U,y:P,className:zt("recharts-text",A),textAnchor:b,fill:k.includes("url")?xD:k}),C.map(function(K,Z){var Y=K.words.join(E?"":" ");return ne.createElement("tspan",{x:U,dy:Z===0?V:c,key:"".concat(Y,"-").concat(Z)},Y)}))};function Gc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wfe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yE(t){let e,r,n;t.length!==2?(e=Gc,r=(c,d)=>Gc(t(c),d),n=(c,d)=>t(c)-d):(e=t===Gc||t===wfe?t:_fe,r=t,n=t);function i(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<0?f=p+1:m=p}while(f<m)}return f}function a(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<=0?f=p+1:m=p}while(f<m)}return f}function s(c,d,f=0,m=c.length){const p=i(c,d,f,m-1);return p>f&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:i,center:s,right:a}}function _fe(){return 0}function IH(t){return t===null?NaN:+t}function*Sfe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Tfe=yE(Gc),Pg=Tfe.right;yE(IH).center;class wD extends Map{constructor(e,r=Nfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(_D(this,e))}has(e){return super.has(_D(this,e))}set(e,r){return super.set(Afe(this,e),r)}delete(e){return super.delete(Efe(this,e))}}function _D({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Afe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Efe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Nfe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kfe(t=Gc){if(t===Gc)return RH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function RH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ofe=Math.sqrt(50),jfe=Math.sqrt(10),Cfe=Math.sqrt(2);function ob(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Ofe?10:a>=jfe?5:a>=Cfe?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/s,c=Math.round(t*f),d=Math.round(e*f),c/f<t&&++c,d/f>e&&--d,f=-f):(f=Math.pow(10,i)*s,c=Math.round(t/f),d=Math.round(e/f),c*f<t&&++c,d*f>e&&--d),d<c&&.5<=r&&r<2?ob(t,e,r*2):[c,d,f]}function QT(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?ob(e,t,r):ob(t,e,r);if(!(a>=i))return[];const c=a-i+1,d=new Array(c);if(n)if(s<0)for(let f=0;f<c;++f)d[f]=(a-f)/-s;else for(let f=0;f<c;++f)d[f]=(a-f)*s;else if(s<0)for(let f=0;f<c;++f)d[f]=(i+f)/-s;else for(let f=0;f<c;++f)d[f]=(i+f)*s;return d}function YT(t,e,r){return e=+e,t=+t,r=+r,ob(t,e,r)[2]}function ZT(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?YT(e,t,r):YT(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function SD(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function TD(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function MH(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?RH:kfe(i);n>r;){if(n-r>600){const d=n-r+1,f=e-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(d-p)/d)*(f-d/2<0?-1:1),b=Math.max(r,Math.floor(e-f*p/d+y)),T=Math.min(n,Math.floor(e+(d-f)*p/d+y));MH(t,e,b,T,i)}const a=t[e];let s=r,c=n;for(gm(t,r,e),i(t[n],a)>0&&gm(t,r,n);s<c;){for(gm(t,s,c),++s,--c;i(t[s],a)<0;)++s;for(;i(t[c],a)>0;)--c}i(t[r],a)===0?gm(t,r,c):(++c,gm(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function gm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Ife(t,e,r){if(t=Float64Array.from(Sfe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return TD(t);if(e>=1)return SD(t);var n,i=(n-1)*e,a=Math.floor(i),s=SD(MH(t,a).subarray(0,a+1)),c=TD(t.subarray(a+1));return s+(c-s)*(i-a)}}function Rfe(t,e,r=IH){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),c=+r(t[a+1],a+1,t);return s+(c-s)*(i-a)}}function Mfe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Ss(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function zl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const JT=Symbol("implicit");function vE(){var t=new wD,e=[],r=[],n=JT;function i(a){let s=t.get(a);if(s===void 0){if(n!==JT)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new wD;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vE(e,r).unknown(n)},Ss.apply(i,arguments),i}function Rp(){var t=vE().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,c=!1,d=0,f=0,m=.5;delete t.unknown;function p(){var y=e().length,b=i<n,T=b?i:n,S=b?n:i;a=(S-T)/Math.max(1,y-d+f*2),c&&(a=Math.floor(a)),T+=(S-T-a*(y-d))*m,s=a*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=Mfe(y).map(function(k){return T+a*k});return r(b?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([n,i]=y,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(y){return[n,i]=y,n=+n,i=+i,c=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,f=+y),p()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},t.paddingOuter=function(y){return arguments.length?(f=+y,p()):f},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return Rp(e(),[n,i]).round(c).paddingInner(d).paddingOuter(f).align(m)},Ss.apply(p(),arguments)}function PH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return PH(e())},t}function Wm(){return PH(Rp.apply(null,arguments).paddingInner(1))}function bE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function DH(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Dg(){}var Mp=.7,lb=1/Mp,rh="\\s*([+-]?\\d+)\\s*",Pp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pfe=/^#([0-9a-f]{3,8})$/,Dfe=new RegExp(`^rgb\\(${rh},${rh},${rh}\\)$`),Lfe=new RegExp(`^rgb\\(${vo},${vo},${vo}\\)$`),Bfe=new RegExp(`^rgba\\(${rh},${rh},${rh},${Pp}\\)$`),Ufe=new RegExp(`^rgba\\(${vo},${vo},${vo},${Pp}\\)$`),zfe=new RegExp(`^hsl\\(${Pp},${vo},${vo}\\)$`),$fe=new RegExp(`^hsla\\(${Pp},${vo},${vo},${Pp}\\)$`),AD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bE(Dg,Dp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ED,formatHex:ED,formatHex8:Vfe,formatHsl:Ffe,formatRgb:ND,toString:ND});function ED(){return this.rgb().formatHex()}function Vfe(){return this.rgb().formatHex8()}function Ffe(){return LH(this).formatHsl()}function ND(){return this.rgb().formatRgb()}function Dp(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Pfe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?kD(e):r===3?new Sa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?By(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?By(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Dfe.exec(t))?new Sa(e[1],e[2],e[3],1):(e=Lfe.exec(t))?new Sa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Bfe.exec(t))?By(e[1],e[2],e[3],e[4]):(e=Ufe.exec(t))?By(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zfe.exec(t))?CD(e[1],e[2]/100,e[3]/100,1):(e=$fe.exec(t))?CD(e[1],e[2]/100,e[3]/100,e[4]):AD.hasOwnProperty(t)?kD(AD[t]):t==="transparent"?new Sa(NaN,NaN,NaN,0):null}function kD(t){return new Sa(t>>16&255,t>>8&255,t&255,1)}function By(t,e,r,n){return n<=0&&(t=e=r=NaN),new Sa(t,e,r,n)}function qfe(t){return t instanceof Dg||(t=Dp(t)),t?(t=t.rgb(),new Sa(t.r,t.g,t.b,t.opacity)):new Sa}function eA(t,e,r,n){return arguments.length===1?qfe(t):new Sa(t,e,r,n??1)}function Sa(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}bE(Sa,eA,DH(Dg,{brighter(t){return t=t==null?lb:Math.pow(lb,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mp:Math.pow(Mp,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Sa(f0(this.r),f0(this.g),f0(this.b),cb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:OD,formatHex:OD,formatHex8:Hfe,formatRgb:jD,toString:jD}));function OD(){return`#${n0(this.r)}${n0(this.g)}${n0(this.b)}`}function Hfe(){return`#${n0(this.r)}${n0(this.g)}${n0(this.b)}${n0((isNaN(this.opacity)?1:this.opacity)*255)}`}function jD(){const t=cb(this.opacity);return`${t===1?"rgb(":"rgba("}${f0(this.r)}, ${f0(this.g)}, ${f0(this.b)}${t===1?")":`, ${t})`}`}function cb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function f0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function n0(t){return t=f0(t),(t<16?"0":"")+t.toString(16)}function CD(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Bs(t,e,r,n)}function LH(t){if(t instanceof Bs)return new Bs(t.h,t.s,t.l,t.opacity);if(t instanceof Dg||(t=Dp(t)),!t)return new Bs;if(t instanceof Bs)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,c=a-i,d=(a+i)/2;return c?(e===a?s=(r-n)/c+(r<n)*6:r===a?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?a+i:2-a-i,s*=60):c=d>0&&d<1?0:s,new Bs(s,c,d,t.opacity)}function Gfe(t,e,r,n){return arguments.length===1?LH(t):new Bs(t,e,r,n??1)}function Bs(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}bE(Bs,Gfe,DH(Dg,{brighter(t){return t=t==null?lb:Math.pow(lb,t),new Bs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mp:Math.pow(Mp,t),new Bs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Sa(N_(t>=240?t-240:t+120,i,n),N_(t,i,n),N_(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Bs(ID(this.h),Uy(this.s),Uy(this.l),cb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cb(this.opacity);return`${t===1?"hsl(":"hsla("}${ID(this.h)}, ${Uy(this.s)*100}%, ${Uy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ID(t){return t=(t||0)%360,t<0?t+360:t}function Uy(t){return Math.max(0,Math.min(1,t||0))}function N_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const xE=t=>()=>t;function Kfe(t,e){return function(r){return t+r*e}}function Wfe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Xfe(t){return(t=+t)==1?BH:function(e,r){return r-e?Wfe(e,r,t):xE(isNaN(e)?r:e)}}function BH(t,e){var r=e-t;return r?Kfe(t,r):xE(isNaN(t)?e:t)}const RD=(function t(e){var r=Xfe(e);function n(i,a){var s=r((i=eA(i)).r,(a=eA(a)).r),c=r(i.g,a.g),d=r(i.b,a.b),f=BH(i.opacity,a.opacity);return function(m){return i.r=s(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return n.gamma=t,n})(1);function Qfe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Yfe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Zfe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=of(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(c){for(s=0;s<n;++s)a[s]=i[s](c);return a}}function Jfe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function ub(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function eme(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=of(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var tA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k_=new RegExp(tA.source,"g");function tme(t){return function(){return t}}function rme(t){return function(e){return t(e)+""}}function nme(t,e){var r=tA.lastIndex=k_.lastIndex=0,n,i,a,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=tA.exec(t))&&(i=k_.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(n=n[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,d.push({i:s,x:ub(n,i)})),r=k_.lastIndex;return r<e.length&&(a=e.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?d[0]?rme(d[0].x):tme(e):(e=d.length,function(f){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(f);return c.join("")})}function of(t,e){var r=typeof e,n;return e==null||r==="boolean"?xE(e):(r==="number"?ub:r==="string"?(n=Dp(e))?(e=n,RD):nme:e instanceof Dp?RD:e instanceof Date?Jfe:Yfe(e)?Qfe:Array.isArray(e)?Zfe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eme:ub)(t,e)}function wE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function ime(t,e){e===void 0&&(e=t,t=of);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[c](s-c)}}function ame(t){return function(){return t}}function db(t){return+t}var MD=[0,1];function ra(t){return t}function rA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ame(isNaN(e)?NaN:.5)}function sme(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ome(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=rA(i,n),a=r(s,a)):(n=rA(n,i),a=r(a,s)),function(c){return a(n(c))}}function lme(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=rA(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(c){var d=Pg(t,c,1,n)-1;return a[d](i[d](c))}}function Lg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Jx(){var t=MD,e=MD,r=of,n,i,a,s=ra,c,d,f;function m(){var y=Math.min(t.length,e.length);return s!==ra&&(s=sme(t[0],t[y-1])),c=y>2?lme:ome,d=f=null,p}function p(y){return y==null||isNaN(y=+y)?a:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return p.invert=function(y){return s(i((f||(f=c(e,t.map(n),ub)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,db),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),r=wE,m()},p.clamp=function(y){return arguments.length?(s=y?!0:ra,m()):s!==ra},p.interpolate=function(y){return arguments.length?(r=y,m()):r},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,b){return n=y,i=b,m()}}function _E(){return Jx()(ra,ra)}function cme(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function hb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Nh(t){return t=hb(Math.abs(t)),t?t[1]:NaN}function ume(t,e){return function(r,n){for(var i=r.length,a=[],s=0,c=t[0],d=0;i>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),a.push(r.substring(i-=c,i+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return a.reverse().join(e)}}function dme(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var hme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lp(t){if(!(e=hme.exec(t)))throw new Error("invalid format: "+t);var e;return new SE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Lp.prototype=SE.prototype;function SE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}SE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fme(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var fb;function mme(t,e){var r=hb(t,e);if(!r)return fb=void 0,t.toPrecision(e);var n=r[0],i=r[1],a=i-(fb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+hb(t,Math.max(0,e+a-1))[0]}function PD(t,e){var r=hb(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const DD={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cme,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>PD(t*100,e),r:PD,s:mme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function LD(t){return t}var BD=Array.prototype.map,UD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pme(t){var e=t.grouping===void 0||t.thousands===void 0?LD:ume(BD.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?LD:dme(BD.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function f(p,y){p=Lp(p);var b=p.fill,T=p.align,S=p.sign,w=p.symbol,k=p.zero,M=p.width,C=p.comma,B=p.precision,R=p.trim,I=p.type;I==="n"?(C=!0,I="g"):DD[I]||(B===void 0&&(B=12),R=!0,I="g"),(k||b==="0"&&T==="=")&&(k=!0,b="0",T="=");var A=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),E=(w==="$"?n:/[%p]/.test(I)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),O=DD[I],U=/[defgprs%]/.test(I);B=B===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function P(V){var z=A,Q=E,ee,K,Z;if(I==="c")Q=O(V)+Q,V="";else{V=+V;var Y=V<0||1/V<0;if(V=isNaN(V)?d:O(Math.abs(V),B),R&&(V=fme(V)),Y&&+V==0&&S!=="+"&&(Y=!1),z=(Y?S==="("?S:c:S==="-"||S==="("?"":S)+z,Q=(I==="s"&&!isNaN(V)&&fb!==void 0?UD[8+fb/3]:"")+Q+(Y&&S==="("?")":""),U){for(ee=-1,K=V.length;++ee<K;)if(Z=V.charCodeAt(ee),48>Z||Z>57){Q=(Z===46?i+V.slice(ee+1):V.slice(ee))+Q,V=V.slice(0,ee);break}}}C&&!k&&(V=e(V,1/0));var pe=z.length+V.length+Q.length,ae=pe<M?new Array(M-pe+1).join(b):"";switch(C&&k&&(V=e(ae+V,ae.length?M-Q.length:1/0),ae=""),T){case"<":V=z+V+Q+ae;break;case"=":V=z+ae+V+Q;break;case"^":V=ae.slice(0,pe=ae.length>>1)+z+V+Q+ae.slice(pe);break;default:V=ae+z+V+Q;break}return a(V)}return P.toString=function(){return p+""},P}function m(p,y){var b=Math.max(-8,Math.min(8,Math.floor(Nh(y)/3)))*3,T=Math.pow(10,-b),S=f((p=Lp(p),p.type="f",p),{suffix:UD[8+b/3]});return function(w){return S(T*w)}}return{format:f,formatPrefix:m}}var zy,TE,UH;gme({thousands:",",grouping:[3],currency:["$",""]});function gme(t){return zy=pme(t),TE=zy.format,UH=zy.formatPrefix,zy}function yme(t){return Math.max(0,-Nh(Math.abs(t)))}function vme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nh(e)/3)))*3-Nh(Math.abs(t)))}function bme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nh(e)-Nh(t))+1}function zH(t,e,r,n){var i=ZT(t,e,r),a;switch(n=Lp(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=vme(i,s))&&(n.precision=a),UH(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=bme(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=yme(i))&&(n.precision=a-(n.type==="%")*2);break}}return TE(n)}function cu(t){var e=t.domain;return t.ticks=function(r){var n=e();return QT(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return zH(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],c=n[a],d,f,m=10;for(c<s&&(f=s,s=c,c=f,f=i,i=a,a=f);m-- >0;){if(f=YT(s,c,r),f===d)return n[i]=s,n[a]=c,e(n);if(f>0)s=Math.floor(s/f)*f,c=Math.ceil(c/f)*f;else if(f<0)s=Math.ceil(s*f)/f,c=Math.floor(c*f)/f;else break;d=f}return t},t}function mb(){var t=_E();return t.copy=function(){return Lg(t,mb())},Ss.apply(t,arguments),cu(t)}function $H(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,db),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return $H(t).unknown(e)},t=arguments.length?Array.from(t,db):[0,1],cu(r)}function VH(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function zD(t){return Math.log(t)}function $D(t){return Math.exp(t)}function xme(t){return-Math.log(-t)}function wme(t){return-Math.exp(-t)}function _me(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Sme(t){return t===10?_me:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Tme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VD(t){return(e,r)=>-t(-e,r)}function AE(t){const e=t(zD,$D),r=e.domain;let n=10,i,a;function s(){return i=Tme(n),a=Sme(n),r()[0]<0?(i=VD(i),a=VD(a),t(xme,wme)):t(zD,$D),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let f=d[0],m=d[d.length-1];const p=m<f;p&&([f,m]=[m,f]);let y=i(f),b=i(m),T,S;const w=c==null?10:+c;let k=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),f>0){for(;y<=b;++y)for(T=1;T<n;++T)if(S=y<0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;k.push(S)}}else for(;y<=b;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;k.push(S)}k.length*2<w&&(k=QT(f,m,w))}else k=QT(y,b,Math.min(b-y,w)).map(a);return p?k.reverse():k},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Lp(d)).precision==null&&(d.trim=!0),d=TE(d)),c===1/0)return d;const f=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*n<n-.5&&(p*=n),p<=f?d(m):""}},e.nice=()=>r(VH(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function FH(){const t=AE(Jx()).domain([1,10]);return t.copy=()=>Lg(t,FH()).base(t.base()),Ss.apply(t,arguments),t}function FD(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qD(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function EE(t){var e=1,r=t(FD(e),qD(e));return r.constant=function(n){return arguments.length?t(FD(e=+n),qD(e)):e},cu(r)}function qH(){var t=EE(Jx());return t.copy=function(){return Lg(t,qH()).constant(t.constant())},Ss.apply(t,arguments)}function HD(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ame(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Eme(t){return t<0?-t*t:t*t}function NE(t){var e=t(ra,ra),r=1;function n(){return r===1?t(ra,ra):r===.5?t(Ame,Eme):t(HD(r),HD(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},cu(e)}function kE(){var t=NE(Jx());return t.copy=function(){return Lg(t,kE()).exponent(t.exponent())},Ss.apply(t,arguments),t}function Nme(){return kE.apply(null,arguments).exponent(.5)}function GD(t){return Math.sign(t)*t*t}function kme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function HH(){var t=_E(),e=[0,1],r=!1,n;function i(a){var s=kme(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(GD(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,db)).map(GD)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return HH(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Ss.apply(i,arguments),cu(i)}function GH(){var t=[],e=[],r=[],n;function i(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=Rfe(t,s/c);return a}function a(s){return s==null||isNaN(s=+s)?n:e[Pg(r,s)]}return a.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Gc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return GH().domain(t).range(e).unknown(n)},Ss.apply(a,arguments)}function KH(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(d){return d!=null&&d<=d?i[Pg(n,d,0,r)]:a}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,c()):i.slice()},s.invertExtent=function(d){var f=i.indexOf(d);return f<0?[NaN,NaN]:f<1?[t,n[0]]:f>=r?[n[r-1],e]:[n[f-1],n[f]]},s.unknown=function(d){return arguments.length&&(a=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return KH().domain([t,e]).range(i).unknown(a)},Ss.apply(cu(s),arguments)}function WH(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Pg(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return WH().domain(t).range(e).unknown(r)},Ss.apply(i,arguments)}const O_=new Date,j_=new Date;function ai(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const d=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return d;let f;do d.push(f=new Date(+a)),e(a,c),t(a);while(f<a&&a<s);return d},i.filter=a=>ai(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!a(s););else for(;--c>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(O_.setTime(+a),j_.setTime(+s),t(O_),t(j_),Math.floor(r(O_,j_))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const pb=ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);pb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):pb);pb.range;const fl=1e3,ds=fl*60,ml=ds*60,Cl=ml*24,OE=Cl*7,KD=Cl*30,C_=Cl*365,i0=ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*fl)},(t,e)=>(e-t)/fl,t=>t.getUTCSeconds());i0.range;const jE=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fl)},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getMinutes());jE.range;const CE=ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getUTCMinutes());CE.range;const IE=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fl-t.getMinutes()*ds)},(t,e)=>{t.setTime(+t+e*ml)},(t,e)=>(e-t)/ml,t=>t.getHours());IE.range;const RE=ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ml)},(t,e)=>(e-t)/ml,t=>t.getUTCHours());RE.range;const Bg=ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ds)/Cl,t=>t.getDate()-1);Bg.range;const e2=ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cl,t=>t.getUTCDate()-1);e2.range;const XH=ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cl,t=>Math.floor(t/Cl));XH.range;function V0(t){return ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ds)/OE)}const t2=V0(0),gb=V0(1),Ome=V0(2),jme=V0(3),kh=V0(4),Cme=V0(5),Ime=V0(6);t2.range;gb.range;Ome.range;jme.range;kh.range;Cme.range;Ime.range;function F0(t){return ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/OE)}const r2=F0(0),yb=F0(1),Rme=F0(2),Mme=F0(3),Oh=F0(4),Pme=F0(5),Dme=F0(6);r2.range;yb.range;Rme.range;Mme.range;Oh.range;Pme.range;Dme.range;const ME=ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ME.range;const PE=ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());PE.range;const Il=ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Il.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Il.range;const Rl=ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Rl.range;function QH(t,e,r,n,i,a){const s=[[i0,1,fl],[i0,5,5*fl],[i0,15,15*fl],[i0,30,30*fl],[a,1,ds],[a,5,5*ds],[a,15,15*ds],[a,30,30*ds],[i,1,ml],[i,3,3*ml],[i,6,6*ml],[i,12,12*ml],[n,1,Cl],[n,2,2*Cl],[r,1,OE],[e,1,KD],[e,3,3*KD],[t,1,C_]];function c(f,m,p){const y=m<f;y&&([f,m]=[m,f]);const b=p&&typeof p.range=="function"?p:d(f,m,p),T=b?b.range(f,+m+1):[];return y?T.reverse():T}function d(f,m,p){const y=Math.abs(m-f)/p,b=yE(([,,w])=>w).right(s,y);if(b===s.length)return t.every(ZT(f/C_,m/C_,p));if(b===0)return pb.every(Math.max(ZT(f,m,p),1));const[T,S]=s[y/s[b-1][2]<s[b][2]/y?b-1:b];return T.every(S)}return[c,d]}const[Lme,Bme]=QH(Rl,PE,r2,XH,RE,CE),[Ume,zme]=QH(Il,ME,t2,Bg,IE,jE);function I_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function R_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ym(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function $me(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,f=vm(i),m=bm(i),p=vm(a),y=bm(a),b=vm(s),T=bm(s),S=vm(c),w=bm(c),k=vm(d),M=bm(d),C={a:Z,A:Y,b:pe,B:ae,c:null,d:JD,e:JD,f:upe,g:xpe,G:_pe,H:ope,I:lpe,j:cpe,L:YH,m:dpe,M:hpe,p:X,q:J,Q:rL,s:nL,S:fpe,u:mpe,U:ppe,V:gpe,w:ype,W:vpe,x:null,X:null,y:bpe,Y:wpe,Z:Spe,"%":tL},B={a:le,A:Ee,b:oe,B:Oe,c:null,d:eL,e:eL,f:Npe,g:Lpe,G:Upe,H:Tpe,I:Ape,j:Epe,L:JH,m:kpe,M:Ope,p:Me,q:at,Q:rL,s:nL,S:jpe,u:Cpe,U:Ipe,V:Rpe,w:Mpe,W:Ppe,x:null,X:null,y:Dpe,Y:Bpe,Z:zpe,"%":tL},R={a:U,A:P,b:V,B:z,c:Q,d:YD,e:YD,f:npe,g:QD,G:XD,H:ZD,I:ZD,j:Jme,L:rpe,m:Zme,M:epe,p:O,q:Yme,Q:ape,s:spe,S:tpe,u:Gme,U:Kme,V:Wme,w:Hme,W:Xme,x:ee,X:K,y:QD,Y:XD,Z:Qme,"%":ipe};C.x=I(r,C),C.X=I(n,C),C.c=I(e,C),B.x=I(r,B),B.X=I(n,B),B.c=I(e,B);function I(Ae,$e){return function(de){var ge=[],Ye=-1,Ke=0,it=Ae.length,ut,er,Ie;for(de instanceof Date||(de=new Date(+de));++Ye<it;)Ae.charCodeAt(Ye)===37&&(ge.push(Ae.slice(Ke,Ye)),(er=WD[ut=Ae.charAt(++Ye)])!=null?ut=Ae.charAt(++Ye):er=ut==="e"?" ":"0",(Ie=$e[ut])&&(ut=Ie(de,er)),ge.push(ut),Ke=Ye+1);return ge.push(Ae.slice(Ke,Ye)),ge.join("")}}function A(Ae,$e){return function(de){var ge=ym(1900,void 0,1),Ye=E(ge,Ae,de+="",0),Ke,it;if(Ye!=de.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if($e&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Ke=R_(ym(ge.y,0,1)),it=Ke.getUTCDay(),Ke=it>4||it===0?yb.ceil(Ke):yb(Ke),Ke=e2.offset(Ke,(ge.V-1)*7),ge.y=Ke.getUTCFullYear(),ge.m=Ke.getUTCMonth(),ge.d=Ke.getUTCDate()+(ge.w+6)%7):(Ke=I_(ym(ge.y,0,1)),it=Ke.getDay(),Ke=it>4||it===0?gb.ceil(Ke):gb(Ke),Ke=Bg.offset(Ke,(ge.V-1)*7),ge.y=Ke.getFullYear(),ge.m=Ke.getMonth(),ge.d=Ke.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),it="Z"in ge?R_(ym(ge.y,0,1)).getUTCDay():I_(ym(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(it+5)%7:ge.w+ge.U*7-(it+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,R_(ge)):I_(ge)}}function E(Ae,$e,de,ge){for(var Ye=0,Ke=$e.length,it=de.length,ut,er;Ye<Ke;){if(ge>=it)return-1;if(ut=$e.charCodeAt(Ye++),ut===37){if(ut=$e.charAt(Ye++),er=R[ut in WD?$e.charAt(Ye++):ut],!er||(ge=er(Ae,de,ge))<0)return-1}else if(ut!=de.charCodeAt(ge++))return-1}return ge}function O(Ae,$e,de){var ge=f.exec($e.slice(de));return ge?(Ae.p=m.get(ge[0].toLowerCase()),de+ge[0].length):-1}function U(Ae,$e,de){var ge=b.exec($e.slice(de));return ge?(Ae.w=T.get(ge[0].toLowerCase()),de+ge[0].length):-1}function P(Ae,$e,de){var ge=p.exec($e.slice(de));return ge?(Ae.w=y.get(ge[0].toLowerCase()),de+ge[0].length):-1}function V(Ae,$e,de){var ge=k.exec($e.slice(de));return ge?(Ae.m=M.get(ge[0].toLowerCase()),de+ge[0].length):-1}function z(Ae,$e,de){var ge=S.exec($e.slice(de));return ge?(Ae.m=w.get(ge[0].toLowerCase()),de+ge[0].length):-1}function Q(Ae,$e,de){return E(Ae,e,$e,de)}function ee(Ae,$e,de){return E(Ae,r,$e,de)}function K(Ae,$e,de){return E(Ae,n,$e,de)}function Z(Ae){return s[Ae.getDay()]}function Y(Ae){return a[Ae.getDay()]}function pe(Ae){return d[Ae.getMonth()]}function ae(Ae){return c[Ae.getMonth()]}function X(Ae){return i[+(Ae.getHours()>=12)]}function J(Ae){return 1+~~(Ae.getMonth()/3)}function le(Ae){return s[Ae.getUTCDay()]}function Ee(Ae){return a[Ae.getUTCDay()]}function oe(Ae){return d[Ae.getUTCMonth()]}function Oe(Ae){return c[Ae.getUTCMonth()]}function Me(Ae){return i[+(Ae.getUTCHours()>=12)]}function at(Ae){return 1+~~(Ae.getUTCMonth()/3)}return{format:function(Ae){var $e=I(Ae+="",C);return $e.toString=function(){return Ae},$e},parse:function(Ae){var $e=A(Ae+="",!1);return $e.toString=function(){return Ae},$e},utcFormat:function(Ae){var $e=I(Ae+="",B);return $e.toString=function(){return Ae},$e},utcParse:function(Ae){var $e=A(Ae+="",!0);return $e.toString=function(){return Ae},$e}}}var WD={"-":"",_:" ",0:"0"},mi=/^\s*\d+/,Vme=/^%/,Fme=/[\\^$*+?|[\]().{}]/g;function pr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function qme(t){return t.replace(Fme,"\\$&")}function vm(t){return new RegExp("^(?:"+t.map(qme).join("|")+")","i")}function bm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Hme(t,e,r){var n=mi.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Gme(t,e,r){var n=mi.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Kme(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Wme(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Xme(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function XD(t,e,r){var n=mi.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function QD(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Qme(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Yme(t,e,r){var n=mi.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Zme(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function YD(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Jme(t,e,r){var n=mi.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function ZD(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function epe(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function tpe(t,e,r){var n=mi.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function rpe(t,e,r){var n=mi.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function npe(t,e,r){var n=mi.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ipe(t,e,r){var n=Vme.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function ape(t,e,r){var n=mi.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function spe(t,e,r){var n=mi.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function JD(t,e){return pr(t.getDate(),e,2)}function ope(t,e){return pr(t.getHours(),e,2)}function lpe(t,e){return pr(t.getHours()%12||12,e,2)}function cpe(t,e){return pr(1+Bg.count(Il(t),t),e,3)}function YH(t,e){return pr(t.getMilliseconds(),e,3)}function upe(t,e){return YH(t,e)+"000"}function dpe(t,e){return pr(t.getMonth()+1,e,2)}function hpe(t,e){return pr(t.getMinutes(),e,2)}function fpe(t,e){return pr(t.getSeconds(),e,2)}function mpe(t){var e=t.getDay();return e===0?7:e}function ppe(t,e){return pr(t2.count(Il(t)-1,t),e,2)}function ZH(t){var e=t.getDay();return e>=4||e===0?kh(t):kh.ceil(t)}function gpe(t,e){return t=ZH(t),pr(kh.count(Il(t),t)+(Il(t).getDay()===4),e,2)}function ype(t){return t.getDay()}function vpe(t,e){return pr(gb.count(Il(t)-1,t),e,2)}function bpe(t,e){return pr(t.getFullYear()%100,e,2)}function xpe(t,e){return t=ZH(t),pr(t.getFullYear()%100,e,2)}function wpe(t,e){return pr(t.getFullYear()%1e4,e,4)}function _pe(t,e){var r=t.getDay();return t=r>=4||r===0?kh(t):kh.ceil(t),pr(t.getFullYear()%1e4,e,4)}function Spe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pr(e/60|0,"0",2)+pr(e%60,"0",2)}function eL(t,e){return pr(t.getUTCDate(),e,2)}function Tpe(t,e){return pr(t.getUTCHours(),e,2)}function Ape(t,e){return pr(t.getUTCHours()%12||12,e,2)}function Epe(t,e){return pr(1+e2.count(Rl(t),t),e,3)}function JH(t,e){return pr(t.getUTCMilliseconds(),e,3)}function Npe(t,e){return JH(t,e)+"000"}function kpe(t,e){return pr(t.getUTCMonth()+1,e,2)}function Ope(t,e){return pr(t.getUTCMinutes(),e,2)}function jpe(t,e){return pr(t.getUTCSeconds(),e,2)}function Cpe(t){var e=t.getUTCDay();return e===0?7:e}function Ipe(t,e){return pr(r2.count(Rl(t)-1,t),e,2)}function eG(t){var e=t.getUTCDay();return e>=4||e===0?Oh(t):Oh.ceil(t)}function Rpe(t,e){return t=eG(t),pr(Oh.count(Rl(t),t)+(Rl(t).getUTCDay()===4),e,2)}function Mpe(t){return t.getUTCDay()}function Ppe(t,e){return pr(yb.count(Rl(t)-1,t),e,2)}function Dpe(t,e){return pr(t.getUTCFullYear()%100,e,2)}function Lpe(t,e){return t=eG(t),pr(t.getUTCFullYear()%100,e,2)}function Bpe(t,e){return pr(t.getUTCFullYear()%1e4,e,4)}function Upe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Oh(t):Oh.ceil(t),pr(t.getUTCFullYear()%1e4,e,4)}function zpe(){return"+0000"}function tL(){return"%"}function rL(t){return+t}function nL(t){return Math.floor(+t/1e3)}var Md,tG,rG;$pe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $pe(t){return Md=$me(t),tG=Md.format,Md.parse,rG=Md.utcFormat,Md.utcParse,Md}function Vpe(t){return new Date(t)}function Fpe(t){return t instanceof Date?+t:+new Date(+t)}function DE(t,e,r,n,i,a,s,c,d,f){var m=_E(),p=m.invert,y=m.domain,b=f(".%L"),T=f(":%S"),S=f("%I:%M"),w=f("%I %p"),k=f("%a %d"),M=f("%b %d"),C=f("%B"),B=f("%Y");function R(I){return(d(I)<I?b:c(I)<I?T:s(I)<I?S:a(I)<I?w:n(I)<I?i(I)<I?k:M:r(I)<I?C:B)(I)}return m.invert=function(I){return new Date(p(I))},m.domain=function(I){return arguments.length?y(Array.from(I,Fpe)):y().map(Vpe)},m.ticks=function(I){var A=y();return t(A[0],A[A.length-1],I??10)},m.tickFormat=function(I,A){return A==null?R:f(A)},m.nice=function(I){var A=y();return(!I||typeof I.range!="function")&&(I=e(A[0],A[A.length-1],I??10)),I?y(VH(A,I)):m},m.copy=function(){return Lg(m,DE(t,e,r,n,i,a,s,c,d,f))},m}function qpe(){return Ss.apply(DE(Ume,zme,Il,ME,t2,Bg,IE,jE,i0,tG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hpe(){return Ss.apply(DE(Lme,Bme,Rl,PE,r2,e2,RE,CE,i0,rG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function n2(){var t=0,e=1,r,n,i,a,s=ra,c=!1,d;function f(p){return p==null||isNaN(p=+p)?d:s(i===0?.5:(p=(a(p)-r)*i,c?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),f):[t,e]},f.clamp=function(p){return arguments.length?(c=!!p,f):c},f.interpolator=function(p){return arguments.length?(s=p,f):s};function m(p){return function(y){var b,T;return arguments.length?([b,T]=y,s=p(b,T),f):[s(0),s(1)]}}return f.range=m(of),f.rangeRound=m(wE),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),f}}function uu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nG(){var t=cu(n2()(ra));return t.copy=function(){return uu(t,nG())},zl.apply(t,arguments)}function iG(){var t=AE(n2()).domain([1,10]);return t.copy=function(){return uu(t,iG()).base(t.base())},zl.apply(t,arguments)}function aG(){var t=EE(n2());return t.copy=function(){return uu(t,aG()).constant(t.constant())},zl.apply(t,arguments)}function LE(){var t=NE(n2());return t.copy=function(){return uu(t,LE()).exponent(t.exponent())},zl.apply(t,arguments)}function Gpe(){return LE.apply(null,arguments).exponent(.5)}function sG(){var t=[],e=ra;function r(n){if(n!=null&&!isNaN(n=+n))return e((Pg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Gc),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Ife(t,a/n))},r.copy=function(){return sG(e).domain(t)},zl.apply(r,arguments)}function i2(){var t=0,e=.5,r=1,n=1,i,a,s,c,d,f=ra,m,p=!1,y;function b(S){return isNaN(S=+S)?y:(S=.5+((S=+m(S))-a)*(n*S<n*a?c:d),f(p?Math.max(0,Math.min(1,S)):S))}b.domain=function(S){return arguments.length?([t,e,r]=S,i=m(t=+t),a=m(e=+e),s=m(r=+r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b):[t,e,r]},b.clamp=function(S){return arguments.length?(p=!!S,b):p},b.interpolator=function(S){return arguments.length?(f=S,b):f};function T(S){return function(w){var k,M,C;return arguments.length?([k,M,C]=w,f=ime(S,[k,M,C]),b):[f(0),f(.5),f(1)]}}return b.range=T(of),b.rangeRound=T(wE),b.unknown=function(S){return arguments.length?(y=S,b):y},function(S){return m=S,i=S(t),a=S(e),s=S(r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b}}function oG(){var t=cu(i2()(ra));return t.copy=function(){return uu(t,oG())},zl.apply(t,arguments)}function lG(){var t=AE(i2()).domain([.1,1,10]);return t.copy=function(){return uu(t,lG()).base(t.base())},zl.apply(t,arguments)}function cG(){var t=EE(i2());return t.copy=function(){return uu(t,cG()).constant(t.constant())},zl.apply(t,arguments)}function BE(){var t=NE(i2());return t.copy=function(){return uu(t,BE()).exponent(t.exponent())},zl.apply(t,arguments)}function Kpe(){return BE.apply(null,arguments).exponent(.5)}const iL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Rp,scaleDiverging:oG,scaleDivergingLog:lG,scaleDivergingPow:BE,scaleDivergingSqrt:Kpe,scaleDivergingSymlog:cG,scaleIdentity:$H,scaleImplicit:JT,scaleLinear:mb,scaleLog:FH,scaleOrdinal:vE,scalePoint:Wm,scalePow:kE,scaleQuantile:GH,scaleQuantize:KH,scaleRadial:HH,scaleSequential:nG,scaleSequentialLog:iG,scaleSequentialPow:LE,scaleSequentialQuantile:sG,scaleSequentialSqrt:Gpe,scaleSequentialSymlog:aG,scaleSqrt:Nme,scaleSymlog:qH,scaleThreshold:WH,scaleTime:qpe,scaleUtc:Hpe,tickFormat:zH},Symbol.toStringTag,{value:"Module"}));var M_,aL;function a2(){if(aL)return M_;aL=1;var t=nf();function e(r,n,i){for(var a=-1,s=r.length;++a<s;){var c=r[a],d=n(c);if(d!=null&&(f===void 0?d===d&&!t(d):i(d,f)))var f=d,m=c}return m}return M_=e,M_}var P_,sL;function uG(){if(sL)return P_;sL=1;function t(e,r){return e>r}return P_=t,P_}var D_,oL;function Wpe(){if(oL)return D_;oL=1;var t=a2(),e=uG(),r=sf();function n(i){return i&&i.length?t(i,r,e):void 0}return D_=n,D_}var Xpe=Wpe();const s2=vr(Xpe);var L_,lL;function dG(){if(lL)return L_;lL=1;function t(e,r){return e<r}return L_=t,L_}var B_,cL;function Qpe(){if(cL)return B_;cL=1;var t=a2(),e=dG(),r=sf();function n(i){return i&&i.length?t(i,r,e):void 0}return B_=n,B_}var Ype=Qpe();const o2=vr(Ype);var U_,uL;function Zpe(){if(uL)return U_;uL=1;var t=eE(),e=Co(),r=bH(),n=Ea();function i(a,s){var c=n(a)?t:r;return c(a,e(s,3))}return U_=i,U_}var z_,dL;function Jpe(){if(dL)return z_;dL=1;var t=yH(),e=Zpe();function r(n,i){return t(e(n,i),1)}return z_=r,z_}var ege=Jpe();const tge=vr(ege);var $_,hL;function rge(){if(hL)return $_;hL=1;var t=hE();function e(r,n){return t(r,n)}return $_=e,$_}var nge=rge();const Ug=vr(nge);var lf=1e9,ige={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zE,cn=!0,_s="[DecimalError] ",m0=_s+"Invalid argument: ",UE=_s+"Exponent out of range: ",cf=Math.floor,Xu=Math.pow,age=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,za,di=1e7,nn=7,hG=9007199254740991,vb=cf(hG/nn),dt={};dt.absoluteValue=dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};dt.comparedTo=dt.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};dt.decimalPlaces=dt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*nn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};dt.dividedBy=dt.div=function(t){return wl(this,new this.constructor(t))};dt.dividedToIntegerBy=dt.idiv=function(t){var e=this,r=e.constructor;return zr(wl(e,new r(t),0,1),r.precision)};dt.equals=dt.eq=function(t){return!this.cmp(t)};dt.exponent=function(){return Wn(this)};dt.greaterThan=dt.gt=function(t){return this.cmp(t)>0};dt.greaterThanOrEqualTo=dt.gte=function(t){return this.cmp(t)>=0};dt.isInteger=dt.isint=function(){return this.e>this.d.length-2};dt.isNegative=dt.isneg=function(){return this.s<0};dt.isPositive=dt.ispos=function(){return this.s>0};dt.isZero=function(){return this.s===0};dt.lessThan=dt.lt=function(t){return this.cmp(t)<0};dt.lessThanOrEqualTo=dt.lte=function(t){return this.cmp(t)<1};dt.logarithm=dt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(za))throw Error(_s+"NaN");if(r.s<1)throw Error(_s+(r.s?"NaN":"-Infinity"));return r.eq(za)?new n(0):(cn=!1,e=wl(Bp(r,a),Bp(t,a),a),cn=!0,zr(e,i))};dt.minus=dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?pG(e,t):fG(e,(t.s=-t.s,t))};dt.modulo=dt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(_s+"NaN");return r.s?(cn=!1,e=wl(r,t,0,1).times(t),cn=!0,r.minus(e)):zr(new n(r),i)};dt.naturalExponential=dt.exp=function(){return mG(this)};dt.naturalLogarithm=dt.ln=function(){return Bp(this)};dt.negated=dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};dt.plus=dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?fG(e,t):pG(e,(t.s=-t.s,t))};dt.precision=dt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(m0+t);if(e=Wn(i)+1,n=i.d.length-1,r=n*nn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};dt.squareRoot=dt.sqrt=function(){var t,e,r,n,i,a,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(_s+"NaN")}for(t=Wn(c),cn=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=go(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=cf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(i.toString()),r=d.precision,i=s=r+3;;)if(a=n,n=a.plus(wl(c,a,s+2)).times(.5),go(a.d).slice(0,s)===(e=go(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(zr(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;s+=4}return cn=!0,zr(n,r)};dt.times=dt.mul=function(t){var e,r,n,i,a,s,c,d,f,m=this,p=m.constructor,y=m.d,b=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,d=y.length,f=b.length,d<f&&(a=y,y=b,b=a,s=d,d=f,f=s),a=[],s=d+f,n=s;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=d+n;i>n;)c=a[i]+b[n]*y[i-n-1]+e,a[i--]=c%di|0,e=c/di|0;a[i]=(a[i]+e)%di|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,cn?zr(t,p.precision):t};dt.toDecimalPlaces=dt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(To(t,0,lf),e===void 0?e=n.rounding:To(e,0,8),zr(r,t+Wn(r)+1,e))};dt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=O0(n,!0):(To(t,0,lf),e===void 0?e=i.rounding:To(e,0,8),n=zr(new i(n),t+1,e),r=O0(n,!0,t+1)),r};dt.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?O0(i):(To(t,0,lf),e===void 0?e=a.rounding:To(e,0,8),n=zr(new a(i),t+Wn(i)+1,e),r=O0(n.abs(),!1,t+Wn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};dt.toInteger=dt.toint=function(){var t=this,e=t.constructor;return zr(new e(t),Wn(t)+1,e.rounding)};dt.toNumber=function(){return+this};dt.toPower=dt.pow=function(t){var e,r,n,i,a,s,c=this,d=c.constructor,f=12,m=+(t=new d(t));if(!t.s)return new d(za);if(c=new d(c),!c.s){if(t.s<1)throw Error(_s+"Infinity");return c}if(c.eq(za))return c;if(n=d.precision,t.eq(za))return zr(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=c.s,s){if((r=m<0?-m:m)<=hG){for(i=new d(za),e=Math.ceil(n/nn+4),cn=!1;r%2&&(i=i.times(c),mL(i.d,e)),r=cf(r/2),r!==0;)c=c.times(c),mL(c.d,e);return cn=!0,t.s<0?new d(za).div(i):zr(i,n)}}else if(a<0)throw Error(_s+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,cn=!1,i=t.times(Bp(c,n+f)),cn=!0,i=mG(i),i.s=a,i};dt.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Wn(i),n=O0(i,r<=a.toExpNeg||r>=a.toExpPos)):(To(t,1,lf),e===void 0?e=a.rounding:To(e,0,8),i=zr(new a(i),t,e),r=Wn(i),n=O0(i,t<=r||r<=a.toExpNeg,t)),n};dt.toSignificantDigits=dt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(To(t,1,lf),e===void 0?e=n.rounding:To(e,0,8)),zr(new n(r),t,e)};dt.toString=dt.valueOf=dt.val=dt.toJSON=dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Wn(t),r=t.constructor;return O0(t,e<=r.toExpNeg||e>=r.toExpPos)};function fG(t,e){var r,n,i,a,s,c,d,f,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),cn?zr(e,p):e;if(d=t.d,f=e.d,s=t.e,i=e.e,d=d.slice(),a=s-i,a){for(a<0?(n=d,a=-a,c=f.length):(n=f,i=s,c=d.length),s=Math.ceil(p/nn),c=s>c?s+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=d.length,a=f.length,c-a<0&&(a=c,n=f,f=d,d=n),r=0;a;)r=(d[--a]=d[a]+f[a]+r)/di|0,d[a]%=di;for(r&&(d.unshift(r),++i),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=i,cn?zr(e,p):e}function To(t,e,r){if(t!==~~t||t<e||t>r)throw Error(m0+t)}function go(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=nn-n.length,r&&(a+=Ec(r)),a+=n;s=t[e],n=s+"",r=nn-n.length,r&&(a+=Ec(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var wl=(function(){function t(n,i){var a,s=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+s,n[c]=a%di|0,s=a/di|0;return s&&n.unshift(s),n}function e(n,i,a,s){var c,d;if(a!=s)d=a>s?1:-1;else for(c=d=0;c<a;c++)if(n[c]!=i[c]){d=n[c]>i[c]?1:-1;break}return d}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*di+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var c,d,f,m,p,y,b,T,S,w,k,M,C,B,R,I,A,E,O=n.constructor,U=n.s==i.s?1:-1,P=n.d,V=i.d;if(!n.s)return new O(n);if(!i.s)throw Error(_s+"Division by zero");for(d=n.e-i.e,A=V.length,R=P.length,b=new O(U),T=b.d=[],f=0;V[f]==(P[f]||0);)++f;if(V[f]>(P[f]||0)&&--d,a==null?M=a=O.precision:s?M=a+(Wn(n)-Wn(i))+1:M=a,M<0)return new O(0);if(M=M/nn+2|0,f=0,A==1)for(m=0,V=V[0],M++;(f<R||m)&&M--;f++)C=m*di+(P[f]||0),T[f]=C/V|0,m=C%V|0;else{for(m=di/(V[0]+1)|0,m>1&&(V=t(V,m),P=t(P,m),A=V.length,R=P.length),B=A,S=P.slice(0,A),w=S.length;w<A;)S[w++]=0;E=V.slice(),E.unshift(0),I=V[0],V[1]>=di/2&&++I;do m=0,c=e(V,S,A,w),c<0?(k=S[0],A!=w&&(k=k*di+(S[1]||0)),m=k/I|0,m>1?(m>=di&&(m=di-1),p=t(V,m),y=p.length,w=S.length,c=e(p,S,y,w),c==1&&(m--,r(p,A<y?E:V,y))):(m==0&&(c=m=1),p=V.slice()),y=p.length,y<w&&p.unshift(0),r(S,p,w),c==-1&&(w=S.length,c=e(V,S,A,w),c<1&&(m++,r(S,A<w?E:V,w))),w=S.length):c===0&&(m++,S=[0]),T[f++]=m,c&&S[0]?S[w++]=P[B]||0:(S=[P[B]],w=1);while((B++<R||S[0]!==void 0)&&M--)}return T[0]||T.shift(),b.e=d,zr(b,s?a+Wn(b)+1:a)}})();function mG(t,e){var r,n,i,a,s,c,d=0,f=0,m=t.constructor,p=m.precision;if(Wn(t)>16)throw Error(UE+Wn(t));if(!t.s)return new m(za);for(cn=!1,c=p,s=new m(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(n=Math.log(Xu(2,f))/Math.LN10*2+5|0,c+=n,r=i=a=new m(za),m.precision=c;;){if(i=zr(i.times(t),c),r=r.times(++d),s=a.plus(wl(i,r,c)),go(s.d).slice(0,c)===go(a.d).slice(0,c)){for(;f--;)a=zr(a.times(a),c);return m.precision=p,e==null?(cn=!0,zr(a,p)):a}a=s}}function Wn(t){for(var e=t.e*nn,r=t.d[0];r>=10;r/=10)e++;return e}function V_(t,e,r){if(e>t.LN10.sd())throw cn=!0,r&&(t.precision=r),Error(_s+"LN10 precision limit exceeded");return zr(new t(t.LN10),e)}function Ec(t){for(var e="";t--;)e+="0";return e}function Bp(t,e){var r,n,i,a,s,c,d,f,m,p=1,y=10,b=t,T=b.d,S=b.constructor,w=S.precision;if(b.s<1)throw Error(_s+(b.s?"NaN":"-Infinity"));if(b.eq(za))return new S(0);if(e==null?(cn=!1,f=w):f=e,b.eq(10))return e==null&&(cn=!0),V_(S,f);if(f+=y,S.precision=f,r=go(T),n=r.charAt(0),a=Wn(b),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(t),r=go(b.d),n=r.charAt(0),p++;a=Wn(b),n>1?(b=new S("0."+r),a++):b=new S(n+"."+r.slice(1))}else return d=V_(S,f+2,w).times(a+""),b=Bp(new S(n+"."+r.slice(1)),f-y).plus(d),S.precision=w,e==null?(cn=!0,zr(b,w)):b;for(c=s=b=wl(b.minus(za),b.plus(za),f),m=zr(b.times(b),f),i=3;;){if(s=zr(s.times(m),f),d=c.plus(wl(s,new S(i),f)),go(d.d).slice(0,f)===go(c.d).slice(0,f))return c=c.times(2),a!==0&&(c=c.plus(V_(S,f+2,w).times(a+""))),c=wl(c,new S(p),f),S.precision=w,e==null?(cn=!0,zr(c,w)):c;c=d,i+=2}}function fL(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=cf(r/nn),t.d=[],n=(r+1)%nn,r<0&&(n+=nn),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=nn;n<i;)t.d.push(+e.slice(n,n+=nn));e=e.slice(n),n=nn-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),cn&&(t.e>vb||t.e<-vb))throw Error(UE+r)}else t.s=0,t.e=0,t.d=[0];return t}function zr(t,e,r){var n,i,a,s,c,d,f,m,p=t.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=nn,i=e,f=p[m=0];else{if(m=Math.ceil((n+1)/nn),a=p.length,m>=a)return t;for(f=a=p[m],s=1;a>=10;a/=10)s++;n%=nn,i=n-nn+s}if(r!==void 0&&(a=Xu(10,s-i-1),c=f/a%10|0,d=e<0||p[m+1]!==void 0||f%a,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?i>0?f/Xu(10,s-i):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return d?(a=Wn(t),p.length=1,e=e-a-1,p[0]=Xu(10,(nn-e%nn)%nn),t.e=cf(-e/nn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,a=1,m--):(p.length=m+1,a=Xu(10,nn-n),p[m]=i>0?(f/Xu(10,s-i)%Xu(10,i)|0)*a:0),d)for(;;)if(m==0){(p[0]+=a)==di&&(p[0]=1,++t.e);break}else{if(p[m]+=a,p[m]!=di)break;p[m--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(cn&&(t.e>vb||t.e<-vb))throw Error(UE+Wn(t));return t}function pG(t,e){var r,n,i,a,s,c,d,f,m,p,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),cn?zr(e,b):e;if(d=t.d,p=e.d,n=e.e,f=t.e,d=d.slice(),s=f-n,s){for(m=s<0,m?(r=d,s=-s,c=p.length):(r=p,n=f,c=d.length),i=Math.max(Math.ceil(b/nn),c)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=d.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(d[i]!=p[i]){m=d[i]<p[i];break}s=0}for(m&&(r=d,d=p,p=r,e.s=-e.s),c=d.length,i=p.length-c;i>0;--i)d[c++]=0;for(i=p.length;i>s;){if(d[--i]<p[i]){for(a=i;a&&d[--a]===0;)d[a]=di-1;--d[a],d[i]+=di}d[i]-=p[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,cn?zr(e,b):e):new y(0)}function O0(t,e,r){var n,i=Wn(t),a=go(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ec(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ec(-i-1)+a,r&&(n=r-s)>0&&(a+=Ec(n))):i>=s?(a+=Ec(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Ec(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Ec(n))),t.s<0?"-"+a:a}function mL(t,e){if(t.length>e)return t.length=e,!0}function gG(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(m0+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return fL(s,a.toString())}else if(typeof a!="string")throw Error(m0+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,age.test(a))fL(s,a);else throw Error(m0+a)}if(i.prototype=dt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=gG,i.config=i.set=sge,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function sge(t){if(!t||typeof t!="object")throw Error(_s+"Object expected");var e,r,n,i=["precision",1,lf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(cf(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(m0+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(m0+r+": "+n);return this}var zE=gG(ige);za=new zE(1);const Mr=zE;function oge(t){return dge(t)||uge(t)||cge(t)||lge()}function lge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(t,e){if(t){if(typeof t=="string")return nA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nA(t,e)}}function uge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function dge(t){if(Array.isArray(t))return nA(t)}function nA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var hge=function(e){return e},yG={},vG=function(e){return e===yG},pL=function(e){return function r(){return arguments.length===0||arguments.length===1&&vG(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},fge=function t(e,r){return e===1?r:pL(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==yG}).length;return s>=e?r.apply(void 0,i):t(e-s,pL(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=i.map(function(p){return vG(p)?d.shift():p});return r.apply(void 0,oge(m).concat(d))}))})},l2=function(e){return fge(e.length,e)},iA=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},mge=l2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),pge=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return hge;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,d){return d(c)},a.apply(void 0,arguments))}},aA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bG=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(c,d){return c===r[d]})||(r=a,n=e.apply(void 0,a)),n}};function gge(t){var e;return t===0?e=1:e=Math.floor(new Mr(t).abs().log(10).toNumber())+1,e}function yge(t,e,r){for(var n=new Mr(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var vge=l2(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),bge=l2(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),xge=l2(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const c2={rangeStep:yge,getDigitCount:gge,interpolateNumber:vge,uninterpolateNumber:bge,uninterpolateTruncation:xge};function sA(t){return Sge(t)||_ge(t)||xG(t)||wge()}function wge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Sge(t){if(Array.isArray(t))return oA(t)}function Up(t,e){return Ege(t)||Age(t,e)||xG(t,e)||Tge()}function Tge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xG(t,e){if(t){if(typeof t=="string")return oA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oA(t,e)}}function oA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Age(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function Ege(t){if(Array.isArray(t))return t}function wG(t){var e=Up(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function _G(t,e,r){if(t.lte(0))return new Mr(0);var n=c2.getDigitCount(t.toNumber()),i=new Mr(10).pow(n),a=t.div(i),s=n!==1?.05:.1,c=new Mr(Math.ceil(a.div(s).toNumber())).add(r).mul(s),d=c.mul(i);return e?d:new Mr(Math.ceil(d))}function Nge(t,e,r){var n=1,i=new Mr(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new Mr(10).pow(c2.getDigitCount(t)-1),i=new Mr(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Mr(Math.floor(t)))}else t===0?i=new Mr(Math.floor((e-1)/2)):r||(i=new Mr(Math.floor(t)));var s=Math.floor((e-1)/2),c=pge(mge(function(d){return i.add(new Mr(d-s).mul(n)).toNumber()}),iA);return c(0,e)}function SG(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Mr(0),tickMin:new Mr(0),tickMax:new Mr(0)};var a=_G(new Mr(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new Mr(0):(s=new Mr(t).add(e).div(2),s=s.sub(new Mr(s).mod(a)));var c=Math.ceil(s.sub(t).div(a).toNumber()),d=Math.ceil(new Mr(e).sub(s).div(a).toNumber()),f=c+d+1;return f>r?SG(t,e,r,n,i+1):(f<r&&(d=e>0?d+(r-f):d,c=e>0?c:c+(r-f)),{step:a,tickMin:s.sub(new Mr(c).mul(a)),tickMax:s.add(new Mr(d).mul(a))})}function kge(t){var e=Up(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=wG([r,n]),d=Up(c,2),f=d[0],m=d[1];if(f===-1/0||m===1/0){var p=m===1/0?[f].concat(sA(iA(0,i-1).map(function(){return 1/0}))):[].concat(sA(iA(0,i-1).map(function(){return-1/0})),[m]);return r>n?aA(p):p}if(f===m)return Nge(f,i,a);var y=SG(f,m,s,a),b=y.step,T=y.tickMin,S=y.tickMax,w=c2.rangeStep(T,S.add(new Mr(.1).mul(b)),b);return r>n?aA(w):w}function Oge(t,e){var r=Up(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=wG([n,i]),c=Up(s,2),d=c[0],f=c[1];if(d===-1/0||f===1/0)return[n,i];if(d===f)return[d];var m=Math.max(e,2),p=_G(new Mr(f).sub(d).div(m-1),a,0),y=[].concat(sA(c2.rangeStep(new Mr(d),new Mr(f).sub(new Mr(.99).mul(p)),p)),[f]);return n>i?aA(y):y}var jge=bG(kge),Cge=bG(Oge),Ige="Invariant failed";function j0(t,e){throw new Error(Ige)}var Rge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function bb(){return bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bb.apply(this,arguments)}function Mge(t,e){return Bge(t)||Lge(t,e)||Dge(t,e)||Pge()}function Pge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dge(t,e){if(t){if(typeof t=="string")return gL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gL(t,e)}}function gL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Bge(t){if(Array.isArray(t))return t}function Uge(t,e){if(t==null)return{};var r=zge(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EG(n.key),n)}}function Fge(t,e,r){return e&&Vge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qge(t,e,r){return e=xb(e),Hge(t,TG()?Reflect.construct(e,r||[],xb(t).constructor):e.apply(t,r))}function Hge(t,e){if(e&&(jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gge(t)}function Gge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TG=function(){return!!t})()}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xb(t)}function Kge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lA(t,e)}function AG(t,e,r){return e=EG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EG(t){var e=Wge(t,"string");return jh(e)=="symbol"?e:e+""}function Wge(t,e){if(jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zg=(function(t){function e(){return $ge(this,e),qge(this,e,arguments)}return Kge(e,t),Fge(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,c=n.dataKey,d=n.data,f=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,y=Uge(n,Rge),b=xt(y,!1);this.props.direction==="x"&&m.type!=="number"&&j0();var T=d.map(function(S){var w=f(S,c),k=w.x,M=w.y,C=w.value,B=w.errorVal;if(!B)return null;var R=[],I,A;if(Array.isArray(B)){var E=Mge(B,2);I=E[0],A=E[1]}else I=A=B;if(a==="vertical"){var O=m.scale,U=M+i,P=U+s,V=U-s,z=O(C-I),Q=O(C+A);R.push({x1:Q,y1:P,x2:Q,y2:V}),R.push({x1:z,y1:U,x2:Q,y2:U}),R.push({x1:z,y1:P,x2:z,y2:V})}else if(a==="horizontal"){var ee=p.scale,K=k+i,Z=K-s,Y=K+s,pe=ee(C-I),ae=ee(C+A);R.push({x1:Z,y1:ae,x2:Y,y2:ae}),R.push({x1:K,y1:pe,x2:K,y2:ae}),R.push({x1:Z,y1:pe,x2:Y,y2:pe})}return ne.createElement(fr,bb({className:"recharts-errorBar",key:"bar-".concat(R.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},b),R.map(function(X){return ne.createElement("line",bb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return ne.createElement(fr,{className:"recharts-errorBars"},T)}}])})(ne.Component);AG(zg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});AG(zg,"displayName","ErrorBar");function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function yL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(r),!0).forEach(function(n){Xge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xge(t,e,r){return e=Qge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qge(t){var e=Yge(t,"string");return zp(e)=="symbol"?e:e+""}function Yge(t,e){if(zp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NG=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ba(r,th);if(!s)return null;var c=th.defaultProps,d=c!==void 0?Fu(Fu({},c),s.props):{},f;return s.props&&s.props.payload?f=s.props&&s.props.payload:a==="children"?f=(n||[]).reduce(function(m,p){var y=p.item,b=p.props,T=b.sectors||b.data||[];return m.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):f=(n||[]).map(function(m){var p=m.item,y=p.type.defaultProps,b=y!==void 0?Fu(Fu({},y),p.props):{},T=b.dataKey,S=b.name,w=b.legendType,k=b.hide;return{inactive:k,dataKey:T,type:d.iconType||w||"square",color:$E(p),value:S||T,payload:b}}),Fu(Fu(Fu({},d),th.getWithHeight(s,i)),{},{payload:f,item:s})};function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function vL(t){return t1e(t)||e1e(t)||Jge(t)||Zge()}function Zge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jge(t,e){if(t){if(typeof t=="string")return cA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cA(t,e)}}function e1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t1e(t){if(Array.isArray(t))return cA(t)}function cA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(r),!0).forEach(function(n){nh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nh(t,e,r){return e=r1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r1e(t){var e=n1e(t,"string");return $p(e)=="symbol"?e:e+""}function n1e(t,e){if($p(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ji(t,e,r){return Dt(t)||Dt(e)?r:ti(e)?ms(t,e,r):Ct(e)?e(t):r}function Xm(t,e,r,n){var i=tge(t,function(c){return ji(c,e)});if(r==="number"){var a=i.filter(function(c){return et(c)||parseFloat(c)});return a.length?[o2(a),s2(a)]:[1/0,-1/0]}var s=n?i.filter(function(c){return!Dt(c)}):i;return s.map(function(c){return ti(c)||c instanceof Date?c:""})}var i1e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var d=a.range,f=0;f<c;f++){var m=f>0?i[f-1].coordinate:i[c-1].coordinate,p=i[f].coordinate,y=f>=c-1?i[0].coordinate:i[f+1].coordinate,b=void 0;if(Us(p-m)!==Us(y-p)){var T=[];if(Us(y-p)===Us(d[1]-d[0])){b=y;var S=p+d[1]-d[0];T[0]=Math.min(S,(S+m)/2),T[1]=Math.max(S,(S+m)/2)}else{b=m;var w=y+d[1]-d[0];T[0]=Math.min(p,(w+p)/2),T[1]=Math.max(p,(w+p)/2)}var k=[Math.min(p,(b+p)/2),Math.max(p,(b+p)/2)];if(e>k[0]&&e<=k[1]||e>=T[0]&&e<=T[1]){s=i[f].index;break}}else{var M=Math.min(m,y),C=Math.max(m,y);if(e>(M+p)/2&&e<=(C+p)/2){s=i[f].index;break}}}else for(var B=0;B<c;B++)if(B===0&&e<=(n[B].coordinate+n[B+1].coordinate)/2||B>0&&B<c-1&&e>(n[B].coordinate+n[B-1].coordinate)/2&&e<=(n[B].coordinate+n[B+1].coordinate)/2||B===c-1&&e>(n[B].coordinate+n[B-1].coordinate)/2){s=n[B].index;break}return s},$E=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,s=a.stroke,c=a.fill,d;switch(i){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},a1e=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),d=0,f=c.length;d<f;d++)for(var m=a[c[d]].stackGroups,p=Object.keys(m),y=0,b=p.length;y<b;y++){var T=m[p[y]],S=T.items,w=T.cateAxisId,k=S.filter(function(A){return bl(A.type).indexOf("Bar")>=0});if(k&&k.length){var M=k[0].type.defaultProps,C=M!==void 0?Tn(Tn({},M),k[0].props):k[0].props,B=C.barSize,R=C[w];s[R]||(s[R]=[]);var I=Dt(B)?r:B;s[R].push({item:k[0],stackList:k.slice(1),barSize:Dt(I)?void 0:zs(I,n,0)})}}return s},s1e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,c=e.maxBarSize,d=s.length;if(d<1)return null;var f=zs(r,i,0,!0),m,p=[];if(s[0].barSize===+s[0].barSize){var y=!1,b=i/d,T=s.reduce(function(B,R){return B+R.barSize||0},0);T+=(d-1)*f,T>=i&&(T-=(d-1)*f,f=0),T>=i&&b>0&&(y=!0,b*=.9,T=d*b);var S=(i-T)/2>>0,w={offset:S-f,size:0};m=s.reduce(function(B,R){var I={item:R.item,position:{offset:w.offset+w.size+f,size:y?b:R.barSize}},A=[].concat(vL(B),[I]);return w=A[A.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(E){A.push({item:E,position:w})}),A},p)}else{var k=zs(n,i,0,!0);i-2*k-(d-1)*f<=0&&(f=0);var M=(i-2*k-(d-1)*f)/d;M>1&&(M>>=0);var C=c===+c?Math.min(M,c):M;m=s.reduce(function(B,R,I){var A=[].concat(vL(B),[{item:R.item,position:{offset:k+(M+f)*I+(M-C)/2,size:C}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(E){A.push({item:E,position:A[A.length-1].position})}),A},p)}return m},o1e=function(e,r,n,i){var a=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),f=NG({children:a,legendWidth:d});if(f){var m=i||{},p=m.width,y=m.height,b=f.align,T=f.verticalAlign,S=f.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&b!=="center"&&et(e[b]))return Tn(Tn({},e),{},nh({},b,e[b]+(p||0)));if((S==="horizontal"||S==="vertical"&&b==="center")&&T!=="middle"&&et(e[T]))return Tn(Tn({},e),{},nh({},T,e[T]+(y||0)))}return e},l1e=function(e,r,n){return Dt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},kG=function(e,r,n,i,a){var s=r.props.children,c=Ka(s,zg).filter(function(f){return l1e(i,a,f.props.direction)});if(c&&c.length){var d=c.map(function(f){return f.props.dataKey});return e.reduce(function(f,m){var p=ji(m,n);if(Dt(p))return f;var y=Array.isArray(p)?[o2(p),s2(p)]:[p,p],b=d.reduce(function(T,S){var w=ji(m,S,0),k=y[0]-Math.abs(Array.isArray(w)?w[0]:w),M=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(k,T[0]),Math.max(M,T[1])]},[1/0,-1/0]);return[Math.min(b[0],f[0]),Math.max(b[1],f[1])]},[1/0,-1/0])}return null},c1e=function(e,r,n,i,a){var s=r.map(function(c){return kG(e,c,n,a,i)}).filter(function(c){return!Dt(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},OG=function(e,r,n,i,a){var s=r.map(function(d){var f=d.props.dataKey;return n==="number"&&f&&kG(e,d,f,i)||Xm(e,f,n,a)});if(n==="number")return s.reduce(function(d,f){return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,f){for(var m=0,p=f.length;m<p;m++)c[f[m]]||(c[f[m]]=!0,d.push(f[m]));return d},[])},jG=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},CG=function(e,r,n,i){if(i)return e.map(function(d){return d.coordinate});var a,s,c=e.map(function(d){return d.coordinate===r&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate});return a||c.push(r),s||c.push(n),c},pl=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,f=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/d:0;if(f=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Us(c[0]-c[1])*2*f:f,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var y=a?a.indexOf(p):p;return{coordinate:i(y)+f,value:p,offset:f}});return m.filter(function(p){return!Ig(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:i(p)+f,value:p,index:y,offset:f}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+f,value:p,offset:f}}):i.domain().map(function(p,y){return{coordinate:i(p)+f,value:a?a[p]:p,index:y,offset:f}})},F_=new WeakMap,$y=function(e,r){if(typeof r!="function")return e;F_.has(e)||F_.set(e,new WeakMap);var n=F_.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},IG=function(e,r,n){var i=e.scale,a=e.type,s=e.layout,c=e.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:Rp(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:mb(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Wm(),realScaleType:"point"}:a==="category"?{scale:Rp(),realScaleType:"band"}:{scale:mb(),realScaleType:"linear"};if(N0(i)){var d="scale".concat(Hx(i));return{scale:(iL[d]||Wm)(),realScaleType:iL[d]?d:"point"}}return Ct(i)?{scale:i}:{scale:Wm(),realScaleType:"point"}},xL=1e-4,RG=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-xL,s=Math.max(i[0],i[1])+xL,c=e(r[0]),d=e(r[n-1]);(c<a||c>s||d<a||d>s)&&e.domain([r[0],r[n-1]])}},u1e=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},d1e=function(e,r){if(!r||r.length!==2||!et(r[0])||!et(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!et(e[0])||e[0]<n)&&(a[0]=n),(!et(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},h1e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,c=0;c<r;++c){var d=Ig(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=a,e[c][n][1]=a+d,a=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},f1e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var c=Ig(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=a,e[s][n][1]=a+c,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},m1e={sign:h1e,expand:t0e,none:wh,silhouette:r0e,wiggle:n0e,positive:f1e},p1e=function(e,r,n){var i=r.map(function(c){return c.props.dataKey}),a=m1e[n],s=e0e().keys(i).value(function(c,d){return+ji(c,d,0)}).order(UT).offset(a);return s(e)},g1e=function(e,r,n,i,a,s){if(!e)return null;var c=s?r.reverse():r,d={},f=c.reduce(function(p,y){var b,T=(b=y.type)!==null&&b!==void 0&&b.defaultProps?Tn(Tn({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return p;var k=T[n],M=p[k]||{hasStack:!1,stackGroups:{}};if(ti(S)){var C=M.stackGroups[S]||{numericAxisId:n,cateAxisId:i,items:[]};C.items.push(y),M.hasStack=!0,M.stackGroups[S]=C}else M.stackGroups[Rg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[y]};return Tn(Tn({},p),{},nh({},k,M))},d),m={};return Object.keys(f).reduce(function(p,y){var b=f[y];if(b.hasStack){var T={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(S,w){var k=b.stackGroups[w];return Tn(Tn({},S),{},nh({},w,{numericAxisId:n,cateAxisId:i,items:k.items,stackedData:p1e(e,k.items,a)}))},T)}return Tn(Tn({},p),{},nh({},y,b))},m)},MG=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var f=e.domain();if(!f.length)return null;var m=jge(f,a,c);return e.domain([o2(m),s2(m)]),{niceTicks:m}}if(a&&i==="number"){var p=e.domain(),y=Cge(p,a,c);return{niceTicks:y}}return null};function wL(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Dt(i[e.dataKey])){var c=Xv(r,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var d=ji(i,Dt(s)?e.dataKey:s);return Dt(d)?null:e.scale(d)}var _L=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+i:null;var d=ji(s,r.dataKey,r.domain[c]);return Dt(d)?null:r.scale(d)-a/2+i},y1e=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},v1e=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(ti(a)){var s=r[a];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},b1e=function(e){return e.reduce(function(r,n){return[o2(n.concat([r[0]]).filter(et)),s2(n.concat([r[1]]).filter(et))]},[1/0,-1/0])},PG=function(e,r,n){return Object.keys(e).reduce(function(i,a){var s=e[a],c=s.stackedData,d=c.reduce(function(f,m){var p=b1e(m.slice(r,n+1));return[Math.min(f[0],p[0]),Math.max(f[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},SL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uA=function(e,r,n){if(Ct(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(et(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(SL.test(e[0])){var a=+SL.exec(e[0])[1];i[0]=r[0]-a}else Ct(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(et(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(TL.test(e[1])){var s=+TL.exec(e[1])[1];i[1]=r[1]+s}else Ct(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},wb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=mE(r,function(p){return p.coordinate}),s=1/0,c=1,d=a.length;c<d;c++){var f=a[c],m=a[c-1];s=Math.min((f.coordinate||0)-(m.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},AL=function(e,r,n){return!e||!e.length||Ug(e,ms(n,"type.defaultProps.domain"))?r:e},DG=function(e,r){var n=e.type.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,f=n.chartType,m=n.hide;return Tn(Tn({},xt(e,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:$E(e),value:ji(r,i),type:d,payload:r,chartType:f,hide:m})};function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function EL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(r),!0).forEach(function(n){LG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LG(t,e,r){return e=x1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x1e(t){var e=w1e(t,"string");return Vp(e)=="symbol"?e:e+""}function w1e(t,e){if(Vp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _1e(t,e){return E1e(t)||A1e(t,e)||T1e(t,e)||S1e()}function S1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1e(t,e){if(t){if(typeof t=="string")return NL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NL(t,e)}}function NL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function E1e(t){if(Array.isArray(t))return t}var _b=Math.PI/180,N1e=function(e){return e*180/Math.PI},Pr=function(e,r,n,i){return{x:e+Math.cos(-_b*i)*n,y:r+Math.sin(-_b*i)*n}},k1e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},O1e=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.startAngle,f=e.endAngle,m=zs(e.cx,s,s/2),p=zs(e.cy,c,c/2),y=k1e(s,c,n),b=zs(e.innerRadius,y,0),T=zs(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,k){var M=r[k],C=M.domain,B=M.reversed,R;if(Dt(M.range))i==="angleAxis"?R=[d,f]:i==="radiusAxis"&&(R=[b,T]),B&&(R=[R[1],R[0]]);else{R=M.range;var I=R,A=_1e(I,2);d=A[0],f=A[1]}var E=IG(M,a),O=E.realScaleType,U=E.scale;U.domain(C).range(R),RG(U);var P=MG(U,il(il({},M),{},{realScaleType:O})),V=il(il(il({},M),P),{},{range:R,radius:T,realScaleType:O,scale:U,cx:m,cy:p,innerRadius:b,outerRadius:T,startAngle:d,endAngle:f});return il(il({},w),{},LG({},k,V))},{})},j1e=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},C1e=function(e,r){var n=e.x,i=e.y,a=r.cx,s=r.cy,c=j1e({x:n,y:i},{x:a,y:s});if(c<=0)return{radius:c};var d=(n-a)/c,f=Math.acos(d);return i>s&&(f=2*Math.PI-f),{radius:c,angle:N1e(f),angleInRadian:f}},I1e=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},R1e=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),c=Math.min(a,s);return e+c*360},kL=function(e,r){var n=e.x,i=e.y,a=C1e({x:n,y:i},r),s=a.radius,c=a.angle,d=r.innerRadius,f=r.outerRadius;if(s<d||s>f)return!1;if(s===0)return!0;var m=I1e(r),p=m.startAngle,y=m.endAngle,b=c,T;if(p<=y){for(;b>y;)b-=360;for(;b<p;)b+=360;T=b>=p&&b<=y}else{for(;b>p;)b-=360;for(;b<y;)b+=360;T=b>=y&&b<=p}return T?il(il({},r),{},{radius:s,angle:R1e(b,r)}):null},BG=function(e){return!F.isValidElement(e)&&!Ct(e)&&typeof e!="boolean"?e.className:""};function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}var M1e=["offset"];function P1e(t){return U1e(t)||B1e(t)||L1e(t)||D1e()}function D1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L1e(t,e){if(t){if(typeof t=="string")return dA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dA(t,e)}}function B1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U1e(t){if(Array.isArray(t))return dA(t)}function dA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z1e(t,e){if(t==null)return{};var r=$1e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $1e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function OL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(r),!0).forEach(function(n){V1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V1e(t,e,r){return e=F1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F1e(t){var e=q1e(t,"string");return Fp(e)=="symbol"?e:e+""}function q1e(t,e){if(Fp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(this,arguments)}var H1e=function(e){var r=e.value,n=e.formatter,i=Dt(e.children)?r:e.children;return Ct(n)?n(i):i},G1e=function(e,r){var n=Us(r-e),i=Math.min(Math.abs(r-e),360);return n*i},K1e=function(e,r,n){var i=e.position,a=e.viewBox,s=e.offset,c=e.className,d=a,f=d.cx,m=d.cy,p=d.innerRadius,y=d.outerRadius,b=d.startAngle,T=d.endAngle,S=d.clockWise,w=(p+y)/2,k=G1e(b,T),M=k>=0?1:-1,C,B;i==="insideStart"?(C=b+M*s,B=S):i==="insideEnd"?(C=T-M*s,B=!S):i==="end"&&(C=T+M*s,B=S),B=k<=0?B:!B;var R=Pr(f,m,w,C),I=Pr(f,m,w,C+(B?1:-1)*359),A="M".concat(R.x,",").concat(R.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(B?0:1,`,
    `).concat(I.x,",").concat(I.y),E=Dt(e.id)?Rg("recharts-radial-line-"):e.id;return ne.createElement("text",qp({},n,{dominantBaseline:"central",className:zt("recharts-radial-bar-label",c)}),ne.createElement("defs",null,ne.createElement("path",{id:E,d:A})),ne.createElement("textPath",{xlinkHref:"#".concat(E)},r))},W1e=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,s=a.cx,c=a.cy,d=a.innerRadius,f=a.outerRadius,m=a.startAngle,p=a.endAngle,y=(m+p)/2;if(i==="outside"){var b=Pr(s,c,f+n,y),T=b.x,S=b.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+f)/2,k=Pr(s,c,w,y),M=k.x,C=k.y;return{x:M,y:C,textAnchor:"middle",verticalAnchor:"middle"}},X1e=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=r,c=s.x,d=s.y,f=s.width,m=s.height,p=m>=0?1:-1,y=p*i,b=p>0?"end":"start",T=p>0?"start":"end",S=f>=0?1:-1,w=S*i,k=S>0?"end":"start",M=S>0?"start":"end";if(a==="top"){var C={x:c+f/2,y:d-p*i,textAnchor:"middle",verticalAnchor:b};return ei(ei({},C),n?{height:Math.max(d-n.y,0),width:f}:{})}if(a==="bottom"){var B={x:c+f/2,y:d+m+y,textAnchor:"middle",verticalAnchor:T};return ei(ei({},B),n?{height:Math.max(n.y+n.height-(d+m),0),width:f}:{})}if(a==="left"){var R={x:c-w,y:d+m/2,textAnchor:k,verticalAnchor:"middle"};return ei(ei({},R),n?{width:Math.max(R.x-n.x,0),height:m}:{})}if(a==="right"){var I={x:c+f+w,y:d+m/2,textAnchor:M,verticalAnchor:"middle"};return ei(ei({},I),n?{width:Math.max(n.x+n.width-I.x,0),height:m}:{})}var A=n?{width:f,height:m}:{};return a==="insideLeft"?ei({x:c+w,y:d+m/2,textAnchor:M,verticalAnchor:"middle"},A):a==="insideRight"?ei({x:c+f-w,y:d+m/2,textAnchor:k,verticalAnchor:"middle"},A):a==="insideTop"?ei({x:c+f/2,y:d+y,textAnchor:"middle",verticalAnchor:T},A):a==="insideBottom"?ei({x:c+f/2,y:d+m-y,textAnchor:"middle",verticalAnchor:b},A):a==="insideTopLeft"?ei({x:c+w,y:d+y,textAnchor:M,verticalAnchor:T},A):a==="insideTopRight"?ei({x:c+f-w,y:d+y,textAnchor:k,verticalAnchor:T},A):a==="insideBottomLeft"?ei({x:c+w,y:d+m-y,textAnchor:M,verticalAnchor:b},A):a==="insideBottomRight"?ei({x:c+f-w,y:d+m-y,textAnchor:k,verticalAnchor:b},A):af(a)&&(et(a.x)||r0(a.x))&&(et(a.y)||r0(a.y))?ei({x:c+zs(a.x,f),y:d+zs(a.y,m),textAnchor:"end",verticalAnchor:"end"},A):ei({x:c+f/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Q1e=function(e){return"cx"in e&&et(e.cx)};function Ni(t){var e=t.offset,r=e===void 0?5:e,n=z1e(t,M1e),i=ei({offset:r},n),a=i.viewBox,s=i.position,c=i.value,d=i.children,f=i.content,m=i.className,p=m===void 0?"":m,y=i.textBreakAll;if(!a||Dt(c)&&Dt(d)&&!F.isValidElement(f)&&!Ct(f))return null;if(F.isValidElement(f))return F.cloneElement(f,i);var b;if(Ct(f)){if(b=F.createElement(f,i),F.isValidElement(b))return b}else b=H1e(i);var T=Q1e(a),S=xt(i,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return K1e(i,b,S);var w=T?W1e(i):X1e(i);return ne.createElement(Eh,qp({className:zt("recharts-label",p)},S,w,{breakAll:y}),b)}Ni.displayName="Label";var UG=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,f=e.innerRadius,m=e.outerRadius,p=e.x,y=e.y,b=e.top,T=e.left,S=e.width,w=e.height,k=e.clockWise,M=e.labelViewBox;if(M)return M;if(et(S)&&et(w)){if(et(p)&&et(y))return{x:p,y,width:S,height:w};if(et(b)&&et(T))return{x:b,y:T,width:S,height:w}}return et(p)&&et(y)?{x:p,y,width:0,height:0}:et(r)&&et(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:f||0,outerRadius:m||d||c||0,clockWise:k}:e.viewBox?e.viewBox:{}},Y1e=function(e,r){return e?e===!0?ne.createElement(Ni,{key:"label-implicit",viewBox:r}):ti(e)?ne.createElement(Ni,{key:"label-implicit",viewBox:r,value:e}):F.isValidElement(e)?e.type===Ni?F.cloneElement(e,{key:"label-implicit",viewBox:r}):ne.createElement(Ni,{key:"label-implicit",content:e,viewBox:r}):Ct(e)?ne.createElement(Ni,{key:"label-implicit",content:e,viewBox:r}):af(e)?ne.createElement(Ni,qp({viewBox:r},e,{key:"label-implicit"})):null:null},Z1e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=UG(e),s=Ka(i,Ni).map(function(d,f){return F.cloneElement(d,{viewBox:r||a,key:"label-".concat(f)})});if(!n)return s;var c=Y1e(e.label,r||a);return[c].concat(P1e(s))};Ni.parseViewBox=UG;Ni.renderCallByParent=Z1e;var q_,jL;function J1e(){if(jL)return q_;jL=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return q_=t,q_}var eye=J1e();const zG=vr(eye);function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}var tye=["valueAccessor"],rye=["data","dataKey","clockWise","id","textBreakAll"];function nye(t){return oye(t)||sye(t)||aye(t)||iye()}function iye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aye(t,e){if(t){if(typeof t=="string")return hA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hA(t,e)}}function sye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oye(t){if(Array.isArray(t))return hA(t)}function hA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sb.apply(this,arguments)}function CL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(r),!0).forEach(function(n){lye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lye(t,e,r){return e=cye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cye(t){var e=uye(t,"string");return Hp(e)=="symbol"?e:e+""}function uye(t,e){if(Hp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RL(t,e){if(t==null)return{};var r=dye(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var hye=function(e){return Array.isArray(e.value)?zG(e.value):e.value};function _l(t){var e=t.valueAccessor,r=e===void 0?hye:e,n=RL(t,tye),i=n.data,a=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,f=RL(n,rye);return!i||!i.length?null:ne.createElement(fr,{className:"recharts-label-list"},i.map(function(m,p){var y=Dt(a)?r(m,p):ji(m&&m.payload,a),b=Dt(c)?{}:{id:"".concat(c,"-").concat(p)};return ne.createElement(Ni,Sb({},xt(m,!0),f,b,{parentViewBox:m.parentViewBox,value:y,textBreakAll:d,viewBox:Ni.parseViewBox(Dt(s)?m:IL(IL({},m),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}_l.displayName="LabelList";function fye(t,e){return t?t===!0?ne.createElement(_l,{key:"labelList-implicit",data:e}):ne.isValidElement(t)||Ct(t)?ne.createElement(_l,{key:"labelList-implicit",data:e,content:t}):af(t)?ne.createElement(_l,Sb({data:e},t,{key:"labelList-implicit"})):null:null}function mye(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Ka(n,_l).map(function(s,c){return F.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return i;var a=fye(t.label,e);return[a].concat(nye(i))}_l.renderCallByParent=mye;function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fA.apply(this,arguments)}function ML(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function PL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(r),!0).forEach(function(n){pye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pye(t,e,r){return e=gye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gye(t){var e=yye(t,"string");return Gp(e)=="symbol"?e:e+""}function yye(t,e){if(Gp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vye=function(e,r){var n=Us(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Vy=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,f=e.cornerIsExternal,m=d*(c?1:-1)+i,p=Math.asin(d/m)/_b,y=f?a:a+s*p,b=Pr(r,n,m,y),T=Pr(r,n,i,y),S=f?a-s*p:a,w=Pr(r,n,m*Math.cos(p*_b),S);return{center:b,circleTangency:T,lineTangency:w,theta:p}},$G=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,c=e.endAngle,d=vye(s,c),f=s+d,m=Pr(r,n,a,s),p=Pr(r,n,a,f),y="M ".concat(m.x,",").concat(m.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var b=Pr(r,n,i,s),T=Pr(r,n,i,f);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=f),`,
            `).concat(b.x,",").concat(b.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},bye=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,f=e.startAngle,m=e.endAngle,p=Us(m-f),y=Vy({cx:r,cy:n,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),b=y.circleTangency,T=y.lineTangency,S=y.theta,w=Vy({cx:r,cy:n,radius:a,angle:m,sign:-p,cornerRadius:s,cornerIsExternal:d}),k=w.circleTangency,M=w.lineTangency,C=w.theta,B=d?Math.abs(f-m):Math.abs(f-m)-S-C;if(B<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):$G({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:m});var R="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(B>180),",").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
  `);if(i>0){var I=Vy({cx:r,cy:n,radius:i,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),A=I.circleTangency,E=I.lineTangency,O=I.theta,U=Vy({cx:r,cy:n,radius:i,angle:m,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),P=U.circleTangency,V=U.lineTangency,z=U.theta,Q=d?Math.abs(f-m):Math.abs(f-m)-O-z;if(Q<0&&s===0)return"".concat(R,"L").concat(r,",").concat(n,"Z");R+="L".concat(V.x,",").concat(V.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Q>180),",").concat(+(p>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(E.x,",").concat(E.y,"Z")}else R+="L".concat(r,",").concat(n,"Z");return R},xye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VG=function(e){var r=PL(PL({},xye),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,f=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,y=r.className;if(s<a||m===p)return null;var b=zt("recharts-sector",y),T=s-a,S=zs(c,T,0,!0),w;return S>0&&Math.abs(m-p)<360?w=bye({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:p}):w=$G({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:m,endAngle:p}),ne.createElement("path",fA({},xt(r,!0),{className:b,d:w,role:"img"}))};function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mA.apply(this,arguments)}function DL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(r),!0).forEach(function(n){wye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wye(t,e,r){return e=_ye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _ye(t){var e=Sye(t,"string");return Kp(e)=="symbol"?e:e+""}function Sye(t,e){if(Kp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BL={curveBasisClosed:Fue,curveBasisOpen:que,curveBasis:Vue,curveBumpX:kue,curveBumpY:Oue,curveLinearClosed:Hue,curveLinear:Kx,curveMonotoneX:Gue,curveMonotoneY:Kue,curveNatural:Wue,curveStep:Xue,curveStepAfter:Yue,curveStepBefore:Que},Fy=function(e){return e.x===+e.x&&e.y===+e.y},xm=function(e){return e.x},wm=function(e){return e.y},Tye=function(e,r){if(Ct(e))return e;var n="curve".concat(Hx(e));return(n==="curveMonotone"||n==="curveBump")&&r?BL["".concat(n).concat(r==="vertical"?"Y":"X")]:BL[n]||Kx},Aye=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,s=e.baseLine,c=e.layout,d=e.connectNulls,f=d===void 0?!1:d,m=Tye(n,c),p=f?a.filter(function(S){return Fy(S)}):a,y;if(Array.isArray(s)){var b=f?s.filter(function(S){return Fy(S)}):s,T=p.map(function(S,w){return LL(LL({},S),{},{base:b[w]})});return c==="vertical"?y=My().y(wm).x1(xm).x0(function(S){return S.base.x}):y=My().x(xm).y1(wm).y0(function(S){return S.base.y}),y.defined(Fy).curve(m),y(T)}return c==="vertical"&&et(s)?y=My().y(wm).x1(xm).x0(s):et(s)?y=My().x(xm).y1(wm).y0(s):y=zq().x(xm).y(wm),y.defined(Fy).curve(m),y(p)},pA=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Aye(e):i;return F.createElement("path",mA({},xt(e,!1),Qv(e),{className:zt("recharts-curve",r),d:s,ref:a}))},H_={exports:{}},G_,UL;function Eye(){if(UL)return G_;UL=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return G_=t,G_}var K_,zL;function Nye(){if(zL)return K_;zL=1;var t=Eye();function e(){}function r(){}return r.resetWarningCache=e,K_=function(){function n(s,c,d,f,m,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},K_}var $L;function kye(){return $L||($L=1,H_.exports=Nye()()),H_.exports}var Oye=kye();const _r=vr(Oye),{getOwnPropertyNames:jye,getOwnPropertySymbols:Cye}=Object,{hasOwnProperty:Iye}=Object.prototype;function W_(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function qy(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:a}=i,s=a.get(r),c=a.get(n);if(s&&c)return s===n&&c===r;a.set(r,n),a.set(n,r);const d=t(r,n,i);return a.delete(r),a.delete(n),d}}function Rye(t){return t!=null?t[Symbol.toStringTag]:void 0}function VL(t){return jye(t).concat(Cye(t))}const Mye=Object.hasOwn||((t,e)=>Iye.call(t,e));function q0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Pye="__v",Dye="__o",Lye="_owner",{getOwnPropertyDescriptor:FL,keys:qL}=Object;function Bye(t,e){return t.byteLength===e.byteLength&&Tb(new Uint8Array(t),new Uint8Array(e))}function Uye(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function zye(t,e){return t.byteLength===e.byteLength&&Tb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function $ye(t,e){return q0(t.getTime(),e.getTime())}function Vye(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Fye(t,e){return t===e}function HL(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.entries();let s,c,d=0;for(;(s=a.next())&&!s.done;){const f=e.entries();let m=!1,p=0;for(;(c=f.next())&&!c.done;){if(i[p]){p++;continue}const y=s.value,b=c.value;if(r.equals(y[0],b[0],d,p,t,e,r)&&r.equals(y[1],b[1],y[0],b[0],t,e,r)){m=i[p]=!0;break}p++}if(!m)return!1;d++}return!0}const qye=q0;function Hye(t,e,r){const n=qL(t);let i=n.length;if(qL(e).length!==i)return!1;for(;i-- >0;)if(!FG(t,e,r,n[i]))return!1;return!0}function _m(t,e,r){const n=VL(t);let i=n.length;if(VL(e).length!==i)return!1;let a,s,c;for(;i-- >0;)if(a=n[i],!FG(t,e,r,a)||(s=FL(t,a),c=FL(e,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Gye(t,e){return q0(t.valueOf(),e.valueOf())}function Kye(t,e){return t.source===e.source&&t.flags===e.flags}function GL(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.values();let s,c;for(;(s=a.next())&&!s.done;){const d=e.values();let f=!1,m=0;for(;(c=d.next())&&!c.done;){if(!i[m]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){f=i[m]=!0;break}m++}if(!f)return!1}return!0}function Tb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Wye(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function FG(t,e,r,n){return(n===Lye||n===Dye||n===Pye)&&(t.$$typeof||e.$$typeof)?!0:Mye(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Xye="[object ArrayBuffer]",Qye="[object Arguments]",Yye="[object Boolean]",Zye="[object DataView]",Jye="[object Date]",eve="[object Error]",tve="[object Map]",rve="[object Number]",nve="[object Object]",ive="[object RegExp]",ave="[object Set]",sve="[object String]",ove={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lve="[object URL]",cve=Object.prototype.toString;function uve({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:T}){return function(w,k,M){if(w===k)return!0;if(w==null||k==null)return!1;const C=typeof w;if(C!==typeof k)return!1;if(C!=="object")return C==="number"?c(w,k,M):C==="function"?a(w,k,M):!1;const B=w.constructor;if(B!==k.constructor)return!1;if(B===Object)return d(w,k,M);if(Array.isArray(w))return e(w,k,M);if(B===Date)return n(w,k,M);if(B===RegExp)return m(w,k,M);if(B===Map)return s(w,k,M);if(B===Set)return p(w,k,M);const R=cve.call(w);if(R===Jye)return n(w,k,M);if(R===ive)return m(w,k,M);if(R===tve)return s(w,k,M);if(R===ave)return p(w,k,M);if(R===nve)return typeof w.then!="function"&&typeof k.then!="function"&&d(w,k,M);if(R===lve)return b(w,k,M);if(R===eve)return i(w,k,M);if(R===Qye)return d(w,k,M);if(ove[R])return y(w,k,M);if(R===Xye)return t(w,k,M);if(R===Zye)return r(w,k,M);if(R===Yye||R===rve||R===sve)return f(w,k,M);if(T){let I=T[R];if(!I){const A=Rye(w);A&&(I=T[A])}if(I)return I(w,k,M)}return!1}}function dve({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Bye,areArraysEqual:r?_m:Uye,areDataViewsEqual:zye,areDatesEqual:$ye,areErrorsEqual:Vye,areFunctionsEqual:Fye,areMapsEqual:r?W_(HL,_m):HL,areNumbersEqual:qye,areObjectsEqual:r?_m:Hye,arePrimitiveWrappersEqual:Gye,areRegExpsEqual:Kye,areSetsEqual:r?W_(GL,_m):GL,areTypedArraysEqual:r?W_(Tb,_m):Tb,areUrlsEqual:Wye,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=qy(n.areArraysEqual),a=qy(n.areMapsEqual),s=qy(n.areObjectsEqual),c=qy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return n}function hve(t){return function(e,r,n,i,a,s,c){return t(e,r,c)}}function fve({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(c,d){const{cache:f=t?new WeakMap:void 0,meta:m}=r();return e(c,d,{cache:f,equals:n,meta:m,strict:i})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(c,d){return e(c,d,a)}}const mve=du();du({strict:!0});du({circular:!0});du({circular:!0,strict:!0});du({createInternalComparator:()=>q0});du({strict:!0,createInternalComparator:()=>q0});du({circular:!0,createInternalComparator:()=>q0});du({circular:!0,createInternalComparator:()=>q0,strict:!0});function du(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,a=dve(t),s=uve(a),c=r?r(s):hve(s);return fve({circular:e,comparator:s,createState:n,equals:c,strict:i})}function pve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function KL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):pve(i)};requestAnimationFrame(n)}function gA(t){"@babel/helpers - typeof";return gA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gA(t)}function gve(t){return xve(t)||bve(t)||vve(t)||yve()}function yve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vve(t,e){if(t){if(typeof t=="string")return WL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WL(t,e)}}function WL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xve(t){if(Array.isArray(t))return t}function wve(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,c=gve(s),d=c[0],f=c.slice(1);if(typeof d=="number"){KL(i.bind(null,f),d);return}i(d),KL(i.bind(null,f));return}gA(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function XL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XL(Object(r),!0).forEach(function(n){qG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qG(t,e,r){return e=_ve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _ve(t){var e=Sve(t,"string");return Wp(e)==="symbol"?e:String(e)}function Sve(t,e){if(Wp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tve=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},Ave=function(e){return e},Eve=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Qm=function(e,r){return Object.keys(r).reduce(function(n,i){return QL(QL({},n),{},qG({},i,e(i,r[i])))},{})},YL=function(e,r,n){return e.map(function(i){return"".concat(Eve(i)," ").concat(r,"ms ").concat(n)}).join(",")};function Nve(t,e){return jve(t)||Ove(t,e)||HG(t,e)||kve()}function kve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ove(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function jve(t){if(Array.isArray(t))return t}function Cve(t){return Mve(t)||Rve(t)||HG(t)||Ive()}function Ive(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HG(t,e){if(t){if(typeof t=="string")return yA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yA(t,e)}}function Rve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mve(t){if(Array.isArray(t))return yA(t)}function yA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ab=1e-4,GG=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},KG=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},ZL=function(e,r){return function(n){var i=GG(e,r);return KG(i,n)}},Pve=function(e,r){return function(n){var i=GG(e,r),a=[].concat(Cve(i.map(function(s,c){return s*c}).slice(1)),[0]);return KG(a,n)}},JL=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var f=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),m=Nve(f,4);i=m[0],a=m[1],s=m[2],c=m[3]}}}var p=ZL(i,s),y=ZL(a,c),b=Pve(i,s),T=function(k){return k>1?1:k<0?0:k},S=function(k){for(var M=k>1?1:k,C=M,B=0;B<8;++B){var R=p(C)-M,I=b(C);if(Math.abs(R-M)<Ab||I<Ab)return y(C);C=T(C-R/I)}return y(C)};return S.isStepper=!1,S},Dve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,s=e.dt,c=s===void 0?17:s,d=function(m,p,y){var b=-(m-p)*n,T=y*a,S=y+(b-T)*c/1e3,w=y*c/1e3+m;return Math.abs(w-p)<Ab&&Math.abs(S)<Ab?[p,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},Lve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JL(i);case"spring":return Dve();default:if(i.split("(")[0]==="cubic-bezier")return JL(i)}return typeof i=="function"?i:null};function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function eB(t){return zve(t)||Uve(t)||WG(t)||Bve()}function Bve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zve(t){if(Array.isArray(t))return bA(t)}function tB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(r),!0).forEach(function(n){vA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vA(t,e,r){return e=$ve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ve(t){var e=Vve(t,"string");return Xp(e)==="symbol"?e:String(e)}function Vve(t,e){if(Xp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fve(t,e){return Gve(t)||Hve(t,e)||WG(t,e)||qve()}function qve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WG(t,e){if(t){if(typeof t=="string")return bA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bA(t,e)}}function bA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Gve(t){if(Array.isArray(t))return t}var Eb=function(e,r,n){return e+(r-e)*n},xA=function(e){var r=e.from,n=e.to;return r!==n},Kve=function t(e,r,n){var i=Qm(function(a,s){if(xA(s)){var c=e(s.from,s.to,s.velocity),d=Fve(c,2),f=d[0],m=d[1];return Ti(Ti({},s),{},{from:f,velocity:m})}return s},r);return n<1?Qm(function(a,s){return xA(s)?Ti(Ti({},s),{},{velocity:Eb(s.velocity,i[a].velocity,n),from:Eb(s.from,i[a].from,n)}):s},r):t(e,i,n-1)};const Wve=(function(t,e,r,n,i){var a=Tve(t,e),s=a.reduce(function(w,k){return Ti(Ti({},w),{},vA({},k,[t[k],e[k]]))},{}),c=a.reduce(function(w,k){return Ti(Ti({},w),{},vA({},k,{from:t[k],velocity:0,to:e[k]}))},{}),d=-1,f,m,p=function(){return null},y=function(){return Qm(function(k,M){return M.from},c)},b=function(){return!Object.values(c).filter(xA).length},T=function(k){f||(f=k);var M=k-f,C=M/r.dt;c=Kve(r,c,C),i(Ti(Ti(Ti({},t),e),y())),f=k,b()||(d=requestAnimationFrame(p))},S=function(k){m||(m=k);var M=(k-m)/n,C=Qm(function(R,I){return Eb.apply(void 0,eB(I).concat([r(M)]))},s);if(i(Ti(Ti(Ti({},t),e),C)),M<1)d=requestAnimationFrame(p);else{var B=Qm(function(R,I){return Eb.apply(void 0,eB(I).concat([r(1)]))},s);i(Ti(Ti(Ti({},t),e),B))}};return p=r.isStepper?T:S,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}var Xve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Qve(t,e){if(t==null)return{};var r=Yve(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yve(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function X_(t){return tbe(t)||ebe(t)||Jve(t)||Zve()}function Zve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jve(t,e){if(t){if(typeof t=="string")return wA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wA(t,e)}}function ebe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tbe(t){if(Array.isArray(t))return wA(t)}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ms(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(r),!0).forEach(function(n){Pm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pm(t,e,r){return e=XG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nbe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XG(n.key),n)}}function ibe(t,e,r){return e&&nbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XG(t){var e=abe(t,"string");return Ch(e)==="symbol"?e:String(e)}function abe(t,e){if(Ch(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ch(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_A(t,e)}function _A(t,e){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_A(t,e)}function obe(t){var e=lbe();return function(){var n=Nb(t),i;if(e){var a=Nb(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return SA(this,i)}}function SA(t,e){if(e&&(Ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TA(t)}function TA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(t)}var Ao=(function(t){sbe(r,t);var e=obe(r);function r(n,i){var a;rbe(this,r),a=e.call(this,n,i);var s=a.props,c=s.isActive,d=s.attributeName,f=s.from,m=s.to,p=s.steps,y=s.children,b=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(TA(a)),a.changeStyle=a.changeStyle.bind(TA(a)),!c||b<=0)return a.state={style:{}},typeof y=="function"&&(a.state={style:m}),SA(a);if(p&&p.length)a.state={style:p[0].style};else if(f){if(typeof y=="function")return a.state={style:f},SA(a);a.state={style:d?Pm({},d,f):f}}else a.state={style:{}};return a}return ibe(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,d=a.attributeName,f=a.shouldReAnimate,m=a.to,p=a.from,y=this.state.style;if(c){if(!s){var b={style:d?Pm({},d,m):m};this.state&&y&&(d&&y[d]!==m||!d&&y!==m)&&this.setState(b);return}if(!(mve(i.to,m)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||f?p:i.to;if(this.state&&y){var w={style:d?Pm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(Ms(Ms({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,d=i.duration,f=i.easing,m=i.begin,p=i.onAnimationEnd,y=i.onAnimationStart,b=Wve(s,c,Lve(f),d,this.changeStyle),T=function(){a.stopJSAnimation=b()};this.manager.start([y,m,T,d,p])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,d=i.onAnimationStart,f=s[0],m=f.style,p=f.duration,y=p===void 0?0:p,b=function(S,w,k){if(k===0)return S;var M=w.duration,C=w.easing,B=C===void 0?"ease":C,R=w.style,I=w.properties,A=w.onAnimationEnd,E=k>0?s[k-1]:w,O=I||Object.keys(R);if(typeof B=="function"||B==="spring")return[].concat(X_(S),[a.runJSAnimation.bind(a,{from:E.style,to:R,duration:M,easing:B}),M]);var U=YL(O,M,B),P=Ms(Ms(Ms({},E.style),R),{},{transition:U});return[].concat(X_(S),[P,M,A]).filter(Ave)};return this.manager.start([d].concat(X_(s.reduce(b,[m,Math.max(y,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=wve());var a=i.begin,s=i.duration,c=i.attributeName,d=i.to,f=i.easing,m=i.onAnimationStart,p=i.onAnimationEnd,y=i.steps,b=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof f=="function"||typeof b=="function"||f==="spring"){this.runJSAnimation(i);return}if(y.length>1){this.runStepAnimation(i);return}var S=c?Pm({},c,d):d,w=YL(Object.keys(S),s,f);T.start([m,a,Ms(Ms({},S),{},{transition:w}),s,p])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var d=Qve(i,Xve),f=F.Children.count(a),m=this.state.style;if(typeof a=="function")return a(m);if(!c||f===0||s<=0)return a;var p=function(b){var T=b.props,S=T.style,w=S===void 0?{}:S,k=T.className,M=F.cloneElement(b,Ms(Ms({},d),{},{style:Ms(Ms({},w),m),className:k}));return M};return f===1?p(F.Children.only(a)):ne.createElement("div",null,F.Children.map(a,function(y){return p(y)}))}}]),r})(F.PureComponent);Ao.displayName="Animate";Ao.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ao.propTypes={from:_r.oneOfType([_r.object,_r.string]),to:_r.oneOfType([_r.object,_r.string]),attributeName:_r.string,duration:_r.number,begin:_r.number,easing:_r.oneOfType([_r.string,_r.func]),steps:_r.arrayOf(_r.shape({duration:_r.number.isRequired,style:_r.object.isRequired,easing:_r.oneOfType([_r.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_r.func]),properties:_r.arrayOf("string"),onAnimationEnd:_r.func})),children:_r.oneOfType([_r.node,_r.func]),isActive:_r.bool,canBegin:_r.bool,onAnimationEnd:_r.func,shouldReAnimate:_r.bool,onAnimationStart:_r.func,onAnimationReStart:_r.func};function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kb.apply(this,arguments)}function cbe(t,e){return fbe(t)||hbe(t,e)||dbe(t,e)||ube()}function ube(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dbe(t,e){if(t){if(typeof t=="string")return nB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nB(t,e)}}function nB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function fbe(t){if(Array.isArray(t))return t}function iB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iB(Object(r),!0).forEach(function(n){mbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mbe(t,e,r){return e=pbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pbe(t){var e=gbe(t,"string");return Qp(e)=="symbol"?e:e+""}function gbe(t,e){if(Qp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sB=function(e,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),c=i>=0?1:-1,d=n>=0?1:-1,f=i>=0&&n>=0||i<0&&n<0?1:0,m;if(s>0&&a instanceof Array){for(var p=[0,0,0,0],y=0,b=4;y<b;y++)p[y]=a[y]>s?s:a[y];m="M".concat(e,",").concat(r+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(r+c*p[1])),m+="L ".concat(e+n,",").concat(r+i-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+n-d*p[2],",").concat(r+i)),m+="L ".concat(e+d*p[3],",").concat(r+i),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(r+i-c*p[3])),m+="Z"}else if(s>0&&a===+a&&a>0){var T=Math.min(s,a);m="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+i-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n-d*T,",").concat(r+i,`
            L `).concat(e+d*T,",").concat(r+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e,",").concat(r+i-c*T," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return m},ybe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var f=Math.min(a,a+c),m=Math.max(a,a+c),p=Math.min(s,s+d),y=Math.max(s,s+d);return n>=f&&n<=m&&i>=p&&i<=y}return!1},vbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VE=function(e){var r=aB(aB({},vbe),e),n=F.useRef(),i=F.useState(-1),a=cbe(i,2),s=a[0],c=a[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&c(B)}catch{}},[]);var d=r.x,f=r.y,m=r.width,p=r.height,y=r.radius,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,k=r.isAnimationActive,M=r.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||m===0||p===0)return null;var C=zt("recharts-rectangle",b);return M?ne.createElement(Ao,{canBegin:s>0,from:{width:m,height:p,x:d,y:f},to:{width:m,height:p,x:d,y:f},duration:S,animationEasing:T,isActive:M},function(B){var R=B.width,I=B.height,A=B.x,E=B.y;return ne.createElement(Ao,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:k,easing:T},ne.createElement("path",kb({},xt(r,!0),{className:C,d:sB(A,E,R,I,y),ref:n})))}):ne.createElement("path",kb({},xt(r,!0),{className:C,d:sB(d,f,m,p,y)}))},bbe=["points","className","baseLinePoints","connectNulls"];function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qd.apply(this,arguments)}function xbe(t,e){if(t==null)return{};var r=wbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function oB(t){return Abe(t)||Tbe(t)||Sbe(t)||_be()}function _be(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sbe(t,e){if(t){if(typeof t=="string")return AA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(t,e)}}function Tbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Abe(t){if(Array.isArray(t))return AA(t)}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lB=function(e){return e&&e.x===+e.x&&e.y===+e.y},Ebe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){lB(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),lB(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Ym=function(e,r){var n=Ebe(e);r&&(n=[n.reduce(function(a,s){return[].concat(oB(a),oB(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},Nbe=function(e,r,n){var i=Ym(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Ym(r.reverse(),n).slice(1))},QG=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=xbe(e,bbe);if(!r||!r.length)return null;var c=zt("recharts-polygon",n);if(i&&i.length){var d=s.stroke&&s.stroke!=="none",f=Nbe(r,i,a);return ne.createElement("g",{className:c},ne.createElement("path",qd({},xt(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),d?ne.createElement("path",qd({},xt(s,!0),{fill:"none",d:Ym(r,a)})):null,d?ne.createElement("path",qd({},xt(s,!0),{fill:"none",d:Ym(i,a)})):null)}var m=Ym(r,a);return ne.createElement("path",qd({},xt(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:c,d:m}))};function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EA.apply(this,arguments)}var u2=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=zt("recharts-dot",a);return r===+r&&n===+n&&i===+i?F.createElement("circle",EA({},xt(e,!1),Qv(e),{className:s,cx:r,cy:n,r:i})):null};function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}var kbe=["x","y","top","left","width","height","className"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(this,arguments)}function cB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Obe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(r),!0).forEach(function(n){jbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jbe(t,e,r){return e=Cbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cbe(t){var e=Ibe(t,"string");return Yp(e)=="symbol"?e:e+""}function Ibe(t,e){if(Yp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rbe(t,e){if(t==null)return{};var r=Mbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Pbe=function(e,r,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},Dbe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.top,c=s===void 0?0:s,d=e.left,f=d===void 0?0:d,m=e.width,p=m===void 0?0:m,y=e.height,b=y===void 0?0:y,T=e.className,S=Rbe(e,kbe),w=Obe({x:n,y:a,top:c,left:f,width:p,height:b},S);return!et(n)||!et(a)||!et(p)||!et(b)||!et(c)||!et(f)?null:ne.createElement("path",NA({},xt(w,!0),{className:zt("recharts-cross",T),d:Pbe(n,a,p,b,c,f)}))},Lbe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function Bbe(t,e){if(t==null)return{};var r=Ube(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ube(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ml.apply(this,arguments)}function uB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(r),!0).forEach(function(n){zbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zbe(t,e,r){return e=$be(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $be(t){var e=Vbe(t,"string");return Zp(e)=="symbol"?e:e+""}function Vbe(t,e){if(Zp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fbe=function(e,r,n,i){var a="";return i.forEach(function(s,c){var d=Pr(r,n,e,s);c?a+="L ".concat(d.x,",").concat(d.y):a+="M ".concat(d.x,",").concat(d.y)}),a+="Z",a},qbe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=Jp({stroke:"#ccc"},xt(e,!1));return ne.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(f){var m=Pr(r,n,i,f),p=Pr(r,n,a,f);return ne.createElement("line",Ml({},d,{key:"line-".concat(f),x1:m.x,y1:m.y,x2:p.x,y2:p.y}))}))},Hbe=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.index,s=Jp(Jp({stroke:"#ccc"},xt(e,!1)),{},{fill:"none"});return ne.createElement("circle",Ml({},s,{className:zt("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:r,cy:n,r:i}))},Gbe=function(e){var r=e.radius,n=e.index,i=Jp(Jp({stroke:"#ccc"},xt(e,!1)),{},{fill:"none"});return ne.createElement("path",Ml({},i,{className:zt("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:Fbe(r,e.cx,e.cy,e.polarAngles)}))},Kbe=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:ne.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(i,a){var s=a;return n==="circle"?ne.createElement(Hbe,Ml({key:s},e,{radius:i,index:a})):ne.createElement(Gbe,Ml({key:s},e,{radius:i,index:a}))}))},YG=function(e){var r=e.cx,n=r===void 0?0:r,i=e.cy,a=i===void 0?0:i,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,f=d===void 0?0:d,m=e.gridType,p=m===void 0?"polygon":m,y=e.radialLines,b=y===void 0?!0:y,T=Bbe(e,Lbe);return f<=0?null:ne.createElement("g",{className:"recharts-polar-grid"},ne.createElement(qbe,Ml({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)),ne.createElement(Kbe,Ml({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)))};YG.displayName="PolarGrid";var Q_,dB;function Wbe(){if(dB)return Q_;dB=1;var t=a2(),e=uG(),r=Co();function n(i,a){return i&&i.length?t(i,r(a,2),e):void 0}return Q_=n,Q_}var Xbe=Wbe();const Qbe=vr(Xbe);var Y_,hB;function Ybe(){if(hB)return Y_;hB=1;var t=a2(),e=Co(),r=dG();function n(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return Y_=n,Y_}var Zbe=Ybe();const Jbe=vr(Zbe);var exe=["cx","cy","angle","ticks","axisLine"],txe=["ticks","tick","angle","tickFormatter","stroke"];function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function Zm(){return Zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zm.apply(this,arguments)}function fB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(r),!0).forEach(function(n){d2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mB(t,e){if(t==null)return{};var r=rxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JG(n.key),n)}}function ixe(t,e,r){return e&&pB(t.prototype,e),r&&pB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function axe(t,e,r){return e=Ob(e),sxe(t,ZG()?Reflect.construct(e,r||[],Ob(t).constructor):e.apply(t,r))}function sxe(t,e){if(e&&(Ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oxe(t)}function oxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZG=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}function lxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}function kA(t,e){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},kA(t,e)}function d2(t,e,r){return e=JG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JG(t){var e=cxe(t,"string");return Ih(e)=="symbol"?e:e+""}function cxe(t,e){if(Ih(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $g=(function(t){function e(){return nxe(this,e),axe(this,e,arguments)}return lxe(e,t),ixe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,c=a.cx,d=a.cy;return Pr(c,d,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=Qbe(c,function(m){return m.coordinate||0}),f=Jbe(c,function(m){return m.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:f.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,f=mB(n,exe),m=c.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),p=Pr(i,a,m[0],s),y=Pr(i,a,m[1],s),b=qu(qu(qu({},xt(f,!1)),{},{fill:"none"},xt(d,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return ne.createElement("line",Zm({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,d=i.tickFormatter,f=i.stroke,m=mB(i,txe),p=this.getTickTextAnchor(),y=xt(m,!1),b=xt(s,!1),T=a.map(function(S,w){var k=n.getTickValueCoord(S),M=qu(qu(qu(qu({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(k.x,", ").concat(k.y,")")},y),{},{stroke:"none",fill:f},b),{},{index:w},k),{},{payload:S});return ne.createElement(fr,Zm({className:zt("recharts-polar-radius-axis-tick",BG(s)),key:"tick-".concat(S.coordinate)},k0(n.props,S,w)),e.renderTickItem(s,M,d?d(S.value,w):S.value))});return ne.createElement(fr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:ne.createElement(fr,{className:zt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Ni.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ne.isValidElement(n)?s=ne.cloneElement(n,i):Ct(n)?s=n(i):s=ne.createElement(Eh,Zm({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(F.PureComponent);d2($g,"displayName","PolarRadiusAxis");d2($g,"axisType","radiusAxis");d2($g,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e0.apply(this,arguments)}function gB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(r),!0).forEach(function(n){h2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tK(n.key),n)}}function dxe(t,e,r){return e&&yB(t.prototype,e),r&&yB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hxe(t,e,r){return e=jb(e),fxe(t,eK()?Reflect.construct(e,r||[],jb(t).constructor):e.apply(t,r))}function fxe(t,e){if(e&&(Rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mxe(t)}function mxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eK=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jb(t)}function pxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}function OA(t,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},OA(t,e)}function h2(t,e,r){return e=tK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tK(t){var e=gxe(t,"string");return Rh(e)=="symbol"?e:e+""}function gxe(t,e){if(Rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yxe=Math.PI/180,vB=1e-5,Vg=(function(t){function e(){return uxe(this,e),hxe(this,e,arguments)}return pxe(e,t),dxe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,c=i.radius,d=i.orientation,f=i.tickSize,m=f||8,p=Pr(a,s,c,n.coordinate),y=Pr(a,s,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*yxe),s;return a>vB?s=i==="outer"?"start":"end":a<-vB?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,f=Hu(Hu({},xt(this.props,!1)),{},{fill:"none"},xt(c,!1));if(d==="circle")return ne.createElement(u2,e0({className:"recharts-polar-angle-axis-line"},f,{cx:i,cy:a,r:s}));var m=this.props.ticks,p=m.map(function(y){return Pr(i,a,s,y.coordinate)});return ne.createElement(QG,e0({className:"recharts-polar-angle-axis-line"},f,{points:p}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,d=i.tickFormatter,f=i.stroke,m=xt(this.props,!1),p=xt(s,!1),y=Hu(Hu({},m),{},{fill:"none"},xt(c,!1)),b=a.map(function(T,S){var w=n.getTickLineCoord(T),k=n.getTickTextAnchor(T),M=Hu(Hu(Hu({textAnchor:k},m),{},{stroke:"none",fill:f},p),{},{index:S,payload:T,x:w.x2,y:w.y2});return ne.createElement(fr,e0({className:zt("recharts-polar-angle-axis-tick",BG(s)),key:"tick-".concat(T.coordinate)},k0(n.props,T,S)),c&&ne.createElement("line",e0({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,M,d?d(T.value,S):T.value))});return ne.createElement(fr,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:ne.createElement(fr,{className:zt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ne.isValidElement(n)?s=ne.cloneElement(n,i):Ct(n)?s=n(i):s=ne.createElement(Eh,e0({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(F.PureComponent);h2(Vg,"displayName","PolarAngleAxis");h2(Vg,"axisType","angleAxis");h2(Vg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Z_,bB;function vxe(){if(bB)return Z_;bB=1;var t=cH(),e=t(Object.getPrototypeOf,Object);return Z_=e,Z_}var J_,xB;function bxe(){if(xB)return J_;xB=1;var t=Bl(),e=vxe(),r=Ul(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,c=a.hasOwnProperty,d=s.call(Object);function f(m){if(!r(m)||t(m)!=n)return!1;var p=e(m);if(p===null)return!0;var y=c.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return J_=f,J_}var xxe=bxe();const wxe=vr(xxe);var eS,wB;function _xe(){if(wB)return eS;wB=1;var t=Bl(),e=Ul(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return eS=n,eS}var Sxe=_xe();const Txe=vr(Sxe);function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cb.apply(this,arguments)}function Axe(t,e){return Oxe(t)||kxe(t,e)||Nxe(t,e)||Exe()}function Exe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nxe(t,e){if(t){if(typeof t=="string")return _B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _B(t,e)}}function _B(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Oxe(t){if(Array.isArray(t))return t}function SB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SB(Object(r),!0).forEach(function(n){jxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jxe(t,e,r){return e=Cxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cxe(t){var e=Ixe(t,"string");return eg(e)=="symbol"?e:e+""}function Ixe(t,e){if(eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AB=function(e,r,n,i,a){var s=n-i,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+a),c+="L ".concat(e+n-s/2-i,",").concat(r+a),c+="L ".concat(e,",").concat(r," Z"),c},Rxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mxe=function(e){var r=TB(TB({},Rxe),e),n=F.useRef(),i=F.useState(-1),a=Axe(i,2),s=a[0],c=a[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var d=r.x,f=r.y,m=r.upperWidth,p=r.lowerWidth,y=r.height,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,k=r.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||y!==+y||m===0&&p===0||y===0)return null;var M=zt("recharts-trapezoid",b);return k?ne.createElement(Ao,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:f},to:{upperWidth:m,lowerWidth:p,height:y,x:d,y:f},duration:S,animationEasing:T,isActive:k},function(C){var B=C.upperWidth,R=C.lowerWidth,I=C.height,A=C.x,E=C.y;return ne.createElement(Ao,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},ne.createElement("path",Cb({},xt(r,!0),{className:M,d:AB(A,E,B,R,I),ref:n})))}):ne.createElement("g",null,ne.createElement("path",Cb({},xt(r,!0),{className:M,d:AB(d,f,m,p,y)})))},Pxe=["option","shapeType","propTransformer","activeClassName","isActive"];function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function Dxe(t,e){if(t==null)return{};var r=Lxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ib(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(r),!0).forEach(function(n){Bxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bxe(t,e,r){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uxe(t){var e=zxe(t,"string");return tg(e)=="symbol"?e:e+""}function zxe(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $xe(t,e){return Ib(Ib({},e),t)}function Vxe(t,e){return t==="symbols"}function NB(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ne.createElement(VE,r);case"trapezoid":return ne.createElement(Mxe,r);case"sector":return ne.createElement(VG,r);case"symbols":if(Vxe(e))return ne.createElement(Xx,r);break;default:return null}}function Fxe(t){return F.isValidElement(t)?t.props:t}function jA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?$xe:n,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,c=t.isActive,d=Dxe(t,Pxe),f;if(F.isValidElement(e))f=F.cloneElement(e,Ib(Ib({},d),Fxe(e)));else if(Ct(e))f=e(d);else if(wxe(e)&&!Txe(e)){var m=i(e,d);f=ne.createElement(NB,{shapeType:r,elementProps:m})}else{var p=d;f=ne.createElement(NB,{shapeType:r,elementProps:p})}return c?ne.createElement(fr,{className:s},f):f}function f2(t,e){return e!=null&&"trapezoids"in t.props}function m2(t,e){return e!=null&&"sectors"in t.props}function rg(t,e){return e!=null&&"points"in t.props}function qxe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function Hxe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Gxe(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Kxe(t,e){var r;return f2(t,e)?r=qxe:m2(t,e)?r=Hxe:rg(t,e)&&(r=Gxe),r}function Wxe(t,e){var r;return f2(t,e)?r="trapezoids":m2(t,e)?r="sectors":rg(t,e)&&(r="points"),r}function Xxe(t,e){if(f2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(m2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return rg(t,e)?e.payload:{}}function Qxe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Wxe(r,e),a=Xxe(r,e),s=n.filter(function(d,f){var m=Ug(a,d),p=r.props[i].filter(function(T){var S=Kxe(r,e);return S(T,e)}),y=r.props[i].indexOf(p[p.length-1]),b=f===y;return m&&b}),c=n.indexOf(s[s.length-1]);return c}var tS,kB;function Yxe(){if(kB)return tS;kB=1;function t(e){return e&&e.length?e[0]:void 0}return tS=t,tS}var rS,OB;function Zxe(){return OB||(OB=1,rS=Yxe()),rS}var Jxe=Zxe();const e2e=vr(Jxe);var t2e=["key"];function Mh(t){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(t)}function r2e(t,e){if(t==null)return{};var r=n2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function n2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rb.apply(this,arguments)}function jB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ji(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(r),!0).forEach(function(n){ol(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nK(n.key),n)}}function a2e(t,e,r){return e&&CB(t.prototype,e),r&&CB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s2e(t,e,r){return e=Mb(e),o2e(t,rK()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function o2e(t,e){if(e&&(Mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l2e(t)}function l2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rK=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function c2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CA(t,e)}function CA(t,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},CA(t,e)}function ol(t,e,r){return e=nK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nK(t){var e=u2e(t,"string");return Mh(e)=="symbol"?e:e+""}function u2e(t,e){if(Mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fg=(function(t){function e(){var r;i2e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=s2e(this,e,[].concat(i)),ol(r,"state",{isAnimationFinished:!1}),ol(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ct(s)&&s()}),ol(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ct(s)&&s()}),ol(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),ol(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return c2e(e,t),a2e(e,[{key:"renderDots",value:function(n){var i=this.props,a=i.dot,s=i.dataKey,c=xt(this.props,!1),d=xt(a,!0),f=n.map(function(m,p){var y=Ji(Ji(Ji({key:"dot-".concat(p),r:3},c),d),{},{dataKey:s,cx:m.x,cy:m.y,index:p,payload:m});return e.renderDotItem(a,y)});return ne.createElement(fr,{className:"recharts-radar-dots"},f)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,a=i.shape,s=i.dot,c=i.isRange,d=i.baseLinePoints,f=i.connectNulls,m;return ne.isValidElement(a)?m=ne.cloneElement(a,Ji(Ji({},this.props),{},{points:n})):Ct(a)?m=a(Ji(Ji({},this.props),{},{points:n})):m=ne.createElement(QG,Rb({},xt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:f})),ne.createElement(fr,{className:"recharts-radar-polygon"},m,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ne.createElement(Ao,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=p&&p.length/a.length,S=a.map(function(w,k){var M=p&&p[Math.floor(k*T)];if(M){var C=ba(M.x,w.x),B=ba(M.y,w.y);return Ji(Ji({},w),{},{x:C(b),y:B(b)})}var R=ba(w.cx,w.x),I=ba(w.cy,w.y);return Ji(Ji({},w),{},{x:R(b),y:I(b)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return a&&i&&i.length&&!s&&(!c||!Ug(c,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.className,s=n.points,c=n.isAnimationActive;if(i||!s||!s.length)return null;var d=this.state.isAnimationFinished,f=zt("recharts-radar",a);return ne.createElement(fr,{className:f},this.renderPolygon(),(!c||d)&&_l.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var a;if(ne.isValidElement(n))a=ne.cloneElement(n,i);else if(Ct(n))a=n(i);else{var s=i.key,c=r2e(i,t2e);a=ne.createElement(u2,Rb({},c,{key:s,className:zt("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return a}}])})(F.PureComponent);ol(Fg,"displayName","Radar");ol(Fg,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!$0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ol(Fg,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,i=t.dataKey,a=t.bandSize,s=r.cx,c=r.cy,d=!1,f=[],m=r.type!=="number"?a??0:0;n.forEach(function(y,b){var T=ji(y,r.dataKey,b),S=ji(y,i),w=r.scale(T)+m,k=Array.isArray(S)?zG(S):S,M=Dt(k)?void 0:e.scale(k);Array.isArray(S)&&S.length>=2&&(d=!0),f.push(Ji(Ji({},Pr(s,c,M,w)),{},{name:T,value:S,cx:s,cy:c,radius:M,angle:w,payload:y}))});var p=[];return d&&f.forEach(function(y){if(Array.isArray(y.value)){var b=e2e(y.value),T=Dt(b)?void 0:e.scale(b);p.push(Ji(Ji({},y),{},{radius:T},Pr(s,c,T,y.angle)))}else p.push(y)}),{points:f,isRange:d,baseLinePoints:p}});var nS,IB;function d2e(){if(IB)return nS;IB=1;var t=Math.ceil,e=Math.max;function r(n,i,a,s){for(var c=-1,d=e(t((i-n)/(a||1)),0),f=Array(d);d--;)f[s?d:++c]=n,n+=a;return f}return nS=r,nS}var iS,RB;function iK(){if(RB)return iS;RB=1;var t=AH(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return iS=n,iS}var aS,MB;function h2e(){if(MB)return aS;MB=1;var t=d2e(),e=Zx(),r=iK();function n(i){return function(a,s,c){return c&&typeof c!="number"&&e(a,s,c)&&(s=c=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),c=c===void 0?a<s?1:-1:r(c),t(a,s,c,i)}}return aS=n,aS}var sS,PB;function f2e(){if(PB)return sS;PB=1;var t=h2e(),e=t();return sS=e,sS}var m2e=f2e();const Pb=vr(m2e);function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function DB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DB(Object(r),!0).forEach(function(n){aK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aK(t,e,r){return e=p2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p2e(t){var e=g2e(t,"string");return ng(e)=="symbol"?e:e+""}function g2e(t,e){if(ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y2e=["Webkit","Moz","O","ms"],v2e=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=y2e.reduce(function(a,s){return LB(LB({},a),{},aK({},s+n,r))},{});return i[e]=r,i};function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Db.apply(this,arguments)}function BB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(r),!0).forEach(function(n){La(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oK(n.key),n)}}function x2e(t,e,r){return e&&UB(t.prototype,e),r&&UB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w2e(t,e,r){return e=Lb(e),_2e(t,sK()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function _2e(t,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S2e(t)}function S2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sK=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function T2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IA(t,e)}function IA(t,e){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},IA(t,e)}function La(t,e,r){return e=oK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oK(t){var e=A2e(t,"string");return Ph(e)=="symbol"?e:e+""}function A2e(t,e){if(Ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E2e=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,f=Wm().domain(Pb(0,d)).range([a,a+s-c]),m=f.domain().map(function(p){return f(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:f(n),endX:f(i),scale:f,scaleValues:m}},zB=function(e){return e.changedTouches&&!!e.changedTouches.length},Dh=(function(t){function e(r){var n;return b2e(this,e),n=w2e(this,e,[r]),La(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),La(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),La(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),n.detachDragEndListener()}),La(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),La(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),La(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),La(n,"handleSlideDragStart",function(i){var a=zB(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return T2e(e,t),x2e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,f=c.data,m=f.length-1,p=Math.min(i,a),y=Math.max(i,a),b=e.getIndexInRange(s,p),T=e.getIndexInRange(s,y);return{startIndex:b-b%d,endIndex:T===m?m:T-T%d}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,d=ji(a[n],c,n);return Ct(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,d=this.props,f=d.x,m=d.width,p=d.travellerWidth,y=d.startIndex,b=d.endIndex,T=d.onChange,S=n.pageX-a;S>0?S=Math.min(S,f+m-p-c,f+m-p-s):S<0&&(S=Math.max(S,f-s,f-c));var w=this.getIndex({startX:s+S,endX:c+S});(w.startIndex!==y||w.endIndex!==b)&&T&&T(w),this.setState({startX:s+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=zB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,d=i.startX,f=this.state[s],m=this.props,p=m.x,y=m.width,b=m.travellerWidth,T=m.onChange,S=m.gap,w=m.data,k={startX:this.state.startX,endX:this.state.endX},M=n.pageX-a;M>0?M=Math.min(M,p+y-b-f):M<0&&(M=Math.max(M,p-f)),k[s]=f+M;var C=this.getIndex(k),B=C.startIndex,R=C.endIndex,I=function(){var E=w.length-1;return s==="startX"&&(c>d?B%S===0:R%S===0)||c<d&&R===E||s==="endX"&&(c>d?R%S===0:B%S===0)||c>d&&R===E};this.setState(La(La({},s,f+M),"brushMoveStartX",n.pageX),function(){T&&I()&&T(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,c=s.scaleValues,d=s.startX,f=s.endX,m=this.state[i],p=c.indexOf(m);if(p!==-1){var y=p+n;if(!(y===-1||y>=c.length)){var b=c[y];i==="startX"&&b>=f||i==="endX"&&b<=d||this.setState(La({},i,b),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.fill,f=n.stroke;return ne.createElement("rect",{stroke:f,fill:d,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.data,f=n.children,m=n.padding,p=F.Children.only(f);return p?ne.cloneElement(p,{x:i,y:a,width:s,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,c=this,d=this.props,f=d.y,m=d.travellerWidth,p=d.height,y=d.traveller,b=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,k=Math.max(n,this.props.x),M=oS(oS({},xt(this.props,!1)),{},{x:k,y:f,width:m,height:p}),C=b||"Min value: ".concat((a=T[S])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return ne.createElement(fr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),c.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,M))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,c=a.height,d=a.stroke,f=a.travellerWidth,m=Math.min(n,i)+f,p=Math.max(Math.abs(i-n)-f,0);return ne.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:s,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,f=n.stroke,m=this.state,p=m.startX,y=m.endX,b=5,T={pointerEvents:"none",fill:f};return ne.createElement(fr,{className:"recharts-brush-texts"},ne.createElement(Eh,Db({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-b,y:s+c/2},T),this.getTextOfTick(i)),ne.createElement(Eh,Db({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+d+b,y:s+c/2},T),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,c=n.x,d=n.y,f=n.width,m=n.height,p=n.alwaysShowText,y=this.state,b=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,k=y.isTravellerMoving,M=y.isTravellerFocused;if(!i||!i.length||!et(c)||!et(d)||!et(f)||!et(m)||f<=0||m<=0)return null;var C=zt("recharts-brush",a),B=ne.Children.count(s)===1,R=v2e("userSelect","none");return ne.createElement(fr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),B&&this.renderPanorama(),this.renderSlide(b,T),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||k||M||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,c=n.height,d=n.stroke,f=Math.floor(a+c/2)-1;return ne.createElement(ne.Fragment,null,ne.createElement("rect",{x:i,y:a,width:s,height:c,fill:d,stroke:"none"}),ne.createElement("line",{x1:i+1,y1:f,x2:i+s-1,y2:f,fill:"none",stroke:"#fff"}),ne.createElement("line",{x1:i+1,y1:f+2,x2:i+s-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return ne.isValidElement(n)?a=ne.cloneElement(n,i):Ct(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,c=n.x,d=n.travellerWidth,f=n.updateId,m=n.startIndex,p=n.endIndex;if(a!==i.prevData||f!==i.prevUpdateId)return oS({prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s},a&&a.length?E2e({data:a,width:s,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||d!==i.prevTravellerWidth)){i.scale.range([c,c+s-d]);var y=i.scale.domain().map(function(b){return i.scale(b)});return{prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,c=a-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>i?c=d:s=d}return i>=n[c]?c:s}}])})(F.PureComponent);La(Dh,"displayName","Brush");La(Dh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var lS,$B;function N2e(){if($B)return lS;$B=1;var t=fE();function e(r,n){var i;return t(r,function(a,s,c){return i=n(a,s,c),!i}),!!i}return lS=e,lS}var cS,VB;function k2e(){if(VB)return cS;VB=1;var t=rH(),e=Co(),r=N2e(),n=Ea(),i=Zx();function a(s,c,d){var f=n(s)?t:r;return d&&i(s,c,d)&&(c=void 0),f(s,e(c,3))}return cS=a,cS}var O2e=k2e();const j2e=vr(O2e);var bo=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},uS,FB;function C2e(){if(FB)return uS;FB=1;var t=xH();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return uS=e,uS}var dS,qB;function I2e(){if(qB)return dS;qB=1;var t=C2e(),e=vH(),r=Co();function n(i,a){var s={};return a=r(a,3),e(i,function(c,d,f){t(s,d,a(c,d,f))}),s}return dS=n,dS}var R2e=I2e();const M2e=vr(R2e);var hS,HB;function P2e(){if(HB)return hS;HB=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return hS=t,hS}var fS,GB;function D2e(){if(GB)return fS;GB=1;var t=fE();function e(r,n){var i=!0;return t(r,function(a,s,c){return i=!!n(a,s,c),i}),i}return fS=e,fS}var mS,KB;function L2e(){if(KB)return mS;KB=1;var t=P2e(),e=D2e(),r=Co(),n=Ea(),i=Zx();function a(s,c,d){var f=n(s)?t:e;return d&&i(s,c,d)&&(c=void 0),f(s,r(c,3))}return mS=a,mS}var B2e=L2e();const lK=vr(B2e);var U2e=["x","y"];function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RA.apply(this,arguments)}function WB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(r),!0).forEach(function(n){z2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z2e(t,e,r){return e=$2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $2e(t){var e=V2e(t,"string");return ig(e)=="symbol"?e:e+""}function V2e(t,e){if(ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F2e(t,e){if(t==null)return{};var r=q2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function q2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function H2e(t,e){var r=t.x,n=t.y,i=F2e(t,U2e),a="".concat(r),s=parseInt(a,10),c="".concat(n),d=parseInt(c,10),f="".concat(e.height||i.height),m=parseInt(f,10),p="".concat(e.width||i.width),y=parseInt(p,10);return Sm(Sm(Sm(Sm(Sm({},e),i),s?{x:s}:{}),d?{y:d}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function XB(t){return ne.createElement(jA,RA({shapeType:"rectangle",propTransformer:H2e,activeClassName:"recharts-active-bar"},t))}var G2e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=et(n)||Xce(n);return a?e(n,i):(a||j0(),r)}},K2e=["value","background"],cK;function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function W2e(t,e){if(t==null)return{};var r=X2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function X2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Bb(){return Bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bb.apply(this,arguments)}function QB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(r),!0).forEach(function(n){Dc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dK(n.key),n)}}function Y2e(t,e,r){return e&&YB(t.prototype,e),r&&YB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z2e(t,e,r){return e=Ub(e),J2e(t,uK()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function J2e(t,e){if(e&&(Lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e4e(t)}function e4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uK=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function t4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MA(t,e)}function MA(t,e){return MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MA(t,e)}function Dc(t,e,r){return e=dK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dK(t){var e=r4e(t,"string");return Lh(e)=="symbol"?e:e+""}function r4e(t,e){if(Lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qg=(function(t){function e(){var r;Q2e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Z2e(this,e,[].concat(i)),Dc(r,"state",{isAnimationFinished:!1}),Dc(r,"id",Rg("recharts-bar-")),Dc(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Dc(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return t4e(e,t),Y2e(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.dataKey,d=a.activeIndex,f=a.activeBar,m=xt(this.props,!1);return n&&n.map(function(p,y){var b=y===d,T=b?f:s,S=Hn(Hn(Hn({},m),p),{},{isActive:b,option:T,index:y,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ne.createElement(fr,Bb({className:"recharts-bar-rectangle"},k0(i.props,p,y),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(y)}),ne.createElement(XB,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,m=i.animationEasing,p=i.animationId,y=this.state.prevData;return ne.createElement(Ao,{begin:d,duration:f,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t,S=a.map(function(w,k){var M=y&&y[k];if(M){var C=ba(M.x,w.x),B=ba(M.y,w.y),R=ba(M.width,w.width),I=ba(M.height,w.height);return Hn(Hn({},w),{},{x:C(T),y:B(T),width:R(T),height:I(T)})}if(s==="horizontal"){var A=ba(0,w.height),E=A(T);return Hn(Hn({},w),{},{y:w.y+w.height-E,height:E})}var O=ba(0,w.width),U=O(T);return Hn(Hn({},w),{},{width:U})});return ne.createElement(fr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Ug(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,d=xt(this.props.background,!1);return a.map(function(f,m){f.value;var p=f.background,y=W2e(f,K2e);if(!p)return null;var b=Hn(Hn(Hn(Hn(Hn({},y),{},{fill:"#eee"},p),d),k0(n.props,f,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:m,className:"recharts-bar-background-rectangle"});return ne.createElement(XB,Bb({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},b))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,d=a.yAxis,f=a.layout,m=a.children,p=Ka(m,zg);if(!p)return null;var y=f==="vertical"?s[0].height/2:s[0].width/2,b=function(w,k){var M=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:M,errorVal:ji(w,k)}},T={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ne.createElement(fr,T,p.map(function(S){return ne.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:s,xAxis:c,yAxis:d,layout:f,offset:y,dataPointFormatter:b})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,c=n.xAxis,d=n.yAxis,f=n.left,m=n.top,p=n.width,y=n.height,b=n.isAnimationActive,T=n.background,S=n.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,k=zt("recharts-bar",s),M=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,B=M||C,R=Dt(S)?this.id:S;return ne.createElement(fr,{className:k},M||C?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(R)},ne.createElement("rect",{x:M?f:f-p/2,y:C?m:m-y/2,width:M?p:p*2,height:C?y:y*2}))):null,ne.createElement(fr,{className:"recharts-bar-rectangles",clipPath:B?"url(#clipPath-".concat(R,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(B,R),(!b||w)&&_l.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(F.PureComponent);cK=qg;Dc(qg,"displayName","Bar");Dc(qg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!$0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Dc(qg,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,f=t.stackedData,m=t.dataStartIndex,p=t.displayedData,y=t.offset,b=u1e(n,r);if(!b)return null;var T=e.layout,S=r.type.defaultProps,w=S!==void 0?Hn(Hn({},S),r.props):r.props,k=w.dataKey,M=w.children,C=w.minPointSize,B=T==="horizontal"?s:a,R=f?B.scale.domain():null,I=y1e({numericAxis:B}),A=Ka(M,gE),E=p.map(function(O,U){var P,V,z,Q,ee,K;f?P=d1e(f[m+U],R):(P=ji(O,k),Array.isArray(P)||(P=[I,P]));var Z=G2e(C,cK.defaultProps.minPointSize)(P[1],U);if(T==="horizontal"){var Y,pe=[s.scale(P[0]),s.scale(P[1])],ae=pe[0],X=pe[1];V=_L({axis:a,ticks:c,bandSize:i,offset:b.offset,entry:O,index:U}),z=(Y=X??ae)!==null&&Y!==void 0?Y:void 0,Q=b.size;var J=ae-X;if(ee=Number.isNaN(J)?0:J,K={x:V,y:s.y,width:Q,height:s.height},Math.abs(Z)>0&&Math.abs(ee)<Math.abs(Z)){var le=Us(ee||Z)*(Math.abs(Z)-Math.abs(ee));z-=le,ee+=le}}else{var Ee=[a.scale(P[0]),a.scale(P[1])],oe=Ee[0],Oe=Ee[1];if(V=oe,z=_L({axis:s,ticks:d,bandSize:i,offset:b.offset,entry:O,index:U}),Q=Oe-oe,ee=b.size,K={x:a.x,y:z,width:a.width,height:ee},Math.abs(Z)>0&&Math.abs(Q)<Math.abs(Z)){var Me=Us(Q||Z)*(Math.abs(Z)-Math.abs(Q));Q+=Me}}return Hn(Hn(Hn({},O),{},{x:V,y:z,width:Q,height:ee,value:f?P:P[1],payload:O,background:K},A&&A[U]&&A[U].props),{},{tooltipPayload:[DG(r,O)],tooltipPosition:{x:V+Q/2,y:z+ee/2}})});return Hn({data:E,layout:T},y)});function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function n4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hK(n.key),n)}}function i4e(t,e,r){return e&&ZB(t.prototype,e),r&&ZB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function JB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(r),!0).forEach(function(n){p2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p2(t,e,r){return e=hK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hK(t){var e=a4e(t,"string");return ag(e)=="symbol"?e:e+""}function a4e(t,e){if(ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s4e=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.layout,f=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!Ba(f,qg);return m.reduce(function(b,T){var S=r[T],w=S.orientation,k=S.domain,M=S.padding,C=M===void 0?{}:M,B=S.mirror,R=S.reversed,I="".concat(w).concat(B?"Mirror":""),A,E,O,U,P;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var V=k[1]-k[0],z=1/0,Q=S.categoricalDomain.sort(Jce);if(Q.forEach(function(Ee,oe){oe>0&&(z=Math.min((Ee||0)-(Q[oe-1]||0),z))}),Number.isFinite(z)){var ee=z/V,K=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(A=ee*K/2),S.padding==="no-gap"){var Z=zs(e.barCategoryGap,ee*K),Y=ee*K/2;A=Y-Z-(Y-Z)/K*Z}}}i==="xAxis"?E=[n.left+(C.left||0)+(A||0),n.left+n.width-(C.right||0)-(A||0)]:i==="yAxis"?E=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(A||0),n.top+n.height-(C.bottom||0)-(A||0)]:E=S.range,R&&(E=[E[1],E[0]]);var pe=IG(S,a,y),ae=pe.scale,X=pe.realScaleType;ae.domain(k).range(E),RG(ae);var J=MG(ae,Ls(Ls({},S),{},{realScaleType:X}));i==="xAxis"?(P=w==="top"&&!B||w==="bottom"&&B,O=n.left,U=p[I]-P*S.height):i==="yAxis"&&(P=w==="left"&&!B||w==="right"&&B,O=p[I]-P*S.width,U=n.top);var le=Ls(Ls(Ls({},S),J),{},{realScaleType:X,x:O,y:U,scale:ae,width:i==="xAxis"?n.width:S.width,height:i==="yAxis"?n.height:S.height});return le.bandSize=wb(le,J),!S.hide&&i==="xAxis"?p[I]+=(P?-1:1)*le.height:S.hide||(p[I]+=(P?-1:1)*le.width),Ls(Ls({},b),{},p2({},T,le))},{})},fK=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},o4e=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return fK({x:r,y:n},{x:i,y:a})},mK=(function(){function t(e){n4e(this,t),this.scale=e}return i4e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(i){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])})();p2(mK,"EPS",1e-4);var FE=function(e){var r=Object.keys(e).reduce(function(n,i){return Ls(Ls({},n),{},p2({},i,mK.create(e[i])))},{});return Ls(Ls({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return M2e(i,function(d,f){return r[f].apply(d,{bandAware:s,position:c})})},isInRange:function(i){return lK(i,function(a,s){return r[s].isInRange(a)})}})};function l4e(t){return(t%180+180)%180}var c4e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=l4e(i),s=a*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},pS,eU;function u4e(){if(eU)return pS;eU=1;var t=Co(),e=Mg(),r=Qx();function n(i){return function(a,s,c){var d=Object(a);if(!e(a)){var f=t(s,3);a=r(a),s=function(p){return f(d[p],p,d)}}var m=i(a,s,c);return m>-1?d[f?a[m]:m]:void 0}}return pS=n,pS}var gS,tU;function d4e(){if(tU)return gS;tU=1;var t=iK();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return gS=e,gS}var yS,rU;function h4e(){if(rU)return yS;rU=1;var t=fH(),e=Co(),r=d4e(),n=Math.max;function i(a,s,c){var d=a==null?0:a.length;if(!d)return-1;var f=c==null?0:r(c);return f<0&&(f=n(d+f,0)),t(a,e(s,3),f)}return yS=i,yS}var vS,nU;function f4e(){if(nU)return vS;nU=1;var t=u4e(),e=h4e(),r=t(e);return vS=r,vS}var m4e=f4e();const p4e=vr(m4e);var g4e=Oq();const y4e=vr(g4e);var v4e=y4e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),qE=F.createContext(void 0),HE=F.createContext(void 0),pK=F.createContext(void 0),gK=F.createContext({}),yK=F.createContext(void 0),vK=F.createContext(0),bK=F.createContext(0),iU=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,c=e.children,d=e.width,f=e.height,m=v4e(a);return ne.createElement(qE.Provider,{value:n},ne.createElement(HE.Provider,{value:i},ne.createElement(gK.Provider,{value:a},ne.createElement(pK.Provider,{value:m},ne.createElement(yK.Provider,{value:s},ne.createElement(vK.Provider,{value:f},ne.createElement(bK.Provider,{value:d},c)))))))},b4e=function(){return F.useContext(yK)},xK=function(e){var r=F.useContext(qE);r==null&&j0();var n=r[e];return n==null&&j0(),n},x4e=function(){var e=F.useContext(qE);return Rc(e)},w4e=function(){var e=F.useContext(HE),r=p4e(e,function(n){return lK(n.domain,Number.isFinite)});return r||Rc(e)},wK=function(e){var r=F.useContext(HE);r==null&&j0();var n=r[e];return n==null&&j0(),n},_4e=function(){var e=F.useContext(pK);return e},S4e=function(){return F.useContext(gK)},GE=function(){return F.useContext(bK)},KE=function(){return F.useContext(vK)};function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function T4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SK(n.key),n)}}function E4e(t,e,r){return e&&A4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function N4e(t,e,r){return e=zb(e),k4e(t,_K()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function k4e(t,e){if(e&&(Bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O4e(t)}function O4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _K(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_K=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function j4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PA(t,e)}function PA(t,e){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PA(t,e)}function aU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(r),!0).forEach(function(n){WE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WE(t,e,r){return e=SK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SK(t){var e=C4e(t,"string");return Bh(e)=="symbol"?e:e+""}function C4e(t,e){if(Bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function I4e(t,e){return D4e(t)||P4e(t,e)||M4e(t,e)||R4e()}function R4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M4e(t,e){if(t){if(typeof t=="string")return oU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oU(t,e)}}function oU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function D4e(t){if(Array.isArray(t))return t}function DA(){return DA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DA.apply(this,arguments)}var L4e=function(e,r){var n;return ne.isValidElement(e)?n=ne.cloneElement(e,r):Ct(e)?n=e(r):n=ne.createElement("line",DA({},r,{className:"recharts-reference-line-line"})),n},B4e=function(e,r,n,i,a,s,c,d,f){var m=a.x,p=a.y,y=a.width,b=a.height;if(n){var T=f.y,S=e.y.apply(T,{position:s});if(bo(f,"discard")&&!e.y.isInRange(S))return null;var w=[{x:m+y,y:S},{x:m,y:S}];return d==="left"?w.reverse():w}if(r){var k=f.x,M=e.x.apply(k,{position:s});if(bo(f,"discard")&&!e.x.isInRange(M))return null;var C=[{x:M,y:p+b},{x:M,y:p}];return c==="top"?C.reverse():C}if(i){var B=f.segment,R=B.map(function(I){return e.apply(I,{position:s})});return bo(f,"discard")&&j2e(R,function(I){return!e.isInRange(I)})?null:R}return null};function U4e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,f=b4e(),m=xK(i),p=wK(a),y=_4e();if(!f||!y)return null;xl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=FE({x:m.scale,y:p.scale}),T=ti(e),S=ti(r),w=n&&n.length===2,k=B4e(b,T,S,w,y,t.position,m.orientation,p.orientation,t);if(!k)return null;var M=I4e(k,2),C=M[0],B=C.x,R=C.y,I=M[1],A=I.x,E=I.y,O=bo(t,"hidden")?"url(#".concat(f,")"):void 0,U=sU(sU({clipPath:O},xt(t,!0)),{},{x1:B,y1:R,x2:A,y2:E});return ne.createElement(fr,{className:zt("recharts-reference-line",c)},L4e(s,U),Ni.renderCallByParent(t,o4e({x1:B,y1:R,x2:A,y2:E})))}var XE=(function(t){function e(){return T4e(this,e),N4e(this,e,arguments)}return j4e(e,t),E4e(e,[{key:"render",value:function(){return ne.createElement(U4e,this.props)}}])})(ne.Component);WE(XE,"displayName","ReferenceLine");WE(XE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LA.apply(this,arguments)}function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function lU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(r),!0).forEach(function(n){g2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AK(n.key),n)}}function V4e(t,e,r){return e&&$4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F4e(t,e,r){return e=$b(e),q4e(t,TK()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function q4e(t,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H4e(t)}function H4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TK=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function G4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BA(t,e)}function BA(t,e){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},BA(t,e)}function g2(t,e,r){return e=AK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AK(t){var e=K4e(t,"string");return Uh(e)=="symbol"?e:e+""}function K4e(t,e){if(Uh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W4e=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=FE({x:i.scale,y:a.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return bo(e,"discard")&&!s.isInRange(c)?null:c},y2=(function(t){function e(){return z4e(this,e),F4e(this,e,arguments)}return G4e(e,t),V4e(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,f=ti(i),m=ti(a);if(xl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!m)return null;var p=W4e(this.props);if(!p)return null;var y=p.x,b=p.y,T=this.props,S=T.shape,w=T.className,k=bo(this.props,"hidden")?"url(#".concat(d,")"):void 0,M=cU(cU({clipPath:k},xt(this.props,!0)),{},{cx:y,cy:b});return ne.createElement(fr,{className:zt("recharts-reference-dot",w)},e.renderDot(S,M),Ni.renderCallByParent(this.props,{x:y-s,y:b-s,width:2*s,height:2*s}))}}])})(ne.Component);g2(y2,"displayName","ReferenceDot");g2(y2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});g2(y2,"renderDot",function(t,e){var r;return ne.isValidElement(t)?r=ne.cloneElement(t,e):Ct(t)?r=t(e):r=ne.createElement(u2,LA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function UA(){return UA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UA.apply(this,arguments)}function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){v2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NK(n.key),n)}}function Y4e(t,e,r){return e&&Q4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z4e(t,e,r){return e=Vb(e),J4e(t,EK()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}function J4e(t,e){if(e&&(zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ewe(t)}function ewe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EK=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(t)}function twe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zA(t,e)}function zA(t,e){return zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zA(t,e)}function v2(t,e,r){return e=NK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NK(t){var e=rwe(t,"string");return zh(e)=="symbol"?e:e+""}function rwe(t,e){if(zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nwe=function(e,r,n,i,a){var s=a.x1,c=a.x2,d=a.y1,f=a.y2,m=a.xAxis,p=a.yAxis;if(!m||!p)return null;var y=FE({x:m.scale,y:p.scale}),b={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:i?y.y.apply(f,{position:"end"}):y.y.rangeMax};return bo(a,"discard")&&(!y.isInRange(b)||!y.isInRange(T))?null:fK(b,T)},b2=(function(t){function e(){return X4e(this,e),Z4e(this,e,arguments)}return twe(e,t),Y4e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,c=n.y2,d=n.className,f=n.alwaysShow,m=n.clipPathId;xl(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=ti(i),y=ti(a),b=ti(s),T=ti(c),S=this.props.shape;if(!p&&!y&&!b&&!T&&!S)return null;var w=nwe(p,y,b,T,this.props);if(!w&&!S)return null;var k=bo(this.props,"hidden")?"url(#".concat(m,")"):void 0;return ne.createElement(fr,{className:zt("recharts-reference-area",d)},e.renderRect(S,dU(dU({clipPath:k},xt(this.props,!0)),w)),Ni.renderCallByParent(this.props,w))}}])})(ne.Component);v2(b2,"displayName","ReferenceArea");v2(b2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});v2(b2,"renderRect",function(t,e){var r;return ne.isValidElement(t)?r=ne.cloneElement(t,e):Ct(t)?r=t(e):r=ne.createElement(VE,UA({},e,{className:"recharts-reference-area-rect"})),r});function kK(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function iwe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return c4e(n,r)}function awe(t,e,r){var n=r==="width",i=t.x,a=t.y,s=t.width,c=t.height;return e===1?{start:n?i:a,end:n?i+s:a+c}:{start:n?i+s:a+c,end:n?i:a}}function Fb(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function swe(t,e){return kK(t,e+1)}function owe(t,e,r,n,i){for(var a=(n||[]).slice(),s=e.start,c=e.end,d=0,f=1,m=s,p=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:kK(n,f)};var S=d,w,k=function(){return w===void 0&&(w=r(T,S)),w},M=T.coordinate,C=d===0||Fb(t,M,k,m,c);C||(d=0,m=s,f+=1),C&&(m=M+t*(k()/2+i),d+=f)},y;f<=a.length;)if(y=p(),y)return y.v;return[]}function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function hU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(r),!0).forEach(function(n){lwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lwe(t,e,r){return e=cwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cwe(t){var e=uwe(t,"string");return sg(e)=="symbol"?e:e+""}function uwe(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dwe(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,c=e.start,d=e.end,f=function(y){var b=a[y],T,S=function(){return T===void 0&&(T=r(b,y)),T};if(y===s-1){var w=t*(b.coordinate+t*S()/2-d);a[y]=b=zi(zi({},b),{},{tickCoord:w>0?b.coordinate-w*t:b.coordinate})}else a[y]=b=zi(zi({},b),{},{tickCoord:b.coordinate});var k=Fb(t,b.tickCoord,S,c,d);k&&(d=b.tickCoord-t*(S()/2+i),a[y]=zi(zi({},b),{},{isShow:!0}))},m=s-1;m>=0;m--)f(m);return a}function hwe(t,e,r,n,i,a){var s=(n||[]).slice(),c=s.length,d=e.start,f=e.end;if(a){var m=n[c-1],p=r(m,c-1),y=t*(m.coordinate+t*p/2-f);s[c-1]=m=zi(zi({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var b=Fb(t,m.tickCoord,function(){return p},d,f);b&&(f=m.tickCoord-t*(p/2+i),s[c-1]=zi(zi({},m),{},{isShow:!0}))}for(var T=a?c-1:c,S=function(M){var C=s[M],B,R=function(){return B===void 0&&(B=r(C,M)),B};if(M===0){var I=t*(C.coordinate-t*R()/2-d);s[M]=C=zi(zi({},C),{},{tickCoord:I<0?C.coordinate-I*t:C.coordinate})}else s[M]=C=zi(zi({},C),{},{tickCoord:C.coordinate});var A=Fb(t,C.tickCoord,R,d,f);A&&(d=C.tickCoord+t*(R()/2+i),s[M]=zi(zi({},C),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function QE(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,f=t.tickFormatter,m=t.unit,p=t.angle;if(!i||!i.length||!n)return[];if(et(d)||$0.isSsr)return swe(i,typeof d=="number"&&et(d)?d:0);var y=[],b=c==="top"||c==="bottom"?"width":"height",T=m&&b==="width"?Km(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(C,B){var R=Ct(f)?f(C.value,B):C.value;return b==="width"?iwe(Km(R,{fontSize:e,letterSpacing:r}),T,p):Km(R,{fontSize:e,letterSpacing:r})[b]},w=i.length>=2?Us(i[1].coordinate-i[0].coordinate):1,k=awe(a,w,b);return d==="equidistantPreserveStart"?owe(w,k,S,i,s):(d==="preserveStart"||d==="preserveStartEnd"?y=hwe(w,k,S,i,s,d==="preserveStartEnd"):y=dwe(w,k,S,i,s),y.filter(function(M){return M.isShow}))}var fwe=["viewBox"],mwe=["viewBox"],pwe=["ticks"];function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hd.apply(this,arguments)}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){YE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bS(t,e){if(t==null)return{};var r=gwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ywe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jK(n.key),n)}}function vwe(t,e,r){return e&&mU(t.prototype,e),r&&mU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bwe(t,e,r){return e=qb(e),xwe(t,OK()?Reflect.construct(e,r||[],qb(t).constructor):e.apply(t,r))}function xwe(t,e){if(e&&($h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wwe(t)}function wwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OK=function(){return!!t})()}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(t)}function _we(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$A(t,e)}function $A(t,e){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$A(t,e)}function YE(t,e,r){return e=jK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jK(t){var e=Swe(t,"string");return $h(e)=="symbol"?e:e+""}function Swe(t,e){if($h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uf=(function(t){function e(r){var n;return ywe(this,e),n=bwe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return _we(e,t),vwe(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=bS(n,fwe),c=this.props,d=c.viewBox,f=bS(c,mwe);return!eh(a,d)||!eh(s,f)||!eh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,c=i.width,d=i.height,f=i.orientation,m=i.tickSize,p=i.mirror,y=i.tickMargin,b,T,S,w,k,M,C=p?-1:1,B=n.tickSize||m,R=et(n.tickCoord)?n.tickCoord:n.coordinate;switch(f){case"top":b=T=n.coordinate,w=s+ +!p*d,S=w-C*B,M=S-C*y,k=R;break;case"left":S=w=n.coordinate,T=a+ +!p*c,b=T-C*B,k=b-C*y,M=R;break;case"right":S=w=n.coordinate,T=a+ +p*c,b=T+C*B,k=b+C*y,M=R;break;default:b=T=n.coordinate,w=s+ +p*d,S=w+C*B,M=S+C*y,k=R;break}return{line:{x1:b,y1:S,x2:T,y2:w},tick:{x:k,y:M}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.orientation,f=n.mirror,m=n.axisLine,p=Jn(Jn(Jn({},xt(this.props,!1)),xt(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!f||d==="bottom"&&f);p=Jn(Jn({},p),{},{x1:i,y1:a+y*c,x2:i+s,y2:a+y*c})}else{var b=+(d==="left"&&!f||d==="right"&&f);p=Jn(Jn({},p),{},{x1:i+b*s,y1:a,x2:i+b*s,y2:a+c})}return ne.createElement("line",Hd({},p,{className:zt("recharts-cartesian-axis-line",ms(m,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,c=this.props,d=c.tickLine,f=c.stroke,m=c.tick,p=c.tickFormatter,y=c.unit,b=QE(Jn(Jn({},this.props),{},{ticks:n}),i,a),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=xt(this.props,!1),k=xt(m,!1),M=Jn(Jn({},w),{},{fill:"none"},xt(d,!1)),C=b.map(function(B,R){var I=s.getTickLineCoord(B),A=I.line,E=I.tick,O=Jn(Jn(Jn(Jn({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:f},k),E),{},{index:R,payload:B,visibleTicksCount:b.length,tickFormatter:p});return ne.createElement(fr,Hd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},k0(s.props,B,R)),d&&ne.createElement("line",Hd({},M,A,{className:zt("recharts-cartesian-axis-tick-line",ms(d,"className"))})),m&&e.renderTickItem(m,O,"".concat(Ct(p)?p(B.value,R):B.value).concat(y||"")))});return ne.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,d=i.ticksGenerator,f=i.className,m=i.hide;if(m)return null;var p=this.props,y=p.ticks,b=bS(p,pwe),T=y;return Ct(d)&&(T=y&&y.length>0?d(this.props):d(b)),s<=0||c<=0||!T||!T.length?null:ne.createElement(fr,{className:zt("recharts-cartesian-axis",f),ref:function(w){n.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),Ni.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,c=zt(i.className,"recharts-cartesian-axis-tick-value");return ne.isValidElement(n)?s=ne.cloneElement(n,Jn(Jn({},i),{},{className:c})):Ct(n)?s=n(Jn(Jn({},i),{},{className:c})):s=ne.createElement(Eh,Hd({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(F.Component);YE(uf,"displayName","CartesianAxis");YE(uf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Twe=["x1","y1","x2","y2","key"],Awe=["offset"];function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}function pU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(r),!0).forEach(function(n){Ewe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ewe(t,e,r){return e=Nwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nwe(t){var e=kwe(t,"string");return C0(e)=="symbol"?e:e+""}function kwe(t,e){if(C0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(C0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a0(){return a0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a0.apply(this,arguments)}function gU(t,e){if(t==null)return{};var r=Owe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Owe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var jwe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,d=e.ry;return ne.createElement("rect",{x:i,y:a,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function CK(t,e){var r;if(ne.isValidElement(t))r=ne.cloneElement(t,e);else if(Ct(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,c=e.key,d=gU(e,Twe),f=xt(d,!1);f.offset;var m=gU(f,Awe);r=ne.createElement("line",a0({},m,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:c}))}return r}function Cwe(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=Vi(Vi({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return CK(i,f)});return ne.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Iwe(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=Vi(Vi({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return CK(i,f)});return ne.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Rwe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,f=d===void 0?!0:d;if(!f||!e||!e.length)return null;var m=c.map(function(y){return Math.round(y+i-i)}).sort(function(y,b){return y-b});i!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?i+s-y:m[b+1]-y;if(S<=0)return null;var w=b%e.length;return ne.createElement("rect",{key:"react-".concat(b),y,x:n,height:S,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Mwe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,c=t.width,d=t.height,f=t.verticalPoints;if(!r||!n||!n.length)return null;var m=f.map(function(y){return Math.round(y+a-a)}).sort(function(y,b){return y-b});a!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?a+c-y:m[b+1]-y;if(S<=0)return null;var w=b%n.length;return ne.createElement("rect",{key:"react-".concat(b),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Pwe=function(e,r){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return CG(QE(Vi(Vi(Vi({},uf.defaultProps),n),{},{ticks:pl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},Dwe=function(e,r){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return CG(QE(Vi(Vi(Vi({},uf.defaultProps),n),{},{ticks:pl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},Pd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function IK(t){var e,r,n,i,a,s,c=GE(),d=KE(),f=S4e(),m=Vi(Vi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Pd.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Pd.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Pd.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Pd.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Pd.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Pd.verticalFill,x:et(t.x)?t.x:f.left,y:et(t.y)?t.y:f.top,width:et(t.width)?t.width:f.width,height:et(t.height)?t.height:f.height}),p=m.x,y=m.y,b=m.width,T=m.height,S=m.syncWithTicks,w=m.horizontalValues,k=m.verticalValues,M=x4e(),C=w4e();if(!et(b)||b<=0||!et(T)||T<=0||!et(p)||p!==+p||!et(y)||y!==+y)return null;var B=m.verticalCoordinatesGenerator||Pwe,R=m.horizontalCoordinatesGenerator||Dwe,I=m.horizontalPoints,A=m.verticalPoints;if((!I||!I.length)&&Ct(R)){var E=w&&w.length,O=R({yAxis:C?Vi(Vi({},C),{},{ticks:E?w:C.ticks}):void 0,width:c,height:d,offset:f},E?!0:S);xl(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(C0(O),"]")),Array.isArray(O)&&(I=O)}if((!A||!A.length)&&Ct(B)){var U=k&&k.length,P=B({xAxis:M?Vi(Vi({},M),{},{ticks:U?k:M.ticks}):void 0,width:c,height:d,offset:f},U?!0:S);xl(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(C0(P),"]")),Array.isArray(P)&&(A=P)}return ne.createElement("g",{className:"recharts-cartesian-grid"},ne.createElement(jwe,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),ne.createElement(Cwe,a0({},m,{offset:f,horizontalPoints:I,xAxis:M,yAxis:C})),ne.createElement(Iwe,a0({},m,{offset:f,verticalPoints:A,xAxis:M,yAxis:C})),ne.createElement(Rwe,a0({},m,{horizontalPoints:I})),ne.createElement(Mwe,a0({},m,{verticalPoints:A})))}IK.displayName="CartesianGrid";function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function Lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PK(n.key),n)}}function Uwe(t,e,r){return e&&Bwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zwe(t,e,r){return e=Hb(e),$we(t,RK()?Reflect.construct(e,r||[],Hb(t).constructor):e.apply(t,r))}function $we(t,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(t)}function Vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RK=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(t)}function Fwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VA(t,e)}function VA(t,e){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VA(t,e)}function MK(t,e,r){return e=PK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PK(t){var e=qwe(t,"string");return Vh(e)=="symbol"?e:e+""}function qwe(t,e){if(Vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x2=(function(t){function e(){return Lwe(this,e),zwe(this,e,arguments)}return Fwe(e,t),Uwe(e,[{key:"render",value:function(){return null}}])})(F.Component);MK(x2,"displayName","ZAxis");MK(x2,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Hwe=["option","isActive"];function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jm.apply(this,arguments)}function Gwe(t,e){if(t==null)return{};var r=Kwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wwe(t){var e=t.option,r=t.isActive,n=Gwe(t,Hwe);return typeof e=="string"?F.createElement(jA,Jm({option:F.createElement(Xx,Jm({type:e},n)),isActive:r,shapeType:"symbols"},n)):F.createElement(jA,Jm({option:e,isActive:r,shapeType:"symbols"},n))}function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function ep(){return ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ep.apply(this,arguments)}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){Lc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LK(n.key),n)}}function Qwe(t,e,r){return e&&vU(t.prototype,e),r&&vU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ywe(t,e,r){return e=Gb(e),Zwe(t,DK()?Reflect.construct(e,r||[],Gb(t).constructor):e.apply(t,r))}function Zwe(t,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jwe(t)}function Jwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DK=function(){return!!t})()}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(t)}function e5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FA(t,e)}function FA(t,e){return FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},FA(t,e)}function Lc(t,e,r){return e=LK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LK(t){var e=t5e(t,"string");return Fh(e)=="symbol"?e:e+""}function t5e(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hg=(function(t){function e(){var r;Xwe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Ywe(this,e,[].concat(i)),Lc(r,"state",{isAnimationFinished:!1}),Lc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Lc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Lc(r,"id",Rg("recharts-scatter-")),r}return e5e(e,t),Qwe(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.activeShape,d=a.activeIndex,f=xt(this.props,!1);return n.map(function(m,p){var y=d===p,b=y?c:s,T=cs(cs({},f),m);return ne.createElement(fr,ep({className:"recharts-scatter-symbol",key:"symbol-".concat(m==null?void 0:m.cx,"-").concat(m==null?void 0:m.cy,"-").concat(m==null?void 0:m.size,"-").concat(p)},k0(i.props,m,p),{role:"img"}),ne.createElement(Wwe,ep({option:b,isActive:y,key:"symbol-".concat(p)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ne.createElement(Ao,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=a.map(function(S,w){var k=p&&p[w];if(k){var M=ba(k.cx,S.cx),C=ba(k.cy,S.cy),B=ba(k.size,S.size);return cs(cs({},S),{},{cx:M(b),cy:C(b),size:B(b)})}var R=ba(0,S.size);return cs(cs({},S),{},{size:R(b)})});return ne.createElement(fr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!Ug(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,c=i.yAxis,d=i.children,f=Ka(d,zg);return f?f.map(function(m,p){var y=m.props,b=y.direction,T=y.dataKey;return ne.cloneElement(m,{key:"".concat(b,"-").concat(T,"-").concat(a[p]),data:a,xAxis:s,yAxis:c,layout:b==="x"?"vertical":"horizontal",dataPointFormatter:function(w,k){return{x:w.cx,y:w.cy,value:b==="x"?+w.node.x:+w.node.y,errorVal:ji(w,k)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,s=n.lineType,c=n.lineJointType,d=xt(this.props,!1),f=xt(a,!1),m,p;if(s==="joint")m=i.map(function(C){return{x:C.cx,y:C.cy}});else if(s==="fitting"){var y=Zce(i),b=y.xmin,T=y.xmax,S=y.a,w=y.b,k=function(B){return S*B+w};m=[{x:b,y:k(b)},{x:T,y:k(T)}]}var M=cs(cs(cs({},d),{},{fill:"none",stroke:d&&d.fill},f),{},{points:m});return ne.isValidElement(a)?p=ne.cloneElement(a,M):Ct(a)?p=a(M):p=ne.createElement(pA,ep({},M,{type:c})),ne.createElement(fr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,s=n.line,c=n.className,d=n.xAxis,f=n.yAxis,m=n.left,p=n.top,y=n.width,b=n.height,T=n.id,S=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,k=zt("recharts-scatter",c),M=d&&d.allowDataOverflow,C=f&&f.allowDataOverflow,B=M||C,R=Dt(T)?this.id:T;return ne.createElement(fr,{className:k,clipPath:B?"url(#clipPath-".concat(R,")"):null},M||C?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(R)},ne.createElement("rect",{x:M?m:m-y/2,y:C?p:p-b/2,width:M?y:y*2,height:C?b:b*2}))):null,s&&this.renderLine(),this.renderErrorBar(),ne.createElement(fr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&_l.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(F.PureComponent);Lc(Hg,"displayName","Scatter");Lc(Hg,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!$0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Lc(Hg,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,a=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,f=i.props.tooltipType,m=Ka(i.props.children,gE),p=Dt(e.dataKey)?i.props.dataKey:e.dataKey,y=Dt(r.dataKey)?i.props.dataKey:r.dataKey,b=n&&n.dataKey,T=n?n.range:x2.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,k=r.scale.bandwidth?r.scale.bandwidth():0,M=a.map(function(C,B){var R=ji(C,p),I=ji(C,y),A=!Dt(b)&&ji(C,b)||"-",E=[{name:Dt(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:R,payload:C,dataKey:p,type:f},{name:Dt(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:I,payload:C,dataKey:y,type:f}];A!=="-"&&E.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:C,dataKey:b,type:f});var O=wL({axis:e,ticks:s,bandSize:w,entry:C,index:B,dataKey:p}),U=wL({axis:r,ticks:c,bandSize:k,entry:C,index:B,dataKey:y}),P=A!=="-"?n.scale(A):S,V=Math.sqrt(Math.max(P,0)/Math.PI);return cs(cs({},C),{},{cx:O,cy:U,x:O-V,y:U-V,xAxis:e,yAxis:r,zAxis:n,width:2*V,height:2*V,size:P,node:{x:R,y:I,z:A},tooltipPayload:E,tooltipPosition:{x:O,y:U},payload:C},m&&m[B]&&m[B].props)});return cs({points:M},d)});function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function r5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zK(n.key),n)}}function i5e(t,e,r){return e&&n5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a5e(t,e,r){return e=Kb(e),s5e(t,BK()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function s5e(t,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o5e(t)}function o5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BK=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}function l5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qA(t,e)}function qA(t,e){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qA(t,e)}function UK(t,e,r){return e=zK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zK(t){var e=c5e(t,"string");return qh(e)=="symbol"?e:e+""}function c5e(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HA.apply(this,arguments)}function u5e(t){var e=t.xAxisId,r=GE(),n=KE(),i=xK(e);return i==null?null:F.createElement(uf,HA({},i,{className:zt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return pl(s,!0)}}))}var w2=(function(t){function e(){return r5e(this,e),a5e(this,e,arguments)}return l5e(e,t),i5e(e,[{key:"render",value:function(){return F.createElement(u5e,this.props)}}])})(F.Component);UK(w2,"displayName","XAxis");UK(w2,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function d5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FK(n.key),n)}}function f5e(t,e,r){return e&&h5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m5e(t,e,r){return e=Wb(e),p5e(t,$K()?Reflect.construct(e,r||[],Wb(t).constructor):e.apply(t,r))}function p5e(t,e){if(e&&(Hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g5e(t)}function g5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $K(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($K=function(){return!!t})()}function Wb(t){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(t)}function y5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GA(t,e)}function GA(t,e){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GA(t,e)}function VK(t,e,r){return e=FK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FK(t){var e=v5e(t,"string");return Hh(e)=="symbol"?e:e+""}function v5e(t,e){if(Hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}var b5e=function(e){var r=e.yAxisId,n=GE(),i=KE(),a=wK(r);return a==null?null:F.createElement(uf,KA({},a,{className:zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(c){return pl(c,!0)}}))},_2=(function(t){function e(){return d5e(this,e),m5e(this,e,arguments)}return y5e(e,t),f5e(e,[{key:"render",value:function(){return F.createElement(b5e,this.props)}}])})(F.Component);VK(_2,"displayName","YAxis");VK(_2,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bU(t){return S5e(t)||_5e(t)||w5e(t)||x5e()}function x5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w5e(t,e){if(t){if(typeof t=="string")return WA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WA(t,e)}}function _5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function S5e(t){if(Array.isArray(t))return WA(t)}function WA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var XA=function(e,r,n,i,a){var s=Ka(e,XE),c=Ka(e,y2),d=[].concat(bU(s),bU(c)),f=Ka(e,b2),m="".concat(i,"Id"),p=i[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[m]===n&&bo(w.props,"extendDomain")&&et(w.props[p])){var k=w.props[p];return[Math.min(S[0],k),Math.max(S[1],k)]}return S},y)),f.length){var b="".concat(p,"1"),T="".concat(p,"2");y=f.reduce(function(S,w){if(w.props[m]===n&&bo(w.props,"extendDomain")&&et(w.props[b])&&et(w.props[T])){var k=w.props[b],M=w.props[T];return[Math.min(S[0],k,M),Math.max(S[1],k,M)]}return S},y)}return a&&a.length&&(y=a.reduce(function(S,w){return et(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},xS={exports:{}},xU;function T5e(){return xU||(xU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function a(d,f,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,p||d,y),T=r?r+f:f;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],b]:d._events[T].push(b):(d._events[T]=b,d._eventsCount++),d}function s(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,p;if(this._eventsCount===0)return f;for(p in m=this._events)e.call(m,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=r?r+f:f,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,b=p.length,T=new Array(b);y<b;y++)T[y]=p[y].fn;return T},c.prototype.listenerCount=function(f){var m=r?r+f:f,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(f,m,p,y,b,T){var S=r?r+f:f;if(!this._events[S])return!1;var w=this._events[S],k=arguments.length,M,C;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),k){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,y),!0;case 5:return w.fn.call(w.context,m,p,y,b),!0;case 6:return w.fn.call(w.context,m,p,y,b,T),!0}for(C=1,M=new Array(k-1);C<k;C++)M[C-1]=arguments[C];w.fn.apply(w.context,M)}else{var B=w.length,R;for(C=0;C<B;C++)switch(w[C].once&&this.removeListener(f,w[C].fn,void 0,!0),k){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,m);break;case 3:w[C].fn.call(w[C].context,m,p);break;case 4:w[C].fn.call(w[C].context,m,p,y);break;default:if(!M)for(R=1,M=new Array(k-1);R<k;R++)M[R-1]=arguments[R];w[C].fn.apply(w[C].context,M)}}return!0},c.prototype.on=function(f,m,p){return a(this,f,m,p,!1)},c.prototype.once=function(f,m,p){return a(this,f,m,p,!0)},c.prototype.removeListener=function(f,m,p,y){var b=r?r+f:f;if(!this._events[b])return this;if(!m)return s(this,b),this;var T=this._events[b];if(T.fn)T.fn===m&&(!y||T.once)&&(!p||T.context===p)&&s(this,b);else{for(var S=0,w=[],k=T.length;S<k;S++)(T[S].fn!==m||y&&!T[S].once||p&&T[S].context!==p)&&w.push(T[S]);w.length?this._events[b]=w.length===1?w[0]:w:s(this,b)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&s(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(xS)),xS.exports}var A5e=T5e();const E5e=vr(A5e);var wS=new E5e,_S="recharts.syncMouseEvents";function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function N5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qK(n.key),n)}}function O5e(t,e,r){return e&&k5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SS(t,e,r){return e=qK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qK(t){var e=j5e(t,"string");return og(e)=="symbol"?e:e+""}function j5e(t,e){if(og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C5e=(function(){function t(){N5e(this,t),SS(this,"activeIndex",0),SS(this,"coordinateList",[]),SS(this,"layout","horizontal")}return O5e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,c=s===void 0?null:s,d=r.layout,f=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,y=r.mouseHandlerCallback,b=y===void 0?null:y;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=f??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,d=this.coordinateList[this.activeIndex].coordinate,f=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=a+d+f,y=s+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])})();function I5e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&et(n)&&et(i))return!0}return!1}function R5e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function HK(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,s=Pr(e,r,n,i),c=Pr(e,r,n,a);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function M5e(t,e,r){var n,i,a,s;if(t==="horizontal")n=e.x,a=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,f=e.innerRadius,m=e.outerRadius,p=e.angle,y=Pr(c,d,f,p),b=Pr(c,d,m,p);n=y.x,i=y.y,a=b.x,s=b.y}else return HK(e);return[{x:n,y:i},{x:a,y:s}]}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){P5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P5e(t,e,r){return e=D5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D5e(t){var e=L5e(t,"string");return lg(e)=="symbol"?e:e+""}function L5e(t,e){if(lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B5e(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,f=t.activeTooltipIndex,m=t.tooltipAxisBandSize,p=t.layout,y=t.chartName,b=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!b||!a||!s||y!=="ScatterChart"&&i!=="axis")return null;var T,S=pA;if(y==="ScatterChart")T=s,S=Dbe;else if(y==="BarChart")T=R5e(p,s,d,m),S=VE;else if(p==="radial"){var w=HK(s),k=w.cx,M=w.cy,C=w.radius,B=w.startAngle,R=w.endAngle;T={cx:k,cy:M,startAngle:B,endAngle:R,innerRadius:C,outerRadius:C},S=VG}else T={points:M5e(p,s,d)},S=pA;var I=Hy(Hy(Hy(Hy({stroke:"#ccc",pointerEvents:"none"},d),T),xt(b,!1)),{},{payload:c,payloadIndex:f,className:zt("recharts-tooltip-cursor",b.className)});return F.isValidElement(b)?F.cloneElement(b,I):F.createElement(S,I)}var U5e=["item"],z5e=["children","className","width","height","style","compact","title","desc"];function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gd.apply(this,arguments)}function _U(t,e){return F5e(t)||V5e(t,e)||KK(t,e)||$5e()}function $5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function F5e(t){if(Array.isArray(t))return t}function SU(t,e){if(t==null)return{};var r=q5e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function q5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function H5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WK(n.key),n)}}function K5e(t,e,r){return e&&G5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W5e(t,e,r){return e=Xb(e),X5e(t,GK()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function X5e(t,e){if(e&&(Gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q5e(t)}function Q5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GK=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function Y5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},QA(t,e)}function Kh(t){return e3e(t)||J5e(t)||KK(t)||Z5e()}function Z5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(t,e){if(t){if(typeof t=="string")return YA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YA(t,e)}}function J5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e3e(t){if(Array.isArray(t))return YA(t)}function YA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function je(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){Et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Et(t,e,r){return e=WK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WK(t){var e=t3e(t,"string");return Gh(e)=="symbol"?e:e+""}function t3e(t,e){if(Gh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r3e={xAxis:["bottom","top"],yAxis:["left","right"]},n3e={width:"100%",height:"100%"},XK={x:0,y:0};function Gy(t){return t}var i3e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},a3e=function(e,r,n,i){var a=r.find(function(m){return m&&m.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,c=i.radius;return je(je(je({},i),Pr(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var d=a.coordinate,f=i.angle;return je(je(je({},i),Pr(i.cx,i.cy,d,f)),{},{angle:f,radius:d})}return XK},S2=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var f=d.props.data;return f&&f.length?[].concat(Kh(c),Kh(f)):c},[]);return s.length>0?s:e&&e.length&&et(i)&&et(a)?e.slice(i,a+1):[]};function QK(t){return t==="number"?[0,"auto"]:void 0}var ZA=function(e,r,n,i){var a=e.graphicalItems,s=e.tooltipAxis,c=S2(r,e);return n<0||!a||!a.length||n>=c.length?null:a.reduce(function(d,f){var m,p=(m=f.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var b=p===void 0?c:p;y=Xv(b,s.dataKey,i)}else y=p&&p[n]||c[n];return y?[].concat(Kh(d),[DG(f,y)]):d},[])},AU=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},s=i3e(a,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,f=e.tooltipTicks,m=i1e(s,c,f,d);if(m>=0&&f){var p=f[m]&&f[m].value,y=ZA(e,r,m,p),b=a3e(n,c,m,a);return{activeTooltipIndex:m,activeLabel:p,activePayload:y,activeCoordinate:b}}return null},s3e=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.layout,p=e.children,y=e.stackOffset,b=jG(m,a);return n.reduce(function(T,S){var w,k=S.type.defaultProps!==void 0?je(je({},S.type.defaultProps),S.props):S.props,M=k.type,C=k.dataKey,B=k.allowDataOverflow,R=k.allowDuplicatedCategory,I=k.scale,A=k.ticks,E=k.includeHidden,O=k[s];if(T[O])return T;var U=S2(e.data,{graphicalItems:i.filter(function(J){var le,Ee=s in J.props?J.props[s]:(le=J.type.defaultProps)===null||le===void 0?void 0:le[s];return Ee===O}),dataStartIndex:d,dataEndIndex:f}),P=U.length,V,z,Q;I5e(k.domain,B,M)&&(V=uA(k.domain,null,B),b&&(M==="number"||I!=="auto")&&(Q=Xm(U,C,"category")));var ee=QK(M);if(!V||V.length===0){var K,Z=(K=k.domain)!==null&&K!==void 0?K:ee;if(C){if(V=Xm(U,C,M),M==="category"&&b){var Y=Yce(V);R&&Y?(z=V,V=Pb(0,P)):R||(V=AL(Z,V,S).reduce(function(J,le){return J.indexOf(le)>=0?J:[].concat(Kh(J),[le])},[]))}else if(M==="category")R?V=V.filter(function(J){return J!==""&&!Dt(J)}):V=AL(Z,V,S).reduce(function(J,le){return J.indexOf(le)>=0||le===""||Dt(le)?J:[].concat(Kh(J),[le])},[]);else if(M==="number"){var pe=c1e(U,i.filter(function(J){var le,Ee,oe=s in J.props?J.props[s]:(le=J.type.defaultProps)===null||le===void 0?void 0:le[s],Oe="hide"in J.props?J.props.hide:(Ee=J.type.defaultProps)===null||Ee===void 0?void 0:Ee.hide;return oe===O&&(E||!Oe)}),C,a,m);pe&&(V=pe)}b&&(M==="number"||I!=="auto")&&(Q=Xm(U,C,"category"))}else b?V=Pb(0,P):c&&c[O]&&c[O].hasStack&&M==="number"?V=y==="expand"?[0,1]:PG(c[O].stackGroups,d,f):V=OG(U,i.filter(function(J){var le=s in J.props?J.props[s]:J.type.defaultProps[s],Ee="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return le===O&&(E||!Ee)}),M,m,!0);if(M==="number")V=XA(p,V,O,a,A),Z&&(V=uA(Z,V,B));else if(M==="category"&&Z){var ae=Z,X=V.every(function(J){return ae.indexOf(J)>=0});X&&(V=ae)}}return je(je({},T),{},Et({},O,je(je({},k),{},{axisType:a,domain:V,categoricalDomain:Q,duplicateDomain:z,originalDomain:(w=k.domain)!==null&&w!==void 0?w:ee,isCategorical:b,layout:m})))},{})},o3e=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.layout,p=e.children,y=S2(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:f}),b=y.length,T=jG(m,a),S=-1;return n.reduce(function(w,k){var M=k.type.defaultProps!==void 0?je(je({},k.type.defaultProps),k.props):k.props,C=M[s],B=QK("number");if(!w[C]){S++;var R;return T?R=Pb(0,b):c&&c[C]&&c[C].hasStack?(R=PG(c[C].stackGroups,d,f),R=XA(p,R,C,a)):(R=uA(B,OG(y,n.filter(function(I){var A,E,O=s in I.props?I.props[s]:(A=I.type.defaultProps)===null||A===void 0?void 0:A[s],U="hide"in I.props?I.props.hide:(E=I.type.defaultProps)===null||E===void 0?void 0:E.hide;return O===C&&!U}),"number",m),i.defaultProps.allowDataOverflow),R=XA(p,R,C,a)),je(je({},w),{},Et({},C,je(je({axisType:a},i.defaultProps),{},{hide:!0,orientation:ms(r3e,"".concat(a,".").concat(S%2),null),domain:R,originalDomain:B,isCategorical:T,layout:m})))}return w},{})},l3e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.children,p="".concat(i,"Id"),y=Ka(m,a),b={};return y&&y.length?b=s3e(e,{axes:y,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f}):s&&s.length&&(b=o3e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f})),b},c3e=function(e){var r=Rc(e),n=pl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:mE(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:wb(r,n)}},EU=function(e){var r=e.children,n=e.defaultShowTooltip,i=Ba(r,Dh),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},u3e=function(e){return!e||!e.length?!1:e.some(function(r){var n=bl(r&&r.type);return n&&n.indexOf("Bar")>=0})},NU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},d3e=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,c=e.yAxisMap,d=c===void 0?{}:c,f=n.width,m=n.height,p=n.children,y=n.margin||{},b=Ba(p,Dh),T=Ba(p,th),S=Object.keys(d).reduce(function(R,I){var A=d[I],E=A.orientation;return!A.mirror&&!A.hide?je(je({},R),{},Et({},E,R[E]+A.width)):R},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(R,I){var A=s[I],E=A.orientation;return!A.mirror&&!A.hide?je(je({},R),{},Et({},E,ms(R,"".concat(E))+A.height)):R},{top:y.top||0,bottom:y.bottom||0}),k=je(je({},w),S),M=k.bottom;b&&(k.bottom+=b.props.height||Dh.defaultProps.height),T&&r&&(k=o1e(k,i,n,r));var C=f-k.left-k.right,B=m-k.top-k.bottom;return je(je({brushBottom:M},k),{},{width:Math.max(C,0),height:Math.max(B,0)})},h3e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},YK=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,f=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,y=function(k,M){var C=M.graphicalItems,B=M.stackGroups,R=M.offset,I=M.updateId,A=M.dataStartIndex,E=M.dataEndIndex,O=k.barSize,U=k.layout,P=k.barGap,V=k.barCategoryGap,z=k.maxBarSize,Q=NU(U),ee=Q.numericAxisName,K=Q.cateAxisName,Z=u3e(C),Y=[];return C.forEach(function(pe,ae){var X=S2(k.data,{graphicalItems:[pe],dataStartIndex:A,dataEndIndex:E}),J=pe.type.defaultProps!==void 0?je(je({},pe.type.defaultProps),pe.props):pe.props,le=J.dataKey,Ee=J.maxBarSize,oe=J["".concat(ee,"Id")],Oe=J["".concat(K,"Id")],Me={},at=d.reduce(function(rt,bt){var Ze=M["".concat(bt.axisType,"Map")],Tt=J["".concat(bt.axisType,"Id")];Ze&&Ze[Tt]||bt.axisType==="zAxis"||j0();var Vt=Ze[Tt];return je(je({},rt),{},Et(Et({},bt.axisType,Vt),"".concat(bt.axisType,"Ticks"),pl(Vt)))},Me),Ae=at[K],$e=at["".concat(K,"Ticks")],de=B&&B[oe]&&B[oe].hasStack&&v1e(pe,B[oe].stackGroups),ge=bl(pe.type).indexOf("Bar")>=0,Ye=wb(Ae,$e),Ke=[],it=Z&&a1e({barSize:O,stackGroups:B,totalSize:h3e(at,K)});if(ge){var ut,er,Ie=Dt(Ee)?z:Ee,se=(ut=(er=wb(Ae,$e,!0))!==null&&er!==void 0?er:Ie)!==null&&ut!==void 0?ut:0;Ke=s1e({barGap:P,barCategoryGap:V,bandSize:se!==Ye?se:Ye,sizeList:it[Oe],maxBarSize:Ie}),se!==Ye&&(Ke=Ke.map(function(rt){return je(je({},rt),{},{position:je(je({},rt.position),{},{offset:rt.position.offset-se/2})})}))}var Ve=pe&&pe.type&&pe.type.getComposedData;Ve&&Y.push({props:je(je({},Ve(je(je({},at),{},{displayedData:X,props:k,dataKey:le,item:pe,bandSize:Ye,barPosition:Ke,offset:R,stackedData:de,layout:U,dataStartIndex:A,dataEndIndex:E}))),{},Et(Et(Et({key:pe.key||"item-".concat(ae)},ee,at[ee]),K,at[K]),"animationId",I)),childIndex:uue(pe,k.children),item:pe})}),Y},b=function(k,M){var C=k.props,B=k.dataStartIndex,R=k.dataEndIndex,I=k.updateId;if(!UR({props:C}))return null;var A=C.children,E=C.layout,O=C.stackOffset,U=C.data,P=C.reverseStackOrder,V=NU(E),z=V.numericAxisName,Q=V.cateAxisName,ee=Ka(A,n),K=g1e(U,ee,"".concat(z,"Id"),"".concat(Q,"Id"),O,P),Z=d.reduce(function(J,le){var Ee="".concat(le.axisType,"Map");return je(je({},J),{},Et({},Ee,l3e(C,je(je({},le),{},{graphicalItems:ee,stackGroups:le.axisType===z&&K,dataStartIndex:B,dataEndIndex:R}))))},{}),Y=d3e(je(je({},Z),{},{props:C,graphicalItems:ee}),M==null?void 0:M.legendBBox);Object.keys(Z).forEach(function(J){Z[J]=m(C,Z[J],Y,J.replace("Map",""),r)});var pe=Z["".concat(Q,"Map")],ae=c3e(pe),X=y(C,je(je({},Z),{},{dataStartIndex:B,dataEndIndex:R,updateId:I,graphicalItems:ee,stackGroups:K,offset:Y}));return je(je({formattedGraphicalItems:X,graphicalItems:ee,offset:Y,stackGroups:K},ae),Z)},T=(function(w){function k(M){var C,B,R;return H5e(this,k),R=W5e(this,k,[M]),Et(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Et(R,"accessibilityManager",new C5e),Et(R,"handleLegendBBoxUpdate",function(I){if(I){var A=R.state,E=A.dataStartIndex,O=A.dataEndIndex,U=A.updateId;R.setState(je({legendBBox:I},b({props:R.props,dataStartIndex:E,dataEndIndex:O,updateId:U},je(je({},R.state),{},{legendBBox:I}))))}}),Et(R,"handleReceiveSyncEvent",function(I,A,E){if(R.props.syncId===I){if(E===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(A)}}),Et(R,"handleBrushChange",function(I){var A=I.startIndex,E=I.endIndex;if(A!==R.state.dataStartIndex||E!==R.state.dataEndIndex){var O=R.state.updateId;R.setState(function(){return je({dataStartIndex:A,dataEndIndex:E},b({props:R.props,dataStartIndex:A,dataEndIndex:E,updateId:O},R.state))}),R.triggerSyncEvent({dataStartIndex:A,dataEndIndex:E})}}),Et(R,"handleMouseEnter",function(I){var A=R.getMouseInfo(I);if(A){var E=je(je({},A),{},{isTooltipActive:!0});R.setState(E),R.triggerSyncEvent(E);var O=R.props.onMouseEnter;Ct(O)&&O(E,I)}}),Et(R,"triggeredAfterMouseMove",function(I){var A=R.getMouseInfo(I),E=A?je(je({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(E),R.triggerSyncEvent(E);var O=R.props.onMouseMove;Ct(O)&&O(E,I)}),Et(R,"handleItemMouseEnter",function(I){R.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),Et(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),Et(R,"handleMouseMove",function(I){I.persist(),R.throttleTriggeredAfterMouseMove(I)}),Et(R,"handleMouseLeave",function(I){R.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};R.setState(A),R.triggerSyncEvent(A);var E=R.props.onMouseLeave;Ct(E)&&E(A,I)}),Et(R,"handleOuterEvent",function(I){var A=cue(I),E=ms(R.props,"".concat(A));if(A&&Ct(E)){var O,U;/.*touch.*/i.test(A)?U=R.getMouseInfo(I.changedTouches[0]):U=R.getMouseInfo(I),E((O=U)!==null&&O!==void 0?O:{},I)}}),Et(R,"handleClick",function(I){var A=R.getMouseInfo(I);if(A){var E=je(je({},A),{},{isTooltipActive:!0});R.setState(E),R.triggerSyncEvent(E);var O=R.props.onClick;Ct(O)&&O(E,I)}}),Et(R,"handleMouseDown",function(I){var A=R.props.onMouseDown;if(Ct(A)){var E=R.getMouseInfo(I);A(E,I)}}),Et(R,"handleMouseUp",function(I){var A=R.props.onMouseUp;if(Ct(A)){var E=R.getMouseInfo(I);A(E,I)}}),Et(R,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),Et(R,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&R.handleMouseDown(I.changedTouches[0])}),Et(R,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&R.handleMouseUp(I.changedTouches[0])}),Et(R,"handleDoubleClick",function(I){var A=R.props.onDoubleClick;if(Ct(A)){var E=R.getMouseInfo(I);A(E,I)}}),Et(R,"handleContextMenu",function(I){var A=R.props.onContextMenu;if(Ct(A)){var E=R.getMouseInfo(I);A(E,I)}}),Et(R,"triggerSyncEvent",function(I){R.props.syncId!==void 0&&wS.emit(_S,R.props.syncId,I,R.eventEmitterSymbol)}),Et(R,"applySyncEvent",function(I){var A=R.props,E=A.layout,O=A.syncMethod,U=R.state.updateId,P=I.dataStartIndex,V=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)R.setState(je({dataStartIndex:P,dataEndIndex:V},b({props:R.props,dataStartIndex:P,dataEndIndex:V,updateId:U},R.state)));else if(I.activeTooltipIndex!==void 0){var z=I.chartX,Q=I.chartY,ee=I.activeTooltipIndex,K=R.state,Z=K.offset,Y=K.tooltipTicks;if(!Z)return;if(typeof O=="function")ee=O(Y,I);else if(O==="value"){ee=-1;for(var pe=0;pe<Y.length;pe++)if(Y[pe].value===I.activeLabel){ee=pe;break}}var ae=je(je({},Z),{},{x:Z.left,y:Z.top}),X=Math.min(z,ae.x+ae.width),J=Math.min(Q,ae.y+ae.height),le=Y[ee]&&Y[ee].value,Ee=ZA(R.state,R.props.data,ee),oe=Y[ee]?{x:E==="horizontal"?Y[ee].coordinate:X,y:E==="horizontal"?J:Y[ee].coordinate}:XK;R.setState(je(je({},I),{},{activeLabel:le,activeCoordinate:oe,activePayload:Ee,activeTooltipIndex:ee}))}else R.setState(I)}),Et(R,"renderCursor",function(I){var A,E=R.state,O=E.isTooltipActive,U=E.activeCoordinate,P=E.activePayload,V=E.offset,z=E.activeTooltipIndex,Q=E.tooltipAxisBandSize,ee=R.getTooltipEventType(),K=(A=I.props.active)!==null&&A!==void 0?A:O,Z=R.props.layout,Y=I.key||"_recharts-cursor";return ne.createElement(B5e,{key:Y,activeCoordinate:U,activePayload:P,activeTooltipIndex:z,chartName:r,element:I,isActive:K,layout:Z,offset:V,tooltipAxisBandSize:Q,tooltipEventType:ee})}),Et(R,"renderPolarAxis",function(I,A,E){var O=ms(I,"type.axisType"),U=ms(R.state,"".concat(O,"Map")),P=I.type.defaultProps,V=P!==void 0?je(je({},P),I.props):I.props,z=U&&U[V["".concat(O,"Id")]];return F.cloneElement(I,je(je({},z),{},{className:zt(O,z.className),key:I.key||"".concat(A,"-").concat(E),ticks:pl(z,!0)}))}),Et(R,"renderPolarGrid",function(I){var A=I.props,E=A.radialLines,O=A.polarAngles,U=A.polarRadius,P=R.state,V=P.radiusAxisMap,z=P.angleAxisMap,Q=Rc(V),ee=Rc(z),K=ee.cx,Z=ee.cy,Y=ee.innerRadius,pe=ee.outerRadius;return F.cloneElement(I,{polarAngles:Array.isArray(O)?O:pl(ee,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(U)?U:pl(Q,!0).map(function(ae){return ae.coordinate}),cx:K,cy:Z,innerRadius:Y,outerRadius:pe,key:I.key||"polar-grid",radialLines:E})}),Et(R,"renderLegend",function(){var I=R.state.formattedGraphicalItems,A=R.props,E=A.children,O=A.width,U=A.height,P=R.props.margin||{},V=O-(P.left||0)-(P.right||0),z=NG({children:E,formattedGraphicalItems:I,legendWidth:V,legendContent:f});if(!z)return null;var Q=z.item,ee=SU(z,U5e);return F.cloneElement(Q,je(je({},ee),{},{chartWidth:O,chartHeight:U,margin:P,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),Et(R,"renderTooltip",function(){var I,A=R.props,E=A.children,O=A.accessibilityLayer,U=Ba(E,lo);if(!U)return null;var P=R.state,V=P.isTooltipActive,z=P.activeCoordinate,Q=P.activePayload,ee=P.activeLabel,K=P.offset,Z=(I=U.props.active)!==null&&I!==void 0?I:V;return F.cloneElement(U,{viewBox:je(je({},K),{},{x:K.left,y:K.top}),active:Z,label:ee,payload:Z?Q:[],coordinate:z,accessibilityLayer:O})}),Et(R,"renderBrush",function(I){var A=R.props,E=A.margin,O=A.data,U=R.state,P=U.offset,V=U.dataStartIndex,z=U.dataEndIndex,Q=U.updateId;return F.cloneElement(I,{key:I.key||"_recharts-brush",onChange:$y(R.handleBrushChange,I.props.onChange),data:O,x:et(I.props.x)?I.props.x:P.left,y:et(I.props.y)?I.props.y:P.top+P.height+P.brushBottom-(E.bottom||0),width:et(I.props.width)?I.props.width:P.width,startIndex:V,endIndex:z,updateId:"brush-".concat(Q)})}),Et(R,"renderReferenceElement",function(I,A,E){if(!I)return null;var O=R,U=O.clipPathId,P=R.state,V=P.xAxisMap,z=P.yAxisMap,Q=P.offset,ee=I.type.defaultProps||{},K=I.props,Z=K.xAxisId,Y=Z===void 0?ee.xAxisId:Z,pe=K.yAxisId,ae=pe===void 0?ee.yAxisId:pe;return F.cloneElement(I,{key:I.key||"".concat(A,"-").concat(E),xAxis:V[Y],yAxis:z[ae],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:U})}),Et(R,"renderActivePoints",function(I){var A=I.item,E=I.activePoint,O=I.basePoint,U=I.childIndex,P=I.isRange,V=[],z=A.props.key,Q=A.item.type.defaultProps!==void 0?je(je({},A.item.type.defaultProps),A.item.props):A.item.props,ee=Q.activeDot,K=Q.dataKey,Z=je(je({index:U,dataKey:K,cx:E.x,cy:E.y,r:4,fill:$E(A.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},xt(ee,!1)),Qv(ee));return V.push(k.renderActiveDot(ee,Z,"".concat(z,"-activePoint-").concat(U))),O?V.push(k.renderActiveDot(ee,je(je({},Z),{},{cx:O.x,cy:O.y}),"".concat(z,"-basePoint-").concat(U))):P&&V.push(null),V}),Et(R,"renderGraphicChild",function(I,A,E){var O=R.filterFormatItem(I,A,E);if(!O)return null;var U=R.getTooltipEventType(),P=R.state,V=P.isTooltipActive,z=P.tooltipAxis,Q=P.activeTooltipIndex,ee=P.activeLabel,K=R.props.children,Z=Ba(K,lo),Y=O.props,pe=Y.points,ae=Y.isRange,X=Y.baseLine,J=O.item.type.defaultProps!==void 0?je(je({},O.item.type.defaultProps),O.item.props):O.item.props,le=J.activeDot,Ee=J.hide,oe=J.activeBar,Oe=J.activeShape,Me=!!(!Ee&&V&&Z&&(le||oe||Oe)),at={};U!=="axis"&&Z&&Z.props.trigger==="click"?at={onClick:$y(R.handleItemMouseEnter,I.props.onClick)}:U!=="axis"&&(at={onMouseLeave:$y(R.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:$y(R.handleItemMouseEnter,I.props.onMouseEnter)});var Ae=F.cloneElement(I,je(je({},O.props),at));function $e(bt){return typeof z.dataKey=="function"?z.dataKey(bt.payload):null}if(Me)if(Q>=0){var de,ge;if(z.dataKey&&!z.allowDuplicatedCategory){var Ye=typeof z.dataKey=="function"?$e:"payload.".concat(z.dataKey.toString());de=Xv(pe,Ye,ee),ge=ae&&X&&Xv(X,Ye,ee)}else de=pe==null?void 0:pe[Q],ge=ae&&X&&X[Q];if(Oe||oe){var Ke=I.props.activeIndex!==void 0?I.props.activeIndex:Q;return[F.cloneElement(I,je(je(je({},O.props),at),{},{activeIndex:Ke})),null,null]}if(!Dt(de))return[Ae].concat(Kh(R.renderActivePoints({item:O,activePoint:de,basePoint:ge,childIndex:Q,isRange:ae})))}else{var it,ut=(it=R.getItemByXY(R.state.activeCoordinate))!==null&&it!==void 0?it:{graphicalItem:Ae},er=ut.graphicalItem,Ie=er.item,se=Ie===void 0?I:Ie,Ve=er.childIndex,rt=je(je(je({},O.props),at),{},{activeIndex:Ve});return[F.cloneElement(se,rt),null,null]}return ae?[Ae,null,null]:[Ae,null]}),Et(R,"renderCustomized",function(I,A,E){return F.cloneElement(I,je(je({key:"recharts-customized-".concat(E)},R.props),R.state))}),Et(R,"renderMap",{CartesianGrid:{handler:Gy,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Gy},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Gy},YAxis:{handler:Gy},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((C=M.id)!==null&&C!==void 0?C:Rg("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=EH(R.triggeredAfterMouseMove,(B=M.throttleDelay)!==null&&B!==void 0?B:1e3/60),R.state={},R}return Y5e(k,w),K5e(k,[{key:"componentDidMount",value:function(){var C,B;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(B=this.props.margin.top)!==null&&B!==void 0?B:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,B=C.children,R=C.data,I=C.height,A=C.layout,E=Ba(B,lo);if(E){var O=E.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,P=ZA(this.state,R,O,U),V=this.state.tooltipTicks[O].coordinate,z=(this.state.offset.top+I)/2,Q=A==="horizontal",ee=Q?{x:V,y:z}:{y:V,x:z},K=this.state.formattedGraphicalItems.find(function(Y){var pe=Y.item;return pe.type.name==="Scatter"});K&&(ee=je(je({},ee),K.props.points[O].tooltipPosition),P=K.props.points[O].tooltipPayload);var Z={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:U,activePayload:P,activeCoordinate:ee};this.setState(Z),this.renderCursor(E),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,B){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==B.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var R,I;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(C){IT([Ba(C.children,lo)],[Ba(this.props.children,lo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ba(this.props.children,lo);if(C&&typeof C.props.shared=="boolean"){var B=C.props.shared?"axis":"item";return c.indexOf(B)>=0?B:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var B=this.container,R=B.getBoundingClientRect(),I=Qhe(R),A={chartX:Math.round(C.pageX-I.left),chartY:Math.round(C.pageY-I.top)},E=R.width/B.offsetWidth||1,O=this.inRange(A.chartX,A.chartY,E);if(!O)return null;var U=this.state,P=U.xAxisMap,V=U.yAxisMap,z=this.getTooltipEventType(),Q=AU(this.state,this.props.data,this.props.layout,O);if(z!=="axis"&&P&&V){var ee=Rc(P).scale,K=Rc(V).scale,Z=ee&&ee.invert?ee.invert(A.chartX):null,Y=K&&K.invert?K.invert(A.chartY):null;return je(je({},A),{},{xValue:Z,yValue:Y},Q)}return Q?je(je({},A),Q):null}},{key:"inRange",value:function(C,B){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,A=C/R,E=B/R;if(I==="horizontal"||I==="vertical"){var O=this.state.offset,U=A>=O.left&&A<=O.left+O.width&&E>=O.top&&E<=O.top+O.height;return U?{x:A,y:E}:null}var P=this.state,V=P.angleAxisMap,z=P.radiusAxisMap;if(V&&z){var Q=Rc(V);return kL({x:A,y:E},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,B=this.getTooltipEventType(),R=Ba(C,lo),I={};R&&B==="axis"&&(R.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=Qv(this.props,this.handleOuterEvent);return je(je({},A),I)}},{key:"addListener",value:function(){wS.on(_S,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){wS.removeListener(_S,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,B,R){for(var I=this.state.formattedGraphicalItems,A=0,E=I.length;A<E;A++){var O=I[A];if(O.item===C||O.props.key===C.key||B===bl(O.item.type)&&R===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,B=this.state.offset,R=B.left,I=B.top,A=B.height,E=B.width;return ne.createElement("defs",null,ne.createElement("clipPath",{id:C},ne.createElement("rect",{x:R,y:I,height:A,width:E})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(B,R){var I=_U(R,2),A=I[0],E=I[1];return je(je({},B),{},Et({},A,E.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(B,R){var I=_U(R,2),A=I[0],E=I[1];return je(je({},B),{},Et({},A,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var B;return(B=this.state.xAxisMap)===null||B===void 0||(B=B[C])===null||B===void 0?void 0:B.scale}},{key:"getYScaleByAxisId",value:function(C){var B;return(B=this.state.yAxisMap)===null||B===void 0||(B=B[C])===null||B===void 0?void 0:B.scale}},{key:"getItemByXY",value:function(C){var B=this.state,R=B.formattedGraphicalItems,I=B.activeItem;if(R&&R.length)for(var A=0,E=R.length;A<E;A++){var O=R[A],U=O.props,P=O.item,V=P.type.defaultProps!==void 0?je(je({},P.type.defaultProps),P.props):P.props,z=bl(P.type);if(z==="Bar"){var Q=(U.data||[]).find(function(Y){return ybe(C,Y)});if(Q)return{graphicalItem:O,payload:Q}}else if(z==="RadialBar"){var ee=(U.data||[]).find(function(Y){return kL(C,Y)});if(ee)return{graphicalItem:O,payload:ee}}else if(f2(O,I)||m2(O,I)||rg(O,I)){var K=Qxe({graphicalItem:O,activeTooltipItem:I,itemData:V.data}),Z=V.activeIndex===void 0?K:V.activeIndex;return{graphicalItem:je(je({},O),{},{childIndex:Z}),payload:rg(O,I)?V.data[K]:O.props.data[K]}}}return null}},{key:"render",value:function(){var C=this;if(!UR(this))return null;var B=this.props,R=B.children,I=B.className,A=B.width,E=B.height,O=B.style,U=B.compact,P=B.title,V=B.desc,z=SU(B,z5e),Q=xt(z,!1);if(U)return ne.createElement(iU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement(MT,Gd({},Q,{width:A,height:E,title:P,desc:V}),this.renderClipPath(),$R(R,this.renderMap)));if(this.props.accessibilityLayer){var ee,K;Q.tabIndex=(ee=this.props.tabIndex)!==null&&ee!==void 0?ee:0,Q.role=(K=this.props.role)!==null&&K!==void 0?K:"application",Q.onKeyDown=function(Y){C.accessibilityManager.keyboardEvent(Y)},Q.onFocus=function(){C.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return ne.createElement(iU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement("div",Gd({className:zt("recharts-wrapper",I),style:je({position:"relative",cursor:"default",width:A,height:E},O)},Z,{ref:function(pe){C.container=pe}}),ne.createElement(MT,Gd({},Q,{width:A,height:E,title:P,desc:V,style:n3e}),this.renderClipPath(),$R(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(F.Component);Et(T,"displayName",r),Et(T,"defaultProps",je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Et(T,"getDerivedStateFromProps",function(w,k){var M=w.dataKey,C=w.data,B=w.children,R=w.width,I=w.height,A=w.layout,E=w.stackOffset,O=w.margin,U=k.dataStartIndex,P=k.dataEndIndex;if(k.updateId===void 0){var V=EU(w);return je(je(je({},V),{},{updateId:0},b(je(je({props:w},V),{},{updateId:0}),k)),{},{prevDataKey:M,prevData:C,prevWidth:R,prevHeight:I,prevLayout:A,prevStackOffset:E,prevMargin:O,prevChildren:B})}if(M!==k.prevDataKey||C!==k.prevData||R!==k.prevWidth||I!==k.prevHeight||A!==k.prevLayout||E!==k.prevStackOffset||!eh(O,k.prevMargin)){var z=EU(w),Q={chartX:k.chartX,chartY:k.chartY,isTooltipActive:k.isTooltipActive},ee=je(je({},AU(k,C,A)),{},{updateId:k.updateId+1}),K=je(je(je({},z),Q),ee);return je(je(je({},K),b(je({props:w},K),k)),{},{prevDataKey:M,prevData:C,prevWidth:R,prevHeight:I,prevLayout:A,prevStackOffset:E,prevMargin:O,prevChildren:B})}if(!IT(B,k.prevChildren)){var Z,Y,pe,ae,X=Ba(B,Dh),J=X&&(Z=(Y=X.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&Z!==void 0?Z:U,le=X&&(pe=(ae=X.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&pe!==void 0?pe:P,Ee=J!==U||le!==P,oe=!Dt(C),Oe=oe&&!Ee?k.updateId:k.updateId+1;return je(je({updateId:Oe},b(je(je({props:w},k),{},{updateId:Oe,dataStartIndex:J,dataEndIndex:le}),k)),{},{prevChildren:B,dataStartIndex:J,dataEndIndex:le})}return null}),Et(T,"renderActiveDot",function(w,k,M){var C;return F.isValidElement(w)?C=F.cloneElement(w,k):Ct(w)?C=w(k):C=ne.createElement(u2,k),ne.createElement(fr,{className:"recharts-active-dot",key:M},C)});var S=F.forwardRef(function(k,M){return ne.createElement(T,Gd({},k,{ref:M}))});return S.displayName=T.displayName,S},f3e=YK({chartName:"RadarChart",GraphicalChild:Fg,axisComponents:[{axisType:"angleAxis",AxisComp:Vg},{axisType:"radiusAxis",AxisComp:$g}],formatAxisMap:O1e,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),m3e=YK({chartName:"ScatterChart",GraphicalChild:Hg,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:w2},{axisType:"yAxis",AxisComp:_2},{axisType:"zAxis",AxisComp:x2}],formatAxisMap:s4e});function kU(t,e=800){const[r,n]=F.useState(t),i=F.useRef(t),a=F.useRef(0);return F.useEffect(()=>{const s=i.current,c=t;if(i.current=t,s===c)return;const d=performance.now(),f=c-s,m=p=>{const y=p-d,b=Math.min(y/e,1),T=1-Math.pow(1-b,3);n(Math.round(s+f*T)),b<1&&(a.current=requestAnimationFrame(m))};return a.current=requestAnimationFrame(m),()=>cancelAnimationFrame(a.current)},[t,e]),r}const ZK=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],JK=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],p3e=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],OU={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},Dd=t=>t?OU[t.rarity]||OU.COMMON:null,g3e=(t,e)=>{const n=100-e,i=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${i} 30 ${i-2} 40 Q${i-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${i+3} 22 ${i+1} 46 Q${i-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${i+2} 24 ${i} 46 Q${i-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${i+3} 44 Q${i+6} 55 ${i+4} 85 Q${i+2} 92 ${i-4} 88 L${i-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${i+1} 26 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Qb=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:i})=>{const a=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)==="B",c=ZK[(e==null?void 0:e.skinTone)??0],d=JK[(e==null?void 0:e.hairColor)??0],f=(e==null?void 0:e.hairStyle)??1,m=c+"99",p=t==null?void 0:t.HEAD,y=t==null?void 0:t.CHEST,b=t==null?void 0:t.HANDS,T=t==null?void 0:t.FEET,S=t==null?void 0:t.BELT,w=t==null?void 0:t.AMULET,k=F.useMemo(()=>[p,y,b,T,S,w].filter(Boolean).length,[p,y,b,T,S,w]),M=F.useMemo(()=>[p,y,b,T,S,w].some(I=>(I==null?void 0:I.rarity)==="UNIQUE"),[p,y,b,T,S,w]),C=Math.min(1,.2+k*.13),B=s?23:21,R=F.useMemo(()=>g3e(f,B),[f,B]);return u.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[u.jsxs("defs",{children:[u.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[u.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[u.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[u.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 20%, 20%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 18%, 12%)`})]}),u.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsla(${a+240}, 30%, 35%, 0.2)`}),u.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),u.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 15%, 16%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 12%, 10%)`})]}),u.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[u.jsx("stop",{offset:"0%",stopColor:c}),u.jsx("stop",{offset:"100%",stopColor:m})]}),u.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 100%, 70%)`,stopOpacity:C}),u.jsx("stop",{offset:"60%",stopColor:`hsl(${a+200}, 80%, 50%)`,stopOpacity:C*.3}),u.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),u.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:d}),u.jsx("stop",{offset:"100%",stopColor:d+"cc"})]})]}),u.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:u.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),u.jsxs("g",{children:[u.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&u.jsxs("g",{filter:"url(#av-bloom)",children:[u.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),u.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),u.jsx("path",{d:s?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),u.jsx("path",{d:s?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),T?(()=>{const I=Dd(T);return u.jsxs("g",{filter:I.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:I.primary,stroke:I.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),u.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:I.primary,stroke:I.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),u.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:I.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),u.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:I.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),I.intensity>=.7&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:I.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:I.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():u.jsxs("g",{children:[u.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"}),u.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"})]}),u.jsx("path",{d:s?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"1"}),u.jsx("path",{d:s?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),u.jsx("path",{d:"M88 88 L100 105 L112 88",fill:c}),u.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${a+240},20%,28%)`,strokeWidth:"1.2"}),u.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${a+180},30%,40%,0.08)`,strokeWidth:"0.5"}),y&&(()=>{const I=Dd(y);return u.jsxs("g",{filter:I.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:s?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:I.primary,fillOpacity:"0.3",stroke:I.primary,strokeWidth:"1",strokeOpacity:"0.6"}),u.jsx("path",{d:`M${s?64:68} 88 Q${s?56:60} 86 ${s?56:60} 96 L${s?66:70} 100`,fill:I.primary,fillOpacity:"0.5",stroke:I.particle,strokeWidth:"0.5"}),u.jsx("path",{d:`M${s?136:132} 88 Q${s?144:140} 86 ${s?144:140} 96 L${s?134:130} 100`,fill:I.primary,fillOpacity:"0.5",stroke:I.particle,strokeWidth:"0.5"}),u.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:I.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),u.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:I.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),u.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:I.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),u.jsx("circle",{cx:"100",cy:"120",r:"2",fill:I.particle,fillOpacity:"0.7",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),I.intensity>=.7&&u.jsxs("g",{children:[u.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:I.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:I.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),S?(()=>{const I=Dd(S);return u.jsxs("g",{children:[u.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:I.primary,fillOpacity:"0.55",stroke:I.primary,strokeWidth:"0.8"}),u.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:I.particle,fillOpacity:"0.4"}),u.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:I.primary,fillOpacity:"0.3",stroke:I.particle,strokeWidth:"0.3"}),u.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:I.primary,fillOpacity:"0.3",stroke:I.particle,strokeWidth:"0.3"})]})})():u.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${a+240},15%,25%)`,strokeWidth:"1.5"}),u.jsx("path",{d:s?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),u.jsx("path",{d:s?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),b?(()=>{const I=Dd(b);return u.jsxs("g",{filter:I.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:I.primary,fillOpacity:"0.5",stroke:I.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),u.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:I.primary,fillOpacity:"0.5",stroke:I.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),u.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:I.particle,strokeWidth:"1",strokeOpacity:"0.5"}),u.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:I.particle,strokeWidth:"1",strokeOpacity:"0.5"}),I.intensity>=.7&&u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"50",cy:"168",r:"2",fill:I.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"150",cy:"168",r:"2",fill:I.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():u.jsxs("g",{children:[u.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:c}),u.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:c})]}),k>0&&u.jsxs(u.Fragment,{children:[u.jsx("g",{filter:"url(#av-bloom)",children:u.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:u.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),u.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${a+180},100%,75%)`,fillOpacity:C*.7,children:u.jsx("animate",{attributeName:"fillOpacity",values:`${C*.7};${C*.3};${C*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),k>=3&&u.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${a+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),u.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:c}),w&&(()=>{const I=Dd(w);return u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:I.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),u.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:I.primary,stroke:I.particle,strokeWidth:"0.8",children:u.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"100",cy:"97",r:"2",fill:I.particle,children:u.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),u.jsxs("g",{children:[R.back&&u.jsx("path",{d:R.back,fill:"url(#av-hair)",opacity:"0.8"}),u.jsx("ellipse",{cx:"100",cy:"50",rx:B,ry:"28",fill:"url(#av-face)",stroke:m,strokeWidth:"0.5"}),u.jsx("ellipse",{cx:100-B-1,cy:"52",rx:"4",ry:"6",fill:c,stroke:m,strokeWidth:"0.3"}),u.jsx("ellipse",{cx:100+B+1,cy:"52",rx:"4",ry:"6",fill:c,stroke:m,strokeWidth:"0.3"}),u.jsxs("g",{children:[u.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:d,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),u.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:d,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),u.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),u.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),u.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),u.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),u.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),u.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),u.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),u.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),u.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:c,children:u.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:c,children:u.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),u.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:m,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),u.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:m,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),u.jsx("path",{d:R.main,fill:"url(#av-hair)"}),R.accent&&u.jsx("path",{d:R.accent,fill:"url(#av-hair)",opacity:"0.9"}),p&&(()=>{const I=Dd(p),A=p.visualId||"";return u.jsx("g",{filter:I.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:A.includes("helm")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:`M${100-B-2} 28 Q100 10 ${100+B+2} 28 L${100+B+4} 62 Q100 72 ${100-B-4} 62 Z`,fill:I.primary,fillOpacity:"0.55",stroke:I.primary,strokeWidth:"1.2"}),u.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${a+180},90%,55%)`,fillOpacity:"0.85",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):A.includes("visor")?u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${a+180},80%,50%,0.7)`,stroke:I.primary,strokeWidth:"1",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:I.primary,strokeWidth:"1.5"}),u.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:I.primary,strokeWidth:"1.5"})]}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:I.primary,fillOpacity:"0.7",stroke:I.particle,strokeWidth:"0.5"}),u.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:I.primary,strokeWidth:"1.5"}),u.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:I.primary,strokeWidth:"1.5"}),u.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:I.particle,fillOpacity:"0.3",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:I.particle,fillOpacity:"0.3",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:I.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&u.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((I,A)=>u.jsx("polygon",{points:`${100+I},16 ${97+I},22 ${103+I},22`,fill:"#fbbf24",fillOpacity:"0.6",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+A*.2}s`,repeatCount:"indefinite"})},A))]}),M&&u.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((I,A)=>{const E=I*Math.PI/180,O=100+Math.cos(E)*50,U=145+Math.sin(E)*75;return u.jsxs("circle",{cx:O,cy:U,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[u.jsx("animate",{attributeName:"cy",values:`${U};${U-18};${U}`,dur:`${2+A*.3}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+A*.3}s`,repeatCount:"indefinite"})]},A)})}),r>=5&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),u.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((I,A)=>{const E=A*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),O=100+Math.cos(E)*(38+A*3),U=140+Math.sin(E)*(55+A*2),P=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${a+180},70%,60%)`;return u.jsxs("circle",{cx:O,cy:U,r:"1",fill:P,fillOpacity:"0.35",children:[u.jsx("animate",{attributeName:"cy",values:`${U};${U-12};${U}`,dur:`${2+A*.4}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+A*.4}s`,repeatCount:"indefinite"})]},A)})}),n&&i&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((I,A)=>{const E=60+Math.random()*80,O=20+Math.random()*260;return u.jsxs("circle",{cx:E,cy:O,r:1+Math.random(),fill:i,fillOpacity:"0.45",children:[u.jsx("animate",{attributeName:"cy",values:`${O};${O-25};${O}`,dur:`${3+A*.5}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+A*.5}s`,repeatCount:"indefinite"})]},`c-${A}`)})})]})]})},ZE=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],y3e=t=>ZE.filter(e=>!e.isSecret||t.includes(e.id)),v3e={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},eW=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],jU=(t,e)=>{const r=eW.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},b3e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],tW=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of b3e){const i=n.itemIds.filter(s=>r.includes(s)).length,a=n.bonuses.filter(s=>i>=s.count).sort((s,c)=>c.count-s.count);a.length>0&&e.push({set:n,activeBonus:a[0]})}return e},x3e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],CU=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],rW=t=>[...CU].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||CU[0],w3e=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,_3e={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},S3e=({unlockedAchievements:t,achievementProgress:e})=>{const r=F.useMemo(()=>y3e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],i=t.length,a=ZE.filter(s=>!s.isSecret).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(E0,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),u.jsxs("span",{className:"text-sm text-gray-400",children:[i,"/",a," unlocked"]})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${i/a*100}%`}})}),n.map(s=>{const c=r.filter(f=>f.category===s);if(c.length===0)return null;const d=_3e[s];return u.jsxs("div",{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[u.jsx("span",{children:d.icon})," ",d.label]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(f=>{const m=t.includes(f.id),p=e[f.id]||0,y=Math.min(100,p/f.condition.target*100);return u.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${m?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[u.jsx("span",{className:`text-2xl ${m?"":"grayscale opacity-40"}`,children:f.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-sm font-bold ${m?"text-yellow-400":"text-gray-400"}`,children:f.title}),f.isSecret&&!m&&u.jsx(wp,{className:"w-3 h-3 text-gray-600"})]}),u.jsx("p",{className:"text-[10px] text-gray-500",children:f.description}),!m&&u.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[p,"/",f.condition.target]})]})]}),m&&u.jsxs("div",{className:"text-right shrink-0",children:[u.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",f.xpReward," XP"]}),f.fluxReward&&u.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",f.fluxReward," Flux"]})]})]},f.id)})})]},s)})]})},T3e={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},A3e=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,i]=F.useState(t||null),[a,s]=F.useState(null),c=qi(),d=!!t,f=n||"THEORIST",m=eW.filter(b=>b.specialization===f),p=[1,2,3,4],y=async(b,T)=>{if(!a){s(b);try{await Fe.unlockSkill(b,f,T),Ei.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}s(null)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point each time you level up"})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[u.jsx(Kn,{className:"w-4 h-4 text-yellow-400"}),u.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(v3e).map(([b,T])=>{const S=f===b,w=d&&t!==b;return u.jsxs("button",{onClick:()=>!w&&i(b),disabled:w,className:`p-3 rounded-xl border text-left transition-all ${S?`border-white/30 bg-gradient-to-br ${T3e[b]} bg-opacity-10`:w?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:T.icon}),u.jsx("span",{className:"font-bold text-sm text-white",children:T.name}),w&&u.jsx(wp,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:T.description})]},b)})}),u.jsx("div",{className:"space-y-4",children:p.map(b=>{const T=m.filter(S=>S.tier===b);return u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",b]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(S=>{const w=r.includes(S.id),k=!w&&jU(S.id,r)&&e>=S.cost,M=jU(S.id,r);return u.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${w?"border-green-500/30 bg-green-500/10":k?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>k&&y(S.id,S.cost),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:S.icon}),u.jsx("span",{className:"text-xs font-bold text-white truncate",children:S.name}),w&&u.jsx(An,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!w&&!M&&u.jsx(wp,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400",children:S.description}),!w&&u.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",S.cost," SP"]}),a===S.id&&u.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},S.id)})})]},b)})})]})},TS=25,Ky=x3e,E3e=({currency:t,lastSpin:e,classType:r})=>{const[n,i]=F.useState(!1),[a,s]=F.useState(0),[c,d]=F.useState(null),f=F.useRef(null),m=qi(),p=new Date().toISOString().split("T")[0],y=e===p,b=!y&&t>=TS&&!n,T=async()=>{if(b){i(!0),d(null),Ei.wheelSpin();try{const k=await Fe.spinFortuneWheel(r),M=Ky.findIndex(R=>R.id===k.prizeId),C=360/Ky.length,B=360*5+(360-M*C-C/2);s(R=>R+B),setTimeout(()=>{Ei.wheelPrize(),d(k.rewardDescription),i(!1),k.prizeType!=="NOTHING"?m.success(`You won: ${k.rewardDescription}!`):m.info(k.rewardDescription)},4e3)}catch(k){i(!1),m.error(k instanceof Error?k.message:"Spin failed")}}},S=360/Ky.length,w=140;return u.jsxs("div",{className:"flex flex-col items-center gap-6",children:[u.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",TS," Flux for a daily spin"]}),u.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[u.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),u.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:u.jsxs("g",{style:{transform:`rotate(${a}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:f,children:[Ky.map((k,M)=>{const C=(M*S-90)*(Math.PI/180),B=((M+1)*S-90)*(Math.PI/180),R=w*Math.cos(C),I=w*Math.sin(C),A=w*Math.cos(B),E=w*Math.sin(B),O=S>180?1:0,U=((M+.5)*S-90)*(Math.PI/180),P=w*.65*Math.cos(U),V=w*.65*Math.sin(U),z=(M+.5)*S;return u.jsxs("g",{children:[u.jsx("path",{d:`M0,0 L${R},${I} A${w},${w} 0 ${O},1 ${A},${E} Z`,fill:k.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),u.jsx("text",{x:P,y:V,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${z}, ${P}, ${V})`,children:k.label})]},k.id)}),u.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),u.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&u.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[u.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),u.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),u.jsx("button",{onClick:T,disabled:!b,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${b?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${TS} Flux)`})]})},N3e=({userId:t,userName:e,classType:r})=>{const[n,i]=F.useState([]),[a,s]=F.useState(null),[c,d]=F.useState(null),f=qi();F.useEffect(()=>{let p;try{p=Fe.subscribeToBossEncounters(y=>{const b=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");i(b)})}catch{}return()=>p==null?void 0:p()},[r]);const m=async p=>{if(!a){s(p);try{const y=5+Math.floor(Math.random()*20),b=await Fe.dealBossDamage(p,y,e);Ei.bossHit(),d({bossId:p,damage:b.damageDealt}),setTimeout(()=>d(null),1500),b.bossDefeated?(Ei.bossDefeated(),f.success("Boss defeated! Rewards incoming!")):f.info(`Dealt ${b.damageDealt} damage! (+${b.xpEarned} XP)`)}catch(y){f.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[u.jsx(Kae,{className:"w-5 h-5"})," Active Threats"]}),n.map(p=>{var C;const y=p.currentHp/p.maxHp*100,b=new Date(p.deadline).getTime()-Date.now(),T=Math.max(0,Math.floor(b/36e5)),S=[...p.damageLog||[]].reduce((B,R)=>(B[R.userId]||(B[R.userId]={name:R.userName,total:0}),B[R.userId].total+=R.damage,B),{}),w=Object.entries(S).sort(([,B],[,R])=>R.total-B.total).slice(0,5),k=((C=S[t])==null?void 0:C.total)||0,M=(c==null?void 0:c.bossId)===p.id;return u.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[M&&u.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),u.jsxs("div",{className:"p-5 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-black text-red-400",children:p.name}),u.jsx("p",{className:"text-xs text-gray-500",children:p.description})]}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[u.jsx(ps,{className:"w-3 h-3"}),T>0?`${T}h left`:"Expiring soon"]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[p.currentHp.toLocaleString()," HP"]}),u.jsx("span",{className:"text-gray-600",children:p.maxHp.toLocaleString()})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:u.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${y>50?"bg-gradient-to-r from-red-600 to-red-500":y>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${y}%`}})})]}),M&&c&&u.jsx("div",{className:"text-center animate-bounce",children:u.jsxs("span",{className:"text-xl font-black text-red-400",children:["-",c.damage]})}),k>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[u.jsx(fs,{className:"w-3 h-3"}),"Your total damage: ",u.jsx("span",{className:"text-white font-bold",children:k})]}),w.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[u.jsx(Zc,{className:"w-3 h-3"})," Top Attackers"]}),w.map(([B,R],I)=>u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:`${B===t?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",I+1," ",R.name]}),u.jsxs("span",{className:"text-red-400 font-mono",children:[R.total," dmg"]})]},B))]}),u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Kn,{className:"w-3 h-3 text-yellow-400"})," ",p.completionRewards.xp," XP"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-cyan-400",children:"~"})," ",p.completionRewards.flux," Flux"]}),p.completionRewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[p.completionRewards.itemRarity," item"]})]}),u.jsx("button",{onClick:()=>m(p.id),disabled:!!a,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all ${a===p.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:a===p.id?"Attacking...":"Attack!"})]})]},p.id)})]})},k3e=({classType:t})=>{const[e,r]=F.useState([]),[n,i]=F.useState(0),[a,s]=F.useState(null),[c,d]=F.useState(null),[f,m]=F.useState(!1),p=qi();F.useEffect(()=>{let b;try{b=Fe.subscribeToBossQuizzes(t,r)}catch{}return()=>b==null?void 0:b()},[t]);const y=async(b,T,S)=>{if(!f){m(!0),s(S);try{const w=await Fe.answerBossQuiz(b,T,S);w.alreadyAnswered?p.info("Already answered this question!"):w.correct?(Ei.bossHit(),p.success(`Correct! Dealt ${w.damage} damage!`)):p.error("Incorrect. No damage dealt."),d({correct:w.correct,damage:w.damage}),setTimeout(()=>{i(k=>k+1),s(null),d(null)},2e3)}catch(w){p.error(w instanceof Error?w.message:"Failed to submit answer")}m(!1)}};return e.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[u.jsx(yh,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),e.map(b=>{const T=b.currentHp/b.maxHp*100,S=b.questions[n%b.questions.length],w=n>=b.questions.length;return u.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-base font-black text-amber-400",children:b.bossName}),u.jsx("p",{className:"text-xs text-gray-500",children:b.description})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[b.currentHp," HP"]}),u.jsx("span",{className:"text-gray-600",children:b.maxHp})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:u.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${T}%`}})})]}),w?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(An,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):S?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("span",{children:["Question ",n+1," / ",b.questions.length]}),u.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${S.difficulty==="HARD"?"bg-red-500/20 text-red-400":S.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[S.difficulty,S.damageBonus?` (+${S.damageBonus} dmg)`:""]})]}),u.jsx("p",{className:"text-sm text-white font-medium",children:S.stem}),u.jsx("div",{className:"space-y-2",children:S.options.map((k,M)=>{const C=a===M,B=c&&C,R=c==null?void 0:c.correct;return u.jsx("button",{onClick:()=>y(b.id,S.id,M),disabled:f||!!c,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${B&&R?"border-green-500/50 bg-green-500/10 text-green-400":B&&!R?"border-red-500/50 bg-red-500/10 text-red-400":C?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+M),"."]}),u.jsx("span",{children:k}),B&&R&&u.jsx(An,{className:"w-4 h-4 text-green-400 ml-auto"}),B&&!R&&u.jsx(bp,{className:"w-4 h-4 text-red-400 ml-auto"})]})},M)})}),c&&c.correct&&u.jsxs("div",{className:"text-center text-sm text-amber-400 font-bold animate-bounce",children:[u.jsx(Kn,{className:"w-4 h-4 inline mr-1"}),"-",c.damage," HP!"]})]}):null,u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsx("span",{children:"Defeat rewards:"}),u.jsxs("span",{className:"text-yellow-400",children:[b.rewards.xp," XP"]}),u.jsxs("span",{className:"text-cyan-400",children:[b.rewards.flux," Flux"]}),b.rewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[b.rewards.itemRarity," item"]})]})]},b.id)})]})},O3e=({activeChallenges:t,classType:e})=>{const[r,n]=F.useState([]),[i,a]=F.useState(null),s=qi();F.useEffect(()=>{let y;try{y=Fe.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(b=>b.challengeId===y),d=async y=>{if(!i){a(y);try{const b=await Fe.claimDailyChallenge(y,e);Ei.dailyReward(),s.success(`Claimed! +${b.xpReward} XP${b.fluxReward?` +${b.fluxReward} Flux`:""}`)}catch(b){s.error(b instanceof Error?b.message:"Claim failed")}a(null)}};if(r.length===0)return null;const f=r.filter(y=>!y.isWeekly),m=r.filter(y=>y.isWeekly),p=y=>{const b=c(y.id),T=(b==null?void 0:b.progress)||0,S=(b==null?void 0:b.completed)||!1,w=!!(b!=null&&b.claimedAt),k=Math.min(100,T/y.target*100);return u.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?u.jsx(An,{className:"w-4 h-4 text-green-400"}):S?u.jsx(Aae,{className:"w-4 h-4 text-yellow-400"}):u.jsx(So,{className:"w-4 h-4 text-gray-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&u.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),u.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${k}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&u.jsx("button",{onClick:()=>d(y.id),disabled:!!i,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:i===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(pae,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),u.jsx("div",{className:"space-y-2",children:f.map(p)}),m.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[u.jsx(Kn,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),u.jsx("div",{className:"space-y-2",children:m.map(p)})]})]})},AS={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},j3e=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[i,a]=F.useState([]),[s,c]=F.useState(!1),[d,f]=F.useState(""),[m,p]=F.useState(!1),y=qi();F.useEffect(()=>{let C;try{C=Fe.subscribeToTutoringSessions(r,a)}catch{}return()=>C==null?void 0:C()},[r]);const b=async()=>{if(!(!d.trim()||m)){p(!0);try{await Fe.createTutoringRequest(t,e,d,r),y.success("Tutoring request posted!"),f(""),c(!1)}catch{y.error("Failed to create request")}p(!1)}},T=async C=>{try{await Fe.claimTutorRole(C,t,e),y.success("You are now the tutor for this session!")}catch{y.error("Failed to claim tutor role")}},S=async(C,B)=>{try{const R=await Fe.completeTutoring(C,B);y.success(`Verified! Tutor earned ${R.xpAwarded} XP and ${R.fluxAwarded} Flux`)}catch{y.error("Failed to verify session")}},w=i.filter(C=>C.status==="OPEN"),k=i.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),M=i.filter(C=>["COMPLETED","VERIFIED"].includes(C.status));return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(vh,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),u.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[u.jsx(Nl,{className:"w-3 h-3"})," Request Help"]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[u.jsx("input",{value:d,onChange:C=>f(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:b,disabled:!d.trim()||m,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:m?"Posting...":"Post Request"}),u.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),w.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(uv,{className:"w-3 h-3"})," Open Requests"]}),w.map(C=>u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AS[C.status]}`,children:C.status})]}),C.requesterId!==t&&u.jsxs("button",{onClick:()=>T(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[u.jsx(Zc,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),k.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(ps,{className:"w-3 h-3"})," Active Sessions"]}),k.map(C=>u.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AS[C.status]} mt-1 inline-block`,children:C.status}),n&&C.tutorId&&C.status!=="VERIFIED"&&u.jsxs("button",{onClick:()=>S(C.id,C.tutorId),className:"mt-2 ml-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[u.jsx(An,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),M.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(An,{className:"w-3 h-3 text-green-400"})," Completed (",M.length,")"]}),M.slice(0,3).map(C=>u.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AS[C.status]}`,children:C.status})]},C.id))]}),i.length===0&&u.jsxs("div",{className:"text-center py-6 text-gray-600",children:[u.jsx(vh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),u.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},C3e=({item:t,onClose:e})=>{const[r,n]=F.useState("chest"),i=Qr(t.rarity);F.useEffect(()=>{Ei.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const a={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:u.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&u.jsxs("div",{className:"animate-in zoom-in duration-500",children:[u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),u.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),u.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[u.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),u.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&u.jsx("div",{className:"animate-in zoom-in duration-300",children:u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[u.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>u.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[u.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&u.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[u.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${i.border} ${i.bg} shadow-2xl ${a[t.rarity]}`,children:[u.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${i.text} mb-2`,children:t.rarity}),u.jsx("h3",{className:`text-lg font-black ${i.text}`,children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),u.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>u.jsxs("div",{className:"flex justify-between text-xs",children:[u.jsx("span",{className:"text-gray-400 capitalize",children:s}),u.jsxs("span",{className:`font-bold ${i.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&u.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>u.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&u.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&u.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>u.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),u.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},I3e=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],R3e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],M3e=({user:t,classType:e,onClose:r})=>{var I,A,E;const[n,i]=ne.useState(!1),a=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=a.level||1,c=xh(s),d=rW(s),{equipped:f,appearance:m}=Ux(t,e),p=Bx({gamification:{...a,equipped:f}}),y=jg(f),b=((I=a.classXp)==null?void 0:I[e])||0,T=(A=t.settings)==null?void 0:A.privacyMode,S=T?a.codename||"Unknown Agent":t.name,w=Object.values(f).filter(Boolean),k=tW(w),M=a.unlockedAchievements||[],C=F.useMemo(()=>ZE.filter(O=>M.includes(O.id)),[M]),B=Math.max(p.tech,p.focus,p.analysis,p.charisma,1),R=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(m==null?void 0:m.hue)||180}, 70%, 30%), transparent 70%)`}}),u.jsxs("div",{className:"relative flex items-center gap-6",children:[u.jsx("div",{className:"w-32 h-44 shrink-0",children:u.jsx(Qb,{equipped:f,appearance:m})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),u.jsx("button",{onClick:R,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?u.jsx(kx,{className:"w-4 h-4 text-green-400"}):u.jsx(pT,{className:"w-4 h-4"})})]}),u.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),u.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),u.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:b.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-xl font-black text-orange-400",children:[a.engagementStreak||0,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-purple-400",children:M.length}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),a.specialization&&u.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:u.jsx("span",{className:"text-xs text-gray-300 font-bold",children:a.specialization})})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(So,{className:"w-3 h-3"})," Combat Stats"]}),u.jsx("div",{className:"space-y-2",children:I3e.map(({key:O,label:U,color:P,bg:V})=>{const z=p[O]||0,Q=z/B*100;return u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-xs text-gray-400",children:U}),u.jsx("span",{className:`text-xs font-bold ${P}`,children:z})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full ${V} transition-all`,style:{width:`${Q}%`}})})]},O)})})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(fs,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"space-y-1.5",children:R3e.map(O=>{const U=f[O];if(!U)return u.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[u.jsx("span",{className:"font-mono w-12 text-[10px]",children:O}),u.jsx("span",{className:"italic",children:"Empty"})]},O);const P=Qr(U.rarity);return u.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${P.border} ${P.bg}`,children:[u.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:O}),u.jsx("span",{className:`text-xs font-bold truncate ${P.text}`,children:U.name})]},O)})})]}),k.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[u.jsx(k8,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),k.map(({set:O,activeBonus:U})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[u.jsx("span",{className:"text-purple-400 font-bold",children:O.name}),u.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",U.label]})]},O.id))]})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(E0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",M.length,")"]}),C.length>0?u.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.slice(0,12).map(O=>u.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[u.jsx("div",{className:"text-xl",children:O.icon}),u.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:O.title})]},O.id))}):u.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(E8,{className:"w-3.5 h-3.5 text-orange-400"}),u.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),u.jsxs("span",{className:"text-orange-400 font-bold",children:[a.engagementStreak||0," weeks"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(Wae,{className:"w-3.5 h-3.5 text-red-400"}),u.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),u.jsx("span",{className:"text-red-400 font-bold",children:((E=a.completedQuests)==null?void 0:E.length)||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(vh,{className:"w-3.5 h-3.5 text-green-400"}),u.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),u.jsx("span",{className:"text-green-400 font-bold",children:a.tutoringSessionsCompleted||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(Kn,{className:"w-3.5 h-3.5 text-cyan-400"}),u.jsx("span",{className:"text-gray-400",children:"Total XP:"}),u.jsx("span",{className:"text-cyan-400 font-bold",children:(a.xp||0).toLocaleString()})]})]})]})]})]})]})})},P3e={Textbook:u.jsx(qs,{className:"w-5 h-5"}),Simulation:u.jsx(bF,{className:"w-5 h-5 fill-current"}),"Lab Guide":u.jsx(Ox,{className:"w-5 h-5"}),"Practice Set":u.jsx(So,{className:"w-5 h-5"}),Article:u.jsx(yF,{className:"w-5 h-5"}),"Video Lesson":u.jsx(SF,{className:"w-5 h-5"}),Supplemental:u.jsx(N8,{className:"w-5 h-5"})};let Tm=0,IU=!1,RU=!1;const D3e=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:i,onStartAssignment:a,studentTab:s="RESOURCES"})=>{var Ii,sa,fn,Qs,Ri,Hi,Ys,kn,yi,Zs,Mi,Sr,Hr,mn,oa,Pi,Js,Ns,la,lt,ce,Le,Xe,jt,qt,Gr,Tr,Kr,sr;const c=qi(),{confirm:d}=ou(),[f,m]=F.useState(new Set),[p,y]=F.useState(t.classType||((Ii=t.enrolledClasses)==null?void 0:Ii[0])||"Unassigned"),[b,T]=F.useState(null),[S,w]=F.useState([]),[k,M]=F.useState(!1),[C,B]=F.useState(null);Tm===0&&(Tm=((sa=t.gamification)==null?void 0:sa.lastLevelSeen)||1);const R=s,[I,A]=F.useState(!1),[E,O]=F.useState(null),[U,P]=F.useState(!1),[V,z]=F.useState(null),[Q,ee]=F.useState(null),[K,Z]=F.useState(null),[Y,pe]=F.useState(null),[ae,X]=F.useState(null),[J,le]=F.useState(null),[Ee,oe]=F.useState(!1),[Oe,Me]=F.useState(null),[at,Ae]=F.useState(!1);F.useEffect(()=>{var He,mt,Pt;const fe=((He=t.gamification)==null?void 0:He.level)||1,Ce=Math.max(((mt=t.gamification)==null?void 0:mt.lastLevelSeen)||1,Tm);if(fe>Ce){Tm=fe;const kr=((Pt=t.gamification)==null?void 0:Pt.inventory)||[],br=kr.length>0?kr[kr.length-1]:null;B(br),M(!0),Ei.levelUp()}},[(fn=t.gamification)==null?void 0:fn.level,(Qs=t.gamification)==null?void 0:Qs.lastLevelSeen,(Ri=t.gamification)==null?void 0:Ri.inventory]),F.useEffect(()=>{const fe=[];try{fe.push(Fe.subscribeToXPEvents(Ce=>{const He=Ce.find(mt=>mt.isActive&&(mt.type==="GLOBAL"||mt.targetClass===p));T(He||null)}))}catch{}try{fe.push(Fe.subscribeToQuests(Ce=>{w(Ce.filter(He=>{if(!He.isActive)return!1;const mt=new Date;return!(He.startsAt&&new Date(He.startsAt)>mt||He.expiresAt&&new Date(He.expiresAt)<mt)}))}))}catch{}return()=>fe.forEach(Ce=>Ce())},[p]);const $e=((Ys=(Hi=t.gamification)==null?void 0:Hi.classXp)==null?void 0:Ys[p])||0,de=ne.useRef($e);F.useEffect(()=>{if($e>de.current&&de.current>=0){const fe=$e-de.current;if(fe>0&&fe<500){le(fe),Ei.xpGain();const Ce=setTimeout(()=>le(null),2e3);return()=>clearTimeout(Ce)}}de.current=$e},[$e]),F.useEffect(()=>{var He;if(IU)return;IU=!0;const fe=new Date().toISOString().split("T")[0];((He=t.gamification)==null?void 0:He.lastLoginRewardDate)!==fe&&!at&&Fe.claimDailyLogin().then(mt=>{mt.alreadyClaimed||(Ae(!0),Ei.dailyReward(),c.success(`Daily login: +${mt.xpReward} XP, +${mt.fluxReward} Flux (${mt.streak}-day streak!)`))}).catch(()=>{})},[]),F.useEffect(()=>{RU||(RU=!0,Fe.updateEngagementStreak().catch(()=>{}))},[]);const[ge,Ye]=F.useState([]);F.useEffect(()=>{let fe;try{fe=Fe.subscribeToAnnouncements(Ye)}catch{}return()=>fe==null?void 0:fe()},[]);const Ke=F.useMemo(()=>{var Ce;const fe=((Ce=t.gamification)==null?void 0:Ce.dismissedAnnouncements)||[];return ge.filter(He=>!fe.includes(He.id)&&(He.classType==="GLOBAL"||He.classType===p))},[ge,(kn=t.gamification)==null?void 0:kn.dismissedAnnouncements,p]),it=async fe=>{await Fe.dismissAnnouncement(t.id,fe)},ut=()=>{var Ce;const fe=((Ce=t.gamification)==null?void 0:Ce.level)||1;Tm=fe,M(!1),B(null),Fe.updateUserLastLevelSeen(t.id,fe).catch(()=>{})},er=async fe=>{try{await Fe.updateUserAppearance(t.id,fe,p),c.success("Profile updated!")}catch{c.error("Failed to save  try again")}A(!1)},Ie=t.enrolledClasses||(t.classType?[t.classType]:[]),se=F.useMemo(()=>Bx(t),[t]),Ve=F.useMemo(()=>{var fe;return jg((fe=t.gamification)==null?void 0:fe.equipped)},[(yi=t.gamification)==null?void 0:yi.equipped]),rt=F.useMemo(()=>{const fe=t.gamification||{},He={...fe.achievementProgress||{}},mt=fe.xp||0,Pt=fe.level||1,kr=fe.inventory||[],br=fe.completedQuests||[],Wr=fe.engagementStreak||0,eo=fe.loginStreak||0,Ro=fe.tutoringSessionsCompleted||0,$l=fe.bossesDefeated||0,fu=fe.challengesCompleted||0,Vl=fe.itemsCrafted||0,Kt=(Xr,ks)=>{(!He[Xr]||ks>He[Xr])&&(He[Xr]=ks)};return Kt("first_steps",mt),Kt("xp_5k",mt),Kt("xp_25k",mt),Kt("rising_star",Pt),Kt("veteran",Pt),Kt("elite",Pt),Kt("legend",Pt),Kt("collector_10",kr.length),Kt("collector_50",kr.length),Kt("gear_score_100",Ve),Kt("gear_score_500",Ve),Kt("first_mission",br.length),Kt("mission_5",br.length),Kt("mission_20",br.length),Kt("boss_slayer",$l),Kt("streak_3",Wr),Kt("streak_8",Wr),Kt("streak_16",Wr),Kt("login_7",eo),Kt("login_30",eo),Kt("challenges_10",fu),Kt("tutor_1",Ro),Kt("tutor_10",Ro),Kt("tech_50",se.tech),Kt("focus_50",se.focus),Kt("analysis_50",se.analysis),Kt("charisma_50",se.charisma),Kt("craft_10",Vl),He},[t,Ve,se]),bt=[{subject:"Tech",A:se.tech,fullMark:100},{subject:"Focus",A:se.focus,fullMark:100},{subject:"Analysis",A:se.analysis,fullMark:100},{subject:"Charisma",A:se.charisma,fullMark:100}],Ze=F.useMemo(()=>{const fe={};return e.filter(Ce=>Ce.classType===p&&Ce.status!=="DRAFT").forEach(Ce=>{var Pt;const He=r.find(kr=>kr.assignmentId===Ce.id),mt=Ce.unit||"General Resources";fe[mt]||(fe[mt]=[]),fe[mt].push({...Ce,lastEngagement:He&&He.submittedAt||null,engagementTime:((Pt=He==null?void 0:He.metrics)==null?void 0:Pt.engagementTime)||0})}),fe},[e,r,p]),Tt=fe=>{const Ce=new Set(f);Ce.has(fe)?Ce.delete(fe):Ce.add(fe),m(Ce)},Vt=((Zs=t.gamification)==null?void 0:Zs.level)||1,Bt=((Mi=t.gamification)==null?void 0:Mi.currency)||0,At=$e,nr=At%1e3/1e3*100,an=kU(At),qr=kU(Bt),Yn=xh(Vt),dn=async fe=>{const Ce=fe.target.value;y(Ce),await Fe.switchUserView(t.id,Ce)},pi=async fe=>{try{await Fe.equipItem(t.id,fe,p),O(null),Ei.equip(),c.success(`${fe.name} equipped.`)}catch{c.error("Failed to equip item.")}},Br=async()=>{if(!E)return;const fe=NI(E);if(await d({message:`Salvage ${E.name} for ${fe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){P(!0);try{await Fe.disenchantItem(t.id,E,p),O(null),Ei.salvage(),c.success(`Salvaged for ${fe} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{P(!1)}}},hn=async fe=>{if(!E)return;const Ce=Vu[fe];if(Bt<Ce)return c.error("Insufficient Cyber-Flux.");P(!0);try{await Fe.craftItem(t.id,E,fe,p),O(null),Ei.craft(),c.success(`${fe.charAt(0)+fe.slice(1).toLowerCase()} complete.`)}catch{c.error("Fabrication protocol failed.")}finally{P(!1)}},lr=((Sr=t.gamification)==null?void 0:Sr.activeQuests)||[],Ci=((Hr=t.gamification)==null?void 0:Hr.completedQuests)||[],Qa=S.filter(fe=>lr.some(Ce=>Ce.questId===fe.id)),Ts=S.filter(fe=>!lr.some(Ce=>Ce.questId===fe.id)&&!Ci.includes(fe.id)),As=async fe=>{try{await Fe.acceptQuest(t.id,fe.id),Ei.questAccept(),c.success(`Contract accepted: ${fe.title}`)}catch{c.error("Failed to accept contract.")}},Ln=async fe=>{const Ce=fe.type==="CUSTOM";if(await d({message:Ce?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:Ce?"Submit":"Deploy",variant:"info"}))try{await Fe.deployMission(t.id,fe),Ei.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},gr=F.useMemo(()=>Ux(t,p),[t,p]),Bn=gr.equipped,tr=gr.inventory,gi=["HEAD","HANDS","RING1","AMULET"],Xs=["CHEST","BELT","FEET","RING2"],Es=({slot:fe})=>{const Ce=Bn[fe],He=Ce?Qr(Ce.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},mt=()=>fe==="HEAD"?u.jsx(Kn,{className:`w-5 h-5 ${He.text}`}):fe==="CHEST"?u.jsx(fs,{className:`w-5 h-5 ${He.text}`}):fe==="HANDS"?u.jsx(uv,{className:`w-5 h-5 ${He.text}`}):fe==="FEET"?u.jsx(An,{className:`w-5 h-5 ${He.text}`}):fe==="BELT"?u.jsx(Xw,{className:`w-5 h-5 ${He.text}`}):fe==="AMULET"?u.jsx(Yw,{className:`w-5 h-5 ${He.text}`}):u.jsx(Zd,{className:`w-5 h-5 ${He.text}`});return u.jsx("button",{className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-110 ${He.border} ${He.bg} ${He.shimmer} ${He.glow}`,onClick:()=>Ce&&O(Ce),children:Ce?u.jsxs(u.Fragment,{children:[mt(),u.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${He.text}`,children:Ce.baseName||Ce.name.split(" ").slice(-1)[0]}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${He.text}`,children:Ce.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[Ce.rarity," ",fe]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(Ce.stats).map(([Pt,kr])=>`+${kr} ${Pt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):u.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:fe.slice(0,4)})})};return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Ke.length>0&&u.jsx("div",{className:"lg:col-span-12 space-y-2",children:Ke.map(fe=>{const Ce={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return u.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${Ce[fe.priority]}`,children:[u.jsx(yT,{className:"w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-bold text-sm text-white",children:fe.title}),u.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:fe.content})]}),u.jsx("button",{onClick:()=>it(fe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:u.jsx(ys,{className:"w-4 h-4"})})]},fe.id)})}),b&&u.jsx("div",{className:"lg:col-span-12",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:u.jsx(Kn,{className:"w-5 h-5 fill-current"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[b.title," ACTIVE"]}),u.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",b.multiplier,"x XP on all tasks."]})]})]}),u.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[b.multiplier,"x"]})]})}),u.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[u.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Yn.tierColor.split(" ")[0]} border-opacity-30`,children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Yn.tierGlow} shadow-xl`,children:u.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Yn.tierColor.split(" ")[0]}`})}),u.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((mn=t.gamification)==null?void 0:mn.codename)||t.name}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Yn.tierColor.split(" ")[1]}`,children:[Yn.rankName," (Lvl ",Vt,")"]}),u.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Ve]})]}),Ie.length>1&&u.jsxs("div",{className:"mt-4 relative w-full",children:[u.jsx("select",{value:p,onChange:dn,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:Ie.map(fe=>u.jsx("option",{value:fe,children:fe},fe))}),u.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),u.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${nr}%`}})}),u.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[u.jsxs("span",{children:[an.toLocaleString()," XP (",p,")"]}),u.jsx("span",{children:"Next Rank"}),J&&u.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",J," XP"]})]})]})]}),u.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:u.jsx(kae,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-white leading-none",children:qr})]})]})}),(((oa=t.gamification)==null?void 0:oa.engagementStreak)||0)>0&&(()=>{var He;const fe=((He=t.gamification)==null?void 0:He.engagementStreak)||0,Ce=w3e(fe);return u.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:u.jsx(E8,{className:"w-6 h-6"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),u.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[fe,"w"]})]}),Ce>1&&u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),u.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((Ce-1)*100),"%"]})]})]})})})(),(((Pi=t.gamification)==null?void 0:Pi.loginStreak)||0)>1&&u.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[u.jsx(Hae,{className:"w-5 h-5 text-purple-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),u.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((Js=t.gamification)==null?void 0:Js.loginStreak)||0," day streak"]})]})]}),u.jsxs("button",{onClick:()=>oe(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[u.jsx(xp,{className:"w-4 h-4"})," View Profile"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&u.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:u.jsx(Ox,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),u.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),u.jsx(h0,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&u.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:u.jsx(Pae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),u.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),u.jsx(h0,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),u.jsx("div",{className:"lg:col-span-9 space-y-6",children:u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[R==="MISSIONS"&&u.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Ts.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),Ts.map(fe=>u.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h4",{className:"text-lg font-bold text-white",children:fe.title}),u.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:fe.type.replace("_"," ")})]}),u.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:fe.description}),u.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[fe.statRequirements&&u.jsx("div",{className:"flex gap-2",children:Object.entries(fe.statRequirements).map(([Ce,He])=>u.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[He," ",Ce]},Ce))}),fe.expiresAt&&u.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[u.jsx(gs,{className:"w-3 h-3"})," Expires: ",new Date(fe.expiresAt).toLocaleDateString()]})]}),u.jsxs("button",{onClick:()=>As(fe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[u.jsx(gT,{className:"w-4 h-4"})," Accept Contract"]})]},fe.id))]}),u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Qa.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),Qa.map(fe=>{var Pt,kr;const Ce=((Pt=lr.find(br=>br.questId===fe.id))==null?void 0:Pt.status)||"ACCEPTED",He=(kr=lr.find(br=>br.questId===fe.id))==null?void 0:kr.deploymentRoll,mt=fe.type==="CUSTOM";return u.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:u.jsx(So,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:fe.title}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[fe.type," MISSION"]})]})]}),u.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${Ce==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":Ce==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":Ce==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:Ce})]}),Ce==="ACCEPTED"?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:fe.description}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>Ln(fe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[u.jsx(Vae,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),mt?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),fe.isGroupQuest&&u.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:u.jsx(Zc,{className:"w-5 h-5"})})]})]}):Ce==="DEPLOYED"?u.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),u.jsx(Kn,{className:"w-6 h-6 text-purple-400"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),u.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:mt?"AWAITING_HQ_SIG_VERIFICATION":He===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),u.jsx("div",{className:"h-10 w-px bg-white/5"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),u.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),u.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),u.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:mt?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},fe.id)})]})]},"missions"),R==="RESOURCES"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(Ze).length===0?u.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):u.jsx("div",{className:"space-y-4",children:Object.entries(Ze).sort().map(([fe,Ce])=>u.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[u.jsxs("button",{onClick:()=>Tt(fe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[f.has(fe)?u.jsx(Hs,{className:"w-4 h-4 text-purple-400"}):u.jsx(h0,{className:"w-4 h-4 text-gray-500"}),u.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:fe})]}),u.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[Ce.length," Files"]})]}),f.has(fe)&&u.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:Ce.map(He=>{const mt=!!He.dueDate,Pt=He.dueDate?new Date(He.dueDate):null,kr=new Date,br=Pt?Math.ceil((Pt.getTime()-kr.getTime())/864e5):1/0,Wr=br<=0?"text-red-400":br<=2?"text-yellow-400":"text-gray-500",eo=Math.floor(He.engagementTime/60),Ro=eo>=5;return u.jsxs("div",{className:"bg-white/5 border border-white/5 hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a&&a(He.id),children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Ro?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":He.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Ro?u.jsx(An,{className:"w-6 h-6"}):He.lastEngagement?u.jsx(An,{className:"w-5 h-5 opacity-60"}):P3e[He.category||"Supplemental"]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:He.category}),u.jsx("h4",{className:"font-bold text-white text-sm truncate",children:He.title})]}),u.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:u.jsx("p",{className:"text-xs text-gray-500 truncate",children:He.description})}),u.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[He.lastEngagement&&u.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[eo,"m engaged"]}),mt&&u.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Wr}`,children:[u.jsx(ps,{className:"w-3 h-3"}),br<=0?"Overdue":br===1?"Due tomorrow":`Due in ${br}d`]})]})]}),u.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:u.jsx(bF,{className:"w-4 h-4 text-purple-400 fill-current"})})]},He.id)})})]},fe))})},"resources"),R==="LOADOUT"&&u.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[u.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative overflow-hidden flex flex-col items-center justify-center p-4 min-h-[400px]",children:[u.jsx("div",{className:"absolute inset-0 loadout-hex-bg pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((Ns=gr.appearance)==null?void 0:Ns.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),u.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[u.jsx("div",{className:"flex flex-col gap-4",children:gi.map(fe=>u.jsx(Es,{slot:fe},fe))}),u.jsx("div",{className:"w-40 h-full relative",children:u.jsx(Qb,{equipped:Bn,appearance:gr.appearance,evolutionLevel:Vt})}),u.jsx("div",{className:"flex flex-col gap-4",children:Xs.map(fe=>u.jsx(Es,{slot:fe},fe))})]}),u.jsxs("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),A(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[u.jsx(Qae,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),u.jsx("div",{className:"h-[200px]",children:u.jsx(NH,{width:"100%",height:"100%",children:u.jsxs(f3e,{cx:"50%",cy:"50%",outerRadius:"70%",data:bt,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),u.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),u.jsx(YG,{stroke:"rgba(255,255,255,0.08)"}),u.jsx(Vg,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),u.jsx($g,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),u.jsx(Fg,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),u.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),u.jsx("span",{className:"text-gray-500",children:"Tech"})," ",u.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:se.tech})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),u.jsx("span",{className:"text-gray-500",children:"Focus"})," ",u.jsx("span",{className:"text-green-400 font-bold ml-auto",children:se.focus})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),u.jsx("span",{className:"text-gray-500",children:"Analysis"})," ",u.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:se.analysis})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),u.jsx("span",{className:"text-gray-500",children:"Charisma"})," ",u.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:se.charisma})]})]})})]})]}),u.jsxs("div",{className:"mt-6 flex-1 min-h-[250px] bg-black/40 border border-white/10 rounded-2xl p-4 overflow-hidden flex flex-col",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[u.jsxs("span",{children:["Gear Storage (",tr.length,")"]}),u.jsx("span",{className:"text-[9px] text-gray-600",children:"Click to Inspect"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[tr.map((fe,Ce)=>{const He=Object.values(Bn).some(Pt=>(Pt==null?void 0:Pt.id)===fe.id),mt=Qr(fe.rarity);return u.jsxs("button",{onClick:()=>O(fe),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-105 ${He?"ring-2 ring-white/50 opacity-100":"opacity-80 hover:opacity-100"} ${mt.bg} ${mt.border} ${mt.shimmer} ${He?mt.glow:""}`,children:[fe.slot==="HEAD"&&u.jsx(Kn,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="CHEST"&&u.jsx(fs,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="HANDS"&&u.jsx(uv,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="FEET"&&u.jsx(An,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="BELT"&&u.jsx(Xw,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="AMULET"&&u.jsx(Yw,{className:`w-6 h-6 ${mt.text}`}),fe.slot==="RING"&&u.jsx(Zd,{className:`w-6 h-6 ${mt.text}`}),He&&u.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${mt.text}`,children:fe.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[fe.rarity," ",fe.slot,He?"  EQUIPPED":""]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(fe.stats).map(([Pt,kr])=>`+${kr} ${Pt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]},Ce)}),Array.from({length:Math.max(0,16-tr.length)}).map((fe,Ce)=>u.jsx("div",{className:"aspect-square rounded-xl border border-white/5 bg-white/5"},`empty-${Ce}`))]})]})]},"loadout"),R==="ACHIEVEMENTS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(S3e,{unlockedAchievements:((la=t.gamification)==null?void 0:la.unlockedAchievements)||[],achievementProgress:rt})},"achievements"),R==="SKILLS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(A3e,{specialization:(lt=t.gamification)==null?void 0:lt.specialization,skillPoints:((ce=t.gamification)==null?void 0:ce.skillPoints)||0,unlockedSkills:((Le=t.gamification)==null?void 0:Le.unlockedSkills)||[]})},"skills"),R==="FORTUNE"&&u.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(E3e,{currency:Bt,lastSpin:(Xe=t.gamification)==null?void 0:Xe.lastWheelSpin,classType:p})},"fortune"),R==="TUTORING"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(j3e,{userId:t.id,userName:t.name,classType:p})},"tutoring")]})}),u.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:u.jsx(O3e,{userId:t.id,activeChallenges:((jt=t.gamification)==null?void 0:jt.activeDailyChallenges)||[],classType:p})}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[u.jsx(N3e,{userId:t.id,userName:t.name,classType:p}),u.jsx(k3e,{classType:p})]})]}),u.jsx(Ha,{isOpen:I,onClose:()=>{A(!1),z(null),ee(null),Z(null),pe(null),X(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:u.jsx(Qb,{equipped:Bn,appearance:{...gr.appearance,hue:V??((qt=gr.appearance)==null?void 0:qt.hue)??0,bodyType:Q??((Gr=gr.appearance)==null?void 0:Gr.bodyType)??"A",skinTone:K??((Tr=gr.appearance)==null?void 0:Tr.skinTone)??0,hairStyle:Y??((Kr=gr.appearance)==null?void 0:Kr.hairStyle)??1,hairColor:ae??((sr=gr.appearance)==null?void 0:sr.hairColor)??0}})})}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),u.jsx("div",{className:"flex justify-center gap-2",children:ZK.map((fe,Ce)=>{var mt;const He=(K??((mt=gr.appearance)==null?void 0:mt.skinTone)??0)===Ce;return u.jsx("button",{onClick:()=>Z(Ce),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${He?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:fe}},Ce)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:p3e.map((fe,Ce)=>{var mt;const He=(Y??((mt=gr.appearance)==null?void 0:mt.hairStyle)??1)===Ce;return u.jsx("button",{onClick:()=>pe(Ce),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${He?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:fe},Ce)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),u.jsx("div",{className:"flex justify-center gap-2",children:JK.map((fe,Ce)=>{var mt;const He=(ae??((mt=gr.appearance)==null?void 0:mt.hairColor)??0)===Ce;return u.jsx("button",{onClick:()=>X(Ce),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${He?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:fe}},Ce)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),u.jsx("div",{className:"flex justify-center gap-2",children:["A","B"].map(fe=>{var He;const Ce=(Q??((He=gr.appearance)==null?void 0:He.bodyType)??"A")===fe;return u.jsx("button",{onClick:()=>ee(fe),className:`px-4 py-2 rounded-xl border-2 transition-all font-bold text-xs ${Ce?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:fe==="A"?"Alpha":"Beta"},fe)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(fe=>{var He;const Ce=(V??((He=gr.appearance)==null?void 0:He.hue)??0)===fe;return u.jsx("button",{onClick:()=>z(fe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${Ce?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${fe}, 60%, 45%)`}},fe)})})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{A(!1),z(null),ee(null),Z(null),pe(null),X(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:()=>{var fe,Ce,He,mt,Pt;er({hue:V??((fe=gr.appearance)==null?void 0:fe.hue)??0,bodyType:Q??((Ce=gr.appearance)==null?void 0:Ce.bodyType)??"A",skinTone:K??((He=gr.appearance)==null?void 0:He.skinTone)??0,hairStyle:Y??((mt=gr.appearance)==null?void 0:mt.hairStyle)??1,hairColor:ae??((Pt=gr.appearance)==null?void 0:Pt.hairColor)??0}),z(null),ee(null),Z(null),pe(null),X(null)},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),u.jsx(Ha,{isOpen:!!E,onClose:()=>O(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:E&&u.jsxs("div",{className:"space-y-6 text-gray-100",children:[u.jsxs("div",{className:`p-5 rounded-xl border ${Qr(E.rarity).bg} ${Qr(E.rarity).border} ${Qr(E.rarity).shimmer} relative overflow-hidden`,children:[u.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[u.jsxs("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${Qr(E.rarity).border} ${Qr(E.rarity).bg}`,style:{boxShadow:E.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":E.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:[E.slot==="HEAD"&&u.jsx(Kn,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="CHEST"&&u.jsx(fs,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="HANDS"&&u.jsx(uv,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="FEET"&&u.jsx(An,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="BELT"&&u.jsx(Xw,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="AMULET"&&u.jsx(Yw,{className:`w-7 h-7 ${Qr(E.rarity).text}`}),E.slot==="RING"&&u.jsx(Zd,{className:`w-7 h-7 ${Qr(E.rarity).text}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:`text-lg font-bold ${Qr(E.rarity).text}`,children:E.name}),u.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[E.rarity," ",E.slot]})]})]}),u.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(E.stats).map(([fe,Ce])=>u.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[u.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:fe}),u.jsxs("span",{className:"font-mono font-bold",children:["+",Ce]})]},fe))}),u.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:E.affixes.map((fe,Ce)=>u.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[fe.name," (T",fe.tier,")"]},Ce))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const fe=E.slot==="RING"?"RING1":E.slot,Ce=Bn[fe]||(E.slot==="RING"?Bn.RING2:null);if(!Ce||Ce.id===E.id)return null;const He=Qr(Ce.rarity),mt=new Set([...Object.keys(E.stats),...Object.keys(Ce.stats)]);return u.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:`text-xs font-bold ${He.text}`,children:Ce.name}),u.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:Ce.rarity})]}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(mt).map(Pt=>{const kr=E.stats[Pt]||0,br=Ce.stats[Pt]||0,Wr=kr-br;return Wr===0?u.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[Pt.slice(0,3).toUpperCase(),": 0"]},Pt):u.jsxs("span",{className:`text-[10px] font-mono font-bold ${Wr>0?"text-green-400":"text-red-400"}`,children:[Pt.slice(0,3).toUpperCase(),": ",Wr>0?"":"",Math.abs(Wr)]},Pt)})})]})})(),u.jsx("button",{onClick:()=>pi(E),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:U,children:"Equip Gear"}),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),u.jsxs("button",{onClick:()=>hn("RECALIBRATE"),disabled:U||Bt<Vu.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Vu.RECALIBRATE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),u.jsxs("button",{onClick:()=>hn("REFORGE"),disabled:U||Bt<Vu.REFORGE||E.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Vu.REFORGE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),u.jsxs("button",{onClick:()=>hn("OPTIMIZE"),disabled:U||Bt<Vu.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Vu.OPTIMIZE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsxs("button",{onClick:Br,disabled:U,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[u.jsx(Fi,{className:"w-4 h-4"}),"Salvage for ",NI(E)," Flux"]})]})]})}),Ee&&u.jsx(M3e,{user:t,classType:p,onClose:()=>oe(!1)}),Oe&&u.jsx(C3e,{item:Oe,onClose:()=>Me(null)}),u.jsx(Ha,{isOpen:k,onClose:ut,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:u.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((fe,Ce)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][Ce%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},Ce))}),u.jsxs("div",{className:"relative inline-block mb-6",children:[u.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),u.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),u.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:u.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:Vt})})]}),u.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:u.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Yn.rankName})}),u.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&u.jsxs("div",{className:`${Qr(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${Qr(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),u.jsx("div",{className:`text-xl font-bold ${Qr(C.rarity).text}`,children:C.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),u.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([fe,Ce])=>u.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",Ce," ",fe.toUpperCase()]},fe))})]})]}),u.jsx("button",{onClick:ut,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})};var T2=typeof self<"u"?self:global;const cg=typeof navigator<"u",L3e=cg&&typeof HTMLImageElement>"u",Yb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),A2=T2.Buffer,Wy=T2.BigInt,E2=!!A2,B3e=t=>t;function Zb(t,e=B3e){if(Yb)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let JE=T2.fetch;const U3e=t=>JE=t;if(!T2.fetch){const t=Zb("http",(n=>n)),e=Zb("https",(n=>n)),r=(n,{headers:i}={})=>new Promise((async(a,s)=>{let{port:c,hostname:d,pathname:f,protocol:m,search:p}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(f)+p,headers:i};c!==""&&(y.port=Number(c));const b=(m==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return r(S,{headers:i}).then(a).catch(s)}a({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(k=>w.push(k))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));b.on("error",s),b.end()}));U3e(r)}function kt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Jb=t=>nW(t)?void 0:t,z3e=t=>t!==void 0;function nW(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(z3e).length===0)}function Xn(t){let e=new Error(t);throw delete e.stack,e}function s0(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function JA(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const e7=t=>String.fromCharCode.apply(null,t),MU=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function iW(t){return MU?MU.decode(t):E2?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(e7(t)))}class xa{static from(e,r){return e instanceof this&&e.le===r?e:new xa(e,void 0,void 0,r)}constructor(e,r=0,n,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let a=new DataView(e,r,n);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof xa){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Xn("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,r,n);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else Xn("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=xa){return e instanceof DataView||e instanceof xa?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Xn("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new xa(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return iW(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return e7(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let i=0;i<r&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return e7(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function t7(t,e){Xn(`${t} '${e}' was not loaded, try using full build of exifr.`)}class eN extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||t7(this.kind,e),r&&(e in r||(function(n,i){Xn(`Unknown ${n} '${i}'.`)})(this.kind,e),r[e].enabled||t7(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Eo=new eN("file parser"),Gn=new eN("segment parser"),Io=new eN("file reader");function $3e(t,e){return typeof t=="string"?PU(t,e):cg&&!L3e&&t instanceof HTMLImageElement?PU(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new xa(t):cg&&t instanceof Blob?r7(t,e,"blob",R0):void Xn("Invalid input argument")}function PU(t,e){return(r=t).startsWith("data:")||r.length>1e4?n7(t,e,"base64"):Yb&&t.includes("://")?r7(t,e,"url",I0):Yb?n7(t,e,"fs"):cg?r7(t,e,"url",I0):void Xn("Invalid input argument");var r}async function r7(t,e,r,n){return Io.has(r)?n7(t,e,r):n?(async function(i,a){let s=await a(i);return new xa(s)})(t,n):void Xn(`Parser ${r} is not loaded`)}async function n7(t,e,r){let n=new(Io.get(r))(t,e);return await n.read(),n}const I0=t=>JE(t).then((e=>e.arrayBuffer())),R0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class V3e extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Pn(t,e,r){let n=new V3e;for(let[i,a]of r)n.set(i,a);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function M0(t,e,r){let n,i=t.get(e);for(n of r)i.set(n[0],n[1])}const fi=new Map,Ws=new Map,Kc=new Map,Bc=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],df=["jfif","xmp","icc","iptc","ihdr"],P0=["tiff",...df],Sn=["ifd0","ifd1","exif","gps","interop"],Uc=[...P0,...Sn],zc=["makerNote","userComment"],hf=["translateKeys","translateValues","reviveValues","multiSegment"],$c=[...hf,"sanitize","mergeOutput","silentErrors"];class aW{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Am extends aW{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,i){if(super(),kt(this,"enabled",!1),kt(this,"skip",new Set),kt(this,"pick",new Set),kt(this,"deps",new Set),kt(this,"translateKeys",!1),kt(this,"translateValues",!1),kt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=Sn.includes(e),this.canBeFiltered&&(this.dict=fi.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:s}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Xn(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of hf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,i,{tagKeys:a,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(i=s.indexOf(n),i===-1&&(i=a.indexOf(Number(n))),i!==-1&&r.add(Number(a[i]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ex(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ex(this.pick,this.deps)}}var Yi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},DU=new Map;class H0 extends aW{static useCached(e){let r=DU.get(e);return r!==void 0||(r=new this(e),DU.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Xn(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=cg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Bc)this[e]=Yi[e];for(e of $c)this[e]=Yi[e];for(e of zc)this[e]=Yi[e];for(e of Uc)this[e]=new Am(e,Yi[e],void 0,this)}setupFromTrue(){let e;for(e of Bc)this[e]=Yi[e];for(e of $c)this[e]=Yi[e];for(e of zc)this[e]=!0;for(e of Uc)this[e]=new Am(e,!0,void 0,this)}setupFromArray(e){let r;for(r of Bc)this[r]=Yi[r];for(r of $c)this[r]=Yi[r];for(r of zc)this[r]=Yi[r];for(r of Uc)this[r]=new Am(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,Sn)}setupFromObject(e){let r;for(r of(Sn.ifd0=Sn.ifd0||Sn.image,Sn.ifd1=Sn.ifd1||Sn.thumbnail,Object.assign(this,e),Bc))this[r]=ES(e[r],Yi[r]);for(r of $c)this[r]=ES(e[r],Yi[r]);for(r of zc)this[r]=ES(e[r],Yi[r]);for(r of P0)this[r]=new Am(r,Yi[r],e[r],this);for(r of Sn)this[r]=new Am(r,Yi[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Sn,Uc),e.tiff===!0?this.batchEnableWithBool(Sn,!0):e.tiff===!1?this.batchEnableWithUserValue(Sn,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Sn):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Sn)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let i=r[n];this[n].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,r,n,i=n){if(e&&e.length){for(let s of i)this[s].enabled=!1;let a=LU(e,n);for(let[s,c]of a)ex(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let a=LU(r,n);for(let[s,c]of a)ex(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:i,icc:a}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:i}=this;i.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=Sn.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of Sn)this[a].finalizeFilters()}get onlyTiff(){return!df.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of P0)this[e].enabled&&!Gn.has(e)&&t7("segment parser",e)}}function LU(t,e){let r,n,i,a,s=[];for(i of e){for(a of(r=fi.get(i),n=[],r))(t.includes(a[0])||t.includes(a[1]))&&n.push(a[0]);n.length&&s.push([i,n])}return s}function ES(t,e){return t!==void 0?t:e!==void 0?e:void 0}function ex(t,e){for(let r of e)t.add(r)}kt(H0,"default",Yi);class hu{constructor(e){kt(this,"parsers",{}),kt(this,"output",{}),kt(this,"errors",[]),kt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=H0.useCached(e)}async read(e){this.file=await $3e(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,i]of Eo)if(i.canHandle(e,r))return this.fileParser=new i(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Xn("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Jb(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let i=await n.parse();n.assignToOutput(e,i)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Gn.get("tiff",e);var i;if(r.tiff?i={start:0,type:"tiff"}:r.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),s=this.parsers.tiff=new n(a,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function N2(t,e){let r=new hu(e);return await r.read(t),r.parse()}var F3e=Object.freeze({__proto__:null,parse:N2,Exifr:hu,fileParsers:Eo,segmentParsers:Gn,fileReaders:Io,tagKeys:fi,tagValues:Ws,tagRevivers:Kc,createDictionary:Pn,extendDictionary:M0,fetchUrlAsArrayBuffer:I0,readBlobAsArrayBuffer:R0,chunkedProps:Bc,otherSegments:df,segments:P0,tiffBlocks:Sn,segmentsAndBlocks:Uc,tiffExtractables:zc,inheritables:hf,allFormatters:$c,Options:H0});class k2{constructor(e,r,n){kt(this,"errors",[]),kt(this,"ensureSegmentChunk",(async i=>{let a=i.start,s=i.size||65536;if(this.file.chunked)if(this.file.available(a,s))i.chunk=this.file.subarray(a,s);else try{i.chunk=await this.file.readChunk(a,s)}catch(c){Xn(`Couldn't read segment: ${JSON.stringify(i)}. ${c.message}`)}else this.file.byteLength>a+s?i.chunk=this.file.subarray(a,s):i.size===void 0?i.chunk=this.file.subarray(a):Xn("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Gn.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:i}=r,a=this.options[n];if(a&&a.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,i)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class $s{static findPosition(e,r){let n=e.getUint16(r+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,a=r+i,s=n-i;return{offset:r,length:n,headerLength:i,start:a,size:s,end:a+s}}static parse(e,r={}){return new this(e,new H0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof xa?e:new xa(e)}constructor(e,r={},n){kt(this,"errors",[]),kt(this,"raw",new Map),kt(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Kc.get(r),i=Ws.get(r),a=fi.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!i,f=s.translateKeys&&!!a,m={};for(let[p,y]of e)c&&n.has(p)?y=n.get(p)(y):d&&i.has(p)&&(y=this.translateValue(y,i.get(p))),f&&a.has(p)&&(p=a.get(p)||p),m[p]=y;return m}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}kt($s,"headerLength",4),kt($s,"type",void 0),kt($s,"multiSegment",!1),kt($s,"canHandle",(()=>!1));function q3e(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function H3e(t){return t>=224&&t<=239}function G3e(t,e,r){for(let[n,i]of Gn)if(i.canHandle(t,e,r))return n}class BU extends k2{constructor(...e){super(...e),kt(this,"appSegments",[]),kt(this,"jpegSegments",[]),kt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Gn.keyList())):(e=e===void 0?Gn.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Gn.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:i,wanted:a,remaining:s}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((c=>{let d=Gn.get(c),f=this.options[c];return d.multiSegment&&f.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,f=this.appSegments.some((m=>!this.file.available(m.offset||m.start,m.length||m.size)));if(c=e>d&&!f?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,i,a,s,c,d,{file:f,findAll:m,wanted:p,remaining:y,options:b}=this;for(;e<r;e++)if(f.getUint8(e)===255){if(n=f.getUint8(e+1),H3e(n)){if(i=f.getUint16(e+2),a=G3e(f,e,i),a&&p.has(a)&&(s=Gn.get(a),c=s.findPosition(f,e),d=b[a],c.type=a,this.appSegments.push(c),!m&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(c=$s.findPosition(f,e),c.marker=n,this.unknownSegments.push(c)),e+=i+1}else if(q3e(n)){if(i=f.getUint16(e+2),n===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let i,a,s,c=new Map;for(let d=0;d<r.length;d++)i=r[d],a=i[n],c.has(a)?s=c.get(a):c.set(a,s=[]),s.push(i);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let i=Gn.get(r,this.options);return i.handleMultiSegments?{type:r,chunk:i.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}kt(BU,"type","jpeg"),Eo.set("jpeg",BU);const K3e=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class W3e extends $s{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:i,skip:a}=this.options[r];i=new Set(i);let s=i.size>0,c=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let f=0;f<d;f++){let m=this.chunk.getUint16(e);if(s){if(i.has(m)&&(n.set(m,this.parseTag(e,m,r)),i.delete(m),i.size===0))break}else!c&&a.has(m)||n.set(m,this.parseTag(e,m,r));e+=12}return n}parseTag(e,r,n){let{chunk:i}=this,a=i.getUint16(e+2),s=i.getUint32(e+4),c=K3e[a];if(c*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&Xn(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&Xn(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,s);if(a===2)return s0(i.getString(e,s));if(a===7)return i.getUint8Array(e,s);if(s===1)return this.parseTagValue(a,e);{let d=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(s),f=c;for(let m=0;m<s;m++)d[m]=this.parseTagValue(a,e),e+=f;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Xn(`Invalid tiff type ${e}`)}}}class NS extends W3e{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Xn("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Xn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,JA(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,JA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",UU(...e.get(2),e.get(1))),e.set("longitude",UU(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,i={};for(r of Sn)if(e=this[r],!nW(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(i,n)}else i[r]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,i]of Object.entries(r))this.assignObjectToOutput(e,n,i)}}function UU(t,e,r,n){var i=t+e/60+r/3600;return n!=="S"&&n!=="W"||(i*=-1),i}kt(NS,"type","tiff"),kt(NS,"headerLength",10),Gn.set("tiff",NS);var X3e=Object.freeze({__proto__:null,default:F3e,Exifr:hu,fileParsers:Eo,segmentParsers:Gn,fileReaders:Io,tagKeys:fi,tagValues:Ws,tagRevivers:Kc,createDictionary:Pn,extendDictionary:M0,fetchUrlAsArrayBuffer:I0,readBlobAsArrayBuffer:R0,chunkedProps:Bc,otherSegments:df,segments:P0,tiffBlocks:Sn,segmentsAndBlocks:Uc,tiffExtractables:zc,inheritables:hf,allFormatters:$c,Options:H0,parse:N2});const tN={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},rN=Object.assign({},tN,{firstChunkSize:4e4,gps:[1,2,3,4]});async function sW(t){let e=new hu(rN);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:i}=r.gps;return{latitude:n,longitude:i}}}const nN=Object.assign({},tN,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oW(t){let e=new hu(nN);await e.read(t);let r=await e.extractThumbnail();return r&&E2?A2.from(r):r}async function lW(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const iN=Object.assign({},tN,{firstChunkSize:4e4,ifd0:[274]});async function aN(t){let e=new hu(iN);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const sN=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let o0=!0,l0=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;o0=Number(r)+.1*Number(n)<13.4,l0=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);o0=l0=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);o0=l0=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);o0=l0=Number(e)<77}}async function cW(t){let e=await aN(t);return Object.assign({canvas:o0,css:l0},sN[e])}class Q3e extends xa{constructor(...e){super(...e),kt(this,"ranges",new Y3e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{let i=e+r;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let r;r=E2?A2.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let i=super.set(e,r);return this.ranges.add(r,i.byteLength),i}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class Y3e{constructor(){kt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let i=e+r,a=this.list.filter((s=>zU(e,s.offset,i)||zU(e,s.end,i)));if(a.length>0){e=Math.min(e,...a.map((c=>c.offset))),i=Math.max(i,...a.map((c=>c.end))),r=i-e;let s=a.shift();s.offset=e,s.length=r,s.end=i,this.list=this.list.filter((c=>!a.includes(c)))}else this.list.push({offset:e,length:r,end:i})}available(e,r){let n=e+r;return this.list.some((i=>i.offset<=e&&n<=i.end))}}function zU(t,e,r){return t<=e&&e<=r}class O2 extends Q3e{constructor(e,r){super(0),kt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Io.set("blob",class extends O2{async readWhole(){this.chunked=!1;let t=await R0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),i=await R0(n);return this.set(i,t,!0)}});var Z3e=Object.freeze({__proto__:null,default:X3e,Exifr:hu,fileParsers:Eo,segmentParsers:Gn,fileReaders:Io,tagKeys:fi,tagValues:Ws,tagRevivers:Kc,createDictionary:Pn,extendDictionary:M0,fetchUrlAsArrayBuffer:I0,readBlobAsArrayBuffer:R0,chunkedProps:Bc,otherSegments:df,segments:P0,tiffBlocks:Sn,segmentsAndBlocks:Uc,tiffExtractables:zc,inheritables:hf,allFormatters:$c,Options:H0,parse:N2,gpsOnlyOptions:rN,gps:sW,thumbnailOnlyOptions:nN,thumbnail:oW,thumbnailUrl:lW,orientationOnlyOptions:iN,orientation:aN,rotations:sN,get rotateCanvas(){return o0},get rotateCss(){return l0},rotation:cW});Io.set("url",class extends O2{async readWhole(){this.chunked=!1;let t=await I0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let i=await JE(this.input,{headers:n}),a=await i.arrayBuffer(),s=a.byteLength;if(i.status!==416)return s!==e&&(this.size=t+s),this.set(a,t,!0)}});xa.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Wy!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Wy(e)<<Wy(32)|Wy(r)):void Xn("Trying to read 64b value but JS can only handle 53b numbers.")};class J3e extends k2{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),i=e+8;return r===1&&(r=this.file.getUint64(e+8),i+=8),{offset:e,length:r,kind:n,start:i}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class uW extends J3e{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let i=16,a=[];for(;i<n;)a.push(e.getString(i,4)),i+=4;return a.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let i=this.file.subarray(r,n);this.createParser(e,i)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let i=this.findBox(n,"colr");i!==void 0&&await this.registerSegment("icc",i.offset+12,i.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let i=this.findExifLocIdInIinf(r),a=this.findExtentInIloc(n,i);if(a===void 0)return;let[s,c]=a;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,i,a,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(i=r.version===3?4:2,a=this.file.getString(n+i+2,4),a==="Exif"))return this.file.getUintBytes(n,i);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[i,a]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,f=e.version===1||e.version===2?2:0,m=c+i+a,p=e.version===2?4:2,y=this.file.getUintBytes(n,p);for(n+=p;y--;){let b=this.file.getUintBytes(n,d);n+=d+f+2+s;let T=this.file.getUint16(n);if(n+=2,b===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,i),this.file.getUintBytes(n+c+i,a)];n+=T*m}}}class dW extends uW{}kt(dW,"type","heic");class $U extends uW{}kt($U,"type","avif"),Eo.set("heic",dW),Eo.set("avif",$U),Pn(fi,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Pn(fi,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Pn(fi,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Pn(Ws,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let tp=Pn(Ws,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const VU={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};tp.set(37392,VU),tp.set(41488,VU);const kS={0:"Normal",1:"Low",2:"High"};function FU(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function qU(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function OS(t){if(typeof t=="string"){var[e,r,n,i,a,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s)||(c.setHours(i),c.setMinutes(a),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function Em(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(HU(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(HU(t[r],t[r+1]));return s0(String.fromCodePoint(...e))}function HU(t,e){return t<<8|e}tp.set(41992,kS),tp.set(41993,kS),tp.set(41994,kS),Pn(Kc,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?iW(t):t}],[306,OS],[40091,Em],[40092,Em],[40093,Em],[40094,Em],[40095,Em]]),Pn(Kc,"exif",[[40960,qU],[36864,qU],[36867,OS],[36868,OS],[40962,FU],[40963,FU]]),Pn(Kc,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class jS extends $s{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:xa.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(a){let s={},c={};for(let d of pW)s[d]=[],c[d]=0;return a.replace(n6e,((d,f,m)=>{if(f==="<"){let p=++c[m];return s[m].push(p),`${d}#${p}`}return`${d}#${s[m].pop()}`}))})(e);let r=ih.findAll(e,"rdf","Description");r.length===0&&r.push(new ih("rdf","Description",void 0,e));let n,i={};for(let a of r)for(let s of a.properties)n=r6e(s.ns,i),hW(s,n);return(function(a){let s;for(let c in a)s=a[c]=Jb(a[c]),s===void 0&&delete a[c];return Jb(a)})(i)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,i]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",i);break;case"exif":this.assignObjectToOutput(e,"exif",i);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,i)}else e.xmp=r}}kt(jS,"type","xmp"),kt(jS,"multiSegment",!0),Gn.set("xmp",jS);class tx{static findAll(e){return fW(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(tx.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[3].slice(1,-1);return i=mW(i),new tx(r,n,i)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class ih{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var i=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return fW(e,i).map(ih.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[4],a=e[8];return new ih(r,n,i,a)}constructor(e,r,n,i){this.ns=e,this.name=r,this.attrString=n,this.innerXml=i,this.attrs=tx.findAll(n),this.children=ih.findAll(i),this.value=this.children.length===0?mW(i):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return t6e(this.children.map(e6e));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)hW(r,e);return this.value!==void 0&&(e.value=this.value),Jb(e)}}function hW(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var e6e=t=>t.serialize(),t6e=t=>t.length===1?t[0]:t,r6e=(t,e)=>e[t]?e[t]:e[t]={};function fW(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function mW(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const pW=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],n6e=new RegExp(`(<|\\/)(${pW.join("|")})`,"g");var i6e=Object.freeze({__proto__:null,default:Z3e,Exifr:hu,fileParsers:Eo,segmentParsers:Gn,fileReaders:Io,tagKeys:fi,tagValues:Ws,tagRevivers:Kc,createDictionary:Pn,extendDictionary:M0,fetchUrlAsArrayBuffer:I0,readBlobAsArrayBuffer:R0,chunkedProps:Bc,otherSegments:df,segments:P0,tiffBlocks:Sn,segmentsAndBlocks:Uc,tiffExtractables:zc,inheritables:hf,allFormatters:$c,Options:H0,parse:N2,gpsOnlyOptions:rN,gps:sW,thumbnailOnlyOptions:nN,thumbnail:oW,thumbnailUrl:lW,orientationOnlyOptions:iN,orientation:aN,rotations:sN,get rotateCanvas(){return o0},get rotateCss(){return l0},rotation:cW});let GU=Zb("fs",(t=>t.promises));Io.set("fs",class extends O2{async readWhole(){this.chunked=!1,this.fs=await GU;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await GU,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});Io.set("base64",class extends O2{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,i=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let a=t+e,s=r+4*Math.ceil(a/3);i=i.slice(r,s);let c=Math.min(e,this.size-t);if(E2){let d=A2.from(i,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),f=atob(i),m=d.toUint8();for(let p=0;p<c;p++)m[p]=f.charCodeAt(n+p);return d}}});class KU extends k2{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:i,icc:a}=e;n.enabled&&r.deps.add(700),i.enabled&&r.deps.add(33723),a.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:i}=this.options;if(e.enabled||r.enabled||n.enabled||i.enabled){let a=Math.max(JA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}kt(KU,"type","tiff"),Eo.set("tiff",KU);let a6e=Zb("zlib");const s6e=["ihdr","iccp","text","itxt","exif"];class WU extends k2{constructor(...e){super(...e),kt(this,"catchError",(r=>this.errors.push(r))),kt(this,"metaChunks",[]),kt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let i=n.getUint32(e),a=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=i+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:i,marker:a};s6e.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,i]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,i)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),i=0;for(;i<80&&n[i]!==0;)i++;let a=i+2,s=r.getString(0,i);if(this.injectKeyValToIhdr("ProfileName",s),Yb){let c=await a6e,d=r.getUint8Array(a);d=c.inflateSync(d),this.injectSegment("icc",d)}}}kt(WU,"type","png"),Eo.set("png",WU),Pn(fi,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),M0(fi,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let XU=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];M0(fi,"ifd0",XU),M0(fi,"exif",XU),Pn(Ws,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class CS extends $s{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}kt(CS,"type","jfif"),kt(CS,"headerLength",9),Gn.set("jfif",CS),Pn(fi,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class QU extends $s{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}kt(QU,"type","ihdr"),Gn.set("ihdr",QU),Pn(fi,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Pn(Ws,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pv extends $s{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(i){let a=i[0].constructor,s=0;for(let f of i)s+=f.length;let c=new a(s),d=0;for(let f of i)c.set(f,d),d+=f.length;return c})(r.map((i=>i.chunk.toUint8())));return new xa(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Xn("ICC header is too short");for(let[r,n]of Object.entries(o6e)){r=parseInt(r,10);let i=n(this.chunk,r);i!=="\0\0\0\0"&&e.set(r,i)}}parseTags(){let e,r,n,i,a,{raw:s}=this,c=this.chunk.getUint32(128),d=132,f=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),i=this.chunk.getString(r,4),r+n>f)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");a=this.parseTag(i,r,n),a!==void 0&&a!=="\0\0\0\0"&&s.set(e,a),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return s0(this.chunk.getString(e+12,r))}parseText(e,r){return s0(this.chunk.getString(e+8,r-8))}parseSig(e){return s0(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),i=r.getUint32(e+12),a=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(a+0,2),f=r.getString(a+2,2),m=r.getUint32(a+4),p=r.getUint32(a+8)+e,y=s0(r.getUnicodeString(p,m));s.push({lang:d,country:f,text:y}),a+=i}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}kt(pv,"type","icc"),kt(pv,"multiSegment",!0),kt(pv,"headerLength",18);const o6e={4:rl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:rl,16:rl,20:rl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,i=t.getUint16(e+4),a=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,i,a,s,c))},36:rl,40:rl,48:rl,52:rl,64:(t,e)=>t.getUint32(e),80:rl};function rl(t,e){return s0(t.getString(e,4))}Gn.set("icc",pv),Pn(fi,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Xy={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},YU={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Pn(Ws,"icc",[[4,Xy],[12,YU],[40,Object.assign({},Xy,YU)],[48,Xy],[80,Xy],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Qy extends $s{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let i,a=this.containsIptc8bim(e,r,n);if(a!==void 0)return i=e.getUint8(r+a+7),i%2!=0&&(i+=1),i===0&&(i=4),a+8+i}static containsIptc8bim(e,r,n){for(let i=0;i<n;i++)if(this.isIptcSegmentHead(e,r+i))return i}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let i=0;i<r;i++)if(this.chunk.getUint8(i)===28&&this.chunk.getUint8(i+1)===2){n=!0;let a=this.chunk.getUint16(i+3),s=this.chunk.getUint8(i+2),c=this.chunk.getLatin1String(i+5,a);e.set(s,this.pluralizeValue(e.get(s),c)),i+=4+a}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}kt(Qy,"type","iptc"),kt(Qy,"translateValues",!1),kt(Qy,"reviveValues",!1),Gn.set("iptc",Qy),Pn(fi,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Pn(Ws,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Nm=["Monday","Tuesday","Wednesday","Thursday","Friday"],l6e=({user:t})=>{const e=qi(),{confirm:r}=ou(),n=F.useMemo(()=>Fe.getWeekId(),[]),[i,a]=F.useState([]),[s,c]=F.useState("Monday"),[d,f]=F.useState(!1),m=F.useRef(null),[p,y]=F.useState(!1),b=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,S]=F.useState(t.classType||b[0]||"Uncategorized");F.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});Nm.includes(A)&&c(A)},[]),F.useEffect(()=>{const A=Fe.subscribeToEvidence(t.id,n,a);return()=>A()},[t.id,n]);const w=F.useMemo(()=>{const A=b[0]||"Uncategorized";return i.filter(E=>E.classType?E.classType===T:T===A)},[i,T,b]),k=A=>w.find(E=>E.dayOfWeek===A),M=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,C=async A=>{var O;const E=(O=A.target.files)==null?void 0:O[0];if(E){f(!0);try{let U=null;if(E.type.startsWith("image/"))try{const Y=await i6e.parse(E,["DateTimeOriginal"])||{};Y.DateTimeOriginal&&(U=Y.DateTimeOriginal.toISOString())}catch(Y){console.warn("EXIF extraction failed",Y)}const P=T.replace(/[^a-zA-Z0-9]/g,"_"),V=Math.random().toString(36).substring(2,9),z=qm(Hm,`evidence/${t.id}/${n}/${P}_${s}_${V}`);await dT(z,E);const Q=await Lv(z),ee=k(s),Z={id:`${t.id}_${n}_${s}_${P}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Q,timestamp:new Date().toISOString(),exifDate:U,reflection:(ee==null?void 0:ee.reflection)||""};await Fe.uploadEvidence(Z)}catch(U){e.error("Upload failed: "+(U instanceof Error?U.message:"Unknown error"))}finally{f(!1),m.current&&(m.current.value="")}}},B=async(A,E)=>{const O=k(A);O&&O.reflection!==E&&await Fe.uploadEvidence({...O,reflection:E})},R=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const E=new GX,O=E.internal.pageSize.getWidth(),U=E.internal.pageSize.getHeight(),P=20,V=O-P*2,z=U-P;E.setFillColor(15,7,32),E.rect(0,0,O,40,"F"),E.setTextColor(255,255,255),E.setFontSize(22),E.setFont("helvetica","bold"),E.text("WEEKLY PROGRESS REPORT",P,18),E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Operative: ${t.name.toUpperCase()}`,P,28),E.text(`Class: ${T}`,P,33),E.text(`Cycle ID: ${n}`,P,38),E.text(`Generated: ${new Date().toLocaleDateString()}`,O-P,33,{align:"right"});let Q=55;const ee=[...w].sort((K,Z)=>Nm.indexOf(K.dayOfWeek)-Nm.indexOf(Z.dayOfWeek));for(const K of ee){let Z=null,Y="JPEG",pe=0,ae=0,X=!1;try{const Ae=await fetch(K.imageUrl);if(!Ae.ok)throw new Error(`Image fetch failed: ${Ae.statusText}`);const $e=await Ae.blob();Z=await new Promise((Ke,it)=>{const ut=new FileReader;ut.onloadend=()=>Ke(ut.result),ut.onerror=it,ut.readAsDataURL($e)}),$e.type==="image/png"&&(Y="PNG"),$e.type==="image/webp"&&(Y="WEBP");const de=E.getImageProperties(Z),ge=de.width/de.height,Ye=100;pe=V,ae=pe/ge,ae>Ye&&(ae=Ye,pe=ae*ge)}catch(Ae){console.warn("Image processing error for PDF",Ae),X=!0,ae=15}const Ee=20+ae+12;Q+Ee>z&&(E.addPage(),Q=P),E.setDrawColor(200,200,200),E.setLineWidth(.5),E.line(P,Q,O-P,Q),Q+=6,E.setTextColor(15,7,32),E.setFontSize(16),E.setFont("helvetica","bold"),E.text(K.dayOfWeek.toUpperCase(),P,Q);const oe=M(K.exifDate)||M(K.timestamp);if(E.setFontSize(9),E.setFont("helvetica","italic"),E.setTextColor(100,100,100),E.text(`Captured: ${oe}`,O-P,Q,{align:"right"}),Q+=10,!X&&Z){const Ae=(O-pe)/2;E.addImage(Z,Y,Ae,Q,pe,ae),Q+=ae+12}else E.setTextColor(255,0,0),E.setFontSize(8),E.text("[Image Error]",P,Q),Q+=15;E.setFont("helvetica","normal"),E.setFontSize(10);const Oe=K.reflection||"No reflection logged for this cycle.",Me=E.splitTextToSize(Oe,V),at=Me.length*5+15;Q+at>z&&(E.addPage(),Q=P),E.setTextColor(15,7,32),E.setFontSize(11),E.setFont("helvetica","bold"),E.text("DAILY REFLECTION:",P,Q),Q+=6,E.setFont("helvetica","normal"),E.setFontSize(10),E.setTextColor(60,60,60),E.text(Me,P,Q),Q+=Me.length*5+25}E.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Fe.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(E){console.error("PDF generation failed:",E),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},I=k(s);return u.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[u.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[u.jsx(kC,{className:"w-7 h-7"})," Weekly Evidence Log"]}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.length>1?u.jsxs("div",{className:"relative group",children:[u.jsx("select",{value:T,onChange:A=>S(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:b.map(A=>u.jsx("option",{value:A,children:A},A))}),u.jsx(Hs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):u.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),u.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),u.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),u.jsxs("button",{onClick:R,disabled:p||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[p?u.jsx(Fa,{className:"w-5 h-5 animate-spin"}):u.jsx(wae,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),u.jsx("input",{type:"file",ref:m,onChange:C,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:Nm.map(A=>{const E=k(A),O=s===A;return u.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${O?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${O?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",Nm.indexOf(A)+1]}),u.jsx("span",{className:"font-bold text-sm",children:A}),E&&u.jsx("div",{className:`absolute top-2 right-2 ${O?"text-emerald-200":"text-emerald-500"}`,children:u.jsx(zv,{className:"w-3 h-3"})})]},A)})}),u.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(Oae,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),I&&u.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[u.jsx(ps,{className:"w-3 h-3"}),M(I.exifDate)||M(I.timestamp)]})]}),u.jsx("div",{className:"flex-1 bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:I?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:I.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),u.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},children:[u.jsx(Sp,{className:"w-8 h-8 text-emerald-400"}),u.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):u.jsxs("button",{onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?u.jsx(Fa,{className:"w-10 h-10 animate-spin text-emerald-500"}):u.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:u.jsx(kC,{className:"w-8 h-8"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),u.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),u.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[u.jsx("div",{className:"mb-2",children:u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(A8,{className:"w-4 h-4"})," Daily Reflection"]})}),I?u.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:I.reflection,onBlur:A=>B(s,A.target.value)},s):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[u.jsx("div",{className:"mb-2 opacity-30",children:u.jsx(h0,{className:"w-6 h-6"})}),u.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),u.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},c6e=({user:t})=>{const e=qi(),[r,n]=F.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[i,a]=F.useState(""),[s,c]=F.useState(""),[d,f]=F.useState("");F.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(b,T)=>{try{return Kv.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");a(y)},[r.content]);const m=async()=>{await Fe.saveLabReport(r),await Fe.awardXP(t.id,25),e.success("Report saved!")},p=()=>{const y=parseFloat(s),b=parseFloat(d);!isNaN(y)&&!isNaN(b)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:b}].sort((S,w)=>S.x-w.x)})),c(""),f(""))};return u.jsxs("div",{className:"h-full flex flex-col gap-6",children:[u.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[u.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[u.jsx(Ox,{className:"w-6 h-6"})," Physics Laboratory"]}),u.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[u.jsx(xF,{className:"w-4 h-4"})," Save Report"]})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:u.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),u.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[u.jsxs("div",{className:"w-1/3",children:[u.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),u.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>f(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),u.jsx("button",{onClick:p,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(NH,{width:"100%",height:"100%",children:u.jsxs(m3e,{children:[u.jsx(IK,{strokeDasharray:"3 3",stroke:"#333"}),u.jsx(w2,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),u.jsx(_2,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),u.jsx(lo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),u.jsx(Hg,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),u.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:u.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[u.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(b=>({...b,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),u.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Sq.sanitize(i,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},u6e=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],d6e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],h6e=({userId:t,classType:e,onClose:r})=>{var B,R,I,A,E;const[n,i]=F.useState(null),[a,s]=F.useState(!0);if(F.useEffect(()=>{(async()=>{const U=await Fe.getPublicProfile(t);i(U),s(!1)})()},[t]),a)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:u.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:u.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(B=n.settings)==null?void 0:B.privacyMode,f=d?c.codename||"Unknown Agent":n.name,m=c.level||1,p=xh(m),y=rW(m),{equipped:b,appearance:T}=Ux(n,e),S=Bx({gamification:{...c,equipped:b}}),w=jg(b),k=((R=c.classXp)==null?void 0:R[e])||0,M=Object.values(b).filter(Boolean),C=tW(M);return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[u.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:u.jsx(ys,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-32 shrink-0",children:u.jsx(Qb,{equipped:b,appearance:T})}),u.jsxs("div",{children:[u.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:f}),u.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",m]}),u.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Kn,{className:"w-3 h-3 text-cyan-400"}),u.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[k.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(fs,{className:"w-3 h-3 text-yellow-400"}),u.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(So,{className:"w-3 h-3"})," Stats"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:u6e.map(({key:O,label:U,color:P,icon:V})=>{const z=S[O]||0;return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[u.jsx("span",{className:"text-sm",children:V}),u.jsx("span",{className:"text-xs text-gray-400",children:U}),u.jsx("span",{className:`text-sm font-bold ${P} ml-auto`,children:z})]},O)})})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(fs,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:d6e.map(O=>{const U=b[O];if(!U)return u.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[u.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:O}),u.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},O);const P=Qr(U.rarity);return u.jsxs("div",{className:`p-2 rounded-lg border ${P.border} ${P.bg}`,children:[u.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:O}),u.jsx("div",{className:`text-xs font-bold truncate ${P.text}`,children:U.name}),u.jsx("div",{className:"text-[9px] text-gray-500",children:U.rarity})]},O)})})]}),C.length>0&&u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(k8,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),C.map(({set:O,activeBonus:U})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[u.jsx("div",{className:"text-xs font-bold text-purple-400",children:O.name}),u.jsxs("div",{className:"text-[10px] text-gray-400",children:[U.label,": ",U.effects.map(P=>`+${P.value} ${P.stat}`).join(", ")]})]},O.id))]}),(((I=c.unlockedAchievements)==null?void 0:I.length)||0)>0&&u.jsxs("div",{className:"p-6",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(E0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:(E=c.unlockedAchievements)==null?void 0:E.slice(0,12).map(O=>u.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:O.replace(/_/g," ")},O))})]})]})})},f6e=()=>u.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>u.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[u.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),u.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),u.jsxs("div",{className:"space-y-2 text-right",children:[u.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),m6e=()=>{const[t,e]=F.useState([]),[r,n]=F.useState(Rr.AP_PHYSICS),[i,a]=F.useState(!0),[s,c]=F.useState(null);F.useEffect(()=>{const m=Fe.subscribeToLeaderboard(p=>{e(p),a(!1)});return()=>m()},[]);const d=F.useMemo(()=>{const m=new Set;return t.forEach(p=>{var y;return(y=p.enrolledClasses)==null?void 0:y.forEach(b=>m.add(b))}),Array.from(m).sort()},[t]),f=F.useMemo(()=>t.filter(m=>{var p;return(p=m.enrolledClasses)==null?void 0:p.includes(r)}).sort((m,p)=>{var T,S,w,k;const y=((S=(T=m.gamification)==null?void 0:T.classXp)==null?void 0:S[r])||0;return(((k=(w=p.gamification)==null?void 0:w.classXp)==null?void 0:k[r])||0)-y}).slice(0,10),[t,r]);return u.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),u.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),u.jsxs("div",{className:"inline-block relative",children:[u.jsxs("select",{value:r,onChange:m=>n(m.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[d.map(m=>u.jsx("option",{value:m,children:m},m)),d.length===0&&u.jsx("option",{children:r})]}),u.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?u.jsx(f6e,{}):u.jsxs(u.Fragment,{children:[f.length>=3&&u.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(m=>{var R,I,A,E,O;const p=f[m];if(!p)return null;const y=(R=p.settings)==null?void 0:R.privacyMode,b=y?((I=p.gamification)==null?void 0:I.codename)||"Unknown Agent":p.name,T=((E=(A=p.gamification)==null?void 0:A.classXp)==null?void 0:E[r])||0,S=((O=p.gamification)==null?void 0:O.level)||1,w=xh(S),k=m===0,M=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],B=[{icon:u.jsx(E0,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:u.jsx(_y,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:u.jsx(_y,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return u.jsxs("div",{className:`flex flex-col items-center ${k?"order-2":m===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+m*.15}s both`},children:[u.jsxs("div",{className:`relative mb-2 ${k?"mb-3":""}`,children:[u.jsx("div",{className:`${C[m]} rounded-full p-0.5 bg-white/10 ring-2 ${B[m].ring} relative ${k?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:u.jsx("img",{src:p.avatarUrl,alt:b,className:`w-full h-full rounded-full border-2 ${w.tierColor.split(" ")[0]} object-cover`})}),u.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${B[m].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:B[m].icon})]}),u.jsxs("div",{className:`text-center ${k?"mt-2":"mt-1"}`,children:[u.jsx("div",{className:`font-bold truncate max-w-[100px] ${k?"text-sm text-white":"text-xs text-gray-300"} ${y?"italic":""}`,children:b}),u.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${k?"text-xl":"text-base"}`,children:T.toLocaleString()}),u.jsx("div",{className:`text-[9px] font-mono uppercase ${w.tierColor.split(" ")[1]}`,children:w.rankName}),u.jsxs("button",{onClick:()=>c(p.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[u.jsx(xp,{className:"w-3 h-3"})," Inspect"]})]}),u.jsx("div",{className:`${M[m]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${m===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":m===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},p.id)})}),u.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[f.slice(f.length>=3?3:0).map((m,p)=>{var M,C,B,R,I;const y=f.length>=3?p+3:p,b=(M=m.settings)==null?void 0:M.privacyMode,T=b?((C=m.gamification)==null?void 0:C.codename)||"Unknown Agent":m.name,S=((R=(B=m.gamification)==null?void 0:B.classXp)==null?void 0:R[r])||0,w=((I=m.gamification)==null?void 0:I.level)||1,k=xh(w);return u.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*y}s both`},children:[u.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[y<3&&y===0&&u.jsx(E0,{className:"w-6 h-6 text-yellow-400 mx-auto"}),y<3&&y===1&&u.jsx(_y,{className:"w-6 h-6 text-gray-300 mx-auto"}),y<3&&y===2&&u.jsx(_y,{className:"w-6 h-6 text-amber-600 mx-auto"}),y>=3&&`#${y+1}`]}),u.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[u.jsx("img",{src:m.avatarUrl,alt:T,className:`w-full h-full rounded-full border-2 ${k.tierColor.split(" ")[0]}`}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:w})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("h3",{className:`text-base font-bold truncate ${b?"text-purple-300 italic":"text-white"}`,children:[T,b&&u.jsx(wp,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${k.tierColor.split(" ")[1]}`,children:k.rankName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:S.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),u.jsx("button",{onClick:()=>c(m.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:u.jsx(xp,{className:"w-4 h-4"})})]},m.id)}),f.length===0&&u.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[u.jsx(Zc,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",r,"."]})]})]})}),s&&u.jsx(h6e,{userId:s,classType:r,onClose:()=>c(null)})]})};class p6e extends ne.Component{constructor(r){super(r);AO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),u.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&u.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),u.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[u.jsx($v,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const ZU={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:u.jsx(yh,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:u.jsx(Cae,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:u.jsx(k8,{className:"w-4 h-4"})}},g6e={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},IS=3;function RS(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[r[n],r[i]]=[r[i],r[n]]}return r.slice(0,e)}const y6e=({assignment:t})=>{const e=qi(),[r,n]=F.useState([]),[i,a]=F.useState([]),[s,c]=F.useState(!0),[d,f]=F.useState(!1),[m,p]=F.useState({}),[y,b]=F.useState(1),[T,S]=F.useState(null),[w,k]=F.useState(new Set),M=F.useCallback(P=>{const V=RS(P.filter(ee=>ee.tier===1),IS),z=RS(P.filter(ee=>ee.tier===2),IS),Q=RS(P.filter(ee=>ee.tier===3),IS);a([...V,...z,...Q]),p({}),S(null)},[]);F.useEffect(()=>{(async()=>{var V;c(!0),f(!1);try{const z=await ea(ot(Be,"question_banks",t.id));if(!z.exists()){f(!0);return}const Q=z.data().questions||[];n(Q),M(Q)}catch(z){console.error("Failed to load question bank:",z),f(!0);return}finally{c(!1)}try{const z=(V=Hz().currentUser)==null?void 0:V.uid;if(z){const Q=await ea(ot(Be,"review_progress",`${z}_${t.id}`));Q.exists()&&k(new Set(Q.data().answeredQuestions||[]))}}catch(z){console.warn("Could not load review progress:",z)}})()},[t.id,M]);const C=()=>{r.length>0&&M(r)},B=(P,V,z)=>{const Q=m[P];if(!(Q!=null&&Q.submitted))if(z==="multiple_select"||z==="ranking"){const ee=(Q==null?void 0:Q.selected)||[],K=ee.includes(V)?ee.filter(Z=>Z!==V):[...ee,V];p(Z=>({...Z,[P]:{...Z[P],selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))}else p(ee=>({...ee,[P]:{selected:V,submitted:!1,correct:!1,xpAwarded:!1}}))},R=(P,V)=>{var z;(z=m[P])!=null&&z.submitted||p(Q=>({...Q,[P]:{...Q[P],linkedSelected:V}}))},I=async P=>{const V=m[P.id];if(!(V!=null&&V.selected))return;let z=!1;if(P.type==="multiple_select"||P.type==="ranking"){const Q=V.selected,ee=P.correctAnswer;z=Q.length===ee.length&&Q.every((K,Z)=>K===ee[Z])}else P.type==="linked_mc"?z=V.selected===P.correctAnswer&&(!P.linkedFollowUp||V.linkedSelected===P.linkedFollowUp.correctAnswer):z=V.selected===P.correctAnswer;if(z)if(w.has(P.id))p(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{p(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await hF({assignmentId:t.id,questionId:P.id,xpAmount:P.xp,classType:t.classType})).data.awarded?(e.success(`+${P.xp} XP earned!`),p(K=>({...K,[P.id]:{...K[P.id],submitted:!0,correct:!0,xpAwarded:!0}})),k(K=>new Set([...K,P.id]))):e.success("Correct! (XP already claimed)")}catch(Q){console.error("XP award error:",Q)}}else p(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!1,xpAwarded:!1}}))},A=F.useMemo(()=>i.filter(P=>P.tier===y),[i,y]),E=F.useMemo(()=>Object.entries(m).filter(([,P])=>P.correct&&P.xpAwarded).reduce((P,[V])=>{var z;return P+(((z=i.find(Q=>Q.id===V))==null?void 0:z.xp)||0)},0),[m,i]),O=F.useMemo(()=>i.reduce((P,V)=>P+V.xp,0),[i]),U=F.useMemo(()=>i.length>0&&i.every(P=>{var V;return(V=m[P.id])==null?void 0:V.submitted}),[i,m]);return s?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(Fa,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(yh,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(yh,{className:"w-5 h-5 text-purple-400"}),u.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),u.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Kn,{className:"w-4 h-4 text-yellow-400"}),u.jsx("span",{className:"text-sm font-bold text-yellow-400",children:E}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",O," XP"]})]}),u.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[u.jsx($v,{className:"w-3 h-3"})," New Set"]})]})]}),u.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(P=>{const V=ZU[P],z=i.filter(K=>K.tier===P),Q=z.filter(K=>{var Z;return(Z=m[K.id])==null?void 0:Z.submitted}).length,ee=z.filter(K=>{var Z;return(Z=m[K.id])==null?void 0:Z.correct}).length;return u.jsxs("button",{onClick:()=>b(P),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===P?`${V.bg} ${V.color} ${V.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[V.icon,u.jsx("span",{className:"hidden sm:inline",children:V.name}),u.jsxs("span",{className:"sm:hidden",children:["Tier ",P]}),Q>0&&u.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ee===z.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ee,"/",z.length]})]},P)})}),U&&u.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),u.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[u.jsx($v,{className:"w-3 h-3"})," New Questions"]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[A.map((P,V)=>{const z=m[P.id],Q=T===P.id,ee=z==null?void 0:z.submitted,K=z==null?void 0:z.correct,Z=ZU[P.tier];return u.jsxs("div",{className:`rounded-2xl border transition-all ${ee?K?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Q?`${Z.border} ${Z.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[u.jsxs("button",{onClick:()=>S(Q?null:P.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ee?K?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${Z.bg} ${Z.color}`}`,children:ee?K?u.jsx(An,{className:"w-4 h-4"}):u.jsx(bp,{className:"w-4 h-4"}):V+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[u.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${Z.color}`,children:P.bloomsLevel}),u.jsx("span",{className:"text-[9px] text-gray-600",children:""}),u.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:g6e[P.type]||P.type}),u.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Kn,{className:"w-3 h-3"}),P.xp," XP"]})]}),u.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:P.stem})]}),u.jsx(h0,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Q?"rotate-90":""}`})]}),Q&&u.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[P.context&&u.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:P.context}),P.type==="ranking"?u.jsx(x6e,{question:P,answer:z,onSelect:B}):P.type==="multiple_select"?u.jsx(b6e,{question:P,answer:z,onSelect:B}):u.jsx(v6e,{question:P,answer:z,onSelect:B}),P.type==="linked_mc"&&P.linkedFollowUp&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[u.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),u.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:P.linkedFollowUp.stem}),u.jsx("div",{className:"space-y-2",children:P.linkedFollowUp.options.map(Y=>{const pe=(z==null?void 0:z.linkedSelected)===Y.id,ae=ee,X=Y.id===P.linkedFollowUp.correctAnswer;return u.jsxs("button",{onClick:()=>R(P.id,Y.id),disabled:ee,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ae?X?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":pe?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":pe?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),ee?u.jsxs("div",{className:`p-4 rounded-xl border ${K?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[K?u.jsx(An,{className:"w-5 h-5 text-emerald-400"}):u.jsx(bp,{className:"w-5 h-5 text-red-400"}),u.jsx("span",{className:`font-bold text-sm ${K?"text-emerald-400":"text-red-400"}`,children:K?`Correct! +${P.xp} XP`:"Incorrect"})]}),u.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:P.explanation})]}):u.jsx("button",{onClick:()=>I(P),disabled:!(z!=null&&z.selected)||Array.isArray(z==null?void 0:z.selected)&&z.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},P.id)}),A.length===0&&u.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[u.jsx(wp,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},v6e=({question:t,answer:e,onSelect:r})=>u.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const i=(e==null?void 0:e.selected)===n.id,a=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return u.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":i?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":i?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),b6e=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=t.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(a=>{const s=n.includes(a.id),c=e==null?void 0:e.submitted,d=i.includes(a.id);return u.jsxs("button",{onClick:()=>r(t.id,a.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&u.jsx(An,{className:"w-3 h-3 text-white"})}),u.jsxs("span",{children:[u.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[a.id.toUpperCase(),"."]})," ",a.text]})]},a.id)})]})},x6e=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=e==null?void 0:e.submitted,a=t.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[u.jsx(fae,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(m=>m.id===s),f=i&&a[c]===s;return u.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${i?f?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return u.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?u.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):u.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function w6e(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${Kv.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return Kv.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,i)=>`<code class="math-inline">${n} = ${i}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const _6e=({assignment:t,onComplete:e})=>{const[r,n]=F.useState(null),[i,a]=F.useState(!0),[s,c]=F.useState(!1),d=F.useRef(Uv()),f=F.useRef(Date.now()),m=F.useRef(e),[p,y]=F.useState(!0),[b,T]=F.useState(0);F.useEffect(()=>{m.current=e},[e]);const S=F.useCallback(()=>{f.current=Date.now(),p||y(!0)},[p]);F.useEffect(()=>{const k=setInterval(()=>{Date.now()-f.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),p||y(!0)):p&&y(!1)},1e3);return()=>clearInterval(k)},[p]),F.useEffect(()=>{const k=["mousemove","keydown","scroll","click"];return k.forEach(M=>window.addEventListener(M,S)),()=>{k.forEach(M=>window.removeEventListener(M,S))}},[S]),F.useEffect(()=>()=>{m.current(d.current)},[]),F.useEffect(()=>{(async()=>{a(!0);try{const M=await ea(ot(Be,"reading_materials",t.id));M.exists()?n(M.data()):c(!0)}catch(M){console.error("Failed to load reading material:",M),c(!0)}finally{a(!1)}})()},[t.id]);const w=F.useMemo(()=>r?r.sections.map(k=>({title:k.title,html:w6e(k.content)})):[],[r]);return i?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(Fa,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(qs,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?u.jsx(T8,{className:"w-4 h-4"}):u.jsx(ps,{className:"w-4 h-4 animate-pulse"}),p?"Reading Active":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(b/60),"m ",b%60,"s"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&u.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!p&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(gs,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&u.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),u.jsx("div",{className:"space-y-10",children:w.map((k,M)=>u.jsxs("div",{className:"group",children:[u.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[u.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:M+1}),k.title]}),u.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:k.html}})]},M))}),u.jsx("div",{className:"mt-12 mb-4 text-center",children:u.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[u.jsx(qs,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},JU={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},S6e=()=>{var pe;const[t,e]=F.useState(null),[r,n]=F.useState("Dashboard"),[i,a]=F.useState([]),[s,c]=F.useState([]),[d,f]=F.useState([]),[m,p]=F.useState([]),[y,b]=F.useState([]),[T,S]=F.useState(null),[w,k]=F.useState("STUDENT"),[M,C]=F.useState("WORK"),[B,R]=F.useState(!0),[I,A]=F.useState(!1),E=F.useMemo(()=>{const ae=new Map;return s.forEach(X=>{const J=ae.get(X.userId)||[];J.push(X),ae.set(X.userId,J)}),d.map(X=>{const J=ae.get(X.id)||[],le=J.length,Ee=Math.round(J.reduce((oe,Oe)=>{var Me;return oe+(((Me=Oe.metrics)==null?void 0:Me.engagementTime)||0)},0)/60);return{...X,stats:{problemsCompleted:le,avgScore:0,rawAccuracy:0,totalTime:Ee}}})},[d,s]),O=F.useMemo(()=>i.find(ae=>ae.id===T)||null,[i,T]);F.useEffect(()=>{let ae=null;const X=_Z(mT,async J=>{J?(await U(J),ae=Si(ot(Be,"users",J.uid),le=>{le.exists()&&e(Ee=>({...Ee||{},...le.data(),id:J.uid}))})):(e(null),ae&&ae(),R(!1))});return()=>{X(),ae&&ae()}},[]),F.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Ui.ADMIN)){const ae=Fe.subscribeToAssignments(a),X=Fe.subscribeToClassConfigs(b),J=[ae,X];return t.role===Ui.ADMIN?(J.push(Fe.subscribeToSubmissions(c)),J.push(Fe.subscribeToUsers(f)),J.push(Fe.subscribeToWhitelist(p))):J.push(Fe.subscribeToUserSubmissions(t.id,c)),()=>J.forEach(le=>le())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),F.useEffect(()=>{(t==null?void 0:t.role)===Ui.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),F.useEffect(()=>{var ae;Ple(((ae=t==null?void 0:t.settings)==null?void 0:ae.soundEffects)!==!1)},[(pe=t==null?void 0:t.settings)==null?void 0:pe.soundEffects]);const U=async ae=>{try{const X=ot(Be,"users",ae.uid),J=await ea(X),le=await ea(ot(Be,"allowed_emails",ae.email||"")),oe=(await ae.getIdTokenResult()).claims.admin===!0||ae.email===ese,Oe=le.exists()||oe,Me=le.exists()?le.data():null,at=(Me==null?void 0:Me.classType)||Rr.UNCATEGORIZED,Ae=(Me==null?void 0:Me.classTypes)||(at!==Rr.UNCATEGORIZED?[at]:[]);if(J.exists()){const $e=J.data(),de={lastLoginAt:new Date().toISOString(),isWhitelisted:Oe};if(oe&&(de.role="ADMIN"),!Oe&&!oe&&(de.enrolledClasses=[]),Oe&&Ae.length>0){const ge=$e.enrolledClasses||[],Ye=Array.from(new Set([...ge,...Ae]));Ye.length!==ge.length&&(de.enrolledClasses=Ye,(!$e.classType||$e.classType===Rr.UNCATEGORIZED)&&(de.classType=Ae[0]))}await Ir(X,de)}else{const $e={email:ae.email,name:ae.displayName||"Student",avatarUrl:ae.photoURL||"",role:oe?"ADMIN":"STUDENT",classType:at,enrolledClasses:Oe?Ae:[],isWhitelisted:Oe,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Zi(X,$e)}}catch(X){console.error(X)}finally{R(!1)}},P=async()=>{await SZ(mT),e(null),S(null)},V=ae=>{C("WORK"),S(ae)},z=F.useRef(O),Q=F.useRef(t);F.useEffect(()=>{z.current=O},[O]),F.useEffect(()=>{Q.current=t},[t]);const ee=async ae=>{const X=Q.current,J=z.current;if(!(!X||!J||X.role===Ui.ADMIN)&&!(ae.engagementTime<10))try{await Fe.submitEngagement(X.id,X.name,J.id,J.title,ae,J.classType)}catch(le){console.error("Engagement submission failed:",le)}},K=F.useMemo(()=>{const ae={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const X=y.find(J=>J.className===t.classType);if(X)return X.features}return ae},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(B)return u.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return u.jsx(Ble,{});if(!t.isWhitelisted&&t.role!==Ui.ADMIN)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[u.jsx(jx,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),u.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",TF," for authorization."]}),u.jsx("button",{onClick:P,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const Z=t.role===Ui.ADMIN||K.physicsTools,Y=t.role===Ui.ADMIN||K.communications;return u.jsx(p6e,{children:u.jsx(Ule,{children:u.jsx(ise,{children:u.jsxs(u.Fragment,{children:[u.jsx(ase,{}),Z&&u.jsx(ace,{onToggleChat:Y?()=>A(!I):void 0}),Y&&u.jsx(lce,{user:t,isOpen:I,onClose:()=>A(!1),assignments:i,classConfigs:y,onOpenResource:ae=>{V(ae)}}),u.jsx(ose,{user:t,onLogout:P,activeTab:r,setActiveTab:n,children:O?u.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[O.title,t.role===Ui.ADMIN&&u.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),u.jsxs("div",{className:"flex gap-4 mt-2",children:[u.jsx("button",{onClick:()=>C("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${M==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),O.category==="Practice Set"?u.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${M==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(qs,{className:"w-3.5 h-3.5"})," Study Material"]}):u.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${M==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(yh,{className:"w-3.5 h-3.5"})," Review"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&u.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[u.jsx("button",{onClick:()=>k("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),u.jsx("button",{onClick:()=>k("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),u.jsxs("button",{onClick:()=>{S(null),C("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[u.jsx(hae,{className:"w-4 h-4"})," Exit"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[M==="WORK"&&u.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Lle,{onComplete:ee,contentUrl:O.contentUrl,htmlContent:O.htmlContent,userId:t.id,assignmentId:O.id,classType:O.classType})}),w==="ADMIN"&&t.role===Ui.ADMIN&&u.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[u.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[u.jsx(_p,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:u.jsx(Zc,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ae=>ae.assignmentId===O.id&&!ae.isArchived).length}),u.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),u.jsx("button",{onClick:()=>A(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),M==="REVIEW"&&u.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:O.category==="Practice Set"?u.jsx(_6e,{assignment:O,onComplete:ee}):u.jsx(y6e,{assignment:O})})]})]}):u.jsx("div",{className:"h-full",children:u.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Ui.ADMIN&&u.jsxs(u.Fragment,{children:[r==="Dashboard"&&u.jsx(qle,{users:E,assignments:i,submissions:s}),r==="User Management"&&u.jsx(Hle,{users:E,whitelistedEmails:m,classConfigs:y,onWhitelist:async(ae,X)=>Fe.addToWhitelist(ae,X)}),r==="Admin Panel"&&u.jsx(Qle,{assignments:i,submissions:s,onCreateAssignment:async ae=>{ae.title&&await Fe.addAssignment(ae)},classConfigs:y,onPreviewAssignment:ae=>{k("STUDENT"),V(ae)}}),r==="XP Command"&&u.jsx(nce,{users:d})]}),t.role===Ui.STUDENT&&u.jsxs(u.Fragment,{children:[r in JU&&u.jsx(D3e,{user:t,assignments:i,submissions:s,enabledFeatures:K,onNavigate:n,onStartAssignment:V,studentTab:JU[r]}),r==="Forensics"&&K.evidenceLocker&&u.jsx(l6e,{user:t}),r==="Physics Lab"&&K.physicsLab&&u.jsx(c6e,{user:t}),r==="Leaderboard"&&K.leaderboard&&u.jsx(m6e,{})]})]},r)})})]})})})})},gW=document.getElementById("root");if(!gW)throw new Error("Could not find root element to mount to");const T6e=nQ.createRoot(gW);T6e.render(u.jsx(ne.StrictMode,{children:u.jsx(S6e,{})}));
