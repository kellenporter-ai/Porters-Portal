var $J=Object.defineProperty;var zJ=(t,e,r)=>e in t?$J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var TO=(t,e,r)=>zJ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as UJ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W5={exports:{}},Wp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO;function VJ(){if(jO)return Wp;jO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Wp.Fragment=e,Wp.jsx=r,Wp.jsxs=r,Wp}var AO;function FJ(){return AO||(AO=1,W5.exports=VJ()),W5.exports}var s=FJ(),K5={exports:{}},fr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO;function qJ(){if(EO)return fr;EO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function y(Y){return Y===null||typeof Y!="object"?null:(Y=x&&Y[x]||Y["@@iterator"],typeof Y=="function"?Y:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function E(Y,ae,re){this.props=Y,this.context=ae,this.refs=w,this.updater=re||S}E.prototype.isReactComponent={},E.prototype.setState=function(Y,ae){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ae,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function O(){}O.prototype=E.prototype;function R(Y,ae,re){this.props=Y,this.context=ae,this.refs=w,this.updater=re||S}var P=R.prototype=new O;P.constructor=R,N(P,E.prototype),P.isPureReactComponent=!0;var I=Array.isArray;function k(){}var A={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function C(Y,ae,re){var ye=re.ref;return{$$typeof:t,type:Y,key:ae,ref:ye!==void 0?ye:null,props:re}}function U(Y,ae){return C(Y.type,ae,Y.props)}function L(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function $(Y){var ae={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(re){return ae[re]})}var B=/\/+/g;function G(Y,ae){return typeof Y=="object"&&Y!==null&&Y.key!=null?$(""+Y.key):ae.toString(36)}function K(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(k,k):(Y.status="pending",Y.then(function(ae){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ae)},function(ae){Y.status==="pending"&&(Y.status="rejected",Y.reason=ae)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function H(Y,ae,re,ye,De){var Ye=typeof Y;(Ye==="undefined"||Ye==="boolean")&&(Y=null);var rt=!1;if(Y===null)rt=!0;else switch(Ye){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(Y.$$typeof){case t:case e:rt=!0;break;case p:return rt=Y._init,H(rt(Y._payload),ae,re,ye,De)}}if(rt)return De=De(Y),rt=ye===""?"."+G(Y,0):ye,I(De)?(re="",rt!=null&&(re=rt.replace(B,"$&/")+"/"),H(De,ae,re,"",function(Ue){return Ue})):De!=null&&(L(De)&&(De=U(De,re+(De.key==null||Y&&Y.key===De.key?"":(""+De.key).replace(B,"$&/")+"/")+rt)),ae.push(De)),1;rt=0;var et=ye===""?".":ye+":";if(I(Y))for(var Ne=0;Ne<Y.length;Ne++)ye=Y[Ne],Ye=et+G(ye,Ne),rt+=H(ye,ae,re,Ye,De);else if(Ne=y(Y),typeof Ne=="function")for(Y=Ne.call(Y),Ne=0;!(ye=Y.next()).done;)ye=ye.value,Ye=et+G(ye,Ne++),rt+=H(ye,ae,re,Ye,De);else if(Ye==="object"){if(typeof Y.then=="function")return H(K(Y),ae,re,ye,De);throw ae=String(Y),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return rt}function Z(Y,ae,re){if(Y==null)return Y;var ye=[],De=0;return H(Y,ye,"","",function(Ye){return ae.call(re,Ye,De++)}),ye}function ne(Y){if(Y._status===-1){var ae=Y._result;ae=ae(),ae.then(function(re){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=re)},function(re){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=re)}),Y._status===-1&&(Y._status=0,Y._result=ae)}if(Y._status===1)return Y._result.default;throw Y._result}var ce=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},he={map:Z,forEach:function(Y,ae,re){Z(Y,function(){ae.apply(this,arguments)},re)},count:function(Y){var ae=0;return Z(Y,function(){ae++}),ae},toArray:function(Y){return Z(Y,function(ae){return ae})||[]},only:function(Y){if(!L(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return fr.Activity=m,fr.Children=he,fr.Component=E,fr.Fragment=r,fr.Profiler=a,fr.PureComponent=R,fr.StrictMode=n,fr.Suspense=d,fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,fr.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return A.H.useMemoCache(Y)}},fr.cache=function(Y){return function(){return Y.apply(null,arguments)}},fr.cacheSignal=function(){return null},fr.cloneElement=function(Y,ae,re){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ye=N({},Y.props),De=Y.key;if(ae!=null)for(Ye in ae.key!==void 0&&(De=""+ae.key),ae)!j.call(ae,Ye)||Ye==="key"||Ye==="__self"||Ye==="__source"||Ye==="ref"&&ae.ref===void 0||(ye[Ye]=ae[Ye]);var Ye=arguments.length-2;if(Ye===1)ye.children=re;else if(1<Ye){for(var rt=Array(Ye),et=0;et<Ye;et++)rt[et]=arguments[et+2];ye.children=rt}return C(Y.type,De,ye)},fr.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},fr.createElement=function(Y,ae,re){var ye,De={},Ye=null;if(ae!=null)for(ye in ae.key!==void 0&&(Ye=""+ae.key),ae)j.call(ae,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(De[ye]=ae[ye]);var rt=arguments.length-2;if(rt===1)De.children=re;else if(1<rt){for(var et=Array(rt),Ne=0;Ne<rt;Ne++)et[Ne]=arguments[Ne+2];De.children=et}if(Y&&Y.defaultProps)for(ye in rt=Y.defaultProps,rt)De[ye]===void 0&&(De[ye]=rt[ye]);return C(Y,Ye,De)},fr.createRef=function(){return{current:null}},fr.forwardRef=function(Y){return{$$typeof:c,render:Y}},fr.isValidElement=L,fr.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:ne}},fr.memo=function(Y,ae){return{$$typeof:h,type:Y,compare:ae===void 0?null:ae}},fr.startTransition=function(Y){var ae=A.T,re={};A.T=re;try{var ye=Y(),De=A.S;De!==null&&De(re,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(k,ce)}catch(Ye){ce(Ye)}finally{ae!==null&&re.types!==null&&(ae.types=re.types),A.T=ae}},fr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},fr.use=function(Y){return A.H.use(Y)},fr.useActionState=function(Y,ae,re){return A.H.useActionState(Y,ae,re)},fr.useCallback=function(Y,ae){return A.H.useCallback(Y,ae)},fr.useContext=function(Y){return A.H.useContext(Y)},fr.useDebugValue=function(){},fr.useDeferredValue=function(Y,ae){return A.H.useDeferredValue(Y,ae)},fr.useEffect=function(Y,ae){return A.H.useEffect(Y,ae)},fr.useEffectEvent=function(Y){return A.H.useEffectEvent(Y)},fr.useId=function(){return A.H.useId()},fr.useImperativeHandle=function(Y,ae,re){return A.H.useImperativeHandle(Y,ae,re)},fr.useInsertionEffect=function(Y,ae){return A.H.useInsertionEffect(Y,ae)},fr.useLayoutEffect=function(Y,ae){return A.H.useLayoutEffect(Y,ae)},fr.useMemo=function(Y,ae){return A.H.useMemo(Y,ae)},fr.useOptimistic=function(Y,ae){return A.H.useOptimistic(Y,ae)},fr.useReducer=function(Y,ae,re){return A.H.useReducer(Y,ae,re)},fr.useRef=function(Y){return A.H.useRef(Y)},fr.useState=function(Y){return A.H.useState(Y)},fr.useSyncExternalStore=function(Y,ae,re){return A.H.useSyncExternalStore(Y,ae,re)},fr.useTransition=function(){return A.H.useTransition()},fr.version="19.2.4",fr}var kO;function UA(){return kO||(kO=1,K5.exports=qJ()),K5.exports}var T=UA();const ie=tn(T);var Q5={exports:{}},Kp={},X5={exports:{}},Y5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function HJ(){return CO||(CO=1,(function(t){function e(H,Z){var ne=H.length;H.push(Z);e:for(;0<ne;){var ce=ne-1>>>1,he=H[ce];if(0<a(he,Z))H[ce]=Z,H[ne]=he,ne=ce;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],ne=H.pop();if(ne!==Z){H[0]=ne;e:for(var ce=0,he=H.length,Y=he>>>1;ce<Y;){var ae=2*(ce+1)-1,re=H[ae],ye=ae+1,De=H[ye];if(0>a(re,ne))ye<he&&0>a(De,re)?(H[ce]=De,H[ye]=ne,ce=ye):(H[ce]=re,H[ae]=ne,ce=ae);else if(ye<he&&0>a(De,ne))H[ce]=De,H[ye]=ne,ce=ye;else break e}}return Z}function a(H,Z){var ne=H.sortIndex-Z.sortIndex;return ne!==0?ne:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,x=3,y=!1,S=!1,N=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var Z=r(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=H)n(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=r(h)}}function I(H){if(N=!1,P(H),!S)if(r(d)!==null)S=!0,k||(k=!0,$());else{var Z=r(h);Z!==null&&K(I,Z.startTime-H)}}var k=!1,A=-1,j=5,C=-1;function U(){return w?!0:!(t.unstable_now()-C<j)}function L(){if(w=!1,k){var H=t.unstable_now();C=H;var Z=!0;try{e:{S=!1,N&&(N=!1,O(A),A=-1),y=!0;var ne=x;try{t:{for(P(H),m=r(d);m!==null&&!(m.expirationTime>H&&U());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,x=m.priorityLevel;var he=ce(m.expirationTime<=H);if(H=t.unstable_now(),typeof he=="function"){m.callback=he,P(H),Z=!0;break t}m===r(d)&&n(d),P(H)}else n(d);m=r(d)}if(m!==null)Z=!0;else{var Y=r(h);Y!==null&&K(I,Y.startTime-H),Z=!1}}break e}finally{m=null,x=ne,y=!1}Z=void 0}}finally{Z?$():k=!1}}}var $;if(typeof R=="function")$=function(){R(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=L,$=function(){G.postMessage(null)}}else $=function(){E(L,0)};function K(H,Z){A=E(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var ne=x;x=Z;try{return H()}finally{x=ne}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=x;x=H;try{return Z()}finally{x=ne}},t.unstable_scheduleCallback=function(H,Z,ne){var ce=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ce+ne:ce):ne=ce,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,H={id:p++,callback:Z,priorityLevel:H,startTime:ne,expirationTime:he,sortIndex:-1},ne>ce?(H.sortIndex=ne,e(h,H),r(d)===null&&H===r(h)&&(N?(O(A),A=-1):N=!0,K(I,ne-ce))):(H.sortIndex=he,e(d,H),S||y||(S=!0,k||(k=!0,$()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var Z=x;return function(){var ne=x;x=Z;try{return H.apply(this,arguments)}finally{x=ne}}}})(Y5)),Y5}var OO;function GJ(){return OO||(OO=1,X5.exports=HJ()),X5.exports}var J5={exports:{}},Ni={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IO;function WJ(){if(IO)return Ni;IO=1;var t=UA();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ni.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},Ni.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},Ni.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Ni.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ni.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:y}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ni.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Ni.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ni.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Ni.requestFormReset=function(d){n.d.r(d)},Ni.unstable_batchedUpdates=function(d,h){return d(h)},Ni.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},Ni.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ni.version="19.2.4",Ni}var RO;function bV(){if(RO)return J5.exports;RO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),J5.exports=WJ(),J5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MO;function KJ(){if(MO)return Kp;MO=1;var t=GJ(),e=UA(),r=bV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var V=!1,Q=b.child;Q;){if(Q===f){V=!0,f=b,g=_;break}if(Q===g){V=!0,g=b,f=_;break}Q=Q.sibling}if(!V){for(Q=_.child;Q;){if(Q===f){V=!0,f=_,g=b;break}if(Q===g){V=!0,g=_,f=b;break}Q=Q.sibling}if(!V)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case N:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case S:return"Portal";case R:return l.displayName||"Context";case O:return(l._context.displayName||"Context")+".Consumer";case P:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case j:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ce=[],he=-1;function Y(l){return{current:l}}function ae(l){0>he||(l.current=ce[he],ce[he]=null,he--)}function re(l,u){he++,ce[he]=l.current,l.current=u}var ye=Y(null),De=Y(null),Ye=Y(null),rt=Y(null);function et(l,u){switch(re(Ye,u),re(De,l),re(ye,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?K9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=K9(u),l=Q9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ae(ye),re(ye,l)}function Ne(){ae(ye),ae(De),ae(Ye)}function Ue(l){l.memoizedState!==null&&re(rt,l);var u=ye.current,f=Q9(u,l.type);u!==f&&(re(De,l),re(ye,f))}function X(l){De.current===l&&(ae(ye),ae(De)),rt.current===l&&(ae(rt),Fp._currentValue=ne)}var te,be;function we(l){if(te===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||"",be=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+be}var Qe=!1;function at(l,u){if(!l||Qe)return"";Qe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(Be){var Pe=Be}Reflect.construct(l,[],Ze)}else{try{Ze.call()}catch(Be){Pe=Be}l.call(Ze.prototype)}}else{try{throw Error()}catch(Be){Pe=Be}(Ze=l())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(Be){if(Be&&Pe&&typeof Be.stack=="string")return[Be.stack,Pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),V=_[0],Q=_[1];if(V&&Q){var ue=V.split(`
`),Oe=Q.split(`
`);for(b=g=0;g<ue.length&&!ue[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Oe.length&&!Oe[b].includes("DetermineComponentFrameRoot");)b++;if(g===ue.length||b===Oe.length)for(g=ue.length-1,b=Oe.length-1;1<=g&&0<=b&&ue[g]!==Oe[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ue[g]!==Oe[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ue[g]!==Oe[b]){var We=`
`+ue[g].replace(" at new "," at ");return l.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",l.displayName)),We}while(1<=g&&0<=b);break}}}finally{Qe=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?we(f):""}function kt(l,u){switch(l.tag){case 26:case 27:case 5:return we(l.type);case 16:return we("Lazy");case 13:return l.child!==u&&u!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return at(l.type,!1);case 11:return at(l.type.render,!1);case 1:return at(l.type,!0);case 31:return we("Activity");default:return""}}function je(l){try{var u="",f=null;do u+=kt(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ct=Object.prototype.hasOwnProperty,Tt=t.unstable_scheduleCallback,St=t.unstable_cancelCallback,bt=t.unstable_shouldYield,de=t.unstable_requestPaint,He=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,Ge=t.unstable_ImmediatePriority,Je=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,Nt=t.unstable_LowPriority,dr=t.unstable_IdlePriority,ge=t.log,nt=t.unstable_setDisableYieldValue,jt=null,Bt=null;function $t(l){if(typeof ge=="function"&&nt(l),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(jt,l)}catch{}}var tt=Math.clz32?Math.clz32:it,tr=Math.log,Le=Math.LN2;function it(l){return l>>>=0,l===0?32:31-(tr(l)/Le|0)|0}var dt=256,Pt=262144,Vt=4194304;function qt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ct(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var Q=g&134217727;return Q!==0?(g=Q&~_,g!==0?b=qt(g):(V&=Q,V!==0?b=qt(V):f||(f=Q&~l,f!==0&&(b=qt(f))))):(Q=g&~_,Q!==0?b=qt(Q):V!==0?b=qt(V):f||(f=g&~l,f!==0&&(b=qt(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Fr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function un(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jr(){var l=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),l}function qr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function gn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function gr(l,u,f,g,b,_){var V=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Q=l.entanglements,ue=l.expirationTimes,Oe=l.hiddenUpdates;for(f=V&~f;0<f;){var We=31-tt(f),Ze=1<<We;Q[We]=0,ue[We]=-1;var Pe=Oe[We];if(Pe!==null)for(Oe[We]=null,We=0;We<Pe.length;We++){var Be=Pe[We];Be!==null&&(Be.lane&=-536870913)}f&=~Ze}g!==0&&ba(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~(V&~u))}function ba(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-tt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function xn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-tt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function Rn(l,u){var f=u&-u;return f=(f&42)!==0?1:oi(f),(f&(l.suspendedLanes|u))!==0?0:f}function oi(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Or(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function yn(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:yO(l.type))}function li(l,u){var f=Z.p;try{return Z.p=l,u()}finally{Z.p=f}}var Yn=Math.random().toString(36).slice(2),an="__reactFiber$"+Yn,vn="__reactProps$"+Yn,En="__reactContainer$"+Yn,ci="__reactEvents$"+Yn,Ka="__reactListeners$"+Yn,ki="__reactHandles$"+Yn,hs="__reactResources$"+Yn,wi="__reactMarker$"+Yn;function Ot(l){delete l[an],delete l[vn],delete l[ci],delete l[Ka],delete l[ki]}function fe(l){var u=l[an];if(u)return u;for(var f=l.parentNode;f;){if(u=f[En]||f[an]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=rO(l);l!==null;){if(f=l[an])return f;l=rO(l)}return u}l=f,f=l.parentNode}return null}function st(l){if(l=l[an]||l[En]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function pt(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function nr(l){var u=l[hs];return u||(u=l[hs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vr(l){l[wi]=!0}var dn=new Set,Zr={};function bn(l,u){Pr(l,u),Pr(l+"Capture",u)}function Pr(l,u){for(Zr[l]=u,l=0;l<u.length;l++)dn.add(u[l])}var Ls=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fs={},po={};function yl(l){return ct.call(po,l)?!0:ct.call(fs,l)?!1:Ls.test(l)?po[l]=!0:(fs[l]=!0,!1)}function ps(l,u,f){if(yl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function ms(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Pa(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function wa(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ve(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(V){f=""+V,_.call(this,V)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(V){f=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Te(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=ve(l,u,""+l[u])}}function Ae(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function gt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var zt=/[\n"\\]/g;function Rt(l){return l.replace(zt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ar(l,u,f,g,b,_,V,Q){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+wa(u)):l.value!==""+wa(u)&&(l.value=""+wa(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?le(l,V,wa(u)):f!=null?le(l,V,wa(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.name=""+wa(Q):l.removeAttribute("name")}function Er(l,u,f,g,b,_,V,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Te(l);return}f=f!=null?""+wa(f):"",u=u!=null?""+wa(u):f,Q||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Q?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Te(l)}function le(l,u,f){u==="number"&&gt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function xe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+wa(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function Re(l,u,f){if(u!=null&&(u=""+wa(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+wa(f):""}function Ve(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(K(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=wa(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Te(l)}function Fe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var hr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zt(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||hr.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Mn(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&Zt(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&Zt(l,_,u[_])}function ua(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(l){return Sa.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Dn(){}var Nr=null;function Lo(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $s=null,gs=null;function Wx(l){var u=st(l);if(u&&(l=u.stateNode)){var f=l[vn]||null;e:switch(l=u.stateNode,u.type){case"input":if(ar(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Rt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[vn]||null;if(!b)throw Error(n(90));ar(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ae(g)}break e;case"textarea":Re(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&xe(l,!!f.multiple,u,!1)}}}var ip=!1;function Kx(l,u,f){if(ip)return l(u,f);ip=!0;try{var g=l(u);return g}finally{if(ip=!1,($s!==null||gs!==null)&&(q1(),$s&&(u=$s,l=gs,gs=$s=null,Wx(u),l)))for(u=0;u<l.length;u++)Wx(l[u])}}function qi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[vn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=!1;if(mo)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){sp=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{sp=!1}var xs=null,O0=null,$o=null;function Tc(){if($o)return $o;var l,u=O0,f=u.length,g,b="value"in xs?xs.value:xs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var V=f-l;for(g=1;g<=V&&u[f-g]===b[_-g];g++);return $o=b.slice(l,1<g?1-g:void 0)}function Ju(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function jc(){return!0}function $n(){return!1}function Si(l){function u(f,g,b,_,V){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=V,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(f=l[Q],this[Q]=f?f(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?jc:$n,this.isPropagationStopped=$n,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),u}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=Si(vl),Ac=m({},vl,{view:0,detail:0}),Qx=Si(Ac),Ec,I0,Ci,ed=m({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ci&&(Ci&&l.type==="mousemove"?(Ec=l.screenX-Ci.screenX,I0=l.screenY-Ci.screenY):I0=Ec=0,Ci=l),Ec)},movementY:function(l){return"movementY"in l?l.movementY:I0}}),Xx=Si(ed),td=m({},ed,{dataTransfer:0}),Yx=Si(td),op=m({},Ac,{relatedTarget:0}),kc=Si(op),Jx=m({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Si(Jx),Zw=m({},vl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Zx=Si(Zw),rd=m({},vl,{data:0}),lp=Si(rd),e1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=up[l])?!!u[l]:!1}function Cc(){return t1}var r1=m({},Ac,{key:function(l){if(l.key){var u=e1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ju(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?cp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cc,charCode:function(l){return l.type==="keypress"?Ju(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ju(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),n1=Si(r1),bl=m({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=Si(bl),a1=m({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cc}),i1=Si(a1),s1=m({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Si(s1),Oi=m({},ed,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=Si(Oi),l1=m({},vl,{newState:0,oldState:0}),Oc=Si(l1),v=[9,13,27,32],D=mo&&"CompositionEvent"in window,F=null;mo&&"documentMode"in document&&(F=document.documentMode);var ee=mo&&"TextEvent"in window&&!F,_e=mo&&(!D||F&&8<F&&11>=F),ze=" ",yt=!1;function sn(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Tr=!1;function Qa(l,u){switch(l){case"compositionend":return _a(u);case"keypress":return u.which!==32?null:(yt=!0,ze);case"textInput":return l=u.data,l===ze&&yt?null:l;default:return null}}function Xa(l,u){if(Tr)return l==="compositionend"||!D&&sn(l,u)?(l=Tc(),$o=O0=xs=null,Tr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var Ic={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Ic[l.type]:u==="textarea"}function nd(l,u,f,g){$s?gs?gs.push(g):gs=[g]:$s=g,u=Y1(u,"onChange"),0<u.length&&(f=new Zu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var wl=null,hp=null;function hY(l){V9(l,0)}function c1(l){var u=pt(l);if(Ae(u))return l}function ok(l,u){if(l==="change")return u}var lk=!1;if(mo){var e4;if(mo){var t4="oninput"in document;if(!t4){var ck=document.createElement("div");ck.setAttribute("oninput","return;"),t4=typeof ck.oninput=="function"}e4=t4}else e4=!1;lk=e4&&(!document.documentMode||9<document.documentMode)}function uk(){wl&&(wl.detachEvent("onpropertychange",dk),hp=wl=null)}function dk(l){if(l.propertyName==="value"&&c1(hp)){var u=[];nd(u,hp,l,Lo(l)),Kx(hY,u)}}function fY(l,u,f){l==="focusin"?(uk(),wl=u,hp=f,wl.attachEvent("onpropertychange",dk)):l==="focusout"&&uk()}function pY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return c1(hp)}function mY(l,u){if(l==="click")return c1(u)}function gY(l,u){if(l==="input"||l==="change")return c1(u)}function xY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ys=typeof Object.is=="function"?Object.is:xY;function fp(l,u){if(ys(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!ct.call(u,b)||!ys(l[b],u[b]))return!1}return!0}function hk(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function fk(l,u){var f=hk(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=hk(f)}}function pk(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?pk(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function mk(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=gt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=gt(l.document)}return u}function r4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var yY=mo&&"documentMode"in document&&11>=document.documentMode,D0=null,n4=null,pp=null,a4=!1;function gk(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;a4||D0==null||D0!==gt(g)||(g=D0,"selectionStart"in g&&r4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),pp&&fp(pp,g)||(pp=g,g=Y1(n4,"onSelect"),0<g.length&&(u=new Zu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=D0)))}function ad(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var P0={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionrun:ad("Transition","TransitionRun"),transitionstart:ad("Transition","TransitionStart"),transitioncancel:ad("Transition","TransitionCancel"),transitionend:ad("Transition","TransitionEnd")},i4={},xk={};mo&&(xk=document.createElement("div").style,"AnimationEvent"in window||(delete P0.animationend.animation,delete P0.animationiteration.animation,delete P0.animationstart.animation),"TransitionEvent"in window||delete P0.transitionend.transition);function id(l){if(i4[l])return i4[l];if(!P0[l])return l;var u=P0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in xk)return i4[l]=u[f];return l}var yk=id("animationend"),vk=id("animationiteration"),bk=id("animationstart"),vY=id("transitionrun"),bY=id("transitionstart"),wY=id("transitioncancel"),wk=id("transitionend"),Sk=new Map,s4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");s4.push("scrollEnd");function go(l,u){Sk.set(l,u),bn(u,[l])}var u1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},zs=[],L0=0,o4=0;function d1(){for(var l=L0,u=o4=L0=0;u<l;){var f=zs[u];zs[u++]=null;var g=zs[u];zs[u++]=null;var b=zs[u];zs[u++]=null;var _=zs[u];if(zs[u++]=null,g!==null&&b!==null){var V=g.pending;V===null?b.next=b:(b.next=V.next,V.next=b),g.pending=b}_!==0&&Nk(f,b,_)}}function h1(l,u,f,g){zs[L0++]=l,zs[L0++]=u,zs[L0++]=f,zs[L0++]=g,o4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function l4(l,u,f,g){return h1(l,u,f,g),f1(l)}function sd(l,u){return h1(l,null,null,u),f1(l)}function Nk(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-tt(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function f1(l){if(50<Pp)throw Pp=0,x5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var B0={};function SY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(l,u,f,g){return new SY(l,u,f,g)}function c4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Sl(l,u){var f=l.alternate;return f===null?(f=vs(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function _k(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function p1(l,u,f,g,b,_){var V=0;if(g=l,typeof l=="function")c4(l)&&(V=1);else if(typeof l=="string")V=AJ(l,f,ye.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=vs(31,f,u,b),l.elementType=C,l.lanes=_,l;case N:return od(f.children,b,_,u);case w:V=8,b|=24;break;case E:return l=vs(12,f,u,b|2),l.elementType=E,l.lanes=_,l;case I:return l=vs(13,f,u,b),l.elementType=I,l.lanes=_,l;case k:return l=vs(19,f,u,b),l.elementType=k,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:V=10;break e;case O:V=9;break e;case P:V=11;break e;case A:V=14;break e;case j:V=16,g=null;break e}V=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=vs(V,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function od(l,u,f,g){return l=vs(7,l,g,u),l.lanes=f,l}function u4(l,u,f){return l=vs(6,l,null,u),l.lanes=f,l}function Tk(l){var u=vs(18,null,null,0);return u.stateNode=l,u}function d4(l,u,f){return u=vs(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var jk=new WeakMap;function Us(l,u){if(typeof l=="object"&&l!==null){var f=jk.get(l);return f!==void 0?f:(u={value:l,source:u,stack:je(u)},jk.set(l,u),u)}return{value:l,source:u,stack:je(u)}}var $0=[],z0=0,m1=null,mp=0,Vs=[],Fs=0,Rc=null,zo=1,Uo="";function Nl(l,u){$0[z0++]=mp,$0[z0++]=m1,m1=l,mp=u}function Ak(l,u,f){Vs[Fs++]=zo,Vs[Fs++]=Uo,Vs[Fs++]=Rc,Rc=l;var g=zo;l=Uo;var b=32-tt(g)-1;g&=~(1<<b),f+=1;var _=32-tt(u)+b;if(30<_){var V=b-b%5;_=(g&(1<<V)-1).toString(32),g>>=V,b-=V,zo=1<<32-tt(u)+b|f<<b|g,Uo=_+l}else zo=1<<_|f<<b|g,Uo=l}function h4(l){l.return!==null&&(Nl(l,1),Ak(l,1,0))}function f4(l){for(;l===m1;)m1=$0[--z0],$0[z0]=null,mp=$0[--z0],$0[z0]=null;for(;l===Rc;)Rc=Vs[--Fs],Vs[Fs]=null,Uo=Vs[--Fs],Vs[Fs]=null,zo=Vs[--Fs],Vs[Fs]=null}function Ek(l,u){Vs[Fs++]=zo,Vs[Fs++]=Uo,Vs[Fs++]=Rc,zo=u.id,Uo=u.overflow,Rc=l}var ui=null,zn=null,Lr=!1,Mc=null,qs=!1,p4=Error(n(519));function Dc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gp(Us(u,l)),p4}function kk(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[an]=l,u[vn]=g,f){case"dialog":Cr("cancel",u),Cr("close",u);break;case"iframe":case"object":case"embed":Cr("load",u);break;case"video":case"audio":for(f=0;f<Bp.length;f++)Cr(Bp[f],u);break;case"source":Cr("error",u);break;case"img":case"image":case"link":Cr("error",u),Cr("load",u);break;case"details":Cr("toggle",u);break;case"input":Cr("invalid",u),Er(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Cr("invalid",u);break;case"textarea":Cr("invalid",u),Ve(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||G9(u.textContent,f)?(g.popover!=null&&(Cr("beforetoggle",u),Cr("toggle",u)),g.onScroll!=null&&Cr("scroll",u),g.onScrollEnd!=null&&Cr("scrollend",u),g.onClick!=null&&(u.onclick=Dn),u=!0):u=!1,u||Dc(l,!0)}function Ck(l){for(ui=l.return;ui;)switch(ui.tag){case 5:case 31:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:ui=ui.return}}function U0(l){if(l!==ui)return!1;if(!Lr)return Ck(l),Lr=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||I5(l.type,l.memoizedProps)),f=!f),f&&zn&&Dc(l),Ck(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));zn=tO(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));zn=tO(l)}else u===27?(u=zn,Qc(l.type)?(l=L5,L5=null,zn=l):zn=u):zn=ui?Gs(l.stateNode.nextSibling):null;return!0}function ld(){zn=ui=null,Lr=!1}function m4(){var l=Mc;return l!==null&&(Qi===null?Qi=l:Qi.push.apply(Qi,l),Mc=null),l}function gp(l){Mc===null?Mc=[l]:Mc.push(l)}var g4=Y(null),cd=null,_l=null;function Pc(l,u,f){re(g4,u._currentValue),u._currentValue=f}function Tl(l){l._currentValue=g4.current,ae(g4)}function x4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function y4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var V=b.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=b;for(var ue=0;ue<u.length;ue++)if(Q.context===u[ue]){_.lanes|=f,Q=_.alternate,Q!==null&&(Q.lanes|=f),x4(_.return,f,l),g||(V=null);break e}_=Q.next}}else if(b.tag===18){if(V=b.return,V===null)throw Error(n(341));V.lanes|=f,_=V.alternate,_!==null&&(_.lanes|=f),x4(V,f,l),V=null}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===l){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}}function V0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var V=b.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var Q=b.type;ys(b.pendingProps.value,V.value)||(l!==null?l.push(Q):l=[Q])}}else if(b===rt.current){if(V=b.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Fp):l=[Fp])}b=b.return}l!==null&&y4(u,l,f,g),u.flags|=262144}function g1(l){for(l=l.firstContext;l!==null;){if(!ys(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ud(l){cd=l,_l=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function di(l){return Ok(cd,l)}function x1(l,u){return cd===null&&ud(l),Ok(l,u)}function Ok(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},_l===null){if(l===null)throw Error(n(308));_l=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else _l=_l.next=u;return f}var NY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},_Y=t.unstable_scheduleCallback,TY=t.unstable_NormalPriority,Ta={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v4(){return{controller:new NY,data:new Map,refCount:0}}function xp(l){l.refCount--,l.refCount===0&&_Y(TY,function(){l.controller.abort()})}var yp=null,b4=0,F0=0,q0=null;function jY(l,u){if(yp===null){var f=yp=[];b4=0,F0=N5(),q0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return b4++,u.then(Ik,Ik),u}function Ik(){if(--b4===0&&yp!==null){q0!==null&&(q0.status="fulfilled");var l=yp;yp=null,F0=0,q0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function AY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var Rk=H.S;H.S=function(l,u){g9=He(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&jY(l,u),Rk!==null&&Rk(l,u)};var dd=Y(null);function w4(){var l=dd.current;return l!==null?l:kn.pooledCache}function y1(l,u){u===null?re(dd,dd.current):re(dd,u.pool)}function Mk(){var l=w4();return l===null?null:{parent:Ta._currentValue,pool:l}}var H0=Error(n(460)),S4=Error(n(474)),v1=Error(n(542)),b1={then:function(){}};function Dk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Pk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(Dn,Dn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Bk(l),l;default:if(typeof u.status=="string")u.then(Dn,Dn);else{if(l=kn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Bk(l),l}throw fd=u,H0}}function hd(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(fd=f,H0):f}}var fd=null;function Lk(){if(fd===null)throw Error(n(459));var l=fd;return fd=null,l}function Bk(l){if(l===H0||l===v1)throw Error(n(483))}var G0=null,vp=0;function w1(l){var u=vp;return vp+=1,G0===null&&(G0=[]),Pk(G0,l,u)}function bp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function S1(l,u){throw u.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function $k(l){function u(Se,pe){if(l){var Ee=Se.deletions;Ee===null?(Se.deletions=[pe],Se.flags|=16):Ee.push(pe)}}function f(Se,pe){if(!l)return null;for(;pe!==null;)u(Se,pe),pe=pe.sibling;return null}function g(Se){for(var pe=new Map;Se!==null;)Se.key!==null?pe.set(Se.key,Se):pe.set(Se.index,Se),Se=Se.sibling;return pe}function b(Se,pe){return Se=Sl(Se,pe),Se.index=0,Se.sibling=null,Se}function _(Se,pe,Ee){return Se.index=Ee,l?(Ee=Se.alternate,Ee!==null?(Ee=Ee.index,Ee<pe?(Se.flags|=67108866,pe):Ee):(Se.flags|=67108866,pe)):(Se.flags|=1048576,pe)}function V(Se){return l&&Se.alternate===null&&(Se.flags|=67108866),Se}function Q(Se,pe,Ee,Xe){return pe===null||pe.tag!==6?(pe=u4(Ee,Se.mode,Xe),pe.return=Se,pe):(pe=b(pe,Ee),pe.return=Se,pe)}function ue(Se,pe,Ee,Xe){var Kt=Ee.type;return Kt===N?We(Se,pe,Ee.props.children,Xe,Ee.key):pe!==null&&(pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===j&&hd(Kt)===pe.type)?(pe=b(pe,Ee.props),bp(pe,Ee),pe.return=Se,pe):(pe=p1(Ee.type,Ee.key,Ee.props,null,Se.mode,Xe),bp(pe,Ee),pe.return=Se,pe)}function Oe(Se,pe,Ee,Xe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ee.containerInfo||pe.stateNode.implementation!==Ee.implementation?(pe=d4(Ee,Se.mode,Xe),pe.return=Se,pe):(pe=b(pe,Ee.children||[]),pe.return=Se,pe)}function We(Se,pe,Ee,Xe,Kt){return pe===null||pe.tag!==7?(pe=od(Ee,Se.mode,Xe,Kt),pe.return=Se,pe):(pe=b(pe,Ee),pe.return=Se,pe)}function Ze(Se,pe,Ee){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=u4(""+pe,Se.mode,Ee),pe.return=Se,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return Ee=p1(pe.type,pe.key,pe.props,null,Se.mode,Ee),bp(Ee,pe),Ee.return=Se,Ee;case S:return pe=d4(pe,Se.mode,Ee),pe.return=Se,pe;case j:return pe=hd(pe),Ze(Se,pe,Ee)}if(K(pe)||$(pe))return pe=od(pe,Se.mode,Ee,null),pe.return=Se,pe;if(typeof pe.then=="function")return Ze(Se,w1(pe),Ee);if(pe.$$typeof===R)return Ze(Se,x1(Se,pe),Ee);S1(Se,pe)}return null}function Pe(Se,pe,Ee,Xe){var Kt=pe!==null?pe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Kt!==null?null:Q(Se,pe,""+Ee,Xe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:return Ee.key===Kt?ue(Se,pe,Ee,Xe):null;case S:return Ee.key===Kt?Oe(Se,pe,Ee,Xe):null;case j:return Ee=hd(Ee),Pe(Se,pe,Ee,Xe)}if(K(Ee)||$(Ee))return Kt!==null?null:We(Se,pe,Ee,Xe,null);if(typeof Ee.then=="function")return Pe(Se,pe,w1(Ee),Xe);if(Ee.$$typeof===R)return Pe(Se,pe,x1(Se,Ee),Xe);S1(Se,Ee)}return null}function Be(Se,pe,Ee,Xe,Kt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Se=Se.get(Ee)||null,Q(pe,Se,""+Xe,Kt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case y:return Se=Se.get(Xe.key===null?Ee:Xe.key)||null,ue(pe,Se,Xe,Kt);case S:return Se=Se.get(Xe.key===null?Ee:Xe.key)||null,Oe(pe,Se,Xe,Kt);case j:return Xe=hd(Xe),Be(Se,pe,Ee,Xe,Kt)}if(K(Xe)||$(Xe))return Se=Se.get(Ee)||null,We(pe,Se,Xe,Kt,null);if(typeof Xe.then=="function")return Be(Se,pe,Ee,w1(Xe),Kt);if(Xe.$$typeof===R)return Be(Se,pe,Ee,x1(pe,Xe),Kt);S1(pe,Xe)}return null}function Lt(Se,pe,Ee,Xe){for(var Kt=null,Hr=null,Ht=pe,br=pe=0,Rr=null;Ht!==null&&br<Ee.length;br++){Ht.index>br?(Rr=Ht,Ht=null):Rr=Ht.sibling;var Gr=Pe(Se,Ht,Ee[br],Xe);if(Gr===null){Ht===null&&(Ht=Rr);break}l&&Ht&&Gr.alternate===null&&u(Se,Ht),pe=_(Gr,pe,br),Hr===null?Kt=Gr:Hr.sibling=Gr,Hr=Gr,Ht=Rr}if(br===Ee.length)return f(Se,Ht),Lr&&Nl(Se,br),Kt;if(Ht===null){for(;br<Ee.length;br++)Ht=Ze(Se,Ee[br],Xe),Ht!==null&&(pe=_(Ht,pe,br),Hr===null?Kt=Ht:Hr.sibling=Ht,Hr=Ht);return Lr&&Nl(Se,br),Kt}for(Ht=g(Ht);br<Ee.length;br++)Rr=Be(Ht,Se,br,Ee[br],Xe),Rr!==null&&(l&&Rr.alternate!==null&&Ht.delete(Rr.key===null?br:Rr.key),pe=_(Rr,pe,br),Hr===null?Kt=Rr:Hr.sibling=Rr,Hr=Rr);return l&&Ht.forEach(function(eu){return u(Se,eu)}),Lr&&Nl(Se,br),Kt}function Jt(Se,pe,Ee,Xe){if(Ee==null)throw Error(n(151));for(var Kt=null,Hr=null,Ht=pe,br=pe=0,Rr=null,Gr=Ee.next();Ht!==null&&!Gr.done;br++,Gr=Ee.next()){Ht.index>br?(Rr=Ht,Ht=null):Rr=Ht.sibling;var eu=Pe(Se,Ht,Gr.value,Xe);if(eu===null){Ht===null&&(Ht=Rr);break}l&&Ht&&eu.alternate===null&&u(Se,Ht),pe=_(eu,pe,br),Hr===null?Kt=eu:Hr.sibling=eu,Hr=eu,Ht=Rr}if(Gr.done)return f(Se,Ht),Lr&&Nl(Se,br),Kt;if(Ht===null){for(;!Gr.done;br++,Gr=Ee.next())Gr=Ze(Se,Gr.value,Xe),Gr!==null&&(pe=_(Gr,pe,br),Hr===null?Kt=Gr:Hr.sibling=Gr,Hr=Gr);return Lr&&Nl(Se,br),Kt}for(Ht=g(Ht);!Gr.done;br++,Gr=Ee.next())Gr=Be(Ht,Se,br,Gr.value,Xe),Gr!==null&&(l&&Gr.alternate!==null&&Ht.delete(Gr.key===null?br:Gr.key),pe=_(Gr,pe,br),Hr===null?Kt=Gr:Hr.sibling=Gr,Hr=Gr);return l&&Ht.forEach(function(BJ){return u(Se,BJ)}),Lr&&Nl(Se,br),Kt}function Nn(Se,pe,Ee,Xe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===N&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:e:{for(var Kt=Ee.key;pe!==null;){if(pe.key===Kt){if(Kt=Ee.type,Kt===N){if(pe.tag===7){f(Se,pe.sibling),Xe=b(pe,Ee.props.children),Xe.return=Se,Se=Xe;break e}}else if(pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===j&&hd(Kt)===pe.type){f(Se,pe.sibling),Xe=b(pe,Ee.props),bp(Xe,Ee),Xe.return=Se,Se=Xe;break e}f(Se,pe);break}else u(Se,pe);pe=pe.sibling}Ee.type===N?(Xe=od(Ee.props.children,Se.mode,Xe,Ee.key),Xe.return=Se,Se=Xe):(Xe=p1(Ee.type,Ee.key,Ee.props,null,Se.mode,Xe),bp(Xe,Ee),Xe.return=Se,Se=Xe)}return V(Se);case S:e:{for(Kt=Ee.key;pe!==null;){if(pe.key===Kt)if(pe.tag===4&&pe.stateNode.containerInfo===Ee.containerInfo&&pe.stateNode.implementation===Ee.implementation){f(Se,pe.sibling),Xe=b(pe,Ee.children||[]),Xe.return=Se,Se=Xe;break e}else{f(Se,pe);break}else u(Se,pe);pe=pe.sibling}Xe=d4(Ee,Se.mode,Xe),Xe.return=Se,Se=Xe}return V(Se);case j:return Ee=hd(Ee),Nn(Se,pe,Ee,Xe)}if(K(Ee))return Lt(Se,pe,Ee,Xe);if($(Ee)){if(Kt=$(Ee),typeof Kt!="function")throw Error(n(150));return Ee=Kt.call(Ee),Jt(Se,pe,Ee,Xe)}if(typeof Ee.then=="function")return Nn(Se,pe,w1(Ee),Xe);if(Ee.$$typeof===R)return Nn(Se,pe,x1(Se,Ee),Xe);S1(Se,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,pe!==null&&pe.tag===6?(f(Se,pe.sibling),Xe=b(pe,Ee),Xe.return=Se,Se=Xe):(f(Se,pe),Xe=u4(Ee,Se.mode,Xe),Xe.return=Se,Se=Xe),V(Se)):f(Se,pe)}return function(Se,pe,Ee,Xe){try{vp=0;var Kt=Nn(Se,pe,Ee,Xe);return G0=null,Kt}catch(Ht){if(Ht===H0||Ht===v1)throw Ht;var Hr=vs(29,Ht,null,Se.mode);return Hr.lanes=Xe,Hr.return=Se,Hr}finally{}}}var pd=$k(!0),zk=$k(!1),Lc=!1;function N4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Bc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function $c(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(en&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=f1(l),Nk(l,null,f),u}return h1(l,g,u,f),f1(l)}function wp(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,xn(l,f)}}function T4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var V={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=V:_=_.next=V,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var j4=!1;function Sp(){if(j4){var l=q0;if(l!==null)throw l}}function Np(l,u,f,g){j4=!1;var b=l.updateQueue;Lc=!1;var _=b.firstBaseUpdate,V=b.lastBaseUpdate,Q=b.shared.pending;if(Q!==null){b.shared.pending=null;var ue=Q,Oe=ue.next;ue.next=null,V===null?_=Oe:V.next=Oe,V=ue;var We=l.alternate;We!==null&&(We=We.updateQueue,Q=We.lastBaseUpdate,Q!==V&&(Q===null?We.firstBaseUpdate=Oe:Q.next=Oe,We.lastBaseUpdate=ue))}if(_!==null){var Ze=b.baseState;V=0,We=Oe=ue=null,Q=_;do{var Pe=Q.lane&-536870913,Be=Pe!==Q.lane;if(Be?(Ir&Pe)===Pe:(g&Pe)===Pe){Pe!==0&&Pe===F0&&(j4=!0),We!==null&&(We=We.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var Lt=l,Jt=Q;Pe=u;var Nn=f;switch(Jt.tag){case 1:if(Lt=Jt.payload,typeof Lt=="function"){Ze=Lt.call(Nn,Ze,Pe);break e}Ze=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Jt.payload,Pe=typeof Lt=="function"?Lt.call(Nn,Ze,Pe):Lt,Pe==null)break e;Ze=m({},Ze,Pe);break e;case 2:Lc=!0}}Pe=Q.callback,Pe!==null&&(l.flags|=64,Be&&(l.flags|=8192),Be=b.callbacks,Be===null?b.callbacks=[Pe]:Be.push(Pe))}else Be={lane:Pe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},We===null?(Oe=We=Be,ue=Ze):We=We.next=Be,V|=Pe;if(Q=Q.next,Q===null){if(Q=b.shared.pending,Q===null)break;Be=Q,Q=Be.next,Be.next=null,b.lastBaseUpdate=Be,b.shared.pending=null}}while(!0);We===null&&(ue=Ze),b.baseState=ue,b.firstBaseUpdate=Oe,b.lastBaseUpdate=We,_===null&&(b.shared.lanes=0),qc|=V,l.lanes=V,l.memoizedState=Ze}}function Uk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function Vk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Uk(f[l],u)}var W0=Y(null),N1=Y(0);function Fk(l,u){l=Ml,re(N1,l),re(W0,u),Ml=l|u.baseLanes}function A4(){re(N1,Ml),re(W0,W0.current)}function E4(){Ml=N1.current,ae(W0),ae(N1)}var bs=Y(null),Hs=null;function zc(l){var u=l.alternate;re(da,da.current&1),re(bs,l),Hs===null&&(u===null||W0.current!==null||u.memoizedState!==null)&&(Hs=l)}function k4(l){re(da,da.current),re(bs,l),Hs===null&&(Hs=l)}function qk(l){l.tag===22?(re(da,da.current),re(bs,l),Hs===null&&(Hs=l)):Uc()}function Uc(){re(da,da.current),re(bs,bs.current)}function ws(l){ae(bs),Hs===l&&(Hs=null),ae(da)}var da=Y(0);function _1(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||D5(f)||P5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var jl=0,yr=null,wn=null,ja=null,T1=!1,K0=!1,md=!1,j1=0,_p=0,Q0=null,EY=0;function na(){throw Error(n(321))}function C4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ys(l[f],u[f]))return!1;return!0}function O4(l,u,f,g,b,_){return jl=_,yr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?AC:G4,md=!1,_=f(g,b),md=!1,K0&&(_=Gk(u,f,g,b)),Hk(l),_}function Hk(l){H.H=Ap;var u=wn!==null&&wn.next!==null;if(jl=0,ja=wn=yr=null,T1=!1,_p=0,Q0=null,u)throw Error(n(300));l===null||Aa||(l=l.dependencies,l!==null&&g1(l)&&(Aa=!0))}function Gk(l,u,f,g){yr=l;var b=0;do{if(K0&&(Q0=null),_p=0,K0=!1,25<=b)throw Error(n(301));if(b+=1,ja=wn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=EC,_=u(f,g)}while(K0);return _}function kY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?Tp(u):u,l=l.useState()[0],(wn!==null?wn.memoizedState:null)!==l&&(yr.flags|=1024),u}function I4(){var l=j1!==0;return j1=0,l}function R4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function M4(l){if(T1){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}T1=!1}jl=0,ja=wn=yr=null,K0=!1,_p=j1=0,Q0=null}function Ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?yr.memoizedState=ja=l:ja=ja.next=l,ja}function ha(){if(wn===null){var l=yr.alternate;l=l!==null?l.memoizedState:null}else l=wn.next;var u=ja===null?yr.memoizedState:ja.next;if(u!==null)ja=u,wn=l;else{if(l===null)throw yr.alternate===null?Error(n(467)):Error(n(310));wn=l,l={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},ja===null?yr.memoizedState=ja=l:ja=ja.next=l}return ja}function A1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tp(l){var u=_p;return _p+=1,Q0===null&&(Q0=[]),l=Pk(Q0,l,u),u=yr,(ja===null?u.memoizedState:ja.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?AC:G4),l}function E1(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Tp(l);if(l.$$typeof===R)return di(l)}throw Error(n(438,String(l)))}function D4(l){var u=null,f=yr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=yr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=A1(),yr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=U;return u.index++,f}function Al(l,u){return typeof u=="function"?u(l):u}function k1(l){var u=ha();return P4(u,wn,l)}function P4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var V=b.next;b.next=_.next,_.next=V}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var Q=V=null,ue=null,Oe=u,We=!1;do{var Ze=Oe.lane&-536870913;if(Ze!==Oe.lane?(Ir&Ze)===Ze:(jl&Ze)===Ze){var Pe=Oe.revertLane;if(Pe===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),Ze===F0&&(We=!0);else if((jl&Pe)===Pe){Oe=Oe.next,Pe===F0&&(We=!0);continue}else Ze={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=Ze,V=_):ue=ue.next=Ze,yr.lanes|=Pe,qc|=Pe;Ze=Oe.action,md&&f(_,Ze),_=Oe.hasEagerState?Oe.eagerState:f(_,Ze)}else Pe={lane:Ze,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=Pe,V=_):ue=ue.next=Pe,yr.lanes|=Ze,qc|=Ze;Oe=Oe.next}while(Oe!==null&&Oe!==u);if(ue===null?V=_:ue.next=Q,!ys(_,l.memoizedState)&&(Aa=!0,We&&(f=q0,f!==null)))throw f;l.memoizedState=_,l.baseState=V,l.baseQueue=ue,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function L4(l){var u=ha(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var V=b=b.next;do _=l(_,V.action),V=V.next;while(V!==b);ys(_,u.memoizedState)||(Aa=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function Wk(l,u,f){var g=yr,b=ha(),_=Lr;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var V=!ys((wn||b).memoizedState,f);if(V&&(b.memoizedState=f,Aa=!0),b=b.queue,z4(Xk.bind(null,g,b,l),[l]),b.getSnapshot!==u||V||ja!==null&&ja.memoizedState.tag&1){if(g.flags|=2048,X0(9,{destroy:void 0},Qk.bind(null,g,b,f,u),null),kn===null)throw Error(n(349));_||(jl&127)!==0||Kk(g,u,f)}return f}function Kk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=yr.updateQueue,u===null?(u=A1(),yr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Qk(l,u,f,g){u.value=f,u.getSnapshot=g,Yk(u)&&Jk(l)}function Xk(l,u,f){return f(function(){Yk(u)&&Jk(l)})}function Yk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ys(l,f)}catch{return!0}}function Jk(l){var u=sd(l,2);u!==null&&Xi(u,l,2)}function B4(l){var u=Ii();if(typeof l=="function"){var f=l;if(l=f(),md){$t(!0);try{f()}finally{$t(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:l},u}function Zk(l,u,f,g){return l.baseState=f,P4(l,wn,typeof g=="function"?g:Al)}function CY(l,u,f,g,b){if(I1(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){_.listeners.push(V)}};H.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,eC(u,_)):(_.next=f.next,u.pending=f.next=_)}}function eC(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=H.T,V={};H.T=V;try{var Q=f(b,g),ue=H.S;ue!==null&&ue(V,Q),tC(l,u,Q)}catch(Oe){$4(l,u,Oe)}finally{_!==null&&V.types!==null&&(_.types=V.types),H.T=_}}else try{_=f(b,g),tC(l,u,_)}catch(Oe){$4(l,u,Oe)}}function tC(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){rC(l,u,g)},function(g){return $4(l,u,g)}):rC(l,u,f)}function rC(l,u,f){u.status="fulfilled",u.value=f,nC(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,eC(l,f)))}function $4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,nC(u),u=u.next;while(u!==g)}l.action=null}function nC(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function aC(l,u){return u}function iC(l,u){if(Lr){var f=kn.formState;if(f!==null){e:{var g=yr;if(Lr){if(zn){t:{for(var b=zn,_=qs;b.nodeType!==8;){if(!_){b=null;break t}if(b=Gs(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){zn=Gs(b.nextSibling),g=b.data==="F!";break e}}Dc(g)}g=!1}g&&(u=f[0])}}return f=Ii(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aC,lastRenderedState:u},f.queue=g,f=_C.bind(null,yr,g),g.dispatch=f,g=B4(!1),_=H4.bind(null,yr,!1,g.queue),g=Ii(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=CY.bind(null,yr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function sC(l){var u=ha();return oC(u,wn,l)}function oC(l,u,f){if(u=P4(l,u,aC)[0],l=k1(Al)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Tp(u)}catch(V){throw V===H0?v1:V}else g=u;u=ha();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(yr.flags|=2048,X0(9,{destroy:void 0},OY.bind(null,b,f),null)),[g,_,l]}function OY(l,u){l.action=u}function lC(l){var u=ha(),f=wn;if(f!==null)return oC(u,f,l);ha(),u=u.memoizedState,f=ha();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function X0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=yr.updateQueue,u===null&&(u=A1(),yr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function cC(){return ha().memoizedState}function C1(l,u,f,g){var b=Ii();yr.flags|=l,b.memoizedState=X0(1|u,{destroy:void 0},f,g===void 0?null:g)}function O1(l,u,f,g){var b=ha();g=g===void 0?null:g;var _=b.memoizedState.inst;wn!==null&&g!==null&&C4(g,wn.memoizedState.deps)?b.memoizedState=X0(u,_,f,g):(yr.flags|=l,b.memoizedState=X0(1|u,_,f,g))}function uC(l,u){C1(8390656,8,l,u)}function z4(l,u){O1(2048,8,l,u)}function IY(l){yr.flags|=4;var u=yr.updateQueue;if(u===null)u=A1(),yr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function dC(l){var u=ha().memoizedState;return IY({ref:u,nextImpl:l}),function(){if((en&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function hC(l,u){return O1(4,2,l,u)}function fC(l,u){return O1(4,4,l,u)}function pC(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function mC(l,u,f){f=f!=null?f.concat([l]):null,O1(4,4,pC.bind(null,u,l),f)}function U4(){}function gC(l,u){var f=ha();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&C4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function xC(l,u){var f=ha();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&C4(u,g[1]))return g[0];if(g=l(),md){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g}function V4(l,u,f){return f===void 0||(jl&1073741824)!==0&&(Ir&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=y9(),yr.lanes|=l,qc|=l,f)}function yC(l,u,f,g){return ys(f,u)?f:W0.current!==null?(l=V4(l,f,g),ys(l,u)||(Aa=!0),l):(jl&42)===0||(jl&1073741824)!==0&&(Ir&261930)===0?(Aa=!0,l.memoizedState=f):(l=y9(),yr.lanes|=l,qc|=l,u)}function vC(l,u,f,g,b){var _=Z.p;Z.p=_!==0&&8>_?_:8;var V=H.T,Q={};H.T=Q,H4(l,!1,u,f);try{var ue=b(),Oe=H.S;if(Oe!==null&&Oe(Q,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var We=AY(ue,g);jp(l,u,We,_s(l))}else jp(l,u,g,_s(l))}catch(Ze){jp(l,u,{then:function(){},status:"rejected",reason:Ze},_s())}finally{Z.p=_,V!==null&&Q.types!==null&&(V.types=Q.types),H.T=V}}function RY(){}function F4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=bC(l).queue;vC(l,b,u,ne,f===null?RY:function(){return wC(l),f(g)})}function bC(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:ne},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function wC(l){var u=bC(l);u.next===null&&(u=l.alternate.memoizedState),jp(l,u.next.queue,{},_s())}function q4(){return di(Fp)}function SC(){return ha().memoizedState}function NC(){return ha().memoizedState}function MY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=_s();l=Bc(f);var g=$c(u,l,f);g!==null&&(Xi(g,u,f),wp(g,u,f)),u={cache:v4()},l.payload=u;return}u=u.return}}function DY(l,u,f){var g=_s();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},I1(l)?TC(u,f):(f=l4(l,u,f,g),f!==null&&(Xi(f,l,g),jC(f,u,g)))}function _C(l,u,f){var g=_s();jp(l,u,f,g)}function jp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(I1(l))TC(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var V=u.lastRenderedState,Q=_(V,f);if(b.hasEagerState=!0,b.eagerState=Q,ys(Q,V))return h1(l,u,b,0),kn===null&&d1(),!1}catch{}finally{}if(f=l4(l,u,b,g),f!==null)return Xi(f,l,g),jC(f,u,g),!0}return!1}function H4(l,u,f,g){if(g={lane:2,revertLane:N5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},I1(l)){if(u)throw Error(n(479))}else u=l4(l,f,g,2),u!==null&&Xi(u,l,2)}function I1(l){var u=l.alternate;return l===yr||u!==null&&u===yr}function TC(l,u){K0=T1=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function jC(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,xn(l,f)}}var Ap={readContext:di,use:E1,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useInsertionEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useSyncExternalStore:na,useId:na,useHostTransitionStatus:na,useFormState:na,useActionState:na,useOptimistic:na,useMemoCache:na,useCacheRefresh:na};Ap.useEffectEvent=na;var AC={readContext:di,use:E1,useCallback:function(l,u){return Ii().memoizedState=[l,u===void 0?null:u],l},useContext:di,useEffect:uC,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,C1(4194308,4,pC.bind(null,u,l),f)},useLayoutEffect:function(l,u){return C1(4194308,4,l,u)},useInsertionEffect:function(l,u){C1(4,2,l,u)},useMemo:function(l,u){var f=Ii();u=u===void 0?null:u;var g=l();if(md){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ii();if(f!==void 0){var b=f(u);if(md){$t(!0);try{f(u)}finally{$t(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=DY.bind(null,yr,l),[g.memoizedState,l]},useRef:function(l){var u=Ii();return l={current:l},u.memoizedState=l},useState:function(l){l=B4(l);var u=l.queue,f=_C.bind(null,yr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:U4,useDeferredValue:function(l,u){var f=Ii();return V4(f,l,u)},useTransition:function(){var l=B4(!1);return l=vC.bind(null,yr,l.queue,!0,!1),Ii().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=yr,b=Ii();if(Lr){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),kn===null)throw Error(n(349));(Ir&127)!==0||Kk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,uC(Xk.bind(null,g,_,l),[l]),g.flags|=2048,X0(9,{destroy:void 0},Qk.bind(null,g,_,f,u),null),f},useId:function(){var l=Ii(),u=kn.identifierPrefix;if(Lr){var f=Uo,g=zo;f=(g&~(1<<32-tt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=j1++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=EY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:q4,useFormState:iC,useActionState:iC,useOptimistic:function(l){var u=Ii();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=H4.bind(null,yr,!0,f),f.dispatch=u,[l,u]},useMemoCache:D4,useCacheRefresh:function(){return Ii().memoizedState=MY.bind(null,yr)},useEffectEvent:function(l){var u=Ii(),f={impl:l};return u.memoizedState=f,function(){if((en&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},G4={readContext:di,use:E1,useCallback:gC,useContext:di,useEffect:z4,useImperativeHandle:mC,useInsertionEffect:hC,useLayoutEffect:fC,useMemo:xC,useReducer:k1,useRef:cC,useState:function(){return k1(Al)},useDebugValue:U4,useDeferredValue:function(l,u){var f=ha();return yC(f,wn.memoizedState,l,u)},useTransition:function(){var l=k1(Al)[0],u=ha().memoizedState;return[typeof l=="boolean"?l:Tp(l),u]},useSyncExternalStore:Wk,useId:SC,useHostTransitionStatus:q4,useFormState:sC,useActionState:sC,useOptimistic:function(l,u){var f=ha();return Zk(f,wn,l,u)},useMemoCache:D4,useCacheRefresh:NC};G4.useEffectEvent=dC;var EC={readContext:di,use:E1,useCallback:gC,useContext:di,useEffect:z4,useImperativeHandle:mC,useInsertionEffect:hC,useLayoutEffect:fC,useMemo:xC,useReducer:L4,useRef:cC,useState:function(){return L4(Al)},useDebugValue:U4,useDeferredValue:function(l,u){var f=ha();return wn===null?V4(f,l,u):yC(f,wn.memoizedState,l,u)},useTransition:function(){var l=L4(Al)[0],u=ha().memoizedState;return[typeof l=="boolean"?l:Tp(l),u]},useSyncExternalStore:Wk,useId:SC,useHostTransitionStatus:q4,useFormState:lC,useActionState:lC,useOptimistic:function(l,u){var f=ha();return wn!==null?Zk(f,wn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:D4,useCacheRefresh:NC};EC.useEffectEvent=dC;function W4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var K4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=_s(),b=Bc(g);b.payload=u,f!=null&&(b.callback=f),u=$c(l,b,g),u!==null&&(Xi(u,l,g),wp(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=_s(),b=Bc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=$c(l,b,g),u!==null&&(Xi(u,l,g),wp(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=_s(),g=Bc(f);g.tag=2,u!=null&&(g.callback=u),u=$c(l,g,f),u!==null&&(Xi(u,l,f),wp(u,l,f))}};function kC(l,u,f,g,b,_,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,V):u.prototype&&u.prototype.isPureReactComponent?!fp(f,g)||!fp(b,_):!0}function CC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&K4.enqueueReplaceState(u,u.state,null)}function gd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function OC(l){u1(l)}function IC(l){console.error(l)}function RC(l){u1(l)}function R1(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function MC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Q4(l,u,f){return f=Bc(f),f.tag=3,f.payload={element:null},f.callback=function(){R1(l,u)},f}function DC(l){return l=Bc(l),l.tag=3,l}function PC(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){MC(u,f,g)}}var V=f.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){MC(u,f,g),typeof b!="function"&&(Hc===null?Hc=new Set([this]):Hc.add(this));var Q=g.stack;this.componentDidCatch(g.value,{componentStack:Q!==null?Q:""})})}function PY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&V0(u,f,b,!0),f=bs.current,f!==null){switch(f.tag){case 31:case 13:return Hs===null?H1():f.alternate===null&&aa===0&&(aa=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===b1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),b5(l,g,b)),!1;case 22:return f.flags|=65536,g===b1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),b5(l,g,b)),!1}throw Error(n(435,f.tag))}return b5(l,g,b),H1(),!1}if(Lr)return u=bs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==p4&&(l=Error(n(422),{cause:g}),gp(Us(l,f)))):(g!==p4&&(u=Error(n(423),{cause:g}),gp(Us(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Us(g,f),b=Q4(l.stateNode,g,b),T4(l,b),aa!==4&&(aa=2)),!1;var _=Error(n(520),{cause:g});if(_=Us(_,f),Dp===null?Dp=[_]:Dp.push(_),aa!==4&&(aa=2),u===null)return!0;g=Us(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=Q4(f.stateNode,g,l),T4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Hc===null||!Hc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=DC(b),PC(b,l,f,g),T4(f,b),!1}f=f.return}while(f!==null);return!1}var X4=Error(n(461)),Aa=!1;function hi(l,u,f,g){u.child=l===null?zk(u,null,f,g):pd(u,l.child,f,g)}function LC(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var V={};for(var Q in g)Q!=="ref"&&(V[Q]=g[Q])}else V=g;return ud(u),g=O4(l,u,f,V,_,b),Q=I4(),l!==null&&!Aa?(R4(l,u,b),El(l,u,b)):(Lr&&Q&&h4(u),u.flags|=1,hi(l,u,g,b),u.child)}function BC(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!c4(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,$C(l,u,_,g,b)):(l=p1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!a5(l,b)){var V=_.memoizedProps;if(f=f.compare,f=f!==null?f:fp,f(V,g)&&l.ref===u.ref)return El(l,u,b)}return u.flags|=1,l=Sl(_,g),l.ref=u.ref,l.return=u,u.child=l}function $C(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(fp(_,g)&&l.ref===u.ref)if(Aa=!1,u.pendingProps=g=_,a5(l,b))(l.flags&131072)!==0&&(Aa=!0);else return u.lanes=l.lanes,El(l,u,b)}return Y4(l,u,f,g,b)}function zC(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return UC(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&y1(u,_!==null?_.cachePool:null),_!==null?Fk(u,_):A4(),qk(u);else return g=u.lanes=536870912,UC(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(y1(u,_.cachePool),Fk(u,_),Uc(),u.memoizedState=null):(l!==null&&y1(u,null),A4(),Uc());return hi(l,u,b,f),u.child}function Ep(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function UC(l,u,f,g,b){var _=w4();return _=_===null?null:{parent:Ta._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&y1(u,null),A4(),qk(u),l!==null&&V0(l,u,g,!0),u.childLanes=b,null}function M1(l,u){return u=P1({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function VC(l,u,f){return pd(u,l.child,null,f),l=M1(u,u.pendingProps),l.flags|=2,ws(u),u.memoizedState=null,l}function LY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Lr){if(g.mode==="hidden")return l=M1(u,g),u.lanes=536870912,Ep(null,l);if(k4(u),(l=zn)?(l=eO(l,qs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Rc!==null?{id:zo,overflow:Uo}:null,retryLane:536870912,hydrationErrors:null},f=Tk(l),f.return=u,u.child=f,ui=u,zn=null)):l=null,l===null)throw Dc(u);return u.lanes=536870912,null}return M1(u,g)}var _=l.memoizedState;if(_!==null){var V=_.dehydrated;if(k4(u),b)if(u.flags&256)u.flags&=-257,u=VC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Aa||V0(l,u,f,!1),b=(f&l.childLanes)!==0,Aa||b){if(g=kn,g!==null&&(V=Rn(g,f),V!==0&&V!==_.retryLane))throw _.retryLane=V,sd(l,V),Xi(g,l,V),X4;H1(),u=VC(l,u,f)}else l=_.treeContext,zn=Gs(V.nextSibling),ui=u,Lr=!0,Mc=null,qs=!1,l!==null&&Ek(u,l),u=M1(u,g),u.flags|=4096;return u}return l=Sl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function D1(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function Y4(l,u,f,g,b){return ud(u),f=O4(l,u,f,g,void 0,b),g=I4(),l!==null&&!Aa?(R4(l,u,b),El(l,u,b)):(Lr&&g&&h4(u),u.flags|=1,hi(l,u,f,b),u.child)}function FC(l,u,f,g,b,_){return ud(u),u.updateQueue=null,f=Gk(u,g,f,b),Hk(l),g=I4(),l!==null&&!Aa?(R4(l,u,_),El(l,u,_)):(Lr&&g&&h4(u),u.flags|=1,hi(l,u,f,_),u.child)}function qC(l,u,f,g,b){if(ud(u),u.stateNode===null){var _=B0,V=f.contextType;typeof V=="object"&&V!==null&&(_=di(V)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=K4,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},N4(u),V=f.contextType,_.context=typeof V=="object"&&V!==null?di(V):B0,_.state=u.memoizedState,V=f.getDerivedStateFromProps,typeof V=="function"&&(W4(u,f,V,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(V=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),V!==_.state&&K4.enqueueReplaceState(_,_.state,null),Np(u,g,_,b),Sp(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var Q=u.memoizedProps,ue=gd(f,Q);_.props=ue;var Oe=_.context,We=f.contextType;V=B0,typeof We=="object"&&We!==null&&(V=di(We));var Ze=f.getDerivedStateFromProps;We=typeof Ze=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,We||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||Oe!==V)&&CC(u,_,g,V),Lc=!1;var Pe=u.memoizedState;_.state=Pe,Np(u,g,_,b),Sp(),Oe=u.memoizedState,Q||Pe!==Oe||Lc?(typeof Ze=="function"&&(W4(u,f,Ze,g),Oe=u.memoizedState),(ue=Lc||kC(u,f,ue,g,Pe,Oe,V))?(We||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Oe),_.props=g,_.state=Oe,_.context=V,g=ue):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,_4(l,u),V=u.memoizedProps,We=gd(f,V),_.props=We,Ze=u.pendingProps,Pe=_.context,Oe=f.contextType,ue=B0,typeof Oe=="object"&&Oe!==null&&(ue=di(Oe)),Q=f.getDerivedStateFromProps,(Oe=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==Ze||Pe!==ue)&&CC(u,_,g,ue),Lc=!1,Pe=u.memoizedState,_.state=Pe,Np(u,g,_,b),Sp();var Be=u.memoizedState;V!==Ze||Pe!==Be||Lc||l!==null&&l.dependencies!==null&&g1(l.dependencies)?(typeof Q=="function"&&(W4(u,f,Q,g),Be=u.memoizedState),(We=Lc||kC(u,f,We,g,Pe,Be,ue)||l!==null&&l.dependencies!==null&&g1(l.dependencies))?(Oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Be,ue),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Be,ue)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Be),_.props=g,_.state=Be,_.context=ue,g=We):(typeof _.componentDidUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,D1(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=pd(u,l.child,null,b),u.child=pd(u,null,f,b)):hi(l,u,f,b),u.memoizedState=_.state,l=u.child):l=El(l,u,b),l}function HC(l,u,f,g){return ld(),u.flags|=256,hi(l,u,f,g),u.child}var J4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Z4(l){return{baseLanes:l,cachePool:Mk()}}function e5(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=Ns),l}function GC(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,V;if((V=_)||(V=l!==null&&l.memoizedState===null?!1:(da.current&2)!==0),V&&(b=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if(Lr){if(b?zc(u):Uc(),(l=zn)?(l=eO(l,qs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Rc!==null?{id:zo,overflow:Uo}:null,retryLane:536870912,hydrationErrors:null},f=Tk(l),f.return=u,u.child=f,ui=u,zn=null)):l=null,l===null)throw Dc(u);return P5(l)?u.lanes=32:u.lanes=536870912,null}var Q=g.children;return g=g.fallback,b?(Uc(),b=u.mode,Q=P1({mode:"hidden",children:Q},b),g=od(g,b,f,null),Q.return=u,g.return=u,Q.sibling=g,u.child=Q,g=u.child,g.memoizedState=Z4(f),g.childLanes=e5(l,V,f),u.memoizedState=J4,Ep(null,g)):(zc(u),t5(u,Q))}var ue=l.memoizedState;if(ue!==null&&(Q=ue.dehydrated,Q!==null)){if(_)u.flags&256?(zc(u),u.flags&=-257,u=r5(l,u,f)):u.memoizedState!==null?(Uc(),u.child=l.child,u.flags|=128,u=null):(Uc(),Q=g.fallback,b=u.mode,g=P1({mode:"visible",children:g.children},b),Q=od(Q,b,f,null),Q.flags|=2,g.return=u,Q.return=u,g.sibling=Q,u.child=g,pd(u,l.child,null,f),g=u.child,g.memoizedState=Z4(f),g.childLanes=e5(l,V,f),u.memoizedState=J4,u=Ep(null,g));else if(zc(u),P5(Q)){if(V=Q.nextSibling&&Q.nextSibling.dataset,V)var Oe=V.dgst;V=Oe,g=Error(n(419)),g.stack="",g.digest=V,gp({value:g,source:null,stack:null}),u=r5(l,u,f)}else if(Aa||V0(l,u,f,!1),V=(f&l.childLanes)!==0,Aa||V){if(V=kn,V!==null&&(g=Rn(V,f),g!==0&&g!==ue.retryLane))throw ue.retryLane=g,sd(l,g),Xi(V,l,g),X4;D5(Q)||H1(),u=r5(l,u,f)}else D5(Q)?(u.flags|=192,u.child=l.child,u=null):(l=ue.treeContext,zn=Gs(Q.nextSibling),ui=u,Lr=!0,Mc=null,qs=!1,l!==null&&Ek(u,l),u=t5(u,g.children),u.flags|=4096);return u}return b?(Uc(),Q=g.fallback,b=u.mode,ue=l.child,Oe=ue.sibling,g=Sl(ue,{mode:"hidden",children:g.children}),g.subtreeFlags=ue.subtreeFlags&65011712,Oe!==null?Q=Sl(Oe,Q):(Q=od(Q,b,f,null),Q.flags|=2),Q.return=u,g.return=u,g.sibling=Q,u.child=g,Ep(null,g),g=u.child,Q=l.child.memoizedState,Q===null?Q=Z4(f):(b=Q.cachePool,b!==null?(ue=Ta._currentValue,b=b.parent!==ue?{parent:ue,pool:ue}:b):b=Mk(),Q={baseLanes:Q.baseLanes|f,cachePool:b}),g.memoizedState=Q,g.childLanes=e5(l,V,f),u.memoizedState=J4,Ep(l.child,g)):(zc(u),f=l.child,l=f.sibling,f=Sl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=f,u.memoizedState=null,f)}function t5(l,u){return u=P1({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function P1(l,u){return l=vs(22,l,null,u),l.lanes=0,l}function r5(l,u,f){return pd(u,l.child,null,f),l=t5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function WC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),x4(l.return,u,f)}function n5(l,u,f,g,b,_){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=f,V.tailMode=b,V.treeForkCount=_)}function KC(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var V=da.current,Q=(V&2)!==0;if(Q?(V=V&1|2,u.flags|=128):V&=1,re(da,V),hi(l,u,g,f),g=Lr?mp:0,!Q&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&WC(l,f,u);else if(l.tag===19)WC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&_1(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),n5(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&_1(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}n5(u,!0,f,null,_,g);break;case"together":n5(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function El(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),qc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(V0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=Sl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Sl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function a5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&g1(l)))}function BY(l,u,f){switch(u.tag){case 3:et(u,u.stateNode.containerInfo),Pc(u,Ta,l.memoizedState.cache),ld();break;case 27:case 5:Ue(u);break;case 4:et(u,u.stateNode.containerInfo);break;case 10:Pc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,k4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(zc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?GC(l,u,f):(zc(u),l=El(l,u,f),l!==null?l.sibling:null);zc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(V0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return KC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(da,da.current),g)break;return null;case 22:return u.lanes=0,zC(l,u,f,u.pendingProps);case 24:Pc(u,Ta,l.memoizedState.cache)}return El(l,u,f)}function QC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Aa=!0;else{if(!a5(l,f)&&(u.flags&128)===0)return Aa=!1,BY(l,u,f);Aa=(l.flags&131072)!==0}else Aa=!1,Lr&&(u.flags&1048576)!==0&&Ak(u,mp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=hd(u.elementType),u.type=l,typeof l=="function")c4(l)?(g=gd(l,g),u.tag=1,u=qC(null,u,l,g,f)):(u.tag=0,u=Y4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===P){u.tag=11,u=LC(null,u,l,g,f);break e}else if(b===A){u.tag=14,u=BC(null,u,l,g,f);break e}}throw u=G(l)||l,Error(n(306,u,""))}}return u;case 0:return Y4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=gd(g,u.pendingProps),qC(l,u,g,b,f);case 3:e:{if(et(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,_4(l,u),Np(u,g,null,f);var V=u.memoizedState;if(g=V.cache,Pc(u,Ta,g),g!==_.cache&&y4(u,[Ta],f,!0),Sp(),g=V.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=HC(l,u,g,f);break e}else if(g!==b){b=Us(Error(n(424)),u),gp(b),u=HC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zn=Gs(l.firstChild),ui=u,Lr=!0,Mc=null,qs=!0,f=zk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ld(),g===b){u=El(l,u,f);break e}hi(l,u,g,f)}u=u.child}return u;case 26:return D1(l,u),l===null?(f=sO(u.type,null,u.pendingProps,null))?u.memoizedState=f:Lr||(f=u.type,l=u.pendingProps,g=J1(Ye.current).createElement(f),g[an]=u,g[vn]=l,fi(g,f,l),vr(g),u.stateNode=g):u.memoizedState=sO(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Ue(u),l===null&&Lr&&(g=u.stateNode=nO(u.type,u.pendingProps,Ye.current),ui=u,qs=!0,b=zn,Qc(u.type)?(L5=b,zn=Gs(g.firstChild)):zn=b),hi(l,u,u.pendingProps.children,f),D1(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Lr&&((b=g=zn)&&(g=pJ(g,u.type,u.pendingProps,qs),g!==null?(u.stateNode=g,ui=u,zn=Gs(g.firstChild),qs=!1,b=!0):b=!1),b||Dc(u)),Ue(u),b=u.type,_=u.pendingProps,V=l!==null?l.memoizedProps:null,g=_.children,I5(b,_)?g=null:V!==null&&I5(b,V)&&(u.flags|=32),u.memoizedState!==null&&(b=O4(l,u,kY,null,null,f),Fp._currentValue=b),D1(l,u),hi(l,u,g,f),u.child;case 6:return l===null&&Lr&&((l=f=zn)&&(f=mJ(f,u.pendingProps,qs),f!==null?(u.stateNode=f,ui=u,zn=null,l=!0):l=!1),l||Dc(u)),null;case 13:return GC(l,u,f);case 4:return et(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=pd(u,null,g,f):hi(l,u,g,f),u.child;case 11:return LC(l,u,u.type,u.pendingProps,f);case 7:return hi(l,u,u.pendingProps,f),u.child;case 8:return hi(l,u,u.pendingProps.children,f),u.child;case 12:return hi(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Pc(u,u.type,g.value),hi(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,ud(u),b=di(b),g=g(b),u.flags|=1,hi(l,u,g,f),u.child;case 14:return BC(l,u,u.type,u.pendingProps,f);case 15:return $C(l,u,u.type,u.pendingProps,f);case 19:return KC(l,u,f);case 31:return LY(l,u,f);case 22:return zC(l,u,f,u.pendingProps);case 24:return ud(u),g=di(Ta),l===null?(b=w4(),b===null&&(b=kn,_=v4(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},N4(u),Pc(u,Ta,b)):((l.lanes&f)!==0&&(_4(l,u),Np(u,null,null,f),Sp()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Pc(u,Ta,g)):(g=_.cache,Pc(u,Ta,g),g!==b.cache&&y4(u,[Ta],f,!0))),hi(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function kl(l){l.flags|=4}function i5(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(S9())l.flags|=8192;else throw fd=b1,S4}else l.flags&=-16777217}function XC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!dO(u))if(S9())l.flags|=8192;else throw fd=b1,S4}function L1(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Jr():536870912,l.lanes|=u,eh|=u)}function kp(l,u){if(!Lr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Un(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function $Y(l,u,f){var g=u.pendingProps;switch(f4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(u),null;case 1:return Un(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Tl(Ta),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(U0(u)?kl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,m4())),Un(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(kl(u),_!==null?(Un(u),XC(u,_)):(Un(u),i5(u,b,null,g,f))):_?_!==l.memoizedState?(kl(u),Un(u),XC(u,_)):(Un(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&kl(u),Un(u),i5(u,b,l,g,f)),null;case 27:if(X(u),f=Ye.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&kl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Un(u),null}l=ye.current,U0(u)?kk(u):(l=nO(b,g,f),u.stateNode=l,kl(u))}return Un(u),null;case 5:if(X(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&kl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Un(u),null}if(_=ye.current,U0(u))kk(u);else{var V=J1(Ye.current);switch(_){case 1:_=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=V.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?V.createElement(b,{is:g.is}):V.createElement(b)}}_[an]=u,_[vn]=g;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)_.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=_;e:switch(fi(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&kl(u)}}return Un(u),i5(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&kl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ye.current,U0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ui,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[an]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||G9(l.nodeValue,f)),l||Dc(u,!0)}else l=J1(l).createTextNode(g),l[an]=u,u.stateNode=l}return Un(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=U0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[an]=u}else ld(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Un(u),l=!1}else f=m4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(ws(u),u):(ws(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Un(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=U0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[an]=u}else ld(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Un(u),b=!1}else b=m4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ws(u),u):(ws(u),null)}return ws(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),L1(u,u.updateQueue),Un(u),null);case 4:return Ne(),l===null&&A5(u.stateNode.containerInfo),Un(u),null;case 10:return Tl(u.type),Un(u),null;case 19:if(ae(da),g=u.memoizedState,g===null)return Un(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)kp(g,!1);else{if(aa!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=_1(l),_!==null){for(u.flags|=128,kp(g,!1),l=_.updateQueue,u.updateQueue=l,L1(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)_k(f,l),f=f.sibling;return re(da,da.current&1|2),Lr&&Nl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&He()>V1&&(u.flags|=128,b=!0,kp(g,!1),u.lanes=4194304)}else{if(!b)if(l=_1(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,L1(u,l),kp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Lr)return Un(u),null}else 2*He()-g.renderingStartTime>V1&&f!==536870912&&(u.flags|=128,b=!0,kp(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=He(),l.sibling=null,f=da.current,re(da,b?f&1|2:f&1),Lr&&Nl(u,g.treeForkCount),l):(Un(u),null);case 22:case 23:return ws(u),E4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Un(u),u.subtreeFlags&6&&(u.flags|=8192)):Un(u),f=u.updateQueue,f!==null&&L1(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ae(dd),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),Tl(Ta),Un(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function zY(l,u){switch(f4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Tl(Ta),Ne(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return X(u),null;case 31:if(u.memoizedState!==null){if(ws(u),u.alternate===null)throw Error(n(340));ld()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ws(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));ld()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ae(da),null;case 4:return Ne(),null;case 10:return Tl(u.type),null;case 22:case 23:return ws(u),E4(),l!==null&&ae(dd),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Tl(Ta),null;case 25:return null;default:return null}}function YC(l,u){switch(f4(u),u.tag){case 3:Tl(Ta),Ne();break;case 26:case 27:case 5:X(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&ws(u);break;case 13:ws(u);break;case 19:ae(da);break;case 10:Tl(u.type);break;case 22:case 23:ws(u),E4(),l!==null&&ae(dd);break;case 24:Tl(Ta)}}function Cp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,V=f.inst;g=_(),V.destroy=g}f=f.next}while(f!==b)}}catch(Q){fn(u,u.return,Q)}}function Vc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var V=g.inst,Q=V.destroy;if(Q!==void 0){V.destroy=void 0,b=u;var ue=f,Oe=Q;try{Oe()}catch(We){fn(b,ue,We)}}}g=g.next}while(g!==_)}}catch(We){fn(u,u.return,We)}}function JC(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{Vk(u,f)}catch(g){fn(l,l.return,g)}}}function ZC(l,u,f){f.props=gd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){fn(l,u,g)}}function Op(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){fn(l,u,b)}}function Vo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){fn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){fn(l,u,b)}else f.current=null}function e9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){fn(l,l.return,b)}}function s5(l,u,f){try{var g=l.stateNode;lJ(g,l.type,f,u),g[vn]=u}catch(b){fn(l,l.return,b)}}function t9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Qc(l.type)||l.tag===4}function o5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||t9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Qc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function l5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Dn));else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(l5(l,u,f),l=l.sibling;l!==null;)l5(l,u,f),l=l.sibling}function B1(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(B1(l,u,f),l=l.sibling;l!==null;)B1(l,u,f),l=l.sibling}function r9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);fi(u,g,f),u[an]=l,u[vn]=f}catch(_){fn(l,l.return,_)}}var Cl=!1,Ea=!1,c5=!1,n9=typeof WeakSet=="function"?WeakSet:Set,Ya=null;function UY(l,u){if(l=l.containerInfo,C5=iy,l=mk(l),r4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var V=0,Q=-1,ue=-1,Oe=0,We=0,Ze=l,Pe=null;t:for(;;){for(var Be;Ze!==f||b!==0&&Ze.nodeType!==3||(Q=V+b),Ze!==_||g!==0&&Ze.nodeType!==3||(ue=V+g),Ze.nodeType===3&&(V+=Ze.nodeValue.length),(Be=Ze.firstChild)!==null;)Pe=Ze,Ze=Be;for(;;){if(Ze===l)break t;if(Pe===f&&++Oe===b&&(Q=V),Pe===_&&++We===g&&(ue=V),(Be=Ze.nextSibling)!==null)break;Ze=Pe,Pe=Ze.parentNode}Ze=Be}f=Q===-1||ue===-1?null:{start:Q,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(O5={focusedElem:l,selectionRange:f},iy=!1,Ya=u;Ya!==null;)if(u=Ya,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ya=l;else for(;Ya!==null;){switch(u=Ya,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var Lt=gd(f.type,b);l=g.getSnapshotBeforeUpdate(Lt,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Jt){fn(f,f.return,Jt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)M5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":M5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Ya=l;break}Ya=u.return}}function a9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Il(l,f),g&4&&Cp(5,f);break;case 1:if(Il(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(V){fn(f,f.return,V)}else{var b=gd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){fn(f,f.return,V)}}g&64&&JC(f),g&512&&Op(f,f.return);break;case 3:if(Il(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Vk(l,u)}catch(V){fn(f,f.return,V)}}break;case 27:u===null&&g&4&&r9(f);case 26:case 5:Il(l,f),u===null&&g&4&&e9(f),g&512&&Op(f,f.return);break;case 12:Il(l,f);break;case 31:Il(l,f),g&4&&o9(l,f);break;case 13:Il(l,f),g&4&&l9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=XY.bind(null,f),gJ(l,f))));break;case 22:if(g=f.memoizedState!==null||Cl,!g){u=u!==null&&u.memoizedState!==null||Ea,b=Cl;var _=Ea;Cl=g,(Ea=u)&&!_?Rl(l,f,(f.subtreeFlags&8772)!==0):Il(l,f),Cl=b,Ea=_}break;case 30:break;default:Il(l,f)}}function i9(l){var u=l.alternate;u!==null&&(l.alternate=null,i9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Ot(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Hn=null,Gi=!1;function Ol(l,u,f){for(f=f.child;f!==null;)s9(l,u,f),f=f.sibling}function s9(l,u,f){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(jt,f)}catch{}switch(f.tag){case 26:Ea||Vo(f,u),Ol(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ea||Vo(f,u);var g=Hn,b=Gi;Qc(f.type)&&(Hn=f.stateNode,Gi=!1),Ol(l,u,f),zp(f.stateNode),Hn=g,Gi=b;break;case 5:Ea||Vo(f,u);case 6:if(g=Hn,b=Gi,Hn=null,Ol(l,u,f),Hn=g,Gi=b,Hn!==null)if(Gi)try{(Hn.nodeType===9?Hn.body:Hn.nodeName==="HTML"?Hn.ownerDocument.body:Hn).removeChild(f.stateNode)}catch(_){fn(f,u,_)}else try{Hn.removeChild(f.stateNode)}catch(_){fn(f,u,_)}break;case 18:Hn!==null&&(Gi?(l=Hn,J9(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),lh(l)):J9(Hn,f.stateNode));break;case 4:g=Hn,b=Gi,Hn=f.stateNode.containerInfo,Gi=!0,Ol(l,u,f),Hn=g,Gi=b;break;case 0:case 11:case 14:case 15:Vc(2,f,u),Ea||Vc(4,f,u),Ol(l,u,f);break;case 1:Ea||(Vo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&ZC(f,u,g)),Ol(l,u,f);break;case 21:Ol(l,u,f);break;case 22:Ea=(g=Ea)||f.memoizedState!==null,Ol(l,u,f),Ea=g;break;default:Ol(l,u,f)}}function o9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{lh(l)}catch(f){fn(u,u.return,f)}}}function l9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{lh(l)}catch(f){fn(u,u.return,f)}}function VY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new n9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new n9),u;default:throw Error(n(435,l.tag))}}function $1(l,u){var f=VY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=YY.bind(null,l,g);g.then(b,b)}})}function Wi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,V=u,Q=V;e:for(;Q!==null;){switch(Q.tag){case 27:if(Qc(Q.type)){Hn=Q.stateNode,Gi=!1;break e}break;case 5:Hn=Q.stateNode,Gi=!1;break e;case 3:case 4:Hn=Q.stateNode.containerInfo,Gi=!0;break e}Q=Q.return}if(Hn===null)throw Error(n(160));s9(_,V,b),Hn=null,Gi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)c9(u,l),u=u.sibling}var xo=null;function c9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Wi(u,l),Ki(l),g&4&&(Vc(3,l,l.return),Cp(3,l),Vc(5,l,l.return));break;case 1:Wi(u,l),Ki(l),g&512&&(Ea||f===null||Vo(f,f.return)),g&64&&Cl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=xo;if(Wi(u,l),Ki(l),g&512&&(Ea||f===null||Vo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[wi]||_[an]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),fi(_,g,f),_[an]=l,vr(_),g=_;break e;case"link":var V=cO("link","href",b).get(g+(f.href||""));if(V){for(var Q=0;Q<V.length;Q++)if(_=V[Q],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){V.splice(Q,1);break t}}_=b.createElement(g),fi(_,g,f),b.head.appendChild(_);break;case"meta":if(V=cO("meta","content",b).get(g+(f.content||""))){for(Q=0;Q<V.length;Q++)if(_=V[Q],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){V.splice(Q,1);break t}}_=b.createElement(g),fi(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[an]=l,vr(_),g=_}l.stateNode=g}else uO(b,l.type,l.stateNode);else l.stateNode=lO(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?uO(b,l.type,l.stateNode):lO(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&s5(l,l.memoizedProps,f.memoizedProps)}break;case 27:Wi(u,l),Ki(l),g&512&&(Ea||f===null||Vo(f,f.return)),f!==null&&g&4&&s5(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Wi(u,l),Ki(l),g&512&&(Ea||f===null||Vo(f,f.return)),l.flags&32){b=l.stateNode;try{Fe(b,"")}catch(Lt){fn(l,l.return,Lt)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,s5(l,b,f!==null?f.memoizedProps:b)),g&1024&&(c5=!0);break;case 6:if(Wi(u,l),Ki(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Lt){fn(l,l.return,Lt)}}break;case 3:if(ty=null,b=xo,xo=Z1(u.containerInfo),Wi(u,l),xo=b,Ki(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{lh(u.containerInfo)}catch(Lt){fn(l,l.return,Lt)}c5&&(c5=!1,u9(l));break;case 4:g=xo,xo=Z1(l.stateNode.containerInfo),Wi(u,l),Ki(l),xo=g;break;case 12:Wi(u,l),Ki(l);break;case 31:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 13:Wi(u,l),Ki(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(U1=He()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 22:b=l.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,Oe=Cl,We=Ea;if(Cl=Oe||b,Ea=We||ue,Wi(u,l),Ea=We,Cl=Oe,Ki(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||ue||Cl||Ea||xd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){ue=f=u;try{if(_=ue.stateNode,b)V=_.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{Q=ue.stateNode;var Ze=ue.memoizedProps.style,Pe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;Q.style.display=Pe==null||typeof Pe=="boolean"?"":(""+Pe).trim()}}catch(Lt){fn(ue,ue.return,Lt)}}}else if(u.tag===6){if(f===null){ue=u;try{ue.stateNode.nodeValue=b?"":ue.memoizedProps}catch(Lt){fn(ue,ue.return,Lt)}}}else if(u.tag===18){if(f===null){ue=u;try{var Be=ue.stateNode;b?Z9(Be,!0):Z9(ue.stateNode,!1)}catch(Lt){fn(ue,ue.return,Lt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,$1(l,f))));break;case 19:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 30:break;case 21:break;default:Wi(u,l),Ki(l)}}function Ki(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(t9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=o5(l);B1(l,_,b);break;case 5:var V=f.stateNode;f.flags&32&&(Fe(V,""),f.flags&=-33);var Q=o5(l);B1(l,Q,V);break;case 3:case 4:var ue=f.stateNode.containerInfo,Oe=o5(l);l5(l,Oe,ue);break;default:throw Error(n(161))}}catch(We){fn(l,l.return,We)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function u9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;u9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Il(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)a9(l,u.alternate,u),u=u.sibling}function xd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Vc(4,u,u.return),xd(u);break;case 1:Vo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&ZC(u,u.return,f),xd(u);break;case 27:zp(u.stateNode);case 26:case 5:Vo(u,u.return),xd(u);break;case 22:u.memoizedState===null&&xd(u);break;case 30:xd(u);break;default:xd(u)}l=l.sibling}}function Rl(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,V=_.flags;switch(_.tag){case 0:case 11:case 15:Rl(b,_,f),Cp(4,_);break;case 1:if(Rl(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Oe){fn(g,g.return,Oe)}if(g=_,b=g.updateQueue,b!==null){var Q=g.stateNode;try{var ue=b.shared.hiddenCallbacks;if(ue!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ue.length;b++)Uk(ue[b],Q)}catch(Oe){fn(g,g.return,Oe)}}f&&V&64&&JC(_),Op(_,_.return);break;case 27:r9(_);case 26:case 5:Rl(b,_,f),f&&g===null&&V&4&&e9(_),Op(_,_.return);break;case 12:Rl(b,_,f);break;case 31:Rl(b,_,f),f&&V&4&&o9(b,_);break;case 13:Rl(b,_,f),f&&V&4&&l9(b,_);break;case 22:_.memoizedState===null&&Rl(b,_,f),Op(_,_.return);break;case 30:break;default:Rl(b,_,f)}u=u.sibling}}function u5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&xp(f))}function d5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&xp(l))}function yo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)d9(l,u,f,g),u=u.sibling}function d9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:yo(l,u,f,g),b&2048&&Cp(9,u);break;case 1:yo(l,u,f,g);break;case 3:yo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&xp(l)));break;case 12:if(b&2048){yo(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,V=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ue){fn(u,u.return,ue)}}else yo(l,u,f,g);break;case 31:yo(l,u,f,g);break;case 13:yo(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,V=u.alternate,u.memoizedState!==null?_._visibility&2?yo(l,u,f,g):Ip(l,u):_._visibility&2?yo(l,u,f,g):(_._visibility|=2,Y0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&u5(V,u);break;case 24:yo(l,u,f,g),b&2048&&d5(u.alternate,u);break;default:yo(l,u,f,g)}}function Y0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,V=u,Q=f,ue=g,Oe=V.flags;switch(V.tag){case 0:case 11:case 15:Y0(_,V,Q,ue,b),Cp(8,V);break;case 23:break;case 22:var We=V.stateNode;V.memoizedState!==null?We._visibility&2?Y0(_,V,Q,ue,b):Ip(_,V):(We._visibility|=2,Y0(_,V,Q,ue,b)),b&&Oe&2048&&u5(V.alternate,V);break;case 24:Y0(_,V,Q,ue,b),b&&Oe&2048&&d5(V.alternate,V);break;default:Y0(_,V,Q,ue,b)}u=u.sibling}}function Ip(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Ip(f,g),b&2048&&u5(g.alternate,g);break;case 24:Ip(f,g),b&2048&&d5(g.alternate,g);break;default:Ip(f,g)}u=u.sibling}}var Rp=8192;function J0(l,u,f){if(l.subtreeFlags&Rp)for(l=l.child;l!==null;)h9(l,u,f),l=l.sibling}function h9(l,u,f){switch(l.tag){case 26:J0(l,u,f),l.flags&Rp&&l.memoizedState!==null&&EJ(f,xo,l.memoizedState,l.memoizedProps);break;case 5:J0(l,u,f);break;case 3:case 4:var g=xo;xo=Z1(l.stateNode.containerInfo),J0(l,u,f),xo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Rp,Rp=16777216,J0(l,u,f),Rp=g):J0(l,u,f));break;default:J0(l,u,f)}}function f9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Mp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ya=g,m9(g,l)}f9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)p9(l),l=l.sibling}function p9(l){switch(l.tag){case 0:case 11:case 15:Mp(l),l.flags&2048&&Vc(9,l,l.return);break;case 3:Mp(l);break;case 12:Mp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,z1(l)):Mp(l);break;default:Mp(l)}}function z1(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ya=g,m9(g,l)}f9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Vc(8,u,u.return),z1(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,z1(u));break;default:z1(u)}l=l.sibling}}function m9(l,u){for(;Ya!==null;){var f=Ya;switch(f.tag){case 0:case 11:case 15:Vc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:xp(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ya=g;else e:for(f=l;Ya!==null;){g=Ya;var b=g.sibling,_=g.return;if(i9(g),g===f){Ya=null;break e}if(b!==null){b.return=_,Ya=b;break e}Ya=_}}}var FY={getCacheForType:function(l){var u=di(Ta),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return di(Ta).controller.signal}},qY=typeof WeakMap=="function"?WeakMap:Map,en=0,kn=null,kr=null,Ir=0,hn=0,Ss=null,Fc=!1,Z0=!1,h5=!1,Ml=0,aa=0,qc=0,yd=0,f5=0,Ns=0,eh=0,Dp=null,Qi=null,p5=!1,U1=0,g9=0,V1=1/0,F1=null,Hc=null,La=0,Gc=null,th=null,Dl=0,m5=0,g5=null,x9=null,Pp=0,x5=null;function _s(){return(en&2)!==0&&Ir!==0?Ir&-Ir:H.T!==null?N5():yn()}function y9(){if(Ns===0)if((Ir&536870912)===0||Lr){var l=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),Ns=l}else Ns=536870912;return l=bs.current,l!==null&&(l.flags|=32),Ns}function Xi(l,u,f){(l===kn&&(hn===2||hn===9)||l.cancelPendingCommit!==null)&&(rh(l,0),Wc(l,Ir,Ns,!1)),gn(l,f),((en&2)===0||l!==kn)&&(l===kn&&((en&2)===0&&(yd|=f),aa===4&&Wc(l,Ir,Ns,!1)),Fo(l))}function v9(l,u,f){if((en&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Fr(l,u),b=g?WY(l,u):v5(l,u,!0),_=g;do{if(b===0){Z0&&!g&&Wc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!HY(f)){b=v5(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var Q=l;b=Dp;var ue=Q.current.memoizedState.isDehydrated;if(ue&&(rh(Q,V).flags|=256),V=v5(Q,V,!1),V!==2){if(h5&&!ue){Q.errorRecoveryDisabledLanes|=_,yd|=_,b=4;break e}_=Qi,Qi=b,_!==null&&(Qi===null?Qi=_:Qi.push.apply(Qi,_))}b=V}if(_=!1,b!==2)continue}}if(b===1){rh(l,0),Wc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Wc(g,u,Ns,!Fc);break e;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=U1+300-He(),10<b)){if(Wc(g,u,Ns,!Fc),Ct(g,0,!0)!==0)break e;Dl=u,g.timeoutHandle=X9(b9.bind(null,g,f,Qi,F1,p5,u,Ns,yd,eh,Fc,_,"Throttled",-0,0),b);break e}b9(g,f,Qi,F1,p5,u,Ns,yd,eh,Fc,_,null,-0,0)}}break}while(!0);Fo(l)}function b9(l,u,f,g,b,_,V,Q,ue,Oe,We,Ze,Pe,Be){if(l.timeoutHandle=-1,Ze=u.subtreeFlags,Ze&8192||(Ze&16785408)===16785408){Ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},h9(u,_,Ze);var Lt=(_&62914560)===_?U1-He():(_&4194048)===_?g9-He():0;if(Lt=kJ(Ze,Lt),Lt!==null){Dl=_,l.cancelPendingCommit=Lt(E9.bind(null,l,u,_,f,g,b,V,Q,ue,We,Ze,null,Pe,Be)),Wc(l,_,V,!Oe);return}}E9(l,u,_,f,g,b,V,Q,ue)}function HY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!ys(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Wc(l,u,f,g){u&=~f5,u&=~yd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-tt(b),V=1<<_;g[_]=-1,b&=~V}f!==0&&ba(l,f,u)}function q1(){return(en&6)===0?(Lp(0),!1):!0}function y5(){if(kr!==null){if(hn===0)var l=kr.return;else l=kr,_l=cd=null,M4(l),G0=null,vp=0,l=kr;for(;l!==null;)YC(l.alternate,l),l=l.return;kr=null}}function rh(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,dJ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Dl=0,y5(),kn=l,kr=f=Sl(l.current,null),Ir=u,hn=0,Ss=null,Fc=!1,Z0=Fr(l,u),h5=!1,eh=Ns=f5=yd=qc=aa=0,Qi=Dp=null,p5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-tt(g),_=1<<b;u|=l[b],g&=~_}return Ml=u,d1(),f}function w9(l,u){yr=null,H.H=Ap,u===H0||u===v1?(u=Lk(),hn=3):u===S4?(u=Lk(),hn=4):hn=u===X4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ss=u,kr===null&&(aa=1,R1(l,Us(u,l.current)))}function S9(){var l=bs.current;return l===null?!0:(Ir&4194048)===Ir?Hs===null:(Ir&62914560)===Ir||(Ir&536870912)!==0?l===Hs:!1}function N9(){var l=H.H;return H.H=Ap,l===null?Ap:l}function _9(){var l=H.A;return H.A=FY,l}function H1(){aa=4,Fc||(Ir&4194048)!==Ir&&bs.current!==null||(Z0=!0),(qc&134217727)===0&&(yd&134217727)===0||kn===null||Wc(kn,Ir,Ns,!1)}function v5(l,u,f){var g=en;en|=2;var b=N9(),_=_9();(kn!==l||Ir!==u)&&(F1=null,rh(l,u)),u=!1;var V=aa;e:do try{if(hn!==0&&kr!==null){var Q=kr,ue=Ss;switch(hn){case 8:y5(),V=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(u=!0);var Oe=hn;if(hn=0,Ss=null,nh(l,Q,ue,Oe),f&&Z0){V=0;break e}break;default:Oe=hn,hn=0,Ss=null,nh(l,Q,ue,Oe)}}GY(),V=aa;break}catch(We){w9(l,We)}while(!0);return u&&l.shellSuspendCounter++,_l=cd=null,en=g,H.H=b,H.A=_,kr===null&&(kn=null,Ir=0,d1()),V}function GY(){for(;kr!==null;)T9(kr)}function WY(l,u){var f=en;en|=2;var g=N9(),b=_9();kn!==l||Ir!==u?(F1=null,V1=He()+500,rh(l,u)):Z0=Fr(l,u);e:do try{if(hn!==0&&kr!==null){u=kr;var _=Ss;t:switch(hn){case 1:hn=0,Ss=null,nh(l,u,_,1);break;case 2:case 9:if(Dk(_)){hn=0,Ss=null,j9(u);break}u=function(){hn!==2&&hn!==9||kn!==l||(hn=7),Fo(l)},_.then(u,u);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:Dk(_)?(hn=0,Ss=null,j9(u)):(hn=0,Ss=null,nh(l,u,_,7));break;case 5:var V=null;switch(kr.tag){case 26:V=kr.memoizedState;case 5:case 27:var Q=kr;if(V?dO(V):Q.stateNode.complete){hn=0,Ss=null;var ue=Q.sibling;if(ue!==null)kr=ue;else{var Oe=Q.return;Oe!==null?(kr=Oe,G1(Oe)):kr=null}break t}}hn=0,Ss=null,nh(l,u,_,5);break;case 6:hn=0,Ss=null,nh(l,u,_,6);break;case 8:y5(),aa=6;break e;default:throw Error(n(462))}}KY();break}catch(We){w9(l,We)}while(!0);return _l=cd=null,H.H=g,H.A=b,en=f,kr!==null?0:(kn=null,Ir=0,d1(),aa)}function KY(){for(;kr!==null&&!bt();)T9(kr)}function T9(l){var u=QC(l.alternate,l,Ml);l.memoizedProps=l.pendingProps,u===null?G1(l):kr=u}function j9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=FC(f,u,u.pendingProps,u.type,void 0,Ir);break;case 11:u=FC(f,u,u.pendingProps,u.type.render,u.ref,Ir);break;case 5:M4(u);default:YC(f,u),u=kr=_k(u,Ml),u=QC(f,u,Ml)}l.memoizedProps=l.pendingProps,u===null?G1(l):kr=u}function nh(l,u,f,g){_l=cd=null,M4(u),G0=null,vp=0;var b=u.return;try{if(PY(l,b,u,f,Ir)){aa=1,R1(l,Us(f,l.current)),kr=null;return}}catch(_){if(b!==null)throw kr=b,_;aa=1,R1(l,Us(f,l.current)),kr=null;return}u.flags&32768?(Lr||g===1?l=!0:Z0||(Ir&536870912)!==0?l=!1:(Fc=l=!0,(g===2||g===9||g===3||g===6)&&(g=bs.current,g!==null&&g.tag===13&&(g.flags|=16384))),A9(u,l)):G1(u)}function G1(l){var u=l;do{if((u.flags&32768)!==0){A9(u,Fc);return}l=u.return;var f=$Y(u.alternate,u,Ml);if(f!==null){kr=f;return}if(u=u.sibling,u!==null){kr=u;return}kr=u=l}while(u!==null);aa===0&&(aa=5)}function A9(l,u){do{var f=zY(l.alternate,l);if(f!==null){f.flags&=32767,kr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){kr=l;return}kr=l=f}while(l!==null);aa=6,kr=null}function E9(l,u,f,g,b,_,V,Q,ue){l.cancelPendingCommit=null;do W1();while(La!==0);if((en&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=o4,gr(l,f,_,V,Q,ue),l===kn&&(kr=kn=null,Ir=0),th=u,Gc=l,Dl=f,m5=_,g5=b,x9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,JY(Et,function(){return R9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=Z.p,Z.p=2,V=en,en|=4;try{UY(l,u,f)}finally{en=V,Z.p=b,H.T=g}}La=1,k9(),C9(),O9()}}function k9(){if(La===1){La=0;var l=Gc,u=th,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=en;en|=4;try{c9(u,l);var _=O5,V=mk(l.containerInfo),Q=_.focusedElem,ue=_.selectionRange;if(V!==Q&&Q&&Q.ownerDocument&&pk(Q.ownerDocument.documentElement,Q)){if(ue!==null&&r4(Q)){var Oe=ue.start,We=ue.end;if(We===void 0&&(We=Oe),"selectionStart"in Q)Q.selectionStart=Oe,Q.selectionEnd=Math.min(We,Q.value.length);else{var Ze=Q.ownerDocument||document,Pe=Ze&&Ze.defaultView||window;if(Pe.getSelection){var Be=Pe.getSelection(),Lt=Q.textContent.length,Jt=Math.min(ue.start,Lt),Nn=ue.end===void 0?Jt:Math.min(ue.end,Lt);!Be.extend&&Jt>Nn&&(V=Nn,Nn=Jt,Jt=V);var Se=fk(Q,Jt),pe=fk(Q,Nn);if(Se&&pe&&(Be.rangeCount!==1||Be.anchorNode!==Se.node||Be.anchorOffset!==Se.offset||Be.focusNode!==pe.node||Be.focusOffset!==pe.offset)){var Ee=Ze.createRange();Ee.setStart(Se.node,Se.offset),Be.removeAllRanges(),Jt>Nn?(Be.addRange(Ee),Be.extend(pe.node,pe.offset)):(Ee.setEnd(pe.node,pe.offset),Be.addRange(Ee))}}}}for(Ze=[],Be=Q;Be=Be.parentNode;)Be.nodeType===1&&Ze.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ze.length;Q++){var Xe=Ze[Q];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}iy=!!C5,O5=C5=null}finally{en=b,Z.p=g,H.T=f}}l.current=u,La=2}}function C9(){if(La===2){La=0;var l=Gc,u=th,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=en;en|=4;try{a9(l,u.alternate,u)}finally{en=b,Z.p=g,H.T=f}}La=3}}function O9(){if(La===4||La===3){La=0,de();var l=Gc,u=th,f=Dl,g=x9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?La=5:(La=0,th=Gc=null,I9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Hc=null),Or(f),u=u.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(jt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=Z.p,Z.p=2,H.T=null;try{for(var _=l.onRecoverableError,V=0;V<g.length;V++){var Q=g[V];_(Q.value,{componentStack:Q.stack})}}finally{H.T=u,Z.p=b}}(Dl&3)!==0&&W1(),Fo(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===x5?Pp++:(Pp=0,x5=l):Pp=0,Lp(0)}}function I9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,xp(u)))}function W1(){return k9(),C9(),O9(),R9()}function R9(){if(La!==5)return!1;var l=Gc,u=m5;m5=0;var f=Or(Dl),g=H.T,b=Z.p;try{Z.p=32>f?32:f,H.T=null,f=g5,g5=null;var _=Gc,V=Dl;if(La=0,th=Gc=null,Dl=0,(en&6)!==0)throw Error(n(331));var Q=en;if(en|=4,p9(_.current),d9(_,_.current,V,f),en=Q,Lp(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(jt,_)}catch{}return!0}finally{Z.p=b,H.T=g,I9(l,u)}}function M9(l,u,f){u=Us(f,u),u=Q4(l.stateNode,u,2),l=$c(l,u,2),l!==null&&(gn(l,2),Fo(l))}function fn(l,u,f){if(l.tag===3)M9(l,l,f);else for(;u!==null;){if(u.tag===3){M9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Hc===null||!Hc.has(g))){l=Us(f,l),f=DC(2),g=$c(u,f,2),g!==null&&(PC(f,g,u,l),gn(g,2),Fo(g));break}}u=u.return}}function b5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new qY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(h5=!0,b.add(f),l=QY.bind(null,l,u,f),u.then(l,l))}function QY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,kn===l&&(Ir&f)===f&&(aa===4||aa===3&&(Ir&62914560)===Ir&&300>He()-U1?(en&2)===0&&rh(l,0):f5|=f,eh===Ir&&(eh=0)),Fo(l)}function D9(l,u){u===0&&(u=Jr()),l=sd(l,u),l!==null&&(gn(l,u),Fo(l))}function XY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),D9(l,f)}function YY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),D9(l,f)}function JY(l,u){return Tt(l,u)}var K1=null,ah=null,w5=!1,Q1=!1,S5=!1,Kc=0;function Fo(l){l!==ah&&l.next===null&&(ah===null?K1=ah=l:ah=ah.next=l),Q1=!0,w5||(w5=!0,eJ())}function Lp(l,u){if(!S5&&Q1){S5=!0;do for(var f=!1,g=K1;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var V=g.suspendedLanes,Q=g.pingedLanes;_=(1<<31-tt(42|l)+1)-1,_&=b&~(V&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,$9(g,_))}else _=Ir,_=Ct(g,g===kn?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Fr(g,_)||(f=!0,$9(g,_));g=g.next}while(f);S5=!1}}function ZY(){P9()}function P9(){Q1=w5=!1;var l=0;Kc!==0&&uJ()&&(l=Kc);for(var u=He(),f=null,g=K1;g!==null;){var b=g.next,_=L9(g,u);_===0?(g.next=null,f===null?K1=b:f.next=b,b===null&&(ah=f)):(f=g,(l!==0||(_&3)!==0)&&(Q1=!0)),g=b}La!==0&&La!==5||Lp(l),Kc!==0&&(Kc=0)}function L9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var V=31-tt(_),Q=1<<V,ue=b[V];ue===-1?((Q&f)===0||(Q&g)!==0)&&(b[V]=un(Q,u)):ue<=u&&(l.expiredLanes|=Q),_&=~Q}if(u=kn,f=Ir,f=Ct(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(hn===2||hn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&St(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Fr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&St(g),Or(f)){case 2:case 8:f=Je;break;case 32:f=Et;break;case 268435456:f=dr;break;default:f=Et}return g=B9.bind(null,l),f=Tt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&St(g),l.callbackPriority=2,l.callbackNode=null,2}function B9(l,u){if(La!==0&&La!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(W1()&&l.callbackNode!==f)return null;var g=Ir;return g=Ct(l,l===kn?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(v9(l,g,u),L9(l,He()),l.callbackNode!=null&&l.callbackNode===f?B9.bind(null,l):null)}function $9(l,u){if(W1())return null;v9(l,u,!0)}function eJ(){hJ(function(){(en&6)!==0?Tt(Ge,ZY):P9()})}function N5(){if(Kc===0){var l=F0;l===0&&(l=dt,dt<<=1,(dt&261888)===0&&(dt=256)),Kc=l}return Kc}function z9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Na(""+l)}function U9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function tJ(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=z9((b[vn]||null).action),V=g.submitter;V&&(u=(u=V[vn]||null)?z9(u.formAction):V.getAttribute("formAction"),u!==null&&(_=u,V=null));var Q=new Zu("action","action",null,g,b);l.push({event:Q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Kc!==0){var ue=V?U9(b,V):new FormData(b);F4(f,{pending:!0,data:ue,method:b.method,action:_},null,ue)}}else typeof _=="function"&&(Q.preventDefault(),ue=V?U9(b,V):new FormData(b),F4(f,{pending:!0,data:ue,method:b.method,action:_},_,ue))},currentTarget:b}]})}}for(var _5=0;_5<s4.length;_5++){var T5=s4[_5],rJ=T5.toLowerCase(),nJ=T5[0].toUpperCase()+T5.slice(1);go(rJ,"on"+nJ)}go(yk,"onAnimationEnd"),go(vk,"onAnimationIteration"),go(bk,"onAnimationStart"),go("dblclick","onDoubleClick"),go("focusin","onFocus"),go("focusout","onBlur"),go(vY,"onTransitionRun"),go(bY,"onTransitionStart"),go(wY,"onTransitionCancel"),go(wk,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bp));function V9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var V=g.length-1;0<=V;V--){var Q=g[V],ue=Q.instance,Oe=Q.currentTarget;if(Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(We){u1(We)}b.currentTarget=null,_=ue}else for(V=0;V<g.length;V++){if(Q=g[V],ue=Q.instance,Oe=Q.currentTarget,Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(We){u1(We)}b.currentTarget=null,_=ue}}}}function Cr(l,u){var f=u[ci];f===void 0&&(f=u[ci]=new Set);var g=l+"__bubble";f.has(g)||(F9(u,l,2,!1),f.add(g))}function j5(l,u,f){var g=0;u&&(g|=4),F9(f,l,g,u)}var X1="_reactListening"+Math.random().toString(36).slice(2);function A5(l){if(!l[X1]){l[X1]=!0,dn.forEach(function(f){f!=="selectionchange"&&(aJ.has(f)||j5(f,!1,l),j5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[X1]||(u[X1]=!0,j5("selectionchange",!1,u))}}function F9(l,u,f,g){switch(yO(u)){case 2:var b=IJ;break;case 8:b=RJ;break;default:b=V5}f=b.bind(null,u,f,l),b=void 0,!sp||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function E5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var Q=g.stateNode.containerInfo;if(Q===b)break;if(V===4)for(V=g.return;V!==null;){var ue=V.tag;if((ue===3||ue===4)&&V.stateNode.containerInfo===b)return;V=V.return}for(;Q!==null;){if(V=fe(Q),V===null)return;if(ue=V.tag,ue===5||ue===6||ue===26||ue===27){g=_=V;continue e}Q=Q.parentNode}}g=g.return}Kx(function(){var Oe=_,We=Lo(f),Ze=[];e:{var Pe=Sk.get(l);if(Pe!==void 0){var Be=Zu,Lt=l;switch(l){case"keypress":if(Ju(f)===0)break e;case"keydown":case"keyup":Be=n1;break;case"focusin":Lt="focus",Be=kc;break;case"focusout":Lt="blur",Be=kc;break;case"beforeblur":case"afterblur":Be=kc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Xx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=Yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=i1;break;case yk:case vk:case bk:Be=R0;break;case wk:Be=M0;break;case"scroll":case"scrollend":Be=Qx;break;case"wheel":Be=o1;break;case"copy":case"cut":case"paste":Be=Zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=dp;break;case"toggle":case"beforetoggle":Be=Oc}var Jt=(u&4)!==0,Nn=!Jt&&(l==="scroll"||l==="scrollend"),Se=Jt?Pe!==null?Pe+"Capture":null:Pe;Jt=[];for(var pe=Oe,Ee;pe!==null;){var Xe=pe;if(Ee=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Ee===null||Se===null||(Xe=qi(pe,Se),Xe!=null&&Jt.push($p(pe,Xe,Ee))),Nn)break;pe=pe.return}0<Jt.length&&(Pe=new Be(Pe,Lt,null,f,We),Ze.push({event:Pe,listeners:Jt}))}}if((u&7)===0){e:{if(Pe=l==="mouseover"||l==="pointerover",Be=l==="mouseout"||l==="pointerout",Pe&&f!==Nr&&(Lt=f.relatedTarget||f.fromElement)&&(fe(Lt)||Lt[En]))break e;if((Be||Pe)&&(Pe=We.window===We?We:(Pe=We.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Be?(Lt=f.relatedTarget||f.toElement,Be=Oe,Lt=Lt?fe(Lt):null,Lt!==null&&(Nn=i(Lt),Jt=Lt.tag,Lt!==Nn||Jt!==5&&Jt!==27&&Jt!==6)&&(Lt=null)):(Be=null,Lt=Oe),Be!==Lt)){if(Jt=Xx,Xe="onMouseLeave",Se="onMouseEnter",pe="mouse",(l==="pointerout"||l==="pointerover")&&(Jt=dp,Xe="onPointerLeave",Se="onPointerEnter",pe="pointer"),Nn=Be==null?Pe:pt(Be),Ee=Lt==null?Pe:pt(Lt),Pe=new Jt(Xe,pe+"leave",Be,f,We),Pe.target=Nn,Pe.relatedTarget=Ee,Xe=null,fe(We)===Oe&&(Jt=new Jt(Se,pe+"enter",Lt,f,We),Jt.target=Ee,Jt.relatedTarget=Nn,Xe=Jt),Nn=Xe,Be&&Lt)t:{for(Jt=iJ,Se=Be,pe=Lt,Ee=0,Xe=Se;Xe;Xe=Jt(Xe))Ee++;Xe=0;for(var Kt=pe;Kt;Kt=Jt(Kt))Xe++;for(;0<Ee-Xe;)Se=Jt(Se),Ee--;for(;0<Xe-Ee;)pe=Jt(pe),Xe--;for(;Ee--;){if(Se===pe||pe!==null&&Se===pe.alternate){Jt=Se;break t}Se=Jt(Se),pe=Jt(pe)}Jt=null}else Jt=null;Be!==null&&q9(Ze,Pe,Be,Jt,!1),Lt!==null&&Nn!==null&&q9(Ze,Nn,Lt,Jt,!0)}}e:{if(Pe=Oe?pt(Oe):window,Be=Pe.nodeName&&Pe.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Pe.type==="file")var Hr=ok;else if(Hi(Pe))if(lk)Hr=gY;else{Hr=pY;var Ht=fY}else Be=Pe.nodeName,!Be||Be.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?Oe&&ua(Oe.elementType)&&(Hr=ok):Hr=mY;if(Hr&&(Hr=Hr(l,Oe))){nd(Ze,Hr,f,We);break e}Ht&&Ht(l,Pe,Oe),l==="focusout"&&Oe&&Pe.type==="number"&&Oe.memoizedProps.value!=null&&le(Pe,"number",Pe.value)}switch(Ht=Oe?pt(Oe):window,l){case"focusin":(Hi(Ht)||Ht.contentEditable==="true")&&(D0=Ht,n4=Oe,pp=null);break;case"focusout":pp=n4=D0=null;break;case"mousedown":a4=!0;break;case"contextmenu":case"mouseup":case"dragend":a4=!1,gk(Ze,f,We);break;case"selectionchange":if(yY)break;case"keydown":case"keyup":gk(Ze,f,We)}var br;if(D)e:{switch(l){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Tr?sn(l,f)&&(Rr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Rr="onCompositionStart");Rr&&(_e&&f.locale!=="ko"&&(Tr||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Tr&&(br=Tc()):(xs=We,O0="value"in xs?xs.value:xs.textContent,Tr=!0)),Ht=Y1(Oe,Rr),0<Ht.length&&(Rr=new lp(Rr,l,null,f,We),Ze.push({event:Rr,listeners:Ht}),br?Rr.data=br:(br=_a(f),br!==null&&(Rr.data=br)))),(br=ee?Qa(l,f):Xa(l,f))&&(Rr=Y1(Oe,"onBeforeInput"),0<Rr.length&&(Ht=new lp("onBeforeInput","beforeinput",null,f,We),Ze.push({event:Ht,listeners:Rr}),Ht.data=br)),tJ(Ze,l,Oe,f,We)}V9(Ze,u)})}function $p(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Y1(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=qi(l,f),b!=null&&g.unshift($p(l,b,_)),b=qi(l,u),b!=null&&g.push($p(l,b,_))),l.tag===3)return g;l=l.return}return[]}function iJ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function q9(l,u,f,g,b){for(var _=u._reactName,V=[];f!==null&&f!==g;){var Q=f,ue=Q.alternate,Oe=Q.stateNode;if(Q=Q.tag,ue!==null&&ue===g)break;Q!==5&&Q!==26&&Q!==27||Oe===null||(ue=Oe,b?(Oe=qi(f,_),Oe!=null&&V.unshift($p(f,Oe,ue))):b||(Oe=qi(f,_),Oe!=null&&V.push($p(f,Oe,ue)))),f=f.return}V.length!==0&&l.push({event:u,listeners:V})}var sJ=/\r\n?/g,oJ=/\u0000|\uFFFD/g;function H9(l){return(typeof l=="string"?l:""+l).replace(sJ,`
`).replace(oJ,"")}function G9(l,u){return u=H9(u),H9(l)===u}function Sn(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Fe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Fe(l,""+g);break;case"className":ms(l,"class",g);break;case"tabIndex":ms(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(l,f,g);break;case"style":Mn(l,g,_);break;case"data":if(u!=="object"){ms(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Na(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&Sn(l,u,"name",b.name,b,null),Sn(l,u,"formEncType",b.formEncType,b,null),Sn(l,u,"formMethod",b.formMethod,b,null),Sn(l,u,"formTarget",b.formTarget,b,null)):(Sn(l,u,"encType",b.encType,b,null),Sn(l,u,"method",b.method,b,null),Sn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Na(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=Dn);break;case"onScroll":g!=null&&Cr("scroll",l);break;case"onScrollEnd":g!=null&&Cr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=Na(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":Cr("beforetoggle",l),Cr("toggle",l),ps(l,"popover",g);break;case"xlinkActuate":Pa(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Pa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Pa(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Pa(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Pa(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Pa(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Pa(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Pa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Pa(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ps(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Bs.get(f)||f,ps(l,f,g))}}function k5(l,u,f,g,b,_){switch(f){case"style":Mn(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Fe(l,g):(typeof g=="number"||typeof g=="bigint")&&Fe(l,""+g);break;case"onScroll":g!=null&&Cr("scroll",l);break;case"onScrollEnd":g!=null&&Cr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[vn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):ps(l,f,g)}}}function fi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cr("error",l),Cr("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var V=f[_];if(V!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Sn(l,u,_,V,f,null)}}b&&Sn(l,u,"srcSet",f.srcSet,f,null),g&&Sn(l,u,"src",f.src,f,null);return;case"input":Cr("invalid",l);var Q=_=V=b=null,ue=null,Oe=null;for(g in f)if(f.hasOwnProperty(g)){var We=f[g];if(We!=null)switch(g){case"name":b=We;break;case"type":V=We;break;case"checked":ue=We;break;case"defaultChecked":Oe=We;break;case"value":_=We;break;case"defaultValue":Q=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,u));break;default:Sn(l,u,g,We,f,null)}}Er(l,_,Q,ue,Oe,V,b,!1);return;case"select":Cr("invalid",l),g=V=_=null;for(b in f)if(f.hasOwnProperty(b)&&(Q=f[b],Q!=null))switch(b){case"value":_=Q;break;case"defaultValue":V=Q;break;case"multiple":g=Q;default:Sn(l,u,b,Q,f,null)}u=_,f=V,l.multiple=!!g,u!=null?xe(l,!!g,u,!1):f!=null&&xe(l,!!g,f,!0);return;case"textarea":Cr("invalid",l),_=b=g=null;for(V in f)if(f.hasOwnProperty(V)&&(Q=f[V],Q!=null))switch(V){case"value":g=Q;break;case"defaultValue":b=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Sn(l,u,V,Q,f,null)}Ve(l,g,b,_);return;case"option":for(ue in f)if(f.hasOwnProperty(ue)&&(g=f[ue],g!=null))switch(ue){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Sn(l,u,ue,g,f,null)}return;case"dialog":Cr("beforetoggle",l),Cr("toggle",l),Cr("cancel",l),Cr("close",l);break;case"iframe":case"object":Cr("load",l);break;case"video":case"audio":for(g=0;g<Bp.length;g++)Cr(Bp[g],l);break;case"image":Cr("error",l),Cr("load",l);break;case"details":Cr("toggle",l);break;case"embed":case"source":case"link":Cr("error",l),Cr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in f)if(f.hasOwnProperty(Oe)&&(g=f[Oe],g!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Sn(l,u,Oe,g,f,null)}return;default:if(ua(u)){for(We in f)f.hasOwnProperty(We)&&(g=f[We],g!==void 0&&k5(l,u,We,g,f,void 0));return}}for(Q in f)f.hasOwnProperty(Q)&&(g=f[Q],g!=null&&Sn(l,u,Q,g,f,null))}function lJ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,V=null,Q=null,ue=null,Oe=null,We=null;for(Be in f){var Ze=f[Be];if(f.hasOwnProperty(Be)&&Ze!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ue=Ze;default:g.hasOwnProperty(Be)||Sn(l,u,Be,null,g,Ze)}}for(var Pe in g){var Be=g[Pe];if(Ze=f[Pe],g.hasOwnProperty(Pe)&&(Be!=null||Ze!=null))switch(Pe){case"type":_=Be;break;case"name":b=Be;break;case"checked":Oe=Be;break;case"defaultChecked":We=Be;break;case"value":V=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,u));break;default:Be!==Ze&&Sn(l,u,Pe,Be,g,Ze)}}ar(l,V,Q,ue,Oe,We,_,b);return;case"select":Be=V=Q=Pe=null;for(_ in f)if(ue=f[_],f.hasOwnProperty(_)&&ue!=null)switch(_){case"value":break;case"multiple":Be=ue;default:g.hasOwnProperty(_)||Sn(l,u,_,null,g,ue)}for(b in g)if(_=g[b],ue=f[b],g.hasOwnProperty(b)&&(_!=null||ue!=null))switch(b){case"value":Pe=_;break;case"defaultValue":Q=_;break;case"multiple":V=_;default:_!==ue&&Sn(l,u,b,_,g,ue)}u=Q,f=V,g=Be,Pe!=null?xe(l,!!f,Pe,!1):!!g!=!!f&&(u!=null?xe(l,!!f,u,!0):xe(l,!!f,f?[]:"",!1));return;case"textarea":Be=Pe=null;for(Q in f)if(b=f[Q],f.hasOwnProperty(Q)&&b!=null&&!g.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Sn(l,u,Q,null,g,b)}for(V in g)if(b=g[V],_=f[V],g.hasOwnProperty(V)&&(b!=null||_!=null))switch(V){case"value":Pe=b;break;case"defaultValue":Be=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&Sn(l,u,V,b,g,_)}Re(l,Pe,Be);return;case"option":for(var Lt in f)if(Pe=f[Lt],f.hasOwnProperty(Lt)&&Pe!=null&&!g.hasOwnProperty(Lt))switch(Lt){case"selected":l.selected=!1;break;default:Sn(l,u,Lt,null,g,Pe)}for(ue in g)if(Pe=g[ue],Be=f[ue],g.hasOwnProperty(ue)&&Pe!==Be&&(Pe!=null||Be!=null))switch(ue){case"selected":l.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol";break;default:Sn(l,u,ue,Pe,g,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in f)Pe=f[Jt],f.hasOwnProperty(Jt)&&Pe!=null&&!g.hasOwnProperty(Jt)&&Sn(l,u,Jt,null,g,Pe);for(Oe in g)if(Pe=g[Oe],Be=f[Oe],g.hasOwnProperty(Oe)&&Pe!==Be&&(Pe!=null||Be!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,u));break;default:Sn(l,u,Oe,Pe,g,Be)}return;default:if(ua(u)){for(var Nn in f)Pe=f[Nn],f.hasOwnProperty(Nn)&&Pe!==void 0&&!g.hasOwnProperty(Nn)&&k5(l,u,Nn,void 0,g,Pe);for(We in g)Pe=g[We],Be=f[We],!g.hasOwnProperty(We)||Pe===Be||Pe===void 0&&Be===void 0||k5(l,u,We,Pe,g,Be);return}}for(var Se in f)Pe=f[Se],f.hasOwnProperty(Se)&&Pe!=null&&!g.hasOwnProperty(Se)&&Sn(l,u,Se,null,g,Pe);for(Ze in g)Pe=g[Ze],Be=f[Ze],!g.hasOwnProperty(Ze)||Pe===Be||Pe==null&&Be==null||Sn(l,u,Ze,Pe,g,Be)}function W9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cJ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,V=b.initiatorType,Q=b.duration;if(_&&Q&&W9(V)){for(V=0,Q=b.responseEnd,g+=1;g<f.length;g++){var ue=f[g],Oe=ue.startTime;if(Oe>Q)break;var We=ue.transferSize,Ze=ue.initiatorType;We&&W9(Ze)&&(ue=ue.responseEnd,V+=We*(ue<Q?1:(Q-Oe)/(ue-Oe)))}if(--g,u+=8*(_+V)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var C5=null,O5=null;function J1(l){return l.nodeType===9?l:l.ownerDocument}function K9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function I5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var R5=null;function uJ(){var l=window.event;return l&&l.type==="popstate"?l===R5?!1:(R5=l,!0):(R5=null,!1)}var X9=typeof setTimeout=="function"?setTimeout:void 0,dJ=typeof clearTimeout=="function"?clearTimeout:void 0,Y9=typeof Promise=="function"?Promise:void 0,hJ=typeof queueMicrotask=="function"?queueMicrotask:typeof Y9<"u"?function(l){return Y9.resolve(null).then(l).catch(fJ)}:X9;function fJ(l){setTimeout(function(){throw l})}function Qc(l){return l==="head"}function J9(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),lh(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")zp(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,zp(f);for(var _=f.firstChild;_;){var V=_.nextSibling,Q=_.nodeName;_[wi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=V}}else f==="body"&&zp(l.ownerDocument.body);f=b}while(f);lh(u)}function Z9(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function M5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":M5(f),Ot(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function pJ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[wi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=Gs(l.nextSibling),l===null)break}return null}function mJ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Gs(l.nextSibling),l===null))return null;return l}function eO(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Gs(l.nextSibling),l===null))return null;return l}function D5(l){return l.data==="$?"||l.data==="$~"}function P5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function gJ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Gs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var L5=null;function tO(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Gs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function rO(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function nO(l,u,f){switch(u=J1(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function zp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Ot(l)}var Ws=new Map,aO=new Set;function Z1(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Pl=Z.d;Z.d={f:xJ,r:yJ,D:vJ,C:bJ,L:wJ,m:SJ,X:_J,S:NJ,M:TJ};function xJ(){var l=Pl.f(),u=q1();return l||u}function yJ(l){var u=st(l);u!==null&&u.tag===5&&u.type==="form"?wC(u):Pl.r(l)}var ih=typeof document>"u"?null:document;function iO(l,u,f){var g=ih;if(g&&typeof u=="string"&&u){var b=Rt(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),aO.has(b)||(aO.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),fi(u,"link",l),vr(u),g.head.appendChild(u)))}}function vJ(l){Pl.D(l),iO("dns-prefetch",l,null)}function bJ(l,u){Pl.C(l,u),iO("preconnect",l,u)}function wJ(l,u,f){Pl.L(l,u,f);var g=ih;if(g&&l&&u){var b='link[rel="preload"][as="'+Rt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Rt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Rt(f.imageSizes)+'"]')):b+='[href="'+Rt(l)+'"]';var _=b;switch(u){case"style":_=sh(l);break;case"script":_=oh(l)}Ws.has(_)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Ws.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Up(_))||u==="script"&&g.querySelector(Vp(_))||(u=g.createElement("link"),fi(u,"link",l),vr(u),g.head.appendChild(u)))}}function SJ(l,u){Pl.m(l,u);var f=ih;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+Rt(g)+'"][href="'+Rt(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=oh(l)}if(!Ws.has(_)&&(l=m({rel:"modulepreload",href:l},u),Ws.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Vp(_)))return}g=f.createElement("link"),fi(g,"link",l),vr(g),f.head.appendChild(g)}}}function NJ(l,u,f){Pl.S(l,u,f);var g=ih;if(g&&l){var b=nr(g).hoistableStyles,_=sh(l);u=u||"default";var V=b.get(_);if(!V){var Q={loading:0,preload:null};if(V=g.querySelector(Up(_)))Q.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Ws.get(_))&&B5(l,f);var ue=V=g.createElement("link");vr(ue),fi(ue,"link",l),ue._p=new Promise(function(Oe,We){ue.onload=Oe,ue.onerror=We}),ue.addEventListener("load",function(){Q.loading|=1}),ue.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,ey(V,u,g)}V={type:"stylesheet",instance:V,count:1,state:Q},b.set(_,V)}}}function _J(l,u){Pl.X(l,u);var f=ih;if(f&&l){var g=nr(f).hoistableScripts,b=oh(l),_=g.get(b);_||(_=f.querySelector(Vp(b)),_||(l=m({src:l,async:!0},u),(u=Ws.get(b))&&$5(l,u),_=f.createElement("script"),vr(_),fi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function TJ(l,u){Pl.M(l,u);var f=ih;if(f&&l){var g=nr(f).hoistableScripts,b=oh(l),_=g.get(b);_||(_=f.querySelector(Vp(b)),_||(l=m({src:l,async:!0,type:"module"},u),(u=Ws.get(b))&&$5(l,u),_=f.createElement("script"),vr(_),fi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function sO(l,u,f,g){var b=(b=Ye.current)?Z1(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=sh(f.href),f=nr(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=sh(f.href);var _=nr(b).hoistableStyles,V=_.get(l);if(V||(b=b.ownerDocument||b,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,V),(_=b.querySelector(Up(l)))&&!_._p&&(V.instance=_,V.state.loading=5),Ws.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ws.set(l,f),_||jJ(b,l,f,V.state))),u&&g===null)throw Error(n(528,""));return V}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=oh(f),f=nr(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function sh(l){return'href="'+Rt(l)+'"'}function Up(l){return'link[rel="stylesheet"]['+l+"]"}function oO(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function jJ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),fi(u,"link",f),vr(u),l.head.appendChild(u))}function oh(l){return'[src="'+Rt(l)+'"]'}function Vp(l){return"script[async]"+l}function lO(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+Rt(f.href)+'"]');if(g)return u.instance=g,vr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),vr(g),fi(g,"style",b),ey(g,f.precedence,l),u.instance=g;case"stylesheet":b=sh(f.href);var _=l.querySelector(Up(b));if(_)return u.state.loading|=4,u.instance=_,vr(_),_;g=oO(f),(b=Ws.get(b))&&B5(g,b),_=(l.ownerDocument||l).createElement("link"),vr(_);var V=_;return V._p=new Promise(function(Q,ue){V.onload=Q,V.onerror=ue}),fi(_,"link",g),u.state.loading|=4,ey(_,f.precedence,l),u.instance=_;case"script":return _=oh(f.src),(b=l.querySelector(Vp(_)))?(u.instance=b,vr(b),b):(g=f,(b=Ws.get(_))&&(g=m({},f),$5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),vr(b),fi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ey(g,f.precedence,l));return u.instance}function ey(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,V=0;V<g.length;V++){var Q=g[V];if(Q.dataset.precedence===u)_=Q;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function B5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function $5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ty=null;function cO(l,u,f){if(ty===null){var g=new Map,b=ty=new Map;b.set(f,g)}else b=ty,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[wi]||_[an]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var V=_.getAttribute(u)||"";V=l+V;var Q=g.get(V);Q?Q.push(_):g.set(V,[_])}}return g}function uO(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function AJ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function dO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function EJ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=sh(g.href),_=u.querySelector(Up(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=ry.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,vr(_);return}_=u.ownerDocument||u,g=oO(g),(b=Ws.get(b))&&B5(g,b),_=_.createElement("link"),vr(_);var V=_;V._p=new Promise(function(Q,ue){V.onload=Q,V.onerror=ue}),fi(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=ry.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var z5=0;function kJ(l,u){return l.stylesheets&&l.count===0&&ay(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&z5===0&&(z5=62500*cJ());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>z5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function ry(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ay(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ny=null;function ay(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ny=new Map,u.forEach(CJ,l),ny=null,ry.call(l))}function CJ(l,u){if(!(u.state.loading&4)){var f=ny.get(l);if(f)var g=f.get(null);else{f=new Map,ny.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var V=b[_];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(f.set(V.dataset.precedence,V),g=V)}g&&f.set(null,g)}b=u.instance,V=b.getAttribute("data-precedence"),_=f.get(V)||g,_===g&&f.set(null,b),f.set(V,b),this.count++,g=ry.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Fp={$$typeof:R,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function OJ(l,u,f,g,b,_,V,Q,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function hO(l,u,f,g,b,_,V,Q,ue,Oe,We,Ze){return l=new OJ(l,u,f,V,ue,Oe,We,Ze,Q),u=1,_===!0&&(u|=24),_=vs(3,null,null,u),l.current=_,_.stateNode=l,u=v4(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},N4(_),l}function fO(l){return l?(l=B0,l):B0}function pO(l,u,f,g,b,_){b=fO(b),g.context===null?g.context=b:g.pendingContext=b,g=Bc(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=$c(l,g,u),f!==null&&(Xi(f,l,u),wp(f,l,u))}function mO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function U5(l,u){mO(l,u),(l=l.alternate)&&mO(l,u)}function gO(l){if(l.tag===13||l.tag===31){var u=sd(l,67108864);u!==null&&Xi(u,l,67108864),U5(l,67108864)}}function xO(l){if(l.tag===13||l.tag===31){var u=_s();u=oi(u);var f=sd(l,u);f!==null&&Xi(f,l,u),U5(l,u)}}var iy=!0;function IJ(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=2,V5(l,u,f,g)}finally{Z.p=_,H.T=b}}function RJ(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=8,V5(l,u,f,g)}finally{Z.p=_,H.T=b}}function V5(l,u,f,g){if(iy){var b=F5(g);if(b===null)E5(l,u,g,sy,f),vO(l,g);else if(DJ(b,l,u,f,g))g.stopPropagation();else if(vO(l,g),u&4&&-1<MJ.indexOf(l)){for(;b!==null;){var _=st(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var V=qt(_.pendingLanes);if(V!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;V;){var ue=1<<31-tt(V);Q.entanglements[1]|=ue,V&=~ue}Fo(_),(en&6)===0&&(V1=He()+500,Lp(0))}}break;case 31:case 13:Q=sd(_,2),Q!==null&&Xi(Q,_,2),q1(),U5(_,2)}if(_=F5(g),_===null&&E5(l,u,g,sy,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else E5(l,u,g,null,f)}}function F5(l){return l=Lo(l),q5(l)}var sy=null;function q5(l){if(sy=null,l=fe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return sy=l,null}function yO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case Ge:return 2;case Je:return 8;case Et:case Nt:return 32;case dr:return 268435456;default:return 32}default:return 32}}var H5=!1,Xc=null,Yc=null,Jc=null,qp=new Map,Hp=new Map,Zc=[],MJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vO(l,u){switch(l){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":Yc=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":qp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(u.pointerId)}}function Gp(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=st(u),u!==null&&gO(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function DJ(l,u,f,g,b){switch(u){case"focusin":return Xc=Gp(Xc,l,u,f,g,b),!0;case"dragenter":return Yc=Gp(Yc,l,u,f,g,b),!0;case"mouseover":return Jc=Gp(Jc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return qp.set(_,Gp(qp.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,Hp.set(_,Gp(Hp.get(_)||null,l,u,f,g,b)),!0}return!1}function bO(l){var u=fe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,li(l.priority,function(){xO(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,li(l.priority,function(){xO(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function oy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=F5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Nr=g,f.target.dispatchEvent(g),Nr=null}else return u=st(f),u!==null&&gO(u),l.blockedOn=f,!1;u.shift()}return!0}function wO(l,u,f){oy(l)&&f.delete(u)}function PJ(){H5=!1,Xc!==null&&oy(Xc)&&(Xc=null),Yc!==null&&oy(Yc)&&(Yc=null),Jc!==null&&oy(Jc)&&(Jc=null),qp.forEach(wO),Hp.forEach(wO)}function ly(l,u){l.blockedOn===u&&(l.blockedOn=null,H5||(H5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PJ)))}var cy=null;function SO(l){cy!==l&&(cy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cy===l&&(cy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(q5(g||f)===null)continue;break}var _=st(f);_!==null&&(l.splice(u,3),u-=3,F4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function lh(l){function u(ue){return ly(ue,l)}Xc!==null&&ly(Xc,l),Yc!==null&&ly(Yc,l),Jc!==null&&ly(Jc,l),qp.forEach(u),Hp.forEach(u);for(var f=0;f<Zc.length;f++){var g=Zc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Zc.length&&(f=Zc[0],f.blockedOn===null);)bO(f),f.blockedOn===null&&Zc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],V=b[vn]||null;if(typeof _=="function")V||SO(f);else if(V){var Q=null;if(_&&_.hasAttribute("formAction")){if(b=_,V=_[vn]||null)Q=V.formAction;else if(q5(b)!==null)continue}else Q=V.action;typeof Q=="function"?f[g+1]=Q:(f.splice(g,3),g-=3),SO(f)}}}function NO(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(V){return b=V})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function G5(l){this._internalRoot=l}uy.prototype.render=G5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=_s();pO(f,g,l,u,null,null)},uy.prototype.unmount=G5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;pO(l.current,2,null,l,null,null),q1(),u[En]=null}};function uy(l){this._internalRoot=l}uy.prototype.unstable_scheduleHydration=function(l){if(l){var u=yn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Zc.length&&u!==0&&u<Zc[f].priority;f++);Zc.splice(f,0,l),f===0&&bO(l)}};var _O=e.version;if(_O!=="19.2.4")throw Error(n(527,_O,"19.2.4"));Z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var LJ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dy.isDisabled&&dy.supportsFiber)try{jt=dy.inject(LJ),Bt=dy}catch{}}return Kp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=OC,_=IC,V=RC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=hO(l,1,!1,null,null,f,g,null,b,_,V,NO),l[En]=u.current,A5(l),new G5(u)},Kp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=OC,V=IC,Q=RC,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),u=hO(l,1,!0,u,f??null,g,b,ue,_,V,Q,NO),u.context=fO(null),f=u.current,g=_s(),g=oi(g),b=Bc(g),b.callback=null,$c(f,b,g),f=g,u.current.lanes=f,gn(u,f),Fo(u),l[En]=u.current,A5(l),new uy(u)},Kp.version="19.2.4",Kp}var DO;function QJ(){if(DO)return Q5.exports;DO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q5.exports=KJ(),Q5.exports}var XJ=QJ();const YJ=tn(XJ);var za=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(za||{});const jr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ua=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ua||{});const lT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},PO=[1.5,1.4,1.3,1.2,1.1],Wm=5,Km=1;function JJ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function tv(t,e){const r=new Set;return t.forEach(n=>{const a=JJ(n,e);a&&r.add(a)}),Array.from(r).sort()}const ZJ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var LO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},eZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},SV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(r[p],r[m],r[x],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new tZ;const x=i<<2|c>>4;if(n.push(x),h!==64){const y=c<<4&240|h>>2;if(n.push(y),m!==64){const S=h<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rZ=function(t){const e=wV(t);return SV.encodeByteArray(e,!0)},Sv=function(t){return rZ(t).replace(/\./g,"")},NV=function(t){try{return SV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aZ=()=>nZ().__FIREBASE_DEFAULTS__,iZ=()=>{if(typeof process>"u"||typeof LO>"u")return;const t=LO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NV(t[1]);return e&&JSON.parse(e)},x2=()=>{try{return aZ()||iZ()||sZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_V=t=>{var e,r;return(r=(e=x2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},TV=t=>{const e=_V(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},jV=()=>{var t;return(t=x2())===null||t===void 0?void 0:t.config},AV=t=>{var e;return(e=x2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sv(JSON.stringify(r)),Sv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qa())}function uZ(){var t;const e=(t=x2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pZ(){const t=qa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EV(){return!uZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kV(){try{return typeof indexedDB=="object"}catch{return!1}}function mZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZ="FirebaseError";class Ro extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=gZ,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ix.prototype.create)}}class ix{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?xZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Ro(a,c,n)}}function xZ(t,e){return t.replace(yZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const yZ=/\{\$([^}]+)}/g;function vZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(BO(i)&&BO(o)){if(!qh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function BO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function bZ(t,e){const r=new wZ(t,e);return r.subscribe.bind(r)}class wZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");SZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=Z5),a.error===void 0&&(a.error=Z5),a.complete===void 0&&(a.complete=Z5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Z5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class oc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new oZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TZ(e))try{this.getOrInitializeService({instanceIdentifier:Ad})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Ad){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ad){return this.instances.has(e)}getOptions(e=Ad){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_Z(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ad){return this.component?this.component.multipleInstances?e:Ad:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _Z(t){return t===Ad?void 0:t}function TZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new NZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mr||(Mr={}));const AZ={debug:Mr.DEBUG,verbose:Mr.VERBOSE,info:Mr.INFO,warn:Mr.WARN,error:Mr.ERROR,silent:Mr.SILENT},EZ=Mr.INFO,kZ={[Mr.DEBUG]:"log",[Mr.VERBOSE]:"log",[Mr.INFO]:"info",[Mr.WARN]:"warn",[Mr.ERROR]:"error"},CZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=kZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VA{constructor(e){this.name=e,this._logLevel=EZ,this._logHandler=CZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mr.DEBUG,...e),this._logHandler(this,Mr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mr.VERBOSE,...e),this._logHandler(this,Mr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mr.INFO,...e),this._logHandler(this,Mr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mr.WARN,...e),this._logHandler(this,Mr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mr.ERROR,...e),this._logHandler(this,Mr.ERROR,...e)}}const OZ=(t,e)=>e.some(r=>t instanceof r);let $O,zO;function IZ(){return $O||($O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RZ(){return zO||(zO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CV=new WeakMap,cT=new WeakMap,OV=new WeakMap,e3=new WeakMap,FA=new WeakMap;function MZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Tu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&CV.set(r,t)}).catch(()=>{}),FA.set(e,t),e}function DZ(t){if(cT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cT.set(t,e)}let uT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return cT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PZ(t){uT=t(uT)}function LZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(t3(this),e,...r);return OV.set(n,e.sort?e.sort():[e]),Tu(n)}:RZ().includes(t)?function(...e){return t.apply(t3(this),e),Tu(CV.get(this))}:function(...e){return Tu(t.apply(t3(this),e))}}function BZ(t){return typeof t=="function"?LZ(t):(t instanceof IDBTransaction&&DZ(t),OZ(t,IZ())?new Proxy(t,uT):t)}function Tu(t){if(t instanceof IDBRequest)return MZ(t);if(e3.has(t))return e3.get(t);const e=BZ(t);return e!==t&&(e3.set(t,e),FA.set(e,t)),e}const t3=t=>FA.get(t);function $Z(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=Tu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Tu(o.result),d.oldVersion,d.newVersion,Tu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const zZ=["get","getKey","getAll","getAllKeys","count"],UZ=["put","add","delete","clear"],r3=new Map;function UO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(r3.get(e))return r3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=UZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||zZ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return r3.set(e,i),i}PZ(t=>({...t,get:(e,r,n)=>UO(e,r)||t.get(e,r,n),has:(e,r)=>!!UO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(FZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function FZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dT="@firebase/app",VO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new VA("@firebase/app"),qZ="@firebase/app-compat",HZ="@firebase/analytics-compat",GZ="@firebase/analytics",WZ="@firebase/app-check-compat",KZ="@firebase/app-check",QZ="@firebase/auth",XZ="@firebase/auth-compat",YZ="@firebase/database",JZ="@firebase/data-connect",ZZ="@firebase/database-compat",eee="@firebase/functions",tee="@firebase/functions-compat",ree="@firebase/installations",nee="@firebase/installations-compat",aee="@firebase/messaging",iee="@firebase/messaging-compat",see="@firebase/performance",oee="@firebase/performance-compat",lee="@firebase/remote-config",cee="@firebase/remote-config-compat",uee="@firebase/storage",dee="@firebase/storage-compat",hee="@firebase/firestore",fee="@firebase/vertexai-preview",pee="@firebase/firestore-compat",mee="firebase",gee="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="[DEFAULT]",xee={[dT]:"fire-core",[qZ]:"fire-core-compat",[GZ]:"fire-analytics",[HZ]:"fire-analytics-compat",[KZ]:"fire-app-check",[WZ]:"fire-app-check-compat",[QZ]:"fire-auth",[XZ]:"fire-auth-compat",[YZ]:"fire-rtdb",[JZ]:"fire-data-connect",[ZZ]:"fire-rtdb-compat",[eee]:"fire-fn",[tee]:"fire-fn-compat",[ree]:"fire-iid",[nee]:"fire-iid-compat",[aee]:"fire-fcm",[iee]:"fire-fcm-compat",[see]:"fire-perf",[oee]:"fire-perf-compat",[lee]:"fire-rc",[cee]:"fire-rc-compat",[uee]:"fire-gcs",[dee]:"fire-gcs-compat",[hee]:"fire-fst",[pee]:"fire-fst-compat",[fee]:"fire-vertex","fire-js":"fire-js",[mee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map,yee=new Map,fT=new Map;function FO(t,e){try{t.container.addComponent(e)}catch(r){lc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ru(t){const e=t.name;if(fT.has(e))return lc.debug(`There were multiple attempts to register component ${e}.`),!1;fT.set(e,t);for(const r of Nv.values())FO(r,t);for(const r of yee.values())FO(r,t);return!0}function ox(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Hl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ju=new ix("app","Firebase",vee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ju.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=gee;function IV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:hT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw ju.create("bad-app-name",{appName:String(a)});if(r||(r=jV()),!r)throw ju.create("no-options");const i=Nv.get(a);if(i){if(qh(r,i.options)&&qh(n,i.config))return i;throw ju.create("duplicate-app",{appName:a})}const o=new jZ(a);for(const d of fT.values())o.addComponent(d);const c=new bee(r,n,o);return Nv.set(a,c),c}function qA(t=hT){const e=Nv.get(t);if(!e&&t===hT&&jV())return IV();if(!e)throw ju.create("no-app",{appName:t});return e}function ro(t,e,r){var n;let a=(n=xee[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lc.warn(c.join(" "));return}Ru(new oc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wee="firebase-heartbeat-database",See=1,Qm="firebase-heartbeat-store";let n3=null;function RV(){return n3||(n3=$Z(wee,See,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qm)}catch(r){console.warn(r)}}}}).catch(t=>{throw ju.create("idb-open",{originalErrorMessage:t.message})})),n3}async function Nee(t){try{const r=(await RV()).transaction(Qm),n=await r.objectStore(Qm).get(MV(t));return await r.done,n}catch(e){if(e instanceof Ro)lc.warn(e.message);else{const r=ju.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lc.warn(r.message)}}}async function qO(t,e){try{const n=(await RV()).transaction(Qm,"readwrite");await n.objectStore(Qm).put(e,MV(t)),await n.done}catch(r){if(r instanceof Ro)lc.warn(r.message);else{const n=ju.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});lc.warn(n.message)}}}function MV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee=1024,Tee=720*60*60*1e3;class jee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Eee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=HO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Tee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){lc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=HO(),{heartbeatsToSend:n,unsentEntries:a}=Aee(this._heartbeatsCache.heartbeats),i=Sv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return lc.warn(r),""}}}function HO(){return new Date().toISOString().substring(0,10)}function Aee(t,e=_ee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),GO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),GO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Eee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kV()?mZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Nee(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return qO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return qO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function GO(t){return Sv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kee(t){Ru(new oc("platform-logger",e=>new VZ(e),"PRIVATE")),Ru(new oc("heartbeat",e=>new jee(e),"PRIVATE")),ro(dT,VO,t),ro(dT,VO,"esm2017"),ro("fire-js","")}kee("");var Cee="firebase",Oee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro(Cee,Oee,"app");function HA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function DV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Iee=DV,PV=new ix("auth","Firebase",DV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new VA("@firebase/auth");function Ree(t,...e){_v.logLevel<=Mr.WARN&&_v.warn(`Auth (${b0}): ${t}`,...e)}function rv(t,...e){_v.logLevel<=Mr.ERROR&&_v.error(`Auth (${b0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,...e){throw WA(t,...e)}function ko(t,...e){return WA(t,...e)}function GA(t,e,r){const n=Object.assign(Object.assign({},Iee()),{[e]:r});return new ix("auth","Firebase",n).create(e,{appName:t.name})}function qd(t){return GA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&al(t,"argument-error"),GA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WA(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return PV.create(t,...e)}function cr(t,e,...r){if(!t)throw WA(e,...r)}function Gl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rv(e),new Error(e)}function cc(t,e){t||Gl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Dee(){return WO()==="http:"||WO()==="https:"}function WO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dee()||hZ()||"connection"in navigator)?navigator.onLine:!0}function Lee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,r){this.shortDelay=e,this.longDelay=r,cc(r>e,"Short delay should be less than long delay!"),this.isMobile=cZ()||fZ()}get(){return Pee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){cc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ee=new lx(3e4,6e4);function QA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Df(t,e,r,n,a={}){return BV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=sx(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return dZ()||(h.referrerPolicy="no-referrer"),LV.fetch()($V(t,t.config.apiHost,r,c),h)})}async function BV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Bee),e);try{const a=new Uee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fy(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw fy(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw fy(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw fy(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw GA(t,p,h);al(t,p)}}catch(a){if(a instanceof Ro)throw a;al(t,"network-request-failed",{message:String(a)})}}async function zee(t,e,r,n,a={}){const i=await Df(t,e,r,n,a);return"mfaPendingCredential"in i&&al(t,"multi-factor-auth-required",{_serverResponse:i}),i}function $V(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?KA(t.config,a):`${t.config.apiScheme}://${a}`}class Uee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ko(this.auth,"network-request-failed")),$ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=ko(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vee(t,e){return Df(t,"POST","/v1/accounts:delete",e)}async function zV(t,e){return Df(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fee(t,e=!1){const r=An(t),n=await r.getIdToken(e),a=XA(n);cr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:_m(a3(a.auth_time)),issuedAtTime:_m(a3(a.iat)),expirationTime:_m(a3(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function a3(t){return Number(t)*1e3}function XA(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return rv("JWT malformed, contained fewer than 3 sections"),null;try{const a=NV(r);return a?JSON.parse(a):(rv("Failed to decode base64 JWT payload"),null)}catch(a){return rv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function KO(t){const e=XA(t);return cr(e,"internal-error"),cr(typeof e.exp<"u","internal-error"),cr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ro&&qee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function qee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_m(this.lastLoginAt),this.creationTime=_m(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tv(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Xm(t,zV(r,{idToken:n}));cr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?UV(i.providerUserInfo):[],c=Wee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new mT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Gee(t){const e=An(t);await Tv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function UV(t){return t.map(e=>{var{providerId:r}=e,n=HA(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e){const r=await BV(t,{},async()=>{const n=sx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=$V(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",LV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Qee(t,e){return Df(t,"POST","/v2/accounts:revokeToken",QA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){cr(e.idToken,"internal-error"),cr(typeof e.idToken<"u","internal-error"),cr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){cr(e.length!==0,"internal-error");const r=KO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(cr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Kee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new kh;return n&&(cr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(cr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(cr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kh,this.toJSON())}_performRefresh(){return Gl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e){cr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=HA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Xm(this,this.stsTokenManager.getToken(this.auth,e));return cr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Fee(this,e)}reload(){return Gee(this)}_assign(e){this!==e&&(cr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Wl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){cr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Tv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hl(this.auth.app))return Promise.reject(qd(this.auth));const e=await this.getIdToken();return await Xm(this,Vee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(a=r.email)!==null&&a!==void 0?a:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=r.photoURL)!==null&&o!==void 0?o:void 0,N=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,E=(h=r.createdAt)!==null&&h!==void 0?h:void 0,O=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:P,isAnonymous:I,providerData:k,stsTokenManager:A}=r;cr(R&&A,e,"internal-error");const j=kh.fromJSON(this.name,A);cr(typeof R=="string",e,"internal-error"),tu(m,e.name),tu(x,e.name),cr(typeof P=="boolean",e,"internal-error"),cr(typeof I=="boolean",e,"internal-error"),tu(y,e.name),tu(S,e.name),tu(N,e.name),tu(w,e.name),tu(E,e.name),tu(O,e.name);const C=new Wl({uid:R,auth:e,email:x,emailVerified:P,displayName:m,isAnonymous:I,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:j,createdAt:E,lastLoginAt:O});return k&&Array.isArray(k)&&(C.providerData=k.map(U=>Object.assign({},U))),w&&(C._redirectEventId=w),C}static async _fromIdTokenResponse(e,r,n=!1){const a=new kh;a.updateFromServerResponse(r);const i=new Wl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Tv(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];cr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?UV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new kh;c.updateFromIdToken(n);const d=new Wl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new mT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new Map;function Kl(t){cc(t instanceof Function,"Expected a class definition");let e=QO.get(t);return e?(cc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}VV.type="NONE";const XO=VV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e,r){return`firebase:${t}:${e}:${r}`}class Ch{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=nv(this.userKey,a.apiKey,i),this.fullPersistenceKey=nv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ch(Kl(XO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Kl(XO);const o=nv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=Wl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Ch(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ch(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KV(e))return"Blackberry";if(QV(e))return"Webos";if(qV(e))return"Safari";if((e.includes("chrome/")||HV(e))&&!e.includes("edge/"))return"Chrome";if(WV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function FV(t=qa()){return/firefox\//i.test(t)}function qV(t=qa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HV(t=qa()){return/crios\//i.test(t)}function GV(t=qa()){return/iemobile/i.test(t)}function WV(t=qa()){return/android/i.test(t)}function KV(t=qa()){return/blackberry/i.test(t)}function QV(t=qa()){return/webos/i.test(t)}function YA(t=qa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Xee(t=qa()){var e;return YA(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Yee(){return pZ()&&document.documentMode===10}function XV(t=qa()){return YA(t)||WV(t)||QV(t)||KV(t)||/windows phone/i.test(t)||GV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t,e=[]){let r;switch(t){case"Browser":r=YO(qa());break;case"Worker":r=`${YO(qa())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${b0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zee(t,e={}){return Df(t,"GET","/v2/passwordPolicy",QA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ete=6;class tte{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:ete,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JO(this),this.idTokenSubscription=new JO(this),this.beforeStateQueue=new Jee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Kl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ch.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await zV(this,{idToken:e}),n=await Wl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Hl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return cr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Tv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hl(this.app))return Promise.reject(qd(this));const r=e?An(e):null;return r&&cr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&cr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hl(this.app)?Promise.reject(qd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hl(this.app)?Promise.reject(qd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zee(this),r=new tte(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ix("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Qee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Kl(e)||this._popupRedirectResolver;cr(r,this,"argument-error"),this.redirectPersistenceManager=await Ch.create(this,[Kl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(cr(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return cr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Ree(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function y2(t){return An(t)}class JO{constructor(e){this.auth=e,this.observer=null,this.addObserver=bZ(r=>this.observer=r)}get next(){return cr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nte(t){JA=t}function ate(t){return JA.loadJS(t)}function ite(){return JA.gapiScript}function ste(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ote(t,e){const r=ox(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(qh(i,e??{}))return a;al(a,"already-initialized")}return r.initialize({options:e})}function lte(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Kl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function cte(t,e,r){const n=y2(t);cr(n._canInitEmulator,n,"emulator-config-failed"),cr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=JV(e),{host:o,port:c}=ute(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),dte()}function JV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ute(t){const e=JV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:ZO(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:ZO(o)}}}function ZO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dte(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Gl("not implemented")}_getIdTokenResponse(e){return Gl("not implemented")}_linkToIdToken(e,r){return Gl("not implemented")}_getReauthenticationResolver(e){return Gl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(t,e){return zee(t,"POST","/v1/accounts:signInWithIdp",QA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hte="http://localhost";class Qd extends ZV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):al("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=HA(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Qd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Oh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Oh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Oh(e,r)}buildRequest(){const e={requestUri:hte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=sx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx extends ZA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends cx{constructor(){super("facebook.com")}static credential(e){return Qd._fromParams({providerId:cu.PROVIDER_ID,signInMethod:cu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cu.credentialFromTaggedObject(e)}static credentialFromError(e){return cu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cu.credential(e.oauthAccessToken)}catch{return null}}}cu.FACEBOOK_SIGN_IN_METHOD="facebook.com";cu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends cx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Qd._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Fl.credentialFromTaggedObject(e)}static credentialFromError(e){return Fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Fl.credential(r,n)}catch{return null}}}Fl.GOOGLE_SIGN_IN_METHOD="google.com";Fl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends cx{constructor(){super("github.com")}static credential(e){return Qd._fromParams({providerId:uu.PROVIDER_ID,signInMethod:uu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uu.credentialFromTaggedObject(e)}static credentialFromError(e){return uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uu.credential(e.oauthAccessToken)}catch{return null}}}uu.GITHUB_SIGN_IN_METHOD="github.com";uu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends cx{constructor(){super("twitter.com")}static credential(e,r){return Qd._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return du.credential(r,n)}catch{return null}}}du.TWITTER_SIGN_IN_METHOD="twitter.com";du.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Wl._fromIdTokenResponse(e,n,a),o=eI(n);return new Hh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=eI(n);return new Hh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function eI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends Ro{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,jv.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new jv(e,r,n,a)}}function eF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jv._fromErrorAndOperation(t,i,e,n):i})}async function fte(t,e,r=!1){const n=await Xm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Hh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pte(t,e,r=!1){const{auth:n}=t;if(Hl(n.app))return Promise.reject(qd(n));const a="reauthenticate";try{const i=await Xm(t,eF(n,a,e,t),r);cr(i.idToken,n,"internal-error");const o=XA(i.idToken);cr(o,n,"internal-error");const{sub:c}=o;return cr(t.uid===c,n,"user-mismatch"),Hh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&al(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mte(t,e,r=!1){if(Hl(t.app))return Promise.reject(qd(t));const n="signIn",a=await eF(t,n,e),i=await Hh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function gte(t,e,r,n){return An(t).onIdTokenChanged(e,r,n)}function xte(t,e,r){return An(t).beforeAuthStateChanged(e,r)}function yte(t,e,r,n){return An(t).onAuthStateChanged(e,r,n)}function vte(t){return An(t).signOut()}const Av="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Av,"1"),this.storage.removeItem(Av),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bte=1e3,wte=10;class rF extends tF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);Yee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,wte):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},bte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}rF.type="LOCAL";const Ste=rF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF extends tF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}nF.type="SESSION";const aF=nF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new v2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await Nte(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}v2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=e8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(){return window}function Tte(t){tl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){return typeof tl().WorkerGlobalScope<"u"&&typeof tl().importScripts=="function"}async function jte(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ate(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ete(){return iF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="firebaseLocalStorageDb",kte=1,Ev="firebaseLocalStorage",oF="fbase_key";class ux{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function b2(t,e){return t.transaction([Ev],e?"readwrite":"readonly").objectStore(Ev)}function Cte(){const t=indexedDB.deleteDatabase(sF);return new ux(t).toPromise()}function gT(){const t=indexedDB.open(sF,kte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ev,{keyPath:oF})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ev)?e(n):(n.close(),await Cte(),e(await gT()))})})}async function tI(t,e,r){const n=b2(t,!0).put({[oF]:e,value:r});return new ux(n).toPromise()}async function Ote(t,e){const r=b2(t,!1).get(e),n=await new ux(r).toPromise();return n===void 0?null:n.value}function rI(t,e){const r=b2(t,!0).delete(e);return new ux(r).toPromise()}const Ite=800,Rte=3;class lF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Rte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=v2._getInstance(Ete()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await jte(),!this.activeServiceWorker)return;this.sender=new _te(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ate()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gT();return await tI(e,Av,"1"),await rI(e,Av),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>tI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Ote(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>rI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=b2(a,!1).getAll();return new ux(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ite)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lF.type="LOCAL";const Mte=lF;new lx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e){return e?Kl(e):(cr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8 extends ZV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Oh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Oh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Dte(t){return mte(t.auth,new t8(t),t.bypassAuthState)}function Pte(t){const{auth:e,user:r}=t;return cr(r,e,"internal-error"),pte(r,new t8(t),t.bypassAuthState)}async function Lte(t){const{auth:e,user:r}=t;return cr(r,e,"internal-error"),fte(r,new t8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dte;case"linkViaPopup":case"linkViaRedirect":return Lte;case"reauthViaPopup":case"reauthViaRedirect":return Pte;default:al(this.auth,"internal-error")}}resolve(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bte=new lx(2e3,1e4);async function $te(t,e,r){if(Hl(t.app))return Promise.reject(ko(t,"operation-not-supported-in-this-environment"));const n=y2(t);Mee(t,e,ZA);const a=cF(n,r);return new Pd(n,"signInViaPopup",e,a).executeNotNull()}class Pd extends uF{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Pd.currentPopupAction&&Pd.currentPopupAction.cancel(),Pd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return cr(e,this.auth,"internal-error"),e}async onExecution(){cc(this.filter.length===1,"Popup operations only handle one event");const e=e8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ko(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ko(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ko(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bte.get())};e()}}Pd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte="pendingRedirect",av=new Map;class Ute extends uF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=av.get(this.auth._key());if(!e){try{const n=await Vte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}av.set(this.auth._key(),e)}return this.bypassAuthState||av.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vte(t,e){const r=Hte(e),n=qte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Fte(t,e){av.set(t._key(),e)}function qte(t){return Kl(t._redirectPersistence)}function Hte(t){return nv(zte,t.config.apiKey,t.name)}async function Gte(t,e,r=!1){if(Hl(t.app))return Promise.reject(qd(t));const n=y2(t),a=cF(n,e),o=await new Ute(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wte=600*1e3;class Kte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Qte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!dF(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ko(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wte&&this.cachedEventUids.clear(),this.cachedEventUids.has(nI(e))}saveEventToCache(e){this.cachedEventUids.add(nI(e)),this.lastProcessedEventTime=Date.now()}}function nI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Qte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xte(t,e={}){return Df(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jte=/^https?/;async function Zte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xte(t);for(const r of e)try{if(ere(r))return}catch{}al(t,"unauthorized-domain")}function ere(t){const e=pT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Jte.test(r))return!1;if(Yte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tre=new lx(3e4,6e4);function aI(){const t=tl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rre(t){return new Promise((e,r)=>{var n,a,i;function o(){aI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aI(),r(ko(t,"network-request-failed"))},timeout:tre.get()})}if(!((a=(n=tl().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=tl().gapi)===null||i===void 0)&&i.load)o();else{const c=ste("iframefcb");return tl()[c]=()=>{gapi.load?o():r(ko(t,"network-request-failed"))},ate(`${ite()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw iv=null,e})}let iv=null;function nre(t){return iv=iv||rre(t),iv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=new lx(5e3,15e3),ire="__/auth/iframe",sre="emulator/auth/iframe",ore={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cre(t){const e=t.config;cr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?KA(e,sre):`https://${t.config.authDomain}/${ire}`,n={apiKey:e.apiKey,appName:t.name,v:b0},a=lre.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${sx(n).slice(1)}`}async function ure(t){const e=await nre(t),r=tl().gapi;return cr(r,t,"internal-error"),e.open({where:document.body,url:cre(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ore,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=ko(t,"network-request-failed"),c=tl().setTimeout(()=>{i(o)},are.get());function d(){tl().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hre=500,fre=600,pre="_blank",mre="http://localhost";class iI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gre(t,e,r,n=hre,a=fre){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},dre),{width:n.toString(),height:a.toString(),top:i,left:o}),h=qa().toLowerCase();r&&(c=HV(h)?pre:r),FV(h)&&(e=e||mre,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[y,S])=>`${x}${y}=${S},`,"");if(Xee(h)&&c!=="_self")return xre(e||"",c),new iI(null);const m=window.open(e||"",c,p);cr(m,t,"popup-blocked");try{m.focus()}catch{}return new iI(m)}function xre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yre="__/auth/handler",vre="emulator/auth/handler",bre=encodeURIComponent("fac");async function sI(t,e,r,n,a,i){cr(t.config.authDomain,t,"auth-domain-config-required"),cr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:b0,eventId:a};if(e instanceof ZA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof cx){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${bre}=${encodeURIComponent(d)}`:"";return`${wre(t)}?${sx(c).slice(1)}${h}`}function wre({config:t}){return t.emulator?KA(t,vre):`https://${t.authDomain}/${yre}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="webStorageSupport";class Sre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aF,this._completeRedirectFn=Gte,this._overrideRedirectResult=Fte}async _openPopup(e,r,n,a){var i;cc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await sI(e,r,n,pT(),a);return gre(e,o,e8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await sI(e,r,n,pT(),a);return Tte(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(cc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await ure(e),n=new Kte(e);return r.register("authEvent",a=>(cr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(i3,{type:i3},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[i3];o!==void 0&&r(!!o),al(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Zte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return XV()||qV()||YA()}}const Nre=Sre;var oI="@firebase/auth",lI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){cr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jre(t){Ru(new oc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;cr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YV(t)},h=new rte(n,a,i,d);return lte(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ru(new oc("auth-internal",e=>{const r=y2(e.getProvider("auth").getImmediate());return(n=>new _re(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(oI,lI,Tre(t)),ro(oI,lI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Are=300,Ere=AV("authIdTokenMaxAge")||Are;let cI=null;const kre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ere)return;const a=r==null?void 0:r.token;cI!==a&&(cI=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function xT(t=qA()){const e=ox(t,"auth");if(e.isInitialized())return e.getImmediate();const r=ote(t,{popupRedirectResolver:Nre,persistence:[Mte,Ste,aF]}),n=AV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=kre(i.toString());xte(r,o,()=>o(r.currentUser)),gte(r,c=>o(c))}}const a=_V("auth");return a&&cte(r,`http://${a}`),r}function Cre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nte({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=ko("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Cre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jre("Browser");var uI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hd,hF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,j){function C(){}C.prototype=j.prototype,A.D=j.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(U,L,$){for(var B=Array(arguments.length-2),G=2;G<arguments.length;G++)B[G-2]=arguments[G];return j.prototype[L].apply(U,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,j,C){C||(C=0);var U=Array(16);if(typeof j=="string")for(var L=0;16>L;++L)U[L]=j.charCodeAt(C++)|j.charCodeAt(C++)<<8|j.charCodeAt(C++)<<16|j.charCodeAt(C++)<<24;else for(L=0;16>L;++L)U[L]=j[C++]|j[C++]<<8|j[C++]<<16|j[C++]<<24;j=A.g[0],C=A.g[1],L=A.g[2];var $=A.g[3],B=j+($^C&(L^$))+U[0]+3614090360&4294967295;j=C+(B<<7&4294967295|B>>>25),B=$+(L^j&(C^L))+U[1]+3905402710&4294967295,$=j+(B<<12&4294967295|B>>>20),B=L+(C^$&(j^C))+U[2]+606105819&4294967295,L=$+(B<<17&4294967295|B>>>15),B=C+(j^L&($^j))+U[3]+3250441966&4294967295,C=L+(B<<22&4294967295|B>>>10),B=j+($^C&(L^$))+U[4]+4118548399&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(L^j&(C^L))+U[5]+1200080426&4294967295,$=j+(B<<12&4294967295|B>>>20),B=L+(C^$&(j^C))+U[6]+2821735955&4294967295,L=$+(B<<17&4294967295|B>>>15),B=C+(j^L&($^j))+U[7]+4249261313&4294967295,C=L+(B<<22&4294967295|B>>>10),B=j+($^C&(L^$))+U[8]+1770035416&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(L^j&(C^L))+U[9]+2336552879&4294967295,$=j+(B<<12&4294967295|B>>>20),B=L+(C^$&(j^C))+U[10]+4294925233&4294967295,L=$+(B<<17&4294967295|B>>>15),B=C+(j^L&($^j))+U[11]+2304563134&4294967295,C=L+(B<<22&4294967295|B>>>10),B=j+($^C&(L^$))+U[12]+1804603682&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(L^j&(C^L))+U[13]+4254626195&4294967295,$=j+(B<<12&4294967295|B>>>20),B=L+(C^$&(j^C))+U[14]+2792965006&4294967295,L=$+(B<<17&4294967295|B>>>15),B=C+(j^L&($^j))+U[15]+1236535329&4294967295,C=L+(B<<22&4294967295|B>>>10),B=j+(L^$&(C^L))+U[1]+4129170786&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^L&(j^C))+U[6]+3225465664&4294967295,$=j+(B<<9&4294967295|B>>>23),B=L+(j^C&($^j))+U[11]+643717713&4294967295,L=$+(B<<14&4294967295|B>>>18),B=C+($^j&(L^$))+U[0]+3921069994&4294967295,C=L+(B<<20&4294967295|B>>>12),B=j+(L^$&(C^L))+U[5]+3593408605&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^L&(j^C))+U[10]+38016083&4294967295,$=j+(B<<9&4294967295|B>>>23),B=L+(j^C&($^j))+U[15]+3634488961&4294967295,L=$+(B<<14&4294967295|B>>>18),B=C+($^j&(L^$))+U[4]+3889429448&4294967295,C=L+(B<<20&4294967295|B>>>12),B=j+(L^$&(C^L))+U[9]+568446438&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^L&(j^C))+U[14]+3275163606&4294967295,$=j+(B<<9&4294967295|B>>>23),B=L+(j^C&($^j))+U[3]+4107603335&4294967295,L=$+(B<<14&4294967295|B>>>18),B=C+($^j&(L^$))+U[8]+1163531501&4294967295,C=L+(B<<20&4294967295|B>>>12),B=j+(L^$&(C^L))+U[13]+2850285829&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^L&(j^C))+U[2]+4243563512&4294967295,$=j+(B<<9&4294967295|B>>>23),B=L+(j^C&($^j))+U[7]+1735328473&4294967295,L=$+(B<<14&4294967295|B>>>18),B=C+($^j&(L^$))+U[12]+2368359562&4294967295,C=L+(B<<20&4294967295|B>>>12),B=j+(C^L^$)+U[5]+4294588738&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^L)+U[8]+2272392833&4294967295,$=j+(B<<11&4294967295|B>>>21),B=L+($^j^C)+U[11]+1839030562&4294967295,L=$+(B<<16&4294967295|B>>>16),B=C+(L^$^j)+U[14]+4259657740&4294967295,C=L+(B<<23&4294967295|B>>>9),B=j+(C^L^$)+U[1]+2763975236&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^L)+U[4]+1272893353&4294967295,$=j+(B<<11&4294967295|B>>>21),B=L+($^j^C)+U[7]+4139469664&4294967295,L=$+(B<<16&4294967295|B>>>16),B=C+(L^$^j)+U[10]+3200236656&4294967295,C=L+(B<<23&4294967295|B>>>9),B=j+(C^L^$)+U[13]+681279174&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^L)+U[0]+3936430074&4294967295,$=j+(B<<11&4294967295|B>>>21),B=L+($^j^C)+U[3]+3572445317&4294967295,L=$+(B<<16&4294967295|B>>>16),B=C+(L^$^j)+U[6]+76029189&4294967295,C=L+(B<<23&4294967295|B>>>9),B=j+(C^L^$)+U[9]+3654602809&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^L)+U[12]+3873151461&4294967295,$=j+(B<<11&4294967295|B>>>21),B=L+($^j^C)+U[15]+530742520&4294967295,L=$+(B<<16&4294967295|B>>>16),B=C+(L^$^j)+U[2]+3299628645&4294967295,C=L+(B<<23&4294967295|B>>>9),B=j+(L^(C|~$))+U[0]+4096336452&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~L))+U[7]+1126891415&4294967295,$=j+(B<<10&4294967295|B>>>22),B=L+(j^($|~C))+U[14]+2878612391&4294967295,L=$+(B<<15&4294967295|B>>>17),B=C+($^(L|~j))+U[5]+4237533241&4294967295,C=L+(B<<21&4294967295|B>>>11),B=j+(L^(C|~$))+U[12]+1700485571&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~L))+U[3]+2399980690&4294967295,$=j+(B<<10&4294967295|B>>>22),B=L+(j^($|~C))+U[10]+4293915773&4294967295,L=$+(B<<15&4294967295|B>>>17),B=C+($^(L|~j))+U[1]+2240044497&4294967295,C=L+(B<<21&4294967295|B>>>11),B=j+(L^(C|~$))+U[8]+1873313359&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~L))+U[15]+4264355552&4294967295,$=j+(B<<10&4294967295|B>>>22),B=L+(j^($|~C))+U[6]+2734768916&4294967295,L=$+(B<<15&4294967295|B>>>17),B=C+($^(L|~j))+U[13]+1309151649&4294967295,C=L+(B<<21&4294967295|B>>>11),B=j+(L^(C|~$))+U[4]+4149444226&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~L))+U[11]+3174756917&4294967295,$=j+(B<<10&4294967295|B>>>22),B=L+(j^($|~C))+U[2]+718787259&4294967295,L=$+(B<<15&4294967295|B>>>17),B=C+($^(L|~j))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(L+(B<<21&4294967295|B>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,j){j===void 0&&(j=A.length);for(var C=j-this.blockSize,U=this.B,L=this.h,$=0;$<j;){if(L==0)for(;$<=C;)a(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<j;)if(U[L++]=A.charCodeAt($++),L==this.blockSize){a(this,U),L=0;break}}else for(;$<j;)if(U[L++]=A[$++],L==this.blockSize){a(this,U),L=0;break}}this.h=L,this.o+=j},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;var C=8*this.o;for(j=A.length-8;j<A.length;++j)A[j]=C&255,C/=256;for(this.u(A),A=Array(16),j=C=0;4>j;++j)for(var U=0;32>U;U+=8)A[C++]=this.g[j]>>>U&255;return A};function i(A,j){var C=c;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=j(A)}function o(A,j){this.h=j;for(var C=[],U=!0,L=A.length-1;0<=L;L--){var $=A[L]|0;U&&$==j||(C[L]=$,U=!1)}this.g=C}var c={};function d(A){return-128<=A&&128>A?i(A,function(j){return new o([j|0],0>j?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return w(h(-A));for(var j=[],C=1,U=0;A>=C;U++)j[U]=A/C|0,C*=4294967296;return new o(j,0)}function p(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return w(p(A.substring(1),j));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(j,8)),U=m,L=0;L<A.length;L+=8){var $=Math.min(8,A.length-L),B=parseInt(A.substring(L,L+$),j);8>$?($=h(Math.pow(j,$)),U=U.j($).add(h(B))):(U=U.j(C),U=U.add(h(B)))}return U}var m=d(0),x=d(1),y=d(16777216);t=o.prototype,t.m=function(){if(N(this))return-w(this).m();for(var A=0,j=1,C=0;C<this.g.length;C++){var U=this.i(C);A+=(0<=U?U:4294967296+U)*j,j*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(N(this))return"-"+w(this).toString(A);for(var j=h(Math.pow(A,6)),C=this,U="";;){var L=P(C,j).g;C=E(C,L.j(j));var $=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=L,S(C))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=E(this,A),N(A)?-1:S(A)?0:1};function w(A){for(var j=A.g.length,C=[],U=0;U<j;U++)C[U]=~A.g[U];return new o(C,~A.h).add(x)}t.abs=function(){return N(this)?w(this):this},t.add=function(A){for(var j=Math.max(this.g.length,A.g.length),C=[],U=0,L=0;L<=j;L++){var $=U+(this.i(L)&65535)+(A.i(L)&65535),B=($>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);U=B>>>16,$&=65535,B&=65535,C[L]=B<<16|$}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(A,j){return A.add(w(j))}t.j=function(A){if(S(this)||S(A))return m;if(N(this))return N(A)?w(this).j(w(A)):w(w(this).j(A));if(N(A))return w(this.j(w(A)));if(0>this.l(y)&&0>A.l(y))return h(this.m()*A.m());for(var j=this.g.length+A.g.length,C=[],U=0;U<2*j;U++)C[U]=0;for(U=0;U<this.g.length;U++)for(var L=0;L<A.g.length;L++){var $=this.i(U)>>>16,B=this.i(U)&65535,G=A.i(L)>>>16,K=A.i(L)&65535;C[2*U+2*L]+=B*K,O(C,2*U+2*L),C[2*U+2*L+1]+=$*K,O(C,2*U+2*L+1),C[2*U+2*L+1]+=B*G,O(C,2*U+2*L+1),C[2*U+2*L+2]+=$*G,O(C,2*U+2*L+2)}for(U=0;U<j;U++)C[U]=C[2*U+1]<<16|C[2*U];for(U=j;U<2*j;U++)C[U]=0;return new o(C,0)};function O(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function R(A,j){this.g=A,this.h=j}function P(A,j){if(S(j))throw Error("division by zero");if(S(A))return new R(m,m);if(N(A))return j=P(w(A),j),new R(w(j.g),w(j.h));if(N(j))return j=P(A,w(j)),new R(w(j.g),j.h);if(30<A.g.length){if(N(A)||N(j))throw Error("slowDivide_ only works with positive integers.");for(var C=x,U=j;0>=U.l(A);)C=I(C),U=I(U);var L=k(C,1),$=k(U,1);for(U=k(U,2),C=k(C,2);!S(U);){var B=$.add(U);0>=B.l(A)&&(L=L.add(C),$=B),U=k(U,1),C=k(C,1)}return j=E(A,L.j(j)),new R(L,j)}for(L=m;0<=A.l(j);){for(C=Math.max(1,Math.floor(A.m()/j.m())),U=Math.ceil(Math.log(C)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=h(C),B=$.j(j);N(B)||0<B.l(A);)C-=U,$=h(C),B=$.j(j);S($)&&($=x),L=L.add($),A=E(A,B)}return new R(L,A)}t.A=function(A){return P(this,A).h},t.and=function(A){for(var j=Math.max(this.g.length,A.g.length),C=[],U=0;U<j;U++)C[U]=this.i(U)&A.i(U);return new o(C,this.h&A.h)},t.or=function(A){for(var j=Math.max(this.g.length,A.g.length),C=[],U=0;U<j;U++)C[U]=this.i(U)|A.i(U);return new o(C,this.h|A.h)},t.xor=function(A){for(var j=Math.max(this.g.length,A.g.length),C=[],U=0;U<j;U++)C[U]=this.i(U)^A.i(U);return new o(C,this.h^A.h)};function I(A){for(var j=A.g.length+1,C=[],U=0;U<j;U++)C[U]=A.i(U)<<1|A.i(U-1)>>>31;return new o(C,A.h)}function k(A,j){var C=j>>5;j%=32;for(var U=A.g.length-C,L=[],$=0;$<U;$++)L[$]=0<j?A.i($+C)>>>j|A.i($+C+1)<<32-j:A.i($+C);return new o(L,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,hF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Hd=o}).apply(typeof uI<"u"?uI:typeof self<"u"?self:typeof window<"u"?window:{});var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fF,gm,pF,sv,yT,mF,gF,xF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,D,F){return v==Array.prototype||v==Object.prototype||(v[D]=F.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof py=="object"&&py];for(var D=0;D<v.length;++D){var F=v[D];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(v,D){if(D)e:{var F=n;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var _e=v[ee];if(!(_e in F))break e;F=F[_e]}v=v[v.length-1],ee=F[v],D=D(ee),D!=ee&&D!=null&&e(F,v,{configurable:!0,writable:!0,value:D})}}function i(v,D){v instanceof String&&(v+="");var F=0,ee=!1,_e={next:function(){if(!ee&&F<v.length){var ze=F++;return{value:D(ze,v[ze]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}a("Array.prototype.values",function(v){return v||function(){return i(this,function(D,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var D=typeof v;return D=D!="object"?D:v?Array.isArray(v)?"array":D:"null",D=="array"||D=="object"&&typeof v.length=="number"}function h(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function p(v,D,F){return v.call.apply(v.bind,arguments)}function m(v,D,F){if(!v)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,ee),v.apply(D,_e)}}return function(){return v.apply(D,arguments)}}function x(v,D,F){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function y(v,D){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function S(v,D){function F(){}F.prototype=D.prototype,v.aa=D.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(ee,_e,ze){for(var yt=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)yt[sn-2]=arguments[sn];return D.prototype[_e].apply(ee,yt)}}function N(v){const D=v.length;if(0<D){const F=Array(D);for(let ee=0;ee<D;ee++)F[ee]=v[ee];return F}return[]}function w(v,D){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const _e=v.length||0,ze=ee.length||0;v.length=_e+ze;for(let yt=0;yt<ze;yt++)v[_e+yt]=ee[yt]}else v.push(ee)}}class E{constructor(D,F){this.i=D,this.j=F,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function O(v){return/^[\s\xa0]*$/.test(v)}function R(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function P(v){return P[" "](v),v}P[" "]=function(){};var I=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function k(v,D,F){for(const ee in v)D.call(F,v[ee],ee,v)}function A(v,D){for(const F in v)D.call(void 0,v[F],F,v)}function j(v){const D={};for(const F in v)D[F]=v[F];return D}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,D){let F,ee;for(let _e=1;_e<arguments.length;_e++){ee=arguments[_e];for(F in ee)v[F]=ee[F];for(let ze=0;ze<C.length;ze++)F=C[ze],Object.prototype.hasOwnProperty.call(ee,F)&&(v[F]=ee[F])}}function L(v){var D=1;v=v.split(":");const F=[];for(;0<D&&v.length;)F.push(v.shift()),D--;return v.length&&F.push(v.join(":")),F}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=ce;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class G{constructor(){this.h=this.g=null}add(D,F){const ee=K.get();ee.set(D,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var K=new E(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(D,F){this.h=D,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ne=!1,ce=new G,he=()=>{const v=c.Promise.resolve(void 0);Z=()=>{v.then(Y)}};var Y=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(F){$(F)}var D=K;D.j(v),100>D.h&&(D.h++,v.next=D.g,D.g=v)}ne=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};c.addEventListener("test",F,D),c.removeEventListener("test",F,D)}catch{}return v})();function De(v,D){if(re.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget){if(I){e:{try{P(D.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(D=null)}}else F=="mouseover"?D=v.fromElement:F=="mouseout"&&(D=v.toElement);this.relatedTarget=D,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ye[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&De.aa.h.call(this)}}S(De,re);var Ye={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),et=0;function Ne(v,D,F,ee,_e){this.listener=v,this.proxy=null,this.src=D,this.type=F,this.capture=!!ee,this.ha=_e,this.key=++et,this.da=this.fa=!1}function Ue(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function X(v){this.src=v,this.g={},this.h=0}X.prototype.add=function(v,D,F,ee,_e){var ze=v.toString();v=this.g[ze],v||(v=this.g[ze]=[],this.h++);var yt=be(v,D,ee,_e);return-1<yt?(D=v[yt],F||(D.fa=!1)):(D=new Ne(D,this.src,ze,!!ee,_e),D.fa=F,v.push(D)),D};function te(v,D){var F=D.type;if(F in v.g){var ee=v.g[F],_e=Array.prototype.indexOf.call(ee,D,void 0),ze;(ze=0<=_e)&&Array.prototype.splice.call(ee,_e,1),ze&&(Ue(D),v.g[F].length==0&&(delete v.g[F],v.h--))}}function be(v,D,F,ee){for(var _e=0;_e<v.length;++_e){var ze=v[_e];if(!ze.da&&ze.listener==D&&ze.capture==!!F&&ze.ha==ee)return _e}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Qe={};function at(v,D,F,ee,_e){if(Array.isArray(D)){for(var ze=0;ze<D.length;ze++)at(v,D[ze],F,ee,_e);return null}return F=xt(F),v&&v[rt]?v.K(D,F,h(ee)?!!ee.capture:!1,_e):kt(v,D,F,!1,ee,_e)}function kt(v,D,F,ee,_e,ze){if(!D)throw Error("Invalid event type");var yt=h(_e)?!!_e.capture:!!_e,sn=de(v);if(sn||(v[we]=sn=new X(v)),F=sn.add(D,F,ee,yt,ze),F.proxy)return F;if(ee=je(),F.proxy=ee,ee.src=v,ee.listener=F,v.addEventListener)ye||(_e=yt),_e===void 0&&(_e=!1),v.addEventListener(D.toString(),ee,_e);else if(v.attachEvent)v.attachEvent(St(D.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function je(){function v(F){return D.call(v.src,v.listener,F)}const D=bt;return v}function ct(v,D,F,ee,_e){if(Array.isArray(D))for(var ze=0;ze<D.length;ze++)ct(v,D[ze],F,ee,_e);else ee=h(ee)?!!ee.capture:!!ee,F=xt(F),v&&v[rt]?(v=v.i,D=String(D).toString(),D in v.g&&(ze=v.g[D],F=be(ze,F,ee,_e),-1<F&&(Ue(ze[F]),Array.prototype.splice.call(ze,F,1),ze.length==0&&(delete v.g[D],v.h--)))):v&&(v=de(v))&&(D=v.g[D.toString()],v=-1,D&&(v=be(D,F,ee,_e)),(F=-1<v?D[v]:null)&&Tt(F))}function Tt(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[rt])te(D.i,v);else{var F=v.type,ee=v.proxy;D.removeEventListener?D.removeEventListener(F,ee,v.capture):D.detachEvent?D.detachEvent(St(F),ee):D.addListener&&D.removeListener&&D.removeListener(ee),(F=de(D))?(te(F,v),F.h==0&&(F.src=null,D[we]=null)):Ue(v)}}}function St(v){return v in Qe?Qe[v]:Qe[v]="on"+v}function bt(v,D){if(v.da)v=!0;else{D=new De(D,this);var F=v.listener,ee=v.ha||v.src;v.fa&&Tt(v),v=F.call(ee,D)}return v}function de(v){return v=v[we],v instanceof X?v:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(v){return typeof v=="function"?v:(v[He]||(v[He]=function(D){return v.handleEvent(D)}),v[He])}function Ge(){ae.call(this),this.i=new X(this),this.M=this,this.F=null}S(Ge,ae),Ge.prototype[rt]=!0,Ge.prototype.removeEventListener=function(v,D,F,ee){ct(this,v,D,F,ee)};function Je(v,D){var F,ee=v.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(v=v.M,ee=D.type||D,typeof D=="string")D=new re(D,v);else if(D instanceof re)D.target=D.target||v;else{var _e=D;D=new re(ee,v),U(D,_e)}if(_e=!0,F)for(var ze=F.length-1;0<=ze;ze--){var yt=D.g=F[ze];_e=Et(yt,ee,!0,D)&&_e}if(yt=D.g=v,_e=Et(yt,ee,!0,D)&&_e,_e=Et(yt,ee,!1,D)&&_e,F)for(ze=0;ze<F.length;ze++)yt=D.g=F[ze],_e=Et(yt,ee,!1,D)&&_e}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var v=this.i,D;for(D in v.g){for(var F=v.g[D],ee=0;ee<F.length;ee++)Ue(F[ee]);delete v.g[D],v.h--}}this.F=null},Ge.prototype.K=function(v,D,F,ee){return this.i.add(String(v),D,!1,F,ee)},Ge.prototype.L=function(v,D,F,ee){return this.i.add(String(v),D,!0,F,ee)};function Et(v,D,F,ee){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();for(var _e=!0,ze=0;ze<D.length;++ze){var yt=D[ze];if(yt&&!yt.da&&yt.capture==F){var sn=yt.listener,_a=yt.ha||yt.src;yt.fa&&te(v.i,yt),_e=sn.call(_a,ee)!==!1&&_e}}return _e&&!ee.defaultPrevented}function Nt(v,D,F){if(typeof v=="function")F&&(v=x(v,F));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:c.setTimeout(v,D||0)}function dr(v){v.g=Nt(()=>{v.g=null,v.i&&(v.i=!1,dr(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class ge extends ae{constructor(D,F){super(),this.m=D,this.l=F,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(v){ae.call(this),this.h=v,this.g={}}S(nt,ae);var jt=[];function Bt(v){k(v.g,function(D,F){this.g.hasOwnProperty(F)&&Tt(D)},v),v.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Bt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,tt=c.JSON.parse,tr=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Le(){}Le.prototype.h=null;function it(v){return v.h||(v.h=v.i())}function dt(){}var Pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vt(){re.call(this,"d")}S(Vt,re);function qt(){re.call(this,"c")}S(qt,re);var Ct={},Fr=null;function un(){return Fr=Fr||new Ge}Ct.La="serverreachability";function Jr(v){re.call(this,Ct.La,v)}S(Jr,re);function qr(v){const D=un();Je(D,new Jr(D))}Ct.STAT_EVENT="statevent";function gn(v,D){re.call(this,Ct.STAT_EVENT,v),this.stat=D}S(gn,re);function gr(v){const D=un();Je(D,new gn(D,v))}Ct.Ma="timingevent";function ba(v,D){re.call(this,Ct.Ma,v),this.size=D}S(ba,re);function xn(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},D)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function oi(v,D,F,ee,_e,ze){v.info(function(){if(v.g)if(ze)for(var yt="",sn=ze.split("&"),_a=0;_a<sn.length;_a++){var Tr=sn[_a].split("=");if(1<Tr.length){var Qa=Tr[0];Tr=Tr[1];var Xa=Qa.split("_");yt=2<=Xa.length&&Xa[1]=="type"?yt+(Qa+"="+Tr+"&"):yt+(Qa+"=redacted&")}}else yt=null;else yt=ze;return"XMLHTTP REQ ("+ee+") [attempt "+_e+"]: "+D+`
`+F+`
`+yt})}function Or(v,D,F,ee,_e,ze,yt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+_e+"]: "+D+`
`+F+`
`+ze+" "+yt})}function yn(v,D,F,ee){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+Yn(v,F)+(ee?" "+ee:"")})}function li(v,D){v.info(function(){return"TIMEOUT: "+D})}Rn.prototype.info=function(){};function Yn(v,D){if(!v.g)return D;if(!D)return null;try{var F=JSON.parse(D);if(F){for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var ee=F[v];if(!(2>ee.length)){var _e=ee[1];if(Array.isArray(_e)&&!(1>_e.length)){var ze=_e[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var yt=1;yt<_e.length;yt++)_e[yt]=""}}}}return $t(F)}catch{return D}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function ci(){}S(ci,Le),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},En=new ci;function Ka(v,D,F,ee){this.j=v,this.i=D,this.l=F,this.R=ee||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ki}function ki(){this.i=null,this.g="",this.h=!1}var hs={},wi={};function Ot(v,D,F){v.L=1,v.v=Re(Rt(D)),v.m=F,v.P=!0,fe(v,null)}function fe(v,D){v.F=Date.now(),nr(v),v.A=Rt(v.v);var F=v.A,ee=v.R;Array.isArray(ee)||(ee=[String(ee)]),$s(F.i,"t",ee),v.C=0,F=v.j.J,v.h=new ki,v.g=i1(v.j,F?D:null,!v.m),0<v.O&&(v.M=new ge(x(v.Y,v,v.g),v.O)),D=v.U,F=v.g,ee=v.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(jt[0]=_e.toString()),_e=jt);for(var ze=0;ze<_e.length;ze++){var yt=at(F,_e[ze],ee||D.handleEvent,!1,D.h||D);if(!yt)break;D.g[yt.key]=yt}D=v.H?j(v.H):{},v.m?(v.u||(v.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,D)):(v.u="GET",v.g.ea(v.A,v.u,null,D)),qr(),oi(v.i,v.u,v.A,v.l,v.R,v.m)}Ka.prototype.ca=function(v){v=v.target;const D=this.M;D&&Ci(v)==3?D.j():this.Y(v)},Ka.prototype.Y=function(v){try{if(v==this.g)e:{const Xa=Ci(this.g);var D=this.g.Ba();const Ic=this.g.Z();if(!(3>Xa)&&(Xa!=3||this.g&&(this.h.h||this.g.oa()||ed(this.g)))){this.J||Xa!=4||D==7||(D==8||0>=Ic?qr(3):qr(2)),dn(this);var F=this.g.Z();this.X=F;t:if(st(this)){var ee=ed(this.g);v="";var _e=ee.length,ze=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),Zr(this);var yt="";break t}this.h.i=new c.TextDecoder}for(D=0;D<_e;D++)this.h.h=!0,v+=this.h.i.decode(ee[D],{stream:!(ze&&D==_e-1)});ee.length=0,this.h.g+=v,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=F==200,Or(this.i,this.u,this.A,this.l,this.R,Xa,F),this.o){if(this.T&&!this.K){t:{if(this.g){var sn,_a=this.g;if((sn=_a.g?_a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(sn)){var Tr=sn;break t}}Tr=null}if(F=Tr)yn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pr(this,F);else{this.o=!1,this.s=3,gr(12),bn(this),Zr(this);break e}}if(this.P){F=!0;let Hi;for(;!this.J&&this.C<yt.length;)if(Hi=pt(this,yt),Hi==wi){Xa==4&&(this.s=4,gr(14),F=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Hi==hs){this.s=4,gr(15),yn(this.i,this.l,yt,"[Invalid Chunk]"),F=!1;break}else yn(this.i,this.l,Hi,null),Pr(this,Hi);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xa!=4||yt.length!=0||this.h.h||(this.s=1,gr(16),F=!1),this.o=this.o&&F,!F)yn(this.i,this.l,yt,"[Invalid Chunked Response]"),bn(this),Zr(this);else if(0<yt.length&&!this.W){this.W=!0;var Qa=this.j;Qa.g==this&&Qa.ba&&!Qa.M&&(Qa.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),up(Qa),Qa.M=!0,gr(11))}}else yn(this.i,this.l,yt,null),Pr(this,yt);Xa==4&&bn(this),this.o&&!this.J&&(Xa==4?r1(this.j,this):(this.o=!1,nr(this)))}else Xx(this.g),F==400&&0<yt.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),bn(this),Zr(this)}}}catch{}finally{}};function st(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function pt(v,D){var F=v.C,ee=D.indexOf(`
`,F);return ee==-1?wi:(F=Number(D.substring(F,ee)),isNaN(F)?hs:(ee+=1,ee+F>D.length?wi:(D=D.slice(ee,ee+F),v.C=ee+F,D)))}Ka.prototype.cancel=function(){this.J=!0,bn(this)};function nr(v){v.S=Date.now()+v.I,vr(v,v.I)}function vr(v,D){if(v.B!=null)throw Error("WatchDog timer not null");v.B=xn(x(v.ba,v),D)}function dn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ka.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(li(this.i,this.A),this.L!=2&&(qr(),gr(17)),bn(this),this.s=2,Zr(this)):vr(this,this.S-v)};function Zr(v){v.j.G==0||v.J||r1(v.j,v)}function bn(v){dn(v);var D=v.M;D&&typeof D.ma=="function"&&D.ma(),v.M=null,Bt(v.U),v.g&&(D=v.g,v.g=null,D.abort(),D.ma())}function Pr(v,D){try{var F=v.j;if(F.G!=0&&(F.g==v||ps(F.h,v))){if(!v.K&&ps(F.h,v)&&F.G==3){try{var ee=F.Da.g.parse(D)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var _e=ee;if(_e[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<v.F)Cc(F),kc(F);else break e;cp(F),gr(18)}}else F.za=_e[1],0<F.za-F.T&&37500>_e[2]&&F.F&&F.v==0&&!F.C&&(F.C=xn(x(F.Za,F),6e3));if(1>=yl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else bl(F,11)}else if((v.K||F.g==v)&&Cc(F),!O(D))for(_e=F.Da.g.parse(D),D=0;D<_e.length;D++){let Tr=_e[D];if(F.T=Tr[0],Tr=Tr[1],F.G==2)if(Tr[0]=="c"){F.K=Tr[1],F.ia=Tr[2];const Qa=Tr[3];Qa!=null&&(F.la=Qa,F.j.info("VER="+F.la));const Xa=Tr[4];Xa!=null&&(F.Aa=Xa,F.j.info("SVER="+F.Aa));const Ic=Tr[5];Ic!=null&&typeof Ic=="number"&&0<Ic&&(ee=1.5*Ic,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Hi=v.g;if(Hi){const nd=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nd){var ze=ee.h;ze.g||nd.indexOf("spdy")==-1&&nd.indexOf("quic")==-1&&nd.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(ms(ze,ze.h),ze.h=null))}if(ee.D){const wl=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(ee.ya=wl,xe(ee.I,ee.D,wl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var yt=v;if(ee.qa=a1(ee,ee.J?ee.ia:null,ee.W),yt.K){Pa(ee.h,yt);var sn=yt,_a=ee.L;_a&&(sn.I=_a),sn.B&&(dn(sn),nr(sn)),ee.g=yt}else e1(ee);0<F.i.length&&R0(F)}else Tr[0]!="stop"&&Tr[0]!="close"||bl(F,7);else F.G==3&&(Tr[0]=="stop"||Tr[0]=="close"?Tr[0]=="stop"?bl(F,7):op(F):Tr[0]!="noop"&&F.l&&F.l.ta(Tr),F.v=0)}}qr(4)}catch{}}var Ls=class{constructor(v,D){this.g=v,this.map=D}};function fs(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function po(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function yl(v){return v.h?1:v.g?v.g.size:0}function ps(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function ms(v,D){v.g?v.g.add(D):v.h=D}function Pa(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}fs.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function wa(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const F of v.g.values())D=D.concat(F.D);return D}return N(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var D=[],F=v.length,ee=0;ee<F;ee++)D.push(v[ee]);return D}D=[],F=0;for(ee in v)D[F++]=v[ee];return D}function ve(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var D=[];v=v.length;for(var F=0;F<v;F++)D.push(F);return D}D=[],F=0;for(const ee in v)D[F++]=ee;return D}}}function Te(v,D){if(v.forEach&&typeof v.forEach=="function")v.forEach(D,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,D,void 0);else for(var F=ve(v),ee=q(v),_e=ee.length,ze=0;ze<_e;ze++)D.call(void 0,ee[ze],F&&F[ze],v)}var Ae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(v,D){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var ee=v[F].indexOf("="),_e=null;if(0<=ee){var ze=v[F].substring(0,ee);_e=v[F].substring(ee+1)}else ze=v[F];D(ze,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function zt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof zt){this.h=v.h,ar(this,v.j),this.o=v.o,this.g=v.g,Er(this,v.s),this.l=v.l;var D=v.i,F=new Na;F.i=D.i,D.g&&(F.g=new Map(D.g),F.h=D.h),le(this,F),this.m=v.m}else v&&(D=String(v).match(Ae))?(this.h=!1,ar(this,D[1]||"",!0),this.o=Ve(D[2]||""),this.g=Ve(D[3]||"",!0),Er(this,D[4]),this.l=Ve(D[5]||"",!0),le(this,D[6]||"",!0),this.m=Ve(D[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}zt.prototype.toString=function(){var v=[],D=this.j;D&&v.push(Fe(D,Zt,!0),":");var F=this.g;return(F||D=="file")&&(v.push("//"),(D=this.o)&&v.push(Fe(D,Zt,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&v.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(Fe(F,F.charAt(0)=="/"?ua:Mn,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",Fe(F,Sa)),v.join("")};function Rt(v){return new zt(v)}function ar(v,D,F){v.j=F?Ve(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function Er(v,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);v.s=D}else v.s=null}function le(v,D,F){D instanceof Na?(v.i=D,Wx(v.i,v.h)):(F||(D=Fe(D,Bs)),v.i=new Na(D,v.h))}function xe(v,D,F){v.i.set(D,F)}function Re(v){return xe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Ve(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Fe(v,D,F){return typeof v=="string"?(v=encodeURI(v).replace(D,hr),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function hr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Zt=/[#\/\?@]/g,Mn=/[#\?:]/g,ua=/[#\?]/g,Bs=/[#\?@]/g,Sa=/#/g;function Na(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function Dn(v){v.g||(v.g=new Map,v.h=0,v.i&&gt(v.i,function(D,F){v.add(decodeURIComponent(D.replace(/\+/g," ")),F)}))}t=Na.prototype,t.add=function(v,D){Dn(this),this.i=null,v=gs(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(D),this.h+=1,this};function Nr(v,D){Dn(v),D=gs(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function Lo(v,D){return Dn(v),D=gs(v,D),v.g.has(D)}t.forEach=function(v,D){Dn(this),this.g.forEach(function(F,ee){F.forEach(function(_e){v.call(D,_e,ee,this)},this)},this)},t.na=function(){Dn(this);const v=Array.from(this.g.values()),D=Array.from(this.g.keys()),F=[];for(let ee=0;ee<D.length;ee++){const _e=v[ee];for(let ze=0;ze<_e.length;ze++)F.push(D[ee])}return F},t.V=function(v){Dn(this);let D=[];if(typeof v=="string")Lo(this,v)&&(D=D.concat(this.g.get(gs(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)D=D.concat(v[F])}return D},t.set=function(v,D){return Dn(this),this.i=null,v=gs(this,v),Lo(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},t.get=function(v,D){return v?(v=this.V(v),0<v.length?String(v[0]):D):D};function $s(v,D,F){Nr(v,D),0<F.length&&(v.i=null,v.g.set(gs(v,D),N(F)),v.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(var F=0;F<D.length;F++){var ee=D[F];const ze=encodeURIComponent(String(ee)),yt=this.V(ee);for(ee=0;ee<yt.length;ee++){var _e=ze;yt[ee]!==""&&(_e+="="+encodeURIComponent(String(yt[ee]))),v.push(_e)}}return this.i=v.join("&")};function gs(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function Wx(v,D){D&&!v.j&&(Dn(v),v.i=null,v.g.forEach(function(F,ee){var _e=ee.toLowerCase();ee!=_e&&(Nr(this,ee),$s(this,_e,F))},v)),v.j=D}function ip(v,D){const F=new Rn;if(c.Image){const ee=new Image;ee.onload=y(qi,F,"TestLoadImage: loaded",!0,D,ee),ee.onerror=y(qi,F,"TestLoadImage: error",!1,D,ee),ee.onabort=y(qi,F,"TestLoadImage: abort",!1,D,ee),ee.ontimeout=y(qi,F,"TestLoadImage: timeout",!1,D,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else D(!1)}function Kx(v,D){const F=new Rn,ee=new AbortController,_e=setTimeout(()=>{ee.abort(),qi(F,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:ee.signal}).then(ze=>{clearTimeout(_e),ze.ok?qi(F,"TestPingServer: ok",!0,D):qi(F,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(_e),qi(F,"TestPingServer: error",!1,D)})}function qi(v,D,F,ee,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),ee(F)}catch{}}function mo(){this.g=new tr}function sp(v,D,F){const ee=F||"";try{Te(v,function(_e,ze){let yt=_e;h(_e)&&(yt=$t(_e)),D.push(ee+ze+"="+encodeURIComponent(yt))})}catch(_e){throw D.push(ee+"type="+encodeURIComponent("_badmap")),_e}}function Bo(v){this.l=v.Ub||null,this.j=v.eb||!1}S(Bo,Le),Bo.prototype.g=function(){return new xs(this.l,this.j)},Bo.prototype.i=(function(v){return function(){return v}})({});function xs(v,D){Ge.call(this),this.D=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(xs,Ge),t=xs.prototype,t.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=D,this.readyState=1,Tc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(D.body=v),(this.D||c).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Tc(this)),this.g&&(this.readyState=3,Tc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;O0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function O0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?$o(this):Tc(this),this.readyState==3&&O0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,$o(this))},t.Qa=function(v){this.g&&(this.response=v,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Tc(v)}t.setRequestHeader=function(v,D){this.u.append(v,D)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var F=D.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=D.next();return v.join(`\r
`)};function Tc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ju(v){let D="";return k(v,function(F,ee){D+=ee,D+=":",D+=F,D+=`\r
`}),D}function jc(v,D,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=Ju(F),typeof v=="string"?F!=null&&encodeURIComponent(String(F)):xe(v,D,F))}function $n(v){Ge.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S($n,Ge);var Si=/^https?$/i,vl=["POST","PUT"];t=$n.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,D,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?it(this.o):it(En),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(ze){Zu(this,ze);return}if(v=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var _e in ee)F.set(_e,ee[_e]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const ze of ee.keys())F.set(ze,ee.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find(ze=>ze.toLowerCase()=="content-type"),_e=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(vl,D,void 0))||ee||_e||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,yt]of F)this.g.setRequestHeader(ze,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I0(this),this.u=!0,this.g.send(v),this.u=!1}catch(ze){Zu(this,ze)}};function Zu(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.m=5,Ac(v),Ec(v)}function Ac(v){v.A||(v.A=!0,Je(v,"complete"),Je(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Je(this,"complete"),Je(this,"abort"),Ec(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ec(this,!0)),$n.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qx(this):this.bb())},t.bb=function(){Qx(this)};function Qx(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Ci(v)!=4||v.Z()!=2)){if(v.u&&Ci(v)==4)Nt(v.Ea,0,v);else if(Je(v,"readystatechange"),Ci(v)==4){v.h=!1;try{const yt=v.Z();e:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var F;if(!(F=D)){var ee;if(ee=yt===0){var _e=String(v.D).match(Ae)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),ee=!Si.test(_e?_e.toLowerCase():"")}F=ee}if(F)Je(v,"complete"),Je(v,"success");else{v.m=6;try{var ze=2<Ci(v)?v.g.statusText:""}catch{ze=""}v.l=ze+" ["+v.Z()+"]",Ac(v)}}finally{Ec(v)}}}}function Ec(v,D){if(v.g){I0(v);const F=v.g,ee=v.v[0]?()=>{}:null;v.g=null,v.v=null,D||Je(v,"ready");try{F.onreadystatechange=ee}catch{}}}function I0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ci(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),tt(D)}};function ed(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Xx(v){const D={};v=(v.g&&2<=Ci(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(O(v[ee]))continue;var F=L(v[ee]);const _e=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const ze=D[_e]||[];D[_e]=ze,ze.push(F)}A(D,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function td(v,D,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||D}function Yx(v){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=td("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=td("baseRetryDelayMs",5e3,v),this.cb=td("retryDelaySeedMs",1e4,v),this.Wa=td("forwardChannelMaxRetries",2,v),this.wa=td("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(v&&v.concurrentRequestLimit),this.Da=new mo,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yx.prototype,t.la=8,t.G=1,t.connect=function(v,D,F,ee){gr(0),this.W=v,this.H=D||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=a1(this,null,this.W),R0(this)};function op(v){if(Jx(v),v.G==3){var D=v.U++,F=Rt(v.I);if(xe(F,"SID",v.K),xe(F,"RID",D),xe(F,"TYPE","terminate"),rd(v,F),D=new Ka(v,v.j,D),D.L=2,D.v=Re(Rt(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(D.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=D.v,F=!0),F||(D.g=i1(D.j,null),D.g.ea(D.v)),D.F=Date.now(),nr(D)}dp(v)}function kc(v){v.g&&(up(v),v.g.cancel(),v.g=null)}function Jx(v){kc(v),v.u&&(c.clearTimeout(v.u),v.u=null),Cc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function R0(v){if(!po(v.h)&&!v.s){v.s=!0;var D=v.Ga;Z||he(),ne||(Z(),ne=!0),ce.add(D,v),v.B=0}}function Zw(v,D){return yl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=D.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=xn(x(v.Ga,v,D),n1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const _e=new Ka(this,this.j,v);let ze=this.o;if(this.S&&(ze?(ze=j(ze),U(ze,this.S)):ze=this.S),this.m!==null||this.O||(_e.H=ze,ze=null),this.P)e:{for(var D=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(D+=ee,4096<D){D=F;break e}if(D===4096||F===this.i.length-1){D=F+1;break e}}D=1e3}else D=1e3;D=lp(this,_e,D),F=Rt(this.I),xe(F,"RID",v),xe(F,"CVER",22),this.D&&xe(F,"X-HTTP-Session-Id",this.D),rd(this,F),ze&&(this.O?D="headers="+encodeURIComponent(String(Ju(ze)))+"&"+D:this.m&&jc(F,this.m,ze)),ms(this.h,_e),this.Ua&&xe(F,"TYPE","init"),this.P?(xe(F,"$req",D),xe(F,"SID","null"),_e.T=!0,Ot(_e,F,null)):Ot(_e,F,D),this.G=2}}else this.G==3&&(v?Zx(this,v):this.i.length==0||po(this.h)||Zx(this))};function Zx(v,D){var F;D?F=D.l:F=v.U++;const ee=Rt(v.I);xe(ee,"SID",v.K),xe(ee,"RID",F),xe(ee,"AID",v.T),rd(v,ee),v.m&&v.o&&jc(ee,v.m,v.o),F=new Ka(v,v.j,F,v.B+1),v.m===null&&(F.H=v.o),D&&(v.i=D.D.concat(v.i)),D=lp(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),ms(v.h,F),Ot(F,ee,D)}function rd(v,D){v.H&&k(v.H,function(F,ee){xe(D,ee,F)}),v.l&&Te({},function(F,ee){xe(D,ee,F)})}function lp(v,D,F){F=Math.min(v.i.length,F);var ee=v.l?x(v.l.Na,v.l,v):null;e:{var _e=v.i;let ze=-1;for(;;){const yt=["count="+F];ze==-1?0<F?(ze=_e[0].g,yt.push("ofs="+ze)):ze=0:yt.push("ofs="+ze);let sn=!0;for(let _a=0;_a<F;_a++){let Tr=_e[_a].g;const Qa=_e[_a].map;if(Tr-=ze,0>Tr)ze=Math.max(0,_e[_a].g-100),sn=!1;else try{sp(Qa,yt,"req"+Tr+"_")}catch{ee&&ee(Qa)}}if(sn){ee=yt.join("&");break e}}}return v=v.i.splice(0,F),D.D=v,ee}function e1(v){if(!v.g&&!v.u){v.Y=1;var D=v.Fa;Z||he(),ne||(Z(),ne=!0),ce.add(D,v),v.v=0}}function cp(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=xn(x(v.Fa,v),n1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,t1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=xn(x(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),kc(this),t1(this))};function up(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function t1(v){v.g=new Ka(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var D=Rt(v.qa);xe(D,"RID","rpc"),xe(D,"SID",v.K),xe(D,"AID",v.T),xe(D,"CI",v.F?"0":"1"),!v.F&&v.ja&&xe(D,"TO",v.ja),xe(D,"TYPE","xmlhttp"),rd(v,D),v.m&&v.o&&jc(D,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=Re(Rt(D)),F.m=null,F.P=!0,fe(F,v)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),cp(this),gr(19))};function Cc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function r1(v,D){var F=null;if(v.g==D){Cc(v),up(v),v.g=null;var ee=2}else if(ps(v.h,D))F=D.D,Pa(v.h,D),ee=1;else return;if(v.G!=0){if(D.o)if(ee==1){F=D.m?D.m.length:0,D=Date.now()-D.F;var _e=v.B;ee=un(),Je(ee,new ba(ee,F)),R0(v)}else e1(v);else if(_e=D.s,_e==3||_e==0&&0<D.X||!(ee==1&&Zw(v,D)||ee==2&&cp(v)))switch(F&&0<F.length&&(D=v.h,D.i=D.i.concat(F)),_e){case 1:bl(v,5);break;case 4:bl(v,10);break;case 3:bl(v,6);break;default:bl(v,2)}}}function n1(v,D){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*D}function bl(v,D){if(v.j.info("Error code "+D),D==2){var F=x(v.fb,v),ee=v.Xa;const _e=!ee;ee=new zt(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ar(ee,"https"),Re(ee),_e?ip(ee.toString(),F):Kx(ee.toString(),F)}else gr(2);v.G=0,v.l&&v.l.sa(D),dp(v),Jx(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function dp(v){if(v.G=0,v.ka=[],v.l){const D=wa(v.h);(D.length!=0||v.i.length!=0)&&(w(v.ka,D),w(v.ka,v.i),v.h.i.length=0,N(v.i),v.i.length=0),v.l.ra()}}function a1(v,D,F){var ee=F instanceof zt?Rt(F):new zt(F);if(ee.g!="")D&&(ee.g=D+"."+ee.g),Er(ee,ee.s);else{var _e=c.location;ee=_e.protocol,D=D?D+"."+_e.hostname:_e.hostname,_e=+_e.port;var ze=new zt(null);ee&&ar(ze,ee),D&&(ze.g=D),_e&&Er(ze,_e),F&&(ze.l=F),ee=ze}return F=v.D,D=v.ya,F&&D&&xe(ee,F,D),xe(ee,"VER",v.la),rd(v,ee),ee}function i1(v,D,F){if(D&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Ca&&!v.pa?new $n(new Bo({eb:F})):new $n(v.pa),D.Ha(v.J),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function s1(){}t=s1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function M0(){}M0.prototype.g=function(v,D){return new Oi(v,D)};function Oi(v,D){Ge.call(this),this.g=new Yx(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(v?v["X-WebChannel-Client-Profile"]=D.va:v={"X-WebChannel-Client-Profile":D.va}),this.g.S=v,(v=D&&D.Sb)&&!O(v)&&(this.g.m=v),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!O(D)&&(this.g.D=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new Oc(this)}S(Oi,Ge),Oi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Oi.prototype.close=function(){op(this.g)},Oi.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.u&&(F={},F.__data__=$t(v),v=F);D.i.push(new Ls(D.Ya++,v)),D.G==3&&R0(D)},Oi.prototype.N=function(){this.g.l=null,delete this.j,op(this.g),delete this.g,Oi.aa.N.call(this)};function o1(v){Vt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const F in D){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}S(o1,Vt);function l1(){qt.call(this),this.status=1}S(l1,qt);function Oc(v){this.g=v}S(Oc,s1),Oc.prototype.ua=function(){Je(this.g,"a")},Oc.prototype.ta=function(v){Je(this.g,new o1(v))},Oc.prototype.sa=function(v){Je(this.g,new l1)},Oc.prototype.ra=function(){Je(this.g,"b")},M0.prototype.createWebChannel=M0.prototype.g,Oi.prototype.send=Oi.prototype.o,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,xF=function(){return new M0},gF=function(){return un()},mF=Ct,yT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,sv=an,vn.COMPLETE="complete",pF=vn,dt.EventType=Pt,Pt.OPEN="a",Pt.CLOSE="b",Pt.ERROR="c",Pt.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,gm=dt,$n.prototype.listenOnce=$n.prototype.L,$n.prototype.getLastError=$n.prototype.Ka,$n.prototype.getLastErrorCode=$n.prototype.Ba,$n.prototype.getStatus=$n.prototype.Z,$n.prototype.getResponseJson=$n.prototype.Oa,$n.prototype.getResponseText=$n.prototype.oa,$n.prototype.send=$n.prototype.ea,$n.prototype.setWithCredentials=$n.prototype.Ha,fF=$n}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});const dI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new VA("@firebase/firestore");function vh(){return Xd.logLevel}function lt(t,...e){if(Xd.logLevel<=Mr.DEBUG){const r=e.map(r8);Xd.debug(`Firestore (${Pf}): ${t}`,...r)}}function ma(t,...e){if(Xd.logLevel<=Mr.ERROR){const r=e.map(r8);Xd.error(`Firestore (${Pf}): ${t}`,...r)}}function Ym(t,...e){if(Xd.logLevel<=Mr.WARN){const r=e.map(r8);Xd.warn(`Firestore (${Pf}): ${t}`,...r)}}function r8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t="Unexpected state"){const e=`FIRESTORE (${Pf}) INTERNAL ASSERTION FAILED: `+t;throw ma(e),new Error(e)}function Ft(t,e){t||Mt()}function Ut(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Ro{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ire{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ji.UNAUTHENTICATED)))}shutdown(){}}class Rre{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ft(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Co,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Co)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ft(typeof n.accessToken=="string"),new Ore(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ft(e===null||typeof e=="string"),new ji(e)}}class Mre{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Mre(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ji.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Pre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ft(this.o===void 0);const n=i=>{i.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,lt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Ft(typeof r.token=="string"),this.R=r.token,new Pre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Bre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function mr(t,e){return t<e?-1:t>e?1:0}function Gh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function vF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new mt(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new mt(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new mt(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mt(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ra.fromMillis(Date.now())}static fromDate(e){return ra.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ra(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new ra(0,0))}static max(){return new Wt(new ra(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Mt(),n===void 0?n=e.length-r:n>e.length-r&&Mt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Jm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Jm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Kr extends Jm{construct(e,r,n){return new Kr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new mt(qe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Kr(r)}static emptyPath(){return new Kr([])}}const $re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ta extends Jm{construct(e,r,n){return new ta(e,r,n)}static isValidIdentifier(e){return $re.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ta.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ta(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new mt(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new mt(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new mt(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new mt(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ta(r)}static emptyPath(){return new ta([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Kr.fromString(e))}static fromName(e){return new _t(Kr.fromString(e).popFirst(5))}static empty(){return new _t(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Kr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Kr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function vT(t){return t.fields.find((e=>e.kind===2))}function Ed(t){return t.fields.filter((e=>e.kind!==2))}kv.UNKNOWN_ID=-1;class ov{constructor(e,r){this.fieldPath=e,this.kind=r}}class Zm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Zm(0,Ms.min())}}function bF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Wt.fromTimestamp(n===1e9?new ra(r+1,0):new ra(r,n));return new Ms(a,_t.empty(),e)}function wF(t){return new Ms(t.readTime,t.key,-1)}class Ms{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ms(Wt.min(),_t.empty(),-1)}static max(){return new Ms(Wt.max(),_t.empty(),-1)}}function n8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_t.comparator(t.documentKey,e.documentKey),r!==0?r:mr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){if(t.code!==qe.FAILED_PRECONDITION||t.message!==SF)throw t;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ie(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ie?r:Ie.resolve(r)}catch(r){return Ie.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.reject(r)}static resolve(e){return new Ie(((r,n)=>{r(e)}))}static reject(e){return new Ie(((r,n)=>{n(e)}))}static waitFor(e){return new Ie(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Ie.resolve(!1);for(const n of e)r=r.next((a=>a?Ie.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Ie(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new Ie(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Co,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Tm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=a8(n.target.error);this.V.reject(new Tm(e,a))}}static open(e,r,n,a){try{return new w2(r,e.transaction(a,n))}catch(i){throw new Tm(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Ure(r)}}class Au{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Au.S(qa())===12.2&&ma("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return lt("SimpleDb","Removing database:",e),Od(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!kV())return!1;if(Au.v())return!0;const e=qa(),r=Au.S(e),n=0<r&&r<10,a=_F(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(lt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new Tm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new mt(qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new mt(qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Tm(e,o))},a.onupgradeneeded=i=>{lt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{lt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=w2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Ie.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(lt("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _F(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class zre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Od(this.B.delete())}}class Tm extends mt{constructor(e,r){super(qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Fu(t){return t.name==="IndexedDbTransactionError"}class Ure{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(lt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Od(n)}add(e){return lt("SimpleDb","ADD",this.store.name,e,e),Od(this.store.add(e))}get(e){return Od(this.store.get(e)).next((r=>(r===void 0&&(r=null),lt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return lt("SimpleDb","DELETE",this.store.name,e),Od(this.store.delete(e))}count(){return lt("SimpleDb","COUNT",this.store.name),Od(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Ie(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ie(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){lt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ie(((n,a)=>{r.onerror=i=>{const o=a8(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Ie(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new zre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Ie){const p=h.catch((m=>(d.done(),Ie.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Ie.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Od(t){return new Ie(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=a8(n.target.error);r(a)}}))}let hI=!1;function a8(t){const e=Au.S(qa());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hI||(hI=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Vre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){lt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{lt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Fu(r)?lt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Vu(r)}await this.X(6e4)}))}}class Fre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Ie.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return lt("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(lt("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=wF(i);n8(o,n)>0&&(n=o)})),new Ms(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ns.oe=-1;function dx(t){return t==null}function eg(t){return t===0&&1/t==-1/0}function TF(t){return typeof t=="number"&&Number.isInteger(t)&&!eg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=fI(e)),e=qre(t.get(r),e);return fI(e)}function qre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function fI(t){return t+""}function Qo(t){const e=t.length;if(Ft(e>=2),e===2)return Ft(t.charAt(0)===""&&t.charAt(1)===""),Kr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&Mt(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:Mt()}i=o+2}return new Kr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){return[t,zi(e)]}function jF(t,e,r){return[t,zi(e),r]}const Hre={},Gre=["prefixPath","collectionGroup","readTime","documentId"],Wre=["prefixPath","collectionGroup","documentId"],Kre=["collectionGroup","readTime","prefixPath","documentId"],Qre=["canonicalId","targetId"],Xre=["targetId","path"],Yre=["path","targetId"],Jre=["collectionId","parent"],Zre=["indexId","uid"],ene=["uid","sequenceNumber"],tne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rne=["indexId","uid","orderedDocumentKey"],nne=["userId","collectionPath","documentId"],ane=["userId","collectionPath","largestBatchId"],ine=["userId","collectionGroup","largestBatchId"],AF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sne=[...AF,"documentOverlays"],EF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kF=EF,i8=[...kF,"indexConfiguration","indexState","indexEntries"],one=i8,lne=[...i8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends NF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ga(t,e){const r=Ut(t);return Au.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function w0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function CF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,r){this.comparator=e,this.root=r||gi.EMPTY}insert(e,r){return new Bn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new my(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new my(this.root,e,this.comparator,!1)}getReverseIterator(){return new my(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new my(this.root,e,this.comparator,!0)}}class my{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??gi.RED,this.left=a??gi.EMPTY,this.right=i??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new gi(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return gi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1;gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new gi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new gI(this.data.getIterator())}getIteratorFrom(e){return new gI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new jn(this.comparator);return r.data=e,r}}class gI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ch(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(ta.comparator)}static empty(){return new as([])}unionWith(e){let r=new jn(ta.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new as(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new OF("Invalid base64 string: "+i):i}})(e);return new va(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new va(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}va.EMPTY_BYTE_STRING=new va("");const cne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(t){if(Ft(!!t),typeof t=="string"){let e=0;const r=cne.exec(t);if(Ft(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Gn(t.seconds),nanos:Gn(t.nanos)}}function Gn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mu(t){return typeof t=="string"?va.fromBase64String(t):va.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function o8(t){const e=t.mapValue.fields.__previous_value__;return s8(e)?o8(e):e}function tg(t){const e=uc(t.mapValue.fields.__local_write_time__.timestampValue);return new ra(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Yd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Yd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cv={nullValue:"NULL_VALUE"};function Jd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s8(t)?4:IF(t)?9007199254740991:S2(t)?10:11:Mt()}function il(t,e){if(t===e)return!0;const r=Jd(t);if(r!==Jd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tg(t).isEqual(tg(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=uc(a.timestampValue),c=uc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Mu(a.bytesValue).isEqual(Mu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Gn(a.geoPointValue.latitude)===Gn(i.geoPointValue.latitude)&&Gn(a.geoPointValue.longitude)===Gn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Gn(a.integerValue)===Gn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Gn(a.doubleValue),c=Gn(i.doubleValue);return o===c?eg(o)===eg(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Gh(t.arrayValue.values||[],e.arrayValue.values||[],il);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(mI(o)!==mI(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!il(o[d],c[d])))return!1;return!0})(t,e);default:return Mt()}}function rg(t,e){return(t.values||[]).find((r=>il(r,e)))!==void 0}function Du(t,e){if(t===e)return 0;const r=Jd(t),n=Jd(e);if(r!==n)return mr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return mr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Gn(i.integerValue||i.doubleValue),d=Gn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return xI(t.timestampValue,e.timestampValue);case 4:return xI(tg(t),tg(e));case 5:return mr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Mu(i),d=Mu(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=mr(c[h],d[h]);if(p!==0)return p}return mr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=mr(Gn(i.latitude),Gn(o.latitude));return c!==0?c:mr(Gn(i.longitude),Gn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return yI(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},x=o.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(d=x.value)===null||d===void 0?void 0:d.arrayValue,N=mr(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:yI(y,S)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gu.mapValue&&o===gu.mapValue)return 0;if(i===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=mr(d[m],p[m]);if(x!==0)return x;const y=Du(c[d[m]],h[p[m]]);if(y!==0)return y}return mr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Mt()}}function xI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mr(t,e);const r=uc(t),n=uc(e),a=mr(r.seconds,n.seconds);return a!==0?a:mr(r.nanos,n.nanos)}function yI(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Du(r[a],n[a]);if(i)return i}return mr(r.length,n.length)}function Wh(t){return wT(t)}function wT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=uc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Mu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return _t.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=wT(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${wT(r.fields[o])}`;return a+"}"})(t.mapValue):Mt()}function ng(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ST(t){return!!t&&"integerValue"in t}function ag(t){return!!t&&"arrayValue"in t}function vI(t){return!!t&&"nullValue"in t}function bI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uv(t){return!!t&&"mapValue"in t}function S2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function jm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return w0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=jm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=jm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function IF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const RF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function dne(t){return"nullValue"in t?cv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ng(Yd.empty(),_t.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?S2(t)?RF:{mapValue:{}}:Mt()}function hne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ng(Yd.empty(),_t.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?RF:"mapValue"in t?S2(t)?{mapValue:{}}:gu:Mt()}function wI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function SI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!uv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=jm(r)}setAll(e){let r=ta.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=jm(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());uv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return il(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];uv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){w0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new yi(jm(this.value))}}function MF(t){const e=[];return w0(t.fields,((r,n)=>{const a=new ta([r]);if(uv(n)){const i=MF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Wn(e,0,Wt.min(),Wt.min(),Wt.min(),yi.empty(),0)}static newFoundDocument(e,r,n,a){return new Wn(e,1,r,Wt.min(),n,a,0)}static newNoDocument(e,r){return new Wn(e,2,r,Wt.min(),Wt.min(),yi.empty(),0)}static newUnknownDocument(e,r){return new Wn(e,3,r,Wt.min(),Wt.min(),yi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,r){this.position=e,this.inclusive=r}}function NI(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=_t.comparator(_t.fromName(o.referenceValue),r.key):n=Du(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function _I(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!il(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,r="asc"){this.field=e,this.dir=r}}function fne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DF=class{};class Dr extends DF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new pne(e,r,n):r==="array-contains"?new xne(e,n):r==="in"?new UF(e,n):r==="not-in"?new yne(e,n):r==="array-contains-any"?new vne(e,n):new Dr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new mne(e,n):new gne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Du(r,this.value)):r!==null&&Jd(this.value)===Jd(r)&&this.matchesComparison(Du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends DF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new mn(e,r)}matches(e){return Qh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qh(t){return t.op==="and"}function NT(t){return t.op==="or"}function l8(t){return PF(t)&&Qh(t)}function PF(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function _T(t){if(t instanceof Dr)return t.field.canonicalString()+t.op.toString()+Wh(t.value);if(l8(t))return t.filters.map((e=>_T(e))).join(",");{const e=t.filters.map((r=>_T(r))).join(",");return`${t.op}(${e})`}}function LF(t,e){return t instanceof Dr?(function(n,a){return a instanceof Dr&&n.op===a.op&&n.field.isEqual(a.field)&&il(n.value,a.value)})(t,e):t instanceof mn?(function(n,a){return a instanceof mn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&LF(o,a.filters[c])),!0):!1})(t,e):void Mt()}function BF(t,e){const r=t.filters.concat(e);return mn.create(r,t.op)}function $F(t){return t instanceof Dr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Wh(r.value)}`})(t):t instanceof mn?(function(r){return r.op.toString()+" {"+r.getFilters().map($F).join(" ,")+"}"})(t):"Filter"}class pne extends Dr{constructor(e,r,n){super(e,r,n),this.key=_t.fromName(n.referenceValue)}matches(e){const r=_t.comparator(e.key,this.key);return this.matchesComparison(r)}}class mne extends Dr{constructor(e,r){super(e,"in",r),this.keys=zF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class gne extends Dr{constructor(e,r){super(e,"not-in",r),this.keys=zF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function zF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>_t.fromName(n.referenceValue)))}class xne extends Dr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ag(r)&&rg(r.arrayValue,this.value)}}class UF extends Dr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&rg(this.value.arrayValue,r)}}class yne extends Dr{constructor(e,r){super(e,"not-in",r)}matches(e){if(rg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!rg(this.value.arrayValue,r)}}class vne extends Dr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ag(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>rg(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bne{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function TT(t,e=null,r=[],n=[],a=null,i=null,o=null){return new bne(t,e,r,n,a,i,o)}function Zd(t){const e=Ut(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>_T(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),dx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Wh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Wh(n))).join(",")),e.ue=r}return e.ue}function hx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!fne(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!LF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_I(t.startAt,e.startAt)&&_I(t.endAt,e.endAt)}function Cv(t){return _t.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ov(t,e){return t.filters.filter((r=>r instanceof Dr&&r.field.isEqual(e)))}function TI(t,e,r){let n=cv,a=!0;for(const i of Ov(t,e)){let o=cv,c=!0;switch(i.op){case"<":case"<=":o=dne(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=cv}wI({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];wI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function jI(t,e,r){let n=gu,a=!0;for(const i of Ov(t,e)){let o=gu,c=!0;switch(i.op){case">=":case">":o=hne(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=gu}SI({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];SI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VF(t,e,r,n,a,i,o,c){return new Lf(t,e,r,n,a,i,o,c)}function fx(t){return new Lf(t)}function AI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FF(t){return t.collectionGroup!==null}function Am(t){const e=Ut(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new jn(ta.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ig(i,n))})),r.has(ta.keyField().canonicalString())||e.ce.push(new ig(ta.keyField(),n))}return e.ce}function Os(t){const e=Ut(t);return e.le||(e.le=wne(e,Am(t))),e.le}function wne(t,e){if(t.limitType==="F")return TT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new ig(a.field,i)}));const r=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return TT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function jT(t,e){const r=t.filters.concat([e]);return new Lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Iv(t,e,r){return new Lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function N2(t,e){return hx(Os(t),Os(e))&&t.limitType===e.limitType}function qF(t){return`${Zd(Os(t))}|lt:${t.limitType}`}function bh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>$F(a))).join(", ")}]`),dx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Wh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Wh(a))).join(",")),`Target(${n})`})(Os(t))}; limitType=${t.limitType})`}function px(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):_t.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of Am(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=NI(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,Am(n),a)||n.endAt&&!(function(o,c,d){const h=NI(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,Am(n),a))})(t,e)}function HF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GF(t){return(e,r)=>{let n=!1;for(const a of Am(t)){const i=Sne(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Sne(t,e,r){const n=t.field.isKeyField()?_t.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Du(d,h):Mt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){w0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return CF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne=new Bn(_t.comparator);function ks(){return Nne}const WF=new Bn(_t.comparator);function xm(...t){let e=WF;for(const r of t)e=e.insert(r.key,r);return e}function KF(t){let e=WF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Xo(){return Em()}function QF(){return Em()}function Em(){return new qu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _ne=new Bn(_t.comparator),Tne=new jn(_t.comparator);function Ar(...t){let e=Tne;for(const r of t)e=e.add(r);return e}const jne=new jn(mr);function c8(){return jne}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eg(e)?"-0":e}}function XF(t){return{integerValue:""+t}}function YF(t,e){return TF(e)?XF(e):u8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this._=void 0}}function Ane(t,e,r){return t instanceof sg?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&s8(i)&&(i=o8(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof e0?ZF(t,e):t instanceof Xh?eq(t,e):(function(a,i){const o=JF(a,i),c=EI(o)+EI(a.Pe);return ST(o)&&ST(a.Pe)?XF(c):u8(a.serializer,c)})(t,e)}function Ene(t,e,r){return t instanceof e0?ZF(t,e):t instanceof Xh?eq(t,e):r}function JF(t,e){return t instanceof Yh?(function(n){return ST(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class sg extends _2{}class e0 extends _2{constructor(e){super(),this.elements=e}}function ZF(t,e){const r=tq(e);for(const n of t.elements)r.some((a=>il(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Xh extends _2{constructor(e){super(),this.elements=e}}function eq(t,e){let r=tq(e);for(const n of t.elements)r=r.filter((a=>!il(a,n)));return{arrayValue:{values:r}}}class Yh extends _2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function EI(t){return Gn(t.integerValue||t.doubleValue)}function tq(t){return ag(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,r){this.field=e,this.transform=r}}function kne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof e0&&a instanceof e0||n instanceof Xh&&a instanceof Xh?Gh(n.elements,a.elements,il):n instanceof Yh&&a instanceof Yh?il(n.Pe,a.Pe):n instanceof sg&&a instanceof sg})(t.transform,e.transform)}class Cne{constructor(e,r){this.version=e,this.transformResults=r}}class ga{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ga}static exists(e){return new ga(void 0,e)}static updateTime(e){return new ga(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class T2{}function rq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mx(t.key,ga.none()):new Bf(t.key,t.data,ga.none());{const r=t.data,n=yi.empty();let a=new jn(ta.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new vc(t.key,n,new as(a.toArray()),ga.none())}}function One(t,e,r){t instanceof Bf?(function(a,i,o){const c=a.value.clone(),d=CI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof vc?(function(a,i,o){if(!dv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=CI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(nq(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function km(t,e,r,n){return t instanceof Bf?(function(i,o,c,d){if(!dv(i.precondition,o))return c;const h=i.value.clone(),p=OI(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof vc?(function(i,o,c,d){if(!dv(i.precondition,o))return c;const h=OI(i.fieldTransforms,d,o),p=o.data;return p.setAll(nq(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return dv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function Ine(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=JF(n.transform,a||null);i!=null&&(r===null&&(r=yi.empty()),r.set(n.field,i))}return r||null}function kI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Gh(n,a,((i,o)=>kne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bf extends T2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class vc extends T2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nq(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function CI(t,e,r){const n=new Map;Ft(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,Ene(o,c,r[a]))}return n}function OI(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,Ane(i,o,e))}return n}class mx extends T2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h8 extends T2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&One(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=km(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=km(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=QF();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=rq(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Wt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Ar())}isEqual(e){return this.batchId===e.batchId&&Gh(this.mutations,e.mutations,((r,n)=>kI(r,n)))&&Gh(this.baseMutations,e.baseMutations,((r,n)=>kI(r,n)))}}class p8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ft(e.mutations.length===n.length);let a=(function(){return _ne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new p8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ka,$r;function aq(t){switch(t){default:return Mt();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function iq(t){if(t===void 0)return ma("GRPC error has no .code"),qe.UNKNOWN;switch(t){case ka.OK:return qe.OK;case ka.CANCELLED:return qe.CANCELLED;case ka.UNKNOWN:return qe.UNKNOWN;case ka.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case ka.INTERNAL:return qe.INTERNAL;case ka.UNAVAILABLE:return qe.UNAVAILABLE;case ka.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case ka.NOT_FOUND:return qe.NOT_FOUND;case ka.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case ka.ABORTED:return qe.ABORTED;case ka.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case ka.DATA_LOSS:return qe.DATA_LOSS;default:return Mt()}}($r=ka||(ka={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dne=new Hd([4294967295,4294967295],0);function II(t){const e=Mne().encode(t),r=new hF;return r.update(e),new Uint8Array(r.digest())}function RI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hd([r,n],0),new Hd([a,i],0)]}class g8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ym(`Invalid padding: ${r}`);if(n<0)throw new ym(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ym(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ym(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Hd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Hd.fromNumber(n)));return a.compare(Dne)===1&&(a=new Hd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=II(e),[n,a]=RI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new g8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=II(e),[n,a]=RI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,xx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new gx(Wt.min(),a,new Bn(mr),ks(),Ar())}}class xx{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new xx(n,r,Ar(),Ar(),Ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class sq{constructor(e,r){this.targetId=e,this.me=r}}class oq{constructor(e,r,n=va.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class MI{constructor(){this.fe=0,this.ge=PI(),this.pe=va.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ar(),r=Ar(),n=Ar();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Mt()}})),new xx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=PI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pne{constructor(e){this.Le=e,this.Be=new Map,this.ke=ks(),this.qe=DI(),this.Qe=new Bn(mr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Mt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Cv(i))if(n===0){const o=new _t(i.path);this.Ue(r,o,Wn.newNoDocument(o,Wt.min()))}else Ft(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Mu(n).toUint8Array()}catch(d){if(d instanceof OF)return Ym("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new g8(o,a,i)}catch(d){return Ym(d instanceof ym?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Cv(c.target)){const d=new _t(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Wn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=Ar();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new gx(e,r,this.Qe,this.ke,n);return this.ke=ks(),this.qe=DI(),this.Qe=new Bn(mr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new MI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new jn(mr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||lt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new MI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function DI(){return new Bn(_t.comparator)}function PI(){return new Bn(_t.comparator)}const Lne={asc:"ASCENDING",desc:"DESCENDING"},Bne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$ne={and:"AND",or:"OR"};class zne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function AT(t,e){return t.useProto3Json||dx(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Une(t,e){return Jh(t,e.toTimestamp())}function ri(t){return Ft(!!t),Wt.fromTimestamp((function(r){const n=uc(r);return new ra(n.seconds,n.nanos)})(t))}function x8(t,e){return ET(t,e).canonicalString()}function ET(t,e){const r=(function(a){return new Kr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function cq(t){const e=Kr.fromString(t);return Ft(yq(e)),e}function og(t,e){return x8(t.databaseId,e.path)}function ec(t,e){const r=cq(e);if(r.get(1)!==t.databaseId.projectId)throw new mt(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new mt(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _t(hq(r))}function uq(t,e){return x8(t.databaseId,e)}function dq(t){const e=cq(t);return e.length===4?Kr.emptyPath():hq(e)}function kT(t){return new Kr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hq(t){return Ft(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LI(t,e,r){return{name:og(t,e),fields:r.value.mapValue.fields}}function Vne(t,e,r){const n=ec(t,e.name),a=ri(e.updateTime),i=e.createTime?ri(e.createTime):Wt.min(),o=new yi({mapValue:{fields:e.fields}}),c=Wn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Fne(t,e){return"found"in e?(function(n,a){Ft(!!a.found),a.found.name,a.found.updateTime;const i=ec(n,a.found.name),o=ri(a.found.updateTime),c=a.found.createTime?ri(a.found.createTime):Wt.min(),d=new yi({mapValue:{fields:a.found.fields}});return Wn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Ft(!!a.missing),Ft(!!a.readTime);const i=ec(n,a.missing),o=ri(a.readTime);return Wn.newNoDocument(i,o)})(t,e):Mt()}function qne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Mt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Ft(p===void 0||typeof p=="string"),va.fromBase64String(p||"")):(Ft(p===void 0||p instanceof Buffer||p instanceof Uint8Array),va.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?qe.UNKNOWN:iq(h.code);return new mt(p,h.message||"")})(o);r=new oq(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ec(t,n.document.name),i=ri(n.document.updateTime),o=n.document.createTime?ri(n.document.createTime):Wt.min(),c=new yi({mapValue:{fields:n.document.fields}}),d=Wn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new hv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ec(t,n.document),i=n.readTime?ri(n.readTime):Wt.min(),o=Wn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new hv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ec(t,n.document),i=n.removedTargetIds||[];r=new hv([],i,a,null)}else{if(!("filter"in e))return Mt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new Rne(a,i),c=n.targetId;r=new sq(c,o)}}return r}function lg(t,e){let r;if(e instanceof Bf)r={update:LI(t,e.key,e.value)};else if(e instanceof mx)r={delete:og(t,e.key)};else if(e instanceof vc)r={update:LI(t,e.key,e.data),updateMask:Xne(e.fieldMask)};else{if(!(e instanceof h8))return Mt();r={verify:og(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof sg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof e0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Mt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:Une(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Mt()})(t,e.precondition)),r}function CT(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ga.updateTime(ri(i.updateTime)):i.exists!==void 0?ga.exists(i.exists):ga.none()})(e.currentDocument):ga.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Ft(c.setToServerValue==="REQUEST_TIME"),d=new sg;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new e0(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Xh(p)}else"increment"in c?d=new Yh(o,c.increment):Mt();const h=ta.fromServerFormat(c.fieldPath);return new d8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=ec(t,e.update.name),i=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new as(h.map((p=>ta.fromServerFormat(p))))})(e.updateMask);return new vc(a,i,o,r,n)}return new Bf(a,i,r,n)}if(e.delete){const a=ec(t,e.delete);return new mx(a,r)}if(e.verify){const a=ec(t,e.verify);return new h8(a,r)}return Mt()}function Hne(t,e){return t&&t.length>0?(Ft(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?ri(a.updateTime):ri(i);return o.isEqual(Wt.min())&&(o=ri(i)),new Cne(o,a.transformResults||[])})(r,e)))):[]}function fq(t,e){return{documents:[uq(t,e.path)]}}function pq(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=uq(t,a);const i=(function(h){if(h.length!==0)return xq(mn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:wh(x.field),direction:Wne(x.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=AT(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function mq(t){let e=dq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ft(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const x=gq(m);return x instanceof mn&&l8(x)?x.getFilters():[x]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((x=>(function(S){return new ig(Sh(S.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(x)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,dx(x)?null:x})(r.limit));let d=null;r.startAt&&(d=(function(m){const x=!!m.before,y=m.values||[];return new Kh(y,x)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const x=!m.before,y=m.values||[];return new Kh(y,x)})(r.endAt)),VF(e,a,o,i,c,"F",d,h)}function Gne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function gq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Sh(r.unaryFilter.field);return Dr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Sh(r.unaryFilter.field);return Dr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sh(r.unaryFilter.field);return Dr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sh(r.unaryFilter.field);return Dr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}})(t):t.fieldFilter!==void 0?(function(r){return Dr.create(Sh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return mn.create(r.compositeFilter.filters.map((n=>gq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Mt()}})(r.compositeFilter.op))})(t):Mt()}function Wne(t){return Lne[t]}function Kne(t){return Bne[t]}function Qne(t){return $ne[t]}function wh(t){return{fieldPath:t.canonicalString()}}function Sh(t){return ta.fromServerFormat(t.fieldPath)}function xq(t){return t instanceof Dr?(function(r){if(r.op==="=="){if(bI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NAN"}};if(vI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(bI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NOT_NAN"}};if(vI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wh(r.field),op:Kne(r.op),value:r.value}}})(t):t instanceof mn?(function(r){const n=r.getFilters().map((a=>xq(a)));return n.length===1?n[0]:{compositeFilter:{op:Qne(r.op),filters:n}}})(t):Mt()}function Xne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function yq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,r,n,a,i=Wt.min(),o=Wt.min(),c=va.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e){this.ct=e}}function Yne(t,e){let r;if(e.document)r=Vne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_t.fromSegments(e.noDocument.path),a=r0(e.noDocument.readTime);r=Wn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mt();{const n=_t.fromSegments(e.unknownDocument.path),a=r0(e.unknownDocument.version);r=Wn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new ra(a[0],a[1]);return Wt.fromTimestamp(i)})(e.readTime)),r}function BI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Rv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:og(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Jh(i,o.version.toTimestamp()),createTime:Jh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:t0(e.version)};else{if(!e.isUnknownDocument())return Mt();n.unknownDocument={path:r.path.toArray(),version:t0(e.version)}}return n}function Rv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function t0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function r0(t){const e=new ra(t.seconds,t.nanoseconds);return Wt.fromTimestamp(e)}function Id(t,e){const r=(e.baseMutations||[]).map((i=>CT(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>CT(t.ct,i))),a=ra.fromMillis(e.localWriteTimeMs);return new f8(e.batchId,a,r,n)}function vm(t){const e=r0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?r0(t.lastLimboFreeSnapshotVersion):Wt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Ft(i.documents.length===1),Os(fx(dq(i.documents[0])))})(t.query):(function(i){return Os(mq(i))})(t.query),new Ql(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,va.fromBase64String(t.resumeToken))}function bq(t,e){const r=t0(e.snapshotVersion),n=t0(e.lastLimboFreeSnapshotVersion);let a;a=Cv(e.target)?fq(t.ct,e.target):pq(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function wq(t){const e=mq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iv(e,e.limit,"L"):e}function s3(t,e){return new m8(e.largestBatchId,CT(t.ct,e.overlayMutation))}function $I(t,e){const r=e.path.lastSegment();return[t,zi(e.path.popLast()),r]}function zI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:t0(n.readTime),documentKey:zi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{getBundleMetadata(e,r){return UI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:r0(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return UI(e).put((function(a){return{bundleId:a.id,createTime:t0(ri(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return VI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:wq(i.bundledQuery),readTime:r0(i.readTime)}})(n)}))}saveNamedQuery(e,r){return VI(e).put((function(a){return{name:a.name,readTime:t0(ri(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function UI(t){return Ga(t,"bundles")}function VI(t){return Ga(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new j2(e,n)}getOverlay(e,r){return Qp(e).get($I(this.userId,r)).next((n=>n?s3(this.serializer,n):null))}getOverlays(e,r){const n=Xo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new m8(r,o);a.push(this.ht(e,c))})),Ie.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(zi(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Qp(e).j("collectionPathOverlayIndex",c))})),Ie.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Xo(),i=zi(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Qp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=s3(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Xo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Qp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=s3(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Qp(e).put((function(a,i,o){const[c,d,h]=$I(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lg(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Qp(t){return Ga(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zne{Pt(e){return Ga(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?va.fromUint8Array(n):va.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Gn(e.integerValue));else if("doubleValue"in e){const n=Gn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),eg(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=uc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Mu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?IF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):S2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Mt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Gn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),_t.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Rd.vt=new Rd;function eae(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function FI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=eae(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class tae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=FI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=FI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class rae{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nae{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xp{constructor(){this.jt=new tae,this.Ht=new rae(this.jt),this.Jt=new nae(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Md(this.indexId,this.documentKey,this.arrayValue,n)}}function ru(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=qI(t.arrayValue,e.arrayValue),r!==0?r:(r=qI(t.directionalValue,e.directionalValue),r!==0?r:_t.comparator(t.documentKey,e.documentKey)))}function qI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.Xt=new jn(((r,n)=>ta.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ft(e.collectionGroup===this.collectionId),this.nn)return!1;const r=vT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ed(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new jn(ta.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new ov(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new ov(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new ov(n.field,n.dir==="asc"?0:1)));return new kv(kv.UNKNOWN_ID,this.collectionId,r,Zm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t){var e,r;if(Ft(t instanceof Dr||t instanceof mn),t instanceof Dr){if(t instanceof UF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>Dr.create(t.field,"==",i))))||[];return mn.create(a,"or")}return t}const n=t.filters.map((a=>Sq(a)));return mn.create(n,t.op)}function aae(t){if(t.getFilters().length===0)return[];const e=RT(Sq(t));return Ft(Nq(e)),OT(e)||IT(e)?[e]:e.getFilters()}function OT(t){return t instanceof Dr}function IT(t){return t instanceof mn&&l8(t)}function Nq(t){return OT(t)||IT(t)||(function(r){if(r instanceof mn&&NT(r)){for(const n of r.getFilters())if(!OT(n)&&!IT(n))return!1;return!0}return!1})(t)}function RT(t){if(Ft(t instanceof Dr||t instanceof mn),t instanceof Dr)return t;if(t.filters.length===1)return RT(t.filters[0]);const e=t.filters.map((n=>RT(n)));let r=mn.create(e,t.op);return r=Mv(r),Nq(r)?r:(Ft(r instanceof mn),Ft(Qh(r)),Ft(r.filters.length>1),r.filters.reduce(((n,a)=>y8(n,a))))}function y8(t,e){let r;return Ft(t instanceof Dr||t instanceof mn),Ft(e instanceof Dr||e instanceof mn),r=t instanceof Dr?e instanceof Dr?(function(a,i){return mn.create([a,i],"and")})(t,e):GI(t,e):e instanceof Dr?GI(e,t):(function(a,i){if(Ft(a.filters.length>0&&i.filters.length>0),Qh(a)&&Qh(i))return BF(a,i.getFilters());const o=NT(a)?a:i,c=NT(a)?i:a,d=o.filters.map((h=>y8(h,c)));return mn.create(d,"or")})(t,e),Mv(r)}function GI(t,e){if(Qh(e))return BF(e,t.getFilters());{const r=e.filters.map((n=>y8(t,n)));return mn.create(r,"or")}}function Mv(t){if(Ft(t instanceof Dr||t instanceof mn),t instanceof Dr)return t;const e=t.getFilters();if(e.length===1)return Mv(e[0]);if(PF(t))return t;const r=e.map((a=>Mv(a))),n=[];return r.forEach((a=>{a instanceof Dr?n.push(a):a instanceof mn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:mn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{constructor(){this.un=new v8}addToCollectionParentIndex(e,r){return this.un.add(r),Ie.resolve()}getCollectionParents(e,r){return Ie.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ie.resolve()}deleteFieldIndex(e,r){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,r){return Ie.resolve()}getDocumentsMatchingTarget(e,r){return Ie.resolve(null)}getIndexType(e,r){return Ie.resolve(0)}getFieldIndexes(e,r){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,r){return Ie.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,r){return Ie.resolve(Ms.min())}updateCollectionGroup(e,r,n){return Ie.resolve()}updateIndexEntries(e,r){return Ie.resolve()}}class v8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new jn(Kr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new jn(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Uint8Array(0);class sae{constructor(e,r){this.databaseId=r,this.cn=new v8,this.ln=new qu((n=>Zd(n)),((n,a)=>hx(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:zi(a)};return WI(e).put(i)}return Ie.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[vF(r),""],!1,!0);return WI(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Qo(o.parent))}return n}))}addFieldIndex(e,r){const n=Yp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=dh(e);return i.next((c=>{o.put(zI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Yp(e),a=dh(e),i=uh(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Yp(e),n=uh(e),a=dh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Ie.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new HI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=uh(e);let a=!0;const i=new Map;return Ie.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=Ar();const c=[];return Ie.forEach(i,((d,h)=>{lt("IndexedDbIndexManager",`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(d)} to execute ${Zd(r)}`);const p=(function(R,P){const I=vT(P);if(I===void 0)return null;for(const k of Ov(R,I.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null})(h,d),m=(function(R,P){const I=new Map;for(const k of Ed(P))for(const A of Ov(R,k.fieldPath))switch(A.op){case"==":case"in":I.set(k.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return I.set(k.fieldPath.canonicalString(),A.value),Array.from(I.values())}return null})(h,d),x=(function(R,P){const I=[];let k=!0;for(const A of Ed(P)){const j=A.kind===0?TI(R,A.fieldPath,R.startAt):jI(R,A.fieldPath,R.startAt);I.push(j.value),k&&(k=j.inclusive)}return new Kh(I,k)})(h,d),y=(function(R,P){const I=[];let k=!0;for(const A of Ed(P)){const j=A.kind===0?jI(R,A.fieldPath,R.endAt):TI(R,A.fieldPath,R.endAt);I.push(j.value),k&&(k=j.inclusive)}return new Kh(I,k)})(h,d),S=this.In(d,h,x),N=this.In(d,h,y),w=this.Tn(d,h,m),E=this.En(d.indexId,p,S,x.inclusive,N,y.inclusive,w);return Ie.forEach(E,(O=>n.G(O,r.limit).next((R=>{R.forEach((P=>{const I=_t.fromSegments(P.documentKey);o.has(I)||(o=o.add(I),c.push(I))}))}))))})).next((()=>c))}return Ie.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=aae(mn.create(e.filters,"and")).map((n=>TT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const x=r?this.dn(r[m/h]):gy,y=this.An(e,x,n[m%h],a),S=this.Rn(e,x,i[m%h],o),N=c.map((w=>this.An(e,x,w,!0)));p.push(...this.createRange(y,S,N))}return p}An(e,r,n,a){const i=new Md(e,_t.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Md(e,_t.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new HI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Ie.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new jn(ta.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Xp;for(const a of Ed(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Rd.vt.It(i,o)}return n.zt()}dn(e){const r=new Xp;return Rd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Xp;return Rd.vt.It(ng(this.databaseId,r),n.Yt((function(i){const o=Ed(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Xp);let i=0;for(const o of Ed(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&ag(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Rd.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Xp;d.seed(c.zt()),Rd.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof Dr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Yp(e),a=dh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Ie.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const x=m?new Zm(m.sequenceNumber,new Ms(r0(m.readTime),new _t(Qo(m.documentKey)),m.largestBatchId)):Zm.empty(),y=p.fields.map((([S,N])=>new ov(ta.fromServerFormat(S),N)));return new kv(p.indexId,p.collectionGroup,y,x)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:mr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Yp(e),i=dh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Ie.forEach(c,(d=>i.put(zI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ie.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Ie.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Ie.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Ie.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return uh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return uh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=uh(e);let i=new jn(ru);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Md(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new jn(ru);const a=this.Vn(r,e);if(a==null)return n;const i=vT(r);if(i!=null){const o=e.data.field(i.fieldPath);if(ag(o))for(const c of o.arrayValue.values||[])n=n.add(new Md(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Md(r.indexId,e.key,gy,a));return n}bn(e,r,n,a,i){lt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,x){const y=d.getIterator(),S=h.getIterator();let N=ch(y),w=ch(S);for(;N||w;){let E=!1,O=!1;if(N&&w){const R=p(N,w);R<0?O=!0:R>0&&(E=!0)}else N!=null?O=!0:E=!0;E?(m(w),w=ch(S)):O?(x(N),N=ch(y)):(N=ch(y),w=ch(S))}})(a,i,ru,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Ie.waitFor(o)}yn(e){let r=1;return dh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>ru(o,c))).filter(((o,c,d)=>!c||ru(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=ru(o,e),d=ru(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,gy,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,gy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return ru(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(KI)}getMinOffset(e,r){return Ie.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Mt())))).next(KI)}}function WI(t){return Ga(t,"collectionParents")}function uh(t){return Ga(t,"indexEntries")}function Yp(t){return Ga(t,"indexConfiguration")}function dh(t){return Ga(t,"indexState")}function KI(t){Ft(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;n8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Ms(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,x)=>(c++,x.delete())));i.push(d.next((()=>{Ft(c===1)})));const h=[];for(const p of r.mutations){const m=jF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Ie.waitFor(i).next((()=>h))}function Dv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(41943040,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);class A2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Ft(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new A2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=Nh(e),o=nu(e);return o.add({}).next((c=>{Ft(typeof c=="number");const d=new f8(c,r,n,a),h=(function(y,S,N){const w=N.baseMutations.map((O=>lg(y.ct,O))),E=N.mutations.map((O=>lg(y.ct,O)));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:w,mutations:E}})(this.serializer,this.userId,d),p=[];let m=new jn(((x,y)=>mr(x.canonicalString(),y.canonicalString())));for(const x of a){const y=jF(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(o.put(h)),p.push(i.put(y,Hre))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Ie.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return nu(e).get(r).next((n=>n?(Ft(n.userId===this.userId),Id(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ie.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return nu(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Ft(c.batchId>=n),i=Id(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return nu(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).U("userMutationsIndex",r).next((n=>n.map((a=>Id(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=lv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return Nh(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,x=Qo(p);if(h===this.userId&&r.path.isEqual(x))return nu(e).get(m).next((y=>{if(!y)throw Mt();Ft(y.userId===this.userId),i.push(Id(this.serializer,y))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new jn(mr);const a=[];return r.forEach((i=>{const o=lv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=Nh(e).J({range:c},((h,p,m)=>{const[x,y,S]=h,N=Qo(y);x===this.userId&&i.path.isEqual(N)?n=n.add(S):m.done()}));a.push(d)})),Ie.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=lv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new jn(mr);return Nh(e).J({range:o},((d,h,p)=>{const[m,x,y]=d,S=Qo(x);m===this.userId&&n.isPrefixOf(S)?S.length===a&&(c=c.add(y)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(nu(e).get(i).next((o=>{if(o===null)throw Mt();Ft(o.userId===this.userId),n.push(Id(this.serializer,o))})))})),Ie.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return _q(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ie.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ie.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return Nh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Qo(i[1]);a.push(d)}else c.done()})).next((()=>{Ft(a.length===0)}))}))}containsKey(e,r){return Tq(e,this.userId,r)}Nn(e){return jq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Tq(t,e,r){const n=lv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return Nh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function nu(t){return Ga(t,"mutations")}function Nh(t){return Ga(t,"documentMutations")}function jq(t){return Ga(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n0(0)}static kn(){return new n0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new n0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Wt.fromTimestamp(new ra(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>hh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Ft(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return hh(e).J(((o,c)=>{const d=vm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Ie.waitFor(i))).next((()=>a))}forEachTarget(e,r){return hh(e).J(((n,a)=>{const i=vm(a);r(i)}))}qn(e){return XI(e).get("targetGlobalKey").next((r=>(Ft(r!==null),r)))}Qn(e,r){return XI(e).put("targetGlobalKey",r)}Kn(e,r){return hh(e).put(bq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Zd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=vm(c);hx(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=hu(e);return r.forEach((o=>{const c=zi(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Ie.waitFor(a)}removeMatchingKeys(e,r,n){const a=hu(e);return Ie.forEach(r,(i=>{const o=zi(i.path);return Ie.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=hu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=hu(e);let i=Ar();return a.J({range:n,H:!0},((o,c,d)=>{const h=Qo(o[1]),p=new _t(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=zi(r.path),a=IDBKeyRange.bound([n],[vF(n)],!1,!0);let i=0;return hu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return hh(e).get(r).next((n=>n?vm(n):null))}}function hh(t){return Ga(t,"targets")}function XI(t){return Ga(t,"targetGlobal")}function hu(t){return Ga(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI([t,e],[r,n]){const a=mr(t,r);return a===0?mr(e,n):a}class lae{constructor(e){this.Un=e,this.buffer=new jn(YI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();YI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class cae{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Fu(r)?lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Vu(r)}await this.Hn(3e5)}))}}class uae{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ie.resolve(ns.oe);const n=new lae(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(QI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),vh()<=Mr.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function dae(t,e){return new uae(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e,r){this.db=e,this.garbageCollector=dae(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return xy(e,n)}removeReference(e,r,n){return xy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return xy(e,r)}nr(e,r){return(function(a,i){let o=!1;return jq(a).Y((c=>Tq(a,c,i).next((d=>(d&&(o=!0),Ie.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Wt.min()),hu(e).delete((function(m){return[0,zi(m.path)]})(o)))))}));a.push(d)}})).next((()=>Ie.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return xy(e,r)}tr(e,r){const n=hu(e);let a,i=ns.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==ns.oe&&r(new _t(Qo(a)),i),i=h,a=d):i=ns.oe})).next((()=>{i!==ns.oe&&r(new _t(Qo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xy(t,e){return hu(t).put((function(n,a){return{targetId:0,path:zi(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(){this.changes=new qu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ie.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return vd(e).put(n)}removeEntry(e,r,n){return vd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Rv(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Wn.newInvalidDocument(r);return vd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Wn.newInvalidDocument(r)};return vd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(r))},((a,i)=>{n={document:this.ir(r,i),size:Dv(i)}})).next((()=>n))}getEntries(e,r){let n=ks();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=ks(),a=new Bn(_t.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,Dv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Ie.resolve();let a=new jn(eR);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Jp(a.first()),Jp(a.last())),o=a.getIterator();let c=o.getNext();return vd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=_t.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&eR(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$(Jp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Rv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=ks();for(const m of h){const x=this.ir(_t.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(px(r,x)||a.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=ks();const o=ZI(r,n),c=ZI(r,Ms.max());return vd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(_t.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new pae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return JI(e).get("remoteDocumentGlobalKey").next((r=>(Ft(!!r),r)))}rr(e,r){return JI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Yne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Wt.min())))return n}return Wn.newInvalidDocument(e)}}function Eq(t){return new fae(t)}class pae extends Aq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new qu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new jn(((i,o)=>mr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=BI(this.cr.serializer,o);a=a.add(i.path.popLast());const h=Dv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=BI(this.cr.serializer,o.convertToNoDocument(Wt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Ie.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function JI(t){return Ga(t,"remoteDocumentGlobal")}function vd(t){return Ga(t,"remoteDocumentsV14")}function Jp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZI(t,e){const r=e.documentKey.path.toArray();return[t,Rv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function eR(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=mr(r[i],n[i]),a)return a;return a=mr(r.length,n.length),a||(a=mr(r[r.length-2],n[n.length-2]),a||mr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&km(n.mutation,a,as.empty(),ra.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Ar()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Ar()){const a=Xo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=xm();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Xo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Ar())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=ks();const o=Em(),c=(function(){return Em()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof vc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),km(p.mutation,h,p.mutation.getFieldMask(),ra.now())):o.set(h.key,as.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new mae(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Em();let a=new Bn(((o,c)=>o-c)),i=Ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||as.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||Ar()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=QF();p.forEach((x=>{if(!i.has(x)){const y=rq(r.get(x),n.get(x));y!==null&&m.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ie.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return _t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):FF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ie.resolve(Xo());let c=-1,d=i;return o.next((h=>Ie.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Ie.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,Ar()))).next((p=>({batchId:c,changes:KF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _t(r)).next((n=>{let a=xm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=xm();return this.indexManager.getCollectionParents(e,i).next((c=>Ie.forEach(c,(d=>{const h=(function(m,x){return new Lf(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,x)=>{o=o.insert(m,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Wn.newInvalidDocument(p)))}));let c=xm();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&km(p.mutation,h,as.empty(),ra.now()),px(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ie.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ri(a.createTime)}})(r)),Ie.resolve()}getNamedQuery(e,r){return Ie.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:wq(a.bundledQuery),readTime:ri(a.readTime)}})(r)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{constructor(){this.overlays=new Bn(_t.comparator),this.Ir=new Map}getOverlay(e,r){return Ie.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Xo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Ie.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Ie.resolve()}getOverlaysForCollection(e,r,n){const a=Xo(),i=r.length+1,o=new _t(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Ie.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Bn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Xo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Xo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Ie.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new m8(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ar(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yae{constructor(){this.sessionToken=va.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.Tr=new jn(Za.Er),this.dr=new jn(Za.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Za(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Za(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new _t(new Kr([])),n=new Za(r,e),a=new Za(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new _t(new Kr([])),n=new Za(r,e),a=new Za(r,e+1);let i=Ar();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new Za(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Za{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return _t.comparator(e.key,r.key)||mr(e.wr,r.wr)}static Ar(e,r){return mr(e.wr,r.wr)||_t.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new jn(Za.Er)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new Za(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,r){return Ie.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Za(r,0),a=new Za(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new jn(mr);return r.forEach((a=>{const i=new Za(a,0),o=new Za(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Ie.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;_t.isDocumentKey(i)||(i=i.child(""));const o=new Za(new _t(i),0);let c=new jn(mr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Ie.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Ft(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ie.forEach(r.mutations,(a=>{const i=new Za(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Za(r,0),a=this.br.firstAfterOrEqual(n);return Ie.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e){this.Mr=e,this.docs=(function(){return new Bn(_t.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ie.resolve(n?n.document.mutableCopy():Wn.newInvalidDocument(r))}getEntries(e,r){let n=ks();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Wn.newInvalidDocument(a))})),Ie.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=ks();const o=r.path,c=new _t(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||n8(wF(p),n)<=0||(a.has(p.key)||px(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Mt()}Or(e,r){return Ie.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new wae(this)}getSize(e){return Ie.resolve(this.size)}}class wae extends Aq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Ie.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(e){this.persistence=e,this.Nr=new qu((r=>Zd(r)),hx),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new b8,this.targetCount=0,this.kr=n0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ie.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new n0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ie.resolve()}updateTargetData(e,r){return this.Kn(r),Ie.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Ie.waitFor(i).next((()=>a))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ie.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ie.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ie.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ie.resolve(n)}containsKey(e,r){return Ie.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ns(0),this.Kr=!1,this.Kr=!0,this.$r=new yae,this.referenceDelegate=e(this),this.Ur=new Sae(this),this.indexManager=new iae,this.remoteDocumentCache=(function(a){return new bae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new vq(r),this.Gr=new gae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new xae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new vae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){lt("MemoryPersistence","Starting transaction:",e);const a=new Nae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Ie.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Nae extends NF{constructor(e){super(),this.currentSequenceNumber=e}}class E2{constructor(e){this.persistence=e,this.Jr=new b8,this.Yr=null}static Zr(e){return new E2(e)}get Xr(){if(this.Yr)return this.Yr;throw Mt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ie.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ie.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,(n=>{const a=_t.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Wt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new w2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pI,{unique:!0}),d.createObjectStore("documentMutations")})(e),tR(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Ie.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),tR(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pI,{unique:!0});const m=h.store("mutations"),x=p.map((y=>m.put(y)));return Ie.waitFor(x)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:nne});h.createIndex("collectionPathOverlayIndex",ane,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",ine,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Gre});h.createIndex("documentKeyIndex",Wre),h.createIndex("collectionGroupIndex",Kre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Zre}).createIndex("sequenceNumberIndex",ene,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:tne}).createIndex("documentKeyIndex",rne,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=Dv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Ie.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Ie.forEach(c,(d=>{Ft(d.userId===i.userId);const h=Id(this.serializer,d);return _q(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Kr(o),h=(function(m){return[0,zi(m)]})(d);i.push(r.get(h).next((p=>p?Ie.resolve():(m=>r.put({targetId:0,path:zi(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Ie.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Jre});const n=r.store("collectionParents"),a=new v8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:zi(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Kr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Qo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=vm(a),o=bq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new _t(Kr.fromString(m.document.name).popFirst(5)):m.noDocument?_t.fromSegments(m.noDocument.path):m.unknownDocument?_t.fromSegments(m.unknownDocument.path):Mt()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Ie.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=Eq(this.serializer),i=new Cq(E2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:Ar();Id(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Ie.forEach(c,((d,h)=>{const p=new ji(h),m=j2.lt(this.serializer,p),x=i.getIndexManager(p),y=A2.lt(p,this.serializer,x,i.referenceDelegate);return new kq(a,y,m,x).recalculateAndSaveOverlaysForDocumentKeys(new bT(r,ns.oe),d).next()}))}))}}function tR(t){t.createObjectStore("targetDocuments",{keyPath:Xre}).createIndex("documentTargetsIndex",Yre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qre,{unique:!0}),t.createObjectStore("targetGlobal")}const o3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class w8{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!w8.D())throw new mt(qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hae(this,a),this.Ai=r+"main",this.serializer=new vq(d),this.Ri=new Au(this.Ai,this.hi,new _ae(this.serializer)),this.$r=new Zne,this.Ur=new oae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Eq(this.serializer),this.Gr=new Jne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&ma("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mt(qe.FAILED_PRECONDITION,o3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ns(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Fu(e))return lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Zp(e).get("owner").next((r=>Ie.resolve(this.vi(r))))}Ci(e){return yy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Ga(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Ie.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ie.resolve(!0):Zp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new mt(qe.FAILED_PRECONDITION,o3);return!1}}return!(!this.networkEnabled||!this.inForeground)||yy(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&lt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new bT(e,ns.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>yy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return A2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sae(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return j2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){lt("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?lne:d===16?one:d===15?i8:d===14?kF:d===13?EF:d===12?sne:d===11?AF:void Mt()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new bT(c,this.Qr?this.Qr.next():ns.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw ma(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new mt(qe.FAILED_PRECONDITION,SF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return Zp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new mt(qe.FAILED_PRECONDITION,o3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zp(e).put("owner",r)}static D(){return Au.D()}bi(e){const r=Zp(e);return r.get("owner").next((n=>this.vi(n)?(lt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ie.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ma(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;EV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return lt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ma("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ma("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zp(t){return Ga(t,"owner")}function yy(t){return Ga(t,"clientMetadata")}function Oq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Ar(),a=Ar();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new S8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return EV()?8:_F(qa())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Tae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(vh()<=Mr.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",bh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(vh()<=Mr.DEBUG&&lt("QueryEngine","Query:",bh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(vh()<=Mr.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",bh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(r))):Ie.resolve())}Yi(e,r){if(AI(r))return Ie.resolve(null);let n=Os(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Iv(r,null,"F"),n=Os(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=Ar(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Iv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return AI(r)||a.isEqual(Wt.min())?Ie.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Ie.resolve(null):(vh()<=Mr.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bh(r)),this.rs(e,o,r,bF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new jn(GF(e));return r.forEach(((a,i)=>{px(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return vh()<=Mr.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",bh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ms.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Bn(mr),this._s=new qu((i=>Zd(i)),hx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function Rq(t,e,r,n){return new jae(t,e,r,n)}async function Mq(t,e){const r=Ut(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=Ar();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Aae(t,e){const r=Ut(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let y=Ie.resolve();return x.forEach((S=>{y=y.next((()=>p.getEntry(d,S))).next((N=>{const w=h.docVersions.get(S);Ft(w!==null),N.version.compareTo(w)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Ar();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function Dq(t){const e=Ut(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Eae(t,e){const r=Ut(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const x=a.get(m);if(!x)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(va.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,n)),a=a.insert(m,y),(function(N,w,E){return N.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(x,y,p)&&c.push(r.Ur.updateTargetData(i,y))}));let d=ks(),h=Ar();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(kae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Wt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Ie.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function kae(t,e,r){let n=Ar(),a=Ar();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=ks();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Wt.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):lt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function Cae(t,e){const r=Ut(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Pv(t,e){const r=Ut(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Ie.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Ql(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Zh(t,e,r){const n=Ut(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Fu(o))throw o;lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function MT(t,e,r){const n=Ut(t);let a=Wt.min(),i=Ar();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=Ut(d),x=m._s.get(p);return x!==void 0?Ie.resolve(m.os.get(x)):m.Ur.getTargetData(h,p)})(n,o,Os(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Wt.min(),r?i:Ar()))).next((c=>(Bq(n,HF(e),c),{documents:c,Ts:i})))))}function Pq(t,e){const r=Ut(t),n=Ut(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Lq(t,e){const r=Ut(t),n=r.us.get(e)||Wt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,bF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(Bq(r,e,a),a)))}function Bq(t,e,r){let n=t.us.get(e)||Wt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function rR(t,e){return`firestore_clients_${t}_${e}`}function nR(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function l3(t,e){return`firestore_targets_${t}_${e}`}class Lv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new mt(a.error.code,a.error.message))),o?new Lv(e,r,a.state,i):(ma("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new mt(n.error.code,n.error.message))),i?new Cm(e,n.state,a):(ma("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=c8();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=TF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new Bv(e,i):(ma("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class N8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new N8(r.clientId,r.onlineState):(ma("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DT{constructor(){this.activeTargetIds=c8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Bn(mr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=rR(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new DT),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(rR(this.persistenceKey,n));if(a){const i=Bv.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(l3(this.persistenceKey,e));if(a){const i=Cm.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(l3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return lt("SharedClientState","READ",e,r),r}setItem(e,r){lt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(lt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ma("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=ns.oe;if(i!=null)try{const c=JSON.parse(i);Ft(typeof c=="number"),o=c}catch(c){ma("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==ns.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Lv(this.currentUser,e,r,n),i=nR(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=nR(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=l3(this.persistenceKey,e),i=new Cm(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Bv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Lv.Rs(new ji(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return Cm.Rs(a,r)}Ls(e){return N8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=c8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class $q{constructor(){this.so=new DT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new DT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy=null;function u3(){return vy===null?vy=(function(){return 268435456+Math.round(2147483648*Math.random())})():vy++,"0x"+vy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="WebChannelConnection";class Mae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=u3(),d=this.xo(r,n.toUriEncodedString());lt("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(lt("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Ym("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=Iae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=u3();return new Promise(((o,c)=>{const d=new fF;d.setWithCredentials(!0),d.listenOnce(pF.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case sv.NO_ERROR:const p=d.getResponseJson();lt(_i,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case sv.TIMEOUT:lt(_i,`RPC '${e}' ${i} timed out`),c(new mt(qe.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const m=d.getStatus();if(lt(_i,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const S=(function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(E)>=0?E:qe.UNKNOWN})(y.status);c(new mt(S,y.message))}else c(new mt(qe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new mt(qe.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{lt(_i,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);lt(_i,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=u3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xF(),c=gF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");lt(_i,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let x=!1,y=!1;const S=new Rae({Io:w=>{y?lt(_i,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(x||(lt(_i,`Opening RPC '${e}' stream ${a} transport.`),m.open(),x=!0),lt(_i,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),N=(w,E,O)=>{w.listen(E,(R=>{try{O(R)}catch(P){setTimeout((()=>{throw P}),0)}}))};return N(m,gm.EventType.OPEN,(()=>{y||(lt(_i,`RPC '${e}' stream ${a} transport opened.`),S.yo())})),N(m,gm.EventType.CLOSE,(()=>{y||(y=!0,lt(_i,`RPC '${e}' stream ${a} transport closed`),S.So())})),N(m,gm.EventType.ERROR,(w=>{y||(y=!0,Ym(_i,`RPC '${e}' stream ${a} transport errored:`,w),S.So(new mt(qe.UNAVAILABLE,"The operation could not be completed")))})),N(m,gm.EventType.MESSAGE,(w=>{var E;if(!y){const O=w.data[0];Ft(!!O);const R=O,P=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(P){lt(_i,`RPC '${e}' stream ${a} received error:`,P);const I=P.status;let k=(function(C){const U=ka[C];if(U!==void 0)return iq(U)})(I),A=P.message;k===void 0&&(k=qe.INTERNAL,A="Unknown error status: "+I+" with message "+P.message),y=!0,S.So(new mt(k,A)),m.close()}else lt(_i,`RPC '${e}' stream ${a} received:`,O),S.bo(O)}})),N(c,mF.STAT_EVENT,(w=>{w.stat===yT.PROXY?lt(_i,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===yT.NOPROXY&&lt(_i,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zq(){return typeof window<"u"?window:null}function fv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t){return new zne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&lt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===qe.RESOURCE_EXHAUSTED?(ma(r.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new mt(qe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dae extends Uq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=qne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Wt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Wt.min():o.readTime?ri(o.readTime):Wt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=kT(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Cv(d)?{documents:fq(i,d)}:{query:pq(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=lq(i,o.resumeToken);const h=AT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Wt.min())>0){c.readTime=Jh(i,o.snapshotVersion.toTimestamp());const h=AT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Gne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=kT(this.serializer),r.removeTarget=e,this.a_(r)}}class Pae extends Uq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,Ft(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Hne(e.writeResults,e.commitTime),n=ri(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=kT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>lg(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new mt(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,ET(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new mt(qe.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,ET(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(qe.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Bae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ma(r),this.D_=!1):lt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{S0(this)&&(lt("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Ut(d);h.L_.add(4),await yx(h),h.q_.set("Unknown"),h.L_.delete(4),await C2(h)})(this))}))})),this.q_=new Bae(n,a)}}async function C2(t){if(S0(t))for(const e of t.B_)await e(!0)}async function yx(t){for(const e of t.B_)await e(!1)}function O2(t,e){const r=Ut(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),A8(r)?j8(r):zf(r).r_()&&T8(r,e))}function ef(t,e){const r=Ut(t),n=zf(r);r.N_.delete(e),n.r_()&&Vq(r,e),r.N_.size===0&&(n.r_()?n.o_():S0(r)&&r.q_.set("Unknown"))}function T8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}zf(t).A_(e)}function Vq(t,e){t.Q_.xe(e),zf(t).R_(e)}function j8(t){t.Q_=new Pne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zf(t).start(),t.q_.v_()}function A8(t){return S0(t)&&!zf(t).n_()&&t.N_.size>0}function S0(t){return Ut(t).L_.size===0}function Fq(t){t.Q_=void 0}async function zae(t){t.q_.set("Online")}async function Uae(t){t.N_.forEach(((e,r)=>{T8(t,e)}))}async function Vae(t,e){Fq(t),A8(t)?(t.q_.M_(e),j8(t)):t.q_.set("Unknown")}async function Fae(t,e,r){if(t.q_.set("Online"),e instanceof oq&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $v(t,n)}else if(e instanceof hv?t.Q_.Ke(e):e instanceof sq?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Wt.min()))try{const n=await Dq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(va.EMPTY_BYTE_STRING,p.snapshotVersion)),Vq(i,d);const m=new Ql(p.target,d,h,p.sequenceNumber);T8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){lt("RemoteStore","Failed to raise snapshot:",n),await $v(t,n)}}async function $v(t,e,r){if(!Fu(e))throw e;t.L_.add(1),await yx(t),t.q_.set("Offline"),r||(r=()=>Dq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{lt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await C2(t)}))}function qq(t,e){return e().catch((r=>$v(t,r,e)))}async function $f(t){const e=Ut(t),r=Pu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qae(e);)try{const a=await Cae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Hae(e,a)}catch(a){await $v(e,a)}Hq(e)&&Gq(e)}function qae(t){return S0(t)&&t.O_.length<10}function Hae(t,e){t.O_.push(e);const r=Pu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Hq(t){return S0(t)&&!Pu(t).n_()&&t.O_.length>0}function Gq(t){Pu(t).start()}async function Gae(t){Pu(t).p_()}async function Wae(t){const e=Pu(t);for(const r of t.O_)e.m_(r.mutations)}async function Kae(t,e,r){const n=t.O_.shift(),a=p8.from(n,e,r);await qq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await $f(t)}async function Qae(t,e){e&&Pu(t).V_&&await(async function(n,a){if((function(o){return aq(o)&&o!==qe.ABORTED})(a.code)){const i=n.O_.shift();Pu(n).s_(),await qq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await $f(n)}})(t,e),Hq(t)&&Gq(t)}async function iR(t,e){const r=Ut(t);r.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const n=S0(r);r.L_.add(3),await yx(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await C2(r)}async function PT(t,e){const r=Ut(t);e?(r.L_.delete(2),await C2(r)):e||(r.L_.add(2),await yx(r),r.q_.set("Unknown"))}function zf(t){return t.K_||(t.K_=(function(r,n,a){const i=Ut(r);return i.w_(),new Dae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:zae.bind(null,t),Ro:Uae.bind(null,t),mo:Vae.bind(null,t),d_:Fae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),A8(t)?j8(t):t.q_.set("Unknown")):(await t.K_.stop(),Fq(t))}))),t.K_}function Pu(t){return t.U_||(t.U_=(function(r,n,a){const i=Ut(r);return i.w_(),new Pae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Gae.bind(null,t),mo:Qae.bind(null,t),f_:Wae.bind(null,t),g_:Kae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await $f(t)):(await t.U_.stop(),t.O_.length>0&&(lt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new E8(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k8(t,e){if(ma("AsyncQueue",`${e}: ${t}`),Fu(t))return new mt(qe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.comparator=e?(r,n)=>e(r,n)||_t.comparator(r.key,n.key):(r,n)=>_t.comparator(r.key,n.key),this.keyedMap=xm(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new Ih(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ih)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ih;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.W_=new Bn(_t.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Mt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class tf{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new tf(e,r,Ih.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&N2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Yae{constructor(){this.queries=oR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Ut(r),i=a.queries;a.queries=oR(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new mt(qe.ABORTED,"Firestore shutting down"))}}function oR(){return new qu((t=>qF(t)),N2)}async function C8(t,e){const r=Ut(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new Xae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=k8(o,`Initialization of query '${bh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&I8(r)}async function O8(t,e){const r=Ut(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Jae(t,e){const r=Ut(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&I8(r)}function Zae(t,e,r){const n=Ut(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function I8(t){t.Y_.forEach((e=>{e.next()}))}var LT,lR;(lR=LT||(LT={})).ea="default",lR.Cache="cache";class R8{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new tf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==LT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e){this.key=e}}class Kq{constructor(e){this.key=e}}class eie{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ar(),this.mutatedKeys=Ar(),this.Aa=GF(e),this.Ra=new Ih(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new sR,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const x=a.get(p),y=px(this.query,m)?m:null,S=!!x&&this.mutatedKeys.has(x.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;x&&y?x.data.isEqual(y.data)?S!==N&&(n.track({type:3,doc:y}),w=!0):this.ga(x,y)||(n.track({type:2,doc:y}),w=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),w=!0):x&&!y&&(n.track({type:1,doc:x}),w=!0,(d||h)&&(c=!0)),w&&(y?(o=o.add(y),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(y,S){const N=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return N(y)-N(S)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new tf(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ar(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new Kq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new Wq(n))})),r}ba(e){this.Ta=e.Ts,this.da=Ar();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return tf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tie{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class rie{constructor(e){this.key=e,this.va=!1}}class nie{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new qu((c=>qF(c)),N2),this.Ma=new Map,this.xa=new Set,this.Oa=new Bn(_t.comparator),this.Na=new Map,this.La=new b8,this.Ba={},this.ka=new Map,this.qa=n0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aie(t,e,r=!0){const n=I2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await Qq(n,e,r,!0),a}async function iie(t,e){const r=I2(t);await Qq(r,e,!0,!1)}async function Qq(t,e,r,n){const a=await Pv(t.localStore,Os(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await M8(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&O2(t.remoteStore,a),c}async function M8(t,e,r,n,a){t.Ka=(m,x,y)=>(async function(N,w,E,O){let R=w.view.ma(E);R.ns&&(R=await MT(N.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,R))));const P=O&&O.targetChanges.get(w.targetId),I=O&&O.targetMismatches.get(w.targetId)!=null,k=w.view.applyChanges(R,N.isPrimaryClient,P,I);return BT(N,w.targetId,k.wa),k.snapshot})(t,m,x,y);const i=await MT(t.localStore,e,!0),o=new eie(e,i.Ts),c=o.ma(i.documents),d=xx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);BT(t,r,h.wa);const p=new tie(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function sie(t,e,r){const n=Ut(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!N2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Zh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&ef(n.remoteStore,a.targetId),rf(n,a.targetId)})).catch(Vu)):(rf(n,a.targetId),await Zh(n.localStore,a.targetId,!0))}async function oie(t,e){const r=Ut(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ef(r.remoteStore,n.targetId))}async function lie(t,e,r){const n=B8(t);try{const a=await(function(o,c){const d=Ut(o),h=ra.now(),p=c.reduce(((y,S)=>y.add(S.key)),Ar());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let S=ks(),N=Ar();return d.cs.getEntries(y,p).next((w=>{S=w,S.forEach(((E,O)=>{O.isValidDocument()||(N=N.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,S))).next((w=>{m=w;const E=[];for(const O of c){const R=Ine(O,m.get(O.key).overlayedDocument);R!=null&&E.push(new vc(O.key,R,MF(R.value.mapValue),ga.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,E,c)})).next((w=>{x=w;const E=w.applyToLocalDocumentSet(m,N);return d.documentOverlayCache.saveOverlays(y,w.batchId,E)}))})).then((()=>({batchId:x.batchId,changes:KF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Bn(mr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Hu(n,a.changes),await $f(n.remoteStore)}catch(a){const i=k8(a,"Failed to persist write");r.reject(i)}}async function Xq(t,e){const r=Ut(t);try{const n=await Eae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Ft(o.va):a.removedDocuments.size>0&&(Ft(o.va),o.va=!1))})),await Hu(r,n,e)}catch(n){await Vu(n)}}function cR(t,e,r){const n=Ut(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Ut(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.j_)x.Z_(c)&&(h=!0)})),h&&I8(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function cie(t,e,r){const n=Ut(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new Bn(_t.comparator);o=o.insert(i,Wn.newNoDocument(i,Wt.min()));const c=Ar().add(i),d=new gx(Wt.min(),new Map,new Bn(mr),o,c);await Xq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),L8(n)}else await Zh(n.localStore,e,!1).then((()=>rf(n,e,r))).catch(Vu)}async function uie(t,e){const r=Ut(t),n=e.batch.batchId;try{const a=await Aae(r.localStore,e);P8(r,n,null),D8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Hu(r,a)}catch(a){await Vu(a)}}async function die(t,e,r){const n=Ut(t);try{const a=await(function(o,c){const d=Ut(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Ft(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);P8(n,e,r),D8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Hu(n,a)}catch(a){await Vu(a)}}function D8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function P8(t,e,r){const n=Ut(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function rf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||Yq(t,n)}))}function Yq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(ef(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),L8(t))}function BT(t,e,r){for(const n of r)n instanceof Wq?(t.La.addReference(n.key,e),hie(t,n)):n instanceof Kq?(lt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Yq(t,n.key)):Mt()}function hie(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(lt("SyncEngine","New document in limbo: "+r),t.xa.add(n),L8(t))}function L8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new _t(Kr.fromString(e)),n=t.qa.next();t.Na.set(n,new rie(r)),t.Oa=t.Oa.insert(r,n),O2(t.remoteStore,new Ql(Os(fx(r.path)),n,"TargetPurposeLimboResolution",ns.oe))}}async function Hu(t,e,r){const n=Ut(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=S8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=Ut(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ie.forEach(h,(x=>Ie.forEach(x.$i,(y=>p.persistence.referenceDelegate.addReference(m,x.targetId,y))).next((()=>Ie.forEach(x.Ui,(y=>p.persistence.referenceDelegate.removeReference(m,x.targetId,y)))))))))}catch(m){if(!Fu(m))throw m;lt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const y=p.os.get(x),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);p.os=p.os.insert(x,N)}}})(n.localStore,i))}async function fie(t,e){const r=Ut(t);if(!r.currentUser.isEqual(e)){lt("SyncEngine","User change. New user:",e.toKey());const n=await Mq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new mt(qe.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hu(r,n.hs)}}function pie(t,e){const r=Ut(t),n=r.Na.get(e);if(n&&n.va)return Ar().add(n.key);{let a=Ar();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function mie(t,e){const r=Ut(t),n=await MT(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&BT(r,e.targetId,a.wa),a}async function gie(t,e){const r=Ut(t);return Lq(r.localStore,e).then((n=>Hu(r,n)))}async function xie(t,e,r,n){const a=Ut(t),i=await(function(c,d){const h=Ut(c),p=Ut(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((x=>x?h.localDocuments.getDocuments(m,x):Ie.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await $f(a.remoteStore):r==="acknowledged"||r==="rejected"?(P8(a,e,n||null),D8(a,e),(function(c,d){Ut(Ut(c).mutationQueue).On(d)})(a.localStore,e)):Mt(),await Hu(a,i)):lt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yie(t,e){const r=Ut(t);if(I2(r),B8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await uR(r,n.toArray());r.Qa=!0,await PT(r.remoteStore,!0);for(const i of a)O2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(rf(r,o),Zh(r.localStore,o,!0)))),ef(r.remoteStore,o)})),await a,await uR(r,n),(function(o){const c=Ut(o);c.Na.forEach(((d,h)=>{ef(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Bn(_t.comparator)})(r),r.Qa=!1,await PT(r.remoteStore,!1)}}async function uR(t,e,r){const n=Ut(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await Pv(n.localStore,Os(d[0]));for(const h of d){const p=n.Fa.get(h),m=await mie(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await Pq(n.localStore,o);c=await Pv(n.localStore,h),await M8(n,Jq(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function Jq(t){return VF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vie(t){return(function(r){return Ut(Ut(r).persistence).Qi()})(Ut(t).localStore)}async function bie(t,e,r,n){const a=Ut(t);if(a.Qa)return void lt("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Lq(a.localStore,HF(i[0])),c=gx.createSynthesizedRemoteEventForCurrentChange(e,r==="current",va.EMPTY_BYTE_STRING);await Hu(a,o,c);break}case"rejected":await Zh(a.localStore,e,!0),rf(a,e,n);break;default:Mt()}}async function wie(t,e,r){const n=I2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){lt("SyncEngine","Adding an already active target "+a);continue}const i=await Pq(n.localStore,a),o=await Pv(n.localStore,i);await M8(n,Jq(i),o.targetId,!1,o.resumeToken),O2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Zh(n.localStore,a,!1).then((()=>{ef(n.remoteStore,a),rf(n,a)})).catch(Vu)}}function I2(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cie.bind(null,e),e.Ca.d_=Jae.bind(null,e.eventManager),e.Ca.$a=Zae.bind(null,e.eventManager),e}function B8(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=die.bind(null,e),e}class cg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=k2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Rq(this.persistence,new Iq,e.initialUser,this.serializer)}Ga(e){return new Cq(E2.Zr,this.serializer)}Wa(e){return new $q}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cg.provider={build:()=>new cg};class Zq extends cg{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await B8(this.Ja.syncEngine),await $f(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return Rq(this.persistence,new Iq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new cae(n,e.asyncQueue,r)}Ha(e,r){const n=new Fre(r,this.persistence);return new Vre(e.asyncQueue,n)}Ga(e){const r=Oq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new w8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,zq(),fv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $q}}class Sie extends Zq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof c3&&(this.sharedClientState.syncEngine={no:xie.bind(null,r),ro:bie.bind(null,r),io:wie.bind(null,r),Qi:vie.bind(null,r),eo:gie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await yie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=zq();if(!c3.D(r))throw new mt(qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Oq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new c3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class ug{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fie.bind(null,this.syncEngine),await PT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Yae})()}createDatastore(e){const r=k2(e.databaseInfo.databaseId),n=(function(i){return new Mae(i)})(e.databaseInfo);return(function(i,o,c,d){return new Lae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new $ae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>cR(this.syncEngine,r,0)),(function(){return aR.D()?new aR:new Oae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new nie(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Ut(a);lt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await yx(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ug.provider={build:()=>new ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new mt(qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=Ut(a),c={documents:i.map((m=>og(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Kr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const x=Fne(o.serializer,m);h.set(x.key.toString(),x)}));const p=[];return i.forEach((m=>{const x=h.get(m.toString());Ft(!!x),p.push(x)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new mx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=_t.fromPath(n);this.mutations.push(new h8(a,this.precondition(a)))})),await(async function(n,a){const i=Ut(n),o={writes:a.map((c=>lg(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Kr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Mt();r=Wt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new mt(qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Wt.min())?ga.exists(!1):ga.updateTime(r):ga.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Wt.min()))throw new mt(qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ga.updateTime(r)}return ga.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new _8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Nie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!dx(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!aq(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=ji.UNAUTHENTICATED,this.clientId=yF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{lt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(lt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=k8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function d3(t,e){t.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await Mq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function dR(t,e){t.asyncQueue.verifyOperationInProgress();const r=await jie(t);lt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>iR(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>iR(e.remoteStore,a))),t._onlineComponents=e}async function jie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await d3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===qe.FAILED_PRECONDITION||a.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Ym("Error using user provided cache. Falling back to memory cache: "+r),await d3(t,new cg)}}else lt("FirestoreClient","Using default OfflineComponentProvider"),await d3(t,new cg);return t._offlineComponents}async function z8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lt("FirestoreClient","Using user provided OnlineComponentProvider"),await dR(t,t._uninitializedComponentsProvider._online)):(lt("FirestoreClient","Using default OnlineComponentProvider"),await dR(t,new ug))),t._onlineComponents}function Aie(t){return z8(t).then((e=>e.syncEngine))}function Eie(t){return z8(t).then((e=>e.datastore))}async function zv(t){const e=await z8(t),r=e.eventManager;return r.onListen=aie.bind(null,e.syncEngine),r.onUnlisten=sie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=iie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=oie.bind(null,e.syncEngine),r}function kie(t,e,r={}){const n=new Co;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new $8({next:x=>{p.Za(),o.enqueueAndForget((()=>O8(i,m)));const y=x.docs.has(c);!y&&x.fromCache?h.reject(new mt(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new mt(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new R8(fx(c.path),p,{includeMetadataChanges:!0,_a:!0});return C8(i,m)})(await zv(t),t.asyncQueue,e,r,n))),n.promise}function Cie(t,e,r={}){const n=new Co;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new $8({next:x=>{p.Za(),o.enqueueAndForget((()=>O8(i,m))),x.fromCache&&d.source==="server"?h.reject(new mt(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new R8(c,p,{includeMetadataChanges:!0,_a:!0});return C8(i,m)})(await zv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(t,e,r){if(!r)throw new mt(qe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Oie(t,e,r,n){if(e===!0&&n===!0)throw new mt(qe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function fR(t){if(!_t.isDocumentKey(t))throw new mt(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pR(t){if(_t.isDocumentKey(t))throw new mt(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function R2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Mt()}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new mt(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=R2(t);throw new mt(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Iie(t,e){if(e<=0)throw new mt(qe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new mt(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Oie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eH((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U8{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new mt(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Ire;switch(n.type){case"firstParty":return new Dre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new mt(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=hR.get(r);n&&(lt("ComponentProvider","Removing Datastore"),hR.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bc(this.firestore,e,this._query)}}class vi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class Eu extends bc{constructor(e,r,n){super(e,r,fx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new _t(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Gt(t,e,...r){if(t=An(t),tH("collection","path",e),t instanceof U8){const n=Kr.fromString(e,...r);return pR(n),new Eu(t,null,n)}{if(!(t instanceof vi||t instanceof Eu))throw new mt(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kr.fromString(e,...r));return pR(n),new Eu(t.firestore,null,n)}}function ut(t,e,...r){if(t=An(t),arguments.length===1&&(e=yF.newId()),tH("doc","path",e),t instanceof U8){const n=Kr.fromString(e,...r);return fR(n),new vi(t,null,new _t(n))}{if(!(t instanceof vi||t instanceof Eu))throw new mt(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kr.fromString(e,...r));return fR(n),new vi(t.firestore,t instanceof Eu?t.converter:null,new _t(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _8(this,"async_queue_retry"),this.Vu=()=>{const n=fv();n&&lt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=fv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=fv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Co;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fu(e))throw e;lt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw ma("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=E8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Mt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function xR(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class sl extends U8{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new gR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gR(e),this._firestoreClient=void 0,await e}}}function Rie(t,e,r){r||(r="(default)");const n=ox(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(qh(i,e))return a;throw new mt(qe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new mt(qe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function vx(t){if(t._terminated)throw new mt(qe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Mie(t),t._firestoreClient}function Mie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new une(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,eH(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Tie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new a0(va.fromBase64String(e))}catch(r){throw new mt(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new a0(va.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new mt(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ta(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new mt(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new mt(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Die=/^__.*__$/;class Pie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new vc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bf(e,this.data,r,this.fieldTransforms)}}class rH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new vc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function nH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class M2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new M2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nH(this.Cu)&&Die.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Lie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||k2(e)}Qu(e,r,n,a=!1){return new M2({Cu:e,methodName:r,qu:n,path:ta.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sx(t){const e=t._freezeSettings(),r=k2(t._databaseId);return new Lie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function q8(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);W8("Data must be an object, but it was:",o,n);const c=sH(n,o);let d,h;if(i.merge)d=new as(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=$T(e,m,r);if(!o.contains(x))throw new mt(qe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);lH(p,x)||p.push(x)}d=new as(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new Pie(new yi(c),d,h)}class D2 extends wx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof D2}}function Bie(t,e,r){return new M2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class H8 extends wx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Bie(this,e,!0),n=this.Ku.map((i=>Uf(i,r))),a=new e0(n);return new d8(e.path,a)}isEqual(e){return e instanceof H8&&qh(this.Ku,e.Ku)}}class G8 extends wx{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Yh(e.serializer,YF(e.serializer,this.$u));return new d8(e.path,r)}isEqual(e){return e instanceof G8&&this.$u===e.$u}}function aH(t,e,r,n){const a=t.Qu(1,e,r);W8("Data must be an object, but it was:",a,n);const i=[],o=yi.empty();w0(n,((d,h)=>{const p=K8(e,d,r);h=An(h);const m=a.Nu(p);if(h instanceof D2)i.push(p);else{const x=Uf(h,m);x!=null&&(i.push(p),o.set(p,x))}}));const c=new as(i);return new rH(o,c,a.fieldTransforms)}function iH(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[$T(e,n,r)],d=[a];if(i.length%2!=0)throw new mt(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push($T(e,i[x])),d.push(i[x+1]);const h=[],p=yi.empty();for(let x=c.length-1;x>=0;--x)if(!lH(h,c[x])){const y=c[x];let S=d[x];S=An(S);const N=o.Nu(y);if(S instanceof D2)h.push(y);else{const w=Uf(S,N);w!=null&&(h.push(y),p.set(y,w))}}const m=new as(h);return new rH(p,m,o.fieldTransforms)}function $ie(t,e,r,n=!1){return Uf(r,t.Qu(n?4:3,e))}function Uf(t,e){if(oH(t=An(t)))return W8("Unsupported field value:",e,t),sH(t,e);if(t instanceof wx)return(function(n,a){if(!nH(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Uf(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=An(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return YF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ra.fromDate(n);return{timestampValue:Jh(a.serializer,i)}}if(n instanceof ra){const i=new ra(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jh(a.serializer,i)}}if(n instanceof V8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof a0)return{bytesValue:lq(a.serializer,n._byteString)};if(n instanceof vi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:x8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof F8)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return u8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${R2(n)}`)})(t,e)}function sH(t,e){const r={};return CF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):w0(t,((n,a)=>{const i=Uf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function oH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ra||t instanceof V8||t instanceof a0||t instanceof vi||t instanceof wx||t instanceof F8)}function W8(t,e,r){if(!oH(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=R2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function $T(t,e,r){if((e=An(e))instanceof bx)return e._internalPath;if(typeof e=="string")return K8(t,e);throw Uv("Field path arguments must be of type string or ",t,!1,void 0,r)}const zie=new RegExp("[~\\*/\\[\\]]");function K8(t,e,r){if(e.search(zie)>=0)throw Uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new bx(...e.split("."))._internalPath}catch{throw Uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Uv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new mt(qe.INVALID_ARGUMENT,c+t+d)}function lH(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(P2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Uie extends Vv{data(){return super.data()}}function P2(t,e){return typeof e=="string"?K8(t,e):e instanceof bx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new mt(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q8{}class X8 extends Q8{}function zr(t,e,...r){let n=[];e instanceof Q8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof Y8)).length,c=i.filter((d=>d instanceof L2)).length;if(o>1||o>0&&c>0)throw new mt(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class L2 extends X8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new L2(e,r,n)}_apply(e){const r=this._parse(e);return uH(e._query,r),new bc(e.firestore,e.converter,jT(e._query,r))}_parse(e){const r=Sx(e.firestore);return(function(i,o,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new mt(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){vR(m,p);const y=[];for(const S of m)y.push(yR(d,i,S));x={arrayValue:{values:y}}}else x=yR(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||vR(m,p),x=$ie(c,o,m,p==="in"||p==="not-in");return Dr.create(h,p,x)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function pn(t,e,r){const n=e,a=P2("where",t);return L2._create(a,n,r)}class Y8 extends Q8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Y8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:mn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)uH(o,d),o=jT(o,d)})(e._query,r),new bc(e.firestore,e.converter,jT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J8 extends X8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new J8(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new mt(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new mt(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ig(i,o)})(e._query,this._field,this._direction);return new bc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Lf(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function qo(t,e="asc"){const r=e,n=P2("orderBy",t);return J8._create(n,r)}class Z8 extends X8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Z8(e,r,n)}_apply(e){return new bc(e.firestore,e.converter,Iv(e._query,this._limit,this._limitType))}}function vo(t){return Iie("limit",t),Z8._create("limit",t,"F")}function yR(t,e,r){if(typeof(r=An(r))=="string"){if(r==="")throw new mt(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FF(e)&&r.indexOf("/")!==-1)throw new mt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Kr.fromString(r));if(!_t.isDocumentKey(n))throw new mt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ng(t,new _t(n))}if(r instanceof vi)return ng(t,r._key);throw new mt(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${R2(r)}.`)}function vR(t,e){if(!Array.isArray(t)||t.length===0)throw new mt(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uH(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new mt(qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new mt(qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class dH{convertValue(e,r="none"){switch(Jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Mt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return w0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Gn(o.doubleValue)));return new F8(i)}convertGeoPoint(e){return new V8(Gn(e.latitude),Gn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=o8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(tg(e));default:return null}}convertTimestamp(e){const r=uc(e);return new ra(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Kr.fromString(e);Ft(yq(n));const a=new Yd(n.get(1),n.get(3)),i=new _t(n.popFirst(5));return a.isEqual(r)||ma(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Vie extends dH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tE extends Vv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new pv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(P2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class pv extends tE{data(e={}){return super.data(e)}}class hH{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new _h(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new pv(this._firestore,this._userDataWriter,n.key,n,new _h(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new mt(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new pv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new _h(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new pv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new _h(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Fie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Fie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){t=ss(t,vi);const e=ss(t.firestore,sl);return kie(vx(e),t._key).then((r=>fH(e,t,r)))}class B2 extends dH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,r)}}function bd(t){t=ss(t,bc);const e=ss(t.firestore,sl),r=vx(e),n=new B2(e);return cH(t._query),Cie(r,t._query).then((a=>new hH(e,n,t,a)))}function Zn(t,e,r){t=ss(t,vi);const n=ss(t.firestore,sl),a=eE(t.converter,e,r);return $2(n,[q8(Sx(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ga.none())])}function ur(t,e,r,...n){t=ss(t,vi);const a=ss(t.firestore,sl),i=Sx(a);let o;return o=typeof(e=An(e))=="string"||e instanceof bx?iH(i,"updateDoc",t._key,e,r,n):aH(i,"updateDoc",t._key,e),$2(a,[o.toMutation(t._key,ga.exists(!0))])}function Ja(t){return $2(ss(t.firestore,sl),[new mx(t._key,ga.none())])}function Ll(t,e){const r=ss(t.firestore,sl),n=ut(t),a=eE(t.converter,e);return $2(r,[q8(Sx(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ga.exists(!1))]).then((()=>n))}function Ur(t,...e){var r,n,a;t=An(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||xR(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(xR(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof vi)h=ss(t.firestore,sl),p=fx(t._key.path),d={next:m=>{e[o]&&e[o](fH(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ss(t,bc);h=ss(m.firestore,sl),p=m._query;const x=new B2(h);d={next:y=>{e[o]&&e[o](new hH(h,x,m,y))},error:e[o+1],complete:e[o+2]},cH(t._query)}return(function(x,y,S,N){const w=new $8(N),E=new R8(y,w,S);return x.asyncQueue.enqueueAndForget((async()=>C8(await zv(x),E))),()=>{w.Za(),x.asyncQueue.enqueueAndForget((async()=>O8(await zv(x),E)))}})(vx(h),p,c,d)}function $2(t,e){return(function(n,a){const i=new Co;return n.asyncQueue.enqueueAndForget((async()=>lie(await Aie(n),a,i))),i.promise})(vx(t),e)}function fH(t,e,r){const n=r.docs.get(e._key),a=new B2(t);return new tE(t,a,e._key,n,new _h(r.hasPendingWrites,r.fromCache),e.converter)}class qie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Kie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Hie(t){return new qie(t)}class Gie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ug.provider,this._offlineComponentProvider={build:r=>new Zq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Wie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ug.provider,this._offlineComponentProvider={build:r=>new Sie(r,e==null?void 0:e.cacheSizeBytes)}}}function Kie(t){return new Gie(void 0)}function Qie(){return new Wie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie={maxAttempts:5};function em(t,e){if((t=An(t)).firestore!==e)throw new mt(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Sx(r)}get(r){const n=em(r,this._firestore),a=new Vie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Mt();const o=i[0];if(o.isFoundDocument())return new Vv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Vv(this._firestore,a,n._key,null,n.converter);throw Mt()}))}set(r,n,a){const i=em(r,this._firestore),o=eE(i.converter,n,a),c=q8(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=em(r,this._firestore);let c;return c=typeof(n=An(n))=="string"||n instanceof bx?iH(this._dataReader,"Transaction.update",o._key,n,a,i):aH(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=em(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=em(e,this._firestore),n=new B2(this._firestore);return super.get(e).then((a=>new tE(this._firestore,n,r._key,a._document,new _h(!1,!1),r.converter)))}}function h3(t,e,r){t=ss(t,sl);const n=Object.assign(Object.assign({},Xie),r);return(function(i){if(i.maxAttempts<1)throw new mt(qe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new Co;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Eie(i);new _ie(i.asyncQueue,h,c,o,d).au()})),d.promise})(vx(t),(a=>e(new Yie(t,a))),n)}function bR(...t){return new H8("arrayUnion",t)}function tm(t){return new G8("increment",t)}(function(e,r=!0){(function(a){Pf=a})(b0),Ru(new oc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new sl(new Rre(n.getProvider("auth-internal")),new Lre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new mt(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yd(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ro(dI,"4.7.3",e),ro(dI,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH="firebasestorage.googleapis.com",mH="storageBucket",Jie=120*1e3,Zie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Ro{constructor(e,r,n=0){super(f3(e),`Firebase Storage: ${r} (${f3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ca.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var la;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(la||(la={}));function f3(t){return"storage/"+t}function rE(){const t="An unknown error occurred, please check the error payload for server response.";return new ca(la.UNKNOWN,t)}function ese(t){return new ca(la.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tse(t){return new ca(la.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rse(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ca(la.UNAUTHENTICATED,t)}function nse(){return new ca(la.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ase(t){return new ca(la.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ise(){return new ca(la.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sse(){return new ca(la.CANCELED,"User canceled the upload/download.")}function ose(t){return new ca(la.INVALID_URL,"Invalid URL '"+t+"'.")}function lse(t){return new ca(la.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cse(){return new ca(la.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mH+"' property when initializing the app?")}function use(){return new ca(la.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dse(){return new ca(la.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hse(t){return new ca(la.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zT(t){return new ca(la.INVALID_ARGUMENT,t)}function gH(){return new ca(la.APP_DELETED,"The Firebase app was deleted.")}function fse(t){return new ca(la.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Om(t,e){return new ca(la.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rm(t){throw new ca(la.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Cs.makeFromUrl(e,r)}catch{return new Cs(e,"")}if(n.path==="")return n;throw lse(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${p}/b/${a}/o${x}`,"i"),S={bucket:1,path:3},N=r===pH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",E=new RegExp(`^https?://${N}/${a}/${w}`,"i"),R=[{regex:c,indices:d,postModify:i},{regex:y,indices:S,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<R.length;P++){const I=R[P],k=I.regex.exec(e);if(k){const A=k[I.indices.bucket];let j=k[I.indices.path];j||(j=""),n=new Cs(A,j),I.postModify(n);break}}if(n==null)throw ose(e);return n}}class pse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mse(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(y,d())},w)}function x(){i&&clearTimeout(i)}function y(w,...E){if(h){x();return}if(w){x(),p.call(null,w,...E);return}if(d()||o){x(),p.call(null,w,...E);return}n<64&&(n*=2);let R;c===1?(c=2,R=0):R=(n+Math.random())*1e3,m(R)}let S=!1;function N(w){S||(S=!0,x(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,N(!0)},r),N}function gse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xse(t){return t!==void 0}function yse(t){return typeof t=="object"&&!Array.isArray(t)}function nE(t){return typeof t=="string"||t instanceof String}function wR(t){return aE()&&t instanceof Blob}function aE(){return typeof Blob<"u"}function SR(t,e,r,n){if(n<e)throw zT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw zT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function xH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Gd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gd||(Gd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vse(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bse{constructor(e,r,n,a,i,o,c,d,h,p,m,x=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new by(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Gd.NO_ERROR,d=i.getStatus();if(!c||vse(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Gd.ABORT;n(!1,new by(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new by(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());xse(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=rE();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?gH():sse();o(d)}else{const d=ise();o(d)}};this.canceled_?r(!1,new by(!1,null,!0)):this.backoffId_=mse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class by{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function wse(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Sse(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nse(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _se(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Tse(t,e,r,n,a,i,o=!0){const c=xH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Nse(h,e),wse(h,r),Sse(h,i),_se(h,n),new bse(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ase(...t){const e=jse();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(aE())return new Blob(t);throw new ca(la.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ese(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kse(t){if(typeof atob>"u")throw hse("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p3{constructor(e,r){this.data=e,this.contentType=r||null}}function Cse(t,e){switch(t){case Yo.RAW:return new p3(yH(e));case Yo.BASE64:case Yo.BASE64URL:return new p3(vH(t,e));case Yo.DATA_URL:return new p3(Ise(e),Rse(e))}throw rE()}function yH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Ose(t){let e;try{e=decodeURIComponent(t)}catch{throw Om(Yo.DATA_URL,"Malformed data URL.")}return yH(e)}function vH(t,e){switch(t){case Yo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Om(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Yo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Om(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=kse(e)}catch(a){throw a.message.includes("polyfill")?a:Om(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class bH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Om(Yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Mse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Ise(t){const e=new bH(t);return e.base64?vH(Yo.BASE64,e.rest):Ose(e.rest)}function Rse(t){return new bH(t).contentType}function Mse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,r){let n=0,a="";wR(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(wR(this.data_)){const n=this.data_,a=Ese(n,e,r);return a===null?null:new fu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new fu(n,!0)}}static getBlob(...e){if(aE()){const r=e.map(n=>n instanceof fu?n.data_:n);return new fu(Ase.apply(null,r))}else{const r=e.map(o=>nE(o)?Cse(Yo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new fu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t){let e;try{e=JSON.parse(t)}catch{return null}return yse(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Pse(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function SH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lse(t,e){return e}class Ri{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Lse}}let wy=null;function Bse(t){return!nE(t)||t.length<2?t:SH(t)}function NH(){if(wy)return wy;const t=[];t.push(new Ri("bucket")),t.push(new Ri("generation")),t.push(new Ri("metageneration")),t.push(new Ri("name","fullPath",!0));function e(i,o){return Bse(o)}const r=new Ri("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Ri("size");return a.xform=n,t.push(a),t.push(new Ri("timeCreated")),t.push(new Ri("updated")),t.push(new Ri("md5Hash",null,!0)),t.push(new Ri("cacheControl",null,!0)),t.push(new Ri("contentDisposition",null,!0)),t.push(new Ri("contentEncoding",null,!0)),t.push(new Ri("contentLanguage",null,!0)),t.push(new Ri("contentType",null,!0)),t.push(new Ri("metadata","customMetadata",!0)),wy=t,wy}function $se(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Cs(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function zse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return $se(n,t),n}function _H(t,e,r){const n=wH(e);return n===null?null:zse(t,n,r)}function Use(t,e,r,n){const a=wH(e);if(a===null||!nE(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,x="/b/"+o(p)+"/o/"+o(m),y=z2(x,r,n),S=xH({alt:"media",token:h});return y+S})[0]}function Vse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class iE{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t){if(!t)throw rE()}function Fse(t,e){function r(n,a){const i=_H(t,a,e);return TH(i!==null),i}return r}function qse(t,e){function r(n,a){const i=_H(t,a,e);return TH(i!==null),Use(i,a,t.host,t._protocol)}return r}function jH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=nse():a=rse():r.getStatus()===402?a=tse(t.bucket):r.getStatus()===403?a=ase(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function AH(t){const e=jH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=ese(t.path)),i.serverResponse=a.serverResponse,i}return r}function Hse(t,e,r){const n=e.fullServerUrl(),a=z2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new iE(a,i,qse(t,r),o);return c.errorHandler=AH(e),c}function Gse(t,e){const r=e.fullServerUrl(),n=z2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new iE(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=AH(e),c}function Wse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Wse(null,e)),n}function Qse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let R="";for(let P=0;P<2;P++)R=R+Math.random().toString().slice(2);return R}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Kse(e,n,a),p=Vse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+d+"--",y=fu.getBlob(m,n,x);if(y===null)throw use();const S={name:h.fullPath},N=z2(i,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,O=new iE(N,w,Fse(t,r),E);return O.urlParams=S,O.headers=o,O.body=y.uploadData(),O.errorHandler=jH(e),O}class Xse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw rm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Yse extends Xse{initXhr(){this.xhr_.responseType="text"}}function sE(){return new Yse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,r){this._service=e,r instanceof Cs?this._location=r:this._location=Cs.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new i0(e,r)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SH(this._location.path)}get storage(){return this._service}get parent(){const e=Dse(this._location.path);if(e===null)return null;const r=new Cs(this._location.bucket,e);return new i0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw fse(e)}}function Jse(t,e,r){t._throwIfRoot("uploadBytes");const n=Qse(t.storage,t._location,NH(),new fu(e,!0),r);return t.storage.makeRequestWithTokens(n,sE).then(a=>({metadata:a,ref:t}))}function Zse(t){t._throwIfRoot("getDownloadURL");const e=Hse(t.storage,t._location,NH());return t.storage.makeRequestWithTokens(e,sE).then(r=>{if(r===null)throw dse();return r})}function eoe(t){t._throwIfRoot("deleteObject");const e=Gse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,sE)}function toe(t,e){const r=Pse(t._location.path,e),n=new Cs(t._location.bucket,r);return new i0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function roe(t){return/^[A-Za-z]+:\/\//.test(t)}function noe(t,e){return new i0(t,e)}function EH(t,e){if(t instanceof oE){const r=t;if(r._bucket==null)throw cse();const n=new i0(r,r._bucket);return e!=null?EH(n,e):n}else return e!==void 0?toe(t,e):t}function aoe(t,e){if(e&&roe(e)){if(t instanceof oE)return noe(t,e);throw zT("To use ref(service, url), the first argument must be a Storage instance.")}else return EH(t,e)}function NR(t,e){const r=e==null?void 0:e[mH];return r==null?null:Cs.makeFromBucketSpec(r,t)}function ioe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:lZ(a,t.app.options.projectId))}class oE{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=pH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Jie,this._maxUploadRetryTime=Zie,this._requests=new Set,a!=null?this._bucket=Cs.makeFromBucketSpec(a,this._host):this._bucket=NR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cs.makeFromBucketSpec(this._url,e):this._bucket=NR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new i0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new pse(gH());{const o=Tse(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const _R="@firebase/storage",TR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="storage";function UT(t,e,r){return t=An(t),Jse(t,e,r)}function Fv(t){return t=An(t),Zse(t)}function soe(t){return t=An(t),eoe(t)}function Im(t,e){return t=An(t),aoe(t,e)}function ooe(t=qA(),e){t=An(t);const n=ox(t,kH).getImmediate({identifier:e}),a=TV("storage");return a&&loe(n,...a),n}function loe(t,e,r,n={}){ioe(t,e,r,n)}function coe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new oE(r,n,a,e,b0)}function uoe(){Ru(new oc(kH,coe,"PUBLIC").setMultipleInstances(!0)),ro(_R,TR,""),ro(_R,TR,"esm2017")}uoe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const doe="type.googleapis.com/google.protobuf.Int64Value",hoe="type.googleapis.com/google.protobuf.UInt64Value";function CH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function VT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>VT(e));if(typeof t=="function"||typeof t=="object")return CH(t,e=>VT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function qv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case doe:case hoe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>qv(e)):typeof t=="function"||typeof t=="object"?CH(t,e=>qv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rh extends Ro{constructor(e,r,n){super(`${lE}/${e}`,r||""),this.details=n}}function foe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function poe(t,e){let r=foe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!jR[o])return new Rh("internal","internal");r=jR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=qv(a))}}catch{}return r==="ok"?null:new Rh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class moe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="us-central1";function goe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Rh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class xoe{constructor(e,r,n,a,i=FT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new moe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=FT}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function yoe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function voe(t,e,r){return(n=>woe(t,e,n,{}))}async function boe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function woe(t,e,r,n){const a=t._url(e);return Soe(t,a,r,n)}async function Soe(t,e,r,n){r=VT(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=goe(c),h=await Promise.race([boe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Rh("cancelled","Firebase Functions instance was deleted.");const p=poe(h.status,h.json);if(p)throw p;if(!h.json)throw new Rh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Rh("internal","Response is missing data field.");return{data:qv(m)}}const AR="@firebase/functions",ER="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Noe="auth-internal",_oe="app-check-internal",Toe="messaging-internal";function joe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(Noe),c=n.getProvider(Toe),d=n.getProvider(_oe);return new xoe(i,o,c,d,a,t)};Ru(new oc(lE,r,"PUBLIC").setMultipleInstances(!0)),ro(AR,ER,e),ro(AR,ER,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aoe(t=qA(),e=FT){const n=ox(An(t),lE).getImmediate({identifier:e}),a=TV("functions");return a&&Eoe(n,...a),n}function Eoe(t,e,r){yoe(An(t),e,r)}function rn(t,e,r){return voe(An(t),e)}joe(fetch.bind(self));const OH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},koe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of koe)if(!OH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const U2=IV(OH),qT=xT(U2),Coe=new Fl,Me=Rie(U2,{localCache:Hie({tabManager:Qie()})}),Rm=ooe(U2),nn=Aoe(U2),Ooe=rn(nn,"awardXP"),Ioe=rn(nn,"acceptQuest"),Roe=rn(nn,"deployMission"),Moe=rn(nn,"resolveQuest"),Doe=rn(nn,"equipItem"),Poe=rn(nn,"unequipItem"),Loe=rn(nn,"disenchantItem"),Boe=rn(nn,"craftItem"),$oe=rn(nn,"adminUpdateInventory"),zoe=rn(nn,"adminUpdateEquipped"),Uoe=rn(nn,"submitEngagement"),Voe=rn(nn,"sendClassMessage");rn(nn,"uploadQuestionBank");const HT=rn(nn,"awardQuestionXP"),Foe=rn(nn,"penalizeWrongAnswer"),qoe=rn(nn,"updateStreak"),Hoe=rn(nn,"claimDailyLogin"),Goe=rn(nn,"spinFortuneWheel"),Woe=rn(nn,"unlockSkill"),Koe=rn(nn,"addSocket"),Qoe=rn(nn,"socketGem"),Xoe=rn(nn,"unsocketGem"),Yoe=rn(nn,"dealBossDamage"),Joe=rn(nn,"answerBossQuiz"),Zoe=rn(nn,"createParty"),ele=rn(nn,"joinParty"),tle=rn(nn,"completeTutoring"),rle=rn(nn,"claimKnowledgeLoot"),nle=rn(nn,"purchaseCosmetic"),ale=rn(nn,"claimDailyChallenge"),ile=rn(nn,"dismissAlert"),Hv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function sle(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,p=(e-r)/n,m=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":m>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":p<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":p<-.5&&p>=-1.5?"COASTING":p>.75&&i>=4&&m<.15&&h>=3?"THRIVING":"ON_TRACK"}const Go={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function ole(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>T.createElement("svg",{ref:d,...cle,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:IH("lucide",a),...c},[...o.map(([h,p])=>T.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(ule,{ref:i,iconNode:e,className:IH(`lucide-${lle(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=$e("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=$e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=$e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=$e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=$e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=$e("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=$e("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=$e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=$e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=$e("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=$e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=$e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=$e("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=$e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=$e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=$e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=$e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=$e("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=$e("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=$e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=$e("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=$e("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=$e("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=$e("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=$e("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=$e("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=$e("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=$e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=$e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=$e("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=$e("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=$e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=$e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=$e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=$e("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=$e("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=$e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=$e("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=$e("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=$e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=$e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=$e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=$e("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=$e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=$e("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=$e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=$e("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=$e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=$e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=$e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=$e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=$e("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=$e("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=$e("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=$e("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=$e("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=$e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=$e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=$e("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=$e("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=$e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=$e("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=$e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=$e("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=$e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=$e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=$e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=$e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=$e("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=$e("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=$e("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=$e("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=$e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=$e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qle=$e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=$e("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=$e("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=$e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hle=$e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=$e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gle=$e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=$e("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kle=$e("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qle=$e("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xle=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=$e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=$e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yle=$e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jle=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zle=$e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=$e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ece="kellporter2@paps.net",KH="Mr. Porter",BR=[{name:"Dashboard",icon:s.jsx(Ele,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(Q2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resource Editor",icon:s.jsx(ni,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(ls,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(ls,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(hg,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(os,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(qn,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(V2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(Gv,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Oo,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(ol,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(W2,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(Gv,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(ll,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(Tle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(vle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(Vf,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(ll,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(ol,{className:"w-5 h-5"}),role:"STUDENT"}],$R=new Set,Ks=(t,e,r)=>$R.has(t)?()=>{}:Ur(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&$R.add(t)}),ke={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ks("xp_events",Gt(Me,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Zn(ut(Me,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Ja(ut(Me,"xp_events",t))},subscribeToQuests:t=>Ks("quests",Gt(Me,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Zn(ut(Me,"quests",t.id),t)},deleteQuest:async t=>{await Ja(ut(Me,"quests",t))},acceptQuest:async(t,e)=>{await Ioe({questId:e})},deployMission:async(t,e)=>{await Roe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Moe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await ke.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Doe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Poe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Loe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Boe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await $oe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await zoe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ut(Me,"users",t);r?await ur(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await ur(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await Voe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ut(Me,"class_messages",t);await h3(Me,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ut(Me,"class_messages",t);await h3(Me,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ut(Me,"class_messages",t);await ur(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Ja(ut(Me,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=zr(Gt(Me,"class_messages"),pn("isFlagged","==",!0),vo(50));return Ur(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ut(Me,"class_messages",t);await ur(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===ke.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await ur(ut(Me,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Ll(Gt(Me,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await ur(ut(Me,"student_groups",t),r)},deleteStudentGroup:async t=>{await Ja(ut(Me,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=zr(Gt(Me,"student_groups"),pn("classType","==",t));return Ur(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Ur(Gt(Me,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=zr(Gt(Me,"student_groups"),pn("memberIds","array-contains",t));return Ur(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=zr(Gt(Me,"class_messages"),pn("channelId","==",t),vo(100));return Ur(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=zr(Gt(Me,"class_messages"),qo("timestamp","desc"),vo(20));return Ks("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=zr(Gt(Me,"conversations"),qo("lastMessageAt","desc"));return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=zr(Gt(Me,`conversations/${t}/messages`),qo("timestamp","asc"));return Ur(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===za.ADMIN?KH:e.name,content:r,timestamp:new Date().toISOString()};await Ll(Gt(Me,`conversations/${t}/messages`),n),await ur(ut(Me,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await ur(ut(Me,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=zr(Gt(Me,"chat_flags"),pn("isResolved","==",!1));return Ur(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await ur(ut(Me,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=zr(Gt(Me,"chat_flags"),pn("messageId","==",t),pn("isResolved","==",!1)),n=(await bd(e)).docs.map(a=>ur(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=zr(Gt(Me,"evidence"),pn("studentId","==",t),pn("weekId","==",e));return Ur(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await Zn(ut(Me,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Im(Rm,n.imageUrl);return soe(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Ja(ut(Me,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Zn(ut(Me,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ut(Me,"users",t);await ur(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await ur(ut(Me,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await ur(ut(Me,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Gt(Me,"users");return Ur(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Gt(Me,"assignments");return Ur(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=zr(Gt(Me,"submissions"),qo("submittedAt","desc"),vo(200));return Ur(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Hv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=zr(Gt(Me,"submissions"),pn("userId","==",t),vo(50));return Ur(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Hv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Gt(Me,"allowed_emails");return Ur(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Gt(Me,"class_configs");return Ur(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await Zn(ut(Me,"assignments",t.id),e,{merge:!0}):await Ll(Gt(Me,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await ur(ut(Me,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Ja(ut(Me,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ut(Me,"allowed_emails",t),n=await pa(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await Zn(r,{classType:e,classTypes:i});const o=zr(Gt(Me,"users"),pn("email","==",t)),c=await bd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await ur(ut(Me,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await ur(ut(Me,"allowed_emails",t),{section:e});const r=zr(Gt(Me,"users"),pn("email","==",t)),n=await bd(r);await Promise.all(n.docs.map(async a=>{await ur(ut(Me,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await ur(ut(Me,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await ur(ut(Me,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Ja(ut(Me,"allowed_emails",t));const e=zr(Gt(Me,"users"),pn("email","==",t)),r=await bd(e);await Promise.all(r.docs.map(async n=>{await ur(ut(Me,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ut(Me,"users",t),n=await pa(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await ur(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await pa(ut(Me,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await Zn(ut(Me,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await pa(ut(Me,"users",t));if(e.exists()){const r=e.data().email;await Ja(ut(Me,"allowed_emails",r))}await Ja(ut(Me,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Zn(ut(Me,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ut(Me,"submissions",i);(await pa(o)).exists()?await ur(o,{"metrics.engagementTime":tm(a),"metrics.lastActive":Date.now()}):await Zn(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ut(Me,"users",t),n=await pa(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await Ja(ut(Me,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await Zn(ut(Me,"allowed_emails",i),{classType:e[0],classTypes:e})),await ur(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ut(Me,"users",t),n=await pa(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await ur(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await Zn(ut(Me,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await ur(ut(Me,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Ooe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await Uoe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=zr(Gt(Me,"users"),pn("role","==","STUDENT"));return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Zn(ut(Me,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Ja(ut(Me,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Im(Rm,`resources/${e}_${t.name}`);return await UT(r,t),await Fv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Im(Rm,`resources/html/${e}_${t.name}`);return await UT(r,t),await Fv(r)},subscribeToAnnouncements:t=>{const e=zr(Gt(Me,"announcements"),qo("createdAt","desc"),vo(20));return Ks("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Ll(Gt(Me,"announcements"),t)},deleteAnnouncement:async t=>{await Ja(ut(Me,"announcements",t))},dismissAnnouncement:async(t,e)=>{await ur(ut(Me,"users",t),{"gamification.dismissedAnnouncements":bR(e)})},subscribeToNotifications:(t,e)=>{const r=zr(Gt(Me,"notifications"),pn("userId","==",t),qo("timestamp","desc"),vo(50));return Ur(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await ur(ut(Me,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=zr(Gt(Me,"notifications"),pn("userId","==",t),pn("isRead","==",!1)),n=(await bd(e)).docs.map(a=>ur(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Ll(Gt(Me,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Ll(Gt(Me,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await ur(ut(Me,"users",t),n)},toggleCodenameLock:async(t,e)=>{await ur(ut(Me,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await qoe({})).data,claimDailyLogin:async()=>(await Hoe({})).data,spinFortuneWheel:async t=>(await Goe({classType:t})).data,unlockSkill:async(t,e)=>(await Woe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Koe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Qoe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await Xoe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=zr(Gt(Me,"boss_encounters"),pn("isActive","==",!0));return Ks("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Gt(Me,"boss_encounters");return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ut(Me,"boss_encounters",t.id);await Zn(e,t)},toggleBossActive:async(t,e)=>{const r=ut(Me,"boss_encounters",t);await ur(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ut(Me,"boss_encounters",t);await Ja(e)},subscribeToBossShards:(t,e)=>{const r=Gt(Me,`boss_encounters/${t}/shards`);return Ur(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Gt(Me,`boss_encounters/${t}/damage_log`);return Ur(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await Yoe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=zr(Gt(Me,"boss_quizzes"),pn("isActive","==",!0));return Ks("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Gt(Me,`boss_quizzes/${t}/shards`);return Ur(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=Gt(Me,`boss_quizzes/${t}/damage_log`);return Ur(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await Joe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Gt(Me,"boss_quizzes");return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ut(Me,"boss_quizzes",t.id);await Zn(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ut(Me,"boss_quizzes",t);await ur(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ut(Me,"boss_quizzes",t);await Ja(e)},subscribeToBossQuestionBanks:t=>Ur(Gt(Me,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ut(Me,"boss_question_banks",t.id);await Zn(e,t)},deleteBossQuestionBank:async t=>{await Ja(ut(Me,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=zr(Gt(Me,"boss_quiz_progress"),pn("quizId","==",t));return(await bd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ut(Me,"boss_quiz_progress",`${t}_${e}`);return Ur(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await Zoe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await ele({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Ur(ut(Me,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Ll(Gt(Me,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await ur(ut(Me,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await ur(ut(Me,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await ur(ut(Me,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ut(Me,"tutoring_sessions",t),a=await pa(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await ur(n,d)},subscribeToAllTutoringSessions:t=>{const e=zr(Gt(Me,"tutoring_sessions"),qo("createdAt","desc"),vo(100));return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Ja(ut(Me,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=zr(Gt(Me,"tutoring_sessions"),pn("classType","==",t),vo(50));return Ks("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await tle({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=zr(Gt(Me,"knowledge_gates"),pn("isActive","==",!0));return Ks("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await rle({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=zr(Gt(Me,"seasonal_cosmetics"),pn("isAvailable","==",!0));return Ks("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await nle({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await ur(ut(Me,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=zr(Gt(Me,"daily_challenges"),pn("date","==",e));return Ks("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await ale({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ut(Me,"users",t);await h3(Me,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await pa(ut(Me,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=zr(Gt(Me,"student_alerts"),pn("isDismissed","==",!1));return Ks("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await ile({alertId:t})},subscribeToStudentBuckets:t=>Ks("student_buckets",Gt(Me,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=zr(Gt(Me,"practice_progress"),pn("userId","==",t));return Ur(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Ll(Gt(Me,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=zr(Gt(Me,"bug_reports"),qo("timestamp","desc"),vo(100));return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await ur(ut(Me,"bug_reports",t),{resolved:!0})},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ut(Gt(Me,"enrollment_codes"));return await Zn(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=zr(Gt(Me,"enrollment_codes"),qo("createdAt","desc"));return Ur(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await ur(ut(Me,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=zr(Gt(Me,"enrollment_codes"),pn("code","==",t.toUpperCase()),pn("isActive","==",!0)),n=await bd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ut(Me,"users",e),c=await pa(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await ur(o,{enrolledClasses:bR(i.classType),isWhitelisted:!0}),i.section&&await ur(o,{[`classSections.${i.classType}`]:i.section}),await ur(a.ref,{usedCount:tm(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Ll(Gt(Me,"behavior_awards"),t);const e=ut(Me,"users",t.studentId);await ur(e,{"gamification.xp":tm(t.xpAmount),[`gamification.classXp.${t.classType}`]:tm(t.xpAmount),"gamification.currency":tm(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=zr(Gt(Me,"behavior_awards"),pn("classType","==",t),qo("timestamp","desc"),vo(50));return Ur(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ut(Me,"users",t),r=await pa(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],x=p.find(w=>c>=w&&!m.includes(w)),y=x?[...m,x]:m;let S=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(S=Math.min(S+1,a.maxFreezeTokens));const N=[...a.streakHistory||[],i].slice(-30);return await ur(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:S,maxFreezeTokens:3,streakHistory:N,milestones:y}}),{currentStreak:c,freezeUsed:d,newMilestone:x}}},QH=T.createContext(null),Ma=()=>{const t=T.useContext(QH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},tce={success:s.jsx(Br,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Ds,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(G2,{className:"w-5 h-5 text-blue-400 shrink-0"})},rce={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},nce=({children:t})=>{const[e,r]=T.useState([]),n=T.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=T.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(QH.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${rce[o.type]}`,children:[tce[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Kn,{className:"w-4 h-4"})})]},o.id))})]})},ace=()=>{const[t,e]=T.useState(navigator.onLine),[r,n]=T.useState(!1);return T.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Zle,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var xu=bV();const Li=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(T.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?xu.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(Kn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),ice="/favicon.svg";function Hf(){return typeof window<"u"&&"Notification"in window}function mv(){return Hf()?Notification.permission:"unsupported"}async function XH(){return Hf()?await Notification.requestPermission():"unsupported"}function sce(t,e,r){if(!(!Hf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:ice,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function oce(t,e){const r=T.useRef(new Set),n=T.useRef(!0),a=T.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))sce(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);T.useEffect(()=>{if(!t||!e||!Hf())return;n.current=!0,r.current=new Set;const i=ke.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const lce=({userId:t})=>{const[e,r]=ie.useState(""),[n,a]=ie.useState(!1),[i,o]=ie.useState(null),[c,d]=ie.useState(null),h=Ma(),p=x=>{const y=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(y.length>4?y.slice(0,4)+"-"+y.slice(4):y),o(null),d(null)},m=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const x=await ke.redeemEnrollmentCode(e,t);x.success?(d(`Enrolled in ${x.classType}!`),h.success(`Joined ${x.classType}!`),r("")):o(x.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(hg,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:x=>p(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&m()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:m,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(Ei,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(s0,{className:"w-3.5 h-3.5"})," ",c]})]})]})},cce=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var S;const[a,i]=ie.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=ie.useState(((S=r.gamification)==null?void 0:S.codename)||""),[d,h]=ie.useState(!1),p=Ma(),m=N=>{i(w=>({...w,[N]:!w[N]}))},x=async()=>{var N;h(!0);try{await n(a),o!==(((N=r.gamification)==null?void 0:N.codename)||"")&&await ke.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},y=({icon:N,title:w,description:E,value:O,onToggle:R})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${O?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(N,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:w}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),s.jsx("button",{onClick:R,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${O?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${O?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Li,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Dle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(y,{icon:xle,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:os,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Ble,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(y,{icon:WH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(N=>({...N,soundEffects:N.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:Hf()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(RH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:mv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(N=>({...N,pushNotifications:!1}));else{const N=await XH();N==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):N==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:mv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${mv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(lce,{userId:r.id}),s.jsxs("button",{onClick:x,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(Ei,{className:"w-5 h-5 animate-spin"}):s.jsx(pE,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let v3=null,YH=!0;function uce(t){YH=t}function dce(){if(!v3){const t=window.AudioContext||window.webkitAudioContext;v3=new t}return v3}function or(t,e,r="sine",n=.15){if(YH)try{const a=dce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Vn={xpGain:()=>{or(600,.1,"sine",.1),setTimeout(()=>or(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>or(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{or(1200,.15,"sine",.08),setTimeout(()=>or(1500,.12,"sine",.06),100),setTimeout(()=>or(1800,.2,"triangle",.05),180)},questAccept:()=>{or(440,.15,"square",.06),setTimeout(()=>or(660,.2,"square",.06),120)},questDeploy:()=>{or(880,.12,"sawtooth",.05),setTimeout(()=>or(660,.12,"sawtooth",.05),100),setTimeout(()=>or(550,.2,"sawtooth",.04),200)},equip:()=>{or(200,.05,"square",.1),setTimeout(()=>or(400,.08,"sine",.08),50)},salvage:()=>{or(300,.15,"sawtooth",.06),setTimeout(()=>or(200,.2,"sawtooth",.04),100),setTimeout(()=>or(100,.3,"sawtooth",.03),200)},craft:()=>{or(150,.08,"square",.1),setTimeout(()=>or(800,.2,"triangle",.08),60)},error:()=>{or(200,.15,"square",.08),setTimeout(()=>or(150,.2,"square",.06),120)},messageSend:()=>{or(500,.06,"sine",.05)},notification:()=>{or(800,.1,"sine",.06),setTimeout(()=>or(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>or(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{or(523,.12,"sine",.08),setTimeout(()=>or(659,.12,"sine",.07),100),setTimeout(()=>or(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>or(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{or(523,.15,"triangle",.1),setTimeout(()=>or(784,.15,"triangle",.1),120),setTimeout(()=>or(1047,.3,"sine",.12),240)},skillUnlock:()=>{or(300,.1,"sawtooth",.06),setTimeout(()=>or(600,.1,"sawtooth",.06),80),setTimeout(()=>or(900,.15,"sine",.08),160)},bossHit:()=>{or(100,.1,"square",.12),setTimeout(()=>or(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>or(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{or(1200,.08,"sine",.08),setTimeout(()=>or(1600,.1,"sine",.06),60),setTimeout(()=>or(2e3,.15,"triangle",.04),120)},partyJoin:()=>{or(440,.1,"sine",.06),setTimeout(()=>or(554,.1,"sine",.06),80),setTimeout(()=>or(659,.15,"sine",.05),160)},chestOpen:()=>{or(200,.15,"square",.06),setTimeout(()=>or(300,.1,"square",.05),100),setTimeout(()=>or(500,.1,"triangle",.06),200),setTimeout(()=>or(800,.2,"sine",.08),350)}},hce={QUEST_APPROVED:s.jsx(ku,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(ku,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(KT,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(ku,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(qH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(fle,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(Qv,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(qn,{className:"w-4 h-4 text-cyan-400"})},zR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(!1),[p,m]=T.useState({}),x=T.useRef(null),y=T.useRef(null),S=T.useRef(0),N=T.useCallback(()=>{if(!x.current)return;const I=x.current.getBoundingClientRect(),k=320;if(n){const A=Math.max(8,I.left),j=A+k>window.innerWidth-8?void 0:A,C=j==null?8:void 0;m({bottom:window.innerHeight-I.top+8,left:j,right:C})}else m({top:I.bottom+8,right:Math.max(8,window.innerWidth-I.right)})},[n]);T.useEffect(()=>{o&&Hf()&&mv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),T.useEffect(()=>{const I=ke.subscribeToNotifications(t,k=>{const A=k.filter(j=>!j.isRead).length;A>S.current&&S.current>=0&&Vn.notification(),S.current=A,i(k)});return()=>I()},[t]),T.useEffect(()=>{const I=k=>{var j,C;const A=k.target;(j=x.current)!=null&&j.contains(A)||(C=y.current)!=null&&C.contains(A)||c(!1)};return o&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[o]),T.useEffect(()=>{if(o)return N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[o,N]);const w=a.filter(I=>!I.isRead).length,E=async()=>{await ke.markAllNotificationsRead(t)},O=async I=>{I.isRead||await ke.markNotificationRead(I.id)},R=I=>{const k=Date.now()-new Date(I).getTime();return k<6e4?"just now":k<36e5?`${Math.floor(k/6e4)}m ago`:k<864e5?`${Math.floor(k/36e5)}h ago`:`${Math.floor(k/864e5)}d ago`},P=()=>{o||N(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:x,onClick:P,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(m3,{className:"w-5 h-5"}),w>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),o&&xu.createPortal(s.jsxs("div",{ref:y,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&s.jsxs("button",{onClick:E,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(mle,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(RH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await XH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(m3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(I=>s.jsxs("div",{onClick:()=>O(I),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${I.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:hce[I.type]||s.jsx(m3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:I.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:I.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:R(I.timestamp)})]}),!I.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},I.id))})]}),document.body)]})},fce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,E;const[i,o]=T.useState(""),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};T.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const R=Im(Rm,"public/background.mp4"),P=await Fv(R);o(P)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const x=async O=>{await ke.updateUserSettings(t.id,O)},[y,S]=T.useState(null);T.useEffect(()=>{const O=BR.find(R=>{var P;return(P=R.children)==null?void 0:P.some(I=>r===`${R.name}:${I.name}`)});O&&S(O.name)},[r]);const N=()=>{const O=BR.filter(P=>!(P.role==="ADMIN"&&t.role!==za.ADMIN||P.role==="STUDENT"&&t.role!==za.STUDENT)),R=P=>{var I;return(I=P.children)==null?void 0:I.some(k=>r===`${P.name}:${k.name}`)};return s.jsx(s.Fragment,{children:O.map(P=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{P.children?y===P.name?S(null):(S(P.name),R(P)||(n(`${P.name}:${P.children[0].name}`),p(!1))):(n(P.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===P.name||R(P)?P.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===P.name||R(P)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:P.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:P.name}),P.children&&s.jsx(ai,{className:`w-3.5 h-3.5 transition-transform ${y===P.name?"rotate-180":""} ${R(P)?"text-purple-400":"text-gray-600"}`})]}),P.children&&y===P.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:P.children.map(I=>{const k=`${P.name}:${I.name}`;return s.jsxs("button",{onClick:()=>{n(k),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===k?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===k?"text-white":"text-gray-600",children:I.icon}),I.name]},I.name)})})]},P.name))})};return s.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(ol,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zR,{userId:t.id,settings:m,onUpdateSettings:x}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(Ole,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Kn,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(N,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(l0,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(RR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(ol,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===za.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(N,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((E=t.gamification)==null?void 0:E.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zR,{userId:t.id,settings:m,onUpdateSettings:x,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(l0,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(RR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(cce,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:x})]})},pce=[.75,1,1.25,1.5,2],UR=({textContent:t,compact:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(1),[o,c]=T.useState(0),[d,h]=T.useState(!1),p=T.useRef(null),m=T.useRef([]);T.useEffect(()=>{if(!t){m.current=[];return}const P=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(I=>I.trim()).filter(I=>I.length>2);m.current=P,c(0)},[t]);const x=T.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),y=T.useCallback(P=>{const I=m.current;if(P<0||P>=I.length){n(!1);return}window.speechSynthesis.cancel();const k=new SpeechSynthesisUtterance(I[P]);k.rate=a,k.onend=()=>{const A=P+1;A<I.length?(c(A),y(A)):n(!1)},k.onerror=()=>{n(!1)},p.current=k,c(P),window.speechSynthesis.speak(k)},[a]),S=T.useCallback(()=>{r?x():(n(!0),y(o))},[r,o,y,x]),N=T.useCallback(()=>{const P=Math.max(0,o-1);c(P),r&&y(P)},[o,r,y]),w=T.useCallback(()=>{const P=Math.min(m.current.length-1,o+1);c(P),r&&y(P)},[o,r,y]),E=T.useCallback(P=>{if(i(P),h(!1),r){window.speechSynthesis.cancel();const I=new SpeechSynthesisUtterance(m.current[o]);I.rate=P,I.onend=()=>{const k=o+1;k<m.current.length?(c(k),y(k)):n(!1)},p.current=I,window.speechSynthesis.speak(I)}},[r,o,y]);if(T.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||m.current.length===0)return null;if(e)return s.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(Yle,{className:"w-3 h-3"}):s.jsx(WH,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const O=m.current.length,R=O>0?(o+1)/O*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:S,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx($le,{className:"w-4 h-4"}):s.jsx(Ff,{className:"w-4 h-4"})}),s.jsx("button",{onClick:N,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Ule,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:w,disabled:o>=O-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Vle,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${R}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",O]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(_le,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:pce.map(P=>s.jsxs("button",{onClick:()=>E(P),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===P?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[P,"x"]},P))})]})]})},mce=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],gce=[2,4,6,8],xce=({containerRef:t,onAnnotationsChange:e})=>{const r=T.useRef(null),[n,a]=T.useState(!1),[i,o]=T.useState("pen"),[c,d]=T.useState("#ef4444"),[h,p]=T.useState(4),[m,x]=T.useState(!1),[y,S]=T.useState(!1),N=T.useRef([]),w=T.useRef(!1),E=T.useRef([]),O=T.useCallback(()=>{const L=r.current,$=t.current;if(!L||!$)return;const B=$.getBoundingClientRect();L.width=B.width,L.height=B.height,L.style.width=`${B.width}px`,L.style.height=`${B.height}px`,R()},[t]);T.useEffect(()=>{if(!n)return;O();const L=new ResizeObserver(O);return t.current&&L.observe(t.current),()=>L.disconnect()},[n,O,t]);const R=T.useCallback(()=>{const L=r.current;if(!L)return;const $=L.getContext("2d");if($){$.clearRect(0,0,L.width,L.height);for(const B of N.current)if(!(B.points.length<2)){$.beginPath(),$.strokeStyle=B.tool==="eraser"?"rgba(0,0,0,0)":B.color,$.lineWidth=B.width,$.lineCap="round",$.lineJoin="round",B.tool==="eraser"?$.globalCompositeOperation="destination-out":$.globalCompositeOperation="source-over",$.moveTo(B.points[0].x,B.points[0].y);for(let G=1;G<B.points.length;G++)$.lineTo(B.points[G].x,B.points[G].y);$.stroke()}$.globalCompositeOperation="source-over"}},[]),P=T.useCallback(L=>{const $=r.current;if(!$)return null;const B=$.getBoundingClientRect();if("touches"in L){const G=L.touches[0];return{x:G.clientX-B.left,y:G.clientY-B.top}}return{x:L.clientX-B.left,y:L.clientY-B.top}},[]),I=T.useCallback(L=>{if(!n)return;L.preventDefault();const $=P(L);$&&(w.current=!0,E.current=[$])},[n,P]),k=T.useCallback(L=>{if(!w.current||!n)return;L.preventDefault();const $=P(L);if(!$)return;E.current.push($);const B=r.current;if(!B)return;const G=B.getContext("2d");if(!G)return;const K=E.current;if(K.length<2)return;G.beginPath(),i==="eraser"?(G.globalCompositeOperation="destination-out",G.strokeStyle="rgba(0,0,0,1)"):(G.globalCompositeOperation="source-over",G.strokeStyle=c),G.lineWidth=i==="eraser"?h*4:h,G.lineCap="round",G.lineJoin="round";const H=K[K.length-2],Z=K[K.length-1];G.moveTo(H.x,H.y),G.lineTo(Z.x,Z.y),G.stroke(),G.globalCompositeOperation="source-over"},[n,P,i,c,h]),A=T.useCallback(()=>{w.current&&(w.current=!1,E.current.length>1&&(N.current.push({points:[...E.current],color:c,width:i==="eraser"?h*4:h,tool:i}),e==null||e(N.current.length>0)),E.current=[])},[c,h,i,e]),j=T.useCallback(()=>{N.current.pop(),R(),e==null||e(N.current.length>0)},[R,e]),C=T.useCallback(()=>{N.current=[],R(),e==null||e(!1)},[R,e]),U=T.useCallback(()=>{a(L=>!L),x(!1),S(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:U,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${n?"text-red-300 bg-red-500/20 border-red-500/30 hover:bg-red-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:"Annotate",children:[s.jsx(QT,{className:"w-3 h-3"}),n?"Clear Annotations":"Annotate"]}),n&&s.jsx("canvas",{ref:r,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:I,onMouseMove:k,onMouseUp:A,onMouseLeave:A,onTouchStart:I,onTouchMove:k,onTouchEnd:A}),n&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>o("pen"),className:`p-2 rounded-lg transition ${i==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(QT,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o("eraser"),className:`p-2 rounded-lg transition ${i==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(wle,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{x(!m),S(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Color",children:[s.jsx(Lle,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:c}})]}),m&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:mce.map(L=>s.jsx("button",{onClick:()=>{d(L),x(!1)},className:`w-6 h-6 rounded-full border-2 transition ${c===L?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:L}},L))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{S(!y),x(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Line width",children:s.jsx(K2,{className:"w-4 h-4"})}),y&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:gce.map(L=>s.jsx("button",{onClick:()=>{p(L),S(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition ${h===L?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:L*2,height:L*2}})},L))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:j,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition",title:"Undo",children:s.jsx(Wle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:C,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition",title:"Clear all",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})},yce={TEXT:s.jsx(N0,{className:"w-3.5 h-3.5"}),MC:s.jsx(F2,{className:"w-3.5 h-3.5"}),SHORT_ANSWER:s.jsx(sf,{className:"w-3.5 h-3.5"}),CHECKLIST:s.jsx(hE,{className:"w-3.5 h-3.5"}),VOCABULARY:s.jsx(ni,{className:"w-3.5 h-3.5"}),INFO_BOX:s.jsx(G2,{className:"w-3.5 h-3.5"}),SECTION_HEADER:s.jsx(BH,{className:"w-3.5 h-3.5"}),IMAGE:s.jsx(dE,{className:"w-3.5 h-3.5"}),VIDEO:s.jsx(Ff,{className:"w-3.5 h-3.5"}),OBJECTIVES:s.jsx(cs,{className:"w-3.5 h-3.5"}),DIVIDER:s.jsx(K2,{className:"w-3.5 h-3.5"}),EXTERNAL_LINK:s.jsx(q2,{className:"w-3.5 h-3.5"}),EMBED:s.jsx(PH,{className:"w-3.5 h-3.5"}),VOCAB_LIST:s.jsx(zH,{className:"w-3.5 h-3.5"}),ACTIVITY:s.jsx(qn,{className:"w-3.5 h-3.5"}),SORTING:s.jsx(cE,{className:"w-3.5 h-3.5"}),DATA_TABLE:s.jsx(HH,{className:"w-3.5 h-3.5"}),BAR_CHART:s.jsx(Vf,{className:"w-3.5 h-3.5"}),RANKING:s.jsx(dg,{className:"w-3.5 h-3.5"}),LINKED:s.jsx(Kv,{className:"w-3.5 h-3.5"})},vce={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",INFO_BOX:"Info",SECTION_HEADER:"Section",IMAGE:"Image",VIDEO:"Video",OBJECTIVES:"Objectives",DIVIDER:"Divider",EXTERNAL_LINK:"Link",EMBED:"Embed",VOCAB_LIST:"Vocab List",ACTIVITY:"Activity",SORTING:"Sorting",DATA_TABLE:"Data Table",BAR_CHART:"Bar Chart",RANKING:"Ranking",LINKED:"Follow-up"},bce=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const o=t.filter(E=>["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(E.type)),c=o.filter(E=>r.has(E.id)).length,d=o.length,h=d>0?Math.round(c/d*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),p=100,m=8,x=(p-m)/2,y=2*Math.PI*x,S=y-h/100*y,N=Math.floor(a/60),w=a%60;return s.jsxs("div",{className:"w-56 flex-shrink-0 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/30 rounded-2xl p-4 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:p,height:p,className:"transform -rotate-90",children:[s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:m}),s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:h===100?"#34d399":"#a855f7",strokeWidth:m,strokeLinecap:"round",strokeDasharray:y,strokeDashoffset:S,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-xl font-black ${h===100?"text-emerald-400":"text-white"}`,children:[h,"%"]})})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[c,"/",d," questions"]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-500 font-mono",children:[s.jsxs("span",{children:[N,":",String(w).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i," XP"]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-2xl p-3 border border-white/5 flex flex-col gap-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:"Sections"}),t.map((E,O)=>{const R=O===e,P=r.has(E.id),I=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(E.type);return s.jsxs("button",{onClick:()=>n(O),className:`flex items-center gap-2 px-2 py-1.5 rounded-lg text-left transition-all text-[11px] ${R?"bg-purple-500/20 text-purple-300 border border-purple-500/30":P?"text-emerald-400/80 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:P?s.jsx(Br,{className:"w-3.5 h-3.5 text-emerald-400"}):s.jsx("span",{className:R?"text-purple-400":"text-gray-600",children:yce[E.type]||s.jsx(N0,{className:"w-3.5 h-3.5"})})}),s.jsxs("span",{className:"truncate flex-1 font-medium",children:[vce[E.type]||E.type,I&&!P&&s.jsx("span",{className:"ml-1 text-[9px] text-amber-400/60",children:"*"})]}),s.jsx("span",{className:`text-[9px] font-mono ${R?"text-purple-400":"text-gray-600"}`,children:O+1})]},E.id)})]})]})},VR=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"],wce=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),Sce=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},Nce=({block:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(F2,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(Br,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(io,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},_ce=({block:t,onComplete:e})=>{const[r,n]=T.useState(""),[a,i]=T.useState(!1),[o,c]=T.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(sf,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(io,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},Tce=({block:t})=>{const[e,r]=T.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ni,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},jce=({block:t,onComplete:e})=>{const[r,n]=T.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(hE,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(Br,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"})," All items completed!"]})]})},Ace=({block:t})=>s.jsxs("div",{className:"text-center py-2",children:[t.icon&&s.jsx("div",{className:"text-3xl mb-2",children:t.icon}),s.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:t.title}),t.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.subtitle})]}),Ece=({block:t})=>{const e=(t.url||"").replace(/\/file\/d\/([^/]+)\/.*/,"/uc?export=view&id=$1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",children:s.jsx("img",{src:e!==t.url?e:t.url,alt:t.alt||t.caption||"",className:"w-full max-h-[500px] object-contain",loading:"lazy"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]})},kce=({block:t})=>{const r=(n=>{const a=n.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return a?`https://www.youtube.com/embed/${a[1]}`:""})(t.url||"");return r?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video bg-black",children:s.jsx("iframe",{src:r,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:t.caption||"Video"})}),t.caption&&s.jsxs("p",{className:"text-xs text-gray-500 text-center italic flex items-center justify-center gap-1",children:[s.jsx(Ff,{className:"w-3 h-3"})," ",t.caption]})]}):s.jsx("div",{className:"text-sm text-gray-500 italic",children:"Invalid video URL"})},Cce=({block:t})=>s.jsxs("div",{className:"border border-emerald-500/20 bg-emerald-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-bold text-sm",children:[s.jsx(cs,{className:"w-4 h-4"}),t.title||"Learning Objectives"]}),s.jsx("ul",{className:"space-y-1",children:(t.items||[]).map((e,r)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx("span",{className:"text-emerald-400 mt-0.5 shrink-0",children:""}),e]},r))})]}),Oce=()=>s.jsx("div",{className:"py-2",children:s.jsx("hr",{className:"border-white/10"})}),Ice=({block:t})=>s.jsx("a",{href:t.url,target:t.openInNewTab!==!1?"_blank":"_self",rel:"noopener noreferrer",className:"block p-4 rounded-xl border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-purple-300 group-hover:text-purple-200 transition",children:t.title||t.url}),t.content&&s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1.5 rounded-lg shrink-0 ml-3",children:[t.buttonLabel||"Open"," ",s.jsx(q2,{className:"w-3 h-3"})]})]})}),Rce=({block:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",style:{height:t.height||500},children:s.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.caption||"Embedded content",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]}),Mce=({block:t})=>{const[e,r]=T.useState(new Set);return s.jsx("div",{className:"space-y-2",children:(t.terms||[]).map((n,a)=>s.jsx("button",{onClick:()=>r(i=>{const o=new Set(i);return o.has(a)?o.delete(a):o.add(a),o}),className:"w-full text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ni,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:n.term}),e.has(a)?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:n.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal"})]})]})},a))})},Dce=({block:t})=>s.jsxs("div",{className:"border border-amber-500/20 bg-amber-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-400 font-bold text-sm",children:[t.icon&&s.jsx("span",{className:"text-lg",children:t.icon}),t.title||"Activity"]}),s.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.instructions})]}),Pce=({block:t,onComplete:e})=>{const r=t.sortItems||[],[n,a]=T.useState({}),[i,o]=T.useState(!1),c=r.map((S,N)=>N).filter(S=>!(S in n)),d=Object.entries(n).filter(([,S])=>S==="left").map(([S])=>parseInt(S)),h=Object.entries(n).filter(([,S])=>S==="right").map(([S])=>parseInt(S)),p=(S,N)=>{i||a(w=>({...w,[S]:N}))},m=S=>{i||a(N=>{const w={...N};return delete w[S],w})},x=()=>{if(c.length>0)return;o(!0);const S=r.every((N,w)=>n[w]===N.correct);e(S)},y=r.filter((S,N)=>n[N]===S.correct).length;return s.jsxs("div",{className:"space-y-3",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),t.instructions&&s.jsx("p",{className:"text-xs text-gray-400",children:t.instructions}),c.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Sort these items"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(S=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-gray-300",children:[s.jsx("span",{children:r[S].text}),s.jsx("button",{onClick:()=>p(S,"left"),className:"ml-1 text-[10px] bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded hover:bg-blue-500/30 transition",children:t.leftLabel||"L"}),s.jsx("button",{onClick:()=>p(S,"right"),className:"text-[10px] bg-orange-500/20 text-orange-300 px-1.5 py-0.5 rounded hover:bg-orange-500/30 transition",children:t.rightLabel||"R"})]},S))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-blue-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:t.leftLabel||"Category A"}),s.jsx("div",{className:"space-y-1",children:d.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="left"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="left"&&s.jsx(Br,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="left"&&s.jsx(io,{className:"w-3 h-3 text-red-400"})]},S))})]}),s.jsxs("div",{className:"rounded-xl border border-orange-500/20 bg-orange-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:t.rightLabel||"Category B"}),s.jsx("div",{className:"space-y-1",children:h.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="right"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="right"&&s.jsx(Br,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="right"&&s.jsx(io,{className:"w-3 h-3 text-red-400"})]},S))})]})]}),!i&&c.length===0&&r.length>0&&s.jsx("button",{onClick:x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Sorting"}),i&&s.jsx("div",{className:`text-xs font-bold ${y===r.length?"text-green-400":"text-amber-400"}`,children:y===r.length?"All correct!":`${y}/${r.length} correct`})]})},Lce=({block:t})=>{const e=t.columns||[],r=t.trials||3,[n,a]=T.useState(()=>Array.from({length:r},()=>Object.fromEntries(e.map(o=>[o.key,""])))),i=(o,c,d)=>{a(h=>{const p=[...h];return p[o]={...p[o],[c]:d},p})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/30",children:[s.jsx("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left w-12",children:"#"}),e.map(o=>s.jsxs("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left",children:[o.label,o.unit?` (${o.unit})`:""]},o.key))]})}),s.jsx("tbody",{children:n.map((o,c)=>s.jsxs("tr",{className:"border-t border-white/5",children:[s.jsx("td",{className:"px-3 py-1 text-xs text-gray-600 font-mono",children:c+1}),e.map(d=>s.jsx("td",{className:"px-1 py-1",children:d.editable!==!1?s.jsx("input",{type:"text",value:o[d.key]||"",onChange:h=>i(c,d.key,h.target.value),className:"w-full bg-black/20 border border-white/5 rounded px-2 py-1 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-purple-500/50 transition"}):s.jsx("span",{className:"px-2 py-1 text-gray-400",children:o[d.key]})},d.key))]},c))})]})})]})},Bce=({block:t})=>{const e=t.barCount||3,r=t.height||300,[n,a]=T.useState(()=>Array(e).fill(0)),i=Math.max(...n.map(Math.abs),1),o=["#a855f7","#3b82f6","#ef4444","#22c55e","#f59e0b","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"],c=(d,h)=>{const p=h.currentTarget.getBoundingClientRect(),m=h.clientY-p.top,x=Math.round((p.height/2-m)/(p.height/2)*10);a(y=>{const S=[...y];return S[d]=x,S})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium text-center",children:t.title}),s.jsx("div",{className:"flex items-end justify-center gap-4 px-4",style:{height:r},children:n.map((d,h)=>{const p=Math.abs(d)/Math.max(i,10)*(r/2-20);return s.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1 h-full justify-center cursor-pointer",onClick:m=>c(h,m),children:[s.jsxs("div",{className:"relative w-full max-w-[60px] h-full flex items-center",children:[s.jsx("div",{className:"absolute inset-0 border-b border-white/10",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 rounded-t-lg transition-all duration-200",style:{height:p,bottom:d>=0?"50%":void 0,top:d<0?"50%":void 0,backgroundColor:o[h%o.length],opacity:.8}})]}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:d}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Bar ",h+1]})]},h)})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 px-4",children:[s.jsx("span",{children:t.initialLabel}),s.jsx("span",{children:t.deltaLabel}),s.jsx("span",{children:t.finalLabel})]})]})},$ce=({block:t,onComplete:e})=>{const r=t.items||[],n=T.useMemo(()=>{const y=r.map((N,w)=>({item:N,origIdx:w}));let S=t.id.split("").reduce((N,w)=>N+w.charCodeAt(0),0);for(let N=y.length-1;N>0;N--){S=(S*16807+0)%2147483647;const w=S%(N+1);[y[N],y[w]]=[y[w],y[N]]}return y},[t.id,r]),[a,i]=T.useState(n),[o,c]=T.useState(!1),[d,h]=T.useState(null),p=(y,S)=>{o||i(N=>{const w=[...N],[E]=w.splice(y,1);return w.splice(S,0,E),w})},m=()=>{c(!0);const y=a.every((S,N)=>S.origIdx===N);e(y)},x=a.filter((y,S)=>y.origIdx===S).length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(dg,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-1",children:a.map((y,S)=>s.jsxs("div",{draggable:!o,onDragStart:()=>h(S),onDragOver:N=>N.preventDefault(),onDrop:()=>{d!==null&&p(d,S),h(null)},className:`flex items-center gap-2 p-3 rounded-xl border text-sm transition cursor-grab active:cursor-grabbing ${o?y.origIdx===S?"border-green-500/30 bg-green-500/5 text-green-400":"border-red-500/30 bg-red-500/5 text-red-400":d===S?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx(dg,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[S+1,"."]}),s.jsx("span",{className:"flex-1",children:y.item}),o&&y.origIdx===S&&s.jsx(Br,{className:"w-4 h-4 text-green-400"}),o&&y.origIdx!==S&&s.jsx(io,{className:"w-4 h-4 text-red-400"}),!o&&s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("button",{onClick:()=>S>0&&p(S,S-1),disabled:S===0,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(no,{className:"w-3 h-3 -rotate-90"})}),s.jsx("button",{onClick:()=>S<a.length-1&&p(S,S+1),disabled:S===a.length-1,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(no,{className:"w-3 h-3 rotate-90"})})]})]},y.origIdx))}),!o&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Order"}),o&&s.jsx("div",{className:`text-xs font-bold ${x===r.length?"text-green-400":"text-amber-400"}`,children:x===r.length?"Perfect order!":`${x}/${r.length} in correct position`})]})},zce=({block:t,allBlocks:e,onComplete:r})=>{var m;const n=e.find(x=>x.id===t.linkedBlockId),[a,i]=T.useState(""),[o,c]=T.useState(!1),[d,h]=T.useState(!1),p=()=>{if(!a.trim())return;const x=(t.acceptedAnswers||[]).map(S=>S.toLowerCase().trim()),y=x.length===0||x.includes(a.toLowerCase().trim());h(y),c(!0),r(y)};return s.jsxs("div",{className:"space-y-3",children:[n&&s.jsxs("div",{className:"border border-white/10 bg-white/5 rounded-xl p-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[s.jsx(Kv,{className:"w-3 h-3"})," Referenced question"]}),s.jsx("p",{className:"text-xs text-gray-400",children:n.content})]}),s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Kv,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),disabled:o,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:x=>x.key==="Enter"&&p()}),!o&&s.jsx("button",{onClick:p,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),o&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${d?"text-green-400":"text-amber-400"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(io,{className:"w-3 h-3"})," ",(t.acceptedAnswers||[]).length>0?`Accepted: ${(m=t.acceptedAnswers)==null?void 0:m.join(", ")}`:"Response recorded"]})})]})},YT=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=T.useState(new Set),[d,h]=T.useState(0),p=T.useCallback((O,R)=>{e==null||e(O,R),c(P=>{const I=new Set(P);return I.add(O),t.filter(A=>VR.includes(A.type)).every(A=>I.has(A.id))&&(r==null||r()),I})},[t,e,r]),m=()=>{d<t.length-1&&h(O=>O+1)},x=()=>{d>0&&h(O=>O-1)};if(t.length===0)return null;const y=t[d],S=VR.includes(y.type),N=o.has(y.id),w=O=>{const R=P=>p(O.id,P);switch(O.type){case"TEXT":return s.jsx(wce,{block:O});case"INFO_BOX":return s.jsx(Sce,{block:O});case"MC":return s.jsx(Nce,{block:O,onComplete:R});case"SHORT_ANSWER":return s.jsx(_ce,{block:O,onComplete:R});case"VOCABULARY":return s.jsx(Tce,{block:O});case"CHECKLIST":return s.jsx(jce,{block:O,onComplete:R});case"SECTION_HEADER":return s.jsx(Ace,{block:O});case"IMAGE":return s.jsx(Ece,{block:O});case"VIDEO":return s.jsx(kce,{block:O});case"OBJECTIVES":return s.jsx(Cce,{block:O});case"DIVIDER":return s.jsx(Oce,{});case"EXTERNAL_LINK":return s.jsx(Ice,{block:O});case"EMBED":return s.jsx(Rce,{block:O});case"VOCAB_LIST":return s.jsx(Mce,{block:O});case"ACTIVITY":return s.jsx(Dce,{block:O});case"SORTING":return s.jsx(Pce,{block:O,onComplete:R});case"DATA_TABLE":return s.jsx(Lce,{block:O});case"BAR_CHART":return s.jsx(Bce,{block:O});case"RANKING":return s.jsx($ce,{block:O,onComplete:R});case"LINKED":return s.jsx(zce,{block:O,allBlocks:t,onComplete:R});default:return s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["Unknown block type: ",O.type]})}},E=s.jsxs("div",{className:"space-y-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(d+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsx("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:w(y)},y.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:x,disabled:d===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((O,R)=>s.jsx("button",{onClick:()=>h(R),className:`w-2 h-2 rounded-full transition ${R===d?"bg-purple-500 scale-125":o.has(O.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},O.id))}),s.jsxs("button",{onClick:m,disabled:d>=t.length-1||S&&!N,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(no,{className:"w-3 h-3"})]})]})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4",children:[E,s.jsx(bce,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:h,engagementTime:a,xpEarned:i})]}):E};class es{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new es(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Is{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Is(r,es.range(this,e))}}class ft{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ft.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ft.prototype.__proto__=Error.prototype;var Uce=function(e,r){return e===void 0?r:e},Vce=/([A-Z])/g,Fce=function(e){return e.replace(Vce,"-$1").toLowerCase()},qce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Hce=/[&><"']/g;function Gce(t){return String(t).replace(Hce,e=>qce[e])}var JH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Wce=function(e){var r=JH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Kce=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Qce=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Xr={deflt:Uce,escape:Gce,hyphenate:Fce,getBaseElem:JH,isCharacterBox:Wce,protocolFromUrl:Qce},gv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Xce(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class gE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in gv)if(gv.hasOwnProperty(r)){var n=gv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Xce(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ft("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Xr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class au{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Ko[Yce[this.id]]}sub(){return Ko[Jce[this.id]]}fracNum(){return Ko[Zce[this.id]]}fracDen(){return Ko[eue[this.id]]}cramp(){return Ko[tue[this.id]]}text(){return Ko[rue[this.id]]}isTight(){return this.size>=2}}var xE=0,Zv=1,Lh=2,tc=3,fg=4,eo=5,of=6,Bi=7,Ko=[new au(xE,0,!1),new au(Zv,0,!0),new au(Lh,1,!1),new au(tc,1,!0),new au(fg,2,!1),new au(eo,2,!0),new au(of,3,!1),new au(Bi,3,!0)],Yce=[fg,eo,fg,eo,of,Bi,of,Bi],Jce=[eo,eo,eo,eo,Bi,Bi,Bi,Bi],Zce=[Lh,tc,fg,eo,of,Bi,of,Bi],eue=[tc,tc,eo,eo,Bi,Bi,Bi,Bi],tue=[Zv,Zv,tc,tc,eo,eo,Bi,Bi],rue=[xE,Zv,Lh,tc,Lh,tc,Lh,tc],Yt={DISPLAY:Ko[xE],TEXT:Ko[Lh],SCRIPT:Ko[fg],SCRIPTSCRIPT:Ko[of]},JT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function nue(t){for(var e=0;e<JT.length;e++)for(var r=JT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var xv=[];JT.forEach(t=>t.blocks.forEach(e=>xv.push(...e)));function ZH(t){for(var e=0;e<xv.length;e+=2)if(t>=xv[e]&&t<=xv[e+1])return!0;return!1}var fh=80,aue=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},iue=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sue=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},oue=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},lue=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},cue=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},uue=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},due=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=aue(r,fh);break;case"sqrtSize1":a=iue(r,fh);break;case"sqrtSize2":a=sue(r,fh);break;case"sqrtSize3":a=oue(r,fh);break;case"sqrtSize4":a=lue(r,fh);break;case"sqrtTall":a=uue(r,fh,n)}return a},hue=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},FR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},fue=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Tx{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Jo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},_y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},qR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function pue(t,e){Jo[t]=e}function yE(t,e,r){if(!Jo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Jo[e][n];if(!a&&t[0]in qR&&(n=qR[t[0]].charCodeAt(0),a=Jo[e][n]),!a&&r==="text"&&ZH(n)&&(a=Jo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var b3={};function mue(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!b3[e]){var r=b3[e]={cssEmPerMu:_y.quad[e]/18};for(var n in _y)_y.hasOwnProperty(n)&&(r[n]=_y[n][e])}return b3[e]}var gue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],HR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],GR=function(e,r){return r.size<2?e:gue[e-1][r.size-1]};class Vl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Vl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=HR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Vl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:GR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:HR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=GR(Vl.BASESIZE,e);return this.size===r&&this.textSize===Vl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Vl.BASESIZE?["sizing","reset-size"+this.size,"size"+Vl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=mue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Vl.BASESIZE=6;var ZT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},xue={ex:!0,em:!0,mu:!0},eG=function(e){return typeof e!="string"&&(e=e.unit),e in ZT||e in xue||e==="ex"},ea=function(e,r){var n;if(e.unit in ZT)n=ZT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ft("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},vt=function(e){return+e.toFixed(4)+"em"},Bu=function(e){return e.filter(r=>r).join(" ")},tG=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},rG=function(e){var r=document.createElement(e);r.className=Bu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},yue=/[\s"'>/=\x00-\x1f]/,nG=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Xr.escape(Bu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Xr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Xr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(yue.test(i))throw new ft("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Xr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class jx{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,tG.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rG.call(this,"span")}toMarkup(){return nG.call(this,"span")}}class vE{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,tG.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rG.call(this,"a")}toMarkup(){return nG.call(this,"a")}}class vue{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Xr.escape(this.src)+'"'+(' alt="'+Xr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Xr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Xr.escape(r)+'"'),e+="'/>",e}}var bue={:"",:"",:"",:""};class oo{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=nue(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=bue[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=vt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Bu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Xr.escape(Bu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Xr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Xr.escape(n)+'"');var i=Xr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class dc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Xr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class $u{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",FR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Xr.escape(this.alternate)+'"/>':'<path d="'+Xr.escape(FR[this.pathName])+'"/>'}}class ej{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Xr.escape(this.attributes[r])+'"');return e+="/>",e}}function WR(t){if(t instanceof oo)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function wue(t){if(t instanceof jx)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Sue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Nue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ln={math:{},text:{}};function M(t,e,r,n,a,i){Ln[t][a]={font:e,group:r,replace:n},i&&n&&(Ln[t][n]=Ln[t][a])}var z="math",ot="text",W="main",se="ams",Xn="accent-token",It="bin",Vi="close",Gf="inner",Xt="mathord",Da="op-token",Ps="open",Y2="punct",oe="rel",wc="spacing",me="textord";M(z,W,oe,"","\\equiv",!0);M(z,W,oe,"","\\prec",!0);M(z,W,oe,"","\\succ",!0);M(z,W,oe,"","\\sim",!0);M(z,W,oe,"","\\perp");M(z,W,oe,"","\\preceq",!0);M(z,W,oe,"","\\succeq",!0);M(z,W,oe,"","\\simeq",!0);M(z,W,oe,"","\\mid",!0);M(z,W,oe,"","\\ll",!0);M(z,W,oe,"","\\gg",!0);M(z,W,oe,"","\\asymp",!0);M(z,W,oe,"","\\parallel");M(z,W,oe,"","\\bowtie",!0);M(z,W,oe,"","\\smile",!0);M(z,W,oe,"","\\sqsubseteq",!0);M(z,W,oe,"","\\sqsupseteq",!0);M(z,W,oe,"","\\doteq",!0);M(z,W,oe,"","\\frown",!0);M(z,W,oe,"","\\ni",!0);M(z,W,oe,"","\\propto",!0);M(z,W,oe,"","\\vdash",!0);M(z,W,oe,"","\\dashv",!0);M(z,W,oe,"","\\owns");M(z,W,Y2,".","\\ldotp");M(z,W,Y2,"","\\cdotp");M(z,W,me,"#","\\#");M(ot,W,me,"#","\\#");M(z,W,me,"&","\\&");M(ot,W,me,"&","\\&");M(z,W,me,"","\\aleph",!0);M(z,W,me,"","\\forall",!0);M(z,W,me,"","\\hbar",!0);M(z,W,me,"","\\exists",!0);M(z,W,me,"","\\nabla",!0);M(z,W,me,"","\\flat",!0);M(z,W,me,"","\\ell",!0);M(z,W,me,"","\\natural",!0);M(z,W,me,"","\\clubsuit",!0);M(z,W,me,"","\\wp",!0);M(z,W,me,"","\\sharp",!0);M(z,W,me,"","\\diamondsuit",!0);M(z,W,me,"","\\Re",!0);M(z,W,me,"","\\heartsuit",!0);M(z,W,me,"","\\Im",!0);M(z,W,me,"","\\spadesuit",!0);M(z,W,me,"","\\S",!0);M(ot,W,me,"","\\S");M(z,W,me,"","\\P",!0);M(ot,W,me,"","\\P");M(z,W,me,"","\\dag");M(ot,W,me,"","\\dag");M(ot,W,me,"","\\textdagger");M(z,W,me,"","\\ddag");M(ot,W,me,"","\\ddag");M(ot,W,me,"","\\textdaggerdbl");M(z,W,Vi,"","\\rmoustache",!0);M(z,W,Ps,"","\\lmoustache",!0);M(z,W,Vi,"","\\rgroup",!0);M(z,W,Ps,"","\\lgroup",!0);M(z,W,It,"","\\mp",!0);M(z,W,It,"","\\ominus",!0);M(z,W,It,"","\\uplus",!0);M(z,W,It,"","\\sqcap",!0);M(z,W,It,"","\\ast");M(z,W,It,"","\\sqcup",!0);M(z,W,It,"","\\bigcirc",!0);M(z,W,It,"","\\bullet",!0);M(z,W,It,"","\\ddagger");M(z,W,It,"","\\wr",!0);M(z,W,It,"","\\amalg");M(z,W,It,"&","\\And");M(z,W,oe,"","\\longleftarrow",!0);M(z,W,oe,"","\\Leftarrow",!0);M(z,W,oe,"","\\Longleftarrow",!0);M(z,W,oe,"","\\longrightarrow",!0);M(z,W,oe,"","\\Rightarrow",!0);M(z,W,oe,"","\\Longrightarrow",!0);M(z,W,oe,"","\\leftrightarrow",!0);M(z,W,oe,"","\\longleftrightarrow",!0);M(z,W,oe,"","\\Leftrightarrow",!0);M(z,W,oe,"","\\Longleftrightarrow",!0);M(z,W,oe,"","\\mapsto",!0);M(z,W,oe,"","\\longmapsto",!0);M(z,W,oe,"","\\nearrow",!0);M(z,W,oe,"","\\hookleftarrow",!0);M(z,W,oe,"","\\hookrightarrow",!0);M(z,W,oe,"","\\searrow",!0);M(z,W,oe,"","\\leftharpoonup",!0);M(z,W,oe,"","\\rightharpoonup",!0);M(z,W,oe,"","\\swarrow",!0);M(z,W,oe,"","\\leftharpoondown",!0);M(z,W,oe,"","\\rightharpoondown",!0);M(z,W,oe,"","\\nwarrow",!0);M(z,W,oe,"","\\rightleftharpoons",!0);M(z,se,oe,"","\\nless",!0);M(z,se,oe,"","\\@nleqslant");M(z,se,oe,"","\\@nleqq");M(z,se,oe,"","\\lneq",!0);M(z,se,oe,"","\\lneqq",!0);M(z,se,oe,"","\\@lvertneqq");M(z,se,oe,"","\\lnsim",!0);M(z,se,oe,"","\\lnapprox",!0);M(z,se,oe,"","\\nprec",!0);M(z,se,oe,"","\\npreceq",!0);M(z,se,oe,"","\\precnsim",!0);M(z,se,oe,"","\\precnapprox",!0);M(z,se,oe,"","\\nsim",!0);M(z,se,oe,"","\\@nshortmid");M(z,se,oe,"","\\nmid",!0);M(z,se,oe,"","\\nvdash",!0);M(z,se,oe,"","\\nvDash",!0);M(z,se,oe,"","\\ntriangleleft");M(z,se,oe,"","\\ntrianglelefteq",!0);M(z,se,oe,"","\\subsetneq",!0);M(z,se,oe,"","\\@varsubsetneq");M(z,se,oe,"","\\subsetneqq",!0);M(z,se,oe,"","\\@varsubsetneqq");M(z,se,oe,"","\\ngtr",!0);M(z,se,oe,"","\\@ngeqslant");M(z,se,oe,"","\\@ngeqq");M(z,se,oe,"","\\gneq",!0);M(z,se,oe,"","\\gneqq",!0);M(z,se,oe,"","\\@gvertneqq");M(z,se,oe,"","\\gnsim",!0);M(z,se,oe,"","\\gnapprox",!0);M(z,se,oe,"","\\nsucc",!0);M(z,se,oe,"","\\nsucceq",!0);M(z,se,oe,"","\\succnsim",!0);M(z,se,oe,"","\\succnapprox",!0);M(z,se,oe,"","\\ncong",!0);M(z,se,oe,"","\\@nshortparallel");M(z,se,oe,"","\\nparallel",!0);M(z,se,oe,"","\\nVDash",!0);M(z,se,oe,"","\\ntriangleright");M(z,se,oe,"","\\ntrianglerighteq",!0);M(z,se,oe,"","\\@nsupseteqq");M(z,se,oe,"","\\supsetneq",!0);M(z,se,oe,"","\\@varsupsetneq");M(z,se,oe,"","\\supsetneqq",!0);M(z,se,oe,"","\\@varsupsetneqq");M(z,se,oe,"","\\nVdash",!0);M(z,se,oe,"","\\precneqq",!0);M(z,se,oe,"","\\succneqq",!0);M(z,se,oe,"","\\@nsubseteqq");M(z,se,It,"","\\unlhd");M(z,se,It,"","\\unrhd");M(z,se,oe,"","\\nleftarrow",!0);M(z,se,oe,"","\\nrightarrow",!0);M(z,se,oe,"","\\nLeftarrow",!0);M(z,se,oe,"","\\nRightarrow",!0);M(z,se,oe,"","\\nleftrightarrow",!0);M(z,se,oe,"","\\nLeftrightarrow",!0);M(z,se,oe,"","\\vartriangle");M(z,se,me,"","\\hslash");M(z,se,me,"","\\triangledown");M(z,se,me,"","\\lozenge");M(z,se,me,"","\\circledS");M(z,se,me,"","\\circledR");M(ot,se,me,"","\\circledR");M(z,se,me,"","\\measuredangle",!0);M(z,se,me,"","\\nexists");M(z,se,me,"","\\mho");M(z,se,me,"","\\Finv",!0);M(z,se,me,"","\\Game",!0);M(z,se,me,"","\\backprime");M(z,se,me,"","\\blacktriangle");M(z,se,me,"","\\blacktriangledown");M(z,se,me,"","\\blacksquare");M(z,se,me,"","\\blacklozenge");M(z,se,me,"","\\bigstar");M(z,se,me,"","\\sphericalangle",!0);M(z,se,me,"","\\complement",!0);M(z,se,me,"","\\eth",!0);M(ot,W,me,"","");M(z,se,me,"","\\diagup");M(z,se,me,"","\\diagdown");M(z,se,me,"","\\square");M(z,se,me,"","\\Box");M(z,se,me,"","\\Diamond");M(z,se,me,"","\\yen",!0);M(ot,se,me,"","\\yen",!0);M(z,se,me,"","\\checkmark",!0);M(ot,se,me,"","\\checkmark");M(z,se,me,"","\\beth",!0);M(z,se,me,"","\\daleth",!0);M(z,se,me,"","\\gimel",!0);M(z,se,me,"","\\digamma",!0);M(z,se,me,"","\\varkappa");M(z,se,Ps,"","\\@ulcorner",!0);M(z,se,Vi,"","\\@urcorner",!0);M(z,se,Ps,"","\\@llcorner",!0);M(z,se,Vi,"","\\@lrcorner",!0);M(z,se,oe,"","\\leqq",!0);M(z,se,oe,"","\\leqslant",!0);M(z,se,oe,"","\\eqslantless",!0);M(z,se,oe,"","\\lesssim",!0);M(z,se,oe,"","\\lessapprox",!0);M(z,se,oe,"","\\approxeq",!0);M(z,se,It,"","\\lessdot");M(z,se,oe,"","\\lll",!0);M(z,se,oe,"","\\lessgtr",!0);M(z,se,oe,"","\\lesseqgtr",!0);M(z,se,oe,"","\\lesseqqgtr",!0);M(z,se,oe,"","\\doteqdot");M(z,se,oe,"","\\risingdotseq",!0);M(z,se,oe,"","\\fallingdotseq",!0);M(z,se,oe,"","\\backsim",!0);M(z,se,oe,"","\\backsimeq",!0);M(z,se,oe,"","\\subseteqq",!0);M(z,se,oe,"","\\Subset",!0);M(z,se,oe,"","\\sqsubset",!0);M(z,se,oe,"","\\preccurlyeq",!0);M(z,se,oe,"","\\curlyeqprec",!0);M(z,se,oe,"","\\precsim",!0);M(z,se,oe,"","\\precapprox",!0);M(z,se,oe,"","\\vartriangleleft");M(z,se,oe,"","\\trianglelefteq");M(z,se,oe,"","\\vDash",!0);M(z,se,oe,"","\\Vvdash",!0);M(z,se,oe,"","\\smallsmile");M(z,se,oe,"","\\smallfrown");M(z,se,oe,"","\\bumpeq",!0);M(z,se,oe,"","\\Bumpeq",!0);M(z,se,oe,"","\\geqq",!0);M(z,se,oe,"","\\geqslant",!0);M(z,se,oe,"","\\eqslantgtr",!0);M(z,se,oe,"","\\gtrsim",!0);M(z,se,oe,"","\\gtrapprox",!0);M(z,se,It,"","\\gtrdot");M(z,se,oe,"","\\ggg",!0);M(z,se,oe,"","\\gtrless",!0);M(z,se,oe,"","\\gtreqless",!0);M(z,se,oe,"","\\gtreqqless",!0);M(z,se,oe,"","\\eqcirc",!0);M(z,se,oe,"","\\circeq",!0);M(z,se,oe,"","\\triangleq",!0);M(z,se,oe,"","\\thicksim");M(z,se,oe,"","\\thickapprox");M(z,se,oe,"","\\supseteqq",!0);M(z,se,oe,"","\\Supset",!0);M(z,se,oe,"","\\sqsupset",!0);M(z,se,oe,"","\\succcurlyeq",!0);M(z,se,oe,"","\\curlyeqsucc",!0);M(z,se,oe,"","\\succsim",!0);M(z,se,oe,"","\\succapprox",!0);M(z,se,oe,"","\\vartriangleright");M(z,se,oe,"","\\trianglerighteq");M(z,se,oe,"","\\Vdash",!0);M(z,se,oe,"","\\shortmid");M(z,se,oe,"","\\shortparallel");M(z,se,oe,"","\\between",!0);M(z,se,oe,"","\\pitchfork",!0);M(z,se,oe,"","\\varpropto");M(z,se,oe,"","\\blacktriangleleft");M(z,se,oe,"","\\therefore",!0);M(z,se,oe,"","\\backepsilon");M(z,se,oe,"","\\blacktriangleright");M(z,se,oe,"","\\because",!0);M(z,se,oe,"","\\llless");M(z,se,oe,"","\\gggtr");M(z,se,It,"","\\lhd");M(z,se,It,"","\\rhd");M(z,se,oe,"","\\eqsim",!0);M(z,W,oe,"","\\Join");M(z,se,oe,"","\\Doteq",!0);M(z,se,It,"","\\dotplus",!0);M(z,se,It,"","\\smallsetminus");M(z,se,It,"","\\Cap",!0);M(z,se,It,"","\\Cup",!0);M(z,se,It,"","\\doublebarwedge",!0);M(z,se,It,"","\\boxminus",!0);M(z,se,It,"","\\boxplus",!0);M(z,se,It,"","\\divideontimes",!0);M(z,se,It,"","\\ltimes",!0);M(z,se,It,"","\\rtimes",!0);M(z,se,It,"","\\leftthreetimes",!0);M(z,se,It,"","\\rightthreetimes",!0);M(z,se,It,"","\\curlywedge",!0);M(z,se,It,"","\\curlyvee",!0);M(z,se,It,"","\\circleddash",!0);M(z,se,It,"","\\circledast",!0);M(z,se,It,"","\\centerdot");M(z,se,It,"","\\intercal",!0);M(z,se,It,"","\\doublecap");M(z,se,It,"","\\doublecup");M(z,se,It,"","\\boxtimes",!0);M(z,se,oe,"","\\dashrightarrow",!0);M(z,se,oe,"","\\dashleftarrow",!0);M(z,se,oe,"","\\leftleftarrows",!0);M(z,se,oe,"","\\leftrightarrows",!0);M(z,se,oe,"","\\Lleftarrow",!0);M(z,se,oe,"","\\twoheadleftarrow",!0);M(z,se,oe,"","\\leftarrowtail",!0);M(z,se,oe,"","\\looparrowleft",!0);M(z,se,oe,"","\\leftrightharpoons",!0);M(z,se,oe,"","\\curvearrowleft",!0);M(z,se,oe,"","\\circlearrowleft",!0);M(z,se,oe,"","\\Lsh",!0);M(z,se,oe,"","\\upuparrows",!0);M(z,se,oe,"","\\upharpoonleft",!0);M(z,se,oe,"","\\downharpoonleft",!0);M(z,W,oe,"","\\origof",!0);M(z,W,oe,"","\\imageof",!0);M(z,se,oe,"","\\multimap",!0);M(z,se,oe,"","\\leftrightsquigarrow",!0);M(z,se,oe,"","\\rightrightarrows",!0);M(z,se,oe,"","\\rightleftarrows",!0);M(z,se,oe,"","\\twoheadrightarrow",!0);M(z,se,oe,"","\\rightarrowtail",!0);M(z,se,oe,"","\\looparrowright",!0);M(z,se,oe,"","\\curvearrowright",!0);M(z,se,oe,"","\\circlearrowright",!0);M(z,se,oe,"","\\Rsh",!0);M(z,se,oe,"","\\downdownarrows",!0);M(z,se,oe,"","\\upharpoonright",!0);M(z,se,oe,"","\\downharpoonright",!0);M(z,se,oe,"","\\rightsquigarrow",!0);M(z,se,oe,"","\\leadsto");M(z,se,oe,"","\\Rrightarrow",!0);M(z,se,oe,"","\\restriction");M(z,W,me,"","`");M(z,W,me,"$","\\$");M(ot,W,me,"$","\\$");M(ot,W,me,"$","\\textdollar");M(z,W,me,"%","\\%");M(ot,W,me,"%","\\%");M(z,W,me,"_","\\_");M(ot,W,me,"_","\\_");M(ot,W,me,"_","\\textunderscore");M(z,W,me,"","\\angle",!0);M(z,W,me,"","\\infty",!0);M(z,W,me,"","\\prime");M(z,W,me,"","\\triangle");M(z,W,me,"","\\Gamma",!0);M(z,W,me,"","\\Delta",!0);M(z,W,me,"","\\Theta",!0);M(z,W,me,"","\\Lambda",!0);M(z,W,me,"","\\Xi",!0);M(z,W,me,"","\\Pi",!0);M(z,W,me,"","\\Sigma",!0);M(z,W,me,"","\\Upsilon",!0);M(z,W,me,"","\\Phi",!0);M(z,W,me,"","\\Psi",!0);M(z,W,me,"","\\Omega",!0);M(z,W,me,"A","");M(z,W,me,"B","");M(z,W,me,"E","");M(z,W,me,"Z","");M(z,W,me,"H","");M(z,W,me,"I","");M(z,W,me,"K","");M(z,W,me,"M","");M(z,W,me,"N","");M(z,W,me,"O","");M(z,W,me,"P","");M(z,W,me,"T","");M(z,W,me,"X","");M(z,W,me,"","\\neg",!0);M(z,W,me,"","\\lnot");M(z,W,me,"","\\top");M(z,W,me,"","\\bot");M(z,W,me,"","\\emptyset");M(z,se,me,"","\\varnothing");M(z,W,Xt,"","\\alpha",!0);M(z,W,Xt,"","\\beta",!0);M(z,W,Xt,"","\\gamma",!0);M(z,W,Xt,"","\\delta",!0);M(z,W,Xt,"","\\epsilon",!0);M(z,W,Xt,"","\\zeta",!0);M(z,W,Xt,"","\\eta",!0);M(z,W,Xt,"","\\theta",!0);M(z,W,Xt,"","\\iota",!0);M(z,W,Xt,"","\\kappa",!0);M(z,W,Xt,"","\\lambda",!0);M(z,W,Xt,"","\\mu",!0);M(z,W,Xt,"","\\nu",!0);M(z,W,Xt,"","\\xi",!0);M(z,W,Xt,"","\\omicron",!0);M(z,W,Xt,"","\\pi",!0);M(z,W,Xt,"","\\rho",!0);M(z,W,Xt,"","\\sigma",!0);M(z,W,Xt,"","\\tau",!0);M(z,W,Xt,"","\\upsilon",!0);M(z,W,Xt,"","\\phi",!0);M(z,W,Xt,"","\\chi",!0);M(z,W,Xt,"","\\psi",!0);M(z,W,Xt,"","\\omega",!0);M(z,W,Xt,"","\\varepsilon",!0);M(z,W,Xt,"","\\vartheta",!0);M(z,W,Xt,"","\\varpi",!0);M(z,W,Xt,"","\\varrho",!0);M(z,W,Xt,"","\\varsigma",!0);M(z,W,Xt,"","\\varphi",!0);M(z,W,It,"","*",!0);M(z,W,It,"+","+");M(z,W,It,"","-",!0);M(z,W,It,"","\\cdot",!0);M(z,W,It,"","\\circ",!0);M(z,W,It,"","\\div",!0);M(z,W,It,"","\\pm",!0);M(z,W,It,"","\\times",!0);M(z,W,It,"","\\cap",!0);M(z,W,It,"","\\cup",!0);M(z,W,It,"","\\setminus",!0);M(z,W,It,"","\\land");M(z,W,It,"","\\lor");M(z,W,It,"","\\wedge",!0);M(z,W,It,"","\\vee",!0);M(z,W,me,"","\\surd");M(z,W,Ps,"","\\langle",!0);M(z,W,Ps,"","\\lvert");M(z,W,Ps,"","\\lVert");M(z,W,Vi,"?","?");M(z,W,Vi,"!","!");M(z,W,Vi,"","\\rangle",!0);M(z,W,Vi,"","\\rvert");M(z,W,Vi,"","\\rVert");M(z,W,oe,"=","=");M(z,W,oe,":",":");M(z,W,oe,"","\\approx",!0);M(z,W,oe,"","\\cong",!0);M(z,W,oe,"","\\ge");M(z,W,oe,"","\\geq",!0);M(z,W,oe,"","\\gets");M(z,W,oe,">","\\gt",!0);M(z,W,oe,"","\\in",!0);M(z,W,oe,"","\\@not");M(z,W,oe,"","\\subset",!0);M(z,W,oe,"","\\supset",!0);M(z,W,oe,"","\\subseteq",!0);M(z,W,oe,"","\\supseteq",!0);M(z,se,oe,"","\\nsubseteq",!0);M(z,se,oe,"","\\nsupseteq",!0);M(z,W,oe,"","\\models");M(z,W,oe,"","\\leftarrow",!0);M(z,W,oe,"","\\le");M(z,W,oe,"","\\leq",!0);M(z,W,oe,"<","\\lt",!0);M(z,W,oe,"","\\rightarrow",!0);M(z,W,oe,"","\\to");M(z,se,oe,"","\\ngeq",!0);M(z,se,oe,"","\\nleq",!0);M(z,W,wc,"","\\ ");M(z,W,wc,"","\\space");M(z,W,wc,"","\\nobreakspace");M(ot,W,wc,"","\\ ");M(ot,W,wc,""," ");M(ot,W,wc,"","\\space");M(ot,W,wc,"","\\nobreakspace");M(z,W,wc,null,"\\nobreak");M(z,W,wc,null,"\\allowbreak");M(z,W,Y2,",",",");M(z,W,Y2,";",";");M(z,se,It,"","\\barwedge",!0);M(z,se,It,"","\\veebar",!0);M(z,W,It,"","\\odot",!0);M(z,W,It,"","\\oplus",!0);M(z,W,It,"","\\otimes",!0);M(z,W,me,"","\\partial",!0);M(z,W,It,"","\\oslash",!0);M(z,se,It,"","\\circledcirc",!0);M(z,se,It,"","\\boxdot",!0);M(z,W,It,"","\\bigtriangleup");M(z,W,It,"","\\bigtriangledown");M(z,W,It,"","\\dagger");M(z,W,It,"","\\diamond");M(z,W,It,"","\\star");M(z,W,It,"","\\triangleleft");M(z,W,It,"","\\triangleright");M(z,W,Ps,"{","\\{");M(ot,W,me,"{","\\{");M(ot,W,me,"{","\\textbraceleft");M(z,W,Vi,"}","\\}");M(ot,W,me,"}","\\}");M(ot,W,me,"}","\\textbraceright");M(z,W,Ps,"{","\\lbrace");M(z,W,Vi,"}","\\rbrace");M(z,W,Ps,"[","\\lbrack",!0);M(ot,W,me,"[","\\lbrack",!0);M(z,W,Vi,"]","\\rbrack",!0);M(ot,W,me,"]","\\rbrack",!0);M(z,W,Ps,"(","\\lparen",!0);M(z,W,Vi,")","\\rparen",!0);M(ot,W,me,"<","\\textless",!0);M(ot,W,me,">","\\textgreater",!0);M(z,W,Ps,"","\\lfloor",!0);M(z,W,Vi,"","\\rfloor",!0);M(z,W,Ps,"","\\lceil",!0);M(z,W,Vi,"","\\rceil",!0);M(z,W,me,"\\","\\backslash");M(z,W,me,"","|");M(z,W,me,"","\\vert");M(ot,W,me,"|","\\textbar",!0);M(z,W,me,"","\\|");M(z,W,me,"","\\Vert");M(ot,W,me,"","\\textbardbl");M(ot,W,me,"~","\\textasciitilde");M(ot,W,me,"\\","\\textbackslash");M(ot,W,me,"^","\\textasciicircum");M(z,W,oe,"","\\uparrow",!0);M(z,W,oe,"","\\Uparrow",!0);M(z,W,oe,"","\\downarrow",!0);M(z,W,oe,"","\\Downarrow",!0);M(z,W,oe,"","\\updownarrow",!0);M(z,W,oe,"","\\Updownarrow",!0);M(z,W,Da,"","\\coprod");M(z,W,Da,"","\\bigvee");M(z,W,Da,"","\\bigwedge");M(z,W,Da,"","\\biguplus");M(z,W,Da,"","\\bigcap");M(z,W,Da,"","\\bigcup");M(z,W,Da,"","\\int");M(z,W,Da,"","\\intop");M(z,W,Da,"","\\iint");M(z,W,Da,"","\\iiint");M(z,W,Da,"","\\prod");M(z,W,Da,"","\\sum");M(z,W,Da,"","\\bigotimes");M(z,W,Da,"","\\bigoplus");M(z,W,Da,"","\\bigodot");M(z,W,Da,"","\\oint");M(z,W,Da,"","\\oiint");M(z,W,Da,"","\\oiiint");M(z,W,Da,"","\\bigsqcup");M(z,W,Da,"","\\smallint");M(ot,W,Gf,"","\\textellipsis");M(z,W,Gf,"","\\mathellipsis");M(ot,W,Gf,"","\\ldots",!0);M(z,W,Gf,"","\\ldots",!0);M(z,W,Gf,"","\\@cdots",!0);M(z,W,Gf,"","\\ddots",!0);M(z,W,me,"","\\varvdots");M(ot,W,me,"","\\varvdots");M(z,W,Xn,"","\\acute");M(z,W,Xn,"","\\grave");M(z,W,Xn,"","\\ddot");M(z,W,Xn,"~","\\tilde");M(z,W,Xn,"","\\bar");M(z,W,Xn,"","\\breve");M(z,W,Xn,"","\\check");M(z,W,Xn,"^","\\hat");M(z,W,Xn,"","\\vec");M(z,W,Xn,"","\\dot");M(z,W,Xn,"","\\mathring");M(z,W,Xt,"","\\@imath");M(z,W,Xt,"","\\@jmath");M(z,W,me,"","");M(z,W,me,"","");M(ot,W,me,"","\\i",!0);M(ot,W,me,"","\\j",!0);M(ot,W,me,"","\\ss",!0);M(ot,W,me,"","\\ae",!0);M(ot,W,me,"","\\oe",!0);M(ot,W,me,"","\\o",!0);M(ot,W,me,"","\\AE",!0);M(ot,W,me,"","\\OE",!0);M(ot,W,me,"","\\O",!0);M(ot,W,Xn,"","\\'");M(ot,W,Xn,"","\\`");M(ot,W,Xn,"","\\^");M(ot,W,Xn,"","\\~");M(ot,W,Xn,"","\\=");M(ot,W,Xn,"","\\u");M(ot,W,Xn,"","\\.");M(ot,W,Xn,"","\\c");M(ot,W,Xn,"","\\r");M(ot,W,Xn,"","\\v");M(ot,W,Xn,"",'\\"');M(ot,W,Xn,"","\\H");M(ot,W,Xn,"","\\textcircled");var aG={"--":!0,"---":!0,"``":!0,"''":!0};M(ot,W,me,"","--",!0);M(ot,W,me,"","\\textendash");M(ot,W,me,"","---",!0);M(ot,W,me,"","\\textemdash");M(ot,W,me,"","`",!0);M(ot,W,me,"","\\textquoteleft");M(ot,W,me,"","'",!0);M(ot,W,me,"","\\textquoteright");M(ot,W,me,"","``",!0);M(ot,W,me,"","\\textquotedblleft");M(ot,W,me,"","''",!0);M(ot,W,me,"","\\textquotedblright");M(z,W,me,"","\\degree",!0);M(ot,W,me,"","\\degree");M(ot,W,me,"","\\textdegree",!0);M(z,W,me,"","\\pounds");M(z,W,me,"","\\mathsterling",!0);M(ot,W,me,"","\\pounds");M(ot,W,me,"","\\textsterling",!0);M(z,se,me,"","\\maltese");M(ot,se,me,"","\\maltese");var KR='0123456789/@."';for(var w3=0;w3<KR.length;w3++){var QR=KR.charAt(w3);M(z,W,me,QR,QR)}var XR='0123456789!@*()-=+";:?/.,';for(var S3=0;S3<XR.length;S3++){var YR=XR.charAt(S3);M(ot,W,me,YR,YR)}var eb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var N3=0;N3<eb.length;N3++){var Ty=eb.charAt(N3);M(z,W,Xt,Ty,Ty),M(ot,W,me,Ty,Ty)}M(z,se,me,"C","");M(ot,se,me,"C","");M(z,se,me,"H","");M(ot,se,me,"H","");M(z,se,me,"N","");M(ot,se,me,"N","");M(z,se,me,"P","");M(ot,se,me,"P","");M(z,se,me,"Q","");M(ot,se,me,"Q","");M(z,se,me,"R","");M(ot,se,me,"R","");M(z,se,me,"Z","");M(ot,se,me,"Z","");M(z,W,Xt,"h","");M(ot,W,Xt,"h","");var ir="";for(var Mi=0;Mi<eb.length;Mi++){var ia=eb.charAt(Mi);ir=String.fromCharCode(55349,56320+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56372+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56424+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56580+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56684+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56736+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56788+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56840+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56944+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),Mi<26&&(ir=String.fromCharCode(55349,56632+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir),ir=String.fromCharCode(55349,56476+Mi),M(z,W,Xt,ia,ir),M(ot,W,me,ia,ir))}ir="";M(z,W,Xt,"k",ir);M(ot,W,me,"k",ir);for(var wd=0;wd<10;wd++){var iu=wd.toString();ir=String.fromCharCode(55349,57294+wd),M(z,W,Xt,iu,ir),M(ot,W,me,iu,ir),ir=String.fromCharCode(55349,57314+wd),M(z,W,Xt,iu,ir),M(ot,W,me,iu,ir),ir=String.fromCharCode(55349,57324+wd),M(z,W,Xt,iu,ir),M(ot,W,me,iu,ir),ir=String.fromCharCode(55349,57334+wd),M(z,W,Xt,iu,ir),M(ot,W,me,iu,ir)}var tj="";for(var _3=0;_3<tj.length;_3++){var jy=tj.charAt(_3);M(z,W,Xt,jy,jy),M(ot,W,me,jy,jy)}var Ay=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],JR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],_ue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[Ay[c][2],Ay[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[JR[d][2],JR[d][o]]}else{if(i===120485||i===120486)return[Ay[0][2],Ay[0][o]];if(120486<i&&i<120782)return["",""];throw new ft("Unsupported character: "+e)}},J2=function(e,r,n){return Ln[n][e]&&Ln[n][e].replace&&(e=Ln[n][e].replace),{value:e,metrics:yE(e,r,n)}},No=function(e,r,n,a,i){var o=J2(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new oo(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new oo(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},Tue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&J2(e,"Main-Bold",r).metrics?No(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Ln[r][e].font==="main"?No(e,"Main-Regular",r,n,a):No(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},jue=function(e,r,n,a,i){return i!=="textord"&&J2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Aue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=_ue(i,a)),h.length>0)return No(i,h,a,r,o.concat(p));if(d){var m,x;if(d==="boldsymbol"){var y=jue(i,a,r,o,n);m=y.fontName,x=[y.fontClass]}else c?(m=oG[d].fontName,x=[d]):(m=Ey(d,r.fontWeight,r.fontShape),x=[d,r.fontWeight,r.fontShape]);if(J2(i,m,a).metrics)return No(i,m,a,r,o.concat(x));if(aG.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var S=[],N=0;N<i.length;N++)S.push(No(i[N],m,a,r,o.concat(x)));return sG(S)}}if(n==="mathord")return No(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var w=Ln[a][i]&&Ln[a][i].font;if(w==="ams"){var E=Ey("amsrm",r.fontWeight,r.fontShape);return No(i,E,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var O=Ey("textrm",r.fontWeight,r.fontShape);return No(i,O,a,r,o.concat(r.fontWeight,r.fontShape))}else{var R=Ey(w,r.fontWeight,r.fontShape);return No(i,R,a,r,o.concat(R,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Eue=(t,e)=>{if(Bu(t.classes)!==Bu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},kue=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof oo&&n instanceof oo&&Eue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},bE=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Ji=function(e,r,n,a){var i=new jx(e,r,n,a);return bE(i),i},iG=(t,e,r,n)=>new jx(t,e,r,n),Cue=function(e,r,n){var a=Ji([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=vt(a.height),a.maxFontSize=1,a},Oue=function(e,r,n,a){var i=new vE(e,r,n,a);return bE(i),i},sG=function(e){var r=new Tx(e);return bE(r),r},Iue=function(e,r){return e instanceof Tx?Ji([],[e],r):e},Rue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var x=e.children[m];p-=x.type==="kern"?x.size:x.elem.height+x.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Mue=function(e,r){for(var{children:n,depth:a}=Rue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Ji(["pstrut"],[]);h.style.height=vt(i);for(var p=[],m=a,x=a,y=a,S=0;S<n.length;S++){var N=n[S];if(N.type==="kern")y+=N.size;else{var w=N.elem,E=N.wrapperClasses||[],O=N.wrapperStyle||{},R=Ji(E,[h,w],void 0,O);R.style.top=vt(-i-y-w.depth),N.marginLeft&&(R.style.marginLeft=N.marginLeft),N.marginRight&&(R.style.marginRight=N.marginRight),p.push(R),y+=w.height+w.depth}m=Math.min(m,y),x=Math.max(x,y)}var P=Ji(["vlist"],p);P.style.height=vt(x);var I;if(m<0){var k=Ji([],[]),A=Ji(["vlist"],[k]);A.style.height=vt(-m);var j=Ji(["vlist-s"],[new oo("")]);I=[Ji(["vlist-r"],[P,j]),Ji(["vlist-r"],[A])]}else I=[Ji(["vlist-r"],[P])];var C=Ji(["vlist-t"],I);return I.length===2&&C.classes.push("vlist-t2"),C.height=x,C.depth=-m,C},Due=(t,e)=>{var r=Ji(["mspace"],[],e),n=ea(t,e);return r.style.marginRight=vt(n),r},Ey=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},oG={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},lG={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Pue=function(e,r){var[n,a,i]=lG[e],o=new $u(n),c=new dc([o],{width:vt(a),height:vt(i),style:"width:"+vt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=iG(["overlay"],[c],r);return d.height=i,d.style.height=vt(i),d.style.width=vt(a),d},Ce={fontMap:oG,makeSymbol:No,mathsym:Tue,makeSpan:Ji,makeSvgSpan:iG,makeLineSpan:Cue,makeAnchor:Oue,makeFragment:sG,wrapFragment:Iue,makeVList:Mue,makeOrd:Aue,makeGlue:Due,staticSvg:Pue,svgData:lG,tryCombineChars:kue},Jn={number:3,unit:"mu"},Sd={number:4,unit:"mu"},Bl={number:5,unit:"mu"},Lue={mord:{mop:Jn,mbin:Sd,mrel:Bl,minner:Jn},mop:{mord:Jn,mop:Jn,mrel:Bl,minner:Jn},mbin:{mord:Sd,mop:Sd,mopen:Sd,minner:Sd},mrel:{mord:Bl,mop:Bl,mopen:Bl,minner:Bl},mopen:{},mclose:{mop:Jn,mbin:Sd,mrel:Bl,minner:Jn},mpunct:{mord:Jn,mop:Jn,mrel:Bl,mopen:Jn,mclose:Jn,mpunct:Jn,minner:Jn},minner:{mord:Jn,mop:Jn,mbin:Sd,mrel:Bl,mopen:Jn,mpunct:Jn,minner:Jn}},Bue={mord:{mop:Jn},mop:{mord:Jn,mop:Jn},mbin:{},mrel:{},mopen:{},mclose:{mop:Jn},mpunct:{},minner:{mop:Jn}},cG={},tb={},rb={};function At(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)cG[r[d]]=c;e&&(i&&(tb[e]=i),o&&(rb[e]=o))}function _0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;At({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var nb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},xa=function(e){return e.type==="ordgroup"?e.body:[e]},hc=Ce.makeSpan,$ue=["leftmost","mbin","mopen","mrel","mop","mpunct"],zue=["rightmost","mrel","mclose","mpunct"],Uue={display:Yt.DISPLAY,text:Yt.TEXT,script:Yt.SCRIPT,scriptscript:Yt.SCRIPTSCRIPT},Vue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ha=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=Vr(e[o],r);if(c instanceof Tx){var d=c.children;i.push(...d)}else i.push(c)}if(Ce.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Uue[p.style]))}var m=hc([a[0]||"leftmost"],[],r),x=hc([a[1]||"rightmost"],[],r),y=n==="root";return ZR(i,(S,N)=>{var w=N.classes[0],E=S.classes[0];w==="mbin"&&zue.includes(E)?N.classes[0]="mord":E==="mbin"&&$ue.includes(w)&&(S.classes[0]="mord")},{node:m},x,y),ZR(i,(S,N)=>{var w=rj(N),E=rj(S),O=w&&E?S.hasClass("mtight")?Bue[w][E]:Lue[w][E]:null;if(O)return Ce.makeGlue(O,h)},{node:m},x,y),i},ZR=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=uG(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=hc(["leftmost"])),n.insertAfter=(m=>x=>{e.splice(m+1,0,x),o++})(o)}a&&e.pop()},uG=function(e){return e instanceof Tx||e instanceof vE||e instanceof jx&&e.hasClass("enclosing")?e:null},Fue=function t(e,r){var n=uG(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},rj=function(e,r){return e?(r&&(e=Fue(e,r)),Vue[e.classes[0]]||null):null},pg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return hc(r.concat(n))},Vr=function(e,r,n){if(!e)return hc();if(tb[e.type]){var a=tb[e.type](e,r);if(n&&r.size!==n.size){a=hc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ft("Got group of unknown type: '"+e.type+"'")};function ky(t,e){var r=hc(["base"],t,e),n=hc(["strut"]);return n.style.height=vt(r.height+r.depth),r.depth&&(n.style.verticalAlign=vt(-r.depth)),r.children.unshift(n),r}function nj(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Ha(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(ky(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(ky(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(ky(o,e));var h;r?(h=ky(Ha(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=hc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=vt(p.height+p.depth),p.depth&&(m.style.verticalAlign=vt(-p.depth))}return p}function dG(t){return new Tx(t)}class As{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Bu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Zo&&this.children[n+1]instanceof Zo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Zo;)a+=this.children[++n].toText();e.appendChild(new Zo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Xr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Xr.escape(Bu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Zo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Xr.escape(this.toText())}toText(){return this.text}}class que{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",vt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+vt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ht={MathNode:As,TextNode:Zo,SpaceNode:que,newDocumentFragment:dG},lo=function(e,r,n){return Ln[r][e]&&Ln[r][e].replace&&e.charCodeAt(0)!==55349&&!(aG.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Ln[r][e].replace),new ht.TextNode(e)},wE=function(e){return e.length===1?e[0]:new ht.MathNode("mrow",e)},SE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Ln[a][i]&&Ln[a][i].replace&&(i=Ln[a][i].replace);var o=Ce.fontMap[n].fontName;return yE(i,o,a)?Ce.fontMap[n].variant:null};function T3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Zo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Zo&&r.text===","}else return!1}var us=function(e,r,n){if(e.length===1){var a=In(e[0],r);return n&&a instanceof As&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=In(e[c],r);if(d instanceof As&&o instanceof As){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(T3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&T3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||T3(o))){var h=d.children[0];h instanceof As&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof Zo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof Zo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},zu=function(e,r,n){return wE(us(e,r,n))},In=function(e,r){if(!e)return new ht.MathNode("mrow");if(rb[e.type]){var n=rb[e.type](e,r);return n}else throw new ft("Got group of unknown type: '"+e.type+"'")};function eM(t,e,r,n,a){var i=us(t,r),o;i.length===1&&i[0]instanceof As&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new ht.MathNode("mrow",i);var c=new ht.MathNode("annotation",[new ht.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new ht.MathNode("semantics",[o,c]),h=new ht.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ce.makeSpan([p],[h])}var hG=function(e){return new Vl({style:e.displayMode?Yt.DISPLAY:Yt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},fG=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ce.makeSpan(n,[e])}return e},Hue=function(e,r,n){var a=hG(n),i;if(n.output==="mathml")return eM(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=nj(e,a);i=Ce.makeSpan(["katex"],[o])}else{var c=eM(e,r,a,n.displayMode,!1),d=nj(e,a);i=Ce.makeSpan(["katex"],[c,d])}return fG(i,n)},Gue=function(e,r,n){var a=hG(n),i=nj(e,a),o=Ce.makeSpan(["katex"],[i]);return fG(o,n)},Wue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Kue=function(e){var r=new ht.MathNode("mo",[new ht.TextNode(Wue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Que={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Xue=function(e){return e.type==="ordgroup"?e.body.length:1},Yue=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=Xue(h.base),m,x,y;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,y=.42,x=d+"4"):(m=312,c=2340,y=.34,x="tilde4");else{var S=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][S],m=[0,239,300,360,420][S],y=[0,.24,.3,.3,.36,.42][S],x=d+S):(c=[0,600,1033,2339,2340][S],m=[0,260,286,306,312][S],y=[0,.26,.286,.3,.306,.34][S],x="tilde"+S)}var N=new $u(x),w=new dc([N],{width:"100%",height:vt(y),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ce.makeSvgSpan([],[w],r),minWidth:0,height:y}}else{var E=[],O=Que[d],[R,P,I]=O,k=I/1e3,A=R.length,j,C;if(A===1){var U=O[3];j=["hide-tail"],C=[U]}else if(A===2)j=["halfarrow-left","halfarrow-right"],C=["xMinYMin","xMaxYMin"];else if(A===3)j=["brace-left","brace-center","brace-right"],C=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var L=0;L<A;L++){var $=new $u(R[L]),B=new dc([$],{width:"400em",height:vt(k),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:C[L]+" slice"}),G=Ce.makeSvgSpan([j[L]],[B],r);if(A===1)return{span:G,minWidth:P,height:k};G.style.height=vt(k),E.push(G)}return{span:Ce.makeSpan(["stretchy"],E,r),minWidth:P,height:k}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=vt(o),i>0&&(a.style.minWidth=vt(i)),a},Jue=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=Ce.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new ej({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new ej({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new dc(h,{width:"100%",height:vt(c)});o=Ce.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=vt(c),o},fc={encloseSpan:Jue,mathMLnode:Kue,svgSpan:Yue};function Sr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function NE(t){var e=Z2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Z2(t){return t&&(t.type==="atom"||Nue.hasOwnProperty(t.type))?t:null}var _E=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=Sr(t.base,"accent"),r=n.base,t.base=r,a=wue(Vr(t,e)),t.base=n):(n=Sr(t,"accent"),r=n.base);var i=Vr(r,e.havingCrampedStyle()),o=n.isShifty&&Xr.isCharacterBox(r),c=0;if(o){var d=Xr.getBaseElem(r),h=Vr(d,e.havingCrampedStyle());c=WR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),x;if(n.isStretchy)x=fc.svgSpan(n,e),x=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:x,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+vt(2*c)+")",marginLeft:vt(2*c)}:void 0}]},e);else{var y,S;n.label==="\\vec"?(y=Ce.staticSvg("vec",e),S=Ce.svgData.vec[1]):(y=Ce.makeOrd({mode:n.mode,text:n.label},e,"textord"),y=WR(y),y.italic=0,S=y.width,p&&(m+=y.depth)),x=Ce.makeSpan(["accent-body"],[y]);var N=n.label==="\\textcircled";N&&(x.classes.push("accent-full"),m=i.height);var w=c;N||(w-=S/2),x.style.left=vt(w),n.label==="\\textcircled"&&(x.style.top=".2em"),x=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:x}]},e)}var E=Ce.makeSpan(["mord","accent"],[x],e);return a?(a.children[0]=E,a.height=Math.max(E.height,a.height),a.classes[0]="mord",a):E},pG=(t,e)=>{var r=t.isStretchy?fc.mathMLnode(t.label):new ht.MathNode("mo",[lo(t.label,t.mode)]),n=new ht.MathNode("mover",[In(t.base,e),r]);return n.setAttribute("accent","true"),n},Zue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));At({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=nb(e[0]),n=!Zue.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:_E,mathmlBuilder:pG});At({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:_E,mathmlBuilder:pG});At({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Vr(t.base,e),n=fc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=fc.mathMLnode(t.label),n=new ht.MathNode("munder",[In(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Cy=t=>{var e=new ht.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};At({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ce.wrapFragment(Vr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=Ce.wrapFragment(Vr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=fc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ce.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=fc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=Cy(In(t.body,e));if(t.below){var i=Cy(In(t.below,e));n=new ht.MathNode("munderover",[r,i,a])}else n=new ht.MathNode("mover",[r,a])}else if(t.below){var o=Cy(In(t.below,e));n=new ht.MathNode("munder",[r,o])}else n=Cy(),n=new ht.MathNode("mover",[r,n]);return n}});var ede=Ce.makeSpan;function mG(t,e){var r=Ha(t.body,e,!0);return ede([t.mclass],r,e)}function gG(t,e){var r,n=us(t.body,e);return t.mclass==="minner"?r=new ht.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new ht.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new ht.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}At({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:xa(a),isCharacterBox:Xr.isCharacterBox(a)}},htmlBuilder:mG,mathmlBuilder:gG});var ew=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};At({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:ew(e[0]),body:xa(e[1]),isCharacterBox:Xr.isCharacterBox(e[1])}}});At({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=ew(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:xa(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Xr.isCharacterBox(d)}},htmlBuilder:mG,mathmlBuilder:gG});At({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:ew(e[0]),body:xa(e[0])}},htmlBuilder(t,e){var r=Ha(t.body,e,!0),n=Ce.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=us(t.body,e),n=new ht.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var tde={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},tM=()=>({type:"styling",body:[],mode:"math",style:"display"}),rM=t=>t.type==="textord"&&t.text==="@",rde=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function nde(t,e,r){var n=tde[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function ade(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ft("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=tM(),d=0;d<o.length;d++)if(!rM(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=NE(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var x=!0,y=d+1;y<o.length;y++){if(rde(o[y],h)){x=!1,d=y;break}if(rM(o[y]))throw new ft("Missing a "+h+" character to complete a CD arrow.",o[y]);p[m].body.push(o[y])}if(x)throw new ft("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ft('Expected one of "<>AV=|." after @',o[d]);var S=nde(h,p,t),N={type:"styling",body:[S],mode:"math",style:"display"};n.push(N),c=tM()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}At({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ce.wrapFragment(Vr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=vt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new ht.MathNode("mrow",[In(t.label,e)]);return r=new ht.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ht.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});At({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ce.wrapFragment(Vr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new ht.MathNode("mrow",[In(t.fragment,e)])}});At({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Sr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=Sr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ft("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ft("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var xG=(t,e)=>{var r=Ha(t.body,e.withColor(t.color),!1);return Ce.makeFragment(r)},yG=(t,e)=>{var r=us(t.body,e.withColor(t.color)),n=new ht.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};At({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Sr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:xa(a)}},htmlBuilder:xG,mathmlBuilder:yG});At({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=Sr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:xG,mathmlBuilder:yG});At({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&Sr(a,"size").value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=vt(ea(t.size,e)))),r},mathmlBuilder(t,e){var r=new ht.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",vt(ea(t.size,e)))),r}});var aj={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},vG=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ft("Expected a control sequence",t);return e},ide=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},bG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};At({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(aj[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=aj[n.text]),Sr(e.parseFunction(),"internal");throw new ft("Invalid token after macro prefix",n)}});At({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ft("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ft('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ft('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ft("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===aj[r]),{type:"internal",mode:e.mode}}});At({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=vG(e.gullet.popToken());e.gullet.consumeSpaces();var a=ide(e);return bG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});At({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=vG(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return bG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var bm=function(e,r,n){var a=Ln.math[e]&&Ln.math[e].replace,i=yE(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},TE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=Ce.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},wG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=vt(i),e.height-=i,e.depth+=i},sde=function(e,r,n,a,i,o){var c=Ce.makeSymbol(e,"Main-Regular",i,a),d=TE(c,r,a,o);return n&&wG(d,a,r),d},ode=function(e,r,n,a){return Ce.makeSymbol(e,"Size"+r+"-Regular",n,a)},SG=function(e,r,n,a,i,o){var c=ode(e,r,i,a),d=TE(Ce.makeSpan(["delimsizing","size"+r],[c],a),Yt.TEXT,a,o);return n&&wG(d,a,Yt.TEXT),d},j3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ce.makeSpan(["delimsizinginner",a],[Ce.makeSpan([],[Ce.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},A3=function(e,r,n){var a=Jo["Size4-Regular"][e.charCodeAt(0)]?Jo["Size4-Regular"][e.charCodeAt(0)][4]:Jo["Size1-Regular"][e.charCodeAt(0)][4],i=new $u("inner",hue(e,Math.round(1e3*r))),o=new dc([i],{width:vt(a),height:vt(r),style:"width:"+vt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ce.makeSvgSpan([],[o],n);return c.height=r,c.style.height=vt(r),c.style.width=vt(a),{type:"elem",elem:c}},ij=.008,Oy={type:"kern",size:-1*ij},lde=["|","\\lvert","\\rvert","\\vert"],cde=["\\|","\\lVert","\\rVert","\\Vert"],NG=function(e,r,n,a,i,o){var c,d,h,p,m="",x=0;c=h=p=e,d=null;var y="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):lde.includes(e)?(h="",m="vert",x=333):cde.includes(e)?(h="",m="doublevert",x=556):e==="["||e==="\\lbrack"?(c="",h="",p="",y="Size4-Regular",m="lbrack",x=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",y="Size4-Regular",m="rbrack",x=667):e==="\\lfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="lfloor",x=667):e==="\\lceil"||e===""?(c="",h=p="",y="Size4-Regular",m="lceil",x=667):e==="\\rfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="rfloor",x=667):e==="\\rceil"||e===""?(c="",h=p="",y="Size4-Regular",m="rceil",x=667):e==="("||e==="\\lparen"?(c="",h="",p="",y="Size4-Regular",m="lparen",x=875):e===")"||e==="\\rparen"?(c="",h="",p="",y="Size4-Regular",m="rparen",x=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",y="Size4-Regular");var S=bm(c,y,i),N=S.height+S.depth,w=bm(h,y,i),E=w.height+w.depth,O=bm(p,y,i),R=O.height+O.depth,P=0,I=1;if(d!==null){var k=bm(d,y,i);P=k.height+k.depth,I=2}var A=N+R+P,j=Math.max(0,Math.ceil((r-A)/(I*E))),C=A+j*I*E,U=a.fontMetrics().axisHeight;n&&(U*=a.sizeMultiplier);var L=C/2-U,$=[];if(m.length>0){var B=C-N-R,G=Math.round(C*1e3),K=fue(m,Math.round(B*1e3)),H=new $u(m,K),Z=(x/1e3).toFixed(3)+"em",ne=(G/1e3).toFixed(3)+"em",ce=new dc([H],{width:Z,height:ne,viewBox:"0 0 "+x+" "+G}),he=Ce.makeSvgSpan([],[ce],a);he.height=G/1e3,he.style.width=Z,he.style.height=ne,$.push({type:"elem",elem:he})}else{if($.push(j3(p,y,i)),$.push(Oy),d===null){var Y=C-N-R+2*ij;$.push(A3(h,Y,a))}else{var ae=(C-N-R-P)/2+2*ij;$.push(A3(h,ae,a)),$.push(Oy),$.push(j3(d,y,i)),$.push(Oy),$.push(A3(h,ae,a))}$.push(Oy),$.push(j3(c,y,i))}var re=a.havingBaseStyle(Yt.TEXT),ye=Ce.makeVList({positionType:"bottom",positionData:L,children:$},re);return TE(Ce.makeSpan(["delimsizing","mult"],[ye],re),Yt.TEXT,a,o)},E3=80,k3=.08,C3=function(e,r,n,a,i){var o=due(e,a,n),c=new $u(e,o),d=new dc([c],{width:"400em",height:vt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ce.makeSvgSpan(["hide-tail"],[d],i)},ude=function(e,r){var n=r.havingBaseSizing(),a=AG("\\surd",e*n.sizeMultiplier,jG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+E3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+k3)/i,h=(1+o)/i,c=C3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+E3)*Mm[a.size],h=(Mm[a.size]+o)/i,d=(Mm[a.size]+o+k3)/i,c=C3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+k3,h=e+o,p=Math.floor(1e3*e+o)+E3,c=C3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=vt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},_G=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],dde=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],TG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Mm=[0,1.2,1.8,2.4,3],hde=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),_G.includes(e)||TG.includes(e))return SG(e,r,!1,n,a,i);if(dde.includes(e))return NG(e,Mm[r],!1,n,a,i);throw new ft("Illegal delimiter: '"+e+"'")},fde=[{type:"small",style:Yt.SCRIPTSCRIPT},{type:"small",style:Yt.SCRIPT},{type:"small",style:Yt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],pde=[{type:"small",style:Yt.SCRIPTSCRIPT},{type:"small",style:Yt.SCRIPT},{type:"small",style:Yt.TEXT},{type:"stack"}],jG=[{type:"small",style:Yt.SCRIPTSCRIPT},{type:"small",style:Yt.SCRIPT},{type:"small",style:Yt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],mde=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},AG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=bm(e,mde(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},EG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;TG.includes(e)?c=fde:_G.includes(e)?c=jG:c=pde;var d=AG(e,r,c,a);return d.type==="small"?sde(e,d.style,n,a,i,o):d.type==="large"?SG(e,d.size,n,a,i,o):NG(e,r,n,a,i,o)},gde=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return EG(e,m,!0,a,i,o)},rc={sqrtImage:ude,sizedDelim:hde,sizeToMaxHeight:Mm,customSizedDelim:EG,leftRightDelim:gde},nM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},xde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function tw(t,e){var r=Z2(t);if(r&&xde.includes(r.text))return r;throw r?new ft("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ft("Invalid delimiter type '"+t.type+"'",t)}At({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=tw(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:nM[t.funcName].size,mclass:nM[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ce.makeSpan([t.mclass]):rc.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(lo(t.delim,t.mode));var r=new ht.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=vt(rc.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function aM(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}At({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ft("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:tw(e[0],t).text,color:r}}});At({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=tw(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=Sr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{aM(t);for(var r=Ha(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=pg(e,["mopen"]):c=rc.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=rc.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=pg(e,["mclose"]);else{var x=t.rightColor?e.withColor(t.rightColor):e;m=rc.leftRightDelim(t.right,n,a,x,t.mode,["mclose"])}return r.push(m),Ce.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{aM(t);var r=us(t.body,e);if(t.left!=="."){var n=new ht.MathNode("mo",[lo(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new ht.MathNode("mo",[lo(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return wE(r)}});At({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=tw(e[0],t);if(!t.parser.leftrightDepth)throw new ft("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=pg(e,[]);else{r=rc.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?lo("|","text"):lo(t.delim,t.mode),n=new ht.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var jE=(t,e)=>{var r=Ce.wrapFragment(Vr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Xr.isCharacterBox(t.body);if(n==="sout")i=Ce.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=ea({number:.6,unit:"pt"},e),h=ea({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=vt(m/2+d);var x=Math.floor(1e3*m*a),y=cue(x),S=new dc([new $u("phase",y)],{width:"400em",height:vt(x/1e3),viewBox:"0 0 400000 "+x,preserveAspectRatio:"xMinYMin slice"});i=Ce.makeSvgSpan(["hide-tail"],[S],e),i.style.height=vt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var N=0,w=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),N=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),w=N):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),N=4*E,w=Math.max(0,.25-r.depth)):(N=c?.2:0,w=N),i=fc.encloseSpan(r,n,N,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=vt(E)):n==="angl"&&E!==.049&&(i.style.borderTopWidth=vt(E),i.style.borderRightWidth=vt(E)),o=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var O;if(t.backgroundColor)O=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var R=/cancel|phase/.test(n)?["svg-align"]:[];O=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:R}]},e)}return/cancel/.test(n)&&(O.height=r.height,O.depth=r.depth),/cancel/.test(n)&&!c?Ce.makeSpan(["mord","cancel-lap"],[O],e):Ce.makeSpan(["mord"],[O],e)},AE=(t,e)=>{var r=0,n=new ht.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[In(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};At({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Sr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:jE,mathmlBuilder:AE});At({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Sr(e[0],"color-token").color,o=Sr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:jE,mathmlBuilder:AE});At({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});At({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:jE,mathmlBuilder:AE});At({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var kG={};function hl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)kG[r[d]]=c;i&&(tb[e]=i),o&&(rb[e]=o)}var CG={};function J(t,e){CG[t]=e}function iM(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var rw=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ft("{"+t.envName+"} can be used only in display mode.")};function EE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Gu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:x}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)o=1;else if(o=parseFloat(y),!o||o<0)throw new ft("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var S=[],N=[S],w=[],E=[],O=d!=null?[]:void 0;function R(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function P(){O&&(t.gullet.macros.get("\\df@tag")?(O.push(t.subparse([new Is("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):O.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(R(),E.push(iM(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),S.push(I);var k=t.fetch().text;if(k==="&"){if(m&&S.length===m){if(h||c)throw new ft("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(k==="\\end"){P(),S.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(N.length>1||!p)&&N.pop(),E.length<N.length+1&&E.push([]);break}else if(k==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),w.push(A?A.value:null),P(),E.push(iM(t)),S=[],N.push(S),R()}else throw new ft("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:N,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:O,leqno:x}}function kE(t){return t.slice(0,1)==="d"?"display":"text"}var fl=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,x=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var y=r.havingStyle(Yt.SCRIPT).sizeMultiplier;x=.2778*(y/r.sizeMultiplier)}var S=e.colSeparationType==="CD"?ea({number:3,unit:"ex"},r):12*m,N=3*m,w=e.arraystretch*S,E=.7*w,O=.3*w,R=0;function P(je){for(var ct=0;ct<je.length;++ct)ct>0&&(R+=.25),h.push({pos:R,isDashed:je[ct]})}for(P(o[0]),n=0;n<e.body.length;++n){var I=e.body[n],k=E,A=O;c<I.length&&(c=I.length);var j=new Array(I.length);for(a=0;a<I.length;++a){var C=Vr(I[a],r);A<C.depth&&(A=C.depth),k<C.height&&(k=C.height),j[a]=C}var U=e.rowGaps[n],L=0;U&&(L=ea(U,r),L>0&&(L+=O,A<L&&(A=L),L=0)),e.addJot&&(A+=N),j.height=k,j.depth=A,R+=k,j.pos=R,R+=A+L,d[n]=j,P(o[n+1])}var $=R/2+r.fontMetrics().axisHeight,B=e.cols||[],G=[],K,H,Z=[];if(e.tags&&e.tags.some(je=>je))for(n=0;n<i;++n){var ne=d[n],ce=ne.pos-$,he=e.tags[n],Y=void 0;he===!0?Y=Ce.makeSpan(["eqn-num"],[],r):he===!1?Y=Ce.makeSpan([],[],r):Y=Ce.makeSpan([],Ha(he,r,!0),r),Y.depth=ne.depth,Y.height=ne.height,Z.push({type:"elem",elem:Y,shift:ce})}for(a=0,H=0;a<c||H<B.length;++a,++H){for(var ae=B[H]||{},re=!0;ae.type==="separator";){if(re||(K=Ce.makeSpan(["arraycolsep"],[]),K.style.width=vt(r.fontMetrics().doubleRuleSep),G.push(K)),ae.separator==="|"||ae.separator===":"){var ye=ae.separator==="|"?"solid":"dashed",De=Ce.makeSpan(["vertical-separator"],[],r);De.style.height=vt(R),De.style.borderRightWidth=vt(p),De.style.borderRightStyle=ye,De.style.margin="0 "+vt(-p/2);var Ye=R-$;Ye&&(De.style.verticalAlign=vt(-Ye)),G.push(De)}else throw new ft("Invalid separator type: "+ae.separator);H++,ae=B[H]||{},re=!1}if(!(a>=c)){var rt=void 0;(a>0||e.hskipBeforeAndAfter)&&(rt=Xr.deflt(ae.pregap,x),rt!==0&&(K=Ce.makeSpan(["arraycolsep"],[]),K.style.width=vt(rt),G.push(K)));var et=[];for(n=0;n<i;++n){var Ne=d[n],Ue=Ne[a];if(Ue){var X=Ne.pos-$;Ue.depth=Ne.depth,Ue.height=Ne.height,et.push({type:"elem",elem:Ue,shift:X})}}et=Ce.makeVList({positionType:"individualShift",children:et},r),et=Ce.makeSpan(["col-align-"+(ae.align||"c")],[et]),G.push(et),(a<c-1||e.hskipBeforeAndAfter)&&(rt=Xr.deflt(ae.postgap,x),rt!==0&&(K=Ce.makeSpan(["arraycolsep"],[]),K.style.width=vt(rt),G.push(K)))}}if(d=Ce.makeSpan(["mtable"],G),h.length>0){for(var te=Ce.makeLineSpan("hline",r,p),be=Ce.makeLineSpan("hdashline",r,p),we=[{type:"elem",elem:d,shift:0}];h.length>0;){var Qe=h.pop(),at=Qe.pos-$;Qe.isDashed?we.push({type:"elem",elem:be,shift:at}):we.push({type:"elem",elem:te,shift:at})}d=Ce.makeVList({positionType:"individualShift",children:we},r)}if(Z.length===0)return Ce.makeSpan(["mord"],[d],r);var kt=Ce.makeVList({positionType:"individualShift",children:Z},r);return kt=Ce.makeSpan(["tag"],[kt],r),Ce.makeFragment([d,kt])},yde={c:"center ",l:"left ",r:"right "},pl=function(e,r){for(var n=[],a=new ht.MathNode("mtd",[],["mtr-glue"]),i=new ht.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new ht.MathNode("mtd",[In(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new ht.MathNode("mtr",d))}var p=new ht.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",vt(m));var x="",y="";if(e.cols&&e.cols.length>0){var S=e.cols,N="",w=!1,E=0,O=S.length;S[0].type==="separator"&&(x+="top ",E=1),S[S.length-1].type==="separator"&&(x+="bottom ",O-=1);for(var R=E;R<O;R++)S[R].type==="align"?(y+=yde[S[R].align],w&&(N+="none "),w=!0):S[R].type==="separator"&&w&&(N+=S[R].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(N)&&p.setAttribute("columnlines",N.trim())}if(e.colSeparationType==="align"){for(var P=e.cols||[],I="",k=1;k<P.length;k++)I+=k%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var A="",j=e.hLinesBeforeRow;x+=j[0].length>0?"left ":"",x+=j[j.length-1].length>0?"right ":"";for(var C=1;C<j.length-1;C++)A+=j[C].length===0?"none ":j[C][0]?"dashed ":"solid ";return/[sd]/.test(A)&&p.setAttribute("rowlines",A.trim()),x!==""&&(p=new ht.MathNode("menclose",[p]),p.setAttribute("notation",x.trim())),e.arraystretch&&e.arraystretch<1&&(p=new ht.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},OG=function(e,r){e.envName.indexOf("ed")===-1&&rw(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Gu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:EE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var x=Sr(r[0].body[m],"textord");p+=x.text}c=Number(p),d=c*2}var y=!d;o.body.forEach(function(E){for(var O=1;O<E.length;O+=2){var R=Sr(E[O],"styling"),P=Sr(R.body[0],"ordgroup");P.body.unshift(h)}if(y)d<E.length&&(d=E.length);else{var I=E.length/2;if(c<I)throw new ft("Too many math in a row: "+("expected "+c+", but got "+I),E[0])}});for(var S=0;S<d;++S){var N="r",w=0;S%2===1?N="l":S>0&&y&&(w=1),n[S]={type:"align",align:N,pregap:w,postgap:0}}return o.colSeparationType=y?"align":"alignat",o};hl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=Z2(e[0]),n=r?[e[0]]:Sr(e[0],"ordgroup").body,a=n.map(function(o){var c=NE(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ft("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Gu(t.parser,i,kE(t.envName))},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ft("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Gu(t.parser,n,kE(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Gu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=Z2(e[0]),n=r?[e[0]]:Sr(e[0],"ordgroup").body,a=n.map(function(o){var c=NE(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ft("Unknown column alignment: "+d,o)});if(a.length>1)throw new ft("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Gu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ft("{subarray} can contain only one column");return i},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Gu(t.parser,e,kE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:OG,htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&rw(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:EE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Gu(t.parser,e,"display")},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:OG,htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){rw(t);var e={autoTag:EE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Gu(t.parser,e,"display")},htmlBuilder:fl,mathmlBuilder:pl});hl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return rw(t),ade(t.parser)},htmlBuilder:fl,mathmlBuilder:pl});J("\\nonumber","\\gdef\\@eqnsw{0}");J("\\notag","\\nonumber");At({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ft(t.funcName+" valid only within array environment")}});var sM=kG;At({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ft("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=Sr(a.body[o],"textord").text;if(n==="\\begin"){if(!sM.hasOwnProperty(i))throw new ft("No such environment: "+i,a);var c=sM[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var x=r.nextToken,y=Sr(r.parseFunction(),"environment");if(y.name!==i)throw new ft("Mismatch: \\begin{"+i+"} matched by \\end{"+y.name+"}",x);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var IG=(t,e)=>{var r=t.font,n=e.withFont(r);return Vr(t.body,n)},RG=(t,e)=>{var r=t.font,n=e.withFont(r);return In(t.body,n)},oM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};At({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=nb(e[0]),i=n;return i in oM&&(i=oM[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:IG,mathmlBuilder:RG});At({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Xr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:ew(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});At({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:IG,mathmlBuilder:RG});var MG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Yt.SCRIPT.id?r.text():Yt.DISPLAY:t==="text"&&r.size===Yt.DISPLAY.size?r=Yt.TEXT:t==="script"?r=Yt.SCRIPT:t==="scriptscript"&&(r=Yt.SCRIPTSCRIPT),r},CE=(t,e)=>{var r=MG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=Vr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=Vr(t.denom,i,e),p,m,x;t.hasBarLine?(t.barSize?(m=ea(t.barSize,e),p=Ce.makeLineSpan("frac-line",e,m)):p=Ce.makeLineSpan("frac-line",e),m=p.height,x=p.height):(p=null,m=0,x=e.fontMetrics().defaultRuleThickness);var y,S,N;r.size===Yt.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,m>0?S=3*x:S=7*x,N=e.fontMetrics().denom1):(m>0?(y=e.fontMetrics().num2,S=x):(y=e.fontMetrics().num3,S=3*x),N=e.fontMetrics().denom2);var w;if(p){var O=e.fontMetrics().axisHeight;y-o.depth-(O+.5*m)<S&&(y+=S-(y-o.depth-(O+.5*m))),O-.5*m-(h.height-N)<S&&(N+=S-(O-.5*m-(h.height-N)));var R=-(O-.5*m);w=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:p,shift:R},{type:"elem",elem:o,shift:-y}]},e)}else{var E=y-o.depth-(h.height-N);E<S&&(y+=.5*(S-E),N+=.5*(S-E)),w=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:o,shift:-y}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var P;r.size===Yt.DISPLAY.size?P=e.fontMetrics().delim1:r.size===Yt.SCRIPTSCRIPT.size?P=e.havingStyle(Yt.SCRIPT).fontMetrics().delim2:P=e.fontMetrics().delim2;var I,k;return t.leftDelim==null?I=pg(e,["mopen"]):I=rc.customSizedDelim(t.leftDelim,P,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?k=Ce.makeSpan([]):t.rightDelim==null?k=pg(e,["mclose"]):k=rc.customSizedDelim(t.rightDelim,P,!0,e.havingStyle(r),t.mode,["mclose"]),Ce.makeSpan(["mord"].concat(i.sizingClasses(e)),[I,Ce.makeSpan(["mfrac"],[w]),k],e)},OE=(t,e)=>{var r=new ht.MathNode("mfrac",[In(t.numer,e),In(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=ea(t.barSize,e);r.setAttribute("linethickness",vt(n))}var a=MG(t.size,e.style);if(a.size!==e.style.size){r=new ht.MathNode("mstyle",[r]);var i=a.size===Yt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new ht.MathNode("mo",[new ht.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new ht.MathNode("mo",[new ht.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return wE(o)}return r};At({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:CE,mathmlBuilder:OE});At({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});At({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var lM=["display","text","script","scriptscript"],cM=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};At({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=nb(e[0]),o=i.type==="atom"&&i.family==="open"?cM(i.text):null,c=nb(e[1]),d=c.type==="atom"&&c.family==="close"?cM(c.text):null,h=Sr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var x="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var S=Sr(y.body[0],"textord");x=lM[Number(S.text)]}}else y=Sr(y,"textord"),x=lM[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:x}},htmlBuilder:CE,mathmlBuilder:OE});At({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Sr(e[0],"size").value,token:a}}});At({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=Kce(Sr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:CE,mathmlBuilder:OE});var DG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Vr(t.sup,e.havingStyle(r.sup()),e):Vr(t.sub,e.havingStyle(r.sub()),e),a=Sr(t.base,"horizBrace")):a=Sr(t,"horizBrace");var i=Vr(a.base,e.havingBaseStyle(Yt.DISPLAY)),o=fc.svgSpan(a,e),c;if(a.isOver?(c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ce.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ce.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},vde=(t,e)=>{var r=fc.mathMLnode(t.label);return new ht.MathNode(t.isOver?"mover":"munder",[In(t.base,e),r])};At({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:DG,mathmlBuilder:vde});At({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=Sr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:xa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Ha(t.body,e,!1);return Ce.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=zu(t.body,e);return r instanceof As||(r=new As("mrow",[r])),r.setAttribute("href",t.href),r}});At({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Sr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:xa(c)}}});At({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:xa(e[0])}},htmlBuilder(t,e){var r=Ha(t.body,e,!1);return Ce.makeFragment(r)},mathmlBuilder(t,e){return new ht.MathNode("mrow",us(t.body,e))}});At({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=Sr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],x=m.indexOf("=");if(x<0)throw new ft("\\htmlData key/value '"+m+"' missing equals sign");var y=m.slice(0,x),S=m.slice(x+1);d["data-"+y.trim()]=S}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:xa(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Ha(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ce.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>zu(t.body,e)});At({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:xa(e[0]),mathml:xa(e[1])}},htmlBuilder:(t,e)=>{var r=Ha(t.html,e,!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>zu(t.mathml,e)});var O3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ft("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!eG(n))throw new ft("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};At({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=Sr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var x=m[1].trim();switch(m[0].trim()){case"alt":c=x;break;case"width":a=O3(x);break;case"height":i=O3(x);break;case"totalheight":o=O3(x);break;default:throw new ft("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var y=Sr(e[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:y}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=ea(t.height,e),n=0;t.totalheight.number>0&&(n=ea(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=ea(t.width,e));var i={height:vt(r+n)};a>0&&(i.width=vt(a)),n>0&&(i.verticalAlign=vt(-n));var o=new vue(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new ht.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=ea(t.height,e),a=0;if(t.totalheight.number>0&&(a=ea(t.totalheight,e)-n,r.setAttribute("valign",vt(-a))),r.setAttribute("height",vt(n+a)),t.width.number>0){var i=ea(t.width,e);r.setAttribute("width",vt(i))}return r.setAttribute("src",t.src),r}});At({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=Sr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ce.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=ea(t.dimension,e);return new ht.SpaceNode(r)}});At({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ce.makeSpan([],[Vr(t.body,e)]),r=Ce.makeSpan(["inner"],[r],e)):r=Ce.makeSpan(["inner"],[Vr(t.body,e)]);var n=Ce.makeSpan(["fix"],[]),a=Ce.makeSpan([t.alignment],[r,n],e),i=Ce.makeSpan(["strut"]);return i.style.height=vt(a.height+a.depth),a.depth&&(i.style.verticalAlign=vt(-a.depth)),a.children.unshift(i),a=Ce.makeSpan(["thinbox"],[a],e),Ce.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new ht.MathNode("mpadded",[In(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});At({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});At({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ft("Mismatched "+t.funcName)}});var uM=(t,e)=>{switch(e.style.size){case Yt.DISPLAY.size:return t.display;case Yt.TEXT.size:return t.text;case Yt.SCRIPT.size:return t.script;case Yt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};At({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:xa(e[0]),text:xa(e[1]),script:xa(e[2]),scriptscript:xa(e[3])}},htmlBuilder:(t,e)=>{var r=uM(t,e),n=Ha(r,e,!1);return Ce.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=uM(t,e);return zu(r,e)}});var PG=(t,e,r,n,a,i,o)=>{t=Ce.makeSpan([],[t]);var c=r&&Xr.isCharacterBox(r),d,h;if(e){var p=Vr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Vr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var x;if(h&&d){var y=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;x=Ce.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:vt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:vt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var S=t.height-o;x=Ce.makeVList({positionType:"top",positionData:S,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:vt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var N=t.depth+o;x=Ce.makeVList({positionType:"bottom",positionData:N,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:vt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[x];if(d&&i!==0&&!c){var E=Ce.makeSpan(["mspace"],[],n);E.style.marginRight=vt(i),w.unshift(E)}return Ce.makeSpan(["mop","op-limits"],w,n)},LG=["\\smallint"],Wf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Sr(t.base,"op"),a=!0):i=Sr(t,"op");var o=e.style,c=!1;o.size===Yt.DISPLAY.size&&i.symbol&&!LG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ce.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,x=Ce.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:x,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var y=Ha(i.body,e,!0);y.length===1&&y[0]instanceof oo?(d=y[0],d.classes[0]="mop"):d=Ce.makeSpan(["mop"],y,e)}else{for(var S=[],N=1;N<i.name.length;N++)S.push(Ce.mathsym(i.name[N],i.mode,e));d=Ce.makeSpan(["mop"],S,e)}var w=0,E=0;return(d instanceof oo||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),a?PG(d,r,n,e,o,E,w):(w&&(d.style.position="relative",d.style.top=vt(w)),d)},Ax=(t,e)=>{var r;if(t.symbol)r=new As("mo",[lo(t.name,t.mode)]),LG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new As("mo",us(t.body,e));else{r=new As("mi",[new Zo(t.name.slice(1))]);var n=new As("mo",[lo("","text")]);t.parentIsSupSub?r=new As("mrow",[r,n]):r=dG([r,n])}return r},bde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};At({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=bde[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Wf,mathmlBuilder:Ax});At({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xa(n)}},htmlBuilder:Wf,mathmlBuilder:Ax});var wde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};At({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Wf,mathmlBuilder:Ax});At({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Wf,mathmlBuilder:Ax});At({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=wde[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Wf,mathmlBuilder:Ax});var BG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Sr(t.base,"operatorname"),a=!0):i=Sr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var x=m.text;return typeof x=="string"?{type:"textord",mode:m.mode,text:x}:m}),d=Ha(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof oo&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Ce.makeSpan(["mop"],d,e)}else o=Ce.makeSpan(["mop"],[],e);return a?PG(o,r,n,e,e.style,0,0):o},Sde=(t,e)=>{for(var r=us(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof ht.SpaceNode))if(i instanceof ht.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof ht.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new ht.TextNode(c)]}var d=new ht.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new ht.MathNode("mo",[lo("","text")]);return t.parentIsSupSub?new ht.MathNode("mrow",[d,h]):ht.newDocumentFragment([d,h])};At({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:xa(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:BG,mathmlBuilder:Sde});J("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");_0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ce.makeFragment(Ha(t.body,e,!1)):Ce.makeSpan(["mord"],Ha(t.body,e,!0),e)},mathmlBuilder(t,e){return zu(t.body,e,!0)}});At({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Vr(t.body,e.havingCrampedStyle()),n=Ce.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ce.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new ht.MathNode("mo",[new ht.TextNode("")]);r.setAttribute("stretchy","true");var n=new ht.MathNode("mover",[In(t.body,e),r]);return n.setAttribute("accent","true"),n}});At({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:xa(n)}},htmlBuilder:(t,e)=>{var r=Ha(t.body,e.withPhantom(),!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=us(t.body,e);return new ht.MathNode("mphantom",r)}});At({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Vr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ce.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=us(xa(t.body),e),n=new ht.MathNode("mphantom",r),a=new ht.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});At({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan(["inner"],[Vr(t.body,e.withPhantom())]),n=Ce.makeSpan(["fix"],[]);return Ce.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=us(xa(t.body),e),n=new ht.MathNode("mphantom",r),a=new ht.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});At({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Sr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Vr(t.body,e),n=ea(t.dy,e);return Ce.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new ht.MathNode("mpadded",[In(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});At({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});At({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=Sr(e[0],"size"),o=Sr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&Sr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mord","rule"],[],e),n=ea(t.width,e),a=ea(t.height,e),i=t.shift?ea(t.shift,e):0;return r.style.borderRightWidth=vt(n),r.style.borderTopWidth=vt(a),r.style.bottom=vt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=ea(t.width,e),n=ea(t.height,e),a=t.shift?ea(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new ht.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",vt(r)),o.setAttribute("height",vt(n));var c=new ht.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",vt(a)):(c.setAttribute("height",vt(a)),c.setAttribute("depth",vt(-a))),c.setAttribute("voffset",vt(a)),c}});function $G(t,e,r){for(var n=Ha(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ce.makeFragment(n)}var dM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Nde=(t,e)=>{var r=e.havingSize(t.size);return $G(t.body,r,e)};At({type:"sizing",names:dM,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:dM.indexOf(n)+1,body:i}},htmlBuilder:Nde,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=us(t.body,r),a=new ht.MathNode("mstyle",n);return a.setAttribute("mathsize",vt(r.sizeMultiplier)),a}});At({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&Sr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Vr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new ht.MathNode("mpadded",[In(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});At({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Vr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ce.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Yt.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=rc.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var x=d.height-r.height-o-h;r.style.paddingLeft=vt(p);var y=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+x)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var S=e.havingStyle(Yt.SCRIPTSCRIPT),N=Vr(t.index,S,e),w=.6*(y.height-y.depth),E=Ce.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:N}]},e),O=Ce.makeSpan(["root"],[E]);return Ce.makeSpan(["mord","sqrt"],[O,y],e)}else return Ce.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new ht.MathNode("mroot",[In(r,e),In(n,e)]):new ht.MathNode("msqrt",[In(r,e)])}});var hM={display:Yt.DISPLAY,text:Yt.TEXT,script:Yt.SCRIPT,scriptscript:Yt.SCRIPTSCRIPT};At({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=hM[t.style],n=e.havingStyle(r).withFont("");return $G(t.body,n,e)},mathmlBuilder(t,e){var r=hM[t.style],n=e.havingStyle(r),a=us(t.body,n),i=new ht.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var _de=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Yt.DISPLAY.size||n.alwaysHandleSupSub);return a?Wf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Yt.DISPLAY.size||n.limits);return i?BG:null}else{if(n.type==="accent")return Xr.isCharacterBox(n.base)?_E:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?DG:null}else return null}else return null};_0({type:"supsub",htmlBuilder(t,e){var r=_de(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=Vr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,x=n&&Xr.isCharacterBox(n);if(a){var y=e.havingStyle(e.style.sup());c=Vr(a,y,e),x||(p=o.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(i){var S=e.havingStyle(e.style.sub());d=Vr(i,S,e),x||(m=o.depth+S.fontMetrics().subDrop*S.sizeMultiplier/e.sizeMultiplier)}var N;e.style===Yt.DISPLAY?N=h.sup1:e.style.cramped?N=h.sup3:N=h.sup2;var w=e.sizeMultiplier,E=vt(.5/h.ptPerEm/w),O=null;if(d){var R=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof oo||R)&&(O=vt(-o.italic))}var P;if(c&&d){p=Math.max(p,N,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,k=4*I;if(p-c.depth-(d.height-m)<k){m=k-(p-c.depth)+d.height;var A=.8*h.xHeight-(p-c.depth);A>0&&(p+=A,m-=A)}var j=[{type:"elem",elem:d,shift:m,marginRight:E,marginLeft:O},{type:"elem",elem:c,shift:-p,marginRight:E}];P=Ce.makeVList({positionType:"individualShift",children:j},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var C=[{type:"elem",elem:d,marginLeft:O,marginRight:E}];P=Ce.makeVList({positionType:"shift",positionData:m,children:C},e)}else if(c)p=Math.max(p,N,c.depth+.25*h.xHeight),P=Ce.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var U=rj(o,"right")||"mord";return Ce.makeSpan([U],[o,Ce.makeSpan(["msupsub"],[P])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[In(t.base,e)];t.sub&&i.push(In(t.sub,e)),t.sup&&i.push(In(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Yt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Yt.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Yt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Yt.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Yt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Yt.DISPLAY)?o="mover":o="msup"}return new ht.MathNode(o,i)}});_0({type:"atom",htmlBuilder(t,e){return Ce.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new ht.MathNode("mo",[lo(t.text,t.mode)]);if(t.family==="bin"){var n=SE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var zG={mi:"italic",mn:"normal",mtext:"normal"};_0({type:"mathord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new ht.MathNode("mi",[lo(t.text,t.mode,e)]),n=SE(t,e)||"italic";return n!==zG[r.type]&&r.setAttribute("mathvariant",n),r}});_0({type:"textord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=lo(t.text,t.mode,e),n=SE(t,e)||"normal",a;return t.mode==="text"?a=new ht.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new ht.MathNode("mn",[r]):t.text==="\\prime"?a=new ht.MathNode("mo",[r]):a=new ht.MathNode("mi",[r]),n!==zG[a.type]&&a.setAttribute("mathvariant",n),a}});var I3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},R3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};_0({type:"spacing",htmlBuilder(t,e){if(R3.hasOwnProperty(t.text)){var r=R3[t.text].className||"";if(t.mode==="text"){var n=Ce.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ce.makeSpan(["mspace",r],[Ce.mathsym(t.text,t.mode,e)],e)}else{if(I3.hasOwnProperty(t.text))return Ce.makeSpan(["mspace",I3[t.text]],[],e);throw new ft('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(R3.hasOwnProperty(t.text))r=new ht.MathNode("mtext",[new ht.TextNode("")]);else{if(I3.hasOwnProperty(t.text))return new ht.MathNode("mspace");throw new ft('Unknown type of space "'+t.text+'"')}return r}});var fM=()=>{var t=new ht.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};_0({type:"tag",mathmlBuilder(t,e){var r=new ht.MathNode("mtable",[new ht.MathNode("mtr",[fM(),new ht.MathNode("mtd",[zu(t.body,e)]),fM(),new ht.MathNode("mtd",[zu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var pM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},mM={"\\textbf":"textbf","\\textmd":"textmd"},Tde={"\\textit":"textit","\\textup":"textup"},gM=(t,e)=>{var r=t.font;if(r){if(pM[r])return e.withTextFontFamily(pM[r]);if(mM[r])return e.withTextFontWeight(mM[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Tde[r])};At({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:xa(a),font:n}},htmlBuilder(t,e){var r=gM(t,e),n=Ha(t.body,r,!0);return Ce.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=gM(t,e);return zu(t.body,r)}});At({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Vr(t.body,e),n=Ce.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new ht.MathNode("mo",[new ht.TextNode("")]);r.setAttribute("stretchy","true");var n=new ht.MathNode("munder",[In(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});At({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Vr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ce.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new ht.MathNode("mpadded",[In(t.body,e)],["vcenter"])}});At({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ft("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=xM(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(Ce.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ce.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ce.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new ht.TextNode(xM(t)),n=new ht.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var xM=t=>t.body.replace(/ /g,t.star?"":""),yu=cG,UG=`[ \r
	]`,jde="\\\\[a-zA-Z@]+",Ade="\\\\[^\uD800-\uDFFF]",Ede="("+jde+")"+UG+"*",kde=`\\\\(
|[ \r	]+
?)[ \r	]*`,sj="[-]",Cde=new RegExp(sj+"+$"),Ode="("+UG+"+)|"+(kde+"|")+"([!-\\[\\]---]"+(sj+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(sj+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ede)+("|"+Ade+")");class yM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Ode,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Is("EOF",new es(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ft("Unexpected character: '"+e[r]+"'",new Is(e[r],new es(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Is(a,new es(this,r,this.tokenRegex.lastIndex))}}class Ide{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ft("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Rde=CG;J("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});J("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});J("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});J("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});J("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});J("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");J("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var vM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};J("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ft("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=vM[e.text],n==null||n>=r)throw new ft("Invalid base-"+r+" digit "+e.text);for(var a;(a=vM[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var IE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ft("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ft("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ft("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ft("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};J("\\newcommand",t=>IE(t,!1,!0,!1));J("\\renewcommand",t=>IE(t,!0,!1,!1));J("\\providecommand",t=>IE(t,!0,!0,!0));J("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});J("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});J("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),yu[r],Ln.math[r],Ln.text[r]),""});J("\\bgroup","{");J("\\egroup","}");J("~","\\nobreakspace");J("\\lq","`");J("\\rq","'");J("\\aa","\\r a");J("\\AA","\\r A");J("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");J("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");J("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");J("","\\mathscr{B}");J("","\\mathscr{E}");J("","\\mathscr{F}");J("","\\mathscr{H}");J("","\\mathscr{I}");J("","\\mathscr{L}");J("","\\mathscr{M}");J("","\\mathscr{R}");J("","\\mathfrak{C}");J("","\\mathfrak{H}");J("","\\mathfrak{Z}");J("\\Bbbk","\\Bbb{k}");J("","\\cdotp");J("\\llap","\\mathllap{\\textrm{#1}}");J("\\rlap","\\mathrlap{\\textrm{#1}}");J("\\clap","\\mathclap{\\textrm{#1}}");J("\\mathstrut","\\vphantom{(}");J("\\underbar","\\underline{\\text{#1}}");J("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');J("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");J("\\ne","\\neq");J("","\\neq");J("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");J("","\\notin");J("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");J("","\\perp");J("","\\mathclose{!\\mkern-0.8mu!}");J("","\\notni");J("","\\ulcorner");J("","\\urcorner");J("","\\llcorner");J("","\\lrcorner");J("","\\copyright");J("","\\textregistered");J("","\\textregistered");J("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');J("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');J("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');J("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');J("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");J("","\\vdots");J("\\varGamma","\\mathit{\\Gamma}");J("\\varDelta","\\mathit{\\Delta}");J("\\varTheta","\\mathit{\\Theta}");J("\\varLambda","\\mathit{\\Lambda}");J("\\varXi","\\mathit{\\Xi}");J("\\varPi","\\mathit{\\Pi}");J("\\varSigma","\\mathit{\\Sigma}");J("\\varUpsilon","\\mathit{\\Upsilon}");J("\\varPhi","\\mathit{\\Phi}");J("\\varPsi","\\mathit{\\Psi}");J("\\varOmega","\\mathit{\\Omega}");J("\\substack","\\begin{subarray}{c}#1\\end{subarray}");J("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");J("\\boxed","\\fbox{$\\displaystyle{#1}$}");J("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");J("\\implies","\\DOTSB\\;\\Longrightarrow\\;");J("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");J("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");J("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var bM={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};J("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in bM?e=bM[r]:(r.slice(0,4)==="\\not"||r in Ln.math&&["bin","rel"].includes(Ln.math[r].group))&&(e="\\dotsb"),e});var RE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};J("\\dotso",function(t){var e=t.future().text;return e in RE?"\\ldots\\,":"\\ldots"});J("\\dotsc",function(t){var e=t.future().text;return e in RE&&e!==","?"\\ldots\\,":"\\ldots"});J("\\cdots",function(t){var e=t.future().text;return e in RE?"\\@cdots\\,":"\\@cdots"});J("\\dotsb","\\cdots");J("\\dotsm","\\cdots");J("\\dotsi","\\!\\cdots");J("\\dotsx","\\ldots\\,");J("\\DOTSI","\\relax");J("\\DOTSB","\\relax");J("\\DOTSX","\\relax");J("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");J("\\,","\\tmspace+{3mu}{.1667em}");J("\\thinspace","\\,");J("\\>","\\mskip{4mu}");J("\\:","\\tmspace+{4mu}{.2222em}");J("\\medspace","\\:");J("\\;","\\tmspace+{5mu}{.2777em}");J("\\thickspace","\\;");J("\\!","\\tmspace-{3mu}{.1667em}");J("\\negthinspace","\\!");J("\\negmedspace","\\tmspace-{4mu}{.2222em}");J("\\negthickspace","\\tmspace-{5mu}{.277em}");J("\\enspace","\\kern.5em ");J("\\enskip","\\hskip.5em\\relax");J("\\quad","\\hskip1em\\relax");J("\\qquad","\\hskip2em\\relax");J("\\tag","\\@ifstar\\tag@literal\\tag@paren");J("\\tag@paren","\\tag@literal{({#1})}");J("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ft("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});J("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");J("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");J("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");J("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");J("\\newline","\\\\\\relax");J("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var VG=vt(Jo["Main-Regular"][84][1]-.7*Jo["Main-Regular"][65][1]);J("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+VG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");J("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+VG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");J("\\hspace","\\@ifstar\\@hspacer\\@hspace");J("\\@hspace","\\hskip #1\\relax");J("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");J("\\ordinarycolon",":");J("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");J("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');J("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');J("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');J("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');J("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');J("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');J("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');J("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');J("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');J("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');J("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');J("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');J("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');J("","\\dblcolon");J("","\\eqcolon");J("","\\coloneqq");J("","\\eqqcolon");J("","\\Coloneqq");J("\\ratio","\\vcentcolon");J("\\coloncolon","\\dblcolon");J("\\colonequals","\\coloneqq");J("\\coloncolonequals","\\Coloneqq");J("\\equalscolon","\\eqqcolon");J("\\equalscoloncolon","\\Eqqcolon");J("\\colonminus","\\coloneq");J("\\coloncolonminus","\\Coloneq");J("\\minuscolon","\\eqcolon");J("\\minuscoloncolon","\\Eqcolon");J("\\coloncolonapprox","\\Colonapprox");J("\\coloncolonsim","\\Colonsim");J("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");J("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");J("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");J("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");J("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");J("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");J("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");J("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");J("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");J("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");J("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");J("\\ngeqq","\\html@mathml{\\@ngeqq}{}");J("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");J("\\nleqq","\\html@mathml{\\@nleqq}{}");J("\\nleqslant","\\html@mathml{\\@nleqslant}{}");J("\\nshortmid","\\html@mathml{\\@nshortmid}{}");J("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");J("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");J("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");J("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");J("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");J("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");J("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");J("\\imath","\\html@mathml{\\@imath}{}");J("\\jmath","\\html@mathml{\\@jmath}{}");J("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");J("","\\llbracket");J("","\\rrbracket");J("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");J("","\\lBrace");J("","\\rBrace");J("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");J("","\\minuso");J("\\darr","\\downarrow");J("\\dArr","\\Downarrow");J("\\Darr","\\Downarrow");J("\\lang","\\langle");J("\\rang","\\rangle");J("\\uarr","\\uparrow");J("\\uArr","\\Uparrow");J("\\Uarr","\\Uparrow");J("\\N","\\mathbb{N}");J("\\R","\\mathbb{R}");J("\\Z","\\mathbb{Z}");J("\\alef","\\aleph");J("\\alefsym","\\aleph");J("\\Alpha","\\mathrm{A}");J("\\Beta","\\mathrm{B}");J("\\bull","\\bullet");J("\\Chi","\\mathrm{X}");J("\\clubs","\\clubsuit");J("\\cnums","\\mathbb{C}");J("\\Complex","\\mathbb{C}");J("\\Dagger","\\ddagger");J("\\diamonds","\\diamondsuit");J("\\empty","\\emptyset");J("\\Epsilon","\\mathrm{E}");J("\\Eta","\\mathrm{H}");J("\\exist","\\exists");J("\\harr","\\leftrightarrow");J("\\hArr","\\Leftrightarrow");J("\\Harr","\\Leftrightarrow");J("\\hearts","\\heartsuit");J("\\image","\\Im");J("\\infin","\\infty");J("\\Iota","\\mathrm{I}");J("\\isin","\\in");J("\\Kappa","\\mathrm{K}");J("\\larr","\\leftarrow");J("\\lArr","\\Leftarrow");J("\\Larr","\\Leftarrow");J("\\lrarr","\\leftrightarrow");J("\\lrArr","\\Leftrightarrow");J("\\Lrarr","\\Leftrightarrow");J("\\Mu","\\mathrm{M}");J("\\natnums","\\mathbb{N}");J("\\Nu","\\mathrm{N}");J("\\Omicron","\\mathrm{O}");J("\\plusmn","\\pm");J("\\rarr","\\rightarrow");J("\\rArr","\\Rightarrow");J("\\Rarr","\\Rightarrow");J("\\real","\\Re");J("\\reals","\\mathbb{R}");J("\\Reals","\\mathbb{R}");J("\\Rho","\\mathrm{P}");J("\\sdot","\\cdot");J("\\sect","\\S");J("\\spades","\\spadesuit");J("\\sub","\\subset");J("\\sube","\\subseteq");J("\\supe","\\supseteq");J("\\Tau","\\mathrm{T}");J("\\thetasym","\\vartheta");J("\\weierp","\\wp");J("\\Zeta","\\mathrm{Z}");J("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");J("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");J("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");J("\\bra","\\mathinner{\\langle{#1}|}");J("\\ket","\\mathinner{|{#1}\\rangle}");J("\\braket","\\mathinner{\\langle{#1}\\rangle}");J("\\Bra","\\left\\langle#1\\right|");J("\\Ket","\\left|#1\\right\\rangle");var FG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>x=>{t&&(x.macros.set("|",o),a.length&&x.macros.set("\\|",c));var y=m;if(!m&&a.length){var S=x.future();S.text==="|"&&(x.popToken(),y=!0)}return{tokens:y?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};J("\\bra@ket",FG(!1));J("\\bra@set",FG(!0));J("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");J("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");J("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");J("\\angln","{\\angl n}");J("\\blue","\\textcolor{##6495ed}{#1}");J("\\orange","\\textcolor{##ffa500}{#1}");J("\\pink","\\textcolor{##ff00af}{#1}");J("\\red","\\textcolor{##df0030}{#1}");J("\\green","\\textcolor{##28ae7b}{#1}");J("\\gray","\\textcolor{gray}{#1}");J("\\purple","\\textcolor{##9d38bd}{#1}");J("\\blueA","\\textcolor{##ccfaff}{#1}");J("\\blueB","\\textcolor{##80f6ff}{#1}");J("\\blueC","\\textcolor{##63d9ea}{#1}");J("\\blueD","\\textcolor{##11accd}{#1}");J("\\blueE","\\textcolor{##0c7f99}{#1}");J("\\tealA","\\textcolor{##94fff5}{#1}");J("\\tealB","\\textcolor{##26edd5}{#1}");J("\\tealC","\\textcolor{##01d1c1}{#1}");J("\\tealD","\\textcolor{##01a995}{#1}");J("\\tealE","\\textcolor{##208170}{#1}");J("\\greenA","\\textcolor{##b6ffb0}{#1}");J("\\greenB","\\textcolor{##8af281}{#1}");J("\\greenC","\\textcolor{##74cf70}{#1}");J("\\greenD","\\textcolor{##1fab54}{#1}");J("\\greenE","\\textcolor{##0d923f}{#1}");J("\\goldA","\\textcolor{##ffd0a9}{#1}");J("\\goldB","\\textcolor{##ffbb71}{#1}");J("\\goldC","\\textcolor{##ff9c39}{#1}");J("\\goldD","\\textcolor{##e07d10}{#1}");J("\\goldE","\\textcolor{##a75a05}{#1}");J("\\redA","\\textcolor{##fca9a9}{#1}");J("\\redB","\\textcolor{##ff8482}{#1}");J("\\redC","\\textcolor{##f9685d}{#1}");J("\\redD","\\textcolor{##e84d39}{#1}");J("\\redE","\\textcolor{##bc2612}{#1}");J("\\maroonA","\\textcolor{##ffbde0}{#1}");J("\\maroonB","\\textcolor{##ff92c6}{#1}");J("\\maroonC","\\textcolor{##ed5fa6}{#1}");J("\\maroonD","\\textcolor{##ca337c}{#1}");J("\\maroonE","\\textcolor{##9e034e}{#1}");J("\\purpleA","\\textcolor{##ddd7ff}{#1}");J("\\purpleB","\\textcolor{##c6b9fc}{#1}");J("\\purpleC","\\textcolor{##aa87ff}{#1}");J("\\purpleD","\\textcolor{##7854ab}{#1}");J("\\purpleE","\\textcolor{##543b78}{#1}");J("\\mintA","\\textcolor{##f5f9e8}{#1}");J("\\mintB","\\textcolor{##edf2df}{#1}");J("\\mintC","\\textcolor{##e0e5cc}{#1}");J("\\grayA","\\textcolor{##f6f7f7}{#1}");J("\\grayB","\\textcolor{##f0f1f2}{#1}");J("\\grayC","\\textcolor{##e3e5e6}{#1}");J("\\grayD","\\textcolor{##d6d8da}{#1}");J("\\grayE","\\textcolor{##babec2}{#1}");J("\\grayF","\\textcolor{##888d93}{#1}");J("\\grayG","\\textcolor{##626569}{#1}");J("\\grayH","\\textcolor{##3b3e40}{#1}");J("\\grayI","\\textcolor{##21242c}{#1}");J("\\kaBlue","\\textcolor{##314453}{#1}");J("\\kaGreen","\\textcolor{##71B307}{#1}");var qG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Mde{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Ide(Rde,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new yM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Is("EOF",n.loc)),this.pushTokens(a),new Is("",es.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ft("Extra }",i)}else if(i.text==="EOF")throw new ft("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ft("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ft("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ft("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ft("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ft("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ft("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Is(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new yM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||yu.hasOwnProperty(e)||Ln.math.hasOwnProperty(e)||Ln.text.hasOwnProperty(e)||qG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:yu.hasOwnProperty(e)&&!yu[e].primitive}}var wM=/^[]/,Iy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),M3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},SM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class nw{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Mde(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ft("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Is("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(nw.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&yu[a.text]&&yu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ft("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ft("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ft("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ft("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ft("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ft("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Iy[i.text]){var h=wM.test(i.text),p=[];for(p.push(new Is(Iy[i.text])),this.consume();;){var m=this.fetch().text;if(!Iy[m]||wM.test(m)!==h)break;p.unshift(new Is(Iy[m])),this.consume()}var x=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:x}:n={type:"ordgroup",mode:"math",body:x}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=yu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ft("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ft("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ft("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=yu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ft("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ft("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ft("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ft("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ft("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ft("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ft("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ft("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!eG(i))throw new ft("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:es.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!qG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ft("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:es.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ft(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}SM.hasOwnProperty(r[0])&&!Ln[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=SM[r[0]]+r.slice(1));var i=Cde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Ln[this.mode][r]){this.settings.strict&&this.mode==="math"&&tj.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Ln[this.mode][r].group,d=es.range(e),h;if(Sue.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(ZH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:es.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var x=i[0][m];if(!M3[x])throw new ft("Unknown accent ' "+x+"'",e);var y=M3[x][this.mode]||M3[x].text;if(!y)throw new ft("Accent "+x+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:es.range(e),label:y,isStretchy:!1,isShifty:!0,base:o}}return o}}nw.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var ME=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new nw(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ft("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Is("\\df@tag")])}]}return a},HG=function(e,r,n){r.textContent="";var a=DE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),HG=function(){throw new ft("KaTeX doesn't work in quirks mode.")});var Dde=function(e,r){var n=DE(e,r).toMarkup();return n},Pde=function(e,r){var n=new gE(r);return ME(e,n)},GG=function(e,r,n){if(n.throwOnError||!(e instanceof ft))throw e;var a=Ce.makeSpan(["katex-error"],[new oo(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},DE=function(e,r){var n=new gE(r);try{var a=ME(e,n);return Hue(a,e,n)}catch(i){return GG(i,e,n)}},Lde=function(e,r){var n=new gE(r);try{var a=ME(e,n);return Gue(a,e,n)}catch(i){return GG(i,e,n)}},Bde="0.16.28",$de={Span:jx,Anchor:vE,SymbolNode:oo,SvgNode:dc,PathNode:$u,LineNode:ej},ab={version:Bde,render:HG,renderToString:Dde,ParseError:ft,SETTINGS_SCHEMA:gv,__parse:Pde,__renderToDomTree:DE,__renderToHTMLTree:Lde,__setFontMetrics:pue,__defineSymbol:M,__defineFunction:At,__defineMacro:J,__domTree:$de};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function oj(t,e){return oj=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},oj(t,e)}function zde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yv(t,e,r){return zde()?yv=Reflect.construct:yv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&oj(h,o.prototype),h},yv.apply(null,arguments)}function So(t){return Ude(t)||Vde(t)||Fde(t)||qde()}function Ude(t){if(Array.isArray(t))return lj(t)}function Vde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fde(t,e){if(t){if(typeof t=="string")return lj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lj(t,e)}}function lj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Hde=Object.hasOwnProperty,NM=Object.setPrototypeOf,Gde=Object.isFrozen,Wde=Object.getPrototypeOf,Kde=Object.getOwnPropertyDescriptor,Ui=Object.freeze,co=Object.seal,Qde=Object.create,WG=typeof Reflect<"u"&&Reflect,ib=WG.apply,cj=WG.construct;ib||(ib=function(e,r,n){return e.apply(r,n)});Ui||(Ui=function(e){return e});co||(co=function(e){return e});cj||(cj=function(e,r){return yv(e,So(r))});var Xde=uo(Array.prototype.forEach),_M=uo(Array.prototype.pop),nm=uo(Array.prototype.push),vv=uo(String.prototype.toLowerCase),D3=uo(String.prototype.toString),TM=uo(String.prototype.match),bo=uo(String.prototype.replace),Yde=uo(String.prototype.indexOf),Jde=uo(String.prototype.trim),pi=uo(RegExp.prototype.test),P3=Zde(TypeError);function uo(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return ib(t,e,n)}}function Zde(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return cj(t,r)}}function _r(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:vv,NM&&NM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Gde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function Nd(t){var e=Qde(null),r;for(r in t)ib(Hde,t,[r])===!0&&(e[r]=t[r]);return e}function Ry(t,e){for(;t!==null;){var r=Kde(t,e);if(r){if(r.get)return uo(r.get);if(typeof r.value=="function")return uo(r.value)}t=Wde(t)}function n(a){return console.warn("fallback value for",a),null}return n}var jM=Ui(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L3=Ui(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),B3=Ui(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),e0e=Ui(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$3=Ui(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),t0e=Ui(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),AM=Ui(["#text"]),EM=Ui(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z3=Ui(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kM=Ui(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),My=Ui(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),r0e=co(/\{\{[\w\W]*|[\w\W]*\}\}/gm),n0e=co(/<%[\w\W]*|[\w\W]*%>/gm),a0e=co(/\${[\w\W]*}/gm),i0e=co(/^data-[\-\w.\u00B7-\uFFFF]+$/),s0e=co(/^aria-[\-\w]+$/),o0e=co(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),l0e=co(/^(?:\w+script|data):/i),c0e=co(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u0e=co(/^html$/i),d0e=co(/^[a-z][.\w]*(-[.\w]+)+$/i),h0e=function(){return typeof window>"u"?null:window},f0e=function(e,r){if(pu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function KG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h0e(),e=function(fe){return KG(fe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,x=t.DOMParser,y=t.trustedTypes,S=c.prototype,N=Ry(S,"cloneNode"),w=Ry(S,"nextSibling"),E=Ry(S,"childNodes"),O=Ry(S,"parentNode");if(typeof i=="function"){var R=n.createElement("template");R.content&&R.content.ownerDocument&&(n=R.content.ownerDocument)}var P=f0e(y,r),I=P?P.createHTML(""):"",k=n,A=k.implementation,j=k.createNodeIterator,C=k.createDocumentFragment,U=k.getElementsByTagName,L=r.importNode,$={};try{$=Nd(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof O=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var G=r0e,K=n0e,H=a0e,Z=i0e,ne=s0e,ce=l0e,he=c0e,Y=d0e,ae=o0e,re=null,ye=_r({},[].concat(So(jM),So(L3),So(B3),So($3),So(AM))),De=null,Ye=_r({},[].concat(So(EM),So(z3),So(kM),So(My))),rt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),et=null,Ne=null,Ue=!0,X=!0,te=!1,be=!0,we=!1,Qe=!0,at=!1,kt=!1,je=!1,ct=!1,Tt=!1,St=!1,bt=!0,de=!1,He="user-content-",xt=!0,Ge=!1,Je={},Et=null,Nt=_r({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dr=null,ge=_r({},["audio","video","img","source","image","track"]),nt=null,jt=_r({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",tr=tt,Le=!1,it=null,dt=_r({},[Bt,$t,tt],D3),Pt,Vt=["application/xhtml+xml","text/html"],qt="text/html",Ct,Fr=null,un=n.createElement("form"),Jr=function(fe){return fe instanceof RegExp||fe instanceof Function},qr=function(fe){Fr&&Fr===fe||((!fe||pu(fe)!=="object")&&(fe={}),fe=Nd(fe),Pt=Vt.indexOf(fe.PARSER_MEDIA_TYPE)===-1?Pt=qt:Pt=fe.PARSER_MEDIA_TYPE,Ct=Pt==="application/xhtml+xml"?D3:vv,re="ALLOWED_TAGS"in fe?_r({},fe.ALLOWED_TAGS,Ct):ye,De="ALLOWED_ATTR"in fe?_r({},fe.ALLOWED_ATTR,Ct):Ye,it="ALLOWED_NAMESPACES"in fe?_r({},fe.ALLOWED_NAMESPACES,D3):dt,nt="ADD_URI_SAFE_ATTR"in fe?_r(Nd(jt),fe.ADD_URI_SAFE_ATTR,Ct):jt,dr="ADD_DATA_URI_TAGS"in fe?_r(Nd(ge),fe.ADD_DATA_URI_TAGS,Ct):ge,Et="FORBID_CONTENTS"in fe?_r({},fe.FORBID_CONTENTS,Ct):Nt,et="FORBID_TAGS"in fe?_r({},fe.FORBID_TAGS,Ct):{},Ne="FORBID_ATTR"in fe?_r({},fe.FORBID_ATTR,Ct):{},Je="USE_PROFILES"in fe?fe.USE_PROFILES:!1,Ue=fe.ALLOW_ARIA_ATTR!==!1,X=fe.ALLOW_DATA_ATTR!==!1,te=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,be=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,we=fe.SAFE_FOR_TEMPLATES||!1,Qe=fe.SAFE_FOR_XML!==!1,at=fe.WHOLE_DOCUMENT||!1,ct=fe.RETURN_DOM||!1,Tt=fe.RETURN_DOM_FRAGMENT||!1,St=fe.RETURN_TRUSTED_TYPE||!1,je=fe.FORCE_BODY||!1,bt=fe.SANITIZE_DOM!==!1,de=fe.SANITIZE_NAMED_PROPS||!1,xt=fe.KEEP_CONTENT!==!1,Ge=fe.IN_PLACE||!1,ae=fe.ALLOWED_URI_REGEXP||ae,tr=fe.NAMESPACE||tt,rt=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Jr(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rt.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Jr(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rt.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rt.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),we&&(X=!1),Tt&&(ct=!0),Je&&(re=_r({},So(AM)),De=[],Je.html===!0&&(_r(re,jM),_r(De,EM)),Je.svg===!0&&(_r(re,L3),_r(De,z3),_r(De,My)),Je.svgFilters===!0&&(_r(re,B3),_r(De,z3),_r(De,My)),Je.mathMl===!0&&(_r(re,$3),_r(De,kM),_r(De,My))),fe.ADD_TAGS&&(re===ye&&(re=Nd(re)),_r(re,fe.ADD_TAGS,Ct)),fe.ADD_ATTR&&(De===Ye&&(De=Nd(De)),_r(De,fe.ADD_ATTR,Ct)),fe.ADD_URI_SAFE_ATTR&&_r(nt,fe.ADD_URI_SAFE_ATTR,Ct),fe.FORBID_CONTENTS&&(Et===Nt&&(Et=Nd(Et)),_r(Et,fe.FORBID_CONTENTS,Ct)),xt&&(re["#text"]=!0),at&&_r(re,["html","head","body"]),re.table&&(_r(re,["tbody"]),delete et.tbody),Ui&&Ui(fe),Fr=fe)},gn=_r({},["mi","mo","mn","ms","mtext"]),gr=_r({},["annotation-xml"]),ba=_r({},["title","style","font","a","script"]),xn=_r({},L3);_r(xn,B3),_r(xn,e0e);var Rn=_r({},$3);_r(Rn,t0e);var oi=function(fe){var st=O(fe);(!st||!st.tagName)&&(st={namespaceURI:tr,tagName:"template"});var pt=vv(fe.tagName),nr=vv(st.tagName);return it[fe.namespaceURI]?fe.namespaceURI===$t?st.namespaceURI===tt?pt==="svg":st.namespaceURI===Bt?pt==="svg"&&(nr==="annotation-xml"||gn[nr]):!!xn[pt]:fe.namespaceURI===Bt?st.namespaceURI===tt?pt==="math":st.namespaceURI===$t?pt==="math"&&gr[nr]:!!Rn[pt]:fe.namespaceURI===tt?st.namespaceURI===$t&&!gr[nr]||st.namespaceURI===Bt&&!gn[nr]?!1:!Rn[pt]&&(ba[pt]||!xn[pt]):!!(Pt==="application/xhtml+xml"&&it[fe.namespaceURI]):!1},Or=function(fe){nm(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=I}catch{fe.remove()}}},yn=function(fe,st){try{nm(e.removed,{attribute:st.getAttributeNode(fe),from:st})}catch{nm(e.removed,{attribute:null,from:st})}if(st.removeAttribute(fe),fe==="is"&&!De[fe])if(ct||Tt)try{Or(st)}catch{}else try{st.setAttribute(fe,"")}catch{}},li=function(fe){var st,pt;if(je)fe="<remove></remove>"+fe;else{var nr=TM(fe,/^[\r\n\t ]+/);pt=nr&&nr[0]}Pt==="application/xhtml+xml"&&tr===tt&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var vr=P?P.createHTML(fe):fe;if(tr===tt)try{st=new x().parseFromString(vr,Pt)}catch{}if(!st||!st.documentElement){st=A.createDocument(tr,"template",null);try{st.documentElement.innerHTML=Le?I:vr}catch{}}var dn=st.body||st.documentElement;return fe&&pt&&dn.insertBefore(n.createTextNode(pt),dn.childNodes[0]||null),tr===tt?U.call(st,at?"html":"body")[0]:at?st.documentElement:dn},Yn=function(fe){return j.call(fe.ownerDocument||fe,fe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},an=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof p)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},vn=function(fe){return pu(o)==="object"?fe instanceof o:fe&&pu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},En=function(fe,st,pt){B[fe]&&Xde(B[fe],function(nr){nr.call(e,st,pt,Fr)})},ci=function(fe){var st;if(En("beforeSanitizeElements",fe,null),an(fe)||pi(/[\u0080-\uFFFF]/,fe.nodeName))return Or(fe),!0;var pt=Ct(fe.nodeName);if(En("uponSanitizeElement",fe,{tagName:pt,allowedTags:re}),fe.hasChildNodes()&&!vn(fe.firstElementChild)&&(!vn(fe.content)||!vn(fe.content.firstElementChild))&&pi(/<[/\w]/g,fe.innerHTML)&&pi(/<[/\w]/g,fe.textContent)||pt==="select"&&pi(/<template/i,fe.innerHTML)||fe.nodeType===7||Qe&&fe.nodeType===8&&pi(/<[/\w]/g,fe.data))return Or(fe),!0;if(!re[pt]||et[pt]){if(!et[pt]&&ki(pt)&&(rt.tagNameCheck instanceof RegExp&&pi(rt.tagNameCheck,pt)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(pt)))return!1;if(xt&&!Et[pt]){var nr=O(fe)||fe.parentNode,vr=E(fe)||fe.childNodes;if(vr&&nr)for(var dn=vr.length,Zr=dn-1;Zr>=0;--Zr){var bn=N(vr[Zr],!0);bn.__removalCount=(fe.__removalCount||0)+1,nr.insertBefore(bn,w(fe))}}return Or(fe),!0}return fe instanceof c&&!oi(fe)||(pt==="noscript"||pt==="noembed"||pt==="noframes")&&pi(/<\/no(script|embed|frames)/i,fe.innerHTML)?(Or(fe),!0):(we&&fe.nodeType===3&&(st=fe.textContent,st=bo(st,G," "),st=bo(st,K," "),st=bo(st,H," "),fe.textContent!==st&&(nm(e.removed,{element:fe.cloneNode()}),fe.textContent=st)),En("afterSanitizeElements",fe,null),!1)},Ka=function(fe,st,pt){if(bt&&(st==="id"||st==="name")&&(pt in n||pt in un))return!1;if(!(X&&!Ne[st]&&pi(Z,st))){if(!(Ue&&pi(ne,st))){if(!De[st]||Ne[st]){if(!(ki(fe)&&(rt.tagNameCheck instanceof RegExp&&pi(rt.tagNameCheck,fe)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(fe))&&(rt.attributeNameCheck instanceof RegExp&&pi(rt.attributeNameCheck,st)||rt.attributeNameCheck instanceof Function&&rt.attributeNameCheck(st))||st==="is"&&rt.allowCustomizedBuiltInElements&&(rt.tagNameCheck instanceof RegExp&&pi(rt.tagNameCheck,pt)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(pt))))return!1}else if(!nt[st]){if(!pi(ae,bo(pt,he,""))){if(!((st==="src"||st==="xlink:href"||st==="href")&&fe!=="script"&&Yde(pt,"data:")===0&&dr[fe])){if(!(te&&!pi(ce,bo(pt,he,"")))){if(pt)return!1}}}}}}return!0},ki=function(fe){return fe!=="annotation-xml"&&TM(fe,Y)},hs=function(fe){var st,pt,nr,vr;En("beforeSanitizeAttributes",fe,null);var dn=fe.attributes;if(!(!dn||an(fe))){var Zr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:De};for(vr=dn.length;vr--;){st=dn[vr];var bn=st,Pr=bn.name,Ls=bn.namespaceURI;if(pt=Pr==="value"?st.value:Jde(st.value),nr=Ct(Pr),Zr.attrName=nr,Zr.attrValue=pt,Zr.keepAttr=!0,Zr.forceKeepAttr=void 0,En("uponSanitizeAttribute",fe,Zr),pt=Zr.attrValue,!Zr.forceKeepAttr&&(yn(Pr,fe),!!Zr.keepAttr)){if(!be&&pi(/\/>/i,pt)){yn(Pr,fe);continue}we&&(pt=bo(pt,G," "),pt=bo(pt,K," "),pt=bo(pt,H," "));var fs=Ct(fe.nodeName);if(Ka(fs,nr,pt)){if(de&&(nr==="id"||nr==="name")&&(yn(Pr,fe),pt=He+pt),Qe&&pi(/((--!?|])>)|<\/(style|title)/i,pt)){yn(Pr,fe);continue}if(P&&pu(y)==="object"&&typeof y.getAttributeType=="function"&&!Ls)switch(y.getAttributeType(fs,nr)){case"TrustedHTML":{pt=P.createHTML(pt);break}case"TrustedScriptURL":{pt=P.createScriptURL(pt);break}}try{Ls?fe.setAttributeNS(Ls,Pr,pt):fe.setAttribute(Pr,pt),an(fe)?Or(fe):_M(e.removed)}catch{}}}}En("afterSanitizeAttributes",fe,null)}},wi=function Ot(fe){var st,pt=Yn(fe);for(En("beforeSanitizeShadowDOM",fe,null);st=pt.nextNode();)En("uponSanitizeShadowNode",st,null),ci(st),hs(st),st.content instanceof a&&Ot(st.content);En("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(Ot){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st,pt,nr,vr,dn;if(Le=!Ot,Le&&(Ot="<!-->"),typeof Ot!="string"&&!vn(Ot))if(typeof Ot.toString=="function"){if(Ot=Ot.toString(),typeof Ot!="string")throw P3("dirty is not a string, aborting")}else throw P3("toString is not a function");if(!e.isSupported){if(pu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Ot=="string")return t.toStaticHTML(Ot);if(vn(Ot))return t.toStaticHTML(Ot.outerHTML)}return Ot}if(kt||qr(fe),e.removed=[],typeof Ot=="string"&&(Ge=!1),Ge){if(Ot.nodeName){var Zr=Ct(Ot.nodeName);if(!re[Zr]||et[Zr])throw P3("root node is forbidden and cannot be sanitized in-place")}}else if(Ot instanceof o)st=li("<!---->"),pt=st.ownerDocument.importNode(Ot,!0),pt.nodeType===1&&pt.nodeName==="BODY"||pt.nodeName==="HTML"?st=pt:st.appendChild(pt);else{if(!ct&&!we&&!at&&Ot.indexOf("<")===-1)return P&&St?P.createHTML(Ot):Ot;if(st=li(Ot),!st)return ct?null:St?I:""}st&&je&&Or(st.firstChild);for(var bn=Yn(Ge?Ot:st);nr=bn.nextNode();)nr.nodeType===3&&nr===vr||(ci(nr),hs(nr),nr.content instanceof a&&wi(nr.content),vr=nr);if(vr=null,Ge)return Ot;if(ct){if(Tt)for(dn=C.call(st.ownerDocument);st.firstChild;)dn.appendChild(st.firstChild);else dn=st;return(De.shadowroot||De.shadowrootmod)&&(dn=L.call(r,dn,!0)),dn}var Pr=at?st.outerHTML:st.innerHTML;return at&&re["!doctype"]&&st.ownerDocument&&st.ownerDocument.doctype&&st.ownerDocument.doctype.name&&pi(u0e,st.ownerDocument.doctype.name)&&(Pr="<!DOCTYPE "+st.ownerDocument.doctype.name+`>
`+Pr),we&&(Pr=bo(Pr,G," "),Pr=bo(Pr,K," "),Pr=bo(Pr,H," ")),P&&St?P.createHTML(Pr):Pr},e.setConfig=function(Ot){qr(Ot),kt=!0},e.clearConfig=function(){Fr=null,kt=!1},e.isValidAttribute=function(Ot,fe,st){Fr||qr({});var pt=Ct(Ot),nr=Ct(fe);return Ka(pt,nr,st)},e.addHook=function(Ot,fe){typeof fe=="function"&&(B[Ot]=B[Ot]||[],nm(B[Ot],fe))},e.removeHook=function(Ot){if(B[Ot])return _M(B[Ot])},e.removeHooks=function(Ot){B[Ot]&&(B[Ot]=[])},e.removeAllHooks=function(){B={}},e}var QG=KG();const p0e=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=T.useRef(Hv()),d=T.useRef(Date.now()),h=T.useRef(t),[p,m]=T.useState(!0),[x,y]=T.useState(0),[S,N]=T.useState(!1),[w,E]=T.useState(null),[O,R]=T.useState(0),[P,I]=T.useState(0),[k,A]=T.useState(!1),[j,C]=T.useState(0),[U,L]=T.useState(!1),$=T.useRef(null),B=T.useRef(null),G=T.useRef(null),K=T.useRef(new Set),H=T.useRef(null),[Z,ne]=T.useState(!1),[ce,he]=T.useState(""),[Y,ae]=T.useState(0),re=T.useRef(new Set);T.useEffect(()=>{h.current=t},[t]);const ye=T.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]),De=T.useCallback(async(et,Ne)=>{if(!Ne||!n||!a||re.current.has(et))return;re.current.add(et),ae(X=>X+1),ye();const Ue=15;try{const te=(await HT({assignmentId:a,questionId:`block_${et}`,xpAmount:Ue,classType:i||"Uncategorized"})).data;if(te.awarded){const be=te.serverXP||Ue;I(we=>we+be),E({text:`+${be} XP`,type:"success"}),Vn.xpGain(),setTimeout(()=>E(null),2e3)}}catch(X){console.error("Lesson block XP award failed",X)}},[n,a,i,ye]);T.useEffect(()=>{const et=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,y(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(et)},[p]),T.useEffect(()=>{const et=["mousemove","keydown","scroll","click"];return et.forEach(Ne=>window.addEventListener(Ne,ye)),()=>et.forEach(Ne=>window.removeEventListener(Ne,ye))},[ye]),T.useEffect(()=>()=>{h.current(c.current)},[]),T.useEffect(()=>{if(!n||!a)return;const et=async Ne=>{var we,Qe,at,kt,je,ct,Tt,St,bt,de,He,xt;const Ue=$.current;if(!Ue)return;const X=Ue.src?new URL(Ue.src).origin:"";if(Ne.origin!==window.location.origin&&Ne.origin!==X)return;const te=Ne.origin,be=Ne.data;if(!(!be||typeof be!="object"||!((we=be.type)!=null&&we.startsWith("portal-"))))switch(ye(),be.type){case"portal-ready":{N(!0);try{const Ge=await pa(ut(Me,"practice_progress",`${n}_${a}`)),Je=Ge.exists()?Ge.data():null,Et=(Je==null?void 0:Je.answeredQuestions)||[];Et.forEach(ge=>K.current.add(ge)),R(Et.length),Je&&(H.current=Je,Je.completed&&(A(!0),C(Je.totalCompletions||1)));const Nt=Je?{state:Je.state||null,currentQuestion:Je.currentQuestion??0}:null,dr=Je!=null&&Je.completed?{completed:!0,completedAt:Je.completedAt,bestScore:Je.bestScore,totalCompletions:Je.totalCompletions||0,lastCompletion:((Qe=Je.completionHistory)==null?void 0:Qe.length)>0?Je.completionHistory[Je.completionHistory.length-1]:null}:null;(at=Ue.contentWindow)==null||at.postMessage({type:"portal-init",payload:{userId:n,savedState:Nt,completionInfo:dr}},te)}catch(Ge){console.error("Bridge: Failed to load saved state",Ge),(kt=Ue.contentWindow)==null||kt.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},te)}break}case"portal-save":{const{state:Ge,currentQuestion:Je}=be.payload||{};if(!Ge)break;try{const Et=H.current,Nt={userId:n,assignmentId:a,state:Ge,currentQuestion:Je??0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString()};Et!=null&&Et.completed&&(Nt.completed=Et.completed,Nt.completedAt=Et.completedAt,Nt.bestScore=Et.bestScore,Nt.totalCompletions=Et.totalCompletions,Nt.completionHistory=Et.completionHistory),await Zn(ut(Me,"practice_progress",`${n}_${a}`),Nt,{merge:!0}),H.current={...H.current,...Nt},(je=Ue.contentWindow)==null||je.postMessage({type:"portal-save-ok"},te)}catch(Et){console.error("Bridge: Save failed",Et),(ct=Ue.contentWindow)==null||ct.postMessage({type:"portal-save-error"},te)}break}case"portal-complete":{const{score:Ge,totalQuestions:Je,correctAnswers:Et}=be.payload||{};try{const Nt=H.current,dr=new Date().toISOString(),ge={completedAt:dr,score:Ge??0,totalQuestions:Je??0,correctAnswers:Et??0,answeredQuestions:Array.from(K.current)},nt=[...(Nt==null?void 0:Nt.completionHistory)||[],ge],jt=Math.max((Nt==null?void 0:Nt.bestScore)||0,Ge||0),Bt=((Nt==null?void 0:Nt.totalCompletions)||0)+1,$t={userId:n,assignmentId:a,completed:!0,completedAt:(Nt==null?void 0:Nt.completedAt)||dr,bestScore:jt,totalCompletions:Bt,completionHistory:nt,answeredQuestions:Array.from(K.current),lastUpdated:dr};Nt!=null&&Nt.state&&($t.state=Nt.state,$t.currentQuestion=Nt.currentQuestion),await Zn(ut(Me,"practice_progress",`${n}_${a}`),$t,{merge:!0}),H.current={...H.current,...$t},A(!0),C(Bt),Vn.xpGain(),E({text:"Module Complete!",type:"success"}),setTimeout(()=>E(null),3e3),(Tt=Ue.contentWindow)==null||Tt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Bt,bestScore:jt}},te)}catch(Nt){console.error("Bridge: Completion save failed",Nt),(St=Ue.contentWindow)==null||St.postMessage({type:"portal-complete-error"},te)}break}case"portal-replay":{try{const Ge=H.current,Je={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(Ge==null?void 0:Ge.completed)||!1,completedAt:(Ge==null?void 0:Ge.completedAt)||null,bestScore:(Ge==null?void 0:Ge.bestScore)||null,totalCompletions:(Ge==null?void 0:Ge.totalCompletions)||0,completionHistory:(Ge==null?void 0:Ge.completionHistory)||[]};await Zn(ut(Me,"practice_progress",`${n}_${a}`),Je,{merge:!0}),H.current=Je,L(!1),(bt=Ue.contentWindow)==null||bt.postMessage({type:"portal-reset-ok"},te)}catch(Ge){console.error("Bridge: Replay reset failed",Ge)}break}case"portal-answer":{const{questionId:Ge,correct:Je,attempts:Et}=be.payload||{};if(!Ge)break;if(Je&&!K.current.has(Ge)){K.current.add(Ge),R(dr=>dr+1);const Nt=Et===1?15:10;try{const ge=(await HT({assignmentId:a,questionId:Ge,xpAmount:Nt,classType:i||"Uncategorized"})).data;if(ge.awarded){const nt=ge.serverXP||Nt;I(jt=>jt+nt),E({text:`+${nt} XP`,type:"success"}),Vn.xpGain(),setTimeout(()=>E(null),2e3)}(de=Ue.contentWindow)==null||de.postMessage({type:"portal-xp-result",payload:{questionId:Ge,awarded:ge.awarded,xp:ge.serverXP||Nt}},te)}catch(dr){console.error("Bridge: XP award failed",dr),(He=Ue.contentWindow)==null||He.postMessage({type:"portal-xp-result",payload:{questionId:Ge,awarded:!1,xp:0}},te)}}else Je&&((xt=Ue.contentWindow)==null||xt.postMessage({type:"portal-xp-result",payload:{questionId:Ge,awarded:!1,xp:0}},te));break}}};return window.addEventListener("message",et),()=>window.removeEventListener("message",et)},[n,a,i,ye]);const Ye=T.useCallback(()=>{const et=$.current;if(!et||!n||!a)return;const Ue=(et.src?new URL(et.src).origin:"")||window.location.origin;(async()=>{var X;try{const te=H.current,be={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(te==null?void 0:te.completed)||!1,completedAt:(te==null?void 0:te.completedAt)||null,bestScore:(te==null?void 0:te.bestScore)||null,totalCompletions:(te==null?void 0:te.totalCompletions)||0,completionHistory:(te==null?void 0:te.completionHistory)||[]};await Zn(ut(Me,"practice_progress",`${n}_${a}`),be,{merge:!0}),H.current=be,L(!1),(X=et.contentWindow)==null||X.postMessage({type:"portal-reset-ok"},Ue)}catch(te){console.error("Replay reset failed",te)}})()},[n,a]),rt=T.useCallback(()=>{const et=G.current;et&&(document.fullscreenElement?document.exitFullscreen():et.requestFullscreen().catch(()=>{ne(Ne=>!Ne)}))},[]);return T.useEffect(()=>{const et=()=>ne(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",et),()=>document.removeEventListener("fullscreenchange",et)},[]),T.useEffect(()=>{if(B.current&&r){const et=r.replace(/\$(.*?)\$/g,(Ne,Ue)=>{try{return ab.renderToString(Ue,{throwOnError:!1})}catch{return Ue}});B.current.innerHTML=QG.sanitize(et,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),he(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(uE,{className:"w-4 h-4"}):s.jsx(so,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]}),S&&O>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(Br,{className:"w-3 h-3"})," ",O," answered"]}),!S&&Y>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-indigo-300 bg-indigo-500/10 px-3 py-1 rounded-full border border-indigo-500/20",children:[s.jsx(Br,{className:"w-3 h-3"})," ",Y," blocks completed"]}),S&&P>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(qn,{className:"w-3 h-3"})," ",P," XP"]}),k&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(ll,{className:"w-3 h-3"}),"Completed",j>1?` (${j}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||ce)&&s.jsx(UR,{textContent:ce,compact:!0}),k&&S&&(U?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:Ye,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>L(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(zle,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:rt,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:Z?"Exit full screen (Esc)":"Full screen",children:[Z?s.jsx(UH,{className:"w-3 h-3"}):s.jsx(WT,{className:"w-3 h-3"}),Z?"Exit Full Screen":"Full Screen"]}),S&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(qn,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ds,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),w&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${w.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[w.type==="success"?s.jsx(Br,{className:"w-4 h-4"}):s.jsx(io,{className:"w-4 h-4"}),w.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:G,className:`flex flex-col bg-white relative ${o&&o.length>0?"flex-[3]":"flex-1"}`,children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ye}),s.jsx(xce,{containerRef:G})]}),o&&o.length>0&&s.jsx("div",{className:"flex-[2] bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:s.jsx(YT,{blocks:o,onBlockComplete:De,showSidebar:!0,engagementTime:x,xpEarned:P})})]}):o&&o.length>0?s.jsx("div",{className:"flex-1 bg-[#0f0720]/95 overflow-y-auto p-6 text-gray-300 custom-scrollbar",children:s.jsx(YT,{blocks:o,onBlockComplete:De,showSidebar:!0,engagementTime:x,xpEarned:P})}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o0,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(WT,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),ce&&s.jsx(UR,{textContent:ce})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]})]})]})},m0e=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(null),a=async()=>{e(!0),n(null);try{await $te(qT,Coe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ds,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(Sle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},XG=T.createContext(null),Mo=()=>{const t=T.useContext(XG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},g0e=({children:t})=>{const[e,r]=T.useState({isOpen:!1,options:{message:""}}),n=T.useRef(null),a=T.useRef(null),i=T.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);T.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),T.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(XG.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Ds,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},mg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},CM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(G2,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Ds,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(Ple,{className:"w-4 h-4"})}},x0e=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=Mo(),a=Ma(),[i,o]=T.useState(!1),[c,d]=T.useState(""),[h,p]=T.useState(""),[m,x]=T.useState("INFO"),[y,S]=T.useState("GLOBAL"),[N,w]=T.useState([]),E=async()=>{if(!(!c.trim()||!h.trim()))try{await ke.createAnnouncement({title:c.trim(),content:h.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...N.length>0?{targetSections:N}:{}}),await ke.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},O=async R=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await ke.deleteAnnouncement(R)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Qv,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(cn,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(Qv,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(R=>{var I;const P=CM[R.priority]||CM.INFO;return s.jsxs("div",{className:`p-3 ${P.bg} border ${P.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${P.text}`,children:P.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:R.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:R.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[R.classType==="GLOBAL"?"All Classes":R.classType,(I=R.targetSections)!=null&&I.length?`  ${R.targetSections.join(", ")}`:"","  ",new Date(R.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>O(R.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},R.id)})}),s.jsx(Li,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:R=>d(R.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:R=>p(R.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:R=>x(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:y,onChange:R=>S(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).filter(R=>R!=="Uncategorized").map(R=>s.jsx("option",{value:R,children:R},R))]})]})]}),s.jsx(mg,{availableSections:r,selectedSections:N,onChange:w}),s.jsx("button",{onClick:E,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},PE=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],LE=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],y0e=t=>LE.filter(e=>!e.isSecret||t.includes(e.id)),Dy={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},YG=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],OM=(t,e)=>{const r=YG.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},v0e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],BE=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of v0e){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},b0e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],IM=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],JG=t=>[...IM].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||IM[0],ZG=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,RM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],w0e=["I","II","III","IV","V"],S0e=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},c0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,RM.length-1),a=RM[n]||"Unknownium",i=w0e[r],o=n+1,c=S0e(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Yi={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},N0e={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},MM=(t,e,r)=>{const n=Yi.UNSOCKET_BASE,a=N0e[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},DM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},$E=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},zE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},u0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},_0e=t=>{if(!t)return{};const e=Object.values(t).filter(Boolean),r=BE(e),n={};return r.forEach(({activeBonus:a})=>{a.effects.forEach(i=>{n[i.stat]=(n[i.stat]||0)+i.value})}),n},T0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},j0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=PE.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},PM=t=>t.runewordActive&&PE.find(e=>e.id===t.runewordActive)||null,fa=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Uu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const A0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var I,k,A,j,C,U,L,$,B,G;const[i,o]=T.useState(!1),c=((I=t.gamification)==null?void 0:I.level)||1,d=((k=t.gamification)==null?void 0:k.xp)||0,h=((A=t.gamification)==null?void 0:A.currency)||0,p=c0(c),m=zE(t),x=t.enrolledClasses||(t.classType?[t.classType]:[]),y=((C=(j=t.gamification)==null?void 0:j.completedQuests)==null?void 0:C.length)||0,S=((L=(U=t.gamification)==null?void 0:U.activeQuests)==null?void 0:L.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").length)||0,N=T.useMemo(()=>x.map(K=>{var ae,re;const H=((re=(ae=t.gamification)==null?void 0:ae.classXp)==null?void 0:re[K])||0,Z=Uu(t,K),ne=u0(Z.equipped),ce=Z.inventory.length,he=e.filter(ye=>{const De=r.find(Ye=>Ye.id===ye.assignmentId);return(De==null?void 0:De.classType)===K}),Y=Math.round(he.reduce((ye,De)=>{var Ye;return ye+(((Ye=De.metrics)==null?void 0:Ye.engagementTime)||0)},0)/60);return{cls:K,classXp:H,gearScore:ne,inventoryCount:ce,resourcesViewed:he.length,totalTime:Y}}),[t,e,r,x]),w=T.useMemo(()=>{const K=new Map;return e.forEach(H=>{var Y,ae,re,ye,De,Ye,rt;const Z=r.find(et=>et.id===H.assignmentId),ne=H.assignmentId,ce=K.get(ne),he=((Y=H.metrics)==null?void 0:Y.engagementTime)||0;ce?(ce.visits++,ce.totalTime+=he,ce.totalKeystrokes+=((ae=H.metrics)==null?void 0:ae.keystrokes)||0,ce.totalClicks+=((re=H.metrics)==null?void 0:re.clickCount)||0,ce.totalPastes+=((ye=H.metrics)==null?void 0:ye.pasteCount)||0,ce.statuses.push(H.status),H.submittedAt&&(!ce.lastVisit||H.submittedAt>ce.lastVisit)&&(ce.lastVisit=H.submittedAt)):K.set(ne,{title:(Z==null?void 0:Z.title)||H.assignmentTitle,classType:(Z==null?void 0:Z.classType)||"Unknown",category:(Z==null?void 0:Z.category)||"Supplemental",visits:1,totalTime:he,totalKeystrokes:((De=H.metrics)==null?void 0:De.keystrokes)||0,totalClicks:((Ye=H.metrics)==null?void 0:Ye.clickCount)||0,totalPastes:((rt=H.metrics)==null?void 0:rt.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(K.values()).sort((H,Z)=>Z.totalTime-H.totalTime)},[e,r]),E=T.useMemo(()=>e.filter(K=>K.submittedAt).sort((K,H)=>new Date(H.submittedAt).getTime()-new Date(K.submittedAt).getTime()).slice(0,10).map(K=>{var H,Z;return{...K,assignmentTitle:((H=r.find(ne=>ne.id===K.assignmentId))==null?void 0:H.title)||K.assignmentTitle,classType:((Z=r.find(ne=>ne.id===K.assignmentId))==null?void 0:Z.classType)||"Unknown"}}),[e,r]),O=Math.round(e.reduce((K,H)=>{var Z;return K+(((Z=H.metrics)==null?void 0:Z.engagementTime)||0)},0)/60),R=T.useMemo(()=>{const K=new Set;e.forEach(Y=>{if(Y.submittedAt){const ae=new Date(Y.submittedAt),re=ae.getFullYear(),ye=new Date(re,0,1),De=Math.ceil(((ae.getTime()-ye.getTime())/864e5+ye.getDay()+1)/7);K.add(`${re}-W${De}`)}});const H=new Date,Z=H.getFullYear(),ne=new Date(Z,0,1),ce=Math.ceil(((H.getTime()-ne.getTime())/864e5+ne.getDay()+1)/7);let he=0;for(let Y=ce;Y>0&&K.has(`${Z}-W${Y}`);Y--)he++;return he},[e]),P=T.useMemo(()=>{const K=[],H=new Date;for(let re=6;re>=0;re--){const ye=new Date(H);ye.setDate(ye.getDate()-re);const De=ye.toISOString().split("T")[0],Ye=e.filter(et=>{var Ne;return(Ne=et.submittedAt)==null?void 0:Ne.startsWith(De)}),rt=Ye.reduce((et,Ne)=>{var Ue;return et+(((Ue=Ne.metrics)==null?void 0:Ue.engagementTime)||0)},0);K.push({label:ye.toLocaleDateString([],{weekday:"short"}),time:Math.round(rt/60),subs:Ye.length})}const Z=K.slice(4).reduce((re,ye)=>re+ye.time,0),ne=K.slice(0,4).reduce((re,ye)=>re+ye.time,0),ce=Z/3,he=ne/4,Y=ce>he*1.2?"up":ce<he*.6?"down":"flat",ae=Math.max(1,...K.map(re=>re.time));return{days:K,trend:Y,maxTime:ae}},[e]);return xu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(Kn,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(qn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(so,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[O,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ni,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ku,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:y}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(KT,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Cu,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([K,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:K}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},K))})]}),n.length>0&&(()=>{const K=n[0],H=Go[K.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",K.engagementScore]}),s.jsxs("span",{children:["Subs: ",K.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",K.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(K.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(K.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx($H,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:K.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.recommendation.categories.map(Z=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Z},Z))})]}),(()=>{const Z=r.filter(ne=>ne.classType===K.classType&&ne.status==="ACTIVE"&&K.recommendation.categories.includes(ne.category||"Supplemental")).slice(0,3);return Z.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:Z.map(ne=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ne.category}),s.jsx("span",{className:"text-white truncate",children:ne.title})]},ne.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[P.trend==="up"&&s.jsx(X2,{className:"w-3.5 h-3.5 text-green-400"}),P.trend==="down"&&s.jsx(Hle,{className:"w-3.5 h-3.5 text-red-400"}),P.trend==="flat"&&s.jsx(K2,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${P.trend==="up"?"text-green-400":P.trend==="down"?"text-red-400":"text-gray-400"}`,children:P.trend==="up"?"Trending Up":P.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:P.days.map((K,H)=>{const Z=P.maxTime>0?Math.max(2,K.time/P.maxTime*100):2,ne=H===P.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${K.time>0?ne?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Z}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:K.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[K.time,"m  ",K.subs," sub",K.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:N.map(K=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:K.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[K.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(os,{className:"w-3 h-3 inline mr-0.5"}),K.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(KT,{className:"w-3 h-3 inline mr-0.5"}),K.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(ni,{className:"w-3 h-3 inline mr-0.5"}),K.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(so,{className:"w-3 h-3 inline mr-0.5"}),K.totalTime,"m"]})]})]},K.cls))})]}),w.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(Vf,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?s.jsx(Nx,{className:"w-4 h-4 text-gray-500"}):s.jsx(ai,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:w.map((K,H)=>{const Z=Math.round(K.totalTime/60),ne=K.totalKeystrokes>20&&K.totalClicks>5?"high":K.totalClicks>2?"medium":"low",ce=ne==="high"?"text-green-400":ne==="medium"?"text-yellow-400":"text-red-400",he=ne==="high"?"bg-green-500":ne==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[K.classType,"  ",K.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${he}`,title:`${ne} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[Z,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:K.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:K.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${ce}`,children:ne})]})]}),K.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(K.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),E.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:E.map(K=>{var Z;const H=Math.round((((Z=K.metrics)==null?void 0:Z.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[K.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:K.submittedAt?new Date(K.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},K.id)})})]}),S>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(G=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:G.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").map(K=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ku,{className:`w-3.5 h-3.5 ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:K.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:K.status})]},K.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",x.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},E0e=({students:t,isOpen:e,onClose:r})=>{const n=Ma(),[a,i]=T.useState(""),[o,c]=T.useState(null),[d,h]=T.useState(!1),p=ZJ,m=T.useMemo(()=>a?t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),x=async y=>{if(o){h(!0);try{await ke.awardBehavior({studentId:o.id,studentName:o.name,categoryId:y.id,categoryName:y.name,xpAmount:y.xpAmount,fluxAmount:y.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${y.icon} +${y.xpAmount} XP awarded to ${o.name} for ${y.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(V2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Kn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(y=>s.jsxs("button",{onClick:()=>x(y),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${y.color}-500/5 border-${y.color}-500/20 hover:border-${y.color}-500/40 hover:bg-${y.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:y.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx(qn,{className:"w-2.5 h-2.5"}),y.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxAmount," Flux"]})]})]},y.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:y=>i(y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:m.map(y=>s.jsxs("button",{onClick:()=>c(y),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[y.avatarUrl?s.jsx("img",{src:y.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:y.classType})]})]},y.id))})]})})]})]}):null},k0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Mo(),[a,i]=T.useState(null),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[x,y]=T.useState([]),[S,N]=T.useState(Date.now()),[w,E]=T.useState(null),[O,R]=T.useState("xp"),[P,I]=T.useState("desc"),[k,A]=T.useState(""),[j,C]=T.useState(""),[U,L]=T.useState(!1),$=X=>{O===X?I(te=>te==="asc"?"desc":"asc"):(R(X),I("asc"))},B=({label:X,col:te,className:be})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${be??""}`,onClick:()=>$(te),children:s.jsxs("div",{className:`flex items-center gap-1 ${be!=null&&be.includes("text-center")?"justify-center":be!=null&&be.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:X}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Nx,{className:`w-2.5 h-2.5 -mb-0.5 ${O===te&&P==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(ai,{className:`w-2.5 h-2.5 -mt-0.5 ${O===te&&P==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});T.useEffect(()=>{const X=ke.subscribeToChatFlags(c),te=ke.subscribeToAnnouncements(h),be=ke.subscribeToStudentAlerts(m),we=ke.subscribeToStudentBuckets(y),Qe=setInterval(()=>N(Date.now()),6e4);return()=>{X(),te(),be(),we(),clearInterval(Qe)}},[]);const G=t.filter(X=>X.role==="STUDENT"),K=T.useMemo(()=>{const X=new Set;return G.forEach(te=>{te.section&&X.add(te.section)}),Array.from(X).sort()},[G]),H=T.useMemo(()=>{const X=new Map;for(const te of p){const be=X.get(te.studentId),we={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!be||(we[te.riskLevel]||0)>(we[be.riskLevel]||0))&&X.set(te.studentId,te)}return X},[p]),Z=T.useMemo(()=>{const X=new Map;for(const te of x)X.has(te.studentId)||X.set(te.studentId,te);return X},[x]),ne=T.useMemo(()=>{const X={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},te=new Set;for(const be of x)te.has(be.studentId)||(te.add(be.studentId),X[be.bucket]!==void 0&&X[be.bucket]++);return X},[x]),ce=G.length,he=Math.round(G.reduce((X,te)=>{var be;return X+(((be=te.stats)==null?void 0:be.totalTime)||0)},0)/(ce||1)),Y=G.reduce((X,te)=>{var be;return X+(((be=te.stats)==null?void 0:be.problemsCompleted)||0)},0),ae=G.reduce((X,te)=>{var be;return X+(((be=te.gamification)==null?void 0:be.xp)||0)},0),re=G.filter(X=>X.mutedUntil&&new Date(X.mutedUntil).getTime()>S),ye=async X=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await ke.muteUser(X,0)},De=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:ke.INDEFINITE_MUTE}],Ye=async(X,te)=>{await ke.muteUser(X,te),E(null)},rt=async(X,te)=>{const be=new Date(te).getTime(),we=new Date(Math.max(be,Date.now())+3600*1e3),Qe=Math.ceil((we.getTime()-Date.now())/6e4);await ke.muteUser(X,Qe)},et=({label:X,value:te,icon:be,color:we})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${we}`,children:be}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:te}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:X})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${we}`})]}),Ne=X=>{const be=new Date(X).getTime()-S;if(be<=0)return"Expired";const we=Math.ceil(be/6e4);return we>60?`${Math.ceil(we/60)} hrs`:`${we} mins`},Ue=X=>{if(!X)return"Never";const te=new Date(X),be=Date.now()-te.getTime(),we=Math.floor(be/6e4);if(we<1)return"Just now";if(we<60)return`${we}m ago`;const Qe=Math.floor(we/60);return Qe<24?`${Qe}h ago`:te.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(et,{label:"Total Students",value:ce,icon:s.jsx(ls,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(et,{label:"Total XP Awarded",value:ae.toLocaleString(),icon:s.jsx(qn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(et,{label:"Resources Viewed",value:Y,icon:s.jsx(N0,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(et,{label:"Avg Active Time",value:`${he}m`,icon:s.jsx(so,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Ds,{className:"w-5 h-5"}):s.jsx(Q2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(s0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(X=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[X.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",X.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',X.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(X.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await ke.resolveFlag(X.id),X.messageId&&await ke.unflagMessage(X.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Xl,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await ke.resolveFlag(X.id),X.messageId&&await ke.deleteMessage(X.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Wr,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>E(w===X.id?null:X.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(Xv,{className:"w-3 h-3"})}),w===X.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",X.senderName]}),De.map(te=>s.jsx("button",{onClick:()=>Ye(X.senderId,te.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:te.label},te.minutes))]})]})]})]},X.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Xv,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),re.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(ls,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:re.map(X=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:X.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:X.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:Ne(X.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>rt(X.id,X.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(Yv,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>ye(X.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(s0,{className:"w-3.5 h-3.5"})})]})})]},X.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(GT,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(X=>{const te={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},be={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},we=X.bucket?Go[X.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${te[X.riskLevel]||te.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${be[X.riskLevel]||be.LOW}`,children:X.riskLevel}),we&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${we.bgColor} ${we.color} ${we.borderColor} border`,children:we.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:X.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:X.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:X.message}),we&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:we.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",X.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",X.classMean]}),s.jsx("span",{children:new Date(X.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(X.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await ke.dismissAlert(X.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},X.id)})})]}),x.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(GT,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[x.length," profile",x.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Go).map(X=>{const te=Go[X],be=ne[X];return s.jsxs("div",{className:`border rounded-xl p-3 ${te.borderColor} ${te.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${te.color}`,children:te.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:be})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:te.description})]},X)})}),(()=>{const X=Object.values(ne).reduce((te,be)=>te+be,0);return X===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Go).map(te=>{const be=ne[te]/X*100;if(be===0)return null;const we={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${we[te]||"bg-gray-500"} transition-all`,style:{width:`${be}%`},title:`${Go[te].label}: ${ne[te]} (${Math.round(be)}%)`},te)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(x0e,{announcements:d,studentIds:G.map(X=>X.id),availableSections:K})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(V2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:k,onChange:X=>A(X.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:j,onChange:X=>C(X.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Go).map(X=>s.jsx("option",{value:X,children:Go[X].label},X))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const te=[...G.filter(we=>{var kt;const Qe=!k||we.name.toLowerCase().includes(k.toLowerCase())||we.email.toLowerCase().includes(k.toLowerCase()),at=!j||((kt=Z.get(we.id))==null?void 0:kt.bucket)===j;return Qe&&at})].sort((we,Qe)=>{var at,kt,je,ct,Tt,St,bt,de;switch(O){case"name":return P==="asc"?we.name.localeCompare(Qe.name):Qe.name.localeCompare(we.name);case"class":return P==="asc"?(we.classType||"").localeCompare(Qe.classType||""):(Qe.classType||"").localeCompare(we.classType||"");case"lastSeen":{const He=we.lastLoginAt?new Date(we.lastLoginAt).getTime():0,xt=Qe.lastLoginAt?new Date(Qe.lastLoginAt).getTime():0;return P==="asc"?He-xt:xt-He}case"time":{const He=((at=we.stats)==null?void 0:at.totalTime)||0,xt=((kt=Qe.stats)==null?void 0:kt.totalTime)||0;return P==="asc"?He-xt:xt-He}case"resources":{const He=((je=we.stats)==null?void 0:je.problemsCompleted)||0,xt=((ct=Qe.stats)==null?void 0:ct.problemsCompleted)||0;return P==="asc"?He-xt:xt-He}case"xp":default:{const He=((St=(Tt=we.gamification)==null?void 0:Tt.classXp)==null?void 0:St[we.classType||""])||0,xt=((de=(bt=Qe.gamification)==null?void 0:bt.classXp)==null?void 0:de[Qe.classType||""])||0;return P==="asc"?He-xt:xt-He}}}),be=Math.max(1,...G.map(we=>{var Qe,at;return((at=(Qe=we.gamification)==null?void 0:Qe.classXp)==null?void 0:at[we.classType||""])||0}));return te.map(we=>{var xt,Ge,Je,Et;const Qe=((Ge=(xt=we.gamification)==null?void 0:xt.classXp)==null?void 0:Ge[we.classType||""])||0,at=Math.round(Qe/be*100),kt=we.lastLoginAt,je=kt?Date.now()-new Date(kt).getTime():1/0,ct=je<36e5?"text-green-400":je<864e5?"text-yellow-400":je<1/0?"text-red-400":"text-gray-600",Tt=je<36e5?"bg-green-500":je<864e5?"bg-yellow-500":je<1/0?"bg-red-500":"bg-gray-600",St=H.get(we.id),bt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},de=Z.get(we.id),He=de?Go[de.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(St==null?void 0:St.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(we.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[we.avatarUrl?s.jsx("img",{src:we.avatarUrl,alt:we.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:we.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Tt}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:we.name}),St&&bt[St.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${bt[St.riskLevel]}`,title:`${St.riskLevel} risk: ${St.reason}`}),He&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${He.bgColor} ${He.color} border ${He.borderColor}`,title:He.description,children:He.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:we.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${ct}`,children:Ue(we.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((Je=we.stats)==null?void 0:Je.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((Et=we.stats)==null?void 0:Et.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${at}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Qe})]})})]},we.id)})})()})]})})]}),a&&(()=>{const X=G.find(te=>te.id===a);return X?s.jsx(A0e,{student:X,submissions:r.filter(te=>te.userId===a),assignments:e,bucketProfiles:x.filter(te=>te.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(E0e,{students:G,isOpen:U,onClose:()=>L(!1)})]})},C0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=Ma(),{confirm:i}=Mo(),[o,c]=T.useState(new Set),[d,h]=T.useState(jr.AP_PHYSICS),[p,m]=T.useState(!1),[x,y]=T.useState(!1),[S,N]=T.useState({}),w=(ge,nt)=>{N(jt=>{const Bt=jt[ge]||{col:"name",dir:"asc"};return{...jt,[ge]:{col:nt,dir:Bt.col===nt&&Bt.dir==="asc"?"desc":"asc"}}})},E=({label:ge,col:nt,type:jt,className:Bt})=>{const $t=S[jt]||{col:"name",dir:"asc"},tt=$t.col===nt;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Bt??""}`,onClick:()=>w(jt,nt),children:s.jsxs("div",{className:`flex items-center gap-1 ${Bt!=null&&Bt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:ge}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Nx,{className:`w-2.5 h-2.5 -mb-0.5 ${tt&&$t.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(ai,{className:`w-2.5 h-2.5 -mt-0.5 ${tt&&$t.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[O,R]=T.useState(""),[P,I]=T.useState(jr.AP_PHYSICS),[k,A]=T.useState(""),[j,C]=T.useState(""),[U,L]=T.useState(!1),[$,B]=T.useState(!1),[G,K]=T.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,Z]=T.useState(10),[ne,ce]=T.useState("single"),[he,Y]=T.useState([]),[ae,re]=T.useState(!1),ye=T.useRef(null),[De,Ye]=T.useState(null),[rt,et]=T.useState(""),[Ne,Ue]=T.useState(""),X=t.filter(ge=>ge.role==="STUDENT"),te=T.useMemo(()=>{const ge=new Set;return X.forEach(nt=>{nt.classSections&&Object.values(nt.classSections).forEach(jt=>{jt&&ge.add(jt)}),nt.section&&ge.add(nt.section)}),Array.from(ge).sort()},[X]),be=async(ge,nt,jt)=>{try{jt?await ke.updateUserClassSection(ge,jt,nt):await ke.updateUserSection(ge,nt),Ye(null),et(""),Ue(""),a.success(`Section updated to ${nt||"none"}${jt?` for ${jt}`:""}`)}catch{a.error("Failed to update section")}},we=async ge=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(nt=>ke.updateUserSection(nt,ge))),c(new Set),a.success(`Set ${o.size} students to ${ge}`)}catch{a.error("Failed to bulk update sections")}},Qe=T.useMemo(()=>e.filter(ge=>!t.some(nt=>nt.email.toLowerCase()===ge.email.toLowerCase())),[e,t]),at=T.useMemo(()=>[...Array.from(new Set([...Object.values(jr).filter(nt=>nt!==jr.UNCATEGORIZED),...r.map(nt=>nt.className)])).sort(),jr.UNCATEGORIZED],[r]),kt=ge=>{const nt=X.filter($t=>{var tt,tr;return((tt=$t.enrolledClasses)==null?void 0:tt.includes(ge))||ge===jr.UNCATEGORIZED&&(((tr=$t.enrolledClasses)==null?void 0:tr.length)===0||!$t.enrolledClasses)}),jt=nt.every($t=>o.has($t.id)),Bt=new Set(o);nt.forEach($t=>{jt?Bt.delete($t.id):Bt.add($t.id)}),c(Bt)},je=ge=>{const nt=new Set(o);nt.has(ge)?nt.delete(ge):nt.add(ge),c(nt)},ct=async()=>{if(o.size>0){const ge=Array.from(o).map(async nt=>{const jt=t.find(Bt=>Bt.id===nt);if(jt){const Bt=jt.enrolledClasses||[],$t=Array.from(new Set([...Bt.filter(tt=>tt!==jr.UNCATEGORIZED),d]));await ke.updateUserEnrolledClasses(nt,$t)}});await Promise.all(ge),c(new Set)}},Tt=async ge=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${ge}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const nt=Array.from(o).map(async jt=>{const Bt=t.find($t=>$t.id===jt);if(Bt){const tt=(Bt.enrolledClasses||[]).filter(tr=>tr!==ge);await ke.updateUserEnrolledClasses(jt,tt)}});await Promise.all(nt),c(new Set)}},St=async(ge,nt)=>{if(await i({message:`Remove ${ge.name} from ${nt}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Bt=(ge.enrolledClasses||[]).filter($t=>$t!==nt);await ke.updateUserEnrolledClasses(ge.id,Bt)}},bt=async(ge,nt)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${nt}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await ke.removeUser(ge)},de=async ge=>{ge!==jr.UNCATEGORIZED&&await i({message:`Delete group config ${ge}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&ke.deleteClassConfig(ge)},He=async ge=>{await i({message:`Cancel invite for ${ge}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await ke.removeFromWhitelist(ge)},xt=(ge,nt)=>{ge!==jr.UNCATEGORIZED&&(C(ge),L(!0),nt?(K(nt.features),Z(nt.xpPerMinute||10)):(K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),Z(10)),y(!0))},Ge=ge=>{ge.preventDefault(),n(O,P),k.trim()&&ke.updateWhitelistSection(O,k.trim()),R(""),A(""),m(!1)},Je=ge=>{var Bt;const nt=(Bt=ge.target.files)==null?void 0:Bt[0];if(!nt)return;const jt=new FileReader;jt.onload=$t=>{var Vt,qt;const tt=(Vt=$t.target)==null?void 0:Vt.result;if(!tt)return;const tr=tt.split(/\r?\n/).filter(Ct=>Ct.trim()),Le=(qt=tr[0])!=null&&qt.toLowerCase().includes("email")?1:0,it=new Set(e.map(Ct=>Ct.email.toLowerCase())),dt=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Pt=tr.slice(Le).map(Ct=>{const Fr=Ct.includes("	")?Ct.split("	"):Ct.split(","),un=(Fr[0]||"").trim().toLowerCase(),Jr=(Fr[1]||"").trim()||jr.AP_PHYSICS,qr=(Fr[2]||"").trim();let gn="pending";return dt.test(un)?it.has(un)&&(gn="duplicate"):gn="invalid",{email:un,classType:Jr,section:qr,status:gn}}).filter(Ct=>Ct.email.length>0);Y(Pt)},jt.readAsText(nt),ge.target.value=""},Et=async()=>{const ge=he.filter(jt=>jt.status==="pending");if(ge.length===0)return;re(!0);let nt=0;for(const jt of ge)try{await ke.addToWhitelist(jt.email,jt.classType),jt.section&&await ke.updateWhitelistSection(jt.email,jt.section),jt.status="success",nt++}catch{jt.status="invalid"}Y([...he]),re(!1),a.success(`${nt} operative${nt!==1?"s":""} imported successfully.`),he.every(jt=>jt.status==="success"||jt.status==="duplicate")&&setTimeout(()=>{m(!1),Y([]),ce("single")},1500)},Nt=async ge=>{if(ge.preventDefault(),!!j){B(!0);try{await ke.saveClassConfig({id:j,className:j,features:G,xpPerMinute:H}),C(""),y(!1),L(!1)}catch(nt){console.error("Failed to save config:",nt),a.error("Failed to save class configuration.")}finally{B(!1)}}},dr=ge=>{const nt=ge===jr.UNCATEGORIZED,jt=S[ge]||{col:"name",dir:"asc"},Bt=[...X.filter(tt=>{var tr;return((tr=tt.enrolledClasses)==null?void 0:tr.includes(ge))||nt&&(!tt.enrolledClasses||tt.enrolledClasses.length===0)})].sort((tt,tr)=>{var Le,it,dt,Pt;switch(jt.col){case"section":{const Vt=tt.section||"",qt=tr.section||"";return jt.dir==="asc"?Vt.localeCompare(qt):qt.localeCompare(Vt)}case"status":{const Vt=tt.isWhitelisted?1:0,qt=tr.isWhitelisted?1:0;return jt.dir==="asc"?Vt-qt:qt-Vt}case"lastSeen":{const Vt=tt.lastLoginAt?new Date(tt.lastLoginAt).getTime():0,qt=tr.lastLoginAt?new Date(tr.lastLoginAt).getTime():0;return jt.dir==="asc"?Vt-qt:qt-Vt}case"xp":{const Vt=((it=(Le=tt.gamification)==null?void 0:Le.classXp)==null?void 0:it[ge])||0,qt=((Pt=(dt=tr.gamification)==null?void 0:dt.classXp)==null?void 0:Pt[ge])||0;return jt.dir==="asc"?Vt-qt:qt-Vt}case"name":default:return jt.dir==="asc"?tt.name.localeCompare(tr.name):tr.name.localeCompare(tt.name)}}),$t=r.find(tt=>tt.className===ge);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${nt?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${nt?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${nt?"text-orange-300":"text-white"}`,children:[nt&&s.jsx(F2,{className:"w-5 h-5 inline mr-2 mb-1"}),ge]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${nt?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Bt.length," Registered"]}),!nt&&s.jsx("button",{onClick:()=>xt(ge,$t),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(l0,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(tt=>Bt.find(tr=>tr.id===tt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:tt=>{tt.target.value&&we(tt.target.value),tt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),te.map(tt=>s.jsx("option",{value:tt,children:tt},tt))]})}),s.jsxs("button",{onClick:()=>Tt(ge),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(Qle,{className:"w-3 h-3"})," Remove Selected"]})]}),!nt&&s.jsxs("button",{onClick:()=>de(ge),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(Wr,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Bt.length>0&&s.jsx("button",{onClick:()=>kt(ge),className:"hover:text-purple-400 transition",children:s.jsx(LR,{className:"w-4 h-4"})})}),s.jsx(E,{label:"Operative",col:"name",type:ge}),s.jsx(E,{label:"Section",col:"section",type:ge,className:"text-center"}),s.jsx(E,{label:"System Status",col:"status",type:ge,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Bt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:nt?"No restricted operatives found.":"No students registered in this roster yet."})}):Bt.map(tt=>{var tr;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(tt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>je(tt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(tt.id)?s.jsx(Fle,{className:"w-4 h-4 text-purple-500"}):s.jsx(LR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:tt.avatarUrl,alt:tt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:tt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:tt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:De===tt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((tr=tt.enrolledClasses)!=null&&tr.length?tt.enrolledClasses:[tt.classType].filter(Boolean)).map(Le=>{var dt;if(!Le)return null;const it=((dt=tt.classSections)==null?void 0:dt[Le])||(tt.section&&tt.classType===Le?tt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:Le,children:Le}),s.jsxs("select",{value:it,onChange:Pt=>{const Vt=Pt.target.value;Vt==="__custom__"?(et("__custom__"),Ue("")):be(tt.id,Vt,Le)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),te.map(Pt=>s.jsx("option",{value:Pt,children:Pt},Pt)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},Le)}),rt==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:Ne,onChange:Le=>Ue(Le.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:Le=>{var it;if(Le.key==="Enter"&&Ne.trim()){const dt=(it=tt.enrolledClasses)!=null&&it.length?tt.enrolledClasses:[tt.classType].filter(Boolean);dt[0]&&be(tt.id,Ne.trim(),dt[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var Le;if(Ne.trim()){const it=(Le=tt.enrolledClasses)!=null&&Le.length?tt.enrolledClasses:[tt.classType].filter(Boolean);it[0]&&be(tt.id,Ne.trim(),it[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(cn,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Ye(null),et(""),Ue("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Ye(tt.id),et(""),Ue("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${tt.classSections&&Object.keys(tt.classSections).length>0||tt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:tt.classSections&&Object.keys(tt.classSections).length>0?Object.values(tt.classSections).filter(Boolean).join(", ")||"Assign":tt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${tt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[tt.isWhitelisted?s.jsx(DR,{className:"w-3 h-3"}):s.jsx(Q2,{className:"w-3 h-3"}),tt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>nt?bt(tt.id,tt.name):St(tt,ge),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:nt?"Permanently Delete":"Remove from this Class",children:s.jsx(Kn,{className:"w-4 h-4"})})})})]},tt.id)})})]})})]},ge)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{C(""),K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),L(!1),y(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(l0,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(Jv,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Qe.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Cle,{className:"w-4 h-4"})," Pending Class Invitations (",Qe.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Qe.map(ge=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ge.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(DR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ge.classTypes||[ge.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>He(ge.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},ge.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:ge=>h(ge.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:at.filter(ge=>ge!==jr.UNCATEGORIZED).map(ge=>s.jsxs("option",{value:ge,children:["Apply ",ge," Access"]},ge))}),s.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:ct,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(cn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:at.map(ge=>dr(ge))}),s.jsxs(Li,{isOpen:p,onClose:()=>{m(!1),Y([]),ce("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{ce("single"),Y([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ne==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Jv,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>ce("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ne==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Lu,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ne==="single"?s.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:O,onChange:ge=>R(ge.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:P,onChange:ge=>I(ge.target.value),children:at.filter(ge=>ge!==jr.UNCATEGORIZED).map(ge=>s.jsx("option",{value:ge,children:ge},ge))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:k,onChange:ge=>A(ge.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:ye,accept:".csv,.tsv,.txt",onChange:Je,className:"hidden"}),he.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Lu,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var ge;return(ge=ye.current)==null?void 0:ge.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(N0,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[he.length," records parsed"]}),s.jsx("button",{onClick:()=>{Y([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),he.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:he.map((ge,nt)=>s.jsxs("tr",{className:ge.status==="invalid"?"bg-red-500/5":ge.status==="duplicate"?"bg-yellow-500/5":ge.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ge.email}),s.jsx("td",{className:"p-2 text-gray-400",children:ge.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:ge.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ge.status==="pending"?"bg-blue-500/20 text-blue-400":ge.status==="success"?"bg-green-500/20 text-green-400":ge.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ge.status})})]},nt))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[he.filter(ge=>ge.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[he.filter(ge=>ge.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[he.filter(ge=>ge.status==="invalid").length," invalid"]}),he.some(ge=>ge.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[he.filter(ge=>ge.status==="success").length," imported"]})]})}),he.filter(ge=>ge.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Ds,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:Et,disabled:ae||he.filter(ge=>ge.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ae?s.jsxs(s.Fragment,{children:[s.jsx(Ei,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",he.filter(ge=>ge.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Li,{isOpen:x,onClose:()=>y(!1),title:U?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:Nt,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:j,onChange:ge=>C(ge.target.value),placeholder:"e.g. AP Physics Period 4"}),U&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsLab,onChange:ge=>K({...G,physicsLab:ge.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.evidenceLocker,onChange:ge=>K({...G,evidenceLocker:ge.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.leaderboard,onChange:ge=>K({...G,leaderboard:ge.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsTools,onChange:ge=>K({...G,physicsTools:ge.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.communications,onChange:ge=>K({...G,communications:ge.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:ge=>Z(Math.max(1,Math.min(100,parseInt(ge.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(Ei,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):U?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},su={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},LM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},O0e=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,I0e=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,R0e=({assignment:t,isOpen:e,onClose:r})=>{const n=Ma(),a=T.useRef(null),[i,o]=T.useState([]),[c,d]=T.useState(!0),[h,p]=T.useState(!1),[m,x]=T.useState(t.category==="Practice Set"?"reading":"manage"),[y,S]=T.useState(null),[N,w]=T.useState(null),[E,O]=T.useState(""),[R,P]=T.useState(null),[I,k]=T.useState(!1),[A,j]=T.useState(null),[C,U]=T.useState({}),[L,$]=T.useState(null),[B,G]=T.useState(!0),[K,H]=T.useState(null),[Z,ne]=T.useState(null),[ce,he]=T.useState(null),[Y,ae]=T.useState(!1),re=T.useRef(null),ye=t.category==="Practice Set";T.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const ct=await pa(ut(Me,"question_banks",t.id));ct.exists()?o(ct.data().questions||[]):o([]);const Tt=await pa(ut(Me,"reading_materials",t.id));Tt.exists()?H(Tt.data()):H(null)}catch(ct){console.error("Failed to load bank:",ct),o([])}finally{d(!1)}})()},[e,t.id]);const De=async je=>{p(!0);try{await Zn(ut(Me,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:je,questionCount:je.length,updatedAt:new Date().toISOString()}),o(je)}catch(ct){n.error("Failed to save: "+(ct instanceof Error?ct.message:"Unknown error"))}finally{p(!1)}},Ye=async je=>{const ct=i.filter(Tt=>Tt.id!==je);await De(ct),n.success("Question removed."),R===je&&P(null)},rt=async()=>{try{await Ja(ut(Me,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},et=()=>{navigator.clipboard.writeText(O0e(t.title,t.classType,t.description)),k(!0),setTimeout(()=>k(!1),2e3),n.success("Prompt copied!")},Ne=()=>{navigator.clipboard.writeText(I0e(t.title,t.classType,t.description)),ae(!0),setTimeout(()=>ae(!1),2e3),n.success("Reading prompt copied!")},Ue=async je=>{var Tt;const ct=(Tt=je.target.files)==null?void 0:Tt[0];if(ct){he(null),ne(null);try{let bt=(await ct.text()).replace(/```json\s*|```\s*/g,"").trim();bt=bt.replace(/[\x00-\x1F\x7F]/g,xt=>xt===`
`||xt==="\r"||xt==="	"?" ":"");let de;try{de=JSON.parse(bt)}catch{const xt=bt.match(/\{[\s\S]*\}/);if(xt)de=JSON.parse(xt[0]);else throw new Error("No JSON object found.")}if(!de.title||!de.sections||!Array.isArray(de.sections))throw new Error("Missing required fields: title and sections array.");const He=de.sections.filter(xt=>!xt.title||!xt.content);if(He.length>0)throw new Error(`${He.length} section(s) missing title or content.`);ne(de)}catch(St){he(St instanceof Error?St.message:"Parse failed.")}re.current&&(re.current.value="")}},X=async()=>{if(Z){p(!0);try{await Zn(ut(Me,"reading_materials",t.id),{...Z,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(Z),ne(null),n.success(`Study material uploaded: ${Z.sections.length} sections!`)}catch(je){n.error("Failed to save: "+(je instanceof Error?je.message:"Unknown error"))}finally{p(!1)}}},te=async()=>{p(!0);try{await Ja(ut(Me,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},be=async je=>{var Tt;const ct=(Tt=je.target.files)==null?void 0:Tt[0];if(ct){$(null),j(null);try{let bt=(await ct.text()).replace(/```json\s*|```\s*/g,"").trim();bt=bt.replace(/[\x00-\x1F\x7F]/g,Je=>Je===`
`||Je==="\r"||Je==="	"?" ":"");let de;try{de=JSON.parse(bt)}catch{const Je=bt.match(/\[[\s\S]*\]/);if(Je)try{de=JSON.parse(Je[0])}catch{const Et=Je[0];let Nt=null;for(let dr=Et.length-1;dr>0;dr--)if(Et[dr]==="}")try{Nt=JSON.parse(Et.slice(0,dr+1)+"]");break}catch{}if(Nt)de=Nt;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Et=null;const Nt="["+bt;for(let dr=Nt.length-1;dr>0;dr--)if(Nt[dr]==="}")try{Et=JSON.parse(Nt.slice(0,dr+1)+"]");break}catch{}if(Et)de=Et;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(de)||de.length===0)throw new Error("Must be a non-empty JSON array.");const He=de.filter(Je=>Je.id&&Je.tier&&Je.type&&Je.stem&&Je.options&&Je.correctAnswer),xt=de.length-He.length;if(He.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const Ge={};He.forEach(Je=>{const Et=Je.tier;Ge[Et]=(Ge[Et]||0)+1}),j(He),U(Ge),xt>0&&n.success(`Parsed ${He.length} questions (${xt} skipped  missing fields).`)}catch(St){$(St instanceof Error?St.message:"Parse failed.")}a.current&&(a.current.value="")}},we=async()=>{if(!A)return;let je;if(B&&i.length>0){const ct=new Set(i.map(St=>St.id)),Tt=A.map((St,bt)=>({...St,id:ct.has(St.id)?`${St.id}_${Date.now()}_${bt}`:St.id}));je=[...i,...Tt]}else je=A;await De(je),n.success(`${B?"Added":"Replaced with"} ${A.length} questions. Total: ${je.length}`),j(null),x("manage")},Qe=T.useMemo(()=>{let je=i;if(y&&(je=je.filter(ct=>ct.tier===y)),N&&(je=je.filter(ct=>ct.type===N)),E){const ct=E.toLowerCase();je=je.filter(Tt=>Tt.stem.toLowerCase().includes(ct)||Tt.id.toLowerCase().includes(ct))}return je},[i,y,N,E]),at=T.useMemo(()=>{const je={1:0,2:0,3:0};return i.forEach(ct=>{je[ct.tier]=(je[ct.tier]||0)+1}),je},[i]),kt=T.useMemo(()=>{const je={};return i.forEach(ct=>{je[ct.type]=(je[ct.type]||0)+1}),je},[i]);return e?s.jsx(Li,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Mh,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(je=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${su[je].bg} ${su[je].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${su[je].text}`,children:at[je]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",je]})]},je))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!ye&&s.jsxs("button",{onClick:()=>x("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Mh,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!ye&&s.jsxs("button",{onClick:()=>x("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(cn,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>x("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(ni,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",K?`(${K.sections.length})`:""]})]}),m==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(Ei,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Mh,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(qf,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:E,onChange:je=>O(je.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>S(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(je=>s.jsxs("button",{onClick:()=>S(y===je?null:je),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y===je?`${su[je].bg} ${su[je].text} ${su[je].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",je," (",at[je],")"]},je))]})]}),Object.keys(kt).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(kt).sort((je,ct)=>ct[1]-je[1]).map(([je,ct])=>s.jsxs("button",{onClick:()=>w(N===je?null:je),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${N===je?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[LM[je]||je," (",ct,")"]},je))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Qe.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):Qe.map(je=>{const ct=su[je.tier]||su[1],Tt=R===je.id;return s.jsxs("div",{className:`rounded-xl border transition ${Tt?`${ct.border} ${ct.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>P(Tt?null:je.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${ct.bg} ${ct.text}`,children:["T",je.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:je.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:LM[je.type]||je.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(qn,{className:"w-2.5 h-2.5"}),je.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:je.stem})]}),s.jsx(no,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${Tt?"rotate-90":""}`})]}),Tt&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[je.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:je.context}),s.jsx("div",{className:"space-y-1",children:je.options.map(St=>{const bt=Array.isArray(je.correctAnswer)?je.correctAnswer.includes(St.id):je.correctAnswer===St.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${bt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[St.id.toUpperCase(),"."]}),s.jsx("span",{children:St.text}),bt&&s.jsx(Br,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},St.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),je.explanation]}),je.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),je.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Ye(je.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(Wr,{className:"w-3 h-3"})," Delete Question"]})]})]},je.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",Qe.length," of ",i.length]}),s.jsxs("button",{onClick:rt,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Wr,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:et,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${I?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:I?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(Wv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:be,className:"hidden"})]})]}),L&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:L})]}),A&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(je=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:C[je]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",je]})]},je))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>G(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(cn,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",A.length,")"]}),s.jsxs("button",{onClick:()=>G(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(io,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:we,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ei,{className:"w-4 h-4 animate-spin"}):s.jsx(Lu,{className:"w-4 h-4"}),h?"Saving...":`Upload ${A.length} Questions`]}),s.jsx("button",{onClick:()=>j(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&s.jsxs("div",{className:"space-y-5",children:[K?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ni,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),s.jsxs("button",{onClick:te,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Wr,{className:"w-3 h-3"})," Remove"]})]}),K.description&&s.jsx("p",{className:"text-xs text-gray-400",children:K.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[K.sections.length," sections"]}),K.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",K.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:K.sections.map((je,ct)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:ct+1}),s.jsx("span",{className:"truncate",children:je.title})]},ct))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(ni,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:Ne,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Y?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Y?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(Wv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:re,type:"file",accept:".json,.txt",onChange:Ue,className:"hidden"})]})]}),ce&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:ce})]}),Z&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[Z.sections.length," sections  ~",Z.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:X,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ei,{className:"w-4 h-4 animate-spin"}):s.jsx(Lu,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>ne(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(Ei,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},M0e=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],D0e={Textbook:s.jsx(ni,{className:"w-4 h-4"}),Simulation:s.jsx(uE,{className:"w-4 h-4"}),"Lab Guide":s.jsx(H2,{className:"w-4 h-4"}),"Practice Set":s.jsx(cs,{className:"w-4 h-4"}),Article:s.jsx(VH,{className:"w-4 h-4"}),"Video Lesson":s.jsx(GH,{className:"w-4 h-4"}),Supplemental:s.jsx(W2,{className:"w-4 h-4"})},P0e=({assignments:t,submissions:e,classConfigs:r,onPreviewAssignment:n,onNavigate:a})=>{const i=Ma(),{confirm:o}=Mo(),[c,d]=T.useState("All Classes"),[h,p]=T.useState("All Categories"),[m,x]=T.useState(new Set),[y,S]=T.useState(null),N=T.useMemo(()=>{const k=Object.values(jr).filter(j=>j!==jr.UNCATEGORIZED),A=(r||[]).map(j=>j.className);return Array.from(new Set(["All Classes",...k,...A]))},[r]),w=T.useMemo(()=>t.filter(k=>{const A=c==="All Classes"||k.classType===c,j=h==="All Categories"||k.category===h;return A&&j}),[t,c,h]),E=T.useMemo(()=>{const k={};return w.forEach(A=>{const j=c==="All Classes"?`${A.classType.toUpperCase()}  ${A.unit||"Unassigned"}`:A.unit||"Unassigned";k[j]||(k[j]=[]),k[j].push(A)}),Object.keys(k).sort().reduce((A,j)=>(A[j]=k[j],A),{})},[w,c]),O=async k=>{await ke.updateAssignmentStatus(k.id,Ua.ACTIVE),i.success(`"${k.title}" deployed.`)},R=async k=>{const A=k.status===Ua.ACTIVE?Ua.ARCHIVED:Ua.ACTIVE;await ke.updateAssignmentStatus(k.id,A)},P=T.useMemo(()=>[...Array.isArray(e)?e:[]].sort((A,j)=>{const C=new Date(A.submittedAt||0).getTime();return new Date(j.submittedAt||0).getTime()-C}),[e]),I=k=>k.status===Ua.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):k.scheduledAt&&new Date(k.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx(MH,{className:"w-3 h-3"}),new Date(k.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>a==null?void 0:a("Resource Editor"),className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(cn,{className:"w-5 h-5"})," Resource Editor"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:c,onChange:k=>d(k.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:N.map(k=>s.jsx("option",{value:k,children:k},k))}),s.jsx(ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:k=>p(k.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),M0e.map(k=>s.jsx("option",{value:k,children:k},k))]}),s.jsx(ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(E).map(([k,A])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const j=new Set(m);j.has(k)?j.delete(k):j.add(k),x(j)},className:"text-gray-400 hover:text-white transition",children:m.has(k)?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(no,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:k}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!m.has(k)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:A.map(j=>{const C=I(j);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${j.status===Ua.ARCHIVED?"bg-white/2 border-white/5 opacity-60":j.status===Ua.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${j.status===Ua.DRAFT?"bg-blue-500/20 text-blue-400":j.status===Ua.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:j.status===Ua.DRAFT?s.jsx(N0,{className:"w-4 h-4"}):D0e[j.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:j.title}),C,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:j.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:j.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[j.status===Ua.DRAFT&&s.jsx("button",{onClick:()=>O(j),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(fE,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>S(j),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Oo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n==null?void 0:n(j.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(Mle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a==null?void 0:a("Resource Editor"),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",title:"Edit in Resource Editor",children:s.jsx(QT,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R(j),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:j.status===Ua.ACTIVE?s.jsx(dle,{className:"w-4 h-4"}):s.jsx(o0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await o({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await ke.deleteAssignment(j.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},j.id)})})]},k))})]}),s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[s.jsx(so,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[P.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(so,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),P.map(k=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:k.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:k.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(k.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(k.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(k.submittedAt||"").toLocaleDateString()})]})]},k.id))]})]})})]}),y&&s.jsx(R0e,{assignment:y,isOpen:!!y,onClose:()=>S(null)})]})},eW=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),L0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),B0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),$0e={BRUTE:eW,PHANTOM:L0e,SERPENT:B0e},tW=({bossType:t,hue:e,size:r})=>{const n=$0e[t]||eW;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},z0e=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],U0e=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=T.useState(null),c=T.useMemo(()=>{var y;if(!t)return[];const x=Object.keys(((y=t.gamification)==null?void 0:y.classProfiles)||{});return x.length>0?x:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=T.useMemo(()=>{var y,S;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((y=t.gamification)==null?void 0:y.inventory)||[],equipped:((S=t.gamification)==null?void 0:S.equipped)||{}};const x=Uu(t,d);return{inventory:x.inventory,equipped:x.equipped}},[t,d]);return t?s.jsx(Li,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(cn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(Kn,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(x=>s.jsx("button",{onClick:()=>o(x),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===x?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:x==="_legacy"?"Global":x},x))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:z0e.map(x=>{var S;const y=(S=h.equipped)==null?void 0:S[x];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?fa(y.rarity).border+" "+fa(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),s.jsx("button",{onClick:()=>n(t,x,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(Kn,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:x})},x)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((x,y)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${fa(x.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${fa(x.rarity).text} text-center truncate w-full`,children:x.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:x.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,x,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(Wr,{className:"w-4 h-4"})})})]},y)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},V0e=[10,50,100,-10,-50,-100],F0e=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=T.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Li,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:V0e.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},q0e=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(cs,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(yle,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(Xl,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(Kn,{className:"w-5 h-5"})})]})]})]})]},a)})]}),U3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},H0e=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Li,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(jr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(mg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},G0e={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},W0e=({users:t,initialTab:e})=>{const r=Ma(),{confirm:n}=Mo(),a=e&&G0e[e]||"OPERATIVES",[i,o]=T.useState(""),[c,d]=T.useState("All Classes"),[h,p]=T.useState("All Sections"),[m,x]=T.useState("xp"),[y,S]=T.useState("desc"),N=q=>{m===q?S(ve=>ve==="asc"?"desc":"asc"):(x(q),S("asc"))},w=({label:q,col:ve,className:Te})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Te??""}`,onClick:()=>N(ve),children:s.jsxs("div",{className:`flex items-center gap-1 ${Te!=null&&Te.includes("text-center")?"justify-center":Te!=null&&Te.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Nx,{className:`w-2.5 h-2.5 -mb-0.5 ${m===ve&&y==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(ai,{className:`w-2.5 h-2.5 -mt-0.5 ${m===ve&&y==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[E,O]=T.useState([]),[R,P]=T.useState([]),[I,k]=T.useState(null),[A,j]=T.useState(null),[C,U]=T.useState(!1),[L,$]=T.useState(!1),[B,G]=T.useState(U3),[K,H]=T.useState(!1),[Z,ne]=T.useState([]),[ce,he]=T.useState(null),[Y,ae]=T.useState(""),[re,ye]=T.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]}),[De,Ye]=T.useState([]),[rt,et]=T.useState(!1),[Ne,Ue]=T.useState(null),[X,te]=T.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[be,we]=T.useState(!1),Qe=T.useRef(null),[at,kt]=T.useState(null),[je,ct]=T.useState([]),[Tt,St]=T.useState("bosses"),[bt,de]=T.useState(!1),[He,xt]=T.useState(null),[Ge,Je]=T.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Et=T.useRef(null),[Nt,dr]=T.useState(null),[ge,nt]=T.useState([]),[jt,Bt]=T.useState(null),[$t,tt]=T.useState([]),[tr,Le]=T.useState(!1),[it,dt]=T.useState("pending"),[Pt,Vt]=T.useState([]);T.useEffect(()=>{const q=ke.subscribeToXPEvents(O),ve=ke.subscribeToQuests(P),Te=ke.subscribeToAllBossQuizzes(Ye),Ae=ke.subscribeToAllTutoringSessions(Vt),gt=ke.subscribeToBossQuestionBanks(ct);return()=>{q(),ve(),Te(),Ae(),gt()}},[]),T.useEffect(()=>{const q=[];t.forEach(ve=>{var Te,Ae;(Ae=(Te=ve.gamification)==null?void 0:Te.activeQuests)==null||Ae.forEach(gt=>{const zt=R.find(Rt=>Rt.id===gt.questId);zt&&(gt.status==="DEPLOYED"||gt.status==="ACCEPTED")&&q.push({user:ve,quest:zt,status:gt.status,roll:gt.deploymentRoll,acceptedAt:gt.acceptedAt})})}),ne(q)},[t,R,a]);const qt=T.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),Ct=T.useMemo(()=>{const q=new Set;return qt.forEach(ve=>{ve.classSections?Object.values(ve.classSections).forEach(Te=>{Te&&q.add(Te)}):ve.section&&q.add(ve.section)}),Array.from(q).sort()},[qt]),Fr=T.useMemo(()=>{if(re.type!=="CLASS_SPECIFIC"||!re.targetClass)return Ct;const q=tv(qt,re.targetClass);return q.length>0?q:Ct},[re.type,re.targetClass,qt,Ct]),un=T.useMemo(()=>{if(!B.targetClass)return Ct;const q=tv(qt,B.targetClass);return q.length>0?q:Ct},[B.targetClass,qt,Ct]),Jr=T.useMemo(()=>{if(X.classType==="GLOBAL"||!X.classType)return Ct;const q=tv(qt,X.classType);return q.length>0?q:Ct},[X.classType,qt,Ct]),qr=q=>{var Te,Ae;const ve=(Te=q.gamification)==null?void 0:Te.classProfiles;return ve&&Object.keys(ve).length>0?Object.values(ve).reduce((gt,zt)=>gt+u0(zt.equipped),0):u0((Ae=q.gamification)==null?void 0:Ae.equipped)},gn=T.useMemo(()=>qt.filter(q=>{var zt;const ve=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Te=c==="All Classes"||q.classType===c||((zt=q.enrolledClasses)==null?void 0:zt.includes(c)),Ae=q.classSections?Object.values(q.classSections):[],gt=h==="All Sections"||q.section===h||Ae.includes(h);return ve&&Te&&gt}).sort((q,ve)=>{var Te,Ae,gt,zt,Rt,ar,Er,le,xe,Re;switch(m){case"name":return y==="asc"?q.name.localeCompare(ve.name):ve.name.localeCompare(q.name);case"class":return y==="asc"?(q.classType||"").localeCompare(ve.classType||""):(ve.classType||"").localeCompare(q.classType||"");case"level":{const Ve=((Te=q.gamification)==null?void 0:Te.level)||1,Fe=((Ae=ve.gamification)==null?void 0:Ae.level)||1;return y==="asc"?Ve-Fe:Fe-Ve}case"flux":{const Ve=((gt=q.gamification)==null?void 0:gt.currency)||0,Fe=((zt=ve.gamification)==null?void 0:zt.currency)||0;return y==="asc"?Ve-Fe:Fe-Ve}case"gear":{const Ve=qr(q),Fe=qr(ve);return y==="asc"?Ve-Fe:Fe-Ve}case"xp":default:{const Ve=c!=="All Classes"?((ar=(Rt=q.gamification)==null?void 0:Rt.classXp)==null?void 0:ar[c])||0:((Er=q.gamification)==null?void 0:Er.xp)||0,Fe=c!=="All Classes"?((xe=(le=ve.gamification)==null?void 0:le.classXp)==null?void 0:xe[c])||0:((Re=ve.gamification)==null?void 0:Re.xp)||0;return y==="asc"?Ve-Fe:Fe-Ve}}}),[qt,i,c,h,m,y]),gr=async(q,ve)=>{try{await ke.adjustUserXP(q.id,ve,q.classType||jr.UNCATEGORIZED),r.success(`${ve>0?"+":""}${ve} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}k(null)},ba=async q=>{q.preventDefault();const ve={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!0,type:re.type};re.type==="CLASS_SPECIFIC"&&(ve.targetClass=re.targetClass),re.targetSections.length>0&&(ve.targetSections=re.targetSections),await ke.saveXPEvent(ve),U(!1),ye({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]})},xn=async q=>{q.preventDefault(),H(!0);try{const ve={};B.techReq>0&&(ve.tech=B.techReq),B.focusReq>0&&(ve.focus=B.focusReq),B.analysisReq>0&&(ve.analysis=B.analysisReq),B.charismaReq>0&&(ve.charisma=B.charismaReq);const Te=new Date;Te.setHours(Te.getHours()+(B.durationHours||0));const Ae={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:ve,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?Te.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await ke.saveQuest(Ae),r.success(`Mission "${Ae.title}" deployed.`),G(U3),$(!1)}catch(ve){console.error("Failed to issue mission:",ve),r.error("Failed to issue mission.")}finally{H(!1)}},Rn=async q=>{await ke.saveXPEvent({...q,isActive:!q.isActive})},oi=async q=>{const ve={...q,isActive:!q.isActive};ve.isActive&&(ve.expiresAt=null),await ke.saveQuest(ve)},Or=async(q,ve,Te)=>{var zt,Rt;if(!await n({message:`Confiscate ${ve.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const gt=(Te?Uu(q,Te):{inventory:((zt=q.gamification)==null?void 0:zt.inventory)||[]}).inventory.filter(ar=>ar.id!==ve.id);await ke.adminUpdateInventory(q.id,gt,((Rt=q.gamification)==null?void 0:Rt.currency)||0,Te),j(ar=>{var Er,le;return ar?Te&&((le=(Er=ar.gamification)==null?void 0:Er.classProfiles)!=null&&le[Te])?{...ar,gamification:{...ar.gamification,classProfiles:{...ar.gamification.classProfiles,[Te]:{...ar.gamification.classProfiles[Te],inventory:gt}}}}:{...ar,gamification:{...ar.gamification,inventory:gt}}:null})},yn=async(q,ve,Te)=>{var zt;if(!await n({message:`Force unequip ${ve} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const gt={...(Te?Uu(q,Te):{equipped:{...(zt=q.gamification)==null?void 0:zt.equipped}}).equipped};delete gt[ve],await ke.adminUpdateEquipped(q.id,gt,Te),j(Rt=>{var ar,Er;return Rt?Te&&((Er=(ar=Rt.gamification)==null?void 0:ar.classProfiles)!=null&&Er[Te])?{...Rt,gamification:{...Rt.gamification,classProfiles:{...Rt.gamification.classProfiles,[Te]:{...Rt.gamification.classProfiles[Te],equipped:gt}}}}:{...Rt,gamification:{...Rt.gamification,equipped:gt}}:null})},li=async(q,ve)=>{var Ae,gt;const Te=Math.max(0,(((Ae=q.gamification)==null?void 0:Ae.currency)||0)+ve);await ke.adminUpdateInventory(q.id,((gt=q.gamification)==null?void 0:gt.inventory)||[],Te),j(zt=>zt?{...zt,gamification:{...zt.gamification,currency:Te}}:null)},Yn=async(q,ve,Te,Ae)=>{try{await ke.resolveQuest(q,ve,Te,Ae),r.success(Te?`Mission "${ve.title}" approved.`:`Mission "${ve.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},an=async q=>{const ve=q.quest.rollDieSides||20,Te=Math.floor(Math.random()*ve)+1;r.info(`Rolled a ${Te} on a D${ve}. ${Te===ve?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Yn(q.user.id,q.quest,Te===ve,q.user.classType)},vn=async q=>{try{await ke.updateCodename(q,Y.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}he(null)},En=async(q,ve)=>{try{await ke.toggleCodenameLock(q,ve),r.success(ve?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},ci=q=>{var ve,Te,Ae,gt,zt;if(q)Ue(q),te({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((ve=q.rewards)==null?void 0:ve.xp)||500,rewardFlux:((Te=q.rewards)==null?void 0:Te.flux)||100,rewardItemRarity:((Ae=q.rewards)==null?void 0:Ae.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(Rt=>({...Rt,damageBonus:Rt.damageBonus||0})),targetSections:q.targetSections||[],bossType:((gt=q.bossAppearance)==null?void 0:gt.bossType)||"BRUTE",bossHue:((zt=q.bossAppearance)==null?void 0:zt.hue)??0}),nt(q.modifiers||[]);else{Ue(null);const Rt=new Date;Rt.setDate(Rt.getDate()+7),te({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:Rt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),nt([])}et(!0)},Ka=()=>{te(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},ki=(q,ve,Te)=>{te(Ae=>{const gt=[...Ae.questions];return gt[q]={...gt[q],[ve]:Te},{...Ae,questions:gt}})},hs=(q,ve,Te)=>{te(Ae=>{const gt=[...Ae.questions],zt=[...gt[q].options];return zt[ve]=Te,gt[q]={...gt[q],options:zt},{...Ae,questions:gt}})},wi=q=>{te(ve=>({...ve,questions:ve.questions.filter((Te,Ae)=>Ae!==q)}))},Ot=async q=>{if(q.preventDefault(),X.questions.length===0){r.error("Add at least one question.");return}try{const ve=[...new Set(X.questions.map(Ae=>Ae.bankId).filter(Boolean))],Te={id:(Ne==null?void 0:Ne.id)||Math.random().toString(36).substring(2,12),bossName:X.bossName,description:X.description,maxHp:X.maxHp,currentHp:(Ne==null?void 0:Ne.currentHp)??X.maxHp,classType:X.classType,isActive:(Ne==null?void 0:Ne.isActive)??!0,deadline:new Date(X.deadline).toISOString(),damagePerCorrect:X.damagePerCorrect,questions:X.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(gt=>gt.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{},...Ae.bankId?{bankId:Ae.bankId}:{}})),rewards:{xp:X.rewardXp,flux:X.rewardFlux,...X.rewardItemRarity?{itemRarity:X.rewardItemRarity}:{}},...X.targetSections.length>0?{targetSections:X.targetSections}:{},bossAppearance:{bossType:X.bossType,hue:X.bossHue},...ge.length>0?{modifiers:ge}:{},...ve.length>0?{questionBankIds:ve}:{}};await ke.saveBossQuiz(Te),r.success(Ne?"Quiz boss updated.":"Quiz boss deployed!"),et(!1)}catch{r.error("Failed to save quiz boss.")}},fe=async q=>{await ke.toggleBossQuizActive(q.id,!q.isActive)},st=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await ke.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},pt=q=>{q?(xt(q),Je({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(ve=>({...ve,damageBonus:ve.damageBonus||0}))})):(xt(null),Je({name:"",classType:"GLOBAL",description:"",questions:[]})),dr(null),de(!0)},nr=async q=>{if(q.preventDefault(),Ge.questions.length===0){r.error("Add at least one question.");return}try{const ve=new Date().toISOString(),Te={id:(He==null?void 0:He.id)||Math.random().toString(36).substring(2,12),name:Ge.name,classType:Ge.classType,description:Ge.description,questions:Ge.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(gt=>gt.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{}})),createdAt:(He==null?void 0:He.createdAt)||ve,updatedAt:ve};await ke.saveBossQuestionBank(Te),r.success(He?"Question bank updated.":"Question bank created!"),de(!1)}catch{r.error("Failed to save question bank.")}},vr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await ke.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},dn=async(q,ve)=>{var gt;const Te=(gt=q.target.files)==null?void 0:gt[0];if(!Te)return;const Ae=ve==="bank"?dr:kt;Ae(null);try{let Rt=(await Te.text()).replace(/```json\s*|```\s*/g,"").trim();Rt=Rt.replace(/[\x00-\x1F\x7F]/g,Re=>Re===`
`||Re==="\r"||Re==="	"?" ":"");let ar;try{ar=JSON.parse(Rt)}catch{const Re=Rt.match(/\[[\s\S]*\]/);if(Re)try{ar=JSON.parse(Re[0])}catch{let Ve=null;for(let Fe=Re[0].length-1;Fe>0;Fe--)if(Re[0][Fe]==="}")try{Ve=JSON.parse(Re[0].slice(0,Fe+1)+"]");break}catch{}if(Ve)ar=Ve;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(ar)||ar.length===0)throw new Error("Must be a non-empty JSON array.");const Er=ar.filter(Re=>Re.stem&&Re.options&&Re.correctAnswer!==void 0);if(Er.length===0)throw new Error("No valid questions found.");const le=Er.map(Re=>({id:Re.id||Math.random().toString(36).substring(2,10),stem:Re.stem,options:Re.options.slice(0,4),correctAnswer:typeof Re.correctAnswer=="number"?Re.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(Re.difficulty)?Re.difficulty:"MEDIUM",damageBonus:typeof Re.damageBonus=="number"?Re.damageBonus:0})),xe=ar.length-Er.length;ve==="bank"?Je(Re=>({...Re,questions:[...Re.questions,...le]})):te(Re=>({...Re,questions:[...Re.questions,...le]})),r.success(`Imported ${le.length} questions${xe>0?` (${xe} skipped)`:""}`)}catch(zt){Ae(zt instanceof Error?zt.message:"Import failed."),r.error("Failed to import questions.")}ve==="bank"&&Et.current&&(Et.current.value=""),ve==="boss"&&Qe.current&&(Qe.current.value="")},Zr=q=>{const ve=q.questions.map(Te=>({...Te,damageBonus:Te.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));te(Te=>({...Te,questions:[...Te.questions,...ve]})),r.success(`Imported ${ve.length} questions from "${q.name}"`)},bn=q=>{nt(ve=>{if(ve.find(gt=>gt.type===q))return ve.filter(gt=>gt.type!==q);const Ae=lT[q];return[...ve,{type:q,...Ae.hasValue?{value:Ae.defaultValue}:{}}]})},Pr=(q,ve)=>{nt(Te=>Te.map(Ae=>Ae.type===q?{...Ae,value:ve}:Ae))},Ls=async q=>{Bt(q),Le(!0);try{const ve=await ke.getBossQuizAllProgress(q.id);tt(ve)}catch{r.error("Failed to load endgame data.")}Le(!1)},fs=(q,ve)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${ve||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,po=()=>{const q=fs(X.bossName,X.classType);navigator.clipboard.writeText(q),we(!0),setTimeout(()=>we(!1),2500),r.success("Prompt copied to clipboard!")},yl=q=>dn(q,"boss"),ps=async(q,ve)=>{try{const Te=await ke.completeTutoring(q,ve);r.success(`Verified! Tutor earned ${Te.xpAwarded} XP and ${Te.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},ms=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await ke.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Pa=Pt.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),wa={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:wa[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(fE,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(V2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>ci(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Oo,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[gn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Nle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Ct.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),Ct.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(w,{label:"Class",col:"class"}),s.jsx(w,{label:"Level",col:"level",className:"text-center"}),s.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:gn.map(q=>{var gt,zt,Rt,ar,Er,le,xe,Re,Ve;const ve=((gt=q.gamification)==null?void 0:gt.level)||1,Te=((zt=q.gamification)==null?void 0:zt.currency)||0,Ae=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),ce===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:Y,onChange:Fe=>ae(Fe.target.value),maxLength:24,onKeyDown:Fe=>{Fe.key==="Enter"&&vn(q.id),Fe.key==="Escape"&&he(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>vn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(Xl,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>he(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(Kn,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var Fe;he(q.id),ae(((Fe=q.gamification)==null?void 0:Fe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((Rt=q.gamification)==null?void 0:Rt.codename)||"UNASSIGNED",s.jsx(x3,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var Fe;return En(q.id,!((Fe=q.gamification)!=null&&Fe.codenameLocked))},className:`transition ${(ar=q.gamification)!=null&&ar.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Er=q.gamification)!=null&&Er.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(le=q.gamification)!=null&&le.codenameLocked?s.jsx(af,{className:"w-2.5 h-2.5"}):s.jsx(kle,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ae.map(Fe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Fe},Fe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:ve})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((Re=(xe=q.gamification)==null?void 0:xe.classXp)==null?void 0:Re[c])||0:((Ve=q.gamification)==null?void 0:Ve.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Te})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:qr(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>j(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Gv,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>k(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(qn,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>ke.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>Rn(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>U(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(cn,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:R.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(ll,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([ve,Te])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Te," ",ve]},ve))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>oi(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>ke.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(q0e,{deployments:Z,onResolveQuest:Yn,onRollForSalvation:an}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>St("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Tt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ph,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",De.length,")"]}),s.jsxs("button",{onClick:()=>St("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Tt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Mh,{className:"w-3 h-3 inline mr-1"})," Question Banks (",je.length,")"]})]}),Tt==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),De.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Oo,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),De.map(q=>{var gt,zt;const ve=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Te=new Date(q.deadline)<new Date,Ae=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Te?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Te?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Oo,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(gt=q.modifiers)!=null&&gt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(zt=q.targetSections)!=null&&zt.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Te&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ae&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${ve>50?"bg-amber-500":ve>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${ve}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ae&&s.jsxs("button",{onClick:()=>Ls(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(Vf,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>ci(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(x3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>fe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>st(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id)})]}),Tt==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>pt(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(cn,{className:"w-3 h-3"})," New Bank"]})]}),je.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Mh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),je.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Mh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>pt(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(x3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>vr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>dt("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${it==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Pa.length,")"]}),s.jsxs("button",{onClick:()=>dt("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${it==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",Pt.length,")"]})]}),(it==="pending"?Pa:Pt).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(ol,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:it==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(it==="pending"?Pa:Pt).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ile,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>ps(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>ms(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Kn,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(U0e,{user:A,onClose:()=>j(null),onDeleteItem:Or,onUnequipItem:yn,onGrantFlux:li}),s.jsx(H0e,{isOpen:L,onClose:()=>$(!1),form:B,setForm:G,onSubmit:xn,onSaveDraft:async()=>{const q={};B.techReq>0&&(q.tech=B.techReq),B.focusReq>0&&(q.focus=B.focusReq),B.analysisReq>0&&(q.analysis=B.analysisReq),B.charismaReq>0&&(q.charisma=B.charismaReq);const ve={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:q,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await ke.saveQuest(ve),r.success("Mission saved as draft (standby)."),G(U3),$(!1)},isSubmitting:K,availableSections:un}),s.jsx(Li,{isOpen:C,onClose:()=>U(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:ba,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:re.title,onChange:q=>ye({...re,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:re.multiplier,onChange:q=>ye({...re,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:re.type,onChange:q=>ye({...re,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),re.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:re.targetClass,onChange:q=>ye({...re,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(mg,{availableSections:Fr,selectedSections:re.targetSections,onChange:q=>ye({...re,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!1,type:re.type,...re.type==="CLASS_SPECIFIC"?{targetClass:re.targetClass}:{},...re.targetSections.length>0?{targetSections:re.targetSections}:{}};await ke.saveXPEvent(q),U(!1),ye({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(F0e,{user:I,onClose:()=>k(null),onAdjust:gr}),s.jsx(Li,{isOpen:rt,onClose:()=>et(!1),title:Ne?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Ot,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:X.bossName,onChange:q=>te({...X,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:X.description,onChange:q=>te({...X,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(tW,{bossType:X.bossType,hue:X.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>te({...X,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${X.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",X.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:X.bossHue,onChange:q=>te({...X,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:X.maxHp,onChange:q=>te({...X,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:X.damagePerCorrect,onChange:q=>te({...X,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:X.classType,onChange:q=>te({...X,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(mg,{availableSections:Jr,selectedSections:X.targetSections,onChange:q=>te({...X,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:X.deadline,onChange:q=>te({...X,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:X.rewardXp,onChange:q=>te({...X,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:X.rewardFlux,onChange:q=>te({...X,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:X.rewardItemRarity,onChange:q=>te({...X,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ge.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(lT).map(([q,ve])=>{const Te=ge.find(Ae=>Ae.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Te?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>bn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:ve.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:ve.description})]}),Te&&ve.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:Te.value??ve.defaultValue,onChange:Ae=>Pr(q,parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:ve.unit})]})]},q)})})]}),je.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:je.filter(q=>q.classType===X.classType||q.classType==="GLOBAL"||X.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>Zr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",X.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:po,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${be?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:be?s.jsxs(s.Fragment,{children:[s.jsx(Xl,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(Lu,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Qe,type:"file",accept:".json,.txt",onChange:yl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:Ka,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Manual"]})]})]}),at&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4 flex-shrink-0"}),at,s.jsx("button",{type:"button",onClick:()=>kt(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Kn,{className:"w-3 h-3"})})]}),X.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(Wv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),X.questions.map((q,ve)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",ve+1]}),s.jsx("textarea",{value:q.stem,onChange:Te=>ki(ve,"stem",Te.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>wi(ve),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(Wr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Te,Ae)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ki(ve,"correctAnswer",Ae),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ae?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(Xl,{className:"w-3 h-3"})}),s.jsx("input",{value:Te,onChange:gt=>hs(ve,Ae,gt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ae)}`,required:!0})]},Ae))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>ki(ve,"difficulty",Te.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>ki(ve,"damageBonus",parseInt(Te.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!Ne&&s.jsx("button",{type:"button",onClick:async()=>{if(X.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(X.questions.map(Te=>Te.bankId).filter(Boolean))],ve={id:Math.random().toString(36).substring(2,12),bossName:X.bossName,description:X.description,maxHp:X.maxHp,currentHp:X.maxHp,classType:X.classType,isActive:!1,deadline:X.deadline?new Date(X.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:X.damagePerCorrect,questions:X.questions.map(Te=>({id:Te.id,stem:Te.stem,options:Te.options.filter(Ae=>Ae.trim()),correctAnswer:Te.correctAnswer,difficulty:Te.difficulty,...Te.damageBonus>0?{damageBonus:Te.damageBonus}:{},...Te.bankId?{bankId:Te.bankId}:{}})),rewards:{xp:X.rewardXp,flux:X.rewardFlux,...X.rewardItemRarity?{itemRarity:X.rewardItemRarity}:{}},...X.targetSections.length>0?{targetSections:X.targetSections}:{},bossAppearance:{bossType:X.bossType,hue:X.bossHue},...ge.length>0?{modifiers:ge}:{},...q.length>0?{questionBankIds:q}:{}};await ke.saveBossQuiz(ve),r.success("Quiz boss saved as draft (inactive)."),et(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${Ne?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:Ne?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Li,{isOpen:bt,onClose:()=>de(!1),title:He?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:nr,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:Ge.name,onChange:q=>Je({...Ge,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:Ge.classType,onChange:q=>Je({...Ge,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:Ge.description,onChange:q=>Je({...Ge,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",Ge.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(Lu,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Et,type:"file",accept:".json,.txt",onChange:q=>dn(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>Je(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Manual"]})]})]}),Nt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(Kn,{className:"w-4 h-4 flex-shrink-0"})," ",Nt,s.jsx("button",{type:"button",onClick:()=>dr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Kn,{className:"w-3 h-3"})})]}),Ge.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Wv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),Ge.questions.map((q,ve)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:Te=>{const Ae=[...Ge.questions];Ae[ve]={...Ae[ve],stem:Te.target.value},Je({...Ge,questions:Ae})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${ve+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>Je(Te=>({...Te,questions:Te.questions.filter((Ae,gt)=>gt!==ve)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Te,Ae)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const gt=[...Ge.questions];gt[ve]={...gt[ve],correctAnswer:Ae},Je({...Ge,questions:gt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ae?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(Xl,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:Te,onChange:gt=>{const zt=[...Ge.questions],Rt=[...zt[ve].options];Rt[Ae]=gt.target.value,zt[ve]={...zt[ve],options:Rt},Je({...Ge,questions:zt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ae)}`,required:!0})]},Ae))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>{const Ae=[...Ge.questions];Ae[ve]={...Ae[ve],difficulty:Te.target.value},Je({...Ge,questions:Ae})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>{const Ae=[...Ge.questions];Ae[ve]={...Ae[ve],damageBonus:parseInt(Te.target.value)||0},Je({...Ge,questions:Ae})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:He?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Li,{isOpen:!!jt,onClose:()=>{Bt(null),tt([])},title:jt?`Endgame: ${jt.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:tr?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):jt&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:$t.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:$t.reduce((q,ve)=>{var Te;return q+(((Te=ve.combatStats)==null?void 0:Te.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:$t.reduce((q,ve)=>{var Te;return q+(((Te=ve.combatStats)==null?void 0:Te.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:$t.reduce((q,ve)=>{var Te;return q+(((Te=ve.combatStats)==null?void 0:Te.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(LH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...$t].sort((q,ve)=>{var Te,Ae;return(((Te=ve.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ae=q.combatStats)==null?void 0:Ae.totalDamageDealt)||0)}).slice(0,5).map((q,ve)=>{var Er;const Te=t.find(le=>le.id===q.userId),Ae=q.combatStats,gt=ve,zt=gt<PO.length?PO[gt]:1,Rt=((Ae==null?void 0:Ae.questionsAttempted)||0)>=Wm&&((Ae==null?void 0:Ae.questionsCorrect)||0)>=Km,ar=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${ve===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${ar[ve]||"text-gray-500"}`,children:["#",ve+1]}),(Te==null?void 0:Te.avatarUrl)&&s.jsx("img",{src:Te.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Te==null?void 0:Te.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((Er=Ae==null?void 0:Ae.totalDamageDealt)==null?void 0:Er.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(Ae==null?void 0:Ae.questionsCorrect)||0,"/",(Ae==null?void 0:Ae.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(Ae==null?void 0:Ae.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(Ae==null?void 0:Ae.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:Rt?s.jsxs("span",{className:`text-xs font-bold ${ve<5?ar[ve]:"text-gray-400"}`,children:[zt,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(o0,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...$t].sort((q,ve)=>{var Te,Ae;return(((Te=ve.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ae=q.combatStats)==null?void 0:Ae.totalDamageDealt)||0)}).map((q,ve)=>{const Te=t.find(Er=>Er.id===q.userId),Ae=q.combatStats,gt=(Ae==null?void 0:Ae.questionsAttempted)||0,zt=(Ae==null?void 0:Ae.questionsCorrect)||0,Rt=gt>0?Math.round(zt/gt*100):0,ar=gt>=Wm&&zt>=Km;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:ve+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(Te==null?void 0:Te.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ae==null?void 0:Ae.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:zt}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:gt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[Rt,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(Ae==null?void 0:Ae.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ae==null?void 0:Ae.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ae==null?void 0:Ae.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:ar?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const ve=$t.reduce((Rt,ar)=>{var Er,le;return Rt+(((le=(Er=ar.combatStats)==null?void 0:Er.correctByDifficulty)==null?void 0:le[q])||0)},0),Te=$t.reduce((Rt,ar)=>{var Er,le;return Rt+(((le=(Er=ar.combatStats)==null?void 0:Er.incorrectByDifficulty)==null?void 0:le[q])||0)},0),Ae=ve+Te,gt=Ae>0?Math.round(ve/Ae*100):0,zt=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${zt}-500/5 border border-${zt}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${zt}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[gt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[ve,"/",Ae," correct"]})]},q)})})]})]})})]})},K0e=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=Mo(),a=Ma(),[i,o]=T.useState({}),[c,d]=T.useState(jr.AP_PHYSICS),[h,p]=T.useState(!1),[m,x]=T.useState(""),[y,S]=T.useState(null),[N,w]=T.useState(""),[E,O]=T.useState(""),R=T.useMemo(()=>Object.values(jr).filter(L=>L!=="Uncategorized"),[]);T.useEffect(()=>{const L=ke.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>L()},[c]);const P=i[c]||[],I=T.useMemo(()=>t.filter(L=>{var $;return L.role==="STUDENT"&&(($=L.enrolledClasses)==null?void 0:$.includes(c))}).filter(L=>!N||L.section===N),[t,c,N]),k=async()=>{if(m.trim())try{await ke.createStudentGroup(m.trim(),c,[]),x(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},A=async L=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await ke.deleteStudentGroup(L)},j=async(L,$)=>{if(L.members.some(G=>G.userId===$.id))return;const B=[...L.members,{userId:$.id,userName:$.name}];await ke.updateStudentGroup(L.id,{members:B})},C=async(L,$)=>{const B=L.members.filter(G=>G.userId!==$);await ke.updateStudentGroup(L.id,{members:B})},U=T.useMemo(()=>{var $;const L={};for(const B of R)L[B]=(($=i[B])==null?void 0:$.length)||0;return L},[R,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(cn,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:R.map(L=>s.jsxs("button",{onClick:()=>d(L),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===L?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[L,U[L]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===L?"bg-white/20":"bg-white/10"}`,children:U[L]})]},L))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:L=>x(L.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:L=>L.key==="Enter"&&k(),autoFocus:!0}),s.jsx("button",{onClick:k,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),x("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(Kn,{className:"w-5 h-5"})})]})]}),P.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(ls,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:P.map(L=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:L.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[L.members.length," member",L.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>S(y===L.id?null:L.id),className:`p-2 rounded-lg transition ${y===L.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(Jv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(L.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>C(L,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(Kle,{className:"w-3 h-3"})})]},$.userId)),L.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(Jv,{className:"w-3 h-3 inline"})," button to assign students."]})]}),y===L.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qf,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:E,onChange:$=>O($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:N,onChange:$=>w($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:I.filter($=>!L.members.some(B=>B.userId===$.id)).filter($=>!E||$.name.toLowerCase().includes(E.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>j(L,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},L.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(ls,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},Q0e={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(FH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(DH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(X2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},X0e=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(X2,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(DH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(FH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(sf,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=Q0e[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(WT,{className:"w-4 h-4"}):s.jsx(UH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(Kn,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Y0e=["","","","","","","",""],J0e=["","","","","","","","","","","","","","","","","","","","","","","","","",""],Z0e=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var St,bt;const{confirm:d}=Mo(),[h,p]=T.useState([]),[m,x]=T.useState(""),[y,S]=T.useState("Main"),[N,w]=T.useState(!1),[E,O]=T.useState(!1),[R,P]=T.useState(null),[I,k]=T.useState(null),[A,j]=T.useState([]),[C,U]=T.useState([]),[L,$]=T.useState(null),[B,G]=T.useState([]),[K,H]=T.useState(null),Z=T.useRef(null),ne=T.useRef(null),ce=T.useRef(null),he=T.useMemo(()=>Object.values(jr).filter(de=>{var Je;if(de===jr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const He=a.find(Et=>Et.className===de),xt=(Je=t.enrolledClasses)==null?void 0:Je.includes(de),Ge=He?He.features.communications:!0;return xt&&Ge}),[a,t.role,t.enrolledClasses]),[Y,ae]=T.useState(he[0]||"");T.useEffect(()=>{(!Y||!he.includes(Y))&&he.length>0&&ae(he[0])},[he]);const re=T.useMemo(()=>y==="Resources"&&I?`res_${I}`:y==="Resources"&&!I?"":y==="Groups"&&L?`group_${L}`:y==="Groups"&&!L||!Y?"":`class_${Y.replace(/\s+/g,"_").toLowerCase()}`,[Y,y,I,L]),ye=T.useRef(null),De=T.useMemo(()=>n.filter(de=>!(de.classType!==Y||de.status==="DRAFT"||de.status==="ARCHIVED"||de.scheduledAt&&new Date(de.scheduledAt)>new Date)),[n,Y]),Ye=T.useMemo(()=>h.filter(de=>{var He;return de.isGlobalPinned||((He=de.pinnedBy)==null?void 0:He.includes(t.id))}),[h,t.id]),rt=T.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),et=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("class_")),[i]),Ne=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("res_")),[i]),Ue=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("group_")),[i]),X=T.useRef(!1);T.useEffect(()=>{if(!e){X.current=!1;return}if(X.current||!i||i.size===0)return;X.current=!0;const de=Array.from(i)[0];if(de.startsWith("class_")){S("Main");const He=he.find(xt=>`class_${xt.replace(/\s+/g,"_").toLowerCase()}`===de);He&&ae(He)}else de.startsWith("res_")?(S("Resources"),k(de.replace("res_",""))):de.startsWith("group_")&&(S("Groups"),$(de.replace("group_","")))},[e,i,he]),T.useEffect(()=>{!e||!re||o==null||o(re)},[e,re,o]),T.useEffect(()=>{if(!e)return;const de=t.role==="ADMIN"?ke.subscribeToStudentGroups(Y,j):ke.subscribeToMyGroups(t.id,j);return()=>de()},[e,t.id,t.role,Y]),T.useEffect(()=>{if(!e)return;let de="";if(y==="Resources"&&I?de=`res_${I}`:y==="Groups"&&L?de=`group_${L}`:(y==="Main"||y==="Bookmarks")&&(de=`class_${Y.replace(/\s+/g,"_").toLowerCase()}`),!de)return;w(!0);const He=ke.subscribeToChannelMessages(de,xt=>{p(xt),w(!1)});return()=>{He()}},[e,Y,y,I,L]),T.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const de=ke.subscribeToFlaggedMessages(xt=>{G(xt)}),He=ke.subscribeToAllGroups(U);return()=>{de(),He()}},[e,t.role]),T.useEffect(()=>{ye.current&&(ye.current.scrollTop=ye.current.scrollHeight)},[h,N,y,I]),T.useEffect(()=>{const de=He=>{Z.current&&!Z.current.contains(He.target)&&O(!1),ne.current&&!ne.current.contains(He.target)&&P(null)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]),T.useEffect(()=>{if(!e)return;const de=He=>{He.key==="Escape"&&r()};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[e,r]);const te=T.useCallback(async de=>{if(de.preventDefault(),!(!m.trim()||!re)&&!rt)try{await ke.sendMessage(t,m,re,Y),x(""),O(!1)}catch(He){console.error("Failed to send message:",He)}},[m,re,rt,t,Y]),be=T.useCallback(async(de,He)=>{try{await ke.toggleReaction(de,He,t.id),P(null)}catch(xt){console.error(xt)}},[t.id]),we=T.useCallback(async de=>{try{await ke.togglePersonalPin(de,t.id)}catch(He){console.error(He)}},[t.id]),Qe=T.useCallback(async(de,He)=>{try{await ke.toggleGlobalPin(de,!He)}catch(xt){console.error(xt)}},[]),at=async de=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await ke.deleteMessage(de)}catch(He){console.error(He)}},kt=async de=>{try{await ke.unflagMessage(de),await ke.resolveFlagByMessageId(de)}catch(He){console.error(He)}},je=async de=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await ke.resolveFlagByMessageId(de),await ke.deleteMessage(de)}catch(He){console.error(He)}},ct=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:ke.INDEFINITE_MUTE}],Tt=async de=>{if(K){try{await ke.muteUser(K.senderId,de)}catch(He){console.error(He)}H(null)}};return T.useEffect(()=>{const de=He=>{ce.current&&!ce.current.contains(He.target)&&H(null)};return K&&document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[K]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y==="Resources"&&I||y==="Groups"&&L?s.jsx("button",{onClick:()=>{k(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(gle,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(sf,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:y==="Moderation"?"Moderation Queue":y==="Groups"?L?(St=A.find(de=>de.id===L))==null?void 0:St.name:"My Groups":y==="Resources"?I?(bt=De.find(de=>de.id===I))==null?void 0:bt.title:"Class Resources":Y}),y!=="Resources"&&y!=="Moderation"&&y!=="Groups"&&he.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:Y}),s.jsx(ai,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:Y,onChange:de=>ae(de.target.value),children:he.map(de=>s.jsx("option",{value:de,children:de},de))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(Kn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>S("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${y==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(sf,{className:"w-5 h-5"}),et&&y!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>S("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${y==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ni,{className:"w-5 h-5"}),Ne&&y!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(A.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{S("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${y==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ls,{className:"w-5 h-5"}),Ue&&y!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):A.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),s.jsx("button",{onClick:()=>S("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${y==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(kR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>S("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${y==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(os,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[y==="Resources"&&!I&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:De.map(de=>s.jsxs("div",{onClick:()=>k(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${de.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(Ale,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${de.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:de.unit})]})]}),s.jsx("button",{onClick:He=>{He.stopPropagation(),c==null||c(de.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(q2,{className:"w-4 h-4"})})]},de.id))})}),y==="Groups"&&!L&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:A.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(ls,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):A.map(de=>s.jsx("div",{onClick:()=>$(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${de.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(ls,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${de.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[de.members.length," member",de.members.length!==1?"s":"","  ",de.classType]})]})]})},de.id))})}),y==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(os,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(de=>{var He,xt,Ge;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:de.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(de.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:de.content}),de.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:de.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(He=de.channelId)!=null&&He.startsWith("group_")?`Group: ${((xt=C.find(Je=>Je.id===de.channelId.replace("group_","")))==null?void 0:xt.name)||de.channelId.replace("group_","")}`:((Ge=de.channelId)==null?void 0:Ge.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>kt(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Xl,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>je(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Wr,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===`flag-${de.id}`?null:{id:`flag-${de.id}`,senderId:de.senderId,senderName:de.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(Xv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===`flag-${de.id}`&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),ct.map(Je=>s.jsx("button",{onClick:()=>Tt(Je.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:Je.label},Je.minutes))]})]})]})]},de.id)})})]}),(y==="Main"||y==="Bookmarks"||y==="Resources"&&I||y==="Groups"&&L)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:ye,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(y==="Bookmarks"?Ye:h).map((de,He,xt)=>{var Et;const Ge=de.senderId===t.id,Je=He>0&&xt[He-1].senderId===de.senderId&&new Date(de.timestamp).getTime()-new Date(xt[He-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${Ge?"items-end":"items-start"} ${Je?"mt-1":"mt-4"}`,children:[!Je&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${Ge?"text-indigo-400":"text-gray-300"}`,children:de.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),de.isGlobalPinned&&s.jsx(MR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Ge?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>P(de.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(PR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>we(de.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Et=de.pinnedBy)!=null&&Et.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(kR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Qe(de.id,!!de.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${de.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(MR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>at(de.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})}),de.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===de.id?null:{id:de.id,senderId:de.senderId,senderName:de.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(Xv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===de.id&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),ct.map(Nt=>s.jsx("button",{onClick:()=>Tt(Nt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:Nt.label},Nt.minutes))]})]})]})]}),R===de.id&&s.jsx("div",{ref:ne,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Ge?"right-0":"left-0"}`,children:Y0e.map(Nt=>s.jsx("button",{onClick:()=>be(de.id,Nt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:Nt},Nt))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Ge?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${de.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${de.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:de.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:de.reactions&&Object.entries(de.reactions).map(([Nt,dr])=>{const ge=dr;return ge.length>0&&s.jsxs("button",{onClick:()=>be(de.id,Nt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ge.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[Nt," ",ge.length]},Nt)})})]})]},de.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:te,className:"relative flex items-center gap-2",children:[E&&s.jsx("div",{ref:Z,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:J0e.map(de=>s.jsx("button",{type:"button",onClick:()=>x(He=>He+de),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:de},de))}),s.jsx("button",{type:"button",onClick:()=>O(!E),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(PR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:de=>x(de.target.value),placeholder:rt?"Transmission Disabled":"Type message...",disabled:!re||rt,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!re||rt||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(mE,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function rW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=rW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=rW(t))&&(n&&(n+=" "),n+=e);return n}var V3,BM;function ds(){if(BM)return V3;BM=1;var t=Array.isArray;return V3=t,V3}var F3,$M;function nW(){if($M)return F3;$M=1;var t=typeof hy=="object"&&hy&&hy.Object===Object&&hy;return F3=t,F3}var q3,zM;function ml(){if(zM)return q3;zM=1;var t=nW(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return q3=r,q3}var H3,UM;function Ex(){if(UM)return H3;UM=1;var t=ml(),e=t.Symbol;return H3=e,H3}var G3,VM;function ehe(){if(VM)return G3;VM=1;var t=Ex(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return G3=i,G3}var W3,FM;function the(){if(FM)return W3;FM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return W3=r,W3}var K3,qM;function Sc(){if(qM)return K3;qM=1;var t=Ex(),e=ehe(),r=the(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return K3=o,K3}var Q3,HM;function Nc(){if(HM)return Q3;HM=1;function t(e){return e!=null&&typeof e=="object"}return Q3=t,Q3}var X3,GM;function Kf(){if(GM)return X3;GM=1;var t=Sc(),e=Nc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return X3=n,X3}var Y3,WM;function UE(){if(WM)return Y3;WM=1;var t=ds(),e=Kf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Y3=a,Y3}var J3,KM;function Wu(){if(KM)return J3;KM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return J3=t,J3}var Z3,QM;function VE(){if(QM)return Z3;QM=1;var t=Sc(),e=Wu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return Z3=o,Z3}var eS,XM;function rhe(){if(XM)return eS;XM=1;var t=ml(),e=t["__core-js_shared__"];return eS=e,eS}var tS,YM;function nhe(){if(YM)return tS;YM=1;var t=rhe(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return tS=r,tS}var rS,JM;function aW(){if(JM)return rS;JM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return rS=r,rS}var nS,ZM;function ahe(){if(ZM)return nS;ZM=1;var t=VE(),e=nhe(),r=Wu(),n=aW(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||e(x))return!1;var y=t(x)?p:i;return y.test(n(x))}return nS=m,nS}var aS,eD;function ihe(){if(eD)return aS;eD=1;function t(e,r){return e==null?void 0:e[r]}return aS=t,aS}var iS,tD;function T0(){if(tD)return iS;tD=1;var t=ahe(),e=ihe();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return iS=r,iS}var sS,rD;function aw(){if(rD)return sS;rD=1;var t=T0(),e=t(Object,"create");return sS=e,sS}var oS,nD;function she(){if(nD)return oS;nD=1;var t=aw();function e(){this.__data__=t?t(null):{},this.size=0}return oS=e,oS}var lS,aD;function ohe(){if(aD)return lS;aD=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return lS=t,lS}var cS,iD;function lhe(){if(iD)return cS;iD=1;var t=aw(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return cS=a,cS}var uS,sD;function che(){if(sD)return uS;sD=1;var t=aw(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return uS=n,uS}var dS,oD;function uhe(){if(oD)return dS;oD=1;var t=aw(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return dS=r,dS}var hS,lD;function dhe(){if(lD)return hS;lD=1;var t=she(),e=ohe(),r=lhe(),n=che(),a=uhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,hS=i,hS}var fS,cD;function hhe(){if(cD)return fS;cD=1;function t(){this.__data__=[],this.size=0}return fS=t,fS}var pS,uD;function FE(){if(uD)return pS;uD=1;function t(e,r){return e===r||e!==e&&r!==r}return pS=t,pS}var mS,dD;function iw(){if(dD)return mS;dD=1;var t=FE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return mS=e,mS}var gS,hD;function fhe(){if(hD)return gS;hD=1;var t=iw(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return gS=n,gS}var xS,fD;function phe(){if(fD)return xS;fD=1;var t=iw();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return xS=e,xS}var yS,pD;function mhe(){if(pD)return yS;pD=1;var t=iw();function e(r){return t(this.__data__,r)>-1}return yS=e,yS}var vS,mD;function ghe(){if(mD)return vS;mD=1;var t=iw();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return vS=e,vS}var bS,gD;function sw(){if(gD)return bS;gD=1;var t=hhe(),e=fhe(),r=phe(),n=mhe(),a=ghe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,bS=i,bS}var wS,xD;function qE(){if(xD)return wS;xD=1;var t=T0(),e=ml(),r=t(e,"Map");return wS=r,wS}var SS,yD;function xhe(){if(yD)return SS;yD=1;var t=dhe(),e=sw(),r=qE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return SS=n,SS}var NS,vD;function yhe(){if(vD)return NS;vD=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return NS=t,NS}var _S,bD;function ow(){if(bD)return _S;bD=1;var t=yhe();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return _S=e,_S}var TS,wD;function vhe(){if(wD)return TS;wD=1;var t=ow();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return TS=e,TS}var jS,SD;function bhe(){if(SD)return jS;SD=1;var t=ow();function e(r){return t(this,r).get(r)}return jS=e,jS}var AS,ND;function whe(){if(ND)return AS;ND=1;var t=ow();function e(r){return t(this,r).has(r)}return AS=e,AS}var ES,_D;function She(){if(_D)return ES;_D=1;var t=ow();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return ES=e,ES}var kS,TD;function HE(){if(TD)return kS;TD=1;var t=xhe(),e=vhe(),r=bhe(),n=whe(),a=She();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,kS=i,kS}var CS,jD;function iW(){if(jD)return CS;jD=1;var t=HE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,CS=r,CS}var OS,AD;function Nhe(){if(AD)return OS;AD=1;var t=iW(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return OS=r,OS}var IS,ED;function _he(){if(ED)return IS;ED=1;var t=Nhe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return IS=n,IS}var RS,kD;function GE(){if(kD)return RS;kD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return RS=t,RS}var MS,CD;function The(){if(CD)return MS;CD=1;var t=Ex(),e=GE(),r=ds(),n=Kf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return MS=o,MS}var DS,OD;function sW(){if(OD)return DS;OD=1;var t=The();function e(r){return r==null?"":t(r)}return DS=e,DS}var PS,ID;function oW(){if(ID)return PS;ID=1;var t=ds(),e=UE(),r=_he(),n=sW();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return PS=a,PS}var LS,RD;function lw(){if(RD)return LS;RD=1;var t=Kf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return LS=e,LS}var BS,MD;function WE(){if(MD)return BS;MD=1;var t=oW(),e=lw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return BS=r,BS}var $S,DD;function lW(){if(DD)return $S;DD=1;var t=WE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return $S=e,$S}var jhe=lW();const ao=tn(jhe);var zS,PD;function Ahe(){if(PD)return zS;PD=1;function t(e){return e==null}return zS=t,zS}var Ehe=Ahe();const xr=tn(Ehe);var US,LD;function khe(){if(LD)return US;LD=1;var t=Sc(),e=ds(),r=Nc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return US=a,US}var Che=khe();const d0=tn(Che);var Ohe=VE();const lr=tn(Ohe);var Ihe=Wu();const Qf=tn(Ihe);var VS={exports:{}},on={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BD;function Rhe(){if(BD)return on;BD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),S;S=Symbol.for("react.module.reference");function N(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case o:case d:case x:case m:case i:return w;default:return E}}case e:return E}}}return on.ContextConsumer=o,on.ContextProvider=i,on.Element=t,on.ForwardRef=d,on.Fragment=r,on.Lazy=x,on.Memo=m,on.Portal=e,on.Profiler=a,on.StrictMode=n,on.Suspense=h,on.SuspenseList=p,on.isAsyncMode=function(){return!1},on.isConcurrentMode=function(){return!1},on.isContextConsumer=function(w){return N(w)===o},on.isContextProvider=function(w){return N(w)===i},on.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},on.isForwardRef=function(w){return N(w)===d},on.isFragment=function(w){return N(w)===r},on.isLazy=function(w){return N(w)===x},on.isMemo=function(w){return N(w)===m},on.isPortal=function(w){return N(w)===e},on.isProfiler=function(w){return N(w)===a},on.isStrictMode=function(w){return N(w)===n},on.isSuspense=function(w){return N(w)===h},on.isSuspenseList=function(w){return N(w)===p},on.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===y||typeof w=="object"&&w!==null&&(w.$$typeof===x||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===S||w.getModuleId!==void 0)},on.typeOf=N,on}var $D;function Mhe(){return $D||($D=1,VS.exports=Rhe()),VS.exports}var Dhe=Mhe(),FS,zD;function cW(){if(zD)return FS;zD=1;var t=Sc(),e=Nc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return FS=n,FS}var qS,UD;function Phe(){if(UD)return qS;UD=1;var t=cW();function e(r){return t(r)&&r!=+r}return qS=e,qS}var Lhe=Phe();const kx=tn(Lhe);var Bhe=cW();const $he=tn(Bhe);var jo=function(e){return e===0?0:e>0?1:-1},Ld=function(e){return d0(e)&&e.indexOf("%")===e.length-1},wt=function(e){return $he(e)&&!kx(e)},zhe=function(e){return xr(e)},Fa=function(e){return wt(e)||d0(e)},Uhe=0,Cx=function(e){var r=++Uhe;return"".concat(e||"").concat(r)},Ao=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!wt(e)&&!d0(e))return n;var i;if(Ld(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return kx(i)&&(i=n),a&&i>r&&(i=r),i},mu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Vhe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ts=function(e,r){return wt(e)&&wt(r)?function(n){return e+n*(r-e)}:function(){return r}};function sb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ao(n,e))===r})}var Fhe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var x=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:x,b:(a-x*n)/r}},qhe=function(e,r){return wt(e)&&wt(r)?e-r:d0(e)&&d0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Bh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function uj(t){"@babel/helpers - typeof";return uj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uj(t)}var Hhe=["viewBox","children"],Ghe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],VD=["points","pathLength"],HS={svg:Hhe,polygon:VD,polyline:VD},KE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ob=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!Qf(n))return null;var a={};return Object.keys(n).forEach(function(i){KE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Whe=function(e,r,n){return function(a){return e(r,n,a),null}},h0=function(e,r,n){if(!Qf(e)||uj(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];KE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Whe(o,r,n))}),a},Khe=["children"],Qhe=["children"];function FD(t,e){if(t==null)return{};var r=Xhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},nc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},HD=null,GS=null,QE=function t(e){if(e===HD&&Array.isArray(GS))return GS;var r=[];return T.Children.forEach(e,function(n){xr(n)||(Dhe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),GS=r,HD=e,r};function Rs(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return nc(a)}):n=[nc(e)],QE(t).forEach(function(a){var i=ao(a,"type.displayName")||ao(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function js(t,e){var r=Rs(t,e);return r&&r[0]}var GD=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!wt(n)||n<=0||!wt(a)||a<=0)},Yhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Jhe=function(e){return e&&e.type&&d0(e.type)&&Yhe.indexOf(e.type)>=0},Zhe=function(e,r,n,a){var i,o=(i=HS==null?void 0:HS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!lr(e)&&(a&&o.includes(r)||Ghe.includes(r))||n&&KE.includes(r)},Qt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(T.isValidElement(e)&&(a=e.props),!Qf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;Zhe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},dj=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return WD(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!WD(i,o))return!1}return!0},WD=function(e,r){if(xr(e)&&xr(r))return!0;if(!xr(e)&&!xr(r)){var n=e.props||{},a=n.children,i=FD(n,Khe),o=r.props||{},c=o.children,d=FD(o,Qhe);return a&&c?Bh(i,d)&&dj(a,c):!a&&!c?Bh(i,d):!1}return!1},KD=function(e,r){var n=[],a={};return QE(e).forEach(function(i,o){if(Jhe(i))n.push(i);else if(i){var c=nc(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},efe=function(e){var r=e&&e.type;return r&&qD[r]?qD[r]:null},tfe=function(e,r){return QE(r).indexOf(e)},rfe=["children","width","height","viewBox","className","style","title","desc"];function hj(){return hj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hj.apply(this,arguments)}function nfe(t,e){if(t==null)return{};var r=afe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function afe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fj(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=nfe(t,rfe),p=a||{width:r,height:n,x:0,y:0},m=wr("recharts-surface",i);return ie.createElement("svg",hj({},Qt(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),ie.createElement("title",null,c),ie.createElement("desc",null,d),e)}var ife=["children","className"];function pj(){return pj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pj.apply(this,arguments)}function sfe(t,e){if(t==null)return{};var r=ofe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ofe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Qr=ie.forwardRef(function(t,e){var r=t.children,n=t.className,a=sfe(t,ife),i=wr("recharts-layer",n);return ie.createElement("g",pj({className:i},Qt(a,!0),{ref:e}),r)}),ac=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},WS,QD;function lfe(){if(QD)return WS;QD=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return WS=t,WS}var KS,XD;function cfe(){if(XD)return KS;XD=1;var t=lfe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return KS=e,KS}var QS,YD;function uW(){if(YD)return QS;YD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return QS=d,QS}var XS,JD;function ufe(){if(JD)return XS;JD=1;function t(e){return e.split("")}return XS=t,XS}var YS,ZD;function dfe(){if(ZD)return YS;ZD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",S=h+"?",N="["+i+"]?",w="(?:"+y+"(?:"+[p,m,x].join("|")+")"+N+S+")*",E=N+S+w,O="(?:"+[p+c+"?",c,m,x,o].join("|")+")",R=RegExp(d+"(?="+d+")|"+O+E,"g");function P(I){return I.match(R)||[]}return YS=P,YS}var JS,eP;function hfe(){if(eP)return JS;eP=1;var t=ufe(),e=uW(),r=dfe();function n(a){return e(a)?r(a):t(a)}return JS=n,JS}var ZS,tP;function ffe(){if(tP)return ZS;tP=1;var t=cfe(),e=uW(),r=hfe(),n=sW();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return ZS=a,ZS}var e6,rP;function pfe(){if(rP)return e6;rP=1;var t=ffe(),e=t("toUpperCase");return e6=e,e6}var mfe=pfe();const cw=tn(mfe);function Pn(t){return function(){return t}}const dW=Math.cos,lb=Math.sin,Do=Math.sqrt,cb=Math.PI,uw=2*cb,mj=Math.PI,gj=2*mj,kd=1e-6,gfe=gj-kd;function hW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function xfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hW;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class yfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hW:xfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,x=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>kd)if(!(Math.abs(m*d-h*p)>kd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,S=a-c,N=d*d+h*h,w=y*y+S*S,E=Math.sqrt(N),O=Math.sqrt(x),R=i*Math.tan((mj-Math.acos((N+x-w)/(2*E*O)))/2),P=R/O,I=R/E;Math.abs(P-1)>kd&&this._append`L${e+P*p},${r+P*m}`,this._append`A${i},${i},0,0,${+(m*y>p*S)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>kd||Math.abs(this._y1-p)>kd)&&this._append`L${h},${p}`,n&&(x<0&&(x=x%gj+gj),x>gfe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:x>kd&&this._append`A${n},${n},0,${+(x>=mj)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function XE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new yfe(e)}function YE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fW(t){this._context=t}fW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dw(t){return new fW(t)}function pW(t){return t[0]}function mW(t){return t[1]}function gW(t,e){var r=Pn(!0),n=null,a=dw,i=null,o=XE(c);t=typeof t=="function"?t:t===void 0?pW:Pn(t),e=typeof e=="function"?e:e===void 0?mW:Pn(e);function c(d){var h,p=(d=YE(d)).length,m,x=!1,y;for(n==null&&(i=a(y=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(m,h,d),+e(m,h,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Pn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Pn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Pn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function Py(t,e,r){var n=null,a=Pn(!0),i=null,o=dw,c=null,d=XE(h);t=typeof t=="function"?t:t===void 0?pW:Pn(+t),e=typeof e=="function"?e:Pn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?mW:Pn(+r);function h(m){var x,y,S,N=(m=YE(m)).length,w,E=!1,O,R=new Array(N),P=new Array(N);for(i==null&&(c=o(O=d())),x=0;x<=N;++x){if(!(x<N&&a(w=m[x],x,m))===E)if(E=!E)y=x,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),S=x-1;S>=y;--S)c.point(R[S],P[S]);c.lineEnd(),c.areaEnd()}E&&(R[x]=+t(w,x,m),P[x]=+e(w,x,m),c.point(n?+n(w,x,m):R[x],r?+r(w,x,m):P[x]))}if(O)return c=null,O+""||null}function p(){return gW().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Pn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Pn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Pn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Pn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Pn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Pn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Pn(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class xW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function vfe(t){return new xW(t,!0)}function bfe(t){return new xW(t,!1)}const JE={draw(t,e){const r=Do(e/cb);t.moveTo(r,0),t.arc(0,0,r,0,uw)}},wfe={draw(t,e){const r=Do(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},yW=Do(1/3),Sfe=yW*2,Nfe={draw(t,e){const r=Do(e/Sfe),n=r*yW;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},_fe={draw(t,e){const r=Do(e),n=-r/2;t.rect(n,n,r,r)}},Tfe=.8908130915292852,vW=lb(cb/10)/lb(7*cb/10),jfe=lb(uw/10)*vW,Afe=-dW(uw/10)*vW,Efe={draw(t,e){const r=Do(e*Tfe),n=jfe*r,a=Afe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=uw*i/5,c=dW(o),d=lb(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},t6=Do(3),kfe={draw(t,e){const r=-Do(e/(t6*3));t.moveTo(0,r*2),t.lineTo(-t6*r,-r),t.lineTo(t6*r,-r),t.closePath()}},Qs=-.5,Xs=Do(3)/2,xj=1/Do(12),Cfe=(xj/2+1)*3,Ofe={draw(t,e){const r=Do(e/Cfe),n=r/2,a=r*xj,i=n,o=r*xj+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Qs*n-Xs*a,Xs*n+Qs*a),t.lineTo(Qs*i-Xs*o,Xs*i+Qs*o),t.lineTo(Qs*c-Xs*d,Xs*c+Qs*d),t.lineTo(Qs*n+Xs*a,Qs*a-Xs*n),t.lineTo(Qs*i+Xs*o,Qs*o-Xs*i),t.lineTo(Qs*c+Xs*d,Qs*d-Xs*c),t.closePath()}};function Ife(t,e){let r=null,n=XE(a);t=typeof t=="function"?t:Pn(t||JE),e=typeof e=="function"?e:Pn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Pn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Pn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function ub(){}function db(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function bW(t){this._context=t}bW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:db(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rfe(t){return new bW(t)}function wW(t){this._context=t}wW.prototype={areaStart:ub,areaEnd:ub,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mfe(t){return new wW(t)}function SW(t){this._context=t}SW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dfe(t){return new SW(t)}function NW(t){this._context=t}NW.prototype={areaStart:ub,areaEnd:ub,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Pfe(t){return new NW(t)}function nP(t){return t<0?-1:1}function aP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(nP(i)+nP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function iP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function r6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function hb(t){this._context=t}hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:r6(this,this._t0,iP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,r6(this,iP(this,r=aP(this,t,e)),r);break;default:r6(this,this._t0,r=aP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function _W(t){this._context=new TW(t)}(_W.prototype=Object.create(hb.prototype)).point=function(t,e){hb.prototype.point.call(this,e,t)};function TW(t){this._context=t}TW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function Lfe(t){return new hb(t)}function Bfe(t){return new _W(t)}function jW(t){this._context=t}jW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=sP(t),a=sP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function sP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function $fe(t){return new jW(t)}function hw(t,e){this._context=t,this._t=e}hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function zfe(t){return new hw(t,.5)}function Ufe(t){return new hw(t,0)}function Vfe(t){return new hw(t,1)}function lf(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function yj(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ffe(t,e){return t[e]}function qfe(t){const e=[];return e.key=t,e}function Hfe(){var t=Pn([]),e=yj,r=lf,n=Ffe;function a(i){var o=Array.from(t.apply(this,arguments),qfe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=YE(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Pn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Pn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?yj:typeof i=="function"?i:Pn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??lf,a):r},a}function Gfe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}lf(t,e)}}function Wfe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}lf(t,e)}}function Kfe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,x=p[n-1][1]||0,y=(m-x)/2,S=0;S<c;++S){var N=t[e[S]],w=N[n][1]||0,E=N[n-1][1]||0;y+=w-E}d+=m,h+=y*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,lf(t,e)}}function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}var Qfe=["type","size","sizeType"];function vj(){return vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vj.apply(this,arguments)}function oP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(r),!0).forEach(function(n){Xfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xfe(t,e,r){return e=Yfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yfe(t){var e=Jfe(t,"string");return gg(e)=="symbol"?e:e+""}function Jfe(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zfe(t,e){if(t==null)return{};var r=epe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function epe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var AW={symbolCircle:JE,symbolCross:wfe,symbolDiamond:Nfe,symbolSquare:_fe,symbolStar:Efe,symbolTriangle:kfe,symbolWye:Ofe},tpe=Math.PI/180,rpe=function(e){var r="symbol".concat(cw(e));return AW[r]||JE},npe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*tpe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ape=function(e,r){AW["symbol".concat(cw(e))]=r},fw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=Zfe(e,Qfe),h=lP(lP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=rpe(n),E=Ife().type(w).size(npe(i,c,n));return E()},m=h.className,x=h.cx,y=h.cy,S=Qt(h,!0);return x===+x&&y===+y&&i===+i?ie.createElement("path",vj({},S,{className:wr("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(y,")"),d:p()})):null};fw.registerSymbol=ape;function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bj.apply(this,arguments)}function cP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ipe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(r),!0).forEach(function(n){xg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function spe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ope(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kW(n.key),n)}}function lpe(t,e,r){return e&&ope(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cpe(t,e,r){return e=fb(e),upe(t,EW()?Reflect.construct(e,r||[],fb(t).constructor):e.apply(t,r))}function upe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dpe(t)}function dpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EW=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fb(t)}function hpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wj(t,e)}function wj(t,e){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wj(t,e)}function xg(t,e,r){return e=kW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kW(t){var e=fpe(t,"string");return cf(e)=="symbol"?e:e+""}function fpe(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ys=32,ZE=(function(t){function e(){return spe(this,e),cpe(this,e,arguments)}return hpe(e,t),lpe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ys/2,o=Ys/6,c=Ys/3,d=n.inactive?a:n.color;if(n.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ys,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ys,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ie.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ys/8,"h").concat(Ys,"v").concat(Ys*3/4,"h").concat(-Ys,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(n.legendIcon)){var h=ipe({},n);return delete h.legendIcon,ie.cloneElement(n.legendIcon,h)}return ie.createElement(fw,{fill:d,cx:i,cy:i,size:Ys,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Ys,height:Ys},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,S){var N=y.formatter||d,w=wr(xg(xg({"recharts-legend-item":!0},"legend-item-".concat(S),!0),"inactive",y.inactive));if(y.type==="none")return null;var E=lr(y.value)?null:y.value;ac(!lr(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var O=y.inactive?h:y.color;return ie.createElement("li",bj({className:w,style:m,key:"legend-item-".concat(S)},h0(n.props,y,S)),ie.createElement(fj,{width:o,height:o,viewBox:p,style:x},n.renderIcon(y)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:O}},N?N(E,y,S):E))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(T.PureComponent);xg(ZE,"displayName","Legend");xg(ZE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var n6,uP;function ppe(){if(uP)return n6;uP=1;var t=sw();function e(){this.__data__=new t,this.size=0}return n6=e,n6}var a6,dP;function mpe(){if(dP)return a6;dP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return a6=t,a6}var i6,hP;function gpe(){if(hP)return i6;hP=1;function t(e){return this.__data__.get(e)}return i6=t,i6}var s6,fP;function xpe(){if(fP)return s6;fP=1;function t(e){return this.__data__.has(e)}return s6=t,s6}var o6,pP;function ype(){if(pP)return o6;pP=1;var t=sw(),e=qE(),r=HE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return o6=a,o6}var l6,mP;function CW(){if(mP)return l6;mP=1;var t=sw(),e=ppe(),r=mpe(),n=gpe(),a=xpe(),i=ype();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,l6=o,l6}var c6,gP;function vpe(){if(gP)return c6;gP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return c6=e,c6}var u6,xP;function bpe(){if(xP)return u6;xP=1;function t(e){return this.__data__.has(e)}return u6=t,u6}var d6,yP;function OW(){if(yP)return d6;yP=1;var t=HE(),e=vpe(),r=bpe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,d6=n,d6}var h6,vP;function IW(){if(vP)return h6;vP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return h6=t,h6}var f6,bP;function RW(){if(bP)return f6;bP=1;function t(e,r){return e.has(r)}return f6=t,f6}var p6,wP;function MW(){if(wP)return p6;wP=1;var t=OW(),e=IW(),r=RW(),n=1,a=2;function i(o,c,d,h,p,m){var x=d&n,y=o.length,S=c.length;if(y!=S&&!(x&&S>y))return!1;var N=m.get(o),w=m.get(c);if(N&&w)return N==c&&w==o;var E=-1,O=!0,R=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++E<y;){var P=o[E],I=c[E];if(h)var k=x?h(I,P,E,c,o,m):h(P,I,E,o,c,m);if(k!==void 0){if(k)continue;O=!1;break}if(R){if(!e(c,function(A,j){if(!r(R,j)&&(P===A||p(P,A,d,h,m)))return R.push(j)})){O=!1;break}}else if(!(P===I||p(P,I,d,h,m))){O=!1;break}}return m.delete(o),m.delete(c),O}return p6=i,p6}var m6,SP;function wpe(){if(SP)return m6;SP=1;var t=ml(),e=t.Uint8Array;return m6=e,m6}var g6,NP;function Spe(){if(NP)return g6;NP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return g6=t,g6}var x6,_P;function e7(){if(_P)return x6;_P=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return x6=t,x6}var y6,TP;function Npe(){if(TP)return y6;TP=1;var t=Ex(),e=wpe(),r=FE(),n=MW(),a=Spe(),i=e7(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",N="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",O="[object DataView]",R=t?t.prototype:void 0,P=R?R.valueOf:void 0;function I(k,A,j,C,U,L,$){switch(j){case O:if(k.byteLength!=A.byteLength||k.byteOffset!=A.byteOffset)return!1;k=k.buffer,A=A.buffer;case E:return!(k.byteLength!=A.byteLength||!L(new e(k),new e(A)));case d:case h:case x:return r(+k,+A);case p:return k.name==A.name&&k.message==A.message;case y:case N:return k==A+"";case m:var B=a;case S:var G=C&o;if(B||(B=i),k.size!=A.size&&!G)return!1;var K=$.get(k);if(K)return K==A;C|=c,$.set(k,A);var H=n(B(k),B(A),C,U,L,$);return $.delete(k),H;case w:if(P)return P.call(k)==P.call(A)}return!1}return y6=I,y6}var v6,jP;function DW(){if(jP)return v6;jP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return v6=t,v6}var b6,AP;function _pe(){if(AP)return b6;AP=1;var t=DW(),e=ds();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return b6=r,b6}var w6,EP;function Tpe(){if(EP)return w6;EP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return w6=t,w6}var S6,kP;function jpe(){if(kP)return S6;kP=1;function t(){return[]}return S6=t,S6}var N6,CP;function Ape(){if(CP)return N6;CP=1;var t=Tpe(),e=jpe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return N6=i,N6}var _6,OP;function Epe(){if(OP)return _6;OP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return _6=t,_6}var T6,IP;function kpe(){if(IP)return T6;IP=1;var t=Sc(),e=Nc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return T6=n,T6}var j6,RP;function t7(){if(RP)return j6;RP=1;var t=kpe(),e=Nc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return j6=i,j6}var wm={exports:{}},A6,MP;function Cpe(){if(MP)return A6;MP=1;function t(){return!1}return A6=t,A6}wm.exports;var DP;function PW(){return DP||(DP=1,(function(t,e){var r=ml(),n=Cpe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(wm,wm.exports)),wm.exports}var E6,PP;function r7(){if(PP)return E6;PP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return E6=r,E6}var k6,LP;function n7(){if(LP)return k6;LP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return k6=e,k6}var C6,BP;function Ope(){if(BP)return C6;BP=1;var t=Sc(),e=n7(),r=Nc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",x="[object RegExp]",y="[object Set]",S="[object String]",N="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",P="[object Int8Array]",I="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",U="[object Uint32Array]",L={};L[O]=L[R]=L[P]=L[I]=L[k]=L[A]=L[j]=L[C]=L[U]=!0,L[n]=L[a]=L[w]=L[i]=L[E]=L[o]=L[c]=L[d]=L[h]=L[p]=L[m]=L[x]=L[y]=L[S]=L[N]=!1;function $(B){return r(B)&&e(B.length)&&!!L[t(B)]}return C6=$,C6}var O6,$P;function LW(){if($P)return O6;$P=1;function t(e){return function(r){return e(r)}}return O6=t,O6}var Sm={exports:{}};Sm.exports;var zP;function Ipe(){return zP||(zP=1,(function(t,e){var r=nW(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(Sm,Sm.exports)),Sm.exports}var I6,UP;function BW(){if(UP)return I6;UP=1;var t=Ope(),e=LW(),r=Ipe(),n=r&&r.isTypedArray,a=n?e(n):t;return I6=a,I6}var R6,VP;function Rpe(){if(VP)return R6;VP=1;var t=Epe(),e=t7(),r=ds(),n=PW(),a=r7(),i=BW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),x=!m&&e(h),y=!m&&!x&&n(h),S=!m&&!x&&!y&&i(h),N=m||x||y||S,w=N?t(h.length,String):[],E=w.length;for(var O in h)(p||c.call(h,O))&&!(N&&(O=="length"||y&&(O=="offset"||O=="parent")||S&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||a(O,E)))&&w.push(O);return w}return R6=d,R6}var M6,FP;function Mpe(){if(FP)return M6;FP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return M6=e,M6}var D6,qP;function $W(){if(qP)return D6;qP=1;function t(e,r){return function(n){return e(r(n))}}return D6=t,D6}var P6,HP;function Dpe(){if(HP)return P6;HP=1;var t=$W(),e=t(Object.keys,Object);return P6=e,P6}var L6,GP;function Ppe(){if(GP)return L6;GP=1;var t=Mpe(),e=Dpe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return L6=a,L6}var B6,WP;function Ox(){if(WP)return B6;WP=1;var t=VE(),e=n7();function r(n){return n!=null&&e(n.length)&&!t(n)}return B6=r,B6}var $6,KP;function pw(){if(KP)return $6;KP=1;var t=Rpe(),e=Ppe(),r=Ox();function n(a){return r(a)?t(a):e(a)}return $6=n,$6}var z6,QP;function Lpe(){if(QP)return z6;QP=1;var t=_pe(),e=Ape(),r=pw();function n(a){return t(a,r,e)}return z6=n,z6}var U6,XP;function Bpe(){if(XP)return U6;XP=1;var t=Lpe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,x=t(i),y=x.length,S=t(o),N=S.length;if(y!=N&&!m)return!1;for(var w=y;w--;){var E=x[w];if(!(m?E in o:n.call(o,E)))return!1}var O=p.get(i),R=p.get(o);if(O&&R)return O==o&&R==i;var P=!0;p.set(i,o),p.set(o,i);for(var I=m;++w<y;){E=x[w];var k=i[E],A=o[E];if(d)var j=m?d(A,k,E,o,i,p):d(k,A,E,i,o,p);if(!(j===void 0?k===A||h(k,A,c,d,p):j)){P=!1;break}I||(I=E=="constructor")}if(P&&!I){var C=i.constructor,U=o.constructor;C!=U&&"constructor"in i&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof U=="function"&&U instanceof U)&&(P=!1)}return p.delete(i),p.delete(o),P}return U6=a,U6}var V6,YP;function $pe(){if(YP)return V6;YP=1;var t=T0(),e=ml(),r=t(e,"DataView");return V6=r,V6}var F6,JP;function zpe(){if(JP)return F6;JP=1;var t=T0(),e=ml(),r=t(e,"Promise");return F6=r,F6}var q6,ZP;function zW(){if(ZP)return q6;ZP=1;var t=T0(),e=ml(),r=t(e,"Set");return q6=r,q6}var H6,eL;function Upe(){if(eL)return H6;eL=1;var t=T0(),e=ml(),r=t(e,"WeakMap");return H6=r,H6}var G6,tL;function Vpe(){if(tL)return G6;tL=1;var t=$pe(),e=qE(),r=zpe(),n=zW(),a=Upe(),i=Sc(),o=aW(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",x="[object DataView]",y=o(t),S=o(e),N=o(r),w=o(n),E=o(a),O=i;return(t&&O(new t(new ArrayBuffer(1)))!=x||e&&O(new e)!=c||r&&O(r.resolve())!=h||n&&O(new n)!=p||a&&O(new a)!=m)&&(O=function(R){var P=i(R),I=P==d?R.constructor:void 0,k=I?o(I):"";if(k)switch(k){case y:return x;case S:return c;case N:return h;case w:return p;case E:return m}return P}),G6=O,G6}var W6,rL;function Fpe(){if(rL)return W6;rL=1;var t=CW(),e=MW(),r=Npe(),n=Bpe(),a=Vpe(),i=ds(),o=PW(),c=BW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",x=Object.prototype,y=x.hasOwnProperty;function S(N,w,E,O,R,P){var I=i(N),k=i(w),A=I?p:a(N),j=k?p:a(w);A=A==h?m:A,j=j==h?m:j;var C=A==m,U=j==m,L=A==j;if(L&&o(N)){if(!o(w))return!1;I=!0,C=!1}if(L&&!C)return P||(P=new t),I||c(N)?e(N,w,E,O,R,P):r(N,w,A,E,O,R,P);if(!(E&d)){var $=C&&y.call(N,"__wrapped__"),B=U&&y.call(w,"__wrapped__");if($||B){var G=$?N.value():N,K=B?w.value():w;return P||(P=new t),R(G,K,E,O,P)}}return L?(P||(P=new t),n(N,w,E,O,R,P)):!1}return W6=S,W6}var K6,nL;function a7(){if(nL)return K6;nL=1;var t=Fpe(),e=Nc();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return K6=r,K6}var Q6,aL;function qpe(){if(aL)return Q6;aL=1;var t=CW(),e=a7(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var x=c[h];if(m&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<p;){x=c[h];var y=x[0],S=i[y],N=x[1];if(m&&x[2]){if(S===void 0&&!(y in i))return!1}else{var w=new t;if(d)var E=d(S,N,y,i,o,w);if(!(E===void 0?e(N,S,r|n,d,w):E))return!1}}return!0}return Q6=a,Q6}var X6,iL;function UW(){if(iL)return X6;iL=1;var t=Wu();function e(r){return r===r&&!t(r)}return X6=e,X6}var Y6,sL;function Hpe(){if(sL)return Y6;sL=1;var t=UW(),e=pw();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return Y6=r,Y6}var J6,oL;function VW(){if(oL)return J6;oL=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return J6=t,J6}var Z6,lL;function Gpe(){if(lL)return Z6;lL=1;var t=qpe(),e=Hpe(),r=VW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return Z6=n,Z6}var eN,cL;function Wpe(){if(cL)return eN;cL=1;function t(e,r){return e!=null&&r in Object(e)}return eN=t,eN}var tN,uL;function Kpe(){if(uL)return tN;uL=1;var t=oW(),e=t7(),r=ds(),n=r7(),a=n7(),i=lw();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,x=!1;++p<m;){var y=i(d[p]);if(!(x=c!=null&&h(c,y)))break;c=c[y]}return x||++p!=m?x:(m=c==null?0:c.length,!!m&&a(m)&&n(y,m)&&(r(c)||e(c)))}return tN=o,tN}var rN,dL;function Qpe(){if(dL)return rN;dL=1;var t=Wpe(),e=Kpe();function r(n,a){return n!=null&&e(n,a,t)}return rN=r,rN}var nN,hL;function Xpe(){if(hL)return nN;hL=1;var t=a7(),e=lW(),r=Qpe(),n=UE(),a=UW(),i=VW(),o=lw(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(x){var y=e(x,p);return y===void 0&&y===m?r(x,p):t(m,y,c|d)}}return nN=h,nN}var aN,fL;function Xf(){if(fL)return aN;fL=1;function t(e){return e}return aN=t,aN}var iN,pL;function Ype(){if(pL)return iN;pL=1;function t(e){return function(r){return r==null?void 0:r[e]}}return iN=t,iN}var sN,mL;function Jpe(){if(mL)return sN;mL=1;var t=WE();function e(r){return function(n){return t(n,r)}}return sN=e,sN}var oN,gL;function Zpe(){if(gL)return oN;gL=1;var t=Ype(),e=Jpe(),r=UE(),n=lw();function a(i){return r(i)?t(n(i)):e(i)}return oN=a,oN}var lN,xL;function gl(){if(xL)return lN;xL=1;var t=Gpe(),e=Xpe(),r=Xf(),n=ds(),a=Zpe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return lN=i,lN}var cN,yL;function FW(){if(yL)return cN;yL=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return cN=t,cN}var uN,vL;function eme(){if(vL)return uN;vL=1;function t(e){return e!==e}return uN=t,uN}var dN,bL;function tme(){if(bL)return dN;bL=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return dN=t,dN}var hN,wL;function rme(){if(wL)return hN;wL=1;var t=FW(),e=eme(),r=tme();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return hN=n,hN}var fN,SL;function nme(){if(SL)return fN;SL=1;var t=rme();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return fN=e,fN}var pN,NL;function ame(){if(NL)return pN;NL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return pN=t,pN}var mN,_L;function ime(){if(_L)return mN;_L=1;function t(){}return mN=t,mN}var gN,TL;function sme(){if(TL)return gN;TL=1;var t=zW(),e=ime(),r=e7(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return gN=a,gN}var xN,jL;function ome(){if(jL)return xN;jL=1;var t=OW(),e=nme(),r=ame(),n=RW(),a=sme(),i=e7(),o=200;function c(d,h,p){var m=-1,x=e,y=d.length,S=!0,N=[],w=N;if(p)S=!1,x=r;else if(y>=o){var E=h?null:a(d);if(E)return i(E);S=!1,x=n,w=new t}else w=h?[]:N;e:for(;++m<y;){var O=d[m],R=h?h(O):O;if(O=p||O!==0?O:0,S&&R===R){for(var P=w.length;P--;)if(w[P]===R)continue e;h&&w.push(R),N.push(O)}else x(w,R,p)||(w!==N&&w.push(R),N.push(O))}return N}return xN=c,xN}var yN,AL;function lme(){if(AL)return yN;AL=1;var t=gl(),e=ome();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return yN=r,yN}var cme=lme();const EL=tn(cme);function qW(t,e,r){return e===!0?EL(t,r):lr(e)?EL(t,e):t}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}var ume=["ref"];function kL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $l(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(r),!0).forEach(function(n){mw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GW(n.key),n)}}function hme(t,e,r){return e&&CL(t.prototype,e),r&&CL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fme(t,e,r){return e=pb(e),pme(t,HW()?Reflect.construct(e,r||[],pb(t).constructor):e.apply(t,r))}function pme(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mme(t)}function mme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function pb(t){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pb(t)}function gme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}function Sj(t,e){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Sj(t,e)}function mw(t,e,r){return e=GW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GW(t){var e=xme(t,"string");return uf(e)=="symbol"?e:e+""}function xme(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function yme(t,e){if(t==null)return{};var r=vme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bme(t){return t.value}function wme(t,e){if(ie.isValidElement(t))return ie.cloneElement(t,e);if(typeof t=="function")return ie.createElement(t,e);e.ref;var r=yme(e,ume);return ie.createElement(ZE,r)}var OL=1,$h=(function(t){function e(){var r;dme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=fme(this,e,[].concat(a)),mw(r,"lastBoundingBox",{width:-1,height:-1}),r}return gme(e,t),hme(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>OL||Math.abs(a.height-this.lastBoundingBox.height)>OL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$l({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();m={left:((h||0)-y.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var S=this.getBBoxSnapshot();x={top:((p||0)-S.height)/2}}else x=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return $l($l({},m),x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=$l($l({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ie.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){n.wrapperNode=y}},wme(i,$l($l({},this.props),{},{payload:qW(p,h,bme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=$l($l({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&wt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(T.PureComponent);mw($h,"displayName","Legend");mw($h,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vN,IL;function Sme(){if(IL)return vN;IL=1;var t=Ex(),e=t7(),r=ds(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return vN=a,vN}var bN,RL;function WW(){if(RL)return bN;RL=1;var t=DW(),e=Sme();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return bN=r,bN}var wN,ML;function Nme(){if(ML)return wN;ML=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return wN=t,wN}var SN,DL;function _me(){if(DL)return SN;DL=1;var t=Nme(),e=t();return SN=e,SN}var NN,PL;function KW(){if(PL)return NN;PL=1;var t=_me(),e=pw();function r(n,a){return n&&t(n,a,e)}return NN=r,NN}var _N,LL;function Tme(){if(LL)return _N;LL=1;var t=Ox();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return _N=e,_N}var TN,BL;function i7(){if(BL)return TN;BL=1;var t=KW(),e=Tme(),r=e(t);return TN=r,TN}var jN,$L;function QW(){if($L)return jN;$L=1;var t=i7(),e=Ox();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return jN=r,jN}var AN,zL;function jme(){if(zL)return AN;zL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return AN=t,AN}var EN,UL;function Ame(){if(UL)return EN;UL=1;var t=Kf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return EN=e,EN}var kN,VL;function Eme(){if(VL)return kN;VL=1;var t=Ame();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return kN=e,kN}var CN,FL;function kme(){if(FL)return CN;FL=1;var t=GE(),e=WE(),r=gl(),n=QW(),a=jme(),i=LW(),o=Eme(),c=Xf(),d=ds();function h(p,m,x){m.length?m=t(m,function(N){return d(N)?function(w){return e(w,N.length===1?N[0]:N)}:N}):m=[c];var y=-1;m=t(m,i(r));var S=n(p,function(N,w,E){var O=t(m,function(R){return R(N)});return{criteria:O,index:++y,value:N}});return a(S,function(N,w){return o(N,w,x)})}return CN=h,CN}var ON,qL;function Cme(){if(qL)return ON;qL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return ON=t,ON}var IN,HL;function Ome(){if(HL)return IN;HL=1;var t=Cme(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return IN=r,IN}var RN,GL;function Ime(){if(GL)return RN;GL=1;function t(e){return function(){return e}}return RN=t,RN}var MN,WL;function XW(){if(WL)return MN;WL=1;var t=T0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return MN=e,MN}var DN,KL;function Rme(){if(KL)return DN;KL=1;var t=Ime(),e=XW(),r=Xf(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return DN=n,DN}var PN,QL;function Mme(){if(QL)return PN;QL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return PN=n,PN}var LN,XL;function Dme(){if(XL)return LN;XL=1;var t=Rme(),e=Mme(),r=e(t);return LN=r,LN}var BN,YL;function Pme(){if(YL)return BN;YL=1;var t=Xf(),e=Ome(),r=Dme();function n(a,i){return r(e(a,i,t),a+"")}return BN=n,BN}var $N,JL;function gw(){if(JL)return $N;JL=1;var t=FE(),e=Ox(),r=r7(),n=Wu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return $N=a,$N}var zN,ZL;function Lme(){if(ZL)return zN;ZL=1;var t=WW(),e=kme(),r=Pme(),n=gw(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return zN=a,zN}var Bme=Lme();const s7=tn(Bme);function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nj.apply(this,arguments)}function $me(t,e){return Fme(t)||Vme(t,e)||Ume(t,e)||zme()}function zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ume(t,e){if(t){if(typeof t=="string")return eB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eB(t,e)}}function eB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Fme(t){if(Array.isArray(t))return t}function tB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(r),!0).forEach(function(n){qme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qme(t,e,r){return e=Hme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hme(t){var e=Gme(t,"string");return yg(e)=="symbol"?e:e+""}function Gme(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wme(t){return Array.isArray(t)&&Fa(t[0])&&Fa(t[1])?t.join(" ~ "):t}var Kme=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,x=e.itemSorter,y=e.wrapperClassName,S=e.labelClassName,N=e.label,w=e.labelFormatter,E=e.accessibilityLayer,O=E===void 0?!1:E,R=function(){if(p&&p.length){var $={padding:0,margin:0},B=(x?s7(p,x):p).map(function(G,K){if(G.type==="none")return null;var H=UN({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},c),Z=G.formatter||m||Wme,ne=G.value,ce=G.name,he=ne,Y=ce;if(Z&&he!=null&&Y!=null){var ae=Z(ne,ce,G,K,p);if(Array.isArray(ae)){var re=$me(ae,2);he=re[0],Y=re[1]}else he=ae}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},Fa(Y)?ie.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Fa(Y)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},he),ie.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},P=UN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),I=UN({margin:0},h),k=!xr(N),A=k?N:"",j=wr("recharts-default-tooltip",y),C=wr("recharts-tooltip-label",S);k&&w&&p!==void 0&&p!==null&&(A=w(N,p));var U=O?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",Nj({className:j,style:P},U),ie.createElement("p",{className:C,style:I},ie.isValidElement(A)?A:"".concat(A)),R())};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function Ly(t,e,r){return e=Qme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qme(t){var e=Xme(t,"string");return vg(e)=="symbol"?e:e+""}function Xme(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var am="recharts-tooltip-wrapper",Yme={visibility:"hidden"};function Jme(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return wr(am,Ly(Ly(Ly(Ly({},"".concat(am,"-right"),wt(r)&&e&&wt(e.x)&&r>=e.x),"".concat(am,"-left"),wt(r)&&e&&wt(e.x)&&r<e.x),"".concat(am,"-bottom"),wt(n)&&e&&wt(e.y)&&n>=e.y),"".concat(am,"-top"),wt(n)&&e&&wt(e.y)&&n<e.y))}function rB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&wt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var x=p,y=d[n];return x<y?Math.max(m,d[n]):Math.max(p,d[n])}var S=m+c,N=d[n]+h;return S>N?Math.max(p,d[n]):Math.max(m,d[n])}function Zme(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function ege(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=rB({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=rB({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=Zme({translateX:p,translateY:m,useTranslate3d:c})):h=Yme,{cssProperties:h,cssClasses:Jme({translateX:p,translateY:m,coordinate:r})}}function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function nB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(r),!0).forEach(function(n){Tj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JW(n.key),n)}}function nge(t,e,r){return e&&rge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function age(t,e,r){return e=mb(e),ige(t,YW()?Reflect.construct(e,r||[],mb(t).constructor):e.apply(t,r))}function ige(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(t)}function sge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function mb(t){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mb(t)}function oge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_j(t,e)}function _j(t,e){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_j(t,e)}function Tj(t,e,r){return e=JW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JW(t){var e=lge(t,"string");return df(e)=="symbol"?e:e+""}function lge(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iB=1,cge=(function(t){function e(){var r;tge(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=age(this,e,[].concat(a)),Tj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Tj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return oge(e,t),nge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>iB||Math.abs(n.height-this.state.lastBoundingBox.height)>iB)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,x=a.isAnimationActive,y=a.offset,S=a.position,N=a.reverseDirection,w=a.useTranslate3d,E=a.viewBox,O=a.wrapperStyle,R=ege({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:y,position:S,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),P=R.cssClasses,I=R.cssProperties,k=aB(aB({transition:x&&i?"transform ".concat(c,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},O);return ie.createElement("div",{tabIndex:-1,className:P,style:k,ref:function(j){n.wrapperNode=j}},h)}}])})(T.PureComponent),uge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},j0={isSsr:uge()};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function sB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(r),!0).forEach(function(n){o7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eK(n.key),n)}}function fge(t,e,r){return e&&hge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pge(t,e,r){return e=gb(e),mge(t,ZW()?Reflect.construct(e,r||[],gb(t).constructor):e.apply(t,r))}function mge(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gge(t)}function gge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZW=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gb(t)}function xge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jj(t,e)}function jj(t,e){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jj(t,e)}function o7(t,e,r){return e=eK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eK(t){var e=yge(t,"string");return hf(e)=="symbol"?e:e+""}function yge(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vge(t){return t.dataKey}function bge(t,e){return ie.isValidElement(t)?ie.cloneElement(t,e):typeof t=="function"?ie.createElement(t,e):ie.createElement(Kme,e)}var Wo=(function(t){function e(){return dge(this,e),pge(this,e,arguments)}return xge(e,t),fge(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,x=a.isAnimationActive,y=a.offset,S=a.payload,N=a.payloadUniqBy,w=a.position,E=a.reverseDirection,O=a.useTranslate3d,R=a.viewBox,P=a.wrapperStyle,I=S??[];m&&I.length&&(I=qW(S.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),N,vge));var k=I.length>0;return ie.createElement(cge,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:x,active:i,coordinate:p,hasPayload:k,offset:y,position:w,reverseDirection:E,useTranslate3d:O,viewBox:R,wrapperStyle:P},bge(h,oB(oB({},this.props),{},{payload:I})))}}])})(T.PureComponent);o7(Wo,"displayName","Tooltip");o7(Wo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!j0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var VN,lB;function wge(){if(lB)return VN;lB=1;var t=ml(),e=function(){return t.Date.now()};return VN=e,VN}var FN,cB;function Sge(){if(cB)return FN;cB=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return FN=e,FN}var qN,uB;function Nge(){if(uB)return qN;uB=1;var t=Sge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return qN=r,qN}var HN,dB;function tK(){if(dB)return HN;dB=1;var t=Nge(),e=Wu(),r=Kf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return HN=d,HN}var GN,hB;function _ge(){if(hB)return GN;hB=1;var t=Wu(),e=wge(),r=tK(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,x,y,S,N,w=0,E=!1,O=!1,R=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(E=!!h.leading,O="maxWait"in h,x=O?a(r(h.maxWait)||0,d):x,R="trailing"in h?!!h.trailing:R);function P(B){var G=p,K=m;return p=m=void 0,w=B,y=c.apply(K,G),y}function I(B){return w=B,S=setTimeout(j,d),E?P(B):y}function k(B){var G=B-N,K=B-w,H=d-G;return O?i(H,x-K):H}function A(B){var G=B-N,K=B-w;return N===void 0||G>=d||G<0||O&&K>=x}function j(){var B=e();if(A(B))return C(B);S=setTimeout(j,k(B))}function C(B){return S=void 0,R&&p?P(B):(p=m=void 0,y)}function U(){S!==void 0&&clearTimeout(S),w=0,p=N=m=S=void 0}function L(){return S===void 0?y:C(e())}function $(){var B=e(),G=A(B);if(p=arguments,m=this,N=B,G){if(S===void 0)return I(N);if(O)return clearTimeout(S),S=setTimeout(j,d),P(N)}return S===void 0&&(S=setTimeout(j,d)),y}return $.cancel=U,$.flush=L,$}return GN=o,GN}var WN,fB;function Tge(){if(fB)return WN;fB=1;var t=_ge(),e=Wu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return WN=n,WN}var jge=Tge();const rK=tn(jge);function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function pB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function By(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pB(Object(r),!0).forEach(function(n){Age(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Age(t,e,r){return e=Ege(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ege(t){var e=kge(t,"string");return bg(e)=="symbol"?e:e+""}function kge(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cge(t,e){return Mge(t)||Rge(t,e)||Ige(t,e)||Oge()}function Oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(t,e){if(t){if(typeof t=="string")return mB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mB(t,e)}}function mB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Mge(t){if(Array.isArray(t))return t}var nK=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,x=t.maxHeight,y=t.children,S=t.debounce,N=S===void 0?0:S,w=t.id,E=t.className,O=t.onResize,R=t.style,P=R===void 0?{}:R,I=T.useRef(null),k=T.useRef();k.current=O,T.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var A=T.useState({containerWidth:a.width,containerHeight:a.height}),j=Cge(A,2),C=j[0],U=j[1],L=T.useCallback(function(B,G){U(function(K){var H=Math.round(B),Z=Math.round(G);return K.containerWidth===H&&K.containerHeight===Z?K:{containerWidth:H,containerHeight:Z}})},[]);T.useEffect(function(){var B=function(ce){var he,Y=ce[0].contentRect,ae=Y.width,re=Y.height;L(ae,re),(he=k.current)===null||he===void 0||he.call(k,ae,re)};N>0&&(B=rK(B,N,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),K=I.current.getBoundingClientRect(),H=K.width,Z=K.height;return L(H,Z),G.observe(I.current),function(){G.disconnect()}},[L,N]);var $=T.useMemo(function(){var B=C.containerWidth,G=C.containerHeight;if(B<0||G<0)return null;ac(Ld(o)||Ld(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),ac(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Ld(o)?B:o,H=Ld(d)?G:d;r&&r>0&&(K?H=K/r:H&&(K=H*r),x&&H>x&&(H=x)),ac(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,o,d,p,m,r);var Z=!Array.isArray(y)&&nc(y.type).endsWith("Chart");return ie.Children.map(y,function(ne){return ie.isValidElement(ne)?T.cloneElement(ne,By({width:K,height:H},Z?{style:By({height:"100%",width:"100%",maxHeight:H,maxWidth:K},ne.props.style)}:{})):ne})},[r,y,d,x,m,p,C,o]);return ie.createElement("div",{id:w?"".concat(w):void 0,className:wr("recharts-responsive-container",E),style:By(By({},P),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:x}),ref:I},$)}),l7=function(e){return null};l7.displayName="Cell";function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function gB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Aj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(r),!0).forEach(function(n){Dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dge(t,e,r){return e=Pge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pge(t){var e=Lge(t,"string");return wg(e)=="symbol"?e:e+""}function Lge(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ph={widthCache:{},cacheCount:0},Bge=2e3,$ge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xB="recharts_measurement_span";function zge(t){var e=Aj({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Dm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||j0.isSsr)return{width:0,height:0};var n=zge(r),a=JSON.stringify({text:e,copyStyle:n});if(ph.widthCache[a])return ph.widthCache[a];try{var i=document.getElementById(xB);i||(i=document.createElement("span"),i.setAttribute("id",xB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Aj(Aj({},$ge),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return ph.widthCache[a]=d,++ph.cacheCount>Bge&&(ph.cacheCount=0,ph.widthCache={}),d}catch{return{width:0,height:0}}},Uge=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function xb(t,e){return Hge(t)||qge(t,e)||Fge(t,e)||Vge()}function Vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(t,e){if(t){if(typeof t=="string")return yB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yB(t,e)}}function yB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Hge(t){if(Array.isArray(t))return t}function Gge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kge(n.key),n)}}function Wge(t,e,r){return e&&vB(t.prototype,e),r&&vB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kge(t){var e=Qge(t,"string");return Sg(e)=="symbol"?e:e+""}function Qge(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Xge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Yge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Jge=Object.keys(aK),Th="NaN";function Zge(t,e){return t*aK[e]}var $y=(function(){function t(e,r){Gge(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Xge.test(r)&&(this.num=NaN,this.unit=""),Jge.includes(r)&&(this.num=Zge(e,r),this.unit="px")}return Wge(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Yge.exec(r))!==null&&n!==void 0?n:[],i=xb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function iK(t){if(t.includes(Th))return Th;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=bB.exec(e))!==null&&r!==void 0?r:[],a=xb(n,4),i=a[1],o=a[2],c=a[3],d=$y.parse(i??""),h=$y.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return Th;e=e.replace(bB,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,x=(m=wB.exec(e))!==null&&m!==void 0?m:[],y=xb(x,4),S=y[1],N=y[2],w=y[3],E=$y.parse(S??""),O=$y.parse(w??""),R=N==="+"?E.add(O):E.subtract(O);if(R.isNaN())return Th;e=e.replace(wB,R.toString())}return e}var SB=/\(([^()]*)\)/;function exe(t){for(var e=t;e.includes("(");){var r=SB.exec(e),n=xb(r,2),a=n[1];e=e.replace(SB,iK(a))}return e}function txe(t){var e=t.replace(/\s+/g,"");return e=exe(e),e=iK(e),e}function rxe(t){try{return txe(t)}catch{return Th}}function KN(t){var e=rxe(t.slice(5,-1));return e===Th?"":e}var nxe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],axe=["dx","dy","angle","className","breakAll"];function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ej.apply(this,arguments)}function NB(t,e){if(t==null)return{};var r=ixe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ixe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _B(t,e){return cxe(t)||lxe(t,e)||oxe(t,e)||sxe()}function sxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oxe(t,e){if(t){if(typeof t=="string")return TB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TB(t,e)}}function TB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function cxe(t){if(Array.isArray(t))return t}var sK=/[ \f\n\r\t\v\u2028\u2029]+/,oK=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];xr(r)||(n?i=r.toString().split(""):i=r.toString().split(sK));var o=i.map(function(d){return{word:d,width:Dm(d,a).width}}),c=n?0:Dm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},uxe=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=wt(o),m=c,x=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,Z){var ne=Z.word,ce=Z.width,he=H[H.length-1];if(he&&(a==null||i||he.width+ce+n<Number(a)))he.words.push(ne),he.width+=ce+n;else{var Y={words:[ne],width:ce};H.push(Y)}return H},[])},y=x(r),S=function(K){return K.reduce(function(H,Z){return H.width>Z.width?H:Z})};if(!p)return y;for(var N="",w=function(K){var H=m.slice(0,K),Z=oK({breakAll:h,style:d,children:H+N}).wordsWithComputedWidth,ne=x(Z),ce=ne.length>o||S(ne).width>Number(a);return[ce,ne]},E=0,O=m.length-1,R=0,P;E<=O&&R<=m.length-1;){var I=Math.floor((E+O)/2),k=I-1,A=w(k),j=_B(A,2),C=j[0],U=j[1],L=w(I),$=_B(L,1),B=$[0];if(!C&&!B&&(E=I+1),C&&B&&(O=I-1),!C&&B){P=U;break}R++}return P||y},jB=function(e){var r=xr(e)?[]:e.toString().split(sK);return[{words:r}]},dxe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!j0.isSsr){var d,h,p=oK({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,x=p.spaceWidth;d=m,h=x}else return jB(a);return uxe({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return jB(a)},AB="#808080",ff=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,x=e.textAnchor,y=x===void 0?"start":x,S=e.verticalAnchor,N=S===void 0?"end":S,w=e.fill,E=w===void 0?AB:w,O=NB(e,nxe),R=T.useMemo(function(){return dxe({breakAll:O.breakAll,children:O.children,maxLines:O.maxLines,scaleToFit:m,style:O.style,width:O.width})},[O.breakAll,O.children,O.maxLines,m,O.style,O.width]),P=O.dx,I=O.dy,k=O.angle,A=O.className,j=O.breakAll,C=NB(O,axe);if(!Fa(n)||!Fa(i))return null;var U=n+(wt(P)?P:0),L=i+(wt(I)?I:0),$;switch(N){case"start":$=KN("calc(".concat(h,")"));break;case"middle":$=KN("calc(".concat((R.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=KN("calc(".concat(R.length-1," * -").concat(c,")"));break}var B=[];if(m){var G=R[0].width,K=O.width;B.push("scale(".concat((wt(K)?K/G:1)/G,")"))}return k&&B.push("rotate(".concat(k,", ").concat(U,", ").concat(L,")")),B.length&&(C.transform=B.join(" ")),ie.createElement("text",Ej({},Qt(C,!0),{x:U,y:L,className:wr("recharts-text",A),textAnchor:y,fill:E.includes("url")?AB:E}),R.map(function(H,Z){var ne=H.words.join(j?"":" ");return ie.createElement("tspan",{x:U,dy:Z===0?$:c,key:"".concat(ne,"-").concat(Z)},ne)}))};function Ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function c7(t){let e,r,n;t.length!==2?(e=Ou,r=(c,d)=>Ou(t(c),d),n=(c,d)=>t(c)-d):(e=t===Ou||t===hxe?t:fxe,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function fxe(){return 0}function lK(t){return t===null?NaN:+t}function*pxe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const mxe=c7(Ou),Ix=mxe.right;c7(lK).center;class EB extends Map{constructor(e,r=yxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(kB(this,e))}has(e){return super.has(kB(this,e))}set(e,r){return super.set(gxe(this,e),r)}delete(e){return super.delete(xxe(this,e))}}function kB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function gxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function xxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function yxe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vxe(t=Ou){if(t===Ou)return cK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function cK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const bxe=Math.sqrt(50),wxe=Math.sqrt(10),Sxe=Math.sqrt(2);function yb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=bxe?10:i>=wxe?5:i>=Sxe?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?yb(t,e,r*2):[c,d,h]}function kj(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?yb(e,t,r):yb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function Cj(t,e,r){return e=+e,t=+t,r=+r,yb(t,e,r)[2]}function Oj(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Cj(e,t,r):Cj(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function CB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function OB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function uK(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?cK:vxe(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),y=Math.max(r,Math.floor(e-h*m/d+x)),S=Math.min(n,Math.floor(e+(d-h)*m/d+x));uK(t,e,y,S,a)}const i=t[e];let o=r,c=n;for(im(t,r,e),a(t[n],i)>0&&im(t,r,n);o<c;){for(im(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?im(t,r,c):(++c,im(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function im(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Nxe(t,e,r){if(t=Float64Array.from(pxe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return OB(t);if(e>=1)return CB(t);var n,a=(n-1)*e,i=Math.floor(a),o=CB(uK(t,i).subarray(0,i+1)),c=OB(t.subarray(i+1));return o+(c-o)*(a-i)}}function _xe(t,e,r=lK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function Txe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function fo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _c(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ij=Symbol("implicit");function u7(){var t=new EB,e=[],r=[],n=Ij;function a(i){let o=t.get(i);if(o===void 0){if(n!==Ij)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new EB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return u7(e,r).unknown(n)},fo.apply(a,arguments),a}function Ng(){var t=u7().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var x=e().length,y=a<n,S=y?a:n,N=y?n:a;i=(N-S)/Math.max(1,x-d+h*2),c&&(i=Math.floor(i)),S+=(N-S-i*(x-d))*p,o=i*(1-d),c&&(S=Math.round(S),o=Math.round(o));var w=Txe(x).map(function(E){return S+i*E});return r(y?w.reverse():w)}return t.domain=function(x){return arguments.length?(e(x),m()):e()},t.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(c=!!x,m()):c},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),m()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),m()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,m()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),m()):p},t.copy=function(){return Ng(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},fo.apply(m(),arguments)}function dK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return dK(e())},t}function Pm(){return dK(Ng.apply(null,arguments).paddingInner(1))}function d7(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function hK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Rx(){}var _g=.7,vb=1/_g,zh="\\s*([+-]?\\d+)\\s*",Tg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jxe=/^#([0-9a-f]{3,8})$/,Axe=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),Exe=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),kxe=new RegExp(`^rgba\\(${zh},${zh},${zh},${Tg}\\)$`),Cxe=new RegExp(`^rgba\\(${rl},${rl},${rl},${Tg}\\)$`),Oxe=new RegExp(`^hsl\\(${Tg},${rl},${rl}\\)$`),Ixe=new RegExp(`^hsla\\(${Tg},${rl},${rl},${Tg}\\)$`),IB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d7(Rx,jg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:RB,formatHex:RB,formatHex8:Rxe,formatHsl:Mxe,formatRgb:MB,toString:MB});function RB(){return this.rgb().formatHex()}function Rxe(){return this.rgb().formatHex8()}function Mxe(){return fK(this).formatHsl()}function MB(){return this.rgb().formatRgb()}function jg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=jxe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?DB(e):r===3?new is(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?zy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?zy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Axe.exec(t))?new is(e[1],e[2],e[3],1):(e=Exe.exec(t))?new is(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=kxe.exec(t))?zy(e[1],e[2],e[3],e[4]):(e=Cxe.exec(t))?zy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oxe.exec(t))?BB(e[1],e[2]/100,e[3]/100,1):(e=Ixe.exec(t))?BB(e[1],e[2]/100,e[3]/100,e[4]):IB.hasOwnProperty(t)?DB(IB[t]):t==="transparent"?new is(NaN,NaN,NaN,0):null}function DB(t){return new is(t>>16&255,t>>8&255,t&255,1)}function zy(t,e,r,n){return n<=0&&(t=e=r=NaN),new is(t,e,r,n)}function Dxe(t){return t instanceof Rx||(t=jg(t)),t?(t=t.rgb(),new is(t.r,t.g,t.b,t.opacity)):new is}function Rj(t,e,r,n){return arguments.length===1?Dxe(t):new is(t,e,r,n??1)}function is(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}d7(is,Rj,hK(Rx,{brighter(t){return t=t==null?vb:Math.pow(vb,t),new is(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_g:Math.pow(_g,t),new is(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new is(Wd(this.r),Wd(this.g),Wd(this.b),bb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PB,formatHex:PB,formatHex8:Pxe,formatRgb:LB,toString:LB}));function PB(){return`#${Bd(this.r)}${Bd(this.g)}${Bd(this.b)}`}function Pxe(){return`#${Bd(this.r)}${Bd(this.g)}${Bd(this.b)}${Bd((isNaN(this.opacity)?1:this.opacity)*255)}`}function LB(){const t=bb(this.opacity);return`${t===1?"rgb(":"rgba("}${Wd(this.r)}, ${Wd(this.g)}, ${Wd(this.b)}${t===1?")":`, ${t})`}`}function bb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bd(t){return t=Wd(t),(t<16?"0":"")+t.toString(16)}function BB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new To(t,e,r,n)}function fK(t){if(t instanceof To)return new To(t.h,t.s,t.l,t.opacity);if(t instanceof Rx||(t=jg(t)),!t)return new To;if(t instanceof To)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new To(o,c,d,t.opacity)}function Lxe(t,e,r,n){return arguments.length===1?fK(t):new To(t,e,r,n??1)}function To(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}d7(To,Lxe,hK(Rx,{brighter(t){return t=t==null?vb:Math.pow(vb,t),new To(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_g:Math.pow(_g,t),new To(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new is(QN(t>=240?t-240:t+120,a,n),QN(t,a,n),QN(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new To($B(this.h),Uy(this.s),Uy(this.l),bb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bb(this.opacity);return`${t===1?"hsl(":"hsla("}${$B(this.h)}, ${Uy(this.s)*100}%, ${Uy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $B(t){return t=(t||0)%360,t<0?t+360:t}function Uy(t){return Math.max(0,Math.min(1,t||0))}function QN(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const h7=t=>()=>t;function Bxe(t,e){return function(r){return t+r*e}}function $xe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function zxe(t){return(t=+t)==1?pK:function(e,r){return r-e?$xe(e,r,t):h7(isNaN(e)?r:e)}}function pK(t,e){var r=e-t;return r?Bxe(t,r):h7(isNaN(t)?e:t)}const zB=(function t(e){var r=zxe(e);function n(a,i){var o=r((a=Rj(a)).r,(i=Rj(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=pK(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Uxe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Vxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fxe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Yf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function qxe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function wb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Hxe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Yf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Mj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XN=new RegExp(Mj.source,"g");function Gxe(t){return function(){return t}}function Wxe(t){return function(e){return t(e)+""}}function Kxe(t,e){var r=Mj.lastIndex=XN.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=Mj.exec(t))&&(a=XN.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:wb(n,a)})),r=XN.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?Wxe(d[0].x):Gxe(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Yf(t,e){var r=typeof e,n;return e==null||r==="boolean"?h7(e):(r==="number"?wb:r==="string"?(n=jg(e))?(e=n,zB):Kxe:e instanceof jg?zB:e instanceof Date?qxe:Vxe(e)?Uxe:Array.isArray(e)?Fxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hxe:wb)(t,e)}function f7(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Qxe(t,e){e===void 0&&(e=t,t=Yf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function Xxe(t){return function(){return t}}function Sb(t){return+t}var UB=[0,1];function $i(t){return t}function Dj(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Xxe(isNaN(e)?NaN:.5)}function Yxe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Jxe(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Dj(a,n),i=r(o,i)):(n=Dj(n,a),i=r(i,o)),function(c){return i(n(c))}}function Zxe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Dj(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=Ix(t,c,1,n)-1;return i[d](a[d](c))}}function Mx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xw(){var t=UB,e=UB,r=Yf,n,a,i,o=$i,c,d,h;function p(){var x=Math.min(t.length,e.length);return o!==$i&&(o=Yxe(t[0],t[x-1])),c=x>2?Zxe:Jxe,d=h=null,m}function m(x){return x==null||isNaN(x=+x)?i:(d||(d=c(t.map(n),e,r)))(n(o(x)))}return m.invert=function(x){return o(a((h||(h=c(e,t.map(n),wb)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Sb),p()):t.slice()},m.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},m.rangeRound=function(x){return e=Array.from(x),r=f7,p()},m.clamp=function(x){return arguments.length?(o=x?!0:$i,p()):o!==$i},m.interpolate=function(x){return arguments.length?(r=x,p()):r},m.unknown=function(x){return arguments.length?(i=x,m):i},function(x,y){return n=x,a=y,p()}}function p7(){return xw()($i,$i)}function e1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function pf(t){return t=Nb(Math.abs(t)),t?t[1]:NaN}function t1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function r1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var n1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ag(t){if(!(e=n1e.exec(t)))throw new Error("invalid format: "+t);var e;return new m7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ag.prototype=m7.prototype;function m7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}m7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function a1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var _b;function i1e(t,e){var r=Nb(t,e);if(!r)return _b=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(_b=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Nb(t,Math.max(0,e+i-1))[0]}function VB(t,e){var r=Nb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const FB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:e1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>VB(t*100,e),r:VB,s:i1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qB(t){return t}var HB=Array.prototype.map,GB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s1e(t){var e=t.grouping===void 0||t.thousands===void 0?qB:t1e(HB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?qB:r1e(HB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,x){m=Ag(m);var y=m.fill,S=m.align,N=m.sign,w=m.symbol,E=m.zero,O=m.width,R=m.comma,P=m.precision,I=m.trim,k=m.type;k==="n"?(R=!0,k="g"):FB[k]||(P===void 0&&(P=12),I=!0,k="g"),(E||y==="0"&&S==="=")&&(E=!0,y="0",S="=");var A=(x&&x.prefix!==void 0?x.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),j=(w==="$"?n:/[%p]/.test(k)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),C=FB[k],U=/[defgprs%]/.test(k);P=P===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function L($){var B=A,G=j,K,H,Z;if(k==="c")G=C($)+G,$="";else{$=+$;var ne=$<0||1/$<0;if($=isNaN($)?d:C(Math.abs($),P),I&&($=a1e($)),ne&&+$==0&&N!=="+"&&(ne=!1),B=(ne?N==="("?N:c:N==="-"||N==="("?"":N)+B,G=(k==="s"&&!isNaN($)&&_b!==void 0?GB[8+_b/3]:"")+G+(ne&&N==="("?")":""),U){for(K=-1,H=$.length;++K<H;)if(Z=$.charCodeAt(K),48>Z||Z>57){G=(Z===46?a+$.slice(K+1):$.slice(K))+G,$=$.slice(0,K);break}}}R&&!E&&($=e($,1/0));var ce=B.length+$.length+G.length,he=ce<O?new Array(O-ce+1).join(y):"";switch(R&&E&&($=e(he+$,he.length?O-G.length:1/0),he=""),S){case"<":$=B+$+G+he;break;case"=":$=B+he+$+G;break;case"^":$=he.slice(0,ce=he.length>>1)+B+$+G+he.slice(ce);break;default:$=he+B+$+G;break}return i($)}return L.toString=function(){return m+""},L}function p(m,x){var y=Math.max(-8,Math.min(8,Math.floor(pf(x)/3)))*3,S=Math.pow(10,-y),N=h((m=Ag(m),m.type="f",m),{suffix:GB[8+y/3]});return function(w){return N(S*w)}}return{format:h,formatPrefix:p}}var Vy,g7,mK;o1e({thousands:",",grouping:[3],currency:["$",""]});function o1e(t){return Vy=s1e(t),g7=Vy.format,mK=Vy.formatPrefix,Vy}function l1e(t){return Math.max(0,-pf(Math.abs(t)))}function c1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pf(e)/3)))*3-pf(Math.abs(t)))}function u1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pf(e)-pf(t))+1}function gK(t,e,r,n){var a=Oj(t,e,r),i;switch(n=Ag(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=c1e(a,o))&&(n.precision=i),mK(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=u1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=l1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return g7(n)}function Ku(t){var e=t.domain;return t.ticks=function(r){var n=e();return kj(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return gK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=Cj(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Tb(){var t=p7();return t.copy=function(){return Mx(t,Tb())},fo.apply(t,arguments),Ku(t)}function xK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Sb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return xK(t).unknown(e)},t=arguments.length?Array.from(t,Sb):[0,1],Ku(r)}function yK(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function WB(t){return Math.log(t)}function KB(t){return Math.exp(t)}function d1e(t){return-Math.log(-t)}function h1e(t){return-Math.exp(-t)}function f1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function p1e(t){return t===10?f1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function m1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QB(t){return(e,r)=>-t(-e,r)}function x7(t){const e=t(WB,KB),r=e.domain;let n=10,a,i;function o(){return a=m1e(n),i=p1e(n),r()[0]<0?(a=QB(a),i=QB(i),t(d1e,h1e)):t(WB,KB),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let x=a(h),y=a(p),S,N;const w=c==null?10:+c;let E=[];if(!(n%1)&&y-x<w){if(x=Math.floor(x),y=Math.ceil(y),h>0){for(;x<=y;++x)for(S=1;S<n;++S)if(N=x<0?S/i(-x):S*i(x),!(N<h)){if(N>p)break;E.push(N)}}else for(;x<=y;++x)for(S=n-1;S>=1;--S)if(N=x>0?S/i(-x):S*i(x),!(N<h)){if(N>p)break;E.push(N)}E.length*2<w&&(E=kj(h,p,w))}else E=kj(x,y,Math.min(y-x,w)).map(i);return m?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Ag(d)).precision==null&&(d.trim=!0),d=g7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(yK(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function vK(){const t=x7(xw()).domain([1,10]);return t.copy=()=>Mx(t,vK()).base(t.base()),fo.apply(t,arguments),t}function XB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function YB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function y7(t){var e=1,r=t(XB(e),YB(e));return r.constant=function(n){return arguments.length?t(XB(e=+n),YB(e)):e},Ku(r)}function bK(){var t=y7(xw());return t.copy=function(){return Mx(t,bK()).constant(t.constant())},fo.apply(t,arguments)}function JB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function g1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function x1e(t){return t<0?-t*t:t*t}function v7(t){var e=t($i,$i),r=1;function n(){return r===1?t($i,$i):r===.5?t(g1e,x1e):t(JB(r),JB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Ku(e)}function b7(){var t=v7(xw());return t.copy=function(){return Mx(t,b7()).exponent(t.exponent())},fo.apply(t,arguments),t}function y1e(){return b7.apply(null,arguments).exponent(.5)}function ZB(t){return Math.sign(t)*t*t}function v1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function wK(){var t=p7(),e=[0,1],r=!1,n;function a(i){var o=v1e(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(ZB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Sb)).map(ZB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return wK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},fo.apply(a,arguments),Ku(a)}function SK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=_xe(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Ix(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ou),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return SK().domain(t).range(e).unknown(n)},fo.apply(i,arguments)}function NK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[Ix(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return NK().domain([t,e]).range(a).unknown(i)},fo.apply(Ku(o),arguments)}function _K(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[Ix(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return _K().domain(t).range(e).unknown(r)},fo.apply(a,arguments)}const YN=new Date,JN=new Date;function Wa(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Wa(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(YN.setTime(+i),JN.setTime(+o),t(YN),t(JN),Math.floor(r(YN,JN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const jb=Wa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wa(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):jb);jb.range;const Yl=1e3,to=Yl*60,Jl=to*60,pc=Jl*24,w7=pc*7,e$=pc*30,ZN=pc*365,$d=Wa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yl)},(t,e)=>(e-t)/Yl,t=>t.getUTCSeconds());$d.range;const S7=Wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getMinutes());S7.range;const N7=Wa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getUTCMinutes());N7.range;const _7=Wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl-t.getMinutes()*to)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getHours());_7.range;const T7=Wa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCHours());T7.range;const Dx=Wa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*to)/pc,t=>t.getDate()-1);Dx.range;const yw=Wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pc,t=>t.getUTCDate()-1);yw.range;const TK=Wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pc,t=>Math.floor(t/pc));TK.range;function A0(t){return Wa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*to)/w7)}const vw=A0(0),Ab=A0(1),b1e=A0(2),w1e=A0(3),mf=A0(4),S1e=A0(5),N1e=A0(6);vw.range;Ab.range;b1e.range;w1e.range;mf.range;S1e.range;N1e.range;function E0(t){return Wa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/w7)}const bw=E0(0),Eb=E0(1),_1e=E0(2),T1e=E0(3),gf=E0(4),j1e=E0(5),A1e=E0(6);bw.range;Eb.range;_1e.range;T1e.range;gf.range;j1e.range;A1e.range;const j7=Wa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());j7.range;const A7=Wa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());A7.range;const mc=Wa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());mc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});mc.range;const gc=Wa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});gc.range;function jK(t,e,r,n,a,i){const o=[[$d,1,Yl],[$d,5,5*Yl],[$d,15,15*Yl],[$d,30,30*Yl],[i,1,to],[i,5,5*to],[i,15,15*to],[i,30,30*to],[a,1,Jl],[a,3,3*Jl],[a,6,6*Jl],[a,12,12*Jl],[n,1,pc],[n,2,2*pc],[r,1,w7],[e,1,e$],[e,3,3*e$],[t,1,ZN]];function c(h,p,m){const x=p<h;x&&([h,p]=[p,h]);const y=m&&typeof m.range=="function"?m:d(h,p,m),S=y?y.range(h,+p+1):[];return x?S.reverse():S}function d(h,p,m){const x=Math.abs(p-h)/m,y=c7(([,,w])=>w).right(o,x);if(y===o.length)return t.every(Oj(h/ZN,p/ZN,m));if(y===0)return jb.every(Math.max(Oj(h,p,m),1));const[S,N]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return S.every(N)}return[c,d]}const[E1e,k1e]=jK(gc,A7,bw,TK,T7,N7),[C1e,O1e]=jK(mc,j7,vw,Dx,_7,S7);function e_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function t_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sm(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function I1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=om(a),p=lm(a),m=om(i),x=lm(i),y=om(o),S=lm(o),N=om(c),w=lm(c),E=om(d),O=lm(d),R={a:Z,A:ne,b:ce,B:he,c:null,d:s$,e:s$,f:tye,g:dye,G:fye,H:J1e,I:Z1e,j:eye,L:AK,m:rye,M:nye,p:Y,q:ae,Q:c$,s:u$,S:aye,u:iye,U:sye,V:oye,w:lye,W:cye,x:null,X:null,y:uye,Y:hye,Z:pye,"%":l$},P={a:re,A:ye,b:De,B:Ye,c:null,d:o$,e:o$,f:yye,g:Eye,G:Cye,H:mye,I:gye,j:xye,L:kK,m:vye,M:bye,p:rt,q:et,Q:c$,s:u$,S:wye,u:Sye,U:Nye,V:_ye,w:Tye,W:jye,x:null,X:null,y:Aye,Y:kye,Z:Oye,"%":l$},I={a:U,A:L,b:$,B,c:G,d:a$,e:a$,f:K1e,g:n$,G:r$,H:i$,I:i$,j:q1e,L:W1e,m:F1e,M:H1e,p:C,q:V1e,Q:X1e,s:Y1e,S:G1e,u:L1e,U:B1e,V:$1e,w:P1e,W:z1e,x:K,X:H,y:n$,Y:r$,Z:U1e,"%":Q1e};R.x=k(r,R),R.X=k(n,R),R.c=k(e,R),P.x=k(r,P),P.X=k(n,P),P.c=k(e,P);function k(Ne,Ue){return function(X){var te=[],be=-1,we=0,Qe=Ne.length,at,kt,je;for(X instanceof Date||(X=new Date(+X));++be<Qe;)Ne.charCodeAt(be)===37&&(te.push(Ne.slice(we,be)),(kt=t$[at=Ne.charAt(++be)])!=null?at=Ne.charAt(++be):kt=at==="e"?" ":"0",(je=Ue[at])&&(at=je(X,kt)),te.push(at),we=be+1);return te.push(Ne.slice(we,be)),te.join("")}}function A(Ne,Ue){return function(X){var te=sm(1900,void 0,1),be=j(te,Ne,X+="",0),we,Qe;if(be!=X.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Ue&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(we=t_(sm(te.y,0,1)),Qe=we.getUTCDay(),we=Qe>4||Qe===0?Eb.ceil(we):Eb(we),we=yw.offset(we,(te.V-1)*7),te.y=we.getUTCFullYear(),te.m=we.getUTCMonth(),te.d=we.getUTCDate()+(te.w+6)%7):(we=e_(sm(te.y,0,1)),Qe=we.getDay(),we=Qe>4||Qe===0?Ab.ceil(we):Ab(we),we=Dx.offset(we,(te.V-1)*7),te.y=we.getFullYear(),te.m=we.getMonth(),te.d=we.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Qe="Z"in te?t_(sm(te.y,0,1)).getUTCDay():e_(sm(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Qe+5)%7:te.w+te.U*7-(Qe+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,t_(te)):e_(te)}}function j(Ne,Ue,X,te){for(var be=0,we=Ue.length,Qe=X.length,at,kt;be<we;){if(te>=Qe)return-1;if(at=Ue.charCodeAt(be++),at===37){if(at=Ue.charAt(be++),kt=I[at in t$?Ue.charAt(be++):at],!kt||(te=kt(Ne,X,te))<0)return-1}else if(at!=X.charCodeAt(te++))return-1}return te}function C(Ne,Ue,X){var te=h.exec(Ue.slice(X));return te?(Ne.p=p.get(te[0].toLowerCase()),X+te[0].length):-1}function U(Ne,Ue,X){var te=y.exec(Ue.slice(X));return te?(Ne.w=S.get(te[0].toLowerCase()),X+te[0].length):-1}function L(Ne,Ue,X){var te=m.exec(Ue.slice(X));return te?(Ne.w=x.get(te[0].toLowerCase()),X+te[0].length):-1}function $(Ne,Ue,X){var te=E.exec(Ue.slice(X));return te?(Ne.m=O.get(te[0].toLowerCase()),X+te[0].length):-1}function B(Ne,Ue,X){var te=N.exec(Ue.slice(X));return te?(Ne.m=w.get(te[0].toLowerCase()),X+te[0].length):-1}function G(Ne,Ue,X){return j(Ne,e,Ue,X)}function K(Ne,Ue,X){return j(Ne,r,Ue,X)}function H(Ne,Ue,X){return j(Ne,n,Ue,X)}function Z(Ne){return o[Ne.getDay()]}function ne(Ne){return i[Ne.getDay()]}function ce(Ne){return d[Ne.getMonth()]}function he(Ne){return c[Ne.getMonth()]}function Y(Ne){return a[+(Ne.getHours()>=12)]}function ae(Ne){return 1+~~(Ne.getMonth()/3)}function re(Ne){return o[Ne.getUTCDay()]}function ye(Ne){return i[Ne.getUTCDay()]}function De(Ne){return d[Ne.getUTCMonth()]}function Ye(Ne){return c[Ne.getUTCMonth()]}function rt(Ne){return a[+(Ne.getUTCHours()>=12)]}function et(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var Ue=k(Ne+="",R);return Ue.toString=function(){return Ne},Ue},parse:function(Ne){var Ue=A(Ne+="",!1);return Ue.toString=function(){return Ne},Ue},utcFormat:function(Ne){var Ue=k(Ne+="",P);return Ue.toString=function(){return Ne},Ue},utcParse:function(Ne){var Ue=A(Ne+="",!0);return Ue.toString=function(){return Ne},Ue}}}var t$={"-":"",_:" ",0:"0"},si=/^\s*\d+/,R1e=/^%/,M1e=/[\\^$*+?|[\]().{}]/g;function Yr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function D1e(t){return t.replace(M1e,"\\$&")}function om(t){return new RegExp("^(?:"+t.map(D1e).join("|")+")","i")}function lm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function P1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function L1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function B1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function $1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function z1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function r$(t,e,r){var n=si.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function n$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function U1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function V1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function F1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function a$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function q1e(t,e,r){var n=si.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function i$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function H1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function G1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function W1e(t,e,r){var n=si.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function K1e(t,e,r){var n=si.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Q1e(t,e,r){var n=R1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function X1e(t,e,r){var n=si.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Y1e(t,e,r){var n=si.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function s$(t,e){return Yr(t.getDate(),e,2)}function J1e(t,e){return Yr(t.getHours(),e,2)}function Z1e(t,e){return Yr(t.getHours()%12||12,e,2)}function eye(t,e){return Yr(1+Dx.count(mc(t),t),e,3)}function AK(t,e){return Yr(t.getMilliseconds(),e,3)}function tye(t,e){return AK(t,e)+"000"}function rye(t,e){return Yr(t.getMonth()+1,e,2)}function nye(t,e){return Yr(t.getMinutes(),e,2)}function aye(t,e){return Yr(t.getSeconds(),e,2)}function iye(t){var e=t.getDay();return e===0?7:e}function sye(t,e){return Yr(vw.count(mc(t)-1,t),e,2)}function EK(t){var e=t.getDay();return e>=4||e===0?mf(t):mf.ceil(t)}function oye(t,e){return t=EK(t),Yr(mf.count(mc(t),t)+(mc(t).getDay()===4),e,2)}function lye(t){return t.getDay()}function cye(t,e){return Yr(Ab.count(mc(t)-1,t),e,2)}function uye(t,e){return Yr(t.getFullYear()%100,e,2)}function dye(t,e){return t=EK(t),Yr(t.getFullYear()%100,e,2)}function hye(t,e){return Yr(t.getFullYear()%1e4,e,4)}function fye(t,e){var r=t.getDay();return t=r>=4||r===0?mf(t):mf.ceil(t),Yr(t.getFullYear()%1e4,e,4)}function pye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yr(e/60|0,"0",2)+Yr(e%60,"0",2)}function o$(t,e){return Yr(t.getUTCDate(),e,2)}function mye(t,e){return Yr(t.getUTCHours(),e,2)}function gye(t,e){return Yr(t.getUTCHours()%12||12,e,2)}function xye(t,e){return Yr(1+yw.count(gc(t),t),e,3)}function kK(t,e){return Yr(t.getUTCMilliseconds(),e,3)}function yye(t,e){return kK(t,e)+"000"}function vye(t,e){return Yr(t.getUTCMonth()+1,e,2)}function bye(t,e){return Yr(t.getUTCMinutes(),e,2)}function wye(t,e){return Yr(t.getUTCSeconds(),e,2)}function Sye(t){var e=t.getUTCDay();return e===0?7:e}function Nye(t,e){return Yr(bw.count(gc(t)-1,t),e,2)}function CK(t){var e=t.getUTCDay();return e>=4||e===0?gf(t):gf.ceil(t)}function _ye(t,e){return t=CK(t),Yr(gf.count(gc(t),t)+(gc(t).getUTCDay()===4),e,2)}function Tye(t){return t.getUTCDay()}function jye(t,e){return Yr(Eb.count(gc(t)-1,t),e,2)}function Aye(t,e){return Yr(t.getUTCFullYear()%100,e,2)}function Eye(t,e){return t=CK(t),Yr(t.getUTCFullYear()%100,e,2)}function kye(t,e){return Yr(t.getUTCFullYear()%1e4,e,4)}function Cye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?gf(t):gf.ceil(t),Yr(t.getUTCFullYear()%1e4,e,4)}function Oye(){return"+0000"}function l$(){return"%"}function c$(t){return+t}function u$(t){return Math.floor(+t/1e3)}var mh,OK,IK;Iye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Iye(t){return mh=I1e(t),OK=mh.format,mh.parse,IK=mh.utcFormat,mh.utcParse,mh}function Rye(t){return new Date(t)}function Mye(t){return t instanceof Date?+t:+new Date(+t)}function E7(t,e,r,n,a,i,o,c,d,h){var p=p7(),m=p.invert,x=p.domain,y=h(".%L"),S=h(":%S"),N=h("%I:%M"),w=h("%I %p"),E=h("%a %d"),O=h("%b %d"),R=h("%B"),P=h("%Y");function I(k){return(d(k)<k?y:c(k)<k?S:o(k)<k?N:i(k)<k?w:n(k)<k?a(k)<k?E:O:r(k)<k?R:P)(k)}return p.invert=function(k){return new Date(m(k))},p.domain=function(k){return arguments.length?x(Array.from(k,Mye)):x().map(Rye)},p.ticks=function(k){var A=x();return t(A[0],A[A.length-1],k??10)},p.tickFormat=function(k,A){return A==null?I:h(A)},p.nice=function(k){var A=x();return(!k||typeof k.range!="function")&&(k=e(A[0],A[A.length-1],k??10)),k?x(yK(A,k)):p},p.copy=function(){return Mx(p,E7(t,e,r,n,a,i,o,c,d,h))},p}function Dye(){return fo.apply(E7(C1e,O1e,mc,j7,vw,Dx,_7,S7,$d,OK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Pye(){return fo.apply(E7(E1e,k1e,gc,A7,bw,yw,T7,N7,$d,IK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ww(){var t=0,e=1,r,n,a,i,o=$i,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(x){var y,S;return arguments.length?([y,S]=x,o=m(y,S),h):[o(0),o(1)]}}return h.range=p(Yf),h.rangeRound=p(f7),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Qu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function RK(){var t=Ku(ww()($i));return t.copy=function(){return Qu(t,RK())},_c.apply(t,arguments)}function MK(){var t=x7(ww()).domain([1,10]);return t.copy=function(){return Qu(t,MK()).base(t.base())},_c.apply(t,arguments)}function DK(){var t=y7(ww());return t.copy=function(){return Qu(t,DK()).constant(t.constant())},_c.apply(t,arguments)}function k7(){var t=v7(ww());return t.copy=function(){return Qu(t,k7()).exponent(t.exponent())},_c.apply(t,arguments)}function Lye(){return k7.apply(null,arguments).exponent(.5)}function PK(){var t=[],e=$i;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ix(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ou),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Nxe(t,i/n))},r.copy=function(){return PK(e).domain(t)},_c.apply(r,arguments)}function Sw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=$i,p,m=!1,x;function y(N){return isNaN(N=+N)?x:(N=.5+((N=+p(N))-i)*(n*N<n*i?c:d),h(m?Math.max(0,Math.min(1,N)):N))}y.domain=function(N){return arguments.length?([t,e,r]=N,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y):[t,e,r]},y.clamp=function(N){return arguments.length?(m=!!N,y):m},y.interpolator=function(N){return arguments.length?(h=N,y):h};function S(N){return function(w){var E,O,R;return arguments.length?([E,O,R]=w,h=Qxe(N,[E,O,R]),y):[h(0),h(.5),h(1)]}}return y.range=S(Yf),y.rangeRound=S(f7),y.unknown=function(N){return arguments.length?(x=N,y):x},function(N){return p=N,a=N(t),i=N(e),o=N(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y}}function LK(){var t=Ku(Sw()($i));return t.copy=function(){return Qu(t,LK())},_c.apply(t,arguments)}function BK(){var t=x7(Sw()).domain([.1,1,10]);return t.copy=function(){return Qu(t,BK()).base(t.base())},_c.apply(t,arguments)}function $K(){var t=y7(Sw());return t.copy=function(){return Qu(t,$K()).constant(t.constant())},_c.apply(t,arguments)}function C7(){var t=v7(Sw());return t.copy=function(){return Qu(t,C7()).exponent(t.exponent())},_c.apply(t,arguments)}function Bye(){return C7.apply(null,arguments).exponent(.5)}const d$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ng,scaleDiverging:LK,scaleDivergingLog:BK,scaleDivergingPow:C7,scaleDivergingSqrt:Bye,scaleDivergingSymlog:$K,scaleIdentity:xK,scaleImplicit:Ij,scaleLinear:Tb,scaleLog:vK,scaleOrdinal:u7,scalePoint:Pm,scalePow:b7,scaleQuantile:SK,scaleQuantize:NK,scaleRadial:wK,scaleSequential:RK,scaleSequentialLog:MK,scaleSequentialPow:k7,scaleSequentialQuantile:PK,scaleSequentialSqrt:Lye,scaleSequentialSymlog:DK,scaleSqrt:y1e,scaleSymlog:bK,scaleThreshold:_K,scaleTime:Dye,scaleUtc:Pye,tickFormat:gK},Symbol.toStringTag,{value:"Module"}));var r_,h$;function Nw(){if(h$)return r_;h$=1;var t=Kf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return r_=e,r_}var n_,f$;function zK(){if(f$)return n_;f$=1;function t(e,r){return e>r}return n_=t,n_}var a_,p$;function $ye(){if(p$)return a_;p$=1;var t=Nw(),e=zK(),r=Xf();function n(a){return a&&a.length?t(a,r,e):void 0}return a_=n,a_}var zye=$ye();const _w=tn(zye);var i_,m$;function UK(){if(m$)return i_;m$=1;function t(e,r){return e<r}return i_=t,i_}var s_,g$;function Uye(){if(g$)return s_;g$=1;var t=Nw(),e=UK(),r=Xf();function n(a){return a&&a.length?t(a,r,e):void 0}return s_=n,s_}var Vye=Uye();const Tw=tn(Vye);var o_,x$;function Fye(){if(x$)return o_;x$=1;var t=GE(),e=gl(),r=QW(),n=ds();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return o_=a,o_}var l_,y$;function qye(){if(y$)return l_;y$=1;var t=WW(),e=Fye();function r(n,a){return t(e(n,a),1)}return l_=r,l_}var Hye=qye();const Gye=tn(Hye);var c_,v$;function Wye(){if(v$)return c_;v$=1;var t=a7();function e(r,n){return t(r,n)}return c_=e,c_}var Kye=Wye();const Px=tn(Kye);var Jf=1e9,Qye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},I7,Qn=!0,ho="[DecimalError] ",Kd=ho+"Invalid argument: ",O7=ho+"Exponent out of range: ",Zf=Math.floor,Cd=Math.pow,Xye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,ei=1e7,Fn=7,VK=9007199254740991,kb=Zf(VK/Fn),Dt={};Dt.absoluteValue=Dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Dt.comparedTo=Dt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Fn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Dt.dividedBy=Dt.div=function(t){return ic(this,new this.constructor(t))};Dt.dividedToIntegerBy=Dt.idiv=function(t){var e=this,r=e.constructor;return On(ic(e,new r(t),0,1),r.precision)};Dt.equals=Dt.eq=function(t){return!this.cmp(t)};Dt.exponent=function(){return Ia(this)};Dt.greaterThan=Dt.gt=function(t){return this.cmp(t)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(t){return this.cmp(t)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(t){return this.cmp(t)<0};Dt.lessThanOrEqualTo=Dt.lte=function(t){return this.cmp(t)<1};Dt.logarithm=Dt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Es))throw Error(ho+"NaN");if(r.s<1)throw Error(ho+(r.s?"NaN":"-Infinity"));return r.eq(Es)?new n(0):(Qn=!1,e=ic(Eg(r,i),Eg(t,i),i),Qn=!0,On(e,a))};Dt.minus=Dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HK(e,t):FK(e,(t.s=-t.s,t))};Dt.modulo=Dt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(ho+"NaN");return r.s?(Qn=!1,e=ic(r,t,0,1).times(t),Qn=!0,r.minus(e)):On(new n(r),a)};Dt.naturalExponential=Dt.exp=function(){return qK(this)};Dt.naturalLogarithm=Dt.ln=function(){return Eg(this)};Dt.negated=Dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Dt.plus=Dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?FK(e,t):HK(e,(t.s=-t.s,t))};Dt.precision=Dt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kd+t);if(e=Ia(a)+1,n=a.d.length-1,r=n*Fn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Dt.squareRoot=Dt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(ho+"NaN")}for(t=Ia(c),Qn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=el(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Zf((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(ic(c,i,o+2)).times(.5),el(i.d).slice(0,o)===(e=el(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(On(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Qn=!0,On(n,r)};Dt.times=Dt.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,x=p.d,y=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=x.length,h=y.length,d<h&&(i=x,x=y,y=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+y[n]*x[a-n-1]+e,i[a--]=c%ei|0,e=c/ei|0;i[a]=(i[a]+e)%ei|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Qn?On(t,m.precision):t};Dt.toDecimalPlaces=Dt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(cl(t,0,Jf),e===void 0?e=n.rounding:cl(e,0,8),On(r,t+Ia(r)+1,e))};Dt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=f0(n,!0):(cl(t,0,Jf),e===void 0?e=a.rounding:cl(e,0,8),n=On(new a(n),t+1,e),r=f0(n,!0,t+1)),r};Dt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?f0(a):(cl(t,0,Jf),e===void 0?e=i.rounding:cl(e,0,8),n=On(new i(a),t+Ia(a)+1,e),r=f0(n.abs(),!1,t+Ia(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Dt.toInteger=Dt.toint=function(){var t=this,e=t.constructor;return On(new e(t),Ia(t)+1,e.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(Es);if(c=new d(c),!c.s){if(t.s<1)throw Error(ho+"Infinity");return c}if(c.eq(Es))return c;if(n=d.precision,t.eq(Es))return On(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=VK){for(a=new d(Es),e=Math.ceil(n/Fn+4),Qn=!1;r%2&&(a=a.times(c),w$(a.d,e)),r=Zf(r/2),r!==0;)c=c.times(c),w$(c.d,e);return Qn=!0,t.s<0?new d(Es).div(a):On(a,n)}}else if(i<0)throw Error(ho+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Qn=!1,a=t.times(Eg(c,n+h)),Qn=!0,a=qK(a),a.s=i,a};Dt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ia(a),n=f0(a,r<=i.toExpNeg||r>=i.toExpPos)):(cl(t,1,Jf),e===void 0?e=i.rounding:cl(e,0,8),a=On(new i(a),t,e),r=Ia(a),n=f0(a,t<=r||r<=i.toExpNeg,t)),n};Dt.toSignificantDigits=Dt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(cl(t,1,Jf),e===void 0?e=n.rounding:cl(e,0,8)),On(new n(r),t,e)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ia(t),r=t.constructor;return f0(t,e<=r.toExpNeg||e>=r.toExpPos)};function FK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Qn?On(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/Fn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/ei|0,d[i]%=ei;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Qn?On(e,m):e}function cl(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Kd+t)}function el(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Fn-n.length,r&&(i+=ou(r)),i+=n;o=t[e],n=o+"",r=Fn-n.length,r&&(i+=ou(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ic=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%ei|0,o=i/ei|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ei+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,x,y,S,N,w,E,O,R,P,I,k,A,j,C=n.constructor,U=n.s==a.s?1:-1,L=n.d,$=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(ho+"Division by zero");for(d=n.e-a.e,A=$.length,I=L.length,y=new C(U),S=y.d=[],h=0;$[h]==(L[h]||0);)++h;if($[h]>(L[h]||0)&&--d,i==null?O=i=C.precision:o?O=i+(Ia(n)-Ia(a))+1:O=i,O<0)return new C(0);if(O=O/Fn+2|0,h=0,A==1)for(p=0,$=$[0],O++;(h<I||p)&&O--;h++)R=p*ei+(L[h]||0),S[h]=R/$|0,p=R%$|0;else{for(p=ei/($[0]+1)|0,p>1&&($=t($,p),L=t(L,p),A=$.length,I=L.length),P=A,N=L.slice(0,A),w=N.length;w<A;)N[w++]=0;j=$.slice(),j.unshift(0),k=$[0],$[1]>=ei/2&&++k;do p=0,c=e($,N,A,w),c<0?(E=N[0],A!=w&&(E=E*ei+(N[1]||0)),p=E/k|0,p>1?(p>=ei&&(p=ei-1),m=t($,p),x=m.length,w=N.length,c=e(m,N,x,w),c==1&&(p--,r(m,A<x?j:$,x))):(p==0&&(c=p=1),m=$.slice()),x=m.length,x<w&&m.unshift(0),r(N,m,w),c==-1&&(w=N.length,c=e($,N,A,w),c<1&&(p++,r(N,A<w?j:$,w))),w=N.length):c===0&&(p++,N=[0]),S[h++]=p,c&&N[0]?N[w++]=L[P]||0:(N=[L[P]],w=1);while((P++<I||N[0]!==void 0)&&O--)}return S[0]||S.shift(),y.e=d,On(y,o?i+Ia(y)+1:i)}})();function qK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Ia(t)>16)throw Error(O7+Ia(t));if(!t.s)return new p(Es);for(Qn=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(Cd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(Es),p.precision=c;;){if(a=On(a.times(t),c),r=r.times(++d),o=i.plus(ic(a,r,c)),el(o.d).slice(0,c)===el(i.d).slice(0,c)){for(;h--;)i=On(i.times(i),c);return p.precision=m,e==null?(Qn=!0,On(i,m)):i}i=o}}function Ia(t){for(var e=t.e*Fn,r=t.d[0];r>=10;r/=10)e++;return e}function u_(t,e,r){if(e>t.LN10.sd())throw Qn=!0,r&&(t.precision=r),Error(ho+"LN10 precision limit exceeded");return On(new t(t.LN10),e)}function ou(t){for(var e="";t--;)e+="0";return e}function Eg(t,e){var r,n,a,i,o,c,d,h,p,m=1,x=10,y=t,S=y.d,N=y.constructor,w=N.precision;if(y.s<1)throw Error(ho+(y.s?"NaN":"-Infinity"));if(y.eq(Es))return new N(0);if(e==null?(Qn=!1,h=w):h=e,y.eq(10))return e==null&&(Qn=!0),u_(N,h);if(h+=x,N.precision=h,r=el(S),n=r.charAt(0),i=Ia(y),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=el(y.d),n=r.charAt(0),m++;i=Ia(y),n>1?(y=new N("0."+r),i++):y=new N(n+"."+r.slice(1))}else return d=u_(N,h+2,w).times(i+""),y=Eg(new N(n+"."+r.slice(1)),h-x).plus(d),N.precision=w,e==null?(Qn=!0,On(y,w)):y;for(c=o=y=ic(y.minus(Es),y.plus(Es),h),p=On(y.times(y),h),a=3;;){if(o=On(o.times(p),h),d=c.plus(ic(o,new N(a),h)),el(d.d).slice(0,h)===el(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(u_(N,h+2,w).times(i+""))),c=ic(c,new N(m),h),N.precision=w,e==null?(Qn=!0,On(c,w)):c;c=d,a+=2}}function b$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Zf(r/Fn),t.d=[],n=(r+1)%Fn,r<0&&(n+=Fn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Fn;n<a;)t.d.push(+e.slice(n,n+=Fn));e=e.slice(n),n=Fn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Qn&&(t.e>kb||t.e<-kb))throw Error(O7+r)}else t.s=0,t.e=0,t.d=[0];return t}function On(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Fn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Fn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=Fn,a=n-Fn+o}if(r!==void 0&&(i=Cd(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/Cd(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Ia(t),m.length=1,e=e-i-1,m[0]=Cd(10,(Fn-e%Fn)%Fn),t.e=Zf(-e/Fn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=Cd(10,Fn-n),m[p]=a>0?(h/Cd(10,o-a)%Cd(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==ei&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=ei)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Qn&&(t.e>kb||t.e<-kb))throw Error(O7+Ia(t));return t}function HK(t,e){var r,n,a,i,o,c,d,h,p,m,x=t.constructor,y=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Qn?On(e,y):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(y/Fn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=ei-1;--d[i],d[a]+=ei}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Qn?On(e,y):e):new x(0)}function f0(t,e,r){var n,a=Ia(t),i=el(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ou(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ou(-a-1)+i,r&&(n=r-o)>0&&(i+=ou(n))):a>=o?(i+=ou(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ou(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ou(n))),t.s<0?"-"+i:i}function w$(t,e){if(t.length>e)return t.length=e,!0}function GK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Kd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return b$(o,i.toString())}else if(typeof i!="string")throw Error(Kd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Xye.test(i))b$(o,i);else throw Error(Kd+i)}if(a.prototype=Dt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=GK,a.config=a.set=Yye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Yye(t){if(!t||typeof t!="object")throw Error(ho+"Object expected");var e,r,n,a=["precision",1,Jf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Zf(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Kd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kd+r+": "+n);return this}var I7=GK(Qye);Es=new I7(1);const _n=I7;function Jye(t){return rve(t)||tve(t)||eve(t)||Zye()}function Zye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){if(t){if(typeof t=="string")return Pj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pj(t,e)}}function tve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function rve(t){if(Array.isArray(t))return Pj(t)}function Pj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nve=function(e){return e},WK={},KK=function(e){return e===WK},S$=function(e){return function r(){return arguments.length===0||arguments.length===1&&KK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},ave=function t(e,r){return e===1?r:S$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==WK}).length;return o>=e?r.apply(void 0,a):t(e-o,S$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return KK(m)?d.shift():m});return r.apply(void 0,Jye(p).concat(d))}))})},jw=function(e){return ave(e.length,e)},Lj=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},ive=jw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),sve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return nve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},Bj=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},QK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function ove(t){var e;return t===0?e=1:e=Math.floor(new _n(t).abs().log(10).toNumber())+1,e}function lve(t,e,r){for(var n=new _n(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var cve=jw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),uve=jw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),dve=jw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Aw={rangeStep:lve,getDigitCount:ove,interpolateNumber:cve,uninterpolateNumber:uve,uninterpolateTruncation:dve};function $j(t){return pve(t)||fve(t)||XK(t)||hve()}function hve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pve(t){if(Array.isArray(t))return zj(t)}function kg(t,e){return xve(t)||gve(t,e)||XK(t,e)||mve()}function mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XK(t,e){if(t){if(typeof t=="string")return zj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zj(t,e)}}function zj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function xve(t){if(Array.isArray(t))return t}function YK(t){var e=kg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function JK(t,e,r){if(t.lte(0))return new _n(0);var n=Aw.getDigitCount(t.toNumber()),a=new _n(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new _n(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new _n(Math.ceil(d))}function yve(t,e,r){var n=1,a=new _n(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new _n(10).pow(Aw.getDigitCount(t)-1),a=new _n(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new _n(Math.floor(t)))}else t===0?a=new _n(Math.floor((e-1)/2)):r||(a=new _n(Math.floor(t)));var o=Math.floor((e-1)/2),c=sve(ive(function(d){return a.add(new _n(d-o).mul(n)).toNumber()}),Lj);return c(0,e)}function ZK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var i=JK(new _n(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new _n(0):(o=new _n(t).add(e).div(2),o=o.sub(new _n(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new _n(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?ZK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new _n(c).mul(i)),tickMax:o.add(new _n(d).mul(i))})}function vve(t){var e=kg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=YK([r,n]),d=kg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat($j(Lj(0,a-1).map(function(){return 1/0}))):[].concat($j(Lj(0,a-1).map(function(){return-1/0})),[p]);return r>n?Bj(m):m}if(h===p)return yve(h,a,i);var x=ZK(h,p,o,i),y=x.step,S=x.tickMin,N=x.tickMax,w=Aw.rangeStep(S,N.add(new _n(.1).mul(y)),y);return r>n?Bj(w):w}function bve(t,e){var r=kg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=YK([n,a]),c=kg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=JK(new _n(h).sub(d).div(p-1),i,0),x=[].concat($j(Aw.rangeStep(new _n(d),new _n(h).sub(new _n(.99).mul(m)),m)),[h]);return n>a?Bj(x):x}var wve=QK(vve),Sve=QK(bve),Nve="Invariant failed";function p0(t,e){throw new Error(Nve)}var _ve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cb.apply(this,arguments)}function Tve(t,e){return kve(t)||Eve(t,e)||Ave(t,e)||jve()}function jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return N$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N$(t,e)}}function N$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function kve(t){if(Array.isArray(t))return t}function Cve(t,e){if(t==null)return{};var r=Ove(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ove(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ive(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rQ(n.key),n)}}function Mve(t,e,r){return e&&Rve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dve(t,e,r){return e=Ob(e),Pve(t,eQ()?Reflect.construct(e,r||[],Ob(t).constructor):e.apply(t,r))}function Pve(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lve(t)}function Lve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eQ=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}function Bve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uj(t,e)}function Uj(t,e){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uj(t,e)}function tQ(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=$ve(t,"string");return xf(e)=="symbol"?e:e+""}function $ve(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lx=(function(t){function e(){return Ive(this,e),Dve(this,e,arguments)}return Bve(e,t),Mve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,x=Cve(n,_ve),y=Qt(x,!1);this.props.direction==="x"&&p.type!=="number"&&p0();var S=d.map(function(N){var w=h(N,c),E=w.x,O=w.y,R=w.value,P=w.errorVal;if(!P)return null;var I=[],k,A;if(Array.isArray(P)){var j=Tve(P,2);k=j[0],A=j[1]}else k=A=P;if(i==="vertical"){var C=p.scale,U=O+a,L=U+o,$=U-o,B=C(R-k),G=C(R+A);I.push({x1:G,y1:L,x2:G,y2:$}),I.push({x1:B,y1:U,x2:G,y2:U}),I.push({x1:B,y1:L,x2:B,y2:$})}else if(i==="horizontal"){var K=m.scale,H=E+a,Z=H-o,ne=H+o,ce=K(R-k),he=K(R+A);I.push({x1:Z,y1:he,x2:ne,y2:he}),I.push({x1:H,y1:ce,x2:H,y2:he}),I.push({x1:Z,y1:ce,x2:ne,y2:ce})}return ie.createElement(Qr,Cb({className:"recharts-errorBar",key:"bar-".concat(I.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},y),I.map(function(Y){return ie.createElement("line",Cb({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return ie.createElement(Qr,{className:"recharts-errorBars"},S)}}])})(ie.Component);tQ(Lx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});tQ(Lx,"displayName","ErrorBar");function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function _$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(r),!0).forEach(function(n){zve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zve(t,e,r){return e=Uve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uve(t){var e=Vve(t,"string");return Cg(e)=="symbol"?e:e+""}function Vve(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nQ=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=js(r,$h);if(!o)return null;var c=$h.defaultProps,d=c!==void 0?_d(_d({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var x=m.item,y=m.props,S=y.sectors||y.data||[];return p.concat(S.map(function(N){return{type:o.props.iconType||x.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):h=(n||[]).map(function(p){var m=p.item,x=m.type.defaultProps,y=x!==void 0?_d(_d({},x),m.props):{},S=y.dataKey,N=y.name,w=y.legendType,E=y.hide;return{inactive:E,dataKey:S,type:d.iconType||w||"square",color:R7(m),value:N||S,payload:y}}),_d(_d(_d({},d),$h.getWithHeight(o,a)),{},{payload:h,item:o})};function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function T$(t){return Gve(t)||Hve(t)||qve(t)||Fve()}function Fve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qve(t,e){if(t){if(typeof t=="string")return Vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(t,e)}}function Hve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gve(t){if(Array.isArray(t))return Vj(t)}function Vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){Uh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uh(t,e,r){return e=Wve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wve(t){var e=Kve(t,"string");return Og(e)=="symbol"?e:e+""}function Kve(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bi(t,e,r){return xr(t)||xr(e)?r:Fa(e)?ao(t,e,r):lr(e)?e(t):r}function Lm(t,e,r,n){var a=Gye(t,function(c){return bi(c,e)});if(r==="number"){var i=a.filter(function(c){return wt(c)||parseFloat(c)});return i.length?[Tw(i),_w(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!xr(c)}):a;return o.map(function(c){return Fa(c)||c instanceof Date?c:""})}var Qve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,x=h>=c-1?a[0].coordinate:a[h+1].coordinate,y=void 0;if(jo(m-p)!==jo(x-m)){var S=[];if(jo(x-m)===jo(d[1]-d[0])){y=x;var N=m+d[1]-d[0];S[0]=Math.min(N,(N+p)/2),S[1]=Math.max(N,(N+p)/2)}else{y=p;var w=x+d[1]-d[0];S[0]=Math.min(m,(w+m)/2),S[1]=Math.max(m,(w+m)/2)}var E=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>E[0]&&e<=E[1]||e>=S[0]&&e<=S[1]){o=a[h].index;break}}else{var O=Math.min(p,x),R=Math.max(p,x);if(e>(O+m)/2&&e<=(R+m)/2){o=a[h].index;break}}}else for(var P=0;P<c;P++)if(P===0&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2&&e<=(n[P].coordinate+n[P+1].coordinate)/2||P===c-1&&e>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},R7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},Xve=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),x=0,y=m.length;x<y;x++){var S=p[m[x]],N=S.items,w=S.cateAxisId,E=N.filter(function(A){return nc(A.type).indexOf("Bar")>=0});if(E&&E.length){var O=E[0].type.defaultProps,R=O!==void 0?oa(oa({},O),E[0].props):E[0].props,P=R.barSize,I=R[w];o[I]||(o[I]=[]);var k=xr(P)?r:P;o[I].push({item:E[0],stackList:E.slice(1),barSize:xr(k)?void 0:Ao(k,n,0)})}}return o},Yve=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=Ao(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var x=!1,y=a/d,S=o.reduce(function(P,I){return P+I.barSize||0},0);S+=(d-1)*h,S>=a&&(S-=(d-1)*h,h=0),S>=a&&y>0&&(x=!0,y*=.9,S=d*y);var N=(a-S)/2>>0,w={offset:N-h,size:0};p=o.reduce(function(P,I){var k={item:I.item,position:{offset:w.offset+w.size+h,size:x?y:I.barSize}},A=[].concat(T$(P),[k]);return w=A[A.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(j){A.push({item:j,position:w})}),A},m)}else{var E=Ao(n,a,0,!0);a-2*E-(d-1)*h<=0&&(h=0);var O=(a-2*E-(d-1)*h)/d;O>1&&(O>>=0);var R=c===+c?Math.min(O,c):O;p=o.reduce(function(P,I,k){var A=[].concat(T$(P),[{item:I.item,position:{offset:E+(O+h)*k+(O-R)/2,size:R}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(j){A.push({item:j,position:A[A.length-1].position})}),A},m)}return p},Jve=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=nQ({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,x=p.height,y=h.align,S=h.verticalAlign,N=h.layout;if((N==="vertical"||N==="horizontal"&&S==="middle")&&y!=="center"&&wt(e[y]))return oa(oa({},e),{},Uh({},y,e[y]+(m||0)));if((N==="horizontal"||N==="vertical"&&y==="center")&&S!=="middle"&&wt(e[S]))return oa(oa({},e),{},Uh({},S,e[S]+(x||0)))}return e},Zve=function(e,r,n){return xr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},aQ=function(e,r,n,a,i){var o=r.props.children,c=Rs(o,Lx).filter(function(h){return Zve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=bi(p,n);if(xr(m))return h;var x=Array.isArray(m)?[Tw(m),_w(m)]:[m,m],y=d.reduce(function(S,N){var w=bi(p,N,0),E=x[0]-Math.abs(Array.isArray(w)?w[0]:w),O=x[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,S[0]),Math.max(O,S[1])]},[1/0,-1/0]);return[Math.min(y[0],h[0]),Math.max(y[1],h[1])]},[1/0,-1/0])}return null},ebe=function(e,r,n,a,i){var o=r.map(function(c){return aQ(e,c,n,i,a)}).filter(function(c){return!xr(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},iQ=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&aQ(e,d,h,a)||Lm(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},sQ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},oQ=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Zl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?jo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var x=i?i.indexOf(m):m;return{coordinate:a(x)+h,value:m,offset:h}});return p.filter(function(m){return!kx(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,x){return{coordinate:a(m)+h,value:m,index:x,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,x){return{coordinate:a(m)+h,value:i?i[m]:m,index:x,offset:h}})},d_=new WeakMap,Fy=function(e,r){if(typeof r!="function")return e;d_.has(e)||d_.set(e,new WeakMap);var n=d_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},lQ=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:Ng(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Tb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Pm(),realScaleType:"point"}:i==="category"?{scale:Ng(),realScaleType:"band"}:{scale:Tb(),realScaleType:"linear"};if(d0(a)){var d="scale".concat(cw(a));return{scale:(d$[d]||Pm)(),realScaleType:d$[d]?d:"point"}}return lr(a)?{scale:a}:{scale:Pm(),realScaleType:"point"}},A$=1e-4,cQ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-A$,o=Math.max(a[0],a[1])+A$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},tbe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},rbe=function(e,r){if(!r||r.length!==2||!wt(r[0])||!wt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!wt(e[0])||e[0]<n)&&(i[0]=n),(!wt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},nbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=kx(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},abe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=kx(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},ibe={sign:nbe,expand:Gfe,none:lf,silhouette:Wfe,wiggle:Kfe,positive:abe},sbe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=ibe[n],o=Hfe().keys(a).value(function(c,d){return+bi(c,d,0)}).order(yj).offset(i);return o(e)},obe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,x){var y,S=(y=x.type)!==null&&y!==void 0&&y.defaultProps?oa(oa({},x.type.defaultProps),x.props):x.props,N=S.stackId,w=S.hide;if(w)return m;var E=S[n],O=m[E]||{hasStack:!1,stackGroups:{}};if(Fa(N)){var R=O.stackGroups[N]||{numericAxisId:n,cateAxisId:a,items:[]};R.items.push(x),O.hasStack=!0,O.stackGroups[N]=R}else O.stackGroups[Cx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[x]};return oa(oa({},m),{},Uh({},E,O))},d),p={};return Object.keys(h).reduce(function(m,x){var y=h[x];if(y.hasStack){var S={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(N,w){var E=y.stackGroups[w];return oa(oa({},N),{},Uh({},w,{numericAxisId:n,cateAxisId:a,items:E.items,stackedData:sbe(e,E.items,i)}))},S)}return oa(oa({},m),{},Uh({},x,y))},p)},uQ=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=wve(h,i,c);return e.domain([Tw(p),_w(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),x=Sve(m,i,c);return{niceTicks:x}}return null};function E$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xr(a[e.dataKey])){var c=sb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=bi(a,xr(o)?e.dataKey:o);return xr(d)?null:e.scale(d)}var k$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=bi(o,r.dataKey,r.domain[c]);return xr(d)?null:r.scale(d)-i/2+a},lbe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},cbe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Fa(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},ube=function(e){return e.reduce(function(r,n){return[Tw(n.concat([r[0]]).filter(wt)),_w(n.concat([r[1]]).filter(wt))]},[1/0,-1/0])},dQ=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=ube(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},C$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fj=function(e,r,n){if(lr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(wt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(C$.test(e[0])){var i=+C$.exec(e[0])[1];a[0]=r[0]-i}else lr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(wt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(O$.test(e[1])){var o=+O$.exec(e[1])[1];a[1]=r[1]+o}else lr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Ib=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=s7(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},I$=function(e,r,n){return!e||!e.length||Px(e,ao(n,"type.defaultProps.domain"))?r:e},hQ=function(e,r){var n=e.type.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return oa(oa({},Qt(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:R7(e),value:bi(r,a),type:d,payload:r,chartType:h,hide:p})};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ul(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){fQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fQ(t,e,r){return e=dbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dbe(t){var e=hbe(t,"string");return Ig(e)=="symbol"?e:e+""}function hbe(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fbe(t,e){return xbe(t)||gbe(t,e)||mbe(t,e)||pbe()}function pbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mbe(t,e){if(t){if(typeof t=="string")return M$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M$(t,e)}}function M$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function xbe(t){if(Array.isArray(t))return t}var Rb=Math.PI/180,ybe=function(e){return e*180/Math.PI},Tn=function(e,r,n,a){return{x:e+Math.cos(-Rb*a)*n,y:r+Math.sin(-Rb*a)*n}},vbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},bbe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=Ao(e.cx,o,o/2),m=Ao(e.cy,c,c/2),x=vbe(o,c,n),y=Ao(e.innerRadius,x,0),S=Ao(e.outerRadius,x,x*.8),N=Object.keys(r);return N.reduce(function(w,E){var O=r[E],R=O.domain,P=O.reversed,I;if(xr(O.range))a==="angleAxis"?I=[d,h]:a==="radiusAxis"&&(I=[y,S]),P&&(I=[I[1],I[0]]);else{I=O.range;var k=I,A=fbe(k,2);d=A[0],h=A[1]}var j=lQ(O,i),C=j.realScaleType,U=j.scale;U.domain(R).range(I),cQ(U);var L=uQ(U,Ul(Ul({},O),{},{realScaleType:C})),$=Ul(Ul(Ul({},O),L),{},{range:I,radius:S,realScaleType:C,scale:U,cx:p,cy:m,innerRadius:y,outerRadius:S,startAngle:d,endAngle:h});return Ul(Ul({},w),{},fQ({},E,$))},{})},wbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Sbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=wbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:ybe(h),angleInRadian:h}},Nbe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},_be=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},D$=function(e,r){var n=e.x,a=e.y,i=Sbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=Nbe(r),m=p.startAngle,x=p.endAngle,y=c,S;if(m<=x){for(;y>x;)y-=360;for(;y<m;)y+=360;S=y>=m&&y<=x}else{for(;y>m;)y-=360;for(;y<x;)y+=360;S=y>=x&&y<=m}return S?Ul(Ul({},r),{},{radius:o,angle:_be(y,r)}):null},pQ=function(e){return!T.isValidElement(e)&&!lr(e)&&typeof e!="boolean"?e.className:""};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}var Tbe=["offset"];function jbe(t){return Cbe(t)||kbe(t)||Ebe(t)||Abe()}function Abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ebe(t,e){if(t){if(typeof t=="string")return qj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(t,e)}}function kbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cbe(t){if(Array.isArray(t))return qj(t)}function qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Obe(t,e){if(t==null)return{};var r=Ibe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ibe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){Rbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rbe(t,e,r){return e=Mbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mbe(t){var e=Dbe(t,"string");return Rg(e)=="symbol"?e:e+""}function Dbe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mg(){return Mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mg.apply(this,arguments)}var Pbe=function(e){var r=e.value,n=e.formatter,a=xr(e.children)?r:e.children;return lr(n)?n(a):a},Lbe=function(e,r){var n=jo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Bbe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,x=d.outerRadius,y=d.startAngle,S=d.endAngle,N=d.clockWise,w=(m+x)/2,E=Lbe(y,S),O=E>=0?1:-1,R,P;a==="insideStart"?(R=y+O*o,P=N):a==="insideEnd"?(R=S-O*o,P=!N):a==="end"&&(R=S+O*o,P=N),P=E<=0?P:!P;var I=Tn(h,p,w,R),k=Tn(h,p,w,R+(P?1:-1)*359),A="M".concat(I.x,",").concat(I.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(P?0:1,`,
    `).concat(k.x,",").concat(k.y),j=xr(e.id)?Cx("recharts-radial-line-"):e.id;return ie.createElement("text",Mg({},n,{dominantBaseline:"central",className:wr("recharts-radial-bar-label",c)}),ie.createElement("defs",null,ie.createElement("path",{id:j,d:A})),ie.createElement("textPath",{xlinkHref:"#".concat(j)},r))},$be=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,x=(p+m)/2;if(a==="outside"){var y=Tn(o,c,h+n,x),S=y.x,N=y.y;return{x:S,y:N,textAnchor:S>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,E=Tn(o,c,w,x),O=E.x,R=E.y;return{x:O,y:R,textAnchor:"middle",verticalAnchor:"middle"}},zbe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,x=m*a,y=m>0?"end":"start",S=m>0?"start":"end",N=h>=0?1:-1,w=N*a,E=N>0?"end":"start",O=N>0?"start":"end";if(i==="top"){var R={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:y};return $a($a({},R),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var P={x:c+h/2,y:d+p+x,textAnchor:"middle",verticalAnchor:S};return $a($a({},P),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var I={x:c-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return $a($a({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(i==="right"){var k={x:c+h+w,y:d+p/2,textAnchor:O,verticalAnchor:"middle"};return $a($a({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:p}:{})}var A=n?{width:h,height:p}:{};return i==="insideLeft"?$a({x:c+w,y:d+p/2,textAnchor:O,verticalAnchor:"middle"},A):i==="insideRight"?$a({x:c+h-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},A):i==="insideTop"?$a({x:c+h/2,y:d+x,textAnchor:"middle",verticalAnchor:S},A):i==="insideBottom"?$a({x:c+h/2,y:d+p-x,textAnchor:"middle",verticalAnchor:y},A):i==="insideTopLeft"?$a({x:c+w,y:d+x,textAnchor:O,verticalAnchor:S},A):i==="insideTopRight"?$a({x:c+h-w,y:d+x,textAnchor:E,verticalAnchor:S},A):i==="insideBottomLeft"?$a({x:c+w,y:d+p-x,textAnchor:O,verticalAnchor:y},A):i==="insideBottomRight"?$a({x:c+h-w,y:d+p-x,textAnchor:E,verticalAnchor:y},A):Qf(i)&&(wt(i.x)||Ld(i.x))&&(wt(i.y)||Ld(i.y))?$a({x:c+Ao(i.x,h),y:d+Ao(i.y,p),textAnchor:"end",verticalAnchor:"end"},A):$a({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Ube=function(e){return"cx"in e&&wt(e.cx)};function xi(t){var e=t.offset,r=e===void 0?5:e,n=Obe(t,Tbe),a=$a({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,x=a.textBreakAll;if(!i||xr(c)&&xr(d)&&!T.isValidElement(h)&&!lr(h))return null;if(T.isValidElement(h))return T.cloneElement(h,a);var y;if(lr(h)){if(y=T.createElement(h,a),T.isValidElement(y))return y}else y=Pbe(a);var S=Ube(i),N=Qt(a,!0);if(S&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Bbe(a,y,N);var w=S?$be(a):zbe(a);return ie.createElement(ff,Mg({className:wr("recharts-label",m)},N,w,{breakAll:x}),y)}xi.displayName="Label";var mQ=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,x=e.y,y=e.top,S=e.left,N=e.width,w=e.height,E=e.clockWise,O=e.labelViewBox;if(O)return O;if(wt(N)&&wt(w)){if(wt(m)&&wt(x))return{x:m,y:x,width:N,height:w};if(wt(y)&&wt(S))return{x:y,y:S,width:N,height:w}}return wt(m)&&wt(x)?{x:m,y:x,width:0,height:0}:wt(r)&&wt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},Vbe=function(e,r){return e?e===!0?ie.createElement(xi,{key:"label-implicit",viewBox:r}):Fa(e)?ie.createElement(xi,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===xi?T.cloneElement(e,{key:"label-implicit",viewBox:r}):ie.createElement(xi,{key:"label-implicit",content:e,viewBox:r}):lr(e)?ie.createElement(xi,{key:"label-implicit",content:e,viewBox:r}):Qf(e)?ie.createElement(xi,Mg({viewBox:r},e,{key:"label-implicit"})):null:null},Fbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=mQ(e),o=Rs(a,xi).map(function(d,h){return T.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=Vbe(e.label,r||i);return[c].concat(jbe(o))};xi.parseViewBox=mQ;xi.renderCallByParent=Fbe;var h_,L$;function qbe(){if(L$)return h_;L$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return h_=t,h_}var Hbe=qbe();const gQ=tn(Hbe);function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}var Gbe=["valueAccessor"],Wbe=["data","dataKey","clockWise","id","textBreakAll"];function Kbe(t){return Jbe(t)||Ybe(t)||Xbe(t)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xbe(t,e){if(t){if(typeof t=="string")return Hj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hj(t,e)}}function Ybe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jbe(t){if(Array.isArray(t))return Hj(t)}function Hj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mb(){return Mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mb.apply(this,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){Zbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zbe(t,e,r){return e=e2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e2e(t){var e=t2e(t,"string");return Dg(e)=="symbol"?e:e+""}function t2e(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z$(t,e){if(t==null)return{};var r=r2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var n2e=function(e){return Array.isArray(e.value)?gQ(e.value):e.value};function sc(t){var e=t.valueAccessor,r=e===void 0?n2e:e,n=z$(t,Gbe),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=z$(n,Wbe);return!a||!a.length?null:ie.createElement(Qr,{className:"recharts-label-list"},a.map(function(p,m){var x=xr(i)?r(p,m):bi(p&&p.payload,i),y=xr(c)?{}:{id:"".concat(c,"-").concat(m)};return ie.createElement(xi,Mb({},Qt(p,!0),h,y,{parentViewBox:p.parentViewBox,value:x,textBreakAll:d,viewBox:xi.parseViewBox(xr(o)?p:$$($$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}sc.displayName="LabelList";function a2e(t,e){return t?t===!0?ie.createElement(sc,{key:"labelList-implicit",data:e}):ie.isValidElement(t)||lr(t)?ie.createElement(sc,{key:"labelList-implicit",data:e,content:t}):Qf(t)?ie.createElement(sc,Mb({data:e},t,{key:"labelList-implicit"})):null:null}function i2e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Rs(n,sc).map(function(o,c){return T.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=a2e(t.label,e);return[i].concat(Kbe(a))}sc.renderCallByParent=i2e;function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function Gj(){return Gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gj.apply(this,arguments)}function U$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function V$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(r),!0).forEach(function(n){s2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s2e(t,e,r){return e=o2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o2e(t){var e=l2e(t,"string");return Pg(e)=="symbol"?e:e+""}function l2e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c2e=function(e,r){var n=jo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},qy=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/Rb,x=h?i:i+o*m,y=Tn(r,n,p,x),S=Tn(r,n,a,x),N=h?i-o*m:i,w=Tn(r,n,p*Math.cos(m*Rb),N);return{center:y,circleTangency:S,lineTangency:w,theta:m}},xQ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=c2e(o,c),h=o+d,p=Tn(r,n,i,o),m=Tn(r,n,i,h),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var y=Tn(r,n,a,o),S=Tn(r,n,a,h);x+="L ".concat(S.x,",").concat(S.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(y.x,",").concat(y.y," Z")}else x+="L ".concat(r,",").concat(n," Z");return x},u2e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=jo(p-h),x=qy({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),y=x.circleTangency,S=x.lineTangency,N=x.theta,w=qy({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),E=w.circleTangency,O=w.lineTangency,R=w.theta,P=d?Math.abs(h-p):Math.abs(h-p)-N-R;if(P<0)return c?"M ".concat(S.x,",").concat(S.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):xQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var I="M ".concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
  `);if(a>0){var k=qy({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=k.circleTangency,j=k.lineTangency,C=k.theta,U=qy({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),L=U.circleTangency,$=U.lineTangency,B=U.theta,G=d?Math.abs(h-p):Math.abs(h-p)-C-B;if(G<0&&o===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(m>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},d2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yQ=function(e){var r=V$(V$({},d2e),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,x=r.className;if(o<i||p===m)return null;var y=wr("recharts-sector",x),S=o-i,N=Ao(c,S,0,!0),w;return N>0&&Math.abs(p-m)<360?w=u2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,S/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=xQ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),ie.createElement("path",Gj({},Qt(r,!0),{className:y,d:w,role:"img"}))};function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function Wj(){return Wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wj.apply(this,arguments)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){h2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h2e(t,e,r){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f2e(t){var e=p2e(t,"string");return Lg(e)=="symbol"?e:e+""}function p2e(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H$={curveBasisClosed:Mfe,curveBasisOpen:Dfe,curveBasis:Rfe,curveBumpX:vfe,curveBumpY:bfe,curveLinearClosed:Pfe,curveLinear:dw,curveMonotoneX:Lfe,curveMonotoneY:Bfe,curveNatural:$fe,curveStep:zfe,curveStepAfter:Vfe,curveStepBefore:Ufe},Hy=function(e){return e.x===+e.x&&e.y===+e.y},cm=function(e){return e.x},um=function(e){return e.y},m2e=function(e,r){if(lr(e))return e;var n="curve".concat(cw(e));return(n==="curveMonotone"||n==="curveBump")&&r?H$["".concat(n).concat(r==="vertical"?"Y":"X")]:H$[n]||dw},g2e=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=m2e(n,c),m=h?i.filter(function(N){return Hy(N)}):i,x;if(Array.isArray(o)){var y=h?o.filter(function(N){return Hy(N)}):o,S=m.map(function(N,w){return q$(q$({},N),{},{base:y[w]})});return c==="vertical"?x=Py().y(um).x1(cm).x0(function(N){return N.base.x}):x=Py().x(cm).y1(um).y0(function(N){return N.base.y}),x.defined(Hy).curve(p),x(S)}return c==="vertical"&&wt(o)?x=Py().y(um).x1(cm).x0(o):wt(o)?x=Py().x(cm).y1(um).y0(o):x=gW().x(cm).y(um),x.defined(Hy).curve(p),x(m)},Kj=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?g2e(e):a;return T.createElement("path",Wj({},Qt(e,!1),ob(e),{className:wr("recharts-curve",r),d:o,ref:i}))},f_={exports:{}},p_,G$;function x2e(){if(G$)return p_;G$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return p_=t,p_}var m_,W$;function y2e(){if(W$)return m_;W$=1;var t=x2e();function e(){}function r(){}return r.resetWarningCache=e,m_=function(){function n(o,c,d,h,p,m){if(m!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},m_}var K$;function v2e(){return K$||(K$=1,f_.exports=y2e()()),f_.exports}var b2e=v2e();const ln=tn(b2e),{getOwnPropertyNames:w2e,getOwnPropertySymbols:S2e}=Object,{hasOwnProperty:N2e}=Object.prototype;function g_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Gy(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function _2e(t){return t!=null?t[Symbol.toStringTag]:void 0}function Q$(t){return w2e(t).concat(S2e(t))}const T2e=Object.hasOwn||((t,e)=>N2e.call(t,e));function k0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const j2e="__v",A2e="__o",E2e="_owner",{getOwnPropertyDescriptor:X$,keys:Y$}=Object;function k2e(t,e){return t.byteLength===e.byteLength&&Db(new Uint8Array(t),new Uint8Array(e))}function C2e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function O2e(t,e){return t.byteLength===e.byteLength&&Db(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function I2e(t,e){return k0(t.getTime(),e.getTime())}function R2e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function M2e(t,e){return t===e}function J$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const x=o.value,y=c.value;if(r.equals(x[0],y[0],d,m,t,e,r)&&r.equals(x[1],y[1],x[0],y[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const D2e=k0;function P2e(t,e,r){const n=Y$(t);let a=n.length;if(Y$(e).length!==a)return!1;for(;a-- >0;)if(!vQ(t,e,r,n[a]))return!1;return!0}function dm(t,e,r){const n=Q$(t);let a=n.length;if(Q$(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!vQ(t,e,r,i)||(o=X$(t,i),c=X$(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function L2e(t,e){return k0(t.valueOf(),e.valueOf())}function B2e(t,e){return t.source===e.source&&t.flags===e.flags}function Z$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function Db(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function $2e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function vQ(t,e,r,n){return(n===E2e||n===A2e||n===j2e)&&(t.$$typeof||e.$$typeof)?!0:T2e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const z2e="[object ArrayBuffer]",U2e="[object Arguments]",V2e="[object Boolean]",F2e="[object DataView]",q2e="[object Date]",H2e="[object Error]",G2e="[object Map]",W2e="[object Number]",K2e="[object Object]",Q2e="[object RegExp]",X2e="[object Set]",Y2e="[object String]",J2e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Z2e="[object URL]",ewe=Object.prototype.toString;function twe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:S}){return function(w,E,O){if(w===E)return!0;if(w==null||E==null)return!1;const R=typeof w;if(R!==typeof E)return!1;if(R!=="object")return R==="number"?c(w,E,O):R==="function"?i(w,E,O):!1;const P=w.constructor;if(P!==E.constructor)return!1;if(P===Object)return d(w,E,O);if(Array.isArray(w))return e(w,E,O);if(P===Date)return n(w,E,O);if(P===RegExp)return p(w,E,O);if(P===Map)return o(w,E,O);if(P===Set)return m(w,E,O);const I=ewe.call(w);if(I===q2e)return n(w,E,O);if(I===Q2e)return p(w,E,O);if(I===G2e)return o(w,E,O);if(I===X2e)return m(w,E,O);if(I===K2e)return typeof w.then!="function"&&typeof E.then!="function"&&d(w,E,O);if(I===Z2e)return y(w,E,O);if(I===H2e)return a(w,E,O);if(I===U2e)return d(w,E,O);if(J2e[I])return x(w,E,O);if(I===z2e)return t(w,E,O);if(I===F2e)return r(w,E,O);if(I===V2e||I===W2e||I===Y2e)return h(w,E,O);if(S){let k=S[I];if(!k){const A=_2e(w);A&&(k=S[A])}if(k)return k(w,E,O)}return!1}}function rwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:k2e,areArraysEqual:r?dm:C2e,areDataViewsEqual:O2e,areDatesEqual:I2e,areErrorsEqual:R2e,areFunctionsEqual:M2e,areMapsEqual:r?g_(J$,dm):J$,areNumbersEqual:D2e,areObjectsEqual:r?dm:P2e,arePrimitiveWrappersEqual:L2e,areRegExpsEqual:B2e,areSetsEqual:r?g_(Z$,dm):Z$,areTypedArraysEqual:r?g_(Db,dm):Db,areUrlsEqual:$2e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Gy(n.areArraysEqual),i=Gy(n.areMapsEqual),o=Gy(n.areObjectsEqual),c=Gy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function nwe(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function awe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const iwe=Xu();Xu({strict:!0});Xu({circular:!0});Xu({circular:!0,strict:!0});Xu({createInternalComparator:()=>k0});Xu({strict:!0,createInternalComparator:()=>k0});Xu({circular:!0,createInternalComparator:()=>k0});Xu({circular:!0,createInternalComparator:()=>k0,strict:!0});function Xu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=rwe(t),o=twe(i),c=r?r(o):nwe(o);return awe({circular:e,comparator:o,createState:n,equals:c,strict:a})}function swe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function ez(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):swe(a)};requestAnimationFrame(n)}function Qj(t){"@babel/helpers - typeof";return Qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qj(t)}function owe(t){return dwe(t)||uwe(t)||cwe(t)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(t,e){if(t){if(typeof t=="string")return tz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tz(t,e)}}function tz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dwe(t){if(Array.isArray(t))return t}function hwe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=owe(o),d=c[0],h=c.slice(1);if(typeof d=="number"){ez(a.bind(null,h),d);return}a(d),ez(a.bind(null,h));return}Qj(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(r),!0).forEach(function(n){bQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bQ(t,e,r){return e=fwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fwe(t){var e=pwe(t,"string");return Bg(e)==="symbol"?e:String(e)}function pwe(t,e){if(Bg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mwe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},gwe=function(e){return e},xwe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Bm=function(e,r){return Object.keys(r).reduce(function(n,a){return nz(nz({},n),{},bQ({},a,e(a,r[a])))},{})},az=function(e,r,n){return e.map(function(a){return"".concat(xwe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function ywe(t,e){return wwe(t)||bwe(t,e)||wQ(t,e)||vwe()}function vwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function wwe(t){if(Array.isArray(t))return t}function Swe(t){return Twe(t)||_we(t)||wQ(t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wQ(t,e){if(t){if(typeof t=="string")return Xj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xj(t,e)}}function _we(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Twe(t){if(Array.isArray(t))return Xj(t)}function Xj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pb=1e-4,SQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},NQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},iz=function(e,r){return function(n){var a=SQ(e,r);return NQ(a,n)}},jwe=function(e,r){return function(n){var a=SQ(e,r),i=[].concat(Swe(a.map(function(o,c){return o*c}).slice(1)),[0]);return NQ(i,n)}},sz=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=ywe(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=iz(a,o),x=iz(i,c),y=jwe(a,o),S=function(E){return E>1?1:E<0?0:E},N=function(E){for(var O=E>1?1:E,R=O,P=0;P<8;++P){var I=m(R)-O,k=y(R);if(Math.abs(I-O)<Pb||k<Pb)return x(R);R=S(R-I/k)}return x(R)};return N.isStepper=!1,N},Awe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,x){var y=-(p-m)*n,S=x*i,N=x+(y-S)*c/1e3,w=x*c/1e3+p;return Math.abs(w-m)<Pb&&Math.abs(N)<Pb?[m,0]:[w,N]};return d.isStepper=!0,d.dt=c,d},Ewe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sz(a);case"spring":return Awe();default:if(a.split("(")[0]==="cubic-bezier")return sz(a)}return typeof a=="function"?a:null};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function oz(t){return Owe(t)||Cwe(t)||_Q(t)||kwe()}function kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Owe(t){if(Array.isArray(t))return Jj(t)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){Yj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yj(t,e,r){return e=Iwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iwe(t){var e=Rwe(t,"string");return $g(e)==="symbol"?e:String(e)}function Rwe(t,e){if($g(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mwe(t,e){return Lwe(t)||Pwe(t,e)||_Q(t,e)||Dwe()}function Dwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Q(t,e){if(t){if(typeof t=="string")return Jj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jj(t,e)}}function Jj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Lwe(t){if(Array.isArray(t))return t}var Lb=function(e,r,n){return e+(r-e)*n},Zj=function(e){var r=e.from,n=e.to;return r!==n},Bwe=function t(e,r,n){var a=Bm(function(i,o){if(Zj(o)){var c=e(o.from,o.to,o.velocity),d=Mwe(c,2),h=d[0],p=d[1];return mi(mi({},o),{},{from:h,velocity:p})}return o},r);return n<1?Bm(function(i,o){return Zj(o)?mi(mi({},o),{},{velocity:Lb(o.velocity,a[i].velocity,n),from:Lb(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const $we=(function(t,e,r,n,a){var i=mwe(t,e),o=i.reduce(function(w,E){return mi(mi({},w),{},Yj({},E,[t[E],e[E]]))},{}),c=i.reduce(function(w,E){return mi(mi({},w),{},Yj({},E,{from:t[E],velocity:0,to:e[E]}))},{}),d=-1,h,p,m=function(){return null},x=function(){return Bm(function(E,O){return O.from},c)},y=function(){return!Object.values(c).filter(Zj).length},S=function(E){h||(h=E);var O=E-h,R=O/r.dt;c=Bwe(r,c,R),a(mi(mi(mi({},t),e),x())),h=E,y()||(d=requestAnimationFrame(m))},N=function(E){p||(p=E);var O=(E-p)/n,R=Bm(function(I,k){return Lb.apply(void 0,oz(k).concat([r(O)]))},o);if(a(mi(mi(mi({},t),e),R)),O<1)d=requestAnimationFrame(m);else{var P=Bm(function(I,k){return Lb.apply(void 0,oz(k).concat([r(1)]))},o);a(mi(mi(mi({},t),e),P))}};return m=r.isStepper?S:N,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}var zwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Uwe(t,e){if(t==null)return{};var r=Vwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vwe(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function x_(t){return Gwe(t)||Hwe(t)||qwe(t)||Fwe()}function Fwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qwe(t,e){if(t){if(typeof t=="string")return eA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eA(t,e)}}function Hwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gwe(t){if(Array.isArray(t))return eA(t)}function eA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(r),!0).forEach(function(n){Nm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nm(t,e,r){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TQ(n.key),n)}}function Qwe(t,e,r){return e&&Kwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TQ(t){var e=Xwe(t,"string");return yf(e)==="symbol"?e:String(e)}function Xwe(t,e){if(yf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ywe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tA(t,e)}function tA(t,e){return tA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tA(t,e)}function Jwe(t){var e=Zwe();return function(){var n=Bb(t),a;if(e){var i=Bb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rA(this,a)}}function rA(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nA(t)}function nA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}var ul=(function(t){Ywe(r,t);var e=Jwe(r);function r(n,a){var i;Wwe(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,x=o.children,y=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(nA(i)),i.changeStyle=i.changeStyle.bind(nA(i)),!c||y<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:p}),rA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof x=="function")return i.state={style:h},rA(i);i.state={style:d?Nm({},d,h):h}}else i.state={style:{}};return i}return Qwe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,x=this.state.style;if(c){if(!o){var y={style:d?Nm({},d,p):p};this.state&&x&&(d&&x[d]!==p||!d&&x!==p)&&this.setState(y);return}if(!(iwe(a.to,p)&&a.canBegin&&a.isActive)){var S=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=S||h?m:a.to;if(this.state&&x){var w={style:d?Nm({},d,N):N};(d&&x[d]!==N||!d&&x!==N)&&this.setState(w)}this.runAnimation(wo(wo({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,x=a.onAnimationStart,y=$we(o,c,Ewe(h),d,this.changeStyle),S=function(){i.stopJSAnimation=y()};this.manager.start([x,p,S,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,x=m===void 0?0:m,y=function(N,w,E){if(E===0)return N;var O=w.duration,R=w.easing,P=R===void 0?"ease":R,I=w.style,k=w.properties,A=w.onAnimationEnd,j=E>0?o[E-1]:w,C=k||Object.keys(I);if(typeof P=="function"||P==="spring")return[].concat(x_(N),[i.runJSAnimation.bind(i,{from:j.style,to:I,duration:O,easing:P}),O]);var U=az(C,O,P),L=wo(wo(wo({},j.style),I),{},{transition:U});return[].concat(x_(N),[L,O,A]).filter(gwe)};return this.manager.start([d].concat(x_(o.reduce(y,[p,Math.max(x,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=hwe());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,x=a.steps,y=a.children,S=this.manager;if(this.unSubscribe=S.subscribe(this.handleStyleChange),typeof h=="function"||typeof y=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var N=c?Nm({},c,d):d,w=az(Object.keys(N),o,h);S.start([p,i,wo(wo({},N),{},{transition:w}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=Uwe(a,zwe),h=T.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(y){var S=y.props,N=S.style,w=N===void 0?{}:N,E=S.className,O=T.cloneElement(y,wo(wo({},d),{},{style:wo(wo({},w),p),className:E}));return O};return h===1?m(T.Children.only(i)):ie.createElement("div",null,T.Children.map(i,function(x){return m(x)}))}}]),r})(T.PureComponent);ul.displayName="Animate";ul.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ul.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function $b(){return $b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$b.apply(this,arguments)}function e4e(t,e){return a4e(t)||n4e(t,e)||r4e(t,e)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r4e(t,e){if(t){if(typeof t=="string")return uz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uz(t,e)}}function uz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function a4e(t){if(Array.isArray(t))return t}function dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(r),!0).forEach(function(n){i4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i4e(t,e,r){return e=s4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s4e(t){var e=o4e(t,"string");return zg(e)=="symbol"?e:e+""}function o4e(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fz=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],x=0,y=4;x<y;x++)m[x]=i[x]>o?o:i[x];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);p="M ".concat(e,",").concat(r+c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+d*S,",").concat(r,`
            L `).concat(e+n-d*S,",").concat(r,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*S,`
            L `).concat(e+n,",").concat(r+a-c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n-d*S,",").concat(r+a,`
            L `).concat(e+d*S,",").concat(r+a,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*S," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},l4e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),x=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=x}return!1},c4e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},M7=function(e){var r=hz(hz({},c4e),e),n=T.useRef(),a=T.useState(-1),i=e4e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&c(P)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,x=r.radius,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,E=r.isAnimationActive,O=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var R=wr("recharts-rectangle",y);return O?ie.createElement(ul,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:N,animationEasing:S,isActive:O},function(P){var I=P.width,k=P.height,A=P.x,j=P.y;return ie.createElement(ul,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,isActive:E,easing:S},ie.createElement("path",$b({},Qt(r,!0),{className:R,d:fz(A,j,I,k,x),ref:n})))}):ie.createElement("path",$b({},Qt(r,!0),{className:R,d:fz(d,h,p,m,x)}))},u4e=["points","className","baseLinePoints","connectNulls"];function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jh.apply(this,arguments)}function d4e(t,e){if(t==null)return{};var r=h4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pz(t){return g4e(t)||m4e(t)||p4e(t)||f4e()}function f4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4e(t,e){if(t){if(typeof t=="string")return aA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aA(t,e)}}function m4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g4e(t){if(Array.isArray(t))return aA(t)}function aA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var mz=function(e){return e&&e.x===+e.x&&e.y===+e.y},x4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){mz(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),mz(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},$m=function(e,r){var n=x4e(e);r&&(n=[n.reduce(function(i,o){return[].concat(pz(i),pz(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},y4e=function(e,r,n){var a=$m(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat($m(r.reverse(),n).slice(1))},jQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=d4e(e,u4e);if(!r||!r.length)return null;var c=wr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=y4e(r,a,i);return ie.createElement("g",{className:c},ie.createElement("path",jh({},Qt(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?ie.createElement("path",jh({},Qt(o,!0),{fill:"none",d:$m(r,i)})):null,d?ie.createElement("path",jh({},Qt(o,!0),{fill:"none",d:$m(a,i)})):null)}var p=$m(r,i);return ie.createElement("path",jh({},Qt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function iA(){return iA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iA.apply(this,arguments)}var Ew=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=wr("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",iA({},Qt(e,!1),ob(e),{className:o,cx:r,cy:n,r:a})):null};function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}var v4e=["x","y","top","left","width","height","className"];function sA(){return sA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sA.apply(this,arguments)}function gz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(r),!0).forEach(function(n){w4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w4e(t,e,r){return e=S4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S4e(t){var e=N4e(t,"string");return Ug(e)=="symbol"?e:e+""}function N4e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _4e(t,e){if(t==null)return{};var r=T4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function T4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var j4e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},A4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,x=e.height,y=x===void 0?0:x,S=e.className,N=_4e(e,v4e),w=b4e({x:n,y:i,top:c,left:h,width:m,height:y},N);return!wt(n)||!wt(i)||!wt(m)||!wt(y)||!wt(c)||!wt(h)?null:ie.createElement("path",sA({},Qt(w,!0),{className:wr("recharts-cross",S),d:j4e(n,i,m,y,c,h)}))},E4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function k4e(t,e){if(t==null)return{};var r=C4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xc.apply(this,arguments)}function xz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xz(Object(r),!0).forEach(function(n){O4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O4e(t,e,r){return e=I4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I4e(t){var e=R4e(t,"string");return Vg(e)=="symbol"?e:e+""}function R4e(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M4e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=Tn(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},D4e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Fg({stroke:"#ccc"},Qt(e,!1));return ie.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=Tn(r,n,a,h),m=Tn(r,n,i,h);return ie.createElement("line",xc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},P4e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Fg(Fg({stroke:"#ccc"},Qt(e,!1)),{},{fill:"none"});return ie.createElement("circle",xc({},o,{className:wr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},L4e=function(e){var r=e.radius,n=e.index,a=Fg(Fg({stroke:"#ccc"},Qt(e,!1)),{},{fill:"none"});return ie.createElement("path",xc({},a,{className:wr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:M4e(r,e.cx,e.cy,e.polarAngles)}))},B4e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:ie.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?ie.createElement(P4e,xc({key:o},e,{radius:a,index:i})):ie.createElement(L4e,xc({key:o},e,{radius:a,index:i}))}))},AQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,x=e.radialLines,y=x===void 0?!0:x,S=k4e(e,E4e);return h<=0?null:ie.createElement("g",{className:"recharts-polar-grid"},ie.createElement(D4e,xc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)),ie.createElement(B4e,xc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)))};AQ.displayName="PolarGrid";var y_,yz;function $4e(){if(yz)return y_;yz=1;var t=Nw(),e=zK(),r=gl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return y_=n,y_}var z4e=$4e();const U4e=tn(z4e);var v_,vz;function V4e(){if(vz)return v_;vz=1;var t=Nw(),e=gl(),r=UK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return v_=n,v_}var F4e=V4e();const q4e=tn(F4e);var H4e=["cx","cy","angle","ticks","axisLine"],G4e=["ticks","tick","angle","tickFormatter","stroke"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zm.apply(this,arguments)}function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){kw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wz(t,e){if(t==null)return{};var r=W4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function K4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kQ(n.key),n)}}function Q4e(t,e,r){return e&&Sz(t.prototype,e),r&&Sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function X4e(t,e,r){return e=zb(e),Y4e(t,EQ()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function Y4e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J4e(t)}function J4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EQ=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function Z4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oA(t,e)}function oA(t,e){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oA(t,e)}function kw(t,e,r){return e=kQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kQ(t){var e=e5e(t,"string");return vf(e)=="symbol"?e:e+""}function e5e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bx=(function(t){function e(){return K4e(this,e),X4e(this,e,arguments)}return Z4e(e,t),Q4e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return Tn(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=U4e(c,function(p){return p.coordinate||0}),h=q4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=wz(n,H4e),p=c.reduce(function(S,N){return[Math.min(S[0],N.coordinate),Math.max(S[1],N.coordinate)]},[1/0,-1/0]),m=Tn(a,i,p[0],o),x=Tn(a,i,p[1],o),y=Td(Td(Td({},Qt(h,!1)),{},{fill:"none"},Qt(d,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return ie.createElement("line",zm({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=wz(a,G4e),m=this.getTickTextAnchor(),x=Qt(p,!1),y=Qt(o,!1),S=i.map(function(N,w){var E=n.getTickValueCoord(N),O=Td(Td(Td(Td({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},x),{},{stroke:"none",fill:h},y),{},{index:w},E),{},{payload:N});return ie.createElement(Qr,zm({className:wr("recharts-polar-radius-axis-tick",pQ(o)),key:"tick-".concat(N.coordinate)},h0(n.props,N,w)),e.renderTickItem(o,O,d?d(N.value,w):N.value))});return ie.createElement(Qr,{className:"recharts-polar-radius-axis-ticks"},S)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:ie.createElement(Qr,{className:wr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),xi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,a):lr(n)?o=n(a):o=ie.createElement(ff,zm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(T.PureComponent);kw(Bx,"displayName","PolarRadiusAxis");kw(Bx,"axisType","radiusAxis");kw(Bx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dd.apply(this,arguments)}function Nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(r),!0).forEach(function(n){Cw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OQ(n.key),n)}}function r5e(t,e,r){return e&&_z(t.prototype,e),r&&_z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n5e(t,e,r){return e=Ub(e),a5e(t,CQ()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function a5e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i5e(t)}function i5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CQ=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function s5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lA(t,e)}function Cw(t,e,r){return e=OQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OQ(t){var e=o5e(t,"string");return bf(e)=="symbol"?e:e+""}function o5e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l5e=Math.PI/180,Tz=1e-5,$x=(function(t){function e(){return t5e(this,e),n5e(this,e,arguments)}return s5e(e,t),r5e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=Tn(i,o,c,n.coordinate),x=Tn(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*l5e),o;return i>Tz?o=a==="outer"?"start":"end":i<-Tz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=jd(jd({},Qt(this.props,!1)),{},{fill:"none"},Qt(c,!1));if(d==="circle")return ie.createElement(Ew,Dd({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(x){return Tn(a,i,o,x.coordinate)});return ie.createElement(jQ,Dd({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=Qt(this.props,!1),m=Qt(o,!1),x=jd(jd({},p),{},{fill:"none"},Qt(c,!1)),y=i.map(function(S,N){var w=n.getTickLineCoord(S),E=n.getTickTextAnchor(S),O=jd(jd(jd({textAnchor:E},p),{},{stroke:"none",fill:h},m),{},{index:N,payload:S,x:w.x2,y:w.y2});return ie.createElement(Qr,Dd({className:wr("recharts-polar-angle-axis-tick",pQ(o)),key:"tick-".concat(S.coordinate)},h0(n.props,S,N)),c&&ie.createElement("line",Dd({className:"recharts-polar-angle-axis-tick-line"},x,w)),o&&e.renderTickItem(o,O,d?d(S.value,N):S.value))});return ie.createElement(Qr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:ie.createElement(Qr,{className:wr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,a):lr(n)?o=n(a):o=ie.createElement(ff,Dd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(T.PureComponent);Cw($x,"displayName","PolarAngleAxis");Cw($x,"axisType","angleAxis");Cw($x,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var b_,jz;function c5e(){if(jz)return b_;jz=1;var t=$W(),e=t(Object.getPrototypeOf,Object);return b_=e,b_}var w_,Az;function u5e(){if(Az)return w_;Az=1;var t=Sc(),e=c5e(),r=Nc(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var x=c.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return w_=h,w_}var d5e=u5e();const h5e=tn(d5e);var S_,Ez;function f5e(){if(Ez)return S_;Ez=1;var t=Sc(),e=Nc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return S_=n,S_}var p5e=f5e();const m5e=tn(p5e);function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vb.apply(this,arguments)}function g5e(t,e){return b5e(t)||v5e(t,e)||y5e(t,e)||x5e()}function x5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y5e(t,e){if(t){if(typeof t=="string")return kz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kz(t,e)}}function kz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function b5e(t){if(Array.isArray(t))return t}function Cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cz(Object(r),!0).forEach(function(n){w5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w5e(t,e,r){return e=S5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S5e(t){var e=N5e(t,"string");return qg(e)=="symbol"?e:e+""}function N5e(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iz=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},_5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T5e=function(e){var r=Oz(Oz({},_5e),e),n=T.useRef(),a=T.useState(-1),i=g5e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&c(R)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,x=r.height,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,E=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||x!==+x||p===0&&m===0||x===0)return null;var O=wr("recharts-trapezoid",y);return E?ie.createElement(ul,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:x,x:d,y:h},duration:N,animationEasing:S,isActive:E},function(R){var P=R.upperWidth,I=R.lowerWidth,k=R.height,A=R.x,j=R.y;return ie.createElement(ul,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,easing:S},ie.createElement("path",Vb({},Qt(r,!0),{className:O,d:Iz(A,j,P,I,k),ref:n})))}):ie.createElement("g",null,ie.createElement("path",Vb({},Qt(r,!0),{className:O,d:Iz(d,h,p,m,x)})))},j5e=["option","shapeType","propTransformer","activeClassName","isActive"];function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function A5e(t,e){if(t==null)return{};var r=E5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){k5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k5e(t,e,r){return e=C5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C5e(t){var e=O5e(t,"string");return Hg(e)=="symbol"?e:e+""}function O5e(t,e){if(Hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I5e(t,e){return Fb(Fb({},e),t)}function R5e(t,e){return t==="symbols"}function Mz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ie.createElement(M7,r);case"trapezoid":return ie.createElement(T5e,r);case"sector":return ie.createElement(yQ,r);case"symbols":if(R5e(e))return ie.createElement(fw,r);break;default:return null}}function M5e(t){return T.isValidElement(t)?t.props:t}function cA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?I5e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=A5e(t,j5e),h;if(T.isValidElement(e))h=T.cloneElement(e,Fb(Fb({},d),M5e(e)));else if(lr(e))h=e(d);else if(h5e(e)&&!m5e(e)){var p=a(e,d);h=ie.createElement(Mz,{shapeType:r,elementProps:p})}else{var m=d;h=ie.createElement(Mz,{shapeType:r,elementProps:m})}return c?ie.createElement(Qr,{className:o},h):h}function Ow(t,e){return e!=null&&"trapezoids"in t.props}function Iw(t,e){return e!=null&&"sectors"in t.props}function Gg(t,e){return e!=null&&"points"in t.props}function D5e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function P5e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function L5e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function B5e(t,e){var r;return Ow(t,e)?r=D5e:Iw(t,e)?r=P5e:Gg(t,e)&&(r=L5e),r}function $5e(t,e){var r;return Ow(t,e)?r="trapezoids":Iw(t,e)?r="sectors":Gg(t,e)&&(r="points"),r}function z5e(t,e){if(Ow(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Iw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Gg(t,e)?e.payload:{}}function U5e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=$5e(r,e),i=z5e(r,e),o=n.filter(function(d,h){var p=Px(i,d),m=r.props[a].filter(function(S){var N=B5e(r,e);return N(S,e)}),x=r.props[a].indexOf(m[m.length-1]),y=h===x;return p&&y}),c=n.indexOf(o[o.length-1]);return c}var N_,Dz;function V5e(){if(Dz)return N_;Dz=1;function t(e){return e&&e.length?e[0]:void 0}return N_=t,N_}var __,Pz;function F5e(){return Pz||(Pz=1,__=V5e()),__}var q5e=F5e();const H5e=tn(q5e);var G5e=["key"];function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function W5e(t,e){if(t==null)return{};var r=K5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qb.apply(this,arguments)}function Lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(r),!0).forEach(function(n){ql(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RQ(n.key),n)}}function X5e(t,e,r){return e&&Bz(t.prototype,e),r&&Bz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y5e(t,e,r){return e=Hb(e),J5e(t,IQ()?Reflect.construct(e,r||[],Hb(t).constructor):e.apply(t,r))}function J5e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z5e(t)}function Z5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IQ=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(t)}function e3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uA(t,e)}function ql(t,e,r){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RQ(t){var e=t3e(t,"string");return wf(e)=="symbol"?e:e+""}function t3e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zx=(function(t){function e(){var r;Q5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Y5e(this,e,[].concat(a)),ql(r,"state",{isAnimationFinished:!1}),ql(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),lr(o)&&o()}),ql(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),lr(o)&&o()}),ql(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),ql(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return e3e(e,t),X5e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Qt(this.props,!1),d=Qt(i,!0),h=n.map(function(p,m){var x=Pi(Pi(Pi({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,x)});return ie.createElement(Qr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return ie.isValidElement(i)?p=ie.cloneElement(i,Pi(Pi({},this.props),{},{points:n})):lr(i)?p=i(Pi(Pi({},this.props),{},{points:n})):p=ie.createElement(jQ,qb({},Qt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),ie.createElement(Qr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ie.createElement(ul,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=m&&m.length/i.length,N=i.map(function(w,E){var O=m&&m[Math.floor(E*S)];if(O){var R=ts(O.x,w.x),P=ts(O.y,w.y);return Pi(Pi({},w),{},{x:R(y),y:P(y)})}var I=ts(w.cx,w.x),k=ts(w.cy,w.y);return Pi(Pi({},w),{},{x:I(y),y:k(y)})});return n.renderPolygonStatically(N)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!Px(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=wr("recharts-radar",i);return ie.createElement(Qr,{className:h},this.renderPolygon(),(!c||d)&&sc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(ie.isValidElement(n))i=ie.cloneElement(n,a);else if(lr(n))i=n(a);else{var o=a.key,c=W5e(a,G5e);i=ie.createElement(Ew,qb({},c,{key:o,className:wr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(T.PureComponent);ql(zx,"displayName","Radar");ql(zx,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!j0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ql(zx,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(x,y){var S=bi(x,r.dataKey,y),N=bi(x,a),w=r.scale(S)+p,E=Array.isArray(N)?gQ(N):N,O=xr(E)?void 0:e.scale(E);Array.isArray(N)&&N.length>=2&&(d=!0),h.push(Pi(Pi({},Tn(o,c,O,w)),{},{name:S,value:N,cx:o,cy:c,radius:O,angle:w,payload:x}))});var m=[];return d&&h.forEach(function(x){if(Array.isArray(x.value)){var y=H5e(x.value),S=xr(y)?void 0:e.scale(y);m.push(Pi(Pi({},x),{},{radius:S},Tn(o,c,S,x.angle)))}else m.push(x)}),{points:h,isRange:d,baseLinePoints:m}});var T_,$z;function r3e(){if($z)return T_;$z=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return T_=r,T_}var j_,zz;function MQ(){if(zz)return j_;zz=1;var t=tK(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return j_=n,j_}var A_,Uz;function n3e(){if(Uz)return A_;Uz=1;var t=r3e(),e=gw(),r=MQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return A_=n,A_}var E_,Vz;function a3e(){if(Vz)return E_;Vz=1;var t=n3e(),e=t();return E_=e,E_}var i3e=a3e();const Gb=tn(i3e);function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function Fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(r),!0).forEach(function(n){DQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DQ(t,e,r){return e=s3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s3e(t){var e=o3e(t,"string");return Wg(e)=="symbol"?e:e+""}function o3e(t,e){if(Wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l3e=["Webkit","Moz","O","ms"],c3e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=l3e.reduce(function(i,o){return qz(qz({},i),{},DQ({},o+n,r))},{});return a[e]=r,a};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wb.apply(this,arguments)}function Hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hz(Object(r),!0).forEach(function(n){Ts(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function d3e(t,e,r){return e&&Gz(t.prototype,e),r&&Gz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h3e(t,e,r){return e=Kb(e),f3e(t,PQ()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function f3e(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p3e(t)}function p3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PQ=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}function m3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}function dA(t,e){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dA(t,e)}function Ts(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=g3e(t,"string");return Sf(e)=="symbol"?e:e+""}function g3e(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x3e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=Pm().domain(Gb(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},Wz=function(e){return e.changedTouches&&!!e.changedTouches.length},Nf=(function(t){function e(r){var n;return u3e(this,e),n=h3e(this,e,[r]),Ts(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ts(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ts(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),Ts(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ts(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ts(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ts(n,"handleSlideDragStart",function(a){var i=Wz(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return m3e(e,t),d3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),x=Math.max(a,i),y=e.getIndexInRange(o,m),S=e.getIndexInRange(o,x);return{startIndex:y-y%d,endIndex:S===p?p:S-S%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=bi(i[n],c,n);return lr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,x=d.startIndex,y=d.endIndex,S=d.onChange,N=n.pageX-i;N>0?N=Math.min(N,h+p-m-c,h+p-m-o):N<0&&(N=Math.max(N,h-o,h-c));var w=this.getIndex({startX:o+N,endX:c+N});(w.startIndex!==x||w.endIndex!==y)&&S&&S(w),this.setState({startX:o+N,endX:c+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Wz(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,x=p.width,y=p.travellerWidth,S=p.onChange,N=p.gap,w=p.data,E={startX:this.state.startX,endX:this.state.endX},O=n.pageX-i;O>0?O=Math.min(O,m+x-y-h):O<0&&(O=Math.max(O,m-h)),E[o]=h+O;var R=this.getIndex(E),P=R.startIndex,I=R.endIndex,k=function(){var j=w.length-1;return o==="startX"&&(c>d?P%N===0:I%N===0)||c<d&&I===j||o==="endX"&&(c>d?I%N===0:P%N===0)||c>d&&I===j};this.setState(Ts(Ts({},o,h+O),"brushMoveStartX",n.pageX),function(){S&&k()&&S(R)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var x=m+n;if(!(x===-1||x>=c.length)){var y=c[x];a==="startX"&&y>=h||a==="endX"&&y<=d||this.setState(Ts({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return ie.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=T.Children.only(h);return m?ie.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,x=d.traveller,y=d.ariaLabel,S=d.data,N=d.startIndex,w=d.endIndex,E=Math.max(n,this.props.x),O=k_(k_({},Qt(this.props,!1)),{},{x:E,y:h,width:p,height:m}),R=y||"Min value: ".concat((i=S[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=S[w])===null||o===void 0?void 0:o.name);return ie.createElement(Qr,{tabIndex:0,role:"slider","aria-label":R,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),c.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,O))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,x=p.endX,y=5,S={pointerEvents:"none",fill:h};return ie.createElement(Qr,{className:"recharts-brush-texts"},ie.createElement(ff,Wb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-y,y:o+c/2},S),this.getTextOfTick(a)),ie.createElement(ff,Wb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+d+y,y:o+c/2},S),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,x=this.state,y=x.startX,S=x.endX,N=x.isTextActive,w=x.isSlideMoving,E=x.isTravellerMoving,O=x.isTravellerFocused;if(!a||!a.length||!wt(c)||!wt(d)||!wt(h)||!wt(p)||h<=0||p<=0)return null;var R=wr("recharts-brush",i),P=ie.Children.count(o)===1,I=c3e("userSelect","none");return ie.createElement(Qr,{className:R,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(y,S),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(S,"endX"),(N||w||E||O||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),ie.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ie.isValidElement(n)?i=ie.cloneElement(n,a):lr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return k_({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?x3e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var x=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(T.PureComponent);Ts(Nf,"displayName","Brush");Ts(Nf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var C_,Kz;function y3e(){if(Kz)return C_;Kz=1;var t=i7();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return C_=e,C_}var O_,Qz;function v3e(){if(Qz)return O_;Qz=1;var t=IW(),e=gl(),r=y3e(),n=ds(),a=gw();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return O_=i,O_}var b3e=v3e();const w3e=tn(b3e);var nl=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},I_,Xz;function S3e(){if(Xz)return I_;Xz=1;var t=XW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return I_=e,I_}var R_,Yz;function N3e(){if(Yz)return R_;Yz=1;var t=S3e(),e=KW(),r=gl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return R_=n,R_}var _3e=N3e();const T3e=tn(_3e);var M_,Jz;function j3e(){if(Jz)return M_;Jz=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return M_=t,M_}var D_,Zz;function A3e(){if(Zz)return D_;Zz=1;var t=i7();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return D_=e,D_}var P_,eU;function E3e(){if(eU)return P_;eU=1;var t=j3e(),e=A3e(),r=gl(),n=ds(),a=gw();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return P_=i,P_}var k3e=E3e();const BQ=tn(k3e);var C3e=["x","y"];function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hA.apply(this,arguments)}function tU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(r),!0).forEach(function(n){O3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O3e(t,e,r){return e=I3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I3e(t){var e=R3e(t,"string");return Kg(e)=="symbol"?e:e+""}function R3e(t,e){if(Kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M3e(t,e){if(t==null)return{};var r=D3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function P3e(t,e){var r=t.x,n=t.y,a=M3e(t,C3e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),x=parseInt(m,10);return hm(hm(hm(hm(hm({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:x,name:e.name,radius:e.radius})}function rU(t){return ie.createElement(cA,hA({shapeType:"rectangle",propTransformer:P3e,activeClassName:"recharts-active-bar"},t))}var L3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=wt(n)||zhe(n);return i?e(n,a):(i||p0(),r)}},B3e=["value","background"],$Q;function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function $3e(t,e){if(t==null)return{};var r=z3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qb.apply(this,arguments)}function nU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(r),!0).forEach(function(n){vu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UQ(n.key),n)}}function V3e(t,e,r){return e&&aU(t.prototype,e),r&&aU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function F3e(t,e,r){return e=Xb(e),q3e(t,zQ()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function q3e(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3e(t)}function H3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function G3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fA(t,e)}function fA(t,e){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fA(t,e)}function vu(t,e,r){return e=UQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UQ(t){var e=W3e(t,"string");return _f(e)=="symbol"?e:e+""}function W3e(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ux=(function(t){function e(){var r;U3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=F3e(this,e,[].concat(a)),vu(r,"state",{isAnimationFinished:!1}),vu(r,"id",Cx("recharts-bar-")),vu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),vu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return G3e(e,t),V3e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=Qt(this.props,!1);return n&&n.map(function(m,x){var y=x===d,S=y?h:o,N=Ca(Ca(Ca({},p),m),{},{isActive:y,option:S,index:x,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ie.createElement(Qr,Qb({className:"recharts-bar-rectangle"},h0(a.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),ie.createElement(rU,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,x=this.state.prevData;return ie.createElement(ul,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var S=y.t,N=i.map(function(w,E){var O=x&&x[E];if(O){var R=ts(O.x,w.x),P=ts(O.y,w.y),I=ts(O.width,w.width),k=ts(O.height,w.height);return Ca(Ca({},w),{},{x:R(S),y:P(S),width:I(S),height:k(S)})}if(o==="horizontal"){var A=ts(0,w.height),j=A(S);return Ca(Ca({},w),{},{y:w.y+w.height-j,height:j})}var C=ts(0,w.width),U=C(S);return Ca(Ca({},w),{},{width:U})});return ie.createElement(Qr,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Px(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Qt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,x=$3e(h,B3e);if(!m)return null;var y=Ca(Ca(Ca(Ca(Ca({},x),{},{fill:"#eee"},m),d),h0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return ie.createElement(rU,Qb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},y))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Rs(p,Lx);if(!m)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,y=function(w,E){var O=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:O,errorVal:bi(w,E)}},S={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ie.createElement(Qr,S,m.map(function(N){return ie.cloneElement(N,{key:"error-bar-".concat(a,"-").concat(N.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:x,dataPointFormatter:y})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,x=n.height,y=n.isAnimationActive,S=n.background,N=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=wr("recharts-bar",o),O=c&&c.allowDataOverflow,R=d&&d.allowDataOverflow,P=O||R,I=xr(N)?this.id:N;return ie.createElement(Qr,{className:E},O||R?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(I)},ie.createElement("rect",{x:O?h:h-m/2,y:R?p:p-x/2,width:O?m:m*2,height:R?x:x*2}))):null,ie.createElement(Qr,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(I,")"):null},S?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,I),(!y||w)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(T.PureComponent);$Q=Ux;vu(Ux,"displayName","Bar");vu(Ux,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!j0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vu(Ux,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,x=t.offset,y=tbe(n,r);if(!y)return null;var S=e.layout,N=r.type.defaultProps,w=N!==void 0?Ca(Ca({},N),r.props):r.props,E=w.dataKey,O=w.children,R=w.minPointSize,P=S==="horizontal"?o:i,I=h?P.scale.domain():null,k=lbe({numericAxis:P}),A=Rs(O,l7),j=m.map(function(C,U){var L,$,B,G,K,H;h?L=rbe(h[p+U],I):(L=bi(C,E),Array.isArray(L)||(L=[k,L]));var Z=L3e(R,$Q.defaultProps.minPointSize)(L[1],U);if(S==="horizontal"){var ne,ce=[o.scale(L[0]),o.scale(L[1])],he=ce[0],Y=ce[1];$=k$({axis:i,ticks:c,bandSize:a,offset:y.offset,entry:C,index:U}),B=(ne=Y??he)!==null&&ne!==void 0?ne:void 0,G=y.size;var ae=he-Y;if(K=Number.isNaN(ae)?0:ae,H={x:$,y:o.y,width:G,height:o.height},Math.abs(Z)>0&&Math.abs(K)<Math.abs(Z)){var re=jo(K||Z)*(Math.abs(Z)-Math.abs(K));B-=re,K+=re}}else{var ye=[i.scale(L[0]),i.scale(L[1])],De=ye[0],Ye=ye[1];if($=De,B=k$({axis:o,ticks:d,bandSize:a,offset:y.offset,entry:C,index:U}),G=Ye-De,K=y.size,H={x:i.x,y:B,width:i.width,height:K},Math.abs(Z)>0&&Math.abs(G)<Math.abs(Z)){var rt=jo(G||Z)*(Math.abs(Z)-Math.abs(G));G+=rt}}return Ca(Ca(Ca({},C),{},{x:$,y:B,width:G,height:K,value:h?L:L[1],payload:C,background:H},A&&A[U]&&A[U].props),{},{tooltipPayload:[hQ(r,C)],tooltipPosition:{x:$+G/2,y:B+K/2}})});return Ca({data:j,layout:S},x)});function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function K3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VQ(n.key),n)}}function Q3e(t,e,r){return e&&iU(t.prototype,e),r&&iU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(r),!0).forEach(function(n){Rw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rw(t,e,r){return e=VQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VQ(t){var e=X3e(t,"string");return Qg(e)=="symbol"?e:e+""}function X3e(t,e){if(Qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y3e=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},x=!!js(h,Ux);return p.reduce(function(y,S){var N=r[S],w=N.orientation,E=N.domain,O=N.padding,R=O===void 0?{}:O,P=N.mirror,I=N.reversed,k="".concat(w).concat(P?"Mirror":""),A,j,C,U,L;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $=E[1]-E[0],B=1/0,G=N.categoricalDomain.sort(qhe);if(G.forEach(function(ye,De){De>0&&(B=Math.min((ye||0)-(G[De-1]||0),B))}),Number.isFinite(B)){var K=B/$,H=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(A=K*H/2),N.padding==="no-gap"){var Z=Ao(e.barCategoryGap,K*H),ne=K*H/2;A=ne-Z-(ne-Z)/H*Z}}}a==="xAxis"?j=[n.left+(R.left||0)+(A||0),n.left+n.width-(R.right||0)-(A||0)]:a==="yAxis"?j=d==="horizontal"?[n.top+n.height-(R.bottom||0),n.top+(R.top||0)]:[n.top+(R.top||0)+(A||0),n.top+n.height-(R.bottom||0)-(A||0)]:j=N.range,I&&(j=[j[1],j[0]]);var ce=lQ(N,i,x),he=ce.scale,Y=ce.realScaleType;he.domain(E).range(j),cQ(he);var ae=uQ(he,_o(_o({},N),{},{realScaleType:Y}));a==="xAxis"?(L=w==="top"&&!P||w==="bottom"&&P,C=n.left,U=m[k]-L*N.height):a==="yAxis"&&(L=w==="left"&&!P||w==="right"&&P,C=m[k]-L*N.width,U=n.top);var re=_o(_o(_o({},N),ae),{},{realScaleType:Y,x:C,y:U,scale:he,width:a==="xAxis"?n.width:N.width,height:a==="yAxis"?n.height:N.height});return re.bandSize=Ib(re,ae),!N.hide&&a==="xAxis"?m[k]+=(L?-1:1)*re.height:N.hide||(m[k]+=(L?-1:1)*re.width),_o(_o({},y),{},Rw({},S,re))},{})},FQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},J3e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return FQ({x:r,y:n},{x:a,y:i})},qQ=(function(){function t(e){K3e(this,t),this.scale=e}return Q3e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();Rw(qQ,"EPS",1e-4);var D7=function(e){var r=Object.keys(e).reduce(function(n,a){return _o(_o({},n),{},Rw({},a,qQ.create(e[a])))},{});return _o(_o({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return T3e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return BQ(a,function(i,o){return r[o].isInRange(i)})}})};function Z3e(t){return(t%180+180)%180}var eSe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Z3e(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},L_,oU;function tSe(){if(oU)return L_;oU=1;var t=gl(),e=Ox(),r=pw();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return L_=n,L_}var B_,lU;function rSe(){if(lU)return B_;lU=1;var t=MQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return B_=e,B_}var $_,cU;function nSe(){if(cU)return $_;cU=1;var t=FW(),e=gl(),r=rSe(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return $_=a,$_}var z_,uU;function aSe(){if(uU)return z_;uU=1;var t=tSe(),e=nSe(),r=t(e);return z_=r,z_}var iSe=aSe();const sSe=tn(iSe);var oSe=iW();const lSe=tn(oSe);var cSe=lSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),P7=T.createContext(void 0),L7=T.createContext(void 0),HQ=T.createContext(void 0),GQ=T.createContext({}),WQ=T.createContext(void 0),KQ=T.createContext(0),QQ=T.createContext(0),dU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=cSe(i);return ie.createElement(P7.Provider,{value:n},ie.createElement(L7.Provider,{value:a},ie.createElement(GQ.Provider,{value:i},ie.createElement(HQ.Provider,{value:p},ie.createElement(WQ.Provider,{value:o},ie.createElement(KQ.Provider,{value:h},ie.createElement(QQ.Provider,{value:d},c)))))))},uSe=function(){return T.useContext(WQ)},XQ=function(e){var r=T.useContext(P7);r==null&&p0();var n=r[e];return n==null&&p0(),n},dSe=function(){var e=T.useContext(P7);return mu(e)},hSe=function(){var e=T.useContext(L7),r=sSe(e,function(n){return BQ(n.domain,Number.isFinite)});return r||mu(e)},YQ=function(e){var r=T.useContext(L7);r==null&&p0();var n=r[e];return n==null&&p0(),n},fSe=function(){var e=T.useContext(HQ);return e},pSe=function(){return T.useContext(GQ)},B7=function(){return T.useContext(QQ)},$7=function(){return T.useContext(KQ)};function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function mSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZQ(n.key),n)}}function xSe(t,e,r){return e&&gSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ySe(t,e,r){return e=Yb(e),vSe(t,JQ()?Reflect.construct(e,r||[],Yb(t).constructor):e.apply(t,r))}function vSe(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bSe(t)}function bSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JQ=function(){return!!t})()}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(t)}function wSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pA(t,e)}function pA(t,e){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pA(t,e)}function hU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(r),!0).forEach(function(n){z7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z7(t,e,r){return e=ZQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZQ(t){var e=SSe(t,"string");return Tf(e)=="symbol"?e:e+""}function SSe(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NSe(t,e){return ASe(t)||jSe(t,e)||TSe(t,e)||_Se()}function _Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TSe(t,e){if(t){if(typeof t=="string")return pU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pU(t,e)}}function pU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function ASe(t){if(Array.isArray(t))return t}function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mA.apply(this,arguments)}var ESe=function(e,r){var n;return ie.isValidElement(e)?n=ie.cloneElement(e,r):lr(e)?n=e(r):n=ie.createElement("line",mA({},r,{className:"recharts-reference-line-line"})),n},kSe=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,x=i.width,y=i.height;if(n){var S=h.y,N=e.y.apply(S,{position:o});if(nl(h,"discard")&&!e.y.isInRange(N))return null;var w=[{x:p+x,y:N},{x:p,y:N}];return d==="left"?w.reverse():w}if(r){var E=h.x,O=e.x.apply(E,{position:o});if(nl(h,"discard")&&!e.x.isInRange(O))return null;var R=[{x:O,y:m+y},{x:O,y:m}];return c==="top"?R.reverse():R}if(a){var P=h.segment,I=P.map(function(k){return e.apply(k,{position:o})});return nl(h,"discard")&&w3e(I,function(k){return!e.isInRange(k)})?null:I}return null};function CSe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=uSe(),p=XQ(a),m=YQ(i),x=fSe();if(!h||!x)return null;ac(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=D7({x:p.scale,y:m.scale}),S=Fa(e),N=Fa(r),w=n&&n.length===2,E=kSe(y,S,N,w,x,t.position,p.orientation,m.orientation,t);if(!E)return null;var O=NSe(E,2),R=O[0],P=R.x,I=R.y,k=O[1],A=k.x,j=k.y,C=nl(t,"hidden")?"url(#".concat(h,")"):void 0,U=fU(fU({clipPath:C},Qt(t,!0)),{},{x1:P,y1:I,x2:A,y2:j});return ie.createElement(Qr,{className:wr("recharts-reference-line",c)},ESe(o,U),xi.renderCallByParent(t,J3e({x1:P,y1:I,x2:A,y2:j})))}var U7=(function(t){function e(){return mSe(this,e),ySe(this,e,arguments)}return wSe(e,t),xSe(e,[{key:"render",value:function(){return ie.createElement(CSe,this.props)}}])})(ie.Component);z7(U7,"displayName","ReferenceLine");z7(U7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function gA(){return gA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gA.apply(this,arguments)}function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function mU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(r),!0).forEach(function(n){Mw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ISe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tX(n.key),n)}}function RSe(t,e,r){return e&&ISe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MSe(t,e,r){return e=Jb(e),DSe(t,eX()?Reflect.construct(e,r||[],Jb(t).constructor):e.apply(t,r))}function DSe(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(t)}function PSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!t})()}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jb(t)}function LSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xA(t,e)}function Mw(t,e,r){return e=tX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tX(t){var e=BSe(t,"string");return jf(e)=="symbol"?e:e+""}function BSe(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $Se=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=D7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return nl(e,"discard")&&!o.isInRange(c)?null:c},Dw=(function(t){function e(){return OSe(this,e),MSe(this,e,arguments)}return LSe(e,t),RSe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Fa(a),p=Fa(i);if(ac(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=$Se(this.props);if(!m)return null;var x=m.x,y=m.y,S=this.props,N=S.shape,w=S.className,E=nl(this.props,"hidden")?"url(#".concat(d,")"):void 0,O=gU(gU({clipPath:E},Qt(this.props,!0)),{},{cx:x,cy:y});return ie.createElement(Qr,{className:wr("recharts-reference-dot",w)},e.renderDot(N,O),xi.renderCallByParent(this.props,{x:x-o,y:y-o,width:2*o,height:2*o}))}}])})(ie.Component);Mw(Dw,"displayName","ReferenceDot");Mw(Dw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Mw(Dw,"renderDot",function(t,e){var r;return ie.isValidElement(t)?r=ie.cloneElement(t,e):lr(t)?r=t(e):r=ie.createElement(Ew,gA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yA.apply(this,arguments)}function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function xU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xU(Object(r),!0).forEach(function(n){Pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function USe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nX(n.key),n)}}function VSe(t,e,r){return e&&USe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FSe(t,e,r){return e=Zb(e),qSe(t,rX()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function qSe(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HSe(t)}function HSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rX=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function GSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vA(t,e)}function vA(t,e){return vA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vA(t,e)}function Pw(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=WSe(t,"string");return Af(e)=="symbol"?e:e+""}function WSe(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KSe=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var x=D7({x:p.scale,y:m.scale}),y={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(d,{position:"start"}):x.y.rangeMin},S={x:r?x.x.apply(c,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return nl(i,"discard")&&(!x.isInRange(y)||!x.isInRange(S))?null:FQ(y,S)},Lw=(function(t){function e(){return zSe(this,e),FSe(this,e,arguments)}return GSe(e,t),VSe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;ac(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Fa(a),x=Fa(i),y=Fa(o),S=Fa(c),N=this.props.shape;if(!m&&!x&&!y&&!S&&!N)return null;var w=KSe(m,x,y,S,this.props);if(!w&&!N)return null;var E=nl(this.props,"hidden")?"url(#".concat(p,")"):void 0;return ie.createElement(Qr,{className:wr("recharts-reference-area",d)},e.renderRect(N,yU(yU({clipPath:E},Qt(this.props,!0)),w)),xi.renderCallByParent(this.props,w))}}])})(ie.Component);Pw(Lw,"displayName","ReferenceArea");Pw(Lw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Pw(Lw,"renderRect",function(t,e){var r;return ie.isValidElement(t)?r=ie.cloneElement(t,e):lr(t)?r=t(e):r=ie.createElement(M7,yA({},e,{className:"recharts-reference-area-rect"})),r});function aX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function QSe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return eSe(n,r)}function XSe(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function e2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function YSe(t,e){return aX(t,e+1)}function JSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var S=n==null?void 0:n[d];if(S===void 0)return{v:aX(n,h)};var N=d,w,E=function(){return w===void 0&&(w=r(S,N)),w},O=S.coordinate,R=d===0||e2(t,O,E,p,c);R||(d=0,p=o,h+=1),R&&(p=O+t*(E()/2+a),d+=h)},x;h<=i.length;)if(x=m(),x)return x.v;return[]}function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){ZSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZSe(t,e,r){return e=e6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e6e(t){var e=t6e(t,"string");return Xg(e)=="symbol"?e:e+""}function t6e(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(x){var y=i[x],S,N=function(){return S===void 0&&(S=r(y,x)),S};if(x===o-1){var w=t*(y.coordinate+t*N()/2-d);i[x]=y=Ti(Ti({},y),{},{tickCoord:w>0?y.coordinate-w*t:y.coordinate})}else i[x]=y=Ti(Ti({},y),{},{tickCoord:y.coordinate});var E=e2(t,y.tickCoord,N,c,d);E&&(d=y.tickCoord-t*(N()/2+a),i[x]=Ti(Ti({},y),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function n6e(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),x=t*(p.coordinate+t*m/2-h);o[c-1]=p=Ti(Ti({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate});var y=e2(t,p.tickCoord,function(){return m},d,h);y&&(h=p.tickCoord-t*(m/2+a),o[c-1]=Ti(Ti({},p),{},{isShow:!0}))}for(var S=i?c-1:c,N=function(O){var R=o[O],P,I=function(){return P===void 0&&(P=r(R,O)),P};if(O===0){var k=t*(R.coordinate-t*I()/2-d);o[O]=R=Ti(Ti({},R),{},{tickCoord:k<0?R.coordinate-k*t:R.coordinate})}else o[O]=R=Ti(Ti({},R),{},{tickCoord:R.coordinate});var A=e2(t,R.tickCoord,I,d,h);A&&(d=R.tickCoord+t*(I()/2+a),o[O]=Ti(Ti({},R),{},{isShow:!0}))},w=0;w<S;w++)N(w);return o}function V7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(wt(d)||j0.isSsr)return YSe(a,typeof d=="number"&&wt(d)?d:0);var x=[],y=c==="top"||c==="bottom"?"width":"height",S=p&&y==="width"?Dm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=function(R,P){var I=lr(h)?h(R.value,P):R.value;return y==="width"?QSe(Dm(I,{fontSize:e,letterSpacing:r}),S,m):Dm(I,{fontSize:e,letterSpacing:r})[y]},w=a.length>=2?jo(a[1].coordinate-a[0].coordinate):1,E=XSe(i,w,y);return d==="equidistantPreserveStart"?JSe(w,E,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=n6e(w,E,N,a,o,d==="preserveStartEnd"):x=r6e(w,E,N,a,o),x.filter(function(O){return O.isShow}))}var a6e=["viewBox"],i6e=["viewBox"],s6e=["ticks"];function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ba(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){F7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U_(t,e){if(t==null)return{};var r=o6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function l6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sX(n.key),n)}}function c6e(t,e,r){return e&&wU(t.prototype,e),r&&wU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u6e(t,e,r){return e=t2(e),d6e(t,iX()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function d6e(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h6e(t)}function h6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iX=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function f6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bA(t,e)}function bA(t,e){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bA(t,e)}function F7(t,e,r){return e=sX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sX(t){var e=p6e(t,"string");return Ef(e)=="symbol"?e:e+""}function p6e(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ep=(function(t){function e(r){var n;return l6e(this,e),n=u6e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return f6e(e,t),c6e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=U_(n,a6e),c=this.props,d=c.viewBox,h=U_(c,i6e);return!Bh(i,d)||!Bh(o,h)||!Bh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,x=a.tickMargin,y,S,N,w,E,O,R=m?-1:1,P=n.tickSize||p,I=wt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":y=S=n.coordinate,w=o+ +!m*d,N=w-R*P,O=N-R*x,E=I;break;case"left":N=w=n.coordinate,S=i+ +!m*c,y=S-R*P,E=y-R*x,O=I;break;case"right":N=w=n.coordinate,S=i+ +m*c,y=S+R*P,E=y+R*x,O=I;break;default:y=S=n.coordinate,w=o+ +m*d,N=w+R*P,O=N+R*x,E=I;break}return{line:{x1:y,y1:N,x2:S,y2:w},tick:{x:E,y:O}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Ba(Ba(Ba({},Qt(this.props,!1)),Qt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);m=Ba(Ba({},m),{},{x1:a,y1:i+x*c,x2:a+o,y2:i+x*c})}else{var y=+(d==="left"&&!h||d==="right"&&h);m=Ba(Ba({},m),{},{x1:a+y*o,y1:i,x2:a+y*o,y2:i+c})}return ie.createElement("line",Ah({},m,{className:wr("recharts-cartesian-axis-line",ao(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,x=c.unit,y=V7(Ba(Ba({},this.props),{},{ticks:n}),a,i),S=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),w=Qt(this.props,!1),E=Qt(p,!1),O=Ba(Ba({},w),{},{fill:"none"},Qt(d,!1)),R=y.map(function(P,I){var k=o.getTickLineCoord(P),A=k.line,j=k.tick,C=Ba(Ba(Ba(Ba({textAnchor:S,verticalAnchor:N},w),{},{stroke:"none",fill:h},E),j),{},{index:I,payload:P,visibleTicksCount:y.length,tickFormatter:m});return ie.createElement(Qr,Ah({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},h0(o.props,P,I)),d&&ie.createElement("line",Ah({},O,A,{className:wr("recharts-cartesian-axis-tick-line",ao(d,"className"))})),p&&e.renderTickItem(p,C,"".concat(lr(m)?m(P.value,I):P.value).concat(x||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},R)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,x=m.ticks,y=U_(m,s6e),S=x;return lr(d)&&(S=x&&x.length>0?d(this.props):d(y)),o<=0||c<=0||!S||!S.length?null:ie.createElement(Qr,{className:wr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(S,this.state.fontSize,this.state.letterSpacing),xi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=wr(a.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(n)?o=ie.cloneElement(n,Ba(Ba({},a),{},{className:c})):lr(n)?o=n(Ba(Ba({},a),{},{className:c})):o=ie.createElement(ff,Ah({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(T.Component);F7(ep,"displayName","CartesianAxis");F7(ep,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var m6e=["x1","y1","x2","y2","key"],g6e=["offset"];function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function SU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ai(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(r),!0).forEach(function(n){x6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x6e(t,e,r){return e=y6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y6e(t){var e=v6e(t,"string");return m0(e)=="symbol"?e:e+""}function v6e(t,e){if(m0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(m0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zd.apply(this,arguments)}function NU(t,e){if(t==null)return{};var r=b6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var w6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return ie.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function oX(t,e){var r;if(ie.isValidElement(t))r=ie.cloneElement(t,e);else if(lr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=NU(e,m6e),h=Qt(d,!1);h.offset;var p=NU(h,g6e);r=ie.createElement("line",zd({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function S6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ai(Ai({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return oX(a,h)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function N6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ai(Ai({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return oX(a,h)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(x){return Math.round(x+a-a)}).sort(function(x,y){return x-y});a!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],N=S?a+o-x:p[y+1]-x;if(N<=0)return null;var w=y%e.length;return ie.createElement("rect",{key:"react-".concat(y),y:x,x:n,height:N,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function T6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(x){return Math.round(x+i-i)}).sort(function(x,y){return x-y});i!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],N=S?i+c-x:p[y+1]-x;if(N<=0)return null;var w=y%n.length;return ie.createElement("rect",{key:"react-".concat(y),x,y:o,width:N,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var j6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return oQ(V7(Ai(Ai(Ai({},ep.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},A6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return oQ(V7(Ai(Ai(Ai({},ep.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},gh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function lX(t){var e,r,n,a,i,o,c=B7(),d=$7(),h=pSe(),p=Ai(Ai({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:gh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:gh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:gh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:gh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:gh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:gh.verticalFill,x:wt(t.x)?t.x:h.left,y:wt(t.y)?t.y:h.top,width:wt(t.width)?t.width:h.width,height:wt(t.height)?t.height:h.height}),m=p.x,x=p.y,y=p.width,S=p.height,N=p.syncWithTicks,w=p.horizontalValues,E=p.verticalValues,O=dSe(),R=hSe();if(!wt(y)||y<=0||!wt(S)||S<=0||!wt(m)||m!==+m||!wt(x)||x!==+x)return null;var P=p.verticalCoordinatesGenerator||j6e,I=p.horizontalCoordinatesGenerator||A6e,k=p.horizontalPoints,A=p.verticalPoints;if((!k||!k.length)&&lr(I)){var j=w&&w.length,C=I({yAxis:R?Ai(Ai({},R),{},{ticks:j?w:R.ticks}):void 0,width:c,height:d,offset:h},j?!0:N);ac(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(m0(C),"]")),Array.isArray(C)&&(k=C)}if((!A||!A.length)&&lr(P)){var U=E&&E.length,L=P({xAxis:O?Ai(Ai({},O),{},{ticks:U?E:O.ticks}):void 0,width:c,height:d,offset:h},U?!0:N);ac(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(m0(L),"]")),Array.isArray(L)&&(A=L)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(w6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),ie.createElement(S6e,zd({},p,{offset:h,horizontalPoints:k,xAxis:O,yAxis:R})),ie.createElement(N6e,zd({},p,{offset:h,verticalPoints:A,xAxis:O,yAxis:R})),ie.createElement(_6e,zd({},p,{horizontalPoints:k})),ie.createElement(T6e,zd({},p,{verticalPoints:A})))}lX.displayName="CartesianGrid";function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function E6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dX(n.key),n)}}function C6e(t,e,r){return e&&k6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O6e(t,e,r){return e=r2(e),I6e(t,cX()?Reflect.construct(e,r||[],r2(t).constructor):e.apply(t,r))}function I6e(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(t)}function R6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cX=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r2(t)}function M6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wA(t,e)}function uX(t,e,r){return e=dX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dX(t){var e=D6e(t,"string");return kf(e)=="symbol"?e:e+""}function D6e(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bw=(function(t){function e(){return E6e(this,e),O6e(this,e,arguments)}return M6e(e,t),C6e(e,[{key:"render",value:function(){return null}}])})(T.Component);uX(Bw,"displayName","ZAxis");uX(Bw,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var P6e=["option","isActive"];function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Um.apply(this,arguments)}function L6e(t,e){if(t==null)return{};var r=B6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function B6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $6e(t){var e=t.option,r=t.isActive,n=L6e(t,P6e);return typeof e=="string"?T.createElement(cA,Um({option:T.createElement(fw,Um({type:e},n)),isActive:r,shapeType:"symbols"},n)):T.createElement(cA,Um({option:e,isActive:r,shapeType:"symbols"},n))}function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vm.apply(this,arguments)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){bu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fX(n.key),n)}}function U6e(t,e,r){return e&&TU(t.prototype,e),r&&TU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function V6e(t,e,r){return e=n2(e),F6e(t,hX()?Reflect.construct(e,r||[],n2(t).constructor):e.apply(t,r))}function F6e(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q6e(t)}function q6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hX=function(){return!!t})()}function n2(t){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n2(t)}function H6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},SA(t,e)}function bu(t,e,r){return e=fX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fX(t){var e=G6e(t,"string");return Cf(e)=="symbol"?e:e+""}function G6e(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vx=(function(t){function e(){var r;z6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=V6e(this,e,[].concat(a)),bu(r,"state",{isAnimationFinished:!1}),bu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),bu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),bu(r,"id",Cx("recharts-scatter-")),r}return H6e(e,t),U6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Qt(this.props,!1);return n.map(function(p,m){var x=d===m,y=x?c:o,S=Js(Js({},h),p);return ie.createElement(Qr,Vm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},h0(a.props,p,m),{role:"img"}),ie.createElement($6e,Vm({option:y,isActive:x,key:"symbol-".concat(m)},S)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ie.createElement(ul,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=i.map(function(N,w){var E=m&&m[w];if(E){var O=ts(E.cx,N.cx),R=ts(E.cy,N.cy),P=ts(E.size,N.size);return Js(Js({},N),{},{cx:O(y),cy:R(y),size:P(y)})}var I=ts(0,N.size);return Js(Js({},N),{},{size:I(y)})});return ie.createElement(Qr,null,n.renderSymbolsStatically(S))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!Px(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Rs(d,Lx);return h?h.map(function(p,m){var x=p.props,y=x.direction,S=x.dataKey;return ie.cloneElement(p,{key:"".concat(y,"-").concat(S,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(w,E){return{x:w.cx,y:w.cy,value:y==="x"?+w.node.x:+w.node.y,errorVal:bi(w,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Qt(this.props,!1),h=Qt(i,!1),p,m;if(o==="joint")p=a.map(function(R){return{x:R.cx,y:R.cy}});else if(o==="fitting"){var x=Fhe(a),y=x.xmin,S=x.xmax,N=x.a,w=x.b,E=function(P){return N*P+w};p=[{x:y,y:E(y)},{x:S,y:E(S)}]}var O=Js(Js(Js({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return ie.isValidElement(i)?m=ie.cloneElement(i,O):lr(i)?m=i(O):m=ie.createElement(Kj,Vm({},O,{type:c})),ie.createElement(Qr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,x=n.width,y=n.height,S=n.id,N=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=wr("recharts-scatter",c),O=d&&d.allowDataOverflow,R=h&&h.allowDataOverflow,P=O||R,I=xr(S)?this.id:S;return ie.createElement(Qr,{className:E,clipPath:P?"url(#clipPath-".concat(I,")"):null},O||R?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(I)},ie.createElement("rect",{x:O?p:p-x/2,y:R?m:m-y/2,width:O?x:x*2,height:R?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),ie.createElement(Qr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||w)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(T.PureComponent);bu(Vx,"displayName","Scatter");bu(Vx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!j0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});bu(Vx,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Rs(a.props.children,l7),m=xr(e.dataKey)?a.props.dataKey:e.dataKey,x=xr(r.dataKey)?a.props.dataKey:r.dataKey,y=n&&n.dataKey,S=n?n.range:Bw.defaultProps.range,N=S&&S[0],w=e.scale.bandwidth?e.scale.bandwidth():0,E=r.scale.bandwidth?r.scale.bandwidth():0,O=i.map(function(R,P){var I=bi(R,m),k=bi(R,x),A=!xr(y)&&bi(R,y)||"-",j=[{name:xr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:R,dataKey:m,type:h},{name:xr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:R,dataKey:x,type:h}];A!=="-"&&j.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:R,dataKey:y,type:h});var C=E$({axis:e,ticks:o,bandSize:w,entry:R,index:P,dataKey:m}),U=E$({axis:r,ticks:c,bandSize:E,entry:R,index:P,dataKey:x}),L=A!=="-"?n.scale(A):N,$=Math.sqrt(Math.max(L,0)/Math.PI);return Js(Js({},R),{},{cx:C,cy:U,x:C-$,y:U-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:L,node:{x:I,y:k,z:A},tooltipPayload:j,tooltipPosition:{x:C,y:U},payload:R},p&&p[P]&&p[P].props)});return Js({points:O},d)});function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function W6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gX(n.key),n)}}function Q6e(t,e,r){return e&&K6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X6e(t,e,r){return e=a2(e),Y6e(t,pX()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function Y6e(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J6e(t)}function J6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pX=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NA(t,e)}function NA(t,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NA(t,e)}function mX(t,e,r){return e=gX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gX(t){var e=eNe(t,"string");return Of(e)=="symbol"?e:e+""}function eNe(t,e){if(Of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _A(){return _A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_A.apply(this,arguments)}function tNe(t){var e=t.xAxisId,r=B7(),n=$7(),a=XQ(e);return a==null?null:T.createElement(ep,_A({},a,{className:wr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Zl(o,!0)}}))}var $w=(function(t){function e(){return W6e(this,e),X6e(this,e,arguments)}return Z6e(e,t),Q6e(e,[{key:"render",value:function(){return T.createElement(tNe,this.props)}}])})(T.Component);mX($w,"displayName","XAxis");mX($w,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function rNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vX(n.key),n)}}function aNe(t,e,r){return e&&nNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iNe(t,e,r){return e=i2(e),sNe(t,xX()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function sNe(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oNe(t)}function oNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xX=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function lNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TA(t,e)}function TA(t,e){return TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TA(t,e)}function yX(t,e,r){return e=vX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vX(t){var e=cNe(t,"string");return If(e)=="symbol"?e:e+""}function cNe(t,e){if(If(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jA.apply(this,arguments)}var uNe=function(e){var r=e.yAxisId,n=B7(),a=$7(),i=YQ(r);return i==null?null:T.createElement(ep,jA({},i,{className:wr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Zl(c,!0)}}))},zw=(function(t){function e(){return rNe(this,e),iNe(this,e,arguments)}return lNe(e,t),aNe(e,[{key:"render",value:function(){return T.createElement(uNe,this.props)}}])})(T.Component);yX(zw,"displayName","YAxis");yX(zw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jU(t){return pNe(t)||fNe(t)||hNe(t)||dNe()}function dNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hNe(t,e){if(t){if(typeof t=="string")return AA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(t,e)}}function fNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pNe(t){if(Array.isArray(t))return AA(t)}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var EA=function(e,r,n,a,i){var o=Rs(e,U7),c=Rs(e,Dw),d=[].concat(jU(o),jU(c)),h=Rs(e,Lw),p="".concat(a,"Id"),m=a[0],x=r;if(d.length&&(x=d.reduce(function(N,w){if(w.props[p]===n&&nl(w.props,"extendDomain")&&wt(w.props[m])){var E=w.props[m];return[Math.min(N[0],E),Math.max(N[1],E)]}return N},x)),h.length){var y="".concat(m,"1"),S="".concat(m,"2");x=h.reduce(function(N,w){if(w.props[p]===n&&nl(w.props,"extendDomain")&&wt(w.props[y])&&wt(w.props[S])){var E=w.props[y],O=w.props[S];return[Math.min(N[0],E,O),Math.max(N[1],E,O)]}return N},x)}return i&&i.length&&(x=i.reduce(function(N,w){return wt(w)?[Math.min(N[0],w),Math.max(N[1],w)]:N},x)),x},V_={exports:{}},AU;function mNe(){return AU||(AU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var y=new a(p,m||d,x),S=r?r+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],y]:d._events[S].push(y):(d._events[S]=y,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,y=m.length,S=new Array(y);x<y;x++)S[x]=m[x].fn;return S},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,x,y,S){var N=r?r+h:h;if(!this._events[N])return!1;var w=this._events[N],E=arguments.length,O,R;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,x),!0;case 5:return w.fn.call(w.context,p,m,x,y),!0;case 6:return w.fn.call(w.context,p,m,x,y,S),!0}for(R=1,O=new Array(E-1);R<E;R++)O[R-1]=arguments[R];w.fn.apply(w.context,O)}else{var P=w.length,I;for(R=0;R<P;R++)switch(w[R].once&&this.removeListener(h,w[R].fn,void 0,!0),E){case 1:w[R].fn.call(w[R].context);break;case 2:w[R].fn.call(w[R].context,p);break;case 3:w[R].fn.call(w[R].context,p,m);break;case 4:w[R].fn.call(w[R].context,p,m,x);break;default:if(!O)for(I=1,O=new Array(E-1);I<E;I++)O[I-1]=arguments[I];w[R].fn.apply(w[R].context,O)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,x){var y=r?r+h:h;if(!this._events[y])return this;if(!p)return o(this,y),this;var S=this._events[y];if(S.fn)S.fn===p&&(!x||S.once)&&(!m||S.context===m)&&o(this,y);else{for(var N=0,w=[],E=S.length;N<E;N++)(S[N].fn!==p||x&&!S[N].once||m&&S[N].context!==m)&&w.push(S[N]);w.length?this._events[y]=w.length===1?w[0]:w:o(this,y)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(V_)),V_.exports}var gNe=mNe();const xNe=tn(gNe);var F_=new xNe,q_="recharts.syncMouseEvents";function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function yNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bX(n.key),n)}}function bNe(t,e,r){return e&&vNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function H_(t,e,r){return e=bX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bX(t){var e=wNe(t,"string");return Yg(e)=="symbol"?e:e+""}function wNe(t,e){if(Yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SNe=(function(){function t(){yNe(this,t),H_(this,"activeIndex",0),H_(this,"coordinateList",[]),H_(this,"layout","horizontal")}return bNe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,x=r.mouseHandlerCallback,y=x===void 0?null:x;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,x=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])})();function NNe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&wt(n)&&wt(a))return!0}return!1}function _Ne(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function wX(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=Tn(e,r,n,a),c=Tn(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function TNe(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,x=Tn(c,d,h,m),y=Tn(c,d,p,m);n=x.x,a=x.y,i=y.x,o=y.y}else return wX(e);return[{x:n,y:a},{x:i,y:o}]}function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){jNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jNe(t,e,r){return e=ANe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ANe(t){var e=ENe(t,"string");return Jg(e)=="symbol"?e:e+""}function ENe(t,e){if(Jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kNe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,y=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!y||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var S,N=Kj;if(x==="ScatterChart")S=o,N=A4e;else if(x==="BarChart")S=_Ne(m,o,d,p),N=M7;else if(m==="radial"){var w=wX(o),E=w.cx,O=w.cy,R=w.radius,P=w.startAngle,I=w.endAngle;S={cx:E,cy:O,startAngle:P,endAngle:I,innerRadius:R,outerRadius:R},N=yQ}else S={points:TNe(m,o,d)},N=Kj;var k=Wy(Wy(Wy(Wy({stroke:"#ccc",pointerEvents:"none"},d),S),Qt(y,!1)),{},{payload:c,payloadIndex:h,className:wr("recharts-tooltip-cursor",y.className)});return T.isValidElement(y)?T.cloneElement(y,k):T.createElement(N,k)}var CNe=["item"],ONe=["children","className","width","height","style","compact","title","desc"];function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eh.apply(this,arguments)}function kU(t,e){return MNe(t)||RNe(t,e)||NX(t,e)||INe()}function INe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function MNe(t){if(Array.isArray(t))return t}function CU(t,e){if(t==null)return{};var r=DNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function DNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_X(n.key),n)}}function BNe(t,e,r){return e&&LNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Ne(t,e,r){return e=s2(e),zNe(t,SX()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function zNe(t,e){if(e&&(Rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UNe(t)}function UNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SX=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(t)}function VNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}function kA(t,e){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kA(t,e)}function Mf(t){return HNe(t)||qNe(t)||NX(t)||FNe()}function FNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(t,e){if(t){if(typeof t=="string")return CA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CA(t,e)}}function qNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HNe(t){if(Array.isArray(t))return CA(t)}function CA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ke(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(r),!0).forEach(function(n){er(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function er(t,e,r){return e=_X(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _X(t){var e=GNe(t,"string");return Rf(e)=="symbol"?e:e+""}function GNe(t,e){if(Rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WNe={xAxis:["bottom","top"],yAxis:["left","right"]},KNe={width:"100%",height:"100%"},TX={x:0,y:0};function Ky(t){return t}var QNe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},XNe=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return Ke(Ke(Ke({},a),Tn(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return Ke(Ke(Ke({},a),Tn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return TX},Uw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Mf(c),Mf(h)):c},[]);return o.length>0?o:e&&e.length&&wt(a)&&wt(i)?e.slice(a,i+1):[]};function jX(t){return t==="number"?[0,"auto"]:void 0}var OA=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Uw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var y=m===void 0?c:m;x=sb(y,o.dataKey,a)}else x=m&&m[n]||c[n];return x?[].concat(Mf(d),[hQ(h,x)]):d},[])},IU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=QNe(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Qve(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,x=OA(e,r,p,m),y=XNe(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:x,activeCoordinate:y}}return null},YNe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=e.stackOffset,y=sQ(p,i);return n.reduce(function(S,N){var w,E=N.type.defaultProps!==void 0?Ke(Ke({},N.type.defaultProps),N.props):N.props,O=E.type,R=E.dataKey,P=E.allowDataOverflow,I=E.allowDuplicatedCategory,k=E.scale,A=E.ticks,j=E.includeHidden,C=E[o];if(S[C])return S;var U=Uw(e.data,{graphicalItems:a.filter(function(ae){var re,ye=o in ae.props?ae.props[o]:(re=ae.type.defaultProps)===null||re===void 0?void 0:re[o];return ye===C}),dataStartIndex:d,dataEndIndex:h}),L=U.length,$,B,G;NNe(E.domain,P,O)&&($=Fj(E.domain,null,P),y&&(O==="number"||k!=="auto")&&(G=Lm(U,R,"category")));var K=jX(O);if(!$||$.length===0){var H,Z=(H=E.domain)!==null&&H!==void 0?H:K;if(R){if($=Lm(U,R,O),O==="category"&&y){var ne=Vhe($);I&&ne?(B=$,$=Gb(0,L)):I||($=I$(Z,$,N).reduce(function(ae,re){return ae.indexOf(re)>=0?ae:[].concat(Mf(ae),[re])},[]))}else if(O==="category")I?$=$.filter(function(ae){return ae!==""&&!xr(ae)}):$=I$(Z,$,N).reduce(function(ae,re){return ae.indexOf(re)>=0||re===""||xr(re)?ae:[].concat(Mf(ae),[re])},[]);else if(O==="number"){var ce=ebe(U,a.filter(function(ae){var re,ye,De=o in ae.props?ae.props[o]:(re=ae.type.defaultProps)===null||re===void 0?void 0:re[o],Ye="hide"in ae.props?ae.props.hide:(ye=ae.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return De===C&&(j||!Ye)}),R,i,p);ce&&($=ce)}y&&(O==="number"||k!=="auto")&&(G=Lm(U,R,"category"))}else y?$=Gb(0,L):c&&c[C]&&c[C].hasStack&&O==="number"?$=x==="expand"?[0,1]:dQ(c[C].stackGroups,d,h):$=iQ(U,a.filter(function(ae){var re=o in ae.props?ae.props[o]:ae.type.defaultProps[o],ye="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return re===C&&(j||!ye)}),O,p,!0);if(O==="number")$=EA(m,$,C,i,A),Z&&($=Fj(Z,$,P));else if(O==="category"&&Z){var he=Z,Y=$.every(function(ae){return he.indexOf(ae)>=0});Y&&($=he)}}return Ke(Ke({},S),{},er({},C,Ke(Ke({},E),{},{axisType:i,domain:$,categoricalDomain:G,duplicateDomain:B,originalDomain:(w=E.domain)!==null&&w!==void 0?w:K,isCategorical:y,layout:p})))},{})},JNe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=Uw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),y=x.length,S=sQ(p,i),N=-1;return n.reduce(function(w,E){var O=E.type.defaultProps!==void 0?Ke(Ke({},E.type.defaultProps),E.props):E.props,R=O[o],P=jX("number");if(!w[R]){N++;var I;return S?I=Gb(0,y):c&&c[R]&&c[R].hasStack?(I=dQ(c[R].stackGroups,d,h),I=EA(m,I,R,i)):(I=Fj(P,iQ(x,n.filter(function(k){var A,j,C=o in k.props?k.props[o]:(A=k.type.defaultProps)===null||A===void 0?void 0:A[o],U="hide"in k.props?k.props.hide:(j=k.type.defaultProps)===null||j===void 0?void 0:j.hide;return C===R&&!U}),"number",p),a.defaultProps.allowDataOverflow),I=EA(m,I,R,i)),Ke(Ke({},w),{},er({},R,Ke(Ke({axisType:i},a.defaultProps),{},{hide:!0,orientation:ao(WNe,"".concat(i,".").concat(N%2),null),domain:I,originalDomain:P,isCategorical:S,layout:p})))}return w},{})},ZNe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),x=Rs(p,i),y={};return x&&x.length?y=YNe(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(y=JNe(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),y},e_e=function(e){var r=mu(e),n=Zl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:s7(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Ib(r,n)}},RU=function(e){var r=e.children,n=e.defaultShowTooltip,a=js(r,Nf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},t_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=nc(r&&r.type);return n&&n.indexOf("Bar")>=0})},MU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},r_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,x=n.margin||{},y=js(m,Nf),S=js(m,$h),N=Object.keys(d).reduce(function(I,k){var A=d[k],j=A.orientation;return!A.mirror&&!A.hide?Ke(Ke({},I),{},er({},j,I[j]+A.width)):I},{left:x.left||0,right:x.right||0}),w=Object.keys(o).reduce(function(I,k){var A=o[k],j=A.orientation;return!A.mirror&&!A.hide?Ke(Ke({},I),{},er({},j,ao(I,"".concat(j))+A.height)):I},{top:x.top||0,bottom:x.bottom||0}),E=Ke(Ke({},w),N),O=E.bottom;y&&(E.bottom+=y.props.height||Nf.defaultProps.height),S&&r&&(E=Jve(E,a,n,r));var R=h-E.left-E.right,P=p-E.top-E.bottom;return Ke(Ke({brushBottom:O},E),{},{width:Math.max(R,0),height:Math.max(P,0)})},n_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},AX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,x=function(E,O){var R=O.graphicalItems,P=O.stackGroups,I=O.offset,k=O.updateId,A=O.dataStartIndex,j=O.dataEndIndex,C=E.barSize,U=E.layout,L=E.barGap,$=E.barCategoryGap,B=E.maxBarSize,G=MU(U),K=G.numericAxisName,H=G.cateAxisName,Z=t_e(R),ne=[];return R.forEach(function(ce,he){var Y=Uw(E.data,{graphicalItems:[ce],dataStartIndex:A,dataEndIndex:j}),ae=ce.type.defaultProps!==void 0?Ke(Ke({},ce.type.defaultProps),ce.props):ce.props,re=ae.dataKey,ye=ae.maxBarSize,De=ae["".concat(K,"Id")],Ye=ae["".concat(H,"Id")],rt={},et=d.reduce(function(St,bt){var de=O["".concat(bt.axisType,"Map")],He=ae["".concat(bt.axisType,"Id")];de&&de[He]||bt.axisType==="zAxis"||p0();var xt=de[He];return Ke(Ke({},St),{},er(er({},bt.axisType,xt),"".concat(bt.axisType,"Ticks"),Zl(xt)))},rt),Ne=et[H],Ue=et["".concat(H,"Ticks")],X=P&&P[De]&&P[De].hasStack&&cbe(ce,P[De].stackGroups),te=nc(ce.type).indexOf("Bar")>=0,be=Ib(Ne,Ue),we=[],Qe=Z&&Xve({barSize:C,stackGroups:P,totalSize:n_e(et,H)});if(te){var at,kt,je=xr(ye)?B:ye,ct=(at=(kt=Ib(Ne,Ue,!0))!==null&&kt!==void 0?kt:je)!==null&&at!==void 0?at:0;we=Yve({barGap:L,barCategoryGap:$,bandSize:ct!==be?ct:be,sizeList:Qe[Ye],maxBarSize:je}),ct!==be&&(we=we.map(function(St){return Ke(Ke({},St),{},{position:Ke(Ke({},St.position),{},{offset:St.position.offset-ct/2})})}))}var Tt=ce&&ce.type&&ce.type.getComposedData;Tt&&ne.push({props:Ke(Ke({},Tt(Ke(Ke({},et),{},{displayedData:Y,props:E,dataKey:re,item:ce,bandSize:be,barPosition:we,offset:I,stackedData:X,layout:U,dataStartIndex:A,dataEndIndex:j}))),{},er(er(er({key:ce.key||"item-".concat(he)},K,et[K]),H,et[H]),"animationId",k)),childIndex:tfe(ce,E.children),item:ce})}),ne},y=function(E,O){var R=E.props,P=E.dataStartIndex,I=E.dataEndIndex,k=E.updateId;if(!GD({props:R}))return null;var A=R.children,j=R.layout,C=R.stackOffset,U=R.data,L=R.reverseStackOrder,$=MU(j),B=$.numericAxisName,G=$.cateAxisName,K=Rs(A,n),H=obe(U,K,"".concat(B,"Id"),"".concat(G,"Id"),C,L),Z=d.reduce(function(ae,re){var ye="".concat(re.axisType,"Map");return Ke(Ke({},ae),{},er({},ye,ZNe(R,Ke(Ke({},re),{},{graphicalItems:K,stackGroups:re.axisType===B&&H,dataStartIndex:P,dataEndIndex:I}))))},{}),ne=r_e(Ke(Ke({},Z),{},{props:R,graphicalItems:K}),O==null?void 0:O.legendBBox);Object.keys(Z).forEach(function(ae){Z[ae]=p(R,Z[ae],ne,ae.replace("Map",""),r)});var ce=Z["".concat(G,"Map")],he=e_e(ce),Y=x(R,Ke(Ke({},Z),{},{dataStartIndex:P,dataEndIndex:I,updateId:k,graphicalItems:K,stackGroups:H,offset:ne}));return Ke(Ke({formattedGraphicalItems:Y,graphicalItems:K,offset:ne,stackGroups:H},he),Z)},S=(function(w){function E(O){var R,P,I;return PNe(this,E),I=$Ne(this,E,[O]),er(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),er(I,"accessibilityManager",new SNe),er(I,"handleLegendBBoxUpdate",function(k){if(k){var A=I.state,j=A.dataStartIndex,C=A.dataEndIndex,U=A.updateId;I.setState(Ke({legendBBox:k},y({props:I.props,dataStartIndex:j,dataEndIndex:C,updateId:U},Ke(Ke({},I.state),{},{legendBBox:k}))))}}),er(I,"handleReceiveSyncEvent",function(k,A,j){if(I.props.syncId===k){if(j===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(A)}}),er(I,"handleBrushChange",function(k){var A=k.startIndex,j=k.endIndex;if(A!==I.state.dataStartIndex||j!==I.state.dataEndIndex){var C=I.state.updateId;I.setState(function(){return Ke({dataStartIndex:A,dataEndIndex:j},y({props:I.props,dataStartIndex:A,dataEndIndex:j,updateId:C},I.state))}),I.triggerSyncEvent({dataStartIndex:A,dataEndIndex:j})}}),er(I,"handleMouseEnter",function(k){var A=I.getMouseInfo(k);if(A){var j=Ke(Ke({},A),{},{isTooltipActive:!0});I.setState(j),I.triggerSyncEvent(j);var C=I.props.onMouseEnter;lr(C)&&C(j,k)}}),er(I,"triggeredAfterMouseMove",function(k){var A=I.getMouseInfo(k),j=A?Ke(Ke({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(j),I.triggerSyncEvent(j);var C=I.props.onMouseMove;lr(C)&&C(j,k)}),er(I,"handleItemMouseEnter",function(k){I.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),er(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),er(I,"handleMouseMove",function(k){k.persist(),I.throttleTriggeredAfterMouseMove(k)}),er(I,"handleMouseLeave",function(k){I.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};I.setState(A),I.triggerSyncEvent(A);var j=I.props.onMouseLeave;lr(j)&&j(A,k)}),er(I,"handleOuterEvent",function(k){var A=efe(k),j=ao(I.props,"".concat(A));if(A&&lr(j)){var C,U;/.*touch.*/i.test(A)?U=I.getMouseInfo(k.changedTouches[0]):U=I.getMouseInfo(k),j((C=U)!==null&&C!==void 0?C:{},k)}}),er(I,"handleClick",function(k){var A=I.getMouseInfo(k);if(A){var j=Ke(Ke({},A),{},{isTooltipActive:!0});I.setState(j),I.triggerSyncEvent(j);var C=I.props.onClick;lr(C)&&C(j,k)}}),er(I,"handleMouseDown",function(k){var A=I.props.onMouseDown;if(lr(A)){var j=I.getMouseInfo(k);A(j,k)}}),er(I,"handleMouseUp",function(k){var A=I.props.onMouseUp;if(lr(A)){var j=I.getMouseInfo(k);A(j,k)}}),er(I,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),er(I,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.handleMouseDown(k.changedTouches[0])}),er(I,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.handleMouseUp(k.changedTouches[0])}),er(I,"handleDoubleClick",function(k){var A=I.props.onDoubleClick;if(lr(A)){var j=I.getMouseInfo(k);A(j,k)}}),er(I,"handleContextMenu",function(k){var A=I.props.onContextMenu;if(lr(A)){var j=I.getMouseInfo(k);A(j,k)}}),er(I,"triggerSyncEvent",function(k){I.props.syncId!==void 0&&F_.emit(q_,I.props.syncId,k,I.eventEmitterSymbol)}),er(I,"applySyncEvent",function(k){var A=I.props,j=A.layout,C=A.syncMethod,U=I.state.updateId,L=k.dataStartIndex,$=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)I.setState(Ke({dataStartIndex:L,dataEndIndex:$},y({props:I.props,dataStartIndex:L,dataEndIndex:$,updateId:U},I.state)));else if(k.activeTooltipIndex!==void 0){var B=k.chartX,G=k.chartY,K=k.activeTooltipIndex,H=I.state,Z=H.offset,ne=H.tooltipTicks;if(!Z)return;if(typeof C=="function")K=C(ne,k);else if(C==="value"){K=-1;for(var ce=0;ce<ne.length;ce++)if(ne[ce].value===k.activeLabel){K=ce;break}}var he=Ke(Ke({},Z),{},{x:Z.left,y:Z.top}),Y=Math.min(B,he.x+he.width),ae=Math.min(G,he.y+he.height),re=ne[K]&&ne[K].value,ye=OA(I.state,I.props.data,K),De=ne[K]?{x:j==="horizontal"?ne[K].coordinate:Y,y:j==="horizontal"?ae:ne[K].coordinate}:TX;I.setState(Ke(Ke({},k),{},{activeLabel:re,activeCoordinate:De,activePayload:ye,activeTooltipIndex:K}))}else I.setState(k)}),er(I,"renderCursor",function(k){var A,j=I.state,C=j.isTooltipActive,U=j.activeCoordinate,L=j.activePayload,$=j.offset,B=j.activeTooltipIndex,G=j.tooltipAxisBandSize,K=I.getTooltipEventType(),H=(A=k.props.active)!==null&&A!==void 0?A:C,Z=I.props.layout,ne=k.key||"_recharts-cursor";return ie.createElement(kNe,{key:ne,activeCoordinate:U,activePayload:L,activeTooltipIndex:B,chartName:r,element:k,isActive:H,layout:Z,offset:$,tooltipAxisBandSize:G,tooltipEventType:K})}),er(I,"renderPolarAxis",function(k,A,j){var C=ao(k,"type.axisType"),U=ao(I.state,"".concat(C,"Map")),L=k.type.defaultProps,$=L!==void 0?Ke(Ke({},L),k.props):k.props,B=U&&U[$["".concat(C,"Id")]];return T.cloneElement(k,Ke(Ke({},B),{},{className:wr(C,B.className),key:k.key||"".concat(A,"-").concat(j),ticks:Zl(B,!0)}))}),er(I,"renderPolarGrid",function(k){var A=k.props,j=A.radialLines,C=A.polarAngles,U=A.polarRadius,L=I.state,$=L.radiusAxisMap,B=L.angleAxisMap,G=mu($),K=mu(B),H=K.cx,Z=K.cy,ne=K.innerRadius,ce=K.outerRadius;return T.cloneElement(k,{polarAngles:Array.isArray(C)?C:Zl(K,!0).map(function(he){return he.coordinate}),polarRadius:Array.isArray(U)?U:Zl(G,!0).map(function(he){return he.coordinate}),cx:H,cy:Z,innerRadius:ne,outerRadius:ce,key:k.key||"polar-grid",radialLines:j})}),er(I,"renderLegend",function(){var k=I.state.formattedGraphicalItems,A=I.props,j=A.children,C=A.width,U=A.height,L=I.props.margin||{},$=C-(L.left||0)-(L.right||0),B=nQ({children:j,formattedGraphicalItems:k,legendWidth:$,legendContent:h});if(!B)return null;var G=B.item,K=CU(B,CNe);return T.cloneElement(G,Ke(Ke({},K),{},{chartWidth:C,chartHeight:U,margin:L,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),er(I,"renderTooltip",function(){var k,A=I.props,j=A.children,C=A.accessibilityLayer,U=js(j,Wo);if(!U)return null;var L=I.state,$=L.isTooltipActive,B=L.activeCoordinate,G=L.activePayload,K=L.activeLabel,H=L.offset,Z=(k=U.props.active)!==null&&k!==void 0?k:$;return T.cloneElement(U,{viewBox:Ke(Ke({},H),{},{x:H.left,y:H.top}),active:Z,label:K,payload:Z?G:[],coordinate:B,accessibilityLayer:C})}),er(I,"renderBrush",function(k){var A=I.props,j=A.margin,C=A.data,U=I.state,L=U.offset,$=U.dataStartIndex,B=U.dataEndIndex,G=U.updateId;return T.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Fy(I.handleBrushChange,k.props.onChange),data:C,x:wt(k.props.x)?k.props.x:L.left,y:wt(k.props.y)?k.props.y:L.top+L.height+L.brushBottom-(j.bottom||0),width:wt(k.props.width)?k.props.width:L.width,startIndex:$,endIndex:B,updateId:"brush-".concat(G)})}),er(I,"renderReferenceElement",function(k,A,j){if(!k)return null;var C=I,U=C.clipPathId,L=I.state,$=L.xAxisMap,B=L.yAxisMap,G=L.offset,K=k.type.defaultProps||{},H=k.props,Z=H.xAxisId,ne=Z===void 0?K.xAxisId:Z,ce=H.yAxisId,he=ce===void 0?K.yAxisId:ce;return T.cloneElement(k,{key:k.key||"".concat(A,"-").concat(j),xAxis:$[ne],yAxis:B[he],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:U})}),er(I,"renderActivePoints",function(k){var A=k.item,j=k.activePoint,C=k.basePoint,U=k.childIndex,L=k.isRange,$=[],B=A.props.key,G=A.item.type.defaultProps!==void 0?Ke(Ke({},A.item.type.defaultProps),A.item.props):A.item.props,K=G.activeDot,H=G.dataKey,Z=Ke(Ke({index:U,dataKey:H,cx:j.x,cy:j.y,r:4,fill:R7(A.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},Qt(K,!1)),ob(K));return $.push(E.renderActiveDot(K,Z,"".concat(B,"-activePoint-").concat(U))),C?$.push(E.renderActiveDot(K,Ke(Ke({},Z),{},{cx:C.x,cy:C.y}),"".concat(B,"-basePoint-").concat(U))):L&&$.push(null),$}),er(I,"renderGraphicChild",function(k,A,j){var C=I.filterFormatItem(k,A,j);if(!C)return null;var U=I.getTooltipEventType(),L=I.state,$=L.isTooltipActive,B=L.tooltipAxis,G=L.activeTooltipIndex,K=L.activeLabel,H=I.props.children,Z=js(H,Wo),ne=C.props,ce=ne.points,he=ne.isRange,Y=ne.baseLine,ae=C.item.type.defaultProps!==void 0?Ke(Ke({},C.item.type.defaultProps),C.item.props):C.item.props,re=ae.activeDot,ye=ae.hide,De=ae.activeBar,Ye=ae.activeShape,rt=!!(!ye&&$&&Z&&(re||De||Ye)),et={};U!=="axis"&&Z&&Z.props.trigger==="click"?et={onClick:Fy(I.handleItemMouseEnter,k.props.onClick)}:U!=="axis"&&(et={onMouseLeave:Fy(I.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Fy(I.handleItemMouseEnter,k.props.onMouseEnter)});var Ne=T.cloneElement(k,Ke(Ke({},C.props),et));function Ue(bt){return typeof B.dataKey=="function"?B.dataKey(bt.payload):null}if(rt)if(G>=0){var X,te;if(B.dataKey&&!B.allowDuplicatedCategory){var be=typeof B.dataKey=="function"?Ue:"payload.".concat(B.dataKey.toString());X=sb(ce,be,K),te=he&&Y&&sb(Y,be,K)}else X=ce==null?void 0:ce[G],te=he&&Y&&Y[G];if(Ye||De){var we=k.props.activeIndex!==void 0?k.props.activeIndex:G;return[T.cloneElement(k,Ke(Ke(Ke({},C.props),et),{},{activeIndex:we})),null,null]}if(!xr(X))return[Ne].concat(Mf(I.renderActivePoints({item:C,activePoint:X,basePoint:te,childIndex:G,isRange:he})))}else{var Qe,at=(Qe=I.getItemByXY(I.state.activeCoordinate))!==null&&Qe!==void 0?Qe:{graphicalItem:Ne},kt=at.graphicalItem,je=kt.item,ct=je===void 0?k:je,Tt=kt.childIndex,St=Ke(Ke(Ke({},C.props),et),{},{activeIndex:Tt});return[T.cloneElement(ct,St),null,null]}return he?[Ne,null,null]:[Ne,null]}),er(I,"renderCustomized",function(k,A,j){return T.cloneElement(k,Ke(Ke({key:"recharts-customized-".concat(j)},I.props),I.state))}),er(I,"renderMap",{CartesianGrid:{handler:Ky,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Ky},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Ky},YAxis:{handler:Ky},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((R=O.id)!==null&&R!==void 0?R:Cx("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=rK(I.triggeredAfterMouseMove,(P=O.throttleDelay)!==null&&P!==void 0?P:1e3/60),I.state={},I}return VNe(E,w),BNe(E,[{key:"componentDidMount",value:function(){var R,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var R=this.props,P=R.children,I=R.data,k=R.height,A=R.layout,j=js(P,Wo);if(j){var C=j.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,L=OA(this.state,I,C,U),$=this.state.tooltipTicks[C].coordinate,B=(this.state.offset.top+k)/2,G=A==="horizontal",K=G?{x:$,y:B}:{y:$,x:B},H=this.state.formattedGraphicalItems.find(function(ne){var ce=ne.item;return ce.type.name==="Scatter"});H&&(K=Ke(Ke({},K),H.props.points[C].tooltipPosition),L=H.props.points[C].tooltipPayload);var Z={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:U,activePayload:L,activeCoordinate:K};this.setState(Z),this.renderCursor(j),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(R,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var I,k;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(R){dj([js(R.children,Wo)],[js(this.props.children,Wo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=js(this.props.children,Wo);if(R&&typeof R.props.shared=="boolean"){var P=R.props.shared?"axis":"item";return c.indexOf(P)>=0?P:i}return i}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var P=this.container,I=P.getBoundingClientRect(),k=Uge(I),A={chartX:Math.round(R.pageX-k.left),chartY:Math.round(R.pageY-k.top)},j=I.width/P.offsetWidth||1,C=this.inRange(A.chartX,A.chartY,j);if(!C)return null;var U=this.state,L=U.xAxisMap,$=U.yAxisMap,B=this.getTooltipEventType(),G=IU(this.state,this.props.data,this.props.layout,C);if(B!=="axis"&&L&&$){var K=mu(L).scale,H=mu($).scale,Z=K&&K.invert?K.invert(A.chartX):null,ne=H&&H.invert?H.invert(A.chartY):null;return Ke(Ke({},A),{},{xValue:Z,yValue:ne},G)}return G?Ke(Ke({},A),G):null}},{key:"inRange",value:function(R,P){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,A=R/I,j=P/I;if(k==="horizontal"||k==="vertical"){var C=this.state.offset,U=A>=C.left&&A<=C.left+C.width&&j>=C.top&&j<=C.top+C.height;return U?{x:A,y:j}:null}var L=this.state,$=L.angleAxisMap,B=L.radiusAxisMap;if($&&B){var G=mu($);return D$({x:A,y:j},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,P=this.getTooltipEventType(),I=js(R,Wo),k={};I&&P==="axis"&&(I.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=ob(this.props,this.handleOuterEvent);return Ke(Ke({},A),k)}},{key:"addListener",value:function(){F_.on(q_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){F_.removeListener(q_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,P,I){for(var k=this.state.formattedGraphicalItems,A=0,j=k.length;A<j;A++){var C=k[A];if(C.item===R||C.props.key===R.key||P===nc(C.item.type)&&I===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var R=this.clipPathId,P=this.state.offset,I=P.left,k=P.top,A=P.height,j=P.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:R},ie.createElement("rect",{x:I,y:k,height:A,width:j})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(P,I){var k=kU(I,2),A=k[0],j=k[1];return Ke(Ke({},P),{},er({},A,j.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(P,I){var k=kU(I,2),A=k[0],j=k[1];return Ke(Ke({},P),{},er({},A,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[R])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(R){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[R])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(R){var P=this.state,I=P.formattedGraphicalItems,k=P.activeItem;if(I&&I.length)for(var A=0,j=I.length;A<j;A++){var C=I[A],U=C.props,L=C.item,$=L.type.defaultProps!==void 0?Ke(Ke({},L.type.defaultProps),L.props):L.props,B=nc(L.type);if(B==="Bar"){var G=(U.data||[]).find(function(ne){return l4e(R,ne)});if(G)return{graphicalItem:C,payload:G}}else if(B==="RadialBar"){var K=(U.data||[]).find(function(ne){return D$(R,ne)});if(K)return{graphicalItem:C,payload:K}}else if(Ow(C,k)||Iw(C,k)||Gg(C,k)){var H=U5e({graphicalItem:C,activeTooltipItem:k,itemData:$.data}),Z=$.activeIndex===void 0?H:$.activeIndex;return{graphicalItem:Ke(Ke({},C),{},{childIndex:Z}),payload:Gg(C,k)?$.data[H]:C.props.data[H]}}}return null}},{key:"render",value:function(){var R=this;if(!GD(this))return null;var P=this.props,I=P.children,k=P.className,A=P.width,j=P.height,C=P.style,U=P.compact,L=P.title,$=P.desc,B=CU(P,ONe),G=Qt(B,!1);if(U)return ie.createElement(dU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(fj,Eh({},G,{width:A,height:j,title:L,desc:$}),this.renderClipPath(),KD(I,this.renderMap)));if(this.props.accessibilityLayer){var K,H;G.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,G.role=(H=this.props.role)!==null&&H!==void 0?H:"application",G.onKeyDown=function(ne){R.accessibilityManager.keyboardEvent(ne)},G.onFocus=function(){R.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return ie.createElement(dU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",Eh({className:wr("recharts-wrapper",k),style:Ke({position:"relative",cursor:"default",width:A,height:j},C)},Z,{ref:function(ce){R.container=ce}}),ie.createElement(fj,Eh({},G,{width:A,height:j,title:L,desc:$,style:KNe}),this.renderClipPath(),KD(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(T.Component);er(S,"displayName",r),er(S,"defaultProps",Ke({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),er(S,"getDerivedStateFromProps",function(w,E){var O=w.dataKey,R=w.data,P=w.children,I=w.width,k=w.height,A=w.layout,j=w.stackOffset,C=w.margin,U=E.dataStartIndex,L=E.dataEndIndex;if(E.updateId===void 0){var $=RU(w);return Ke(Ke(Ke({},$),{},{updateId:0},y(Ke(Ke({props:w},$),{},{updateId:0}),E)),{},{prevDataKey:O,prevData:R,prevWidth:I,prevHeight:k,prevLayout:A,prevStackOffset:j,prevMargin:C,prevChildren:P})}if(O!==E.prevDataKey||R!==E.prevData||I!==E.prevWidth||k!==E.prevHeight||A!==E.prevLayout||j!==E.prevStackOffset||!Bh(C,E.prevMargin)){var B=RU(w),G={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},K=Ke(Ke({},IU(E,R,A)),{},{updateId:E.updateId+1}),H=Ke(Ke(Ke({},B),G),K);return Ke(Ke(Ke({},H),y(Ke({props:w},H),E)),{},{prevDataKey:O,prevData:R,prevWidth:I,prevHeight:k,prevLayout:A,prevStackOffset:j,prevMargin:C,prevChildren:P})}if(!dj(P,E.prevChildren)){var Z,ne,ce,he,Y=js(P,Nf),ae=Y&&(Z=(ne=Y.props)===null||ne===void 0?void 0:ne.startIndex)!==null&&Z!==void 0?Z:U,re=Y&&(ce=(he=Y.props)===null||he===void 0?void 0:he.endIndex)!==null&&ce!==void 0?ce:L,ye=ae!==U||re!==L,De=!xr(R),Ye=De&&!ye?E.updateId:E.updateId+1;return Ke(Ke({updateId:Ye},y(Ke(Ke({props:w},E),{},{updateId:Ye,dataStartIndex:ae,dataEndIndex:re}),E)),{},{prevChildren:P,dataStartIndex:ae,dataEndIndex:re})}return null}),er(S,"renderActiveDot",function(w,E,O){var R;return T.isValidElement(w)?R=T.cloneElement(w,E):lr(w)?R=w(E):R=ie.createElement(Ew,E),ie.createElement(Qr,{className:"recharts-active-dot",key:O},R)});var N=T.forwardRef(function(E,O){return ie.createElement(S,Eh({},E,{ref:O}))});return N.displayName=S.displayName,N},a_e=AX({chartName:"RadarChart",GraphicalChild:zx,axisComponents:[{axisType:"angleAxis",AxisComp:$x},{axisType:"radiusAxis",AxisComp:Bx}],formatAxisMap:bbe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),i_e=AX({chartName:"ScatterChart",GraphicalChild:Vx,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:$w},{axisType:"yAxis",AxisComp:zw},{axisType:"zAxis",AxisComp:Bw}],formatAxisMap:Y3e});const Vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tp(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function q7(t){return"nodeType"in t}function Fi(t){var e,r;return t?tp(t)?t:q7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function H7(t){const{Document:e}=Fi(t);return t instanceof e}function Fx(t){return tp(t)?!1:t instanceof Fi(t).HTMLElement}function EX(t){return t instanceof Fi(t).SVGElement}function rp(t){return t?tp(t)?t.document:q7(t)?H7(t)?t:Fx(t)||EX(t)?t.ownerDocument:document:document:document}const yc=Vw?T.useLayoutEffect:T.useEffect;function Fw(t){const e=T.useRef(t);return yc(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function s_e(){const t=T.useRef(null),e=T.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Zg(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return yc(()=>{r.current!==t&&(r.current=t)},e),r}function qx(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function o2(t){const e=Fw(t),r=T.useRef(null),n=T.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function l2(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let G_={};function qw(t,e){return T.useMemo(()=>{if(e)return e;const r=G_[t]==null?0:G_[t]+1;return G_[t]=r,t+"-"+r},[t,e])}function kX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const Vh=kX(1),c2=kX(-1);function o_e(t){return"clientX"in t&&"clientY"in t}function G7(t){if(!t)return!1;const{KeyboardEvent:e}=Fi(t.target);return e&&t instanceof e}function l_e(t){if(!t)return!1;const{TouchEvent:e}=Fi(t.target);return e&&t instanceof e}function ex(t){if(l_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return o_e(t)?{x:t.clientX,y:t.clientY}:null}const tx=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[tx.Translate.toString(t),tx.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),DU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function c_e(t){return t.matches(DU)?t:t.querySelector(DU)}const u_e={display:"none"};function d_e(t){let{id:e,value:r}=t;return ie.createElement("div",{id:e,style:u_e},r)}function h_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ie.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function f_e(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const CX=T.createContext(null);function p_e(t){const e=T.useContext(CX);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function m_e(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const g_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function y_e(t){let{announcements:e=x_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=g_e}=t;const{announce:i,announcement:o}=f_e(),c=qw("DndLiveRegion"),[d,h]=T.useState(!1);if(T.useEffect(()=>{h(!0)},[]),p_e(T.useMemo(()=>({onDragStart(m){let{active:x}=m;i(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:y}=m;e.onDragMove&&i(e.onDragMove({active:x,over:y}))},onDragOver(m){let{active:x,over:y}=m;i(e.onDragOver({active:x,over:y}))},onDragEnd(m){let{active:x,over:y}=m;i(e.onDragEnd({active:x,over:y}))},onDragCancel(m){let{active:x,over:y}=m;i(e.onDragCancel({active:x,over:y}))}}),[i,e])),!d)return null;const p=ie.createElement(ie.Fragment,null,ie.createElement(d_e,{id:n,value:a.draggable}),ie.createElement(h_e,{id:c,announcement:o}));return r?xu.createPortal(p,r):p}var Va;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Va||(Va={}));function u2(){}function PU(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function v_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Io=Object.freeze({x:0,y:0});function b_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function w_e(t,e){const r=ex(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function S_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function N_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function __e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function LU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const T_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=LU(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=b_e(LU(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(S_e)};function j_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const A_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=j_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(N_e)};function E_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function OX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Io}function k_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const C_e=k_e(1);function IX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function O_e(t,e,r){const n=IX(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const I_e={ignoreTransform:!1};function Hx(t,e){e===void 0&&(e=I_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Fi(t).getComputedStyle(t);h&&(r=O_e(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function BU(t){return Hx(t,{ignoreTransform:!0})}function R_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function M_e(t,e){return e===void 0&&(e=Fi(t).getComputedStyle(t)),e.position==="fixed"}function D_e(t,e){e===void 0&&(e=Fi(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function W7(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(H7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Fx(a)||EX(a)||r.includes(a))return r;const i=Fi(t).getComputedStyle(a);return a!==t&&D_e(a,i)&&r.push(a),M_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function RX(t){const[e]=W7(t,1);return e??null}function W_(t){return!Vw||!t?null:tp(t)?t:q7(t)?H7(t)||t===rp(t).scrollingElement?window:Fx(t)?t:null:null}function MX(t){return tp(t)?t.scrollX:t.scrollLeft}function DX(t){return tp(t)?t.scrollY:t.scrollTop}function IA(t){return{x:MX(t),y:DX(t)}}var ti;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ti||(ti={}));function PX(t){return!Vw||!t?!1:t===document.scrollingElement}function LX(t){const e={x:0,y:0},r=PX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const P_e={x:.2,y:.2};function L_e(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=P_e);const{isTop:h,isBottom:p,isLeft:m,isRight:x}=LX(t),y={x:0,y:0},S={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+N.height?(y.y=ti.Backward,S.y=n*Math.abs((e.top+N.height-i)/N.height)):!p&&d>=e.bottom-N.height&&(y.y=ti.Forward,S.y=n*Math.abs((e.bottom-N.height-d)/N.height)),!x&&c>=e.right-N.width?(y.x=ti.Forward,S.x=n*Math.abs((e.right-N.width-c)/N.width)):!m&&o<=e.left+N.width&&(y.x=ti.Backward,S.x=n*Math.abs((e.left+N.width-o)/N.width)),{direction:y,speed:S}}function B_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function BX(t){return t.reduce((e,r)=>Vh(e,IA(r)),Io)}function $_e(t){return t.reduce((e,r)=>e+MX(r),0)}function z_e(t){return t.reduce((e,r)=>e+DX(r),0)}function $X(t,e){if(e===void 0&&(e=Hx),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);RX(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const U_e=[["x",["left","right"],$_e],["y",["top","bottom"],z_e]];class K7{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=W7(r),a=BX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of U_e)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function V_e(t){const{EventTarget:e}=Fi(t);return t instanceof e?t:rp(t)}function K_(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Zs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Zs||(Zs={}));function $U(t){t.preventDefault()}function F_e(t){t.stopPropagation()}var Cn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Cn||(Cn={}));const zX={start:[Cn.Space,Cn.Enter],cancel:[Cn.Esc],end:[Cn.Space,Cn.Enter,Cn.Tab]},q_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Cn.Right:return{...r,x:r.x+25};case Cn.Left:return{...r,x:r.x-25};case Cn.Down:return{...r,y:r.y+25};case Cn.Up:return{...r,y:r.y-25}}};class UX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Fm(rp(r)),this.windowListeners=new Fm(Fi(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&$X(n),r(Io)}handleKeyDown(e){if(G7(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=zX,coordinateGetter:o=q_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Io;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const x=c2(m,p),y={x:0,y:0},{scrollableAncestors:S}=n.current;for(const N of S){const w=e.code,{isTop:E,isRight:O,isLeft:R,isBottom:P,maxScroll:I,minScroll:k}=LX(N),A=B_e(N),j={x:Math.min(w===Cn.Right?A.right-A.width/2:A.right,Math.max(w===Cn.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(w===Cn.Down?A.bottom-A.height/2:A.bottom,Math.max(w===Cn.Down?A.top:A.top+A.height/2,m.y))},C=w===Cn.Right&&!O||w===Cn.Left&&!R,U=w===Cn.Down&&!P||w===Cn.Up&&!E;if(C&&j.x!==m.x){const L=N.scrollLeft+x.x,$=w===Cn.Right&&L<=I.x||w===Cn.Left&&L>=k.x;if($&&!x.y){N.scrollTo({left:L,behavior:c});return}$?y.x=N.scrollLeft-L:y.x=w===Cn.Right?N.scrollLeft-I.x:N.scrollLeft-k.x,y.x&&N.scrollBy({left:-y.x,behavior:c});break}else if(U&&j.y!==m.y){const L=N.scrollTop+x.y,$=w===Cn.Down&&L<=I.y||w===Cn.Up&&L>=k.y;if($&&!x.x){N.scrollTo({top:L,behavior:c});return}$?y.y=N.scrollTop-L:y.y=w===Cn.Down?N.scrollTop-I.y:N.scrollTop-k.y,y.y&&N.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,Vh(c2(m,this.referenceCoordinates),y))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}UX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=zX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function zU(t){return!!(t&&"distance"in t)}function UU(t){return!!(t&&"delay"in t)}class Q7{constructor(e,r,n){var a;n===void 0&&(n=V_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=rp(o),this.documentListeners=new Fm(this.document),this.listeners=new Fm(n),this.windowListeners=new Fm(Fi(o)),this.initialCoordinates=(a=ex(i))!=null?a:Io,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.DragStart,$U),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),this.windowListeners.add(Zs.ContextMenu,$U),this.documentListeners.add(Zs.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(UU(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(zU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Zs.Click,F_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zs.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=ex(e))!=null?r:Io,h=c2(a,d);if(!n&&c){if(zU(c)){if(c.tolerance!=null&&K_(h,c.tolerance))return this.handleCancel();if(K_(h,c.distance))return this.handleStart()}if(UU(c)&&K_(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Cn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const H_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class X7 extends Q7{constructor(e){const{event:r}=e,n=rp(r.target);super(e,H_e,n)}}X7.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const G_e={move:{name:"mousemove"},end:{name:"mouseup"}};var RA;(function(t){t[t.RightClick=2]="RightClick"})(RA||(RA={}));class W_e extends Q7{constructor(e){super(e,G_e,rp(e.event.target))}}W_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===RA.RightClick?!1:(n==null||n({event:r}),!0)}}];const Q_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class VX extends Q7{constructor(e){super(e,Q_)}static setup(){return window.addEventListener(Q_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Q_.move.name,e)};function e(){}}}VX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var qm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(qm||(qm={}));var d2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(d2||(d2={}));function K_e(t){let{acceleration:e,activator:r=qm.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=d2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:x}=t;const y=X_e({delta:m,disabled:!i}),[S,N]=s_e(),w=T.useRef({x:0,y:0}),E=T.useRef({x:0,y:0}),O=T.useMemo(()=>{switch(r){case qm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case qm.DraggableRect:return a}},[r,a,d]),R=T.useRef(null),P=T.useCallback(()=>{const k=R.current;if(!k)return;const A=w.current.x*E.current.x,j=w.current.y*E.current.y;k.scrollBy(A,j)},[]),I=T.useMemo(()=>c===d2.TreeOrder?[...h].reverse():h,[c,h]);T.useEffect(()=>{if(!i||!h.length||!O){N();return}for(const k of I){if((n==null?void 0:n(k))===!1)continue;const A=h.indexOf(k),j=p[A];if(!j)continue;const{direction:C,speed:U}=L_e(k,j,O,e,x);for(const L of["x","y"])y[L][C[L]]||(U[L]=0,C[L]=0);if(U.x>0||U.y>0){N(),R.current=k,S(P,o),w.current=U,E.current=C;return}}w.current={x:0,y:0},E.current={x:0,y:0},N()},[e,P,n,N,i,o,JSON.stringify(O),JSON.stringify(y),S,h,I,p,JSON.stringify(x)])}const Q_e={x:{[ti.Backward]:!1,[ti.Forward]:!1},y:{[ti.Backward]:!1,[ti.Forward]:!1}};function X_e(t){let{delta:e,disabled:r}=t;const n=l2(e);return qx(a=>{if(r||!n||!a)return Q_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ti.Backward]:a.x[ti.Backward]||i.x===-1,[ti.Forward]:a.x[ti.Forward]||i.x===1},y:{[ti.Backward]:a.y[ti.Backward]||i.y===-1,[ti.Forward]:a.y[ti.Forward]||i.y===1}}},[r,e,n])}function Y_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return qx(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function J_e(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var rx;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(rx||(rx={}));var MA;(function(t){t.Optimized="optimized"})(MA||(MA={}));const VU=new Map;function Z_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=T.useState(null),{frequency:c,measure:d,strategy:h}=a,p=T.useRef(t),m=w(),x=Zg(m),y=T.useCallback(function(E){E===void 0&&(E=[]),!x.current&&o(O=>O===null?E:O.concat(E.filter(R=>!O.includes(R))))},[x]),S=T.useRef(null),N=qx(E=>{if(m&&!r)return VU;if(!E||E===VU||p.current!==t||i!=null){const O=new Map;for(let R of t){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){O.set(R.id,R.rect.current);continue}const P=R.node.current,I=P?new K7(d(P),P):null;R.rect.current=I,I&&O.set(R.id,I)}return O}return E},[t,i,r,m,d]);return T.useEffect(()=>{p.current=t},[t]),T.useEffect(()=>{m||y()},[r,m]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{m||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},c))},[c,m,y,...n]),{droppableRects:N,measureDroppableContainers:y,measuringScheduled:i!=null};function w(){switch(h){case rx.Always:return!1;case rx.BeforeDragging:return r;default:return!r}}}function Y7(t,e){return qx(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function eTe(t,e){return Y7(t,e)}function tTe(t){let{callback:e,disabled:r}=t;const n=Fw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Hw(t){let{callback:e,disabled:r}=t;const n=Fw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function rTe(t){return new K7(Hx(t),t)}function FU(t,e,r){e===void 0&&(e=rTe);const[n,a]=T.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=tTe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=Hw({callback:i});return yc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function nTe(t){const e=Y7(t);return OX(t,e)}const qU=[];function aTe(t){const e=T.useRef(t),r=qx(n=>t?n&&n!==qU&&t&&e.current&&t.parentNode===e.current.parentNode?n:W7(t):qU,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function iTe(t){const[e,r]=T.useState(null),n=T.useRef(t),a=T.useCallback(i=>{const o=W_(i.target);o&&r(c=>c?(c.set(o,IA(o)),new Map(c)):null)},[]);return T.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=W_(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,IA(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=W_(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Vh(i,o),Io):BX(t):Io,[t,e])}function HU(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==Io;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?c2(t,r.current):Io}function sTe(t){T.useEffect(()=>{if(!Vw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function oTe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function FX(t){return T.useMemo(()=>t?R_e(t):null,[t])}const GU=[];function lTe(t,e){e===void 0&&(e=Hx);const[r]=t,n=FX(r?Fi(r):null),[a,i]=T.useState(GU);function o(){i(()=>t.length?t.map(d=>PX(d)?n:new K7(e(d),d)):GU)}const c=Hw({callback:o});return yc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function qX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Fx(e)?e:t}function cTe(t){let{measure:e}=t;const[r,n]=T.useState(null),a=T.useCallback(h=>{for(const{target:p}of h)if(Fx(p)){n(m=>{const x=e(p);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),i=Hw({callback:a}),o=T.useCallback(h=>{const p=qX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=o2(o);return T.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const uTe=[{sensor:X7,options:{}},{sensor:UX,options:{}}],dTe={current:{}},bv={draggable:{measure:BU},droppable:{measure:BU,strategy:rx.WhileDragging,frequency:MA.Optimized},dragOverlay:{measure:Hx}};class Hm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const hTe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:u2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bv,measureDroppableContainers:u2,windowRect:null,measuringScheduled:!1},HX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:u2,draggableNodes:new Map,over:null,measureDroppableContainers:u2},Gx=T.createContext(HX),GX=T.createContext(hTe);function fTe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hm}}}function pTe(t,e){switch(e.type){case Va.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Va.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Va.DragEnd:case Va.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Va.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Hm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Va.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Hm(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Va.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Hm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function mTe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=T.useContext(Gx),i=l2(n),o=l2(r==null?void 0:r.id);return T.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!G7(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=c_e(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function WX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function gTe(t){return T.useMemo(()=>({draggable:{...bv.draggable,...t==null?void 0:t.draggable},droppable:{...bv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...bv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function xTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=T.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;yc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=OX(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=RX(h);x&&x.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const Gw=T.createContext({...Io,scaleX:1,scaleY:1});var lu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(lu||(lu={}));const yTe=T.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=uTe,collisionDetection:m=A_e,measuring:x,modifiers:y,...S}=e;const N=T.useReducer(pTe,void 0,fTe),[w,E]=N,[O,R]=m_e(),[P,I]=T.useState(lu.Uninitialized),k=P===lu.Initialized,{draggable:{active:A,nodes:j,translate:C},droppable:{containers:U}}=w,L=A!=null?j.get(A):null,$=T.useRef({initial:null,translated:null}),B=T.useMemo(()=>{var Vt;return A!=null?{id:A,data:(Vt=L==null?void 0:L.data)!=null?Vt:dTe,rect:$}:null},[A,L]),G=T.useRef(null),[K,H]=T.useState(null),[Z,ne]=T.useState(null),ce=Zg(S,Object.values(S)),he=qw("DndDescribedBy",o),Y=T.useMemo(()=>U.getEnabled(),[U]),ae=gTe(x),{droppableRects:re,measureDroppableContainers:ye,measuringScheduled:De}=Z_e(Y,{dragging:k,dependencies:[C.x,C.y],config:ae.droppable}),Ye=Y_e(j,A),rt=T.useMemo(()=>Z?ex(Z):null,[Z]),et=Pt(),Ne=eTe(Ye,ae.draggable.measure);xTe({activeNode:A!=null?j.get(A):null,config:et.layoutShiftCompensation,initialRect:Ne,measure:ae.draggable.measure});const Ue=FU(Ye,ae.draggable.measure,Ne),X=FU(Ye?Ye.parentElement:null),te=T.useRef({activatorEvent:null,active:null,activeNode:Ye,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=U.getNodeFor((r=te.current.over)==null?void 0:r.id),we=cTe({measure:ae.dragOverlay.measure}),Qe=(n=we.nodeRef.current)!=null?n:Ye,at=k?(a=we.rect)!=null?a:Ue:null,kt=!!(we.nodeRef.current&&we.rect),je=nTe(kt?null:Ue),ct=FX(Qe?Fi(Qe):null),Tt=aTe(k?be??Ye:null),St=lTe(Tt),bt=WX(y,{transform:{x:C.x-je.x,y:C.y-je.y,scaleX:1,scaleY:1},activatorEvent:Z,active:B,activeNodeRect:Ue,containerNodeRect:X,draggingNodeRect:at,over:te.current.over,overlayNodeRect:we.rect,scrollableAncestors:Tt,scrollableAncestorRects:St,windowRect:ct}),de=rt?Vh(rt,C):null,He=iTe(Tt),xt=HU(He),Ge=HU(He,[Ue]),Je=Vh(bt,xt),Et=at?C_e(at,bt):null,Nt=B&&Et?m({active:B,collisionRect:Et,droppableRects:re,droppableContainers:Y,pointerCoordinates:de}):null,dr=__e(Nt,"id"),[ge,nt]=T.useState(null),jt=kt?bt:Vh(bt,Ge),Bt=E_e(jt,(i=ge==null?void 0:ge.rect)!=null?i:null,Ue),$t=T.useRef(null),tt=T.useCallback((Vt,qt)=>{let{sensor:Ct,options:Fr}=qt;if(G.current==null)return;const un=j.get(G.current);if(!un)return;const Jr=Vt.nativeEvent,qr=new Ct({active:G.current,activeNode:un,event:Jr,options:Fr,context:te,onAbort(gr){if(!j.get(gr))return;const{onDragAbort:xn}=ce.current,Rn={id:gr};xn==null||xn(Rn),O({type:"onDragAbort",event:Rn})},onPending(gr,ba,xn,Rn){if(!j.get(gr))return;const{onDragPending:Or}=ce.current,yn={id:gr,constraint:ba,initialCoordinates:xn,offset:Rn};Or==null||Or(yn),O({type:"onDragPending",event:yn})},onStart(gr){const ba=G.current;if(ba==null)return;const xn=j.get(ba);if(!xn)return;const{onDragStart:Rn}=ce.current,oi={activatorEvent:Jr,active:{id:ba,data:xn.data,rect:$}};xu.unstable_batchedUpdates(()=>{Rn==null||Rn(oi),I(lu.Initializing),E({type:Va.DragStart,initialCoordinates:gr,active:ba}),O({type:"onDragStart",event:oi}),H($t.current),ne(Jr)})},onMove(gr){E({type:Va.DragMove,coordinates:gr})},onEnd:gn(Va.DragEnd),onCancel:gn(Va.DragCancel)});$t.current=qr;function gn(gr){return async function(){const{active:xn,collisions:Rn,over:oi,scrollAdjustedTranslate:Or}=te.current;let yn=null;if(xn&&Or){const{cancelDrop:li}=ce.current;yn={activatorEvent:Jr,active:xn,collisions:Rn,delta:Or,over:oi},gr===Va.DragEnd&&typeof li=="function"&&await Promise.resolve(li(yn))&&(gr=Va.DragCancel)}G.current=null,xu.unstable_batchedUpdates(()=>{E({type:gr}),I(lu.Uninitialized),nt(null),H(null),ne(null),$t.current=null;const li=gr===Va.DragEnd?"onDragEnd":"onDragCancel";if(yn){const Yn=ce.current[li];Yn==null||Yn(yn),O({type:li,event:yn})}})}}},[j]),tr=T.useCallback((Vt,qt)=>(Ct,Fr)=>{const un=Ct.nativeEvent,Jr=j.get(Fr);if(G.current!==null||!Jr||un.dndKit||un.defaultPrevented)return;const qr={active:Jr};Vt(Ct,qt.options,qr)===!0&&(un.dndKit={capturedBy:qt.sensor},G.current=Fr,tt(Ct,qt))},[j,tt]),Le=J_e(p,tr);sTe(p),yc(()=>{Ue&&P===lu.Initializing&&I(lu.Initialized)},[Ue,P]),T.useEffect(()=>{const{onDragMove:Vt}=ce.current,{active:qt,activatorEvent:Ct,collisions:Fr,over:un}=te.current;if(!qt||!Ct)return;const Jr={active:qt,activatorEvent:Ct,collisions:Fr,delta:{x:Je.x,y:Je.y},over:un};xu.unstable_batchedUpdates(()=>{Vt==null||Vt(Jr),O({type:"onDragMove",event:Jr})})},[Je.x,Je.y]),T.useEffect(()=>{const{active:Vt,activatorEvent:qt,collisions:Ct,droppableContainers:Fr,scrollAdjustedTranslate:un}=te.current;if(!Vt||G.current==null||!qt||!un)return;const{onDragOver:Jr}=ce.current,qr=Fr.get(dr),gn=qr&&qr.rect.current?{id:qr.id,rect:qr.rect.current,data:qr.data,disabled:qr.disabled}:null,gr={active:Vt,activatorEvent:qt,collisions:Ct,delta:{x:un.x,y:un.y},over:gn};xu.unstable_batchedUpdates(()=>{nt(gn),Jr==null||Jr(gr),O({type:"onDragOver",event:gr})})},[dr]),yc(()=>{te.current={activatorEvent:Z,active:B,activeNode:Ye,collisionRect:Et,collisions:Nt,droppableRects:re,draggableNodes:j,draggingNode:Qe,draggingNodeRect:at,droppableContainers:U,over:ge,scrollableAncestors:Tt,scrollAdjustedTranslate:Je},$.current={initial:at,translated:Et}},[B,Ye,Nt,Et,j,Qe,at,re,U,ge,Tt,Je]),K_e({...et,delta:C,draggingRect:Et,pointerCoordinates:de,scrollableAncestors:Tt,scrollableAncestorRects:St});const it=T.useMemo(()=>({active:B,activeNode:Ye,activeNodeRect:Ue,activatorEvent:Z,collisions:Nt,containerNodeRect:X,dragOverlay:we,draggableNodes:j,droppableContainers:U,droppableRects:re,over:ge,measureDroppableContainers:ye,scrollableAncestors:Tt,scrollableAncestorRects:St,measuringConfiguration:ae,measuringScheduled:De,windowRect:ct}),[B,Ye,Ue,Z,Nt,X,we,j,U,re,ge,ye,Tt,St,ae,De,ct]),dt=T.useMemo(()=>({activatorEvent:Z,activators:Le,active:B,activeNodeRect:Ue,ariaDescribedById:{draggable:he},dispatch:E,draggableNodes:j,over:ge,measureDroppableContainers:ye}),[Z,Le,B,Ue,E,he,j,ge,ye]);return ie.createElement(CX.Provider,{value:R},ie.createElement(Gx.Provider,{value:dt},ie.createElement(GX.Provider,{value:it},ie.createElement(Gw.Provider,{value:Bt},h)),ie.createElement(mTe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ie.createElement(y_e,{...c,hiddenTextDescribedById:he}));function Pt(){const Vt=(K==null?void 0:K.autoScrollEnabled)===!1,qt=typeof d=="object"?d.enabled===!1:d===!1,Ct=k&&!Vt&&!qt;return typeof d=="object"?{...d,enabled:Ct}:{enabled:Ct}}}),vTe=T.createContext(null),WU="button",bTe="Draggable";function KX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=qw(bTe),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:x}=T.useContext(Gx),{role:y=WU,roleDescription:S="draggable",tabIndex:N=0}=a??{},w=(d==null?void 0:d.id)===e,E=T.useContext(w?Gw:vTe),[O,R]=o2(),[P,I]=o2(),k=oTe(o,e),A=Zg(r);yc(()=>(m.set(e,{id:e,key:i,node:O,activatorNode:P,data:A}),()=>{const C=m.get(e);C&&C.key===i&&m.delete(e)}),[m,e]);const j=T.useMemo(()=>({role:y,tabIndex:N,"aria-disabled":n,"aria-pressed":w&&y===WU?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[n,y,N,w,S,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:j,isDragging:w,listeners:n?void 0:k,node:O,over:x,setNodeRef:R,setActivatorNodeRef:I,transform:E}}function wTe(){return T.useContext(GX)}const STe="Droppable",NTe={timeout:25};function J7(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=qw(STe),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=T.useContext(Gx),p=T.useRef({disabled:r}),m=T.useRef(!1),x=T.useRef(null),y=T.useRef(null),{disabled:S,updateMeasurementsFor:N,timeout:w}={...NTe,...a},E=Zg(N??n),O=T.useCallback(()=>{if(!m.current){m.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),y.current=null},w)},[w]),R=Hw({callback:O,disabled:S||!o}),P=T.useCallback((j,C)=>{R&&(C&&(R.unobserve(C),m.current=!1),j&&R.observe(j))},[R]),[I,k]=o2(P),A=Zg(e);return T.useEffect(()=>{!R||!I.current||(R.disconnect(),m.current=!1,R.observe(I.current))},[I,R]),T.useEffect(()=>(c({type:Va.RegisterDroppable,element:{id:n,key:i,disabled:r,node:I,rect:x,data:A}}),()=>c({type:Va.UnregisterDroppable,key:i,id:n})),[n]),T.useEffect(()=>{r!==p.current.disabled&&(c({type:Va.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:x,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:k}}function _Te(t){let{animation:e,children:r}=t;const[n,a]=T.useState(null),[i,o]=T.useState(null),c=l2(r);return!r&&!n&&c&&a(c),yc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),ie.createElement(ie.Fragment,null,r,n?T.cloneElement(n,{ref:o}):null)}const TTe={x:0,y:0,scaleX:1,scaleY:1};function jTe(t){let{children:e}=t;return ie.createElement(Gx.Provider,{value:HX},ie.createElement(Gw.Provider,{value:TTe},e))}const ATe={position:"fixed",touchAction:"none"},ETe=t=>G7(t)?"transform 250ms ease":void 0,kTe=T.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=ETe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},x={...ATe,width:c.width,height:c.height,top:c.top,left:c.left,transform:tx.Transform.toString(m),transformOrigin:a&&n?w_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return ie.createElement(r,{className:o,style:x,ref:e},i)}),CTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},OTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:tx.Transform.toString(e)},{transform:tx.Transform.toString(r)}]},ITe={duration:250,easing:"ease",keyframes:OTe,sideEffects:CTe({styles:{active:{opacity:"0"}}})};function RTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return Fw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=qX(o);if(!h)return;const{transform:p}=Fi(o).getComputedStyle(o),m=IX(p);if(!m)return;const x=typeof e=="function"?e:MTe(e);return $X(d,a.draggable.measure),x({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function MTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...ITe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-p.x,y:d.y-p.y,...m},y=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:x}}),[S]=y,N=y[y.length-1];if(JSON.stringify(S)===JSON.stringify(N))return;const w=n==null?void 0:n({active:o,dragOverlay:c,...h}),E=c.node.animate(y,{duration:e,easing:r,fill:"forwards"});return new Promise(O=>{E.onfinish=()=>{w==null||w(),O()}})}}let KU=0;function DTe(t){return T.useMemo(()=>{if(t!=null)return KU++,KU},[t])}const PTe=ie.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggableNodes:S,droppableContainers:N,dragOverlay:w,over:E,measuringConfiguration:O,scrollableAncestors:R,scrollableAncestorRects:P,windowRect:I}=wTe(),k=T.useContext(Gw),A=DTe(m==null?void 0:m.id),j=WX(o,{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:w.rect,over:E,overlayNodeRect:w.rect,scrollableAncestors:R,scrollableAncestorRects:P,transform:k,windowRect:I}),C=Y7(x),U=RTe({config:n,draggableNodes:S,droppableContainers:N,measuringConfiguration:O}),L=C?w.setRef:void 0;return ie.createElement(jTe,null,ie.createElement(_Te,{animation:U},m&&A?ie.createElement(kTe,{key:A,id:m.id,ref:L,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:C,style:{zIndex:h,...a},transform:j},r):null))});function QU(t,e=800){const[r,n]=T.useState(t),a=T.useRef(t),i=T.useRef(0);return T.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const x=m-d,y=Math.min(x/e,1),S=1-Math.pow(1-y,3);n(Math.round(o+h*S)),y<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const QX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],XX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],LTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],XU={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},xh=t=>t?XU[t.rarity]||XU.COMMON:null,BTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},nx=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=QX[(e==null?void 0:e.skinTone)??0],p=XX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,x=h+"99",y=t==null?void 0:t.HEAD,S=t==null?void 0:t.CHEST,N=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,E=t==null?void 0:t.BELT,O=t==null?void 0:t.AMULET,R=T.useMemo(()=>[y,S,N,w,E,O].filter(Boolean).length,[y,S,N,w,E,O]),P=T.useMemo(()=>[y,S,N,w,E,O].some(j=>(j==null?void 0:j.rarity)==="UNIQUE"),[y,S,N,w,E,O]),I=Math.min(1,.2+R*.13),k=c?23:21,A=T.useMemo(()=>BTe(m,k),[m,k]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:x})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:I}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:I*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const j=xh(w);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),S&&(()=>{const j=xh(S);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:j.primary,fillOpacity:"0.3",stroke:j.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:j.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:j.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),j.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),E?(()=>{const j=xh(E);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:j.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),N?(()=>{const j=xh(N);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),R>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:I*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),R>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),O&&(()=>{const j=xh(O);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:j.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:j.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[A.back&&s.jsx("path",{d:A.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:k,ry:"28",fill:"url(#av-face)",stroke:x,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-k-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+k+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:A.main,fill:"url(#av-hair)"}),A.accent&&s.jsx("path",{d:A.accent,fill:"url(#av-hair)",opacity:"0.9"}),y&&(()=>{const j=xh(y),C=y.visualId||"";return s.jsx("g",{filter:j.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:C.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-k-2} 28 Q100 10 ${100+k+2} 28 L${100+k+4} 62 Q100 72 ${100-k-4} 62 Z`,fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):C.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:j.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:j.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:j.primary,fillOpacity:"0.7",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:j.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((j,C)=>s.jsx("polygon",{points:`${100+j},16 ${97+j},22 ${103+j},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+C*.2}s`,repeatCount:"indefinite"})},C))]}),P&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((j,C)=>{const U=j*Math.PI/180,L=100+Math.cos(U)*50,$=145+Math.sin(U)*75;return s.jsxs("circle",{cx:L,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+C*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+C*.3}s`,repeatCount:"indefinite"})]},C)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((j,C)=>{const U=C*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),L=100+Math.cos(U)*(38+C*3),$=140+Math.sin(U)*(55+C*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:L,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+C*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+C*.4}s`,repeatCount:"indefinite"})]},C)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((j,C)=>{const U=60+Math.random()*80,L=20+Math.random()*260;return s.jsxs("circle",{cx:U,cy:L,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${L};${L-25};${L}`,dur:`${3+C*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+C*.5}s`,repeatCount:"indefinite"})]},`c-${C}`)})})]})]})},$Te={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},zTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=T.useMemo(()=>y0e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=LE.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(ll,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=$Te[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,x=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(af,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},UTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},VTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=T.useState(t||null),[i,o]=T.useState(null),c=Ma(),{confirm:d}=Mo(),h=!!t,p=n||"THEORIST",m=YG.filter(S=>S.specialization===p),x=[1,2,3,4],y=async S=>{if(!i){if(!h){const N=Dy[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${N} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${N}`,cancelLabel:"Go Back",variant:"warning"}))return}o(S);try{await ke.unlockSkill(S,p),Vn.skillUnlock(),c.success("Skill unlocked!")}catch(N){c.error(N instanceof Error?N.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(qn,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Ds,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(Br,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[Dy[t].icon," ",Dy[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Dy).map(([S,N])=>{const w=p===S,E=h&&t!==S;return s.jsxs("button",{onClick:()=>!E&&a(S),disabled:E,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${UTe[S]} bg-opacity-10`:E?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:N.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:N.name}),E&&s.jsx(af,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:N.description}),!h&&w&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},S)})}),s.jsx("div",{className:"space-y-4",children:x.map(S=>{const N=m.filter(w=>w.tier===S);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",S]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(w=>{const E=r.includes(w.id),O=!E&&OM(w.id,r)&&e>=w.cost,R=OM(w.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${E?"border-green-500/30 bg-green-500/10":O?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>O&&y(w.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:w.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),E&&s.jsx(Br,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!E&&!R&&s.jsx(af,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!E&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},S)})})]})},X_=25,Qy=b0e,FTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(0),[c,d]=T.useState(null),h=T.useRef(null),p=Ma(),m=new Date().toISOString().split("T")[0],x=e===m,y=!x&&t>=X_&&!n,S=async()=>{if(y){a(!0),d(null),Vn.wheelSpin();try{const E=await ke.spinFortuneWheel(r),O=Qy.findIndex(I=>I.id===E.prizeId),R=360/Qy.length,P=360*5+(360-O*R-R/2);o(I=>I+P),setTimeout(()=>{Vn.wheelPrize(),d(E.rewardDescription),a(!1),E.prizeType!=="NOTHING"?p.success(`You won: ${E.rewardDescription}!`):p.info(E.rewardDescription)},4e3)}catch(E){a(!1),p.error(E instanceof Error?E.message:"Spin failed")}}},N=360/Qy.length,w=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",X_," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Qy.map((E,O)=>{const R=(O*N-90)*(Math.PI/180),P=((O+1)*N-90)*(Math.PI/180),I=w*Math.cos(R),k=w*Math.sin(R),A=w*Math.cos(P),j=w*Math.sin(P),C=N>180?1:0,U=((O+.5)*N-90)*(Math.PI/180),L=w*.65*Math.cos(U),$=w*.65*Math.sin(U),B=(O+.5)*N;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${I},${k} A${w},${w} 0 ${C},1 ${A},${j} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:L,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${L}, ${$})`,children:E.label})]},E.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:S,disabled:!y,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":x?"Come back tomorrow!":`Spin (${X_} Flux)`})]})};function qTe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=ke.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function HTe(t){const[e,r]=T.useState([]);return T.useEffect(()=>{const n=ke.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const GTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var S;const i=qTe(t.id,t.maxHp),o=HTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((N,w)=>(N[w.userId]||(N[w.userId]={name:w.userName,total:0}),N[w.userId].total+=w.damage,N),{}),m=Object.entries(p).sort(([,N],[,w])=>w.total-N.total).slice(0,5),x=((S=p[e])==null?void 0:S.total)||0,y=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[y&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(so,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),y&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),x>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(os,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:x})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(ls,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([N,w],E)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${N===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",E+1," ",w.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},N))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qn,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(ku,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},WTe=({userId:t,userName:e,classType:r})=>{const[n,a]=T.useState([]),[i,o]=T.useState(null),[c,d]=T.useState(null),h=Ma();T.useEffect(()=>{let m;try{m=ke.subscribeToBossEncounters(x=>{const y=x.filter(S=>!S.classType||S.classType===r||S.classType==="GLOBAL");a(y)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const x=await ke.dealBossDamage(m,e,r||"");if(Vn.bossHit(),d({bossId:m,damage:x.damageDealt,isCrit:x.isCrit}),setTimeout(()=>d(null),2e3),x.bossDefeated)Vn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const y=x.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${x.damageDealt} damage!${y} (+${x.xpEarned} XP)`)}}catch(x){h.error(x instanceof Error?x.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(qle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(GTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},KTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,x]=T.useState(!1),[y,S]=T.useState(!1),[N,w]=T.useState(null),[E,O]=T.useState(!1),[R,P]=T.useState(null),[I,k]=T.useState(!1),[A,j]=T.useState([]),[C,U]=T.useState(!1),L=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(G,K,H)=>{const Z=G==="right"?75:25,ne=Array.from({length:H},(ce,he)=>({id:Date.now()+he,x:Z+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:K,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));j(ce=>[...ce,...ne]),setTimeout(()=>j(ce=>ce.filter(he=>!ne.find(Y=>Y.id===he.id))),1e3)};return T.useEffect(()=>{if(a==="player-attack"&&i){x(!0),w({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(O(!0),U(!0),setTimeout(()=>O(!1),400),setTimeout(()=>U(!1),400));const G=setTimeout(()=>x(!1),500),K=setTimeout(()=>w(null),1200);return h&&h>0&&setTimeout(()=>{P(h),setTimeout(()=>P(null),1200)},400),()=>{clearTimeout(G),clearTimeout(K)}}else if(a==="boss-attack"){if(p){k(!0),B("left","#22d3ee",6),setTimeout(()=>k(!1),800);return}if(i&&i>0){S(!0),U(!0),B("left","#ef4444",8),w({value:i,side:"left"}),setTimeout(()=>U(!1),300);const G=setTimeout(()=>S(!1),500),K=setTimeout(()=>w(null),1200);return()=>{clearTimeout(G),clearTimeout(K)}}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${C?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[E&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),I&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),A.map(G=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${G.x}%`,top:`${G.y}%`,backgroundColor:G.color,"--px":`${G.px}px`,"--py":`${G.py}px`}},G.id)),R!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",R," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${y?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(nx,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),y&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),N&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${N.isCrit?"text-2xl":"text-xl"} ${N.side==="right"?`right-4 ${N.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[N.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",N.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(tW,{bossType:L,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},QTe=({bossId:t,maxEntries:e=5})=>{const[r,n]=T.useState([]),a=T.useRef(null);return T.useEffect(()=>{const i=ke.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),T.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(qn,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function XTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function YTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function JTe(t,e){const r=[...t],n=XTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function ZTe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=ke.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const eje=({modifier:t})=>{const e=lT[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Cu,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},tje=({quiz:t,progress:e})=>{var m,x;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(LH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((x=t.rewards)==null?void 0:x.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Wm," attempts and ",Km," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Ph,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(qn,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(os,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(X2,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Dh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(y=>{const S=r.correctByDifficulty[y]||0,N=r.incorrectByDifficulty[y]||0,w=S+N,E=w>0?Math.round(S/w*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${y==="EASY"?"border-green-500/20 bg-green-500/5":y==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${y==="EASY"?"text-green-400":y==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:y}),s.jsxs("div",{className:"text-sm font-black text-white",children:[E,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[S,"/",w]})]},y)})})]})},rje=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var et,Ne,Ue,X;const c=ZTe(t.id,t.maxHp),d=c/t.maxHp*100,h=ie.useMemo(()=>JTe(t.questions,YTe(e+t.id)),[t.questions,e,t.id]),[p,m]=T.useState(null),[x,y]=T.useState(!1);T.useEffect(()=>{const te=ke.subscribeToBossQuizProgress(e,t.id,be=>{m(be),y(!0)});return()=>te()},[e,t.id]);const S=ie.useMemo(()=>n?$E(n).maxHp:100,[n]),[N,w]=T.useState(-1),[E,O]=T.useState(-1),[R,P]=T.useState(S),[I,k]=T.useState(!1),[A,j]=T.useState(null),[C,U]=T.useState(null),[L,$]=T.useState(!1),[B,G]=T.useState("idle"),[K,H]=T.useState(void 0),[Z,ne]=T.useState(!1),[ce,he]=T.useState(void 0),[Y,ae]=T.useState(!1);T.useEffect(()=>{if(x&&N===-1)if(p){const te=new Set(p.answeredQuestions||[]),be=h.findIndex(at=>!te.has(at.id));w(be===-1?h.length:be);const we=p.currentHp,Qe=p.maxHp>0?p.maxHp:S;P(Qe),we>=0?(O(we),we===0&&k(!0)):O(Qe)}else w(0),O(S),P(S)},[x]),T.useEffect(()=>{P(S)},[S]);const re=R>0?(E===-1?R:E)/R*100:100,ye=N>=0?h[N%h.length]:void 0,De=N>=h.length,Ye=c<=0,rt=async(te,be,we)=>{L||I||($(!0),j(we),r(te,be,we,{onResult:Qe=>{Qe.playerHp!==void 0&&O(Qe.playerHp),Qe.playerMaxHp!==void 0&&P(Qe.playerMaxHp),Qe.knockedOut&&k(!0),Qe.correct?(H(Qe.damage),ne(!!Qe.isCrit),he(Qe.healAmount),ae(!1),G("player-attack"),setTimeout(()=>G("idle"),800)):Qe.shieldBlocked?(H(0),ae(!0),ne(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)):Qe.playerDamage&&Qe.playerDamage>0&&(H(Qe.playerDamage),ae(!1),ne(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)),U(Qe),Qe.knockedOut||setTimeout(()=>{w(at=>at+1),j(null),U(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Ye&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((te,be)=>s.jsx(eje,{modifier:te},be))}),Ye?s.jsx(tje,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(KTe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:K,playerHpPercent:re,bossHpPercent:d,isCrit:Z,healAmount:ce,shieldBlocked:Y})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Dh,{className:"w-3 h-3"})," Your HP: ",E===-1?R:E]}),s.jsx("span",{className:"text-gray-600",children:R})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${re>50?"bg-gradient-to-r from-emerald-600 to-green-500":re>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${re}%`}})})]}),I?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(io,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):De?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Br,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ye?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",N+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ye.difficulty==="HARD"?"bg-red-500/20 text-red-400":ye.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ye.difficulty,ye.damageBonus?` (+${ye.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:ye.stem}),s.jsx("div",{className:"space-y-2.5",children:ye.options.map((te,be)=>{const we=A===be,Qe=C&&we,at=C==null?void 0:C.correct;return s.jsx("button",{onClick:()=>rt(t.id,ye.id,be),disabled:L||!!C||I,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Qe&&at?"border-green-500/50 bg-green-500/10 text-green-400":Qe&&!at?"border-red-500/50 bg-red-500/10 text-red-400":we?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+be),"."]}),s.jsx("span",{children:te}),Qe&&at&&s.jsx(Br,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Qe&&!at&&s.jsx(io,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},be)})}),C&&C.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx(qn,{className:"w-5 h-5 inline mr-1"}),C.isCrit?"CRITICAL HIT! ":"","-",C.damage," HP to boss!"]}),C.healAmount&&C.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Dh,{className:"w-4 h-4 inline mr-1"})," +",C.healAmount," HP healed"]})]}),C&&!C.correct&&C.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(os,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),C&&!C.correct&&!C.shieldBlocked&&C.playerDamage&&C.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Dh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",C.playerDamage," damage!"]})]}):null,p&&!Ye&&!I&&!De&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((et=p.combatStats)==null?void 0:et.questionsAttempted)||0)<Wm||(((Ne=p.combatStats)==null?void 0:Ne.questionsCorrect)||0)<Km?s.jsxs("span",{children:["Rewards: ",((Ue=p.combatStats)==null?void 0:Ue.questionsAttempted)||0,"/",Wm," attempts"," ",""," ",((X=p.combatStats)==null?void 0:X.questionsCorrect)||0,"/",Km," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(QTe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},nje=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=T.useState([]),p=Ma();T.useEffect(()=>{let y;try{y=ke.subscribeToBossQuizzes(e,h)}catch{}return()=>y==null?void 0:y()},[e]);const m=d.filter(y=>{var S;if(y.scheduledAt&&new Date(y.scheduledAt)>new Date)return!1;if((S=y.targetSections)!=null&&S.length){const N=y.classType!=="GLOBAL"?y.classType:e,w=(n==null?void 0:n[N])||(n==null?void 0:n[e])||r||"";if(!y.targetSections.includes(w))return!1}return!0}),x=async(y,S,N,w)=>{try{const E=await ke.answerBossQuiz(y,S,N);E.alreadyAnswered?p.info("Already answered this question!"):E.correct?(Vn.bossHit(),E.bossDefeated?(Vn.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):E.isCrit?p.success(`CRITICAL HIT! Dealt ${E.damage} damage!`):p.success(`Correct! Dealt ${E.damage} damage!`)):E.shieldBlocked?p.info("Shield blocked the attack!"):E.playerDamage&&E.playerDamage>0?p.error(`Wrong! The boss hits you for ${E.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),E.knockedOut&&Vn.bossHit(),w.onResult(E)}catch(E){p.error(E instanceof Error?E.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Oo,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(y=>s.jsx(rje,{quiz:y,userId:t,onAnswer:x,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},y.id))]})},Y_={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},YU=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(_x,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),aje=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=T.useState(0),[i,o]=T.useState(0),[c,d]=T.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(YU,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(YU,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(mE,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},ije=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(""),[p,m]=T.useState(!1),[x,y]=T.useState(null),[S,N]=T.useState(!1),w=Ma();T.useEffect(()=>{let C;try{C=ke.subscribeToTutoringSessions(r,i)}catch{}return()=>C==null?void 0:C()},[r]);const E=async()=>{if(!(!d.trim()||p)){m(!0);try{await ke.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},O=async C=>{try{await ke.claimTutorRole(C,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},R=async C=>{try{await ke.startTutoringSession(C),w.success("Session started!")}catch{w.error("Failed to start session")}},P=async(C,U)=>{N(!0);try{const L=a.find(B=>B.id===C);if(!L)throw new Error("Session not found");const $=L.requesterId===t?"requester":"tutor";await ke.submitTutoringFeedback(C,$,U),w.success("Feedback submitted! "+($==="requester"?L.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":L.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),y(null)}catch{w.error("Failed to submit feedback")}N(!1)},I=async(C,U)=>{try{const L=await ke.completeTutoring(C,U);w.success(`Verified! Tutor earned ${L.xpAwarded} XP and ${L.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},k=a.filter(C=>C.status==="OPEN"),A=a.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),j=a.filter(C=>C.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(ol,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(cn,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:E,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),k.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(jle,{className:"w-3 h-3"})," Open Requests"]}),k.map(C=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Y_[C.status]}`,children:C.status})]}),C.requesterId!==t&&s.jsxs("button",{onClick:()=>O(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(ls,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(so,{className:"w-3 h-3"})," Active Sessions"]}),A.map(C=>{const U=C.requesterId===t||C.tutorId===t,L=C.requesterId===t,$=C.tutorId===t,B=L?C.requesterFeedback:C.tutorFeedback,G=L?C.tutorFeedback:C.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Y_[C.status]}`,children:C.status}),C.status==="MATCHED"&&U&&s.jsx("button",{onClick:()=>R(C.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),C.status==="IN_PROGRESS"&&U&&!B&&s.jsxs("button",{onClick:()=>y(C.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Br,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),C.status==="IN_PROGRESS"&&U&&B&&!G&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",L?"tutor":"student"]}),n&&C.tutorId&&C.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>I(C.id,C.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(Br,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),x===C.id&&C.status==="IN_PROGRESS"&&($||L)&&s.jsx(aje,{role:L?"requester":"tutor",onSubmit:K=>P(C.id,K),submitting:S})]},C.id)})]}),a.filter(C=>C.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(so,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(C=>C.status==="COMPLETED").map(C=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),C.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),C.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&C.tutorId&&s.jsxs("button",{onClick:()=>I(C.id,C.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Br,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),j.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3 text-green-400"})," Completed (",j.length,")"]}),j.slice(0,3).map(C=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Y_[C.status]}`,children:C.status})]},C.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(ol,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},sje=({item:t,onClose:e})=>{const[r,n]=T.useState("chest"),a=fa(t.rarity);T.useEffect(()=>{Vn.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},oje=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],lje=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],cje=({user:t,classType:e,onClose:r})=>{var k,A,j;const[n,a]=ie.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=c0(o),d=JG(o),{equipped:h,appearance:p}=Uu(t,e),m=zE({gamification:{...i,equipped:h}}),x=u0(h),y=((k=i.classXp)==null?void 0:k[e])||0,S=(A=t.settings)==null?void 0:A.privacyMode,N=S?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),E=BE(w),O=i.unlockedAchievements||[],R=T.useMemo(()=>LE.filter(C=>O.includes(C.id)),[O]),P=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(nx,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${S?"text-purple-300 italic":"text-white"}`,children:N}),s.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(Xl,{className:"w-4 h-4 text-green-400"}):s.jsx(nf,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:y.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:x}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:O.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:oje.map(({key:C,label:U,color:L,bg:$})=>{const B=m[C]||0,G=B/P*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-xs font-bold ${L}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${G}%`}})})]},C)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:lje.map(C=>{const U=h[C];if(!U)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:C}),s.jsx("span",{className:"italic",children:"Empty"})]},C);const L=fa(U.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${L.border} ${L.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:C}),s.jsx("span",{className:`text-xs font-bold truncate ${L.text}`,children:U.name})]},C)})})]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(_x,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:C,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:C.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",U.label]})]},C.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ll,{className:"w-3 h-3 text-yellow-400"})," Achievements (",O.length,")"]}),R.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:R.slice(0,12).map(C=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:C.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:C.title})]},C.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ph,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((j=i.completedQuests)==null?void 0:j.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ol,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(qn,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},Xy=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},Yy=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),uje=({user:t,submissions:e,assignments:r,activeClass:n})=>{var L;const a=t.gamification,i=((L=a==null?void 0:a.classXp)==null?void 0:L[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,p=(a==null?void 0:a.loginStreak)||0,m=c0(c),y=T.useMemo(()=>Uu(t,n),[t,n]).equipped,S=T.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(y).filter(Boolean).forEach(G=>{G.stats&&Object.entries(G.stats).forEach(([K,H])=>{$[K]+=H})}),$},[y]),N=T.useMemo(()=>$E(S),[S]),w=T.useMemo(()=>u0(y),[y]),E=T.useMemo(()=>T0e(y),[y]),O=T.useMemo(()=>j0e(y),[y]),R=T.useMemo(()=>_0e(y),[y]),P=ZG(h),I=T.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),k=T.useMemo(()=>{var he;const $=I.reduce((Y,ae)=>{var re;return Y+(((re=ae.metrics)==null?void 0:re.engagementTime)||0)},0),B=Math.round($/60)*10,K=(((he=a==null?void 0:a.completedQuests)==null?void 0:he.length)||0)*100,H=(a==null?void 0:a.bossDamageDealt)||{},Z=Object.values(H).reduce((Y,ae)=>Y+ae,0)*2,ne=(a==null?void 0:a.tutoringXpEarned)||0,ce=Math.max(0,i-B-K-Z-ne);return{engagementXp:B,questXp:K,bossXp:Z,tutoringXp:ne,otherXp:ce}},[I,a,i]),A=T.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,G=I.filter(re=>(re.submittedAt?new Date(re.submittedAt).getTime():0)>$-B),K=new Set(G.filter(re=>re.submittedAt).map(re=>new Date(re.submittedAt).toISOString().split("T")[0])).size,H={totalTime:G.reduce((re,ye)=>{var De;return re+(((De=ye.metrics)==null?void 0:De.engagementTime)||0)},0),submissionCount:G.length,totalClicks:G.reduce((re,ye)=>{var De;return re+(((De=ye.metrics)==null?void 0:De.clickCount)||0)},0),totalPastes:G.reduce((re,ye)=>{var De;return re+(((De=ye.metrics)==null?void 0:De.pasteCount)||0)},0),totalKeystrokes:G.reduce((re,ye)=>{var De;return re+(((De=ye.metrics)==null?void 0:De.keystrokes)||0)},0),totalXP:i,activityDays:K},Z=H.totalTime/60+H.submissionCount*10,he=sle(H,Z,150,60),Y=ole(he),ae=Go[he];return{bucket:he,recommendation:Y,meta:ae,metrics:H,engagementScore:Z}},[I,i]),j=T.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const G=new Date;G.setDate(G.getDate()-B);const K=G.toISOString().split("T")[0],H=G.toLocaleDateString("en",{weekday:"short"}),Z=I.filter(ne=>{var ce;return(ce=ne.submittedAt)==null?void 0:ce.startsWith(K)});$.push({label:H,count:Z.length,minutes:Math.round(Z.reduce((ne,ce)=>{var he;return ne+(((he=ce.metrics)==null?void 0:he.engagementTime)||0)},0)/60)})}return $},[I]),C=Math.max(1,...j.map($=>$.minutes)),U=T.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return I.forEach(B=>{B.status in $&&$[B.status]++}),$},[I]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(Oo,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Yy,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx(qn,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Gear Score",value:w,sub:`${Object.values(y).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(os,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Resources Accessed",value:I.length,sub:`${U.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(cs,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(XT,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ph,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Xy,{label:"Tech",value:S.tech,max:100,color:"text-blue-400",icon:s.jsx(qn,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(Xy,{label:"Focus",value:S.focus,max:100,color:"text-green-400",icon:s.jsx(ku,{className:"w-3 h-3"}),description:`Critical Strikes  ${(N.critChance*100).toFixed(0)}% crit chance, ${N.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(Xy,{label:"Analysis",value:S.analysis,max:100,color:"text-yellow-400",icon:s.jsx(os,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${N.armorPercent.toFixed(0)}%.`}),s.jsx(Xy,{label:"Charisma",value:S.charisma,max:100,color:"text-purple-400",icon:s.jsx(Dh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${N.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:N.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[N.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(N.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[N.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(E).length>0||Object.keys(O).length>0||Object.keys(R).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(E).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(E).reduce(($,B)=>$+B,0)]})]}),Object.keys(O).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(O).reduce(($,B)=>$+B,0)]})]}),Object.keys(R).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(R).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(qn,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:k.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:k.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:k.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:k.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:k.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),P>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((P-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),p>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(_x,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[p,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${A.meta.bgColor} ${A.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(GT,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${A.meta.color}`,children:A.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:A.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(A.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[A.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:A.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Vf,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:j.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/C*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[U.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:U.SUCCESS})]}),U.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:U.NORMAL})]}),U.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:U.SUPPORT_NEEDED})]}),U.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:U.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ph,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Ph,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[S.tech," Tech"]})," powers your base attack.",S.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),S.tech<=20&&S.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),S.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(N.critChance*100).toFixed(0),"%"]})," (from ",S.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(os,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[N.armorPercent.toFixed(0),"% Armor"]})," from ",S.analysis," Analysis reduces boss damage.",N.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),N.armorPercent<30&&N.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),N.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Dh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[N.maxHp," HP"]})," from ",S.charisma," Charisma.",N.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),N.maxHp<150&&N.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),N.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[w<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:w}),". Complete more missions and level up to earn better equipment drops."]})]}),S.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),N.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(N.critChance*100).toFixed(0),"%."]})]}),N.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),w>=100&&N.critChance>=.1&&N.armorPercent>=10&&S.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(XT,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function dje(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=ex(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const hje={Textbook:s.jsx(ni,{className:"w-5 h-5"}),Simulation:s.jsx(Ff,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(H2,{className:"w-5 h-5"}),"Practice Set":s.jsx(cs,{className:"w-5 h-5"}),Article:s.jsx(VH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(GH,{className:"w-5 h-5"}),Supplemental:s.jsx(W2,{className:"w-5 h-5"})};let yh=0,J_=!1,Z_=!1,JU="";const fje=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:o="RESOURCES"})=>{var Ka,ki,hs,wi,Ot,fe,st,pt,nr,vr,dn,Zr,bn,Pr,Ls,fs,po,yl,ps,ms,Pa,wa,q,ve,Te,Ae,gt,zt,Rt,ar,Er;const c=Ma(),{confirm:d}=Mo(),[h,p]=T.useState(new Set),[m,x]=T.useState(t.classType||((Ka=t.enrolledClasses)==null?void 0:Ka[0])||"Unassigned"),[y,S]=T.useState(null),[N,w]=T.useState([]),[E,O]=T.useState({}),[R,P]=T.useState(!1),[I,k]=T.useState(null);JU!==t.id&&(JU=t.id,yh=((ki=t.gamification)==null?void 0:ki.lastLevelSeen)||1,J_=!1,Z_=!1),yh===0&&(yh=((hs=t.gamification)==null?void 0:hs.lastLevelSeen)||1);const A=o,[j,C]=T.useState(!1),[U,L]=T.useState(null),[$,B]=T.useState(!1),[G,K]=T.useState(null),[H,Z]=T.useState(null),[ne,ce]=T.useState(null),[he,Y]=T.useState(null),[ae,re]=T.useState(null),[ye,De]=T.useState(null),[Ye,rt]=T.useState(!1),[et,Ne]=T.useState(null),[Ue,X]=T.useState(!1);T.useEffect(()=>{var Re,Ve,Fe;const le=((Re=t.gamification)==null?void 0:Re.level)||1,xe=Math.max(((Ve=t.gamification)==null?void 0:Ve.lastLevelSeen)||1,yh);if(le>xe){yh=le;const hr=((Fe=t.gamification)==null?void 0:Fe.inventory)||[],Zt=hr.length>0?hr[hr.length-1]:null;k(Zt),P(!0),Vn.levelUp()}},[(wi=t.gamification)==null?void 0:wi.level,(Ot=t.gamification)==null?void 0:Ot.lastLevelSeen,(fe=t.gamification)==null?void 0:fe.inventory]),T.useEffect(()=>{const le=[];try{le.push(ke.subscribeToXPEvents(xe=>{const Re=xe.find(Ve=>{var Fe,hr,Zt;if(!Ve.isActive||Ve.type!=="GLOBAL"&&Ve.targetClass!==m||Ve.scheduledAt&&new Date(Ve.scheduledAt)>new Date)return!1;if((Fe=Ve.targetSections)!=null&&Fe.length){const Mn=Ve.type!=="GLOBAL"&&Ve.targetClass?Ve.targetClass:m,ua=((hr=t.classSections)==null?void 0:hr[Mn])||((Zt=t.classSections)==null?void 0:Zt[m])||t.section||"";if(!Ve.targetSections.includes(ua))return!1}return!0});S(Re||null)}))}catch{}try{le.push(ke.subscribeToQuests(xe=>{const Re=t.enrolledClasses||(t.classType?[t.classType]:[]);w(xe.filter(Ve=>{var hr,Zt;if(!Ve.isActive)return!1;const Fe=new Date;if(Ve.startsAt&&new Date(Ve.startsAt)>Fe||Ve.expiresAt&&new Date(Ve.expiresAt)<Fe||Ve.targetClass&&!Re.includes(Ve.targetClass))return!1;if((hr=Ve.targetSections)!=null&&hr.length){const Mn=((Zt=t.classSections)==null?void 0:Zt[Ve.targetClass||m])||t.section||"";if(!Ve.targetSections.includes(Mn))return!1}return!0}))}))}catch{}try{le.push(ke.subscribeToStudentPracticeProgress(t.id,O))}catch{}return()=>le.forEach(xe=>xe())},[m]);const te=((pt=(st=t.gamification)==null?void 0:st.classXp)==null?void 0:pt[m])||0,be=ie.useRef(te),we=ie.useRef(m);T.useEffect(()=>{if(we.current!==m){we.current=m,be.current=te;return}if(te>be.current&&be.current>=0){const le=te-be.current;if(le>0&&le<500){De(le),Vn.xpGain();const xe=setTimeout(()=>De(null),2e3);return()=>clearTimeout(xe)}}be.current=te},[te]),T.useEffect(()=>{var Re;if(J_)return;J_=!0;const le=new Date().toISOString().split("T")[0];((Re=t.gamification)==null?void 0:Re.lastLoginRewardDate)!==le&&!Ue&&ke.claimDailyLogin().then(Ve=>{Ve.alreadyClaimed||(X(!0),Vn.dailyReward(),c.success(`Daily login: +${Ve.xpReward} XP, +${Ve.fluxReward} Flux (${Ve.streak}-day streak!)`))}).catch(()=>{})},[]),T.useEffect(()=>{Z_||(Z_=!0,ke.updateEngagementStreak().catch(()=>{}))},[]);const[Qe,at]=T.useState([]);T.useEffect(()=>{let le;try{le=ke.subscribeToAnnouncements(at)}catch{}return()=>le==null?void 0:le()},[]);const kt=T.useMemo(()=>{var xe;const le=((xe=t.gamification)==null?void 0:xe.dismissedAnnouncements)||[];return Qe.filter(Re=>{var Ve,Fe,hr;if(le.includes(Re.id)||Re.classType!=="GLOBAL"&&Re.classType!==m)return!1;if((Ve=Re.targetSections)!=null&&Ve.length){const Zt=Re.classType!=="GLOBAL"?Re.classType:m,Mn=((Fe=t.classSections)==null?void 0:Fe[Zt])||((hr=t.classSections)==null?void 0:hr[m])||t.section||"";if(!Re.targetSections.includes(Mn))return!1}return!0})},[Qe,(nr=t.gamification)==null?void 0:nr.dismissedAnnouncements,m,t.classSections,t.section]),je=async le=>{await ke.dismissAnnouncement(t.id,le)},ct=()=>{var xe;const le=((xe=t.gamification)==null?void 0:xe.level)||1;yh=le,P(!1),k(null),ke.updateUserLastLevelSeen(t.id,le).catch(()=>{})},Tt=async le=>{try{await ke.updateUserAppearance(t.id,le,m),c.success("Profile updated!"),C(!1),K(null),Z(null),ce(null),Y(null),re(null)}catch{c.error("Failed to save  try again")}},St=t.enrolledClasses||(t.classType?[t.classType]:[]),bt=T.useMemo(()=>Uu(t,m),[t,m]),de=bt.equipped,He=bt.inventory,xt=T.useMemo(()=>{const le={tech:10,focus:10,analysis:10,charisma:10};return Object.values(de).filter(Boolean).forEach(Re=>{Re.stats&&Object.entries(Re.stats).forEach(([Ve,Fe])=>{le[Ve]+=Fe})}),le},[de]),Ge=T.useMemo(()=>u0(de),[de]),Je=T.useMemo(()=>{const le=t.gamification||{},Re={...le.achievementProgress||{}},Ve=le.xp||0,Fe=le.level||1,hr=le.inventory||[],Zt=le.completedQuests||[],Mn=le.engagementStreak||0,ua=le.loginStreak||0,Bs=le.tutoringSessionsCompleted||0,Sa=le.bossesDefeated||0,Na=le.challengesCompleted||0,Dn=le.itemsCrafted||0,Nr=(Lo,$s)=>{(!Re[Lo]||$s>Re[Lo])&&(Re[Lo]=$s)};return Nr("first_steps",Ve),Nr("xp_5k",Ve),Nr("xp_25k",Ve),Nr("rising_star",Fe),Nr("veteran",Fe),Nr("elite",Fe),Nr("legend",Fe),Nr("collector_10",hr.length),Nr("collector_50",hr.length),Nr("gear_score_100",Ge),Nr("gear_score_500",Ge),Nr("first_mission",Zt.length),Nr("mission_5",Zt.length),Nr("mission_20",Zt.length),Nr("boss_slayer",Sa),Nr("streak_3",Mn),Nr("streak_8",Mn),Nr("streak_16",Mn),Nr("login_7",ua),Nr("login_30",ua),Nr("challenges_10",Na),Nr("tutor_1",Bs),Nr("tutor_10",Bs),Nr("tech_50",xt.tech),Nr("focus_50",xt.focus),Nr("analysis_50",xt.analysis),Nr("charisma_50",xt.charisma),Nr("craft_10",Dn),Re},[t,Ge,xt]),Et=[{subject:"Tech",A:xt.tech,fullMark:100},{subject:"Focus",A:xt.focus,fullMark:100},{subject:"Analysis",A:xt.analysis,fullMark:100},{subject:"Charisma",A:xt.charisma,fullMark:100}],Nt=T.useMemo(()=>{const le={};return e.filter(xe=>{var Re,Ve;if(xe.classType!==m||xe.status==="DRAFT"||xe.status==="ARCHIVED"||xe.scheduledAt&&new Date(xe.scheduledAt)>new Date)return!1;if((Re=xe.targetSections)!=null&&Re.length){const Fe=((Ve=t.classSections)==null?void 0:Ve[m])||t.section||"";if(!xe.targetSections.includes(Fe))return!1}return!0}).forEach(xe=>{var Fe;const Re=r.find(hr=>hr.assignmentId===xe.id),Ve=xe.unit||"General Resources";le[Ve]||(le[Ve]=[]),le[Ve].push({...xe,lastEngagement:Re&&Re.submittedAt||null,engagementTime:((Fe=Re==null?void 0:Re.metrics)==null?void 0:Fe.engagementTime)||0})}),le},[e,r,m]),dr=le=>{const xe=new Set(h);xe.has(le)?xe.delete(le):xe.add(le),p(xe)},ge=((vr=t.gamification)==null?void 0:vr.level)||1,nt=((dn=t.gamification)==null?void 0:dn.currency)||0,jt=te,Bt=jt%1e3/1e3*100,$t=QU(jt),tt=QU(nt),tr=c0(ge),Le=async le=>{const xe=le.target.value;x(xe),await ke.switchUserView(t.id,xe)},it=async le=>{if(!$){B(!0);try{await ke.equipItem(t.id,le,m),L(null),Vn.equip(),c.success(`${le.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{B(!1)}}},dt=async le=>{B(!0);try{await ke.unequipItem(t.id,le,m),L(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{B(!1)}},Pt=async()=>{if(!U)return;if(Object.values(de).some(Re=>Re&&Re.id===U.id)){c.error("Unequip this item before salvaging.");return}const xe=DM(U);if(await d({message:`Salvage ${U.name} for ${xe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){B(!0);try{await ke.disenchantItem(t.id,U,m),L(null),Vn.salvage(),c.success(`Salvaged for ${xe} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{B(!1)}}},Vt=async le=>{if(!U)return;const xe=Yi[le];if(nt<xe)return c.error("Insufficient Cyber-Flux.");B(!0);try{await ke.craftItem(t.id,U,le,m),L(null),Vn.craft(),c.success(`${le.charAt(0)+le.slice(1).toLowerCase()} complete.`)}catch(Re){const Ve=(Re==null?void 0:Re.message)||(Re==null?void 0:Re.code)||"Unknown error";c.error(`Fabrication failed: ${Ve}`)}finally{B(!1)}},qt=((Zr=t.gamification)==null?void 0:Zr.gemsInventory)||[],Ct=async()=>{if(!(!U||$)){if(nt<Yi.SOCKET)return c.error("Insufficient Cyber-Flux.");if((U.sockets||0)>=3)return c.error("Maximum sockets reached.");B(!0);try{const le=await ke.addSocket(U.id,m);L(le.item),Vn.craft(),c.success("Socket added!")}catch(le){c.error((le==null?void 0:le.message)||"Failed to add socket.")}finally{B(!1)}}},Fr=async le=>{if(!(!U||$)){if(nt<Yi.ENCHANT)return c.error("Insufficient Cyber-Flux.");B(!0);try{const xe=await ke.socketGem(U.id,le,m);L(xe.item),Vn.craft(),xe.runewordActivated?(Vn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${xe.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(xe){c.error((xe==null?void 0:xe.message)||"Failed to socket gem.")}finally{B(!1)}}},un=async le=>{var Ve;if(!U||$)return;const xe=(Ve=U.gems)==null?void 0:Ve[le];if(!xe)return;const Re=MM(U.rarity,xe.tier,U.unsocketCount||0);if(nt<Re)return c.error(`Insufficient Cyber-Flux. Need ${Re}.`);B(!0);try{const Fe=await ke.unsocketGem(U.id,le,m);L(Fe.item),Vn.craft(),c.success(`Gem removed! -${Fe.cost} Flux`)}catch(Fe){c.error((Fe==null?void 0:Fe.message)||"Failed to unsocket gem.")}finally{B(!1)}},Jr=((bn=t.gamification)==null?void 0:bn.activeQuests)||[],qr=((Pr=t.gamification)==null?void 0:Pr.completedQuests)||[],gn=N.filter(le=>Jr.some(xe=>xe.questId===le.id)),gr=N.filter(le=>!Jr.some(xe=>xe.questId===le.id)&&!qr.includes(le.id)),ba=async le=>{try{await ke.acceptQuest(t.id,le.id),Vn.questAccept(),c.success(`Contract accepted: ${le.title}`)}catch{c.error("Failed to accept contract.")}},xn=async le=>{const xe=le.type==="CUSTOM";if(await d({message:xe?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:xe?"Submit":"Deploy",variant:"info"}))try{await ke.deployMission(t.id,le),Vn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},Rn=["HEAD","HANDS","RING1","AMULET"],oi=["CHEST","BELT","FEET","RING2"],[Or,yn]=T.useState(null),li=v_e(PU(X7,{activationConstraint:{distance:8}}),PU(VX,{activationConstraint:{delay:150,tolerance:5}})),Yn=le=>le==="RING1"||le==="RING2"?["RING"]:[le],an=le=>{const{active:xe}=le,Re=He.find(Ve=>Ve.id===xe.id)||Object.values(de).find(Ve=>Ve&&Ve.id===xe.id);yn(Re||null)},vn=le=>{const{active:xe,over:Re}=le;if(yn(null),!Re)return;const Ve=xe.id,Fe=Re.id;if(Fe.startsWith("slot-")){const hr=Fe.replace("slot-",""),Zt=He.find(ua=>ua.id===Ve);if(!Zt||!Yn(hr).includes(Zt.slot))return;it(Zt)}if(Ve.startsWith("equipped-")&&(Fe==="inventory-zone"||Fe.startsWith("storage-cell-"))){const hr=Ve.replace("equipped-","");dt(hr)}},En=(le,xe,Re="w-5 h-5")=>{const Ve=`${Re} ${xe}`,Fe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(le){case"HEAD":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(Gv,{className:Ve})}},ci=({slot:le})=>{const xe=de[le],Re=xe?fa(xe.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Ve,isOver:Fe}=J7({id:`slot-${le}`}),{attributes:hr,listeners:Zt,setNodeRef:Mn,isDragging:ua}=KX({id:xe?`equipped-${le}`:`empty-slot-${le}`,disabled:!xe}),Bs=Or&&Yn(le).includes(Or.slot),Sa=Fe&&Bs?"ring-2 ring-purple-500 scale-110":Or&&Bs?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Ve,className:"relative",children:s.jsx("div",{ref:Mn,...hr,...Zt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ua?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${Re.border} ${Re.bg} ${Re.shimmer} ${Re.glow} ${Sa}`,onClick:()=>!ua&&xe&&L(xe),children:xe?s.jsxs(s.Fragment,{children:[En(le.replace(/\d/,""),Re.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${Re.text}`,children:xe.baseName||xe.name.split(" ").slice(-1)[0]}),!ua&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${Re.text}`,children:xe.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[xe.rarity," ",le]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(xe.stats).map(([Na,Dn])=>`+${Dn} ${Na.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:le.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[kt.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:kt.map(le=>{const xe={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${xe[le.priority]}`,children:[s.jsx(Qv,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:le.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:le.content})]}),s.jsx("button",{onClick:()=>je(le.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Kn,{className:"w-4 h-4"})})]},le.id)})}),y&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(qn,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[y.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",y.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[y.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${tr.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${tr.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${tr.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ls=t.gamification)==null?void 0:Ls.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${tr.tierColor.split(" ")[1]}`,children:[tr.rankName," (Lvl ",ge,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Ge]})]}),St.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:m,onChange:Le,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:St.map(le=>s.jsx("option",{value:le,children:le},le))}),s.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Bt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[$t.toLocaleString()," XP (",m,")"]}),s.jsx("span",{children:"Next Rank"}),ye&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",ye," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(g3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:tt})]})]})}),(((fs=t.gamification)==null?void 0:fs.engagementStreak)||0)>0&&(()=>{var Re;const le=((Re=t.gamification)==null?void 0:Re.engagementStreak)||0,xe=ZG(le);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Cu,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[le,"w"]})]}),xe>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((xe-1)*100),"%"]})]})]})})})(),(((po=t.gamification)==null?void 0:po.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(XT,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((yl=t.gamification)==null?void 0:yl.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>rt(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(o0,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&s.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(H2,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(no,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&s.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(Rle,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(no,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[A==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[gr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),gr.map(le=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:le.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:le.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:le.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[le.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(le.statRequirements).map(([xe,Re])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[Re," ",xe]},xe))}),le.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Ds,{className:"w-3 h-3"})," Expires: ",new Date(le.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>ba(le),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(ku,{className:"w-4 h-4"})," Accept Contract"]})]},le.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[gn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),gn.map(le=>{var Fe,hr;const xe=((Fe=Jr.find(Zt=>Zt.questId===le.id))==null?void 0:Fe.status)||"ACCEPTED",Re=(hr=Jr.find(Zt=>Zt.questId===le.id))==null?void 0:hr.deploymentRoll,Ve=le.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(cs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:le.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[le.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${xe==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":xe==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":xe==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:xe})]}),xe==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:le.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>xn(le),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(qH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Ve?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),le.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(ls,{className:"w-5 h-5"})})]})]}):xe==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(qn,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Ve?"AWAITING_HQ_SIG_VERIFICATION":Re===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Ve?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},le.id)})]})]},"missions"),A==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(Nt).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:Object.entries(Nt).sort().map(([le,xe])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>dr(le),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h.has(le)?s.jsx(ai,{className:"w-4 h-4 text-purple-400"}):s.jsx(no,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:le})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[xe.length," Files"]})]}),h.has(le)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:xe.map(Re=>{const Ve=!!Re.dueDate,Fe=Re.dueDate?new Date(Re.dueDate):null,hr=new Date,Zt=Fe?Math.ceil((Fe.getTime()-hr.getTime())/864e5):1/0,Mn=Zt<=0?"text-red-400":Zt<=2?"text-yellow-400":"text-gray-500",ua=Math.floor(Re.engagementTime/60),Bs=ua>=5,Sa=E[Re.id],Na=Sa==null?void 0:Sa.completed,Dn=Re.lessonBlocks&&Re.lessonBlocks.length>0,Nr=Dn&&!Re.contentUrl;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${Na?"border-green-500/20":Dn?"border-indigo-500/10":"border-white/5"}`,onClick:()=>i&&i(Re.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Na||Bs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":Re.lastEngagement?"bg-green-500/10 text-green-400":Nr?"bg-indigo-500/10 text-indigo-400 group-hover:scale-110 shadow-lg group-hover:shadow-indigo-500/20":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Na?s.jsx(Br,{className:"w-6 h-6"}):Bs?s.jsx(Br,{className:"w-6 h-6"}):Re.lastEngagement?s.jsx(Br,{className:"w-5 h-5 opacity-60"}):Nr?s.jsx(ol,{className:"w-6 h-6"}):hje[Re.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1.5 py-0.5 rounded border ${Nr?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-black/40 text-gray-500 border-white/5"}`,children:Nr?"Lesson":Re.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:Re.title}),Na&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(Br,{className:"w-2.5 h-2.5"}),"COMPLETED",((Sa==null?void 0:Sa.totalCompletions)||0)>1?` (${Sa.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:Re.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Re.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ua,"m engaged"]}),Na&&(Sa==null?void 0:Sa.bestScore)!=null&&Sa.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",Sa.bestScore,"%"]}),Dn&&s.jsxs("span",{className:"text-[9px] text-indigo-400 font-bold flex items-center gap-0.5",children:[s.jsx(ol,{className:"w-3 h-3"})," ",Re.lessonBlocks.length," blocks"]}),Ve&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Mn}`,children:[s.jsx(so,{className:"w-3 h-3"}),Zt<=0?"Overdue":Zt===1?"Due tomorrow":`Due in ${Zt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(Ff,{className:"w-4 h-4 text-purple-400 fill-current"})})]},Re.id)})})]},le))})},"resources"),A==="LOADOUT"&&s.jsxs(yTe,{sensors:li,collisionDetection:T_e,modifiers:[dje],onDragStart:an,onDragEnd:vn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((ps=bt.appearance)==null?void 0:ps.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:Rn.map(le=>s.jsx(ci,{slot:le},le))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(nx,{equipped:de,appearance:bt.appearance,evolutionLevel:ge})}),s.jsx("div",{className:"flex flex-col gap-4",children:oi.map(le=>s.jsx(ci,{slot:le},le))})]}),s.jsxs("button",{onClick:le=>{le.preventDefault(),le.stopPropagation(),C(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(Xle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(nK,{width:"100%",height:"100%",children:s.jsxs(a_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:Et,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(AQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx($x,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(Bx,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(zx,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const le=$E(xt);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:xt.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:xt.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(le.critChance*100).toFixed(0),"%  Crit damage: ",le.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:xt.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",le.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:xt.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",le.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:le.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[le.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(le.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(pje,{inventory:He,equipped:de,draggedItem:Or,onInspect:L,getSlotIcon:En})]},"loadout"),s.jsx(PTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Or&&(()=>{const le=fa(Or.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${le.bg} ${le.border} ${le.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[En(Or.slot,le.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${le.text} drop-shadow-lg`,children:Or.baseName||Or.name.split(" ").slice(-1)[0]})]})})})()})]}),A==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(zTe,{unlockedAchievements:((ms=t.gamification)==null?void 0:ms.unlockedAchievements)||[],achievementProgress:Je})},"achievements"),A==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(VTe,{specialization:(Pa=t.gamification)==null?void 0:Pa.specialization,skillPoints:((wa=t.gamification)==null?void 0:wa.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),A==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(FTe,{currency:nt,lastSpin:(ve=t.gamification)==null?void 0:ve.lastWheelSpin,classType:m})},"fortune"),A==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(ije,{userId:t.id,userName:t.name,classType:m})},"tutoring"),A==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(uje,{user:t,submissions:r,assignments:e,activeClass:m})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(WTe,{userId:t.id,userName:t.name,classType:m}),s.jsx(nje,{userId:t.id,classType:m,userSection:((Te=t.classSections)==null?void 0:Te[m])||t.section,userClassSections:t.classSections,playerStats:xt,playerAppearance:bt.appearance,playerEquipped:de,playerEvolutionLevel:ge})]})}),s.jsx(Li,{isOpen:j,onClose:()=>{C(!1),K(null),Z(null),ce(null),Y(null),re(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(nx,{equipped:de,appearance:{...bt.appearance,hue:G??((Ae=bt.appearance)==null?void 0:Ae.hue)??0,bodyType:H??((gt=bt.appearance)==null?void 0:gt.bodyType)??"A",skinTone:ne??((zt=bt.appearance)==null?void 0:zt.skinTone)??0,hairStyle:he??((Rt=bt.appearance)==null?void 0:Rt.hairStyle)??1,hairColor:ae??((ar=bt.appearance)==null?void 0:ar.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:QX.map((le,xe)=>{var Ve;const Re=(ne??((Ve=bt.appearance)==null?void 0:Ve.skinTone)??0)===xe;return s.jsx("button",{onClick:()=>ce(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Re?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:le}},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:LTe.map((le,xe)=>{var Ve;const Re=(he??((Ve=bt.appearance)==null?void 0:Ve.hairStyle)??1)===xe;return s.jsx("button",{onClick:()=>Y(xe),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${Re?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:le},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:XX.map((le,xe)=>{var Ve;const Re=(ae??((Ve=bt.appearance)==null?void 0:Ve.hairColor)??0)===xe;return s.jsx("button",{onClick:()=>re(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Re?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:le}},xe)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(le=>{var Re;const xe=(H??((Re=bt.appearance)==null?void 0:Re.bodyType)??"A")===le;return s.jsx("button",{onClick:()=>Z(le),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${xe?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:le==="A"?"Alpha":le==="B"?"Beta":"Femme"},le)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(le=>{var Re;const xe=(G??((Re=bt.appearance)==null?void 0:Re.hue)??0)===le;return s.jsx("button",{onClick:()=>K(le),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${xe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${le}, 60%, 45%)`}},le)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{C(!1),K(null),Z(null),ce(null),Y(null),re(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var le,xe,Re,Ve,Fe;return Tt({hue:G??((le=bt.appearance)==null?void 0:le.hue)??0,bodyType:H??((xe=bt.appearance)==null?void 0:xe.bodyType)??"A",skinTone:ne??((Re=bt.appearance)==null?void 0:Re.skinTone)??0,hairStyle:he??((Ve=bt.appearance)==null?void 0:Ve.hairStyle)??1,hairColor:ae??((Fe=bt.appearance)==null?void 0:Fe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Li,{isOpen:!!U,onClose:()=>L(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:U&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${U.runewordActive?"border-amber-500/40 runeword-active":fa(U.rarity).border} ${fa(U.rarity).bg} ${fa(U.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${U.runewordActive?"border-amber-500/50":fa(U.rarity).border} ${fa(U.rarity).bg}`,style:{boxShadow:U.runewordActive?"0 0 20px rgba(245,158,11,0.3)":U.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":U.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:En(U.slot,U.runewordActive?"text-amber-400":fa(U.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${U.runewordActive?"text-amber-300":fa(U.rarity).text}`,children:U.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[U.rarity," ",U.slot]}),U.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(Er=PM(U))==null?void 0:Er.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(U.stats).map(([le,xe])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:le}),s.jsxs("span",{className:"font-mono font-bold",children:["+",xe]})]},le))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:U.affixes.map((le,xe)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[le.name," (T",le.tier,")"]},xe))})]}),(U.sockets||0)>0&&(()=>{const le=U.sockets||0,xe=U.gems||[],Re=le-xe.length,Ve=PM(U);return s.jsxs("div",{className:`p-4 rounded-xl border ${Ve?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Ve&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Ve.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Ve.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Ve.bonusStats).map(([Fe,hr])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",hr," ",Fe.slice(0,3).toUpperCase()]},Fe))}),Ve.bonusEffects&&Ve.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Ve.bonusEffects.map(Fe=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:Fe.description},Fe.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(g3,{className:"w-3 h-3"})," Gem Sockets (",xe.length,"/",le,")"]}),s.jsxs("div",{className:"flex gap-2",children:[xe.map((Fe,hr)=>{const Zt=MM(U.rarity,Fe.tier,U.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:Fe.color,backgroundColor:`${Fe.color}20`,boxShadow:`0 0 8px ${Fe.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fe.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:Fe.name}),s.jsxs("button",{onClick:()=>un(hr),disabled:$||nt<Zt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Zt} Flux`,children:["Remove (",Zt," F)"]})]},hr)}),Array.from({length:Re}).map((Fe,hr)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${hr}`))]}),Re>0&&qt.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Yi.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:qt.map(Fe=>s.jsxs("button",{onClick:()=>Fr(Fe.id),disabled:$||nt<Yi.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fe.color}}),s.jsx("span",{className:"text-gray-300",children:Fe.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",Fe.value]})]},Fe.id))}),xe.length>0&&!Ve&&(()=>{const Fe=xe.map(Zt=>Zt.name),hr=PE.filter(Zt=>Zt.requiredSockets===le&&Zt.pattern.slice(0,Fe.length).every((Mn,ua)=>Mn===Fe[ua]));return hr.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:hr.map(Zt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Zt.name}),"  needs [",Zt.pattern.join("  "),"]"]},Zt.id))})})()]})]})})(),(U.sockets||0)<3&&s.jsxs("button",{onClick:Ct,disabled:$||nt<Yi.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(g3,{className:"w-4 h-4"}),"Add Socket (",Yi.SOCKET," Flux)  ",U.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const le=U.slot==="RING"?"RING1":U.slot,xe=de[le]||(U.slot==="RING"?de.RING2:null);if(!xe||xe.id===U.id)return null;const Re=fa(xe.rarity),Ve=new Set([...Object.keys(U.stats),...Object.keys(xe.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${Re.text}`,children:xe.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:xe.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Ve).map(Fe=>{const hr=U.stats[Fe]||0,Zt=xe.stats[Fe]||0,Mn=hr-Zt;return Mn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[Fe.slice(0,3).toUpperCase(),": 0"]},Fe):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Mn>0?"text-green-400":"text-red-400"}`,children:[Fe.slice(0,3).toUpperCase(),": ",Mn>0?"":"",Math.abs(Mn)]},Fe)})})]})})(),(()=>{var xe;const le=(xe=Object.entries(de).find(([,Re])=>Re&&Re.id===U.id))==null?void 0:xe[0];return le?s.jsx("button",{onClick:()=>dt(le),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:$,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>it(U),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:$,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Vt("RECALIBRATE"),disabled:$||nt<Yi.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Vt("REFORGE"),disabled:$||nt<Yi.REFORGE||U.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Vt("OPTIMIZE"),disabled:$||nt<Yi.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:Pt,disabled:$,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Salvage for ",DM(U)," Flux"]})]})]})}),Ye&&s.jsx(cje,{user:t,classType:m,onClose:()=>rt(!1)}),et&&s.jsx(sje,{item:et,onClose:()=>Ne(null)}),s.jsx(Li,{isOpen:R,onClose:ct,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((le,xe)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][xe%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},xe))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:ge})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:tr.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),I&&s.jsxs("div",{className:`${fa(I.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${fa(I.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${fa(I.rarity).text}`,children:I.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[I.rarity," ",I.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(I.stats).map(([le,xe])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",xe," ",le.toUpperCase()]},le))})]})]}),s.jsx("button",{onClick:ct,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},pje=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=J7({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(dg,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(gje,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(mje,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},mje=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=J7({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},gje=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=KX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=fa(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Ww=typeof self<"u"?self:global;const ax=typeof navigator<"u",xje=ax&&typeof HTMLImageElement>"u",h2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Kw=Ww.Buffer,Jy=Ww.BigInt,Qw=!!Kw,yje=t=>t;function f2(t,e=yje){if(h2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let Z7=Ww.fetch;const vje=t=>Z7=t;if(!Ww.fetch){const t=f2("http",(n=>n)),e=f2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const x={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(x.port=Number(c));const y=(p==="https:"?await e:await t).request(x,(S=>{if(S.statusCode===301||S.statusCode===302){let N=new URL(S.headers.location,n).toString();return r(N,{headers:a}).then(i).catch(o)}i({status:S.statusCode,arrayBuffer:()=>new Promise((N=>{let w=[];S.on("data",(E=>w.push(E))),S.on("end",(()=>N(Buffer.concat(w))))}))})}));y.on("error",o),y.end()}));vje(r)}function sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p2=t=>YX(t)?void 0:t,bje=t=>t!==void 0;function YX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(bje).length===0)}function Ra(t){let e=new Error(t);throw delete e.stack,e}function Ud(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function DA(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const PA=t=>String.fromCharCode.apply(null,t),ZU=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function JX(t){return ZU?ZU.decode(t):Qw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(PA(t)))}class rs{static from(e,r){return e instanceof this&&e.le===r?e:new rs(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof rs){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Ra("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Ra("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=rs){return e instanceof DataView||e instanceof rs?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ra("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new rs(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return JX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return PA(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return PA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function LA(t,e){Ra(`${t} '${e}' was not loaded, try using full build of exifr.`)}class ek extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||LA(this.kind,e),r&&(e in r||(function(n,a){Ra(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||LA(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var dl=new ek("file parser"),Oa=new ek("segment parser"),xl=new ek("file reader");function wje(t,e){return typeof t=="string"?eV(t,e):ax&&!xje&&t instanceof HTMLImageElement?eV(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new rs(t):ax&&t instanceof Blob?BA(t,e,"blob",x0):void Ra("Invalid input argument")}function eV(t,e){return(r=t).startsWith("data:")||r.length>1e4?$A(t,e,"base64"):h2&&t.includes("://")?BA(t,e,"url",g0):h2?$A(t,e,"fs"):ax?BA(t,e,"url",g0):void Ra("Invalid input argument");var r}async function BA(t,e,r,n){return xl.has(r)?$A(t,e,r):n?(async function(a,i){let o=await i(a);return new rs(o)})(t,n):void Ra(`Parser ${r} is not loaded`)}async function $A(t,e,r){let n=new(xl.get(r))(t,e);return await n.read(),n}const g0=t=>Z7(t).then((e=>e.arrayBuffer())),x0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class Sje extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ya(t,e,r){let n=new Sje;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function y0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const ii=new Map,Po=new Map,Iu=new Map,wu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],np=["jfif","xmp","icc","iptc","ihdr"],v0=["tiff",...np],sa=["ifd0","ifd1","exif","gps","interop"],Su=[...v0,...sa],Nu=["makerNote","userComment"],ap=["translateKeys","translateValues","reviveValues","multiSegment"],_u=[...ap,"sanitize","mergeOutput","silentErrors"];class ZX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class fm extends ZX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),sr(this,"enabled",!1),sr(this,"skip",new Set),sr(this,"pick",new Set),sr(this,"deps",new Set),sr(this,"translateKeys",!1),sr(this,"translateValues",!1),sr(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=sa.includes(e),this.canBeFiltered&&(this.dict=ii.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Ra(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of ap)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,m2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&m2(this.pick,this.deps)}}var Di={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},tV=new Map;class C0 extends ZX{static useCached(e){let r=tV.get(e);return r!==void 0||(r=new this(e),tV.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ra(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ax?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of wu)this[e]=Di[e];for(e of _u)this[e]=Di[e];for(e of Nu)this[e]=Di[e];for(e of Su)this[e]=new fm(e,Di[e],void 0,this)}setupFromTrue(){let e;for(e of wu)this[e]=Di[e];for(e of _u)this[e]=Di[e];for(e of Nu)this[e]=!0;for(e of Su)this[e]=new fm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of wu)this[r]=Di[r];for(r of _u)this[r]=Di[r];for(r of Nu)this[r]=Di[r];for(r of Su)this[r]=new fm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,sa)}setupFromObject(e){let r;for(r of(sa.ifd0=sa.ifd0||sa.image,sa.ifd1=sa.ifd1||sa.thumbnail,Object.assign(this,e),wu))this[r]=eT(e[r],Di[r]);for(r of _u)this[r]=eT(e[r],Di[r]);for(r of Nu)this[r]=eT(e[r],Di[r]);for(r of v0)this[r]=new fm(r,Di[r],e[r],this);for(r of sa)this[r]=new fm(r,Di[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,sa,Su),e.tiff===!0?this.batchEnableWithBool(sa,!0):e.tiff===!1?this.batchEnableWithUserValue(sa,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,sa):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,sa)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=rV(e,n);for(let[o,c]of i)m2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=rV(r,n);for(let[o,c]of i)m2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=sa.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of sa)this[i].finalizeFilters()}get onlyTiff(){return!np.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of v0)this[e].enabled&&!Oa.has(e)&&LA("segment parser",e)}}function rV(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=ii.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function eT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function m2(t,e){for(let r of e)t.add(r)}sr(C0,"default",Di);class Yu{constructor(e){sr(this,"parsers",{}),sr(this,"output",{}),sr(this,"errors",[]),sr(this,"pushToErrors",(r=>this.errors.push(r))),this.options=C0.useCached(e)}async read(e){this.file=await wje(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of dl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Ra("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),p2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Oa.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function Xw(t,e){let r=new Yu(e);return await r.read(t),r.parse()}var Nje=Object.freeze({__proto__:null,parse:Xw,Exifr:Yu,fileParsers:dl,segmentParsers:Oa,fileReaders:xl,tagKeys:ii,tagValues:Po,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:np,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:ap,allFormatters:_u,Options:C0});class Yw{constructor(e,r,n){sr(this,"errors",[]),sr(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Ra(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Ra("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Oa.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class Eo{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new C0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof rs?e:new rs(e)}constructor(e,r={},n){sr(this,"errors",[]),sr(this,"raw",new Map),sr(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Iu.get(r),a=Po.get(r),i=ii.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,x]of e)c&&n.has(m)?x=n.get(m)(x):d&&a.has(m)&&(x=this.translateValue(x,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=x;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}sr(Eo,"headerLength",4),sr(Eo,"type",void 0),sr(Eo,"multiSegment",!1),sr(Eo,"canHandle",(()=>!1));function _je(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function Tje(t){return t>=224&&t<=239}function jje(t,e,r){for(let[n,a]of Oa)if(a.canHandle(t,e,r))return n}class nV extends Yw{constructor(...e){super(...e),sr(this,"appSegments",[]),sr(this,"jpegSegments",[]),sr(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Oa.keyList())):(e=e===void 0?Oa.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Oa.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Oa.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:x,options:y}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),Tje(n)){if(a=h.getUint16(e+2),i=jje(h,e,a),i&&m.has(i)&&(o=Oa.get(i),c=o.findPosition(h,e),d=y[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||x.delete(i)):x.delete(i),x.size===0)))break;y.recordUnknownSegments&&(c=Eo.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(_je(n)){if(a=h.getUint16(e+2),n===218&&y.stopAfterSos!==!1)return;y.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Oa.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}sr(nV,"type","jpeg"),dl.set("jpeg",nV);const Aje=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Eje extends Eo{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=Aje[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Ra(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Ra(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Ud(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Ra(`Invalid tiff type ${e}`)}}}class tT extends Eje{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ra("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ra(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,DA(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,DA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",aV(...e.get(2),e.get(1))),e.set("longitude",aV(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of sa)if(e=this[r],!YX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function aV(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}sr(tT,"type","tiff"),sr(tT,"headerLength",10),Oa.set("tiff",tT);var kje=Object.freeze({__proto__:null,default:Nje,Exifr:Yu,fileParsers:dl,segmentParsers:Oa,fileReaders:xl,tagKeys:ii,tagValues:Po,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:np,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:ap,allFormatters:_u,Options:C0,parse:Xw});const tk={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},rk=Object.assign({},tk,{firstChunkSize:4e4,gps:[1,2,3,4]});async function eY(t){let e=new Yu(rk);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const nk=Object.assign({},tk,{tiff:!1,ifd1:!0,mergeOutput:!1});async function tY(t){let e=new Yu(nk);await e.read(t);let r=await e.extractThumbnail();return r&&Qw?Kw.from(r):r}async function rY(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const ak=Object.assign({},tk,{firstChunkSize:4e4,ifd0:[274]});async function ik(t){let e=new Yu(ak);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const sk=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Vd=!0,Fd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Vd=Number(r)+.1*Number(n)<13.4,Fd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Vd=Fd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Vd=Fd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Vd=Fd=Number(e)<77}}async function nY(t){let e=await ik(t);return Object.assign({canvas:Vd,css:Fd},sk[e])}class Cje extends rs{constructor(...e){super(...e),sr(this,"ranges",new Oje),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Qw?Kw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class Oje{constructor(){sr(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>iV(e,o.offset,a)||iV(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function iV(t,e,r){return t<=e&&e<=r}class Jw extends Cje{constructor(e,r){super(0),sr(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}xl.set("blob",class extends Jw{async readWhole(){this.chunked=!1;let t=await x0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await x0(n);return this.set(a,t,!0)}});var Ije=Object.freeze({__proto__:null,default:kje,Exifr:Yu,fileParsers:dl,segmentParsers:Oa,fileReaders:xl,tagKeys:ii,tagValues:Po,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:np,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:ap,allFormatters:_u,Options:C0,parse:Xw,gpsOnlyOptions:rk,gps:eY,thumbnailOnlyOptions:nk,thumbnail:tY,thumbnailUrl:rY,orientationOnlyOptions:ak,orientation:ik,rotations:sk,get rotateCanvas(){return Vd},get rotateCss(){return Fd},rotation:nY});xl.set("url",class extends Jw{async readWhole(){this.chunked=!1;let t=await g0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await Z7(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});rs.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Jy!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Jy(e)<<Jy(32)|Jy(r)):void Ra("Trying to read 64b value but JS can only handle 53b numbers.")};class Rje extends Yw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class aY extends Rje{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,x=this.file.getUintBytes(n,m);for(n+=m;x--;){let y=this.file.getUintBytes(n,d);n+=d+h+2+o;let S=this.file.getUint16(n);if(n+=2,y===r)return S>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=S*p}}}class iY extends aY{}sr(iY,"type","heic");class sV extends aY{}sr(sV,"type","avif"),dl.set("heic",iY),dl.set("avif",sV),ya(ii,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ya(ii,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ya(ii,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ya(Po,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Gm=ya(Po,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const oV={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Gm.set(37392,oV),Gm.set(41488,oV);const rT={0:"Normal",1:"Low",2:"High"};function lV(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function cV(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function nT(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function pm(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(uV(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(uV(t[r],t[r+1]));return Ud(String.fromCodePoint(...e))}function uV(t,e){return t<<8|e}Gm.set(41992,rT),Gm.set(41993,rT),Gm.set(41994,rT),ya(Iu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?JX(t):t}],[306,nT],[40091,pm],[40092,pm],[40093,pm],[40094,pm],[40095,pm]]),ya(Iu,"exif",[[40960,cV],[36864,cV],[36867,nT],[36868,nT],[40962,lV],[40963,lV]]),ya(Iu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class aT extends Eo{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:rs.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of cY)o[d]=[],c[d]=0;return i.replace(Lje,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=Fh.findAll(e,"rdf","Description");r.length===0&&r.push(new Fh("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=Pje(o.ns,a),sY(o,n);return(function(i){let o;for(let c in i)o=i[c]=p2(i[c]),o===void 0&&delete i[c];return p2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}sr(aT,"type","xmp"),sr(aT,"multiSegment",!0),Oa.set("xmp",aT);class g2{static findAll(e){return oY(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(g2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=lY(a),new g2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Fh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return oY(e,a).map(Fh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Fh(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=g2.findAll(n),this.children=Fh.findAll(a),this.value=this.children.length===0?lY(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Dje(this.children.map(Mje));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)sY(r,e);return this.value!==void 0&&(e.value=this.value),p2(e)}}function sY(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var Mje=t=>t.serialize(),Dje=t=>t.length===1?t[0]:t,Pje=(t,e)=>e[t]?e[t]:e[t]={};function oY(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function lY(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const cY=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Lje=new RegExp(`(<|\\/)(${cY.join("|")})`,"g");var Bje=Object.freeze({__proto__:null,default:Ije,Exifr:Yu,fileParsers:dl,segmentParsers:Oa,fileReaders:xl,tagKeys:ii,tagValues:Po,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:np,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:ap,allFormatters:_u,Options:C0,parse:Xw,gpsOnlyOptions:rk,gps:eY,thumbnailOnlyOptions:nk,thumbnail:tY,thumbnailUrl:rY,orientationOnlyOptions:ak,orientation:ik,rotations:sk,get rotateCanvas(){return Vd},get rotateCss(){return Fd},rotation:nY});let dV=f2("fs",(t=>t.promises));xl.set("fs",class extends Jw{async readWhole(){this.chunked=!1,this.fs=await dV;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await dV,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});xl.set("base64",class extends Jw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(Qw){let d=Kw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class hV extends Yw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(DA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}sr(hV,"type","tiff"),dl.set("tiff",hV);let $je=f2("zlib");const zje=["ihdr","iccp","text","itxt","exif"];class fV extends Yw{constructor(...e){super(...e),sr(this,"catchError",(r=>this.errors.push(r))),sr(this,"metaChunks",[]),sr(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};zje.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),h2){let c=await $je,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}sr(fV,"type","png"),dl.set("png",fV),ya(ii,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),y0(ii,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let pV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];y0(ii,"ifd0",pV),y0(ii,"exif",pV),ya(Po,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class iT extends Eo{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}sr(iT,"type","jfif"),sr(iT,"headerLength",9),Oa.set("jfif",iT),ya(ii,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class mV extends Eo{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}sr(mV,"type","ihdr"),Oa.set("ihdr",mV),ya(ii,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ya(Po,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class wv extends Eo{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new rs(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Ra("ICC header is too short");for(let[r,n]of Object.entries(Uje)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Ud(this.chunk.getString(e+12,r))}parseText(e,r){return Ud(this.chunk.getString(e+8,r-8))}parseSig(e){return Ud(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,x=Ud(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:x}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}sr(wv,"type","icc"),sr(wv,"multiSegment",!0),sr(wv,"headerLength",18);const Uje={4:zl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:zl,16:zl,20:zl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:zl,40:zl,48:zl,52:zl,64:(t,e)=>t.getUint32(e),80:zl};function zl(t,e){return Ud(t.getString(e,4))}Oa.set("icc",wv),ya(ii,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Zy={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},gV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ya(Po,"icc",[[4,Zy],[12,gV],[40,Object.assign({},Zy,gV)],[48,Zy],[80,Zy],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class ev extends Eo{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}sr(ev,"type","iptc"),sr(ev,"translateValues",!1),sr(ev,"reviveValues",!1),Oa.set("iptc",ev),ya(ii,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ya(Po,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const mm=["Monday","Tuesday","Wednesday","Thursday","Friday"],Vje=({user:t})=>{const e=Ma(),{confirm:r}=Mo(),n=T.useMemo(()=>ke.getWeekId(),[]),[a,i]=T.useState([]),[o,c]=T.useState("Monday"),[d,h]=T.useState(!1),p=T.useRef(null),[m,x]=T.useState(!1),y=t.enrolledClasses||(t.classType?[t.classType]:[]),[S,N]=T.useState(t.classType||y[0]||"Uncategorized");T.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});mm.includes(A)&&c(A)},[]),T.useEffect(()=>{const A=ke.subscribeToEvidence(t.id,n,i);return()=>A()},[t.id,n]);const w=T.useMemo(()=>{const A=y[0]||"Uncategorized";return a.filter(j=>j.classType?j.classType===S:S===A)},[a,S,y]),E=A=>w.find(j=>j.dayOfWeek===A),O=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,R=async A=>{var C;const j=(C=A.target.files)==null?void 0:C[0];if(j){h(!0);try{let U=null;if(j.type.startsWith("image/"))try{const ne=await Bje.parse(j,["DateTimeOriginal"])||{};ne.DateTimeOriginal&&(U=ne.DateTimeOriginal.toISOString())}catch(ne){console.warn("EXIF extraction failed",ne)}const L=S.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Im(Rm,`evidence/${t.id}/${n}/${L}_${o}_${$}`);await UT(B,j);const G=await Fv(B),K=E(o),Z={id:`${t.id}_${n}_${o}_${L}`,studentId:t.id,weekId:n,classType:S,dayOfWeek:o,imageUrl:G,timestamp:new Date().toISOString(),exifDate:U,reflection:(K==null?void 0:K.reflection)||""};await ke.uploadEvidence(Z)}catch(U){e.error("Upload failed: "+(U instanceof Error?U.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},P=async(A,j)=>{const C=E(A);C&&C.reflection!==j&&await ke.uploadEvidence({...C,reflection:j})},I=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${S} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){x(!0);try{const j=new UJ,C=j.internal.pageSize.getWidth(),U=j.internal.pageSize.getHeight(),L=20,$=C-L*2,B=U-L;j.setFillColor(15,7,32),j.rect(0,0,C,40,"F"),j.setTextColor(255,255,255),j.setFontSize(22),j.setFont("helvetica","bold"),j.text("WEEKLY PROGRESS REPORT",L,18),j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Operative: ${t.name.toUpperCase()}`,L,28),j.text(`Class: ${S}`,L,33),j.text(`Cycle ID: ${n}`,L,38),j.text(`Generated: ${new Date().toLocaleDateString()}`,C-L,33,{align:"right"});let G=55;const K=[...w].sort((H,Z)=>mm.indexOf(H.dayOfWeek)-mm.indexOf(Z.dayOfWeek));for(const H of K){let Z=null,ne="JPEG",ce=0,he=0,Y=!1;try{const Ne=await fetch(H.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const Ue=await Ne.blob();Z=await new Promise((we,Qe)=>{const at=new FileReader;at.onloadend=()=>we(at.result),at.onerror=Qe,at.readAsDataURL(Ue)}),Ue.type==="image/png"&&(ne="PNG"),Ue.type==="image/webp"&&(ne="WEBP");const X=j.getImageProperties(Z),te=X.width/X.height,be=100;ce=$,he=ce/te,he>be&&(he=be,ce=he*te)}catch(Ne){console.warn("Image processing error for PDF",Ne),Y=!0,he=15}const ye=20+he+12;G+ye>B&&(j.addPage(),G=L),j.setDrawColor(200,200,200),j.setLineWidth(.5),j.line(L,G,C-L,G),G+=6,j.setTextColor(15,7,32),j.setFontSize(16),j.setFont("helvetica","bold"),j.text(H.dayOfWeek.toUpperCase(),L,G);const De=O(H.exifDate)||O(H.timestamp);if(j.setFontSize(9),j.setFont("helvetica","italic"),j.setTextColor(100,100,100),j.text(`Captured: ${De}`,C-L,G,{align:"right"}),G+=10,!Y&&Z){const Ne=(C-ce)/2;j.addImage(Z,ne,Ne,G,ce,he),G+=he+12}else j.setTextColor(255,0,0),j.setFontSize(8),j.text("[Image Error]",L,G),G+=15;j.setFont("helvetica","normal"),j.setFontSize(10);const Ye=H.reflection||"No reflection logged for this cycle.",rt=j.splitTextToSize(Ye,$),et=rt.length*5+15;G+et>B&&(j.addPage(),G=L),j.setTextColor(15,7,32),j.setFontSize(11),j.setFont("helvetica","bold"),j.text("DAILY REFLECTION:",L,G),G+=6,j.setFont("helvetica","normal"),j.setFontSize(10),j.setTextColor(60,60,60),j.text(rt,L,G),G+=rt.length*5+25}j.save(`Report_${S.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await ke.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(j){console.error("PDF generation failed:",j),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{x(!1)}}},k=E(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(OR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:S,onChange:A=>N(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:y.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx(ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:S}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:I,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(Ei,{className:"w-5 h-5 animate-spin"}):s.jsx(ble,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:R,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:mm.map(A=>{const j=E(A),C=o===A;return s.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${C?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${C?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",mm.indexOf(A)+1]}),s.jsx("span",{className:"font-bold text-sm",children:A}),j&&s.jsx("div",{className:`absolute top-2 right-2 ${C?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(s0,{className:"w-3 h-3"})})]},A)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(dE,{className:"w-4 h-4"})," Evidence Capture (",S,")"]}),k&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(so,{className:"w-3 h-3"}),O(k.exifDate)||O(k.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:k?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:k.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},children:[s.jsx(Lu,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(Ei,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(OR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(N0,{className:"w-4 h-4"})," Daily Reflection"]})}),k?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${S}...`,defaultValue:k.reflection,onBlur:A=>P(o,A.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(no,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},Fje=({user:t})=>{const e=Ma(),[r,n]=T.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState("");T.useEffect(()=>{const x=r.content.replace(/\$(.*?)\$/g,(y,S)=>{try{return ab.renderToString(S,{throwOnError:!1})}catch{return S}}).replace(/\n/g,"<br/>");i(x)},[r.content]);const p=async()=>{await ke.saveLabReport(r),await ke.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const x=parseFloat(o),y=parseFloat(d);!isNaN(x)&&!isNaN(y)&&(n(S=>({...S,dataPoints:[...S.dataPoints,{x,y}].sort((N,w)=>N.x-w.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(H2,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(pE,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:x=>c(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:x=>h(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(nK,{width:"100%",height:"100%",children:s.jsxs(i_e,{children:[s.jsx(lX,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx($w,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(zw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Wo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(Vx,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:x=>n(y=>({...y,content:x.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:QG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},qje=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],Hje=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],Gje=({userId:t,classType:e,onClose:r})=>{var P,I,k,A,j;const[n,a]=T.useState(null),[i,o]=T.useState(!0);if(T.useEffect(()=>{(async()=>{const U=await ke.getPublicProfile(t);a(U),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(P=n.settings)==null?void 0:P.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=c0(p),x=JG(p),{equipped:y,appearance:S}=Uu(n,e),N=zE({gamification:{...c,equipped:y}}),w=u0(y),E=((I=c.classXp)==null?void 0:I[e])||0,O=Object.values(y).filter(Boolean),R=BE(O);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(Kn,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(nx,{equipped:y,appearance:S})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[x.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qn,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:qje.map(({key:C,label:U,color:L,icon:$})=>{const B=N[C]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-sm font-bold ${L} ml-auto`,children:B})]},C)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Hje.map(C=>{const U=y[C];if(!U)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:C}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},C);const L=fa(U.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${L.border} ${L.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:C}),s.jsx("div",{className:`text-xs font-bold truncate ${L.text}`,children:U.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:U.rarity})]},C)})})]}),R.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(_x,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),R.map(({set:C,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:C.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[U.label,": ",U.effects.map(L=>`+${L.value} ${L.stat}`).join(", ")]})]},C.id))]}),(((k=c.unlockedAchievements)==null?void 0:k.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ll,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(j=c.unlockedAchievements)==null?void 0:j.slice(0,12).map(C=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:C.replace(/_/g," ")},C))})]})]})})},Wje=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),Kje=({user:t})=>{var m;const[e,r]=T.useState([]),[n,a]=T.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||jr.AP_PHYSICS),[i,o]=T.useState(!0),[c,d]=T.useState(null);T.useEffect(()=>{const x=ke.subscribeToLeaderboard(y=>{r(y),o(!1)});return()=>x()},[]);const h=T.useMemo(()=>{const x=t.enrolledClasses||[];if(x.length>0)return x.sort();const y=new Set;return e.forEach(S=>{var N;return(N=S.enrolledClasses)==null?void 0:N.forEach(w=>y.add(w))}),Array.from(y).sort()},[t.enrolledClasses,e]),p=T.useMemo(()=>e.filter(x=>{var y;return(y=x.enrolledClasses)==null?void 0:y.includes(n)}).sort((x,y)=>{var w,E,O,R;const S=((E=(w=x.gamification)==null?void 0:w.classXp)==null?void 0:E[n])||0;return(((R=(O=y.gamification)==null?void 0:O.classXp)==null?void 0:R[n])||0)-S}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:x=>a(x.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(x=>s.jsx("option",{value:x,children:x},x)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(Wje,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(x=>{var A,j,C,U;const y=p[x];if(!y)return null;const S=(A=y.settings)==null?void 0:A.privacyMode,N=S?((j=y.gamification)==null?void 0:j.codename)||"Unknown Agent":y.name,w=((U=(C=y.gamification)==null?void 0:C.classXp)==null?void 0:U[n])||0,E=Math.floor(w/1e3)+1,O=c0(E),R=x===0,P=["h-28","h-20","h-16"],I=["w-20 h-20","w-14 h-14","w-14 h-14"],k=[{icon:s.jsx(ll,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(Ny,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(Ny,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${R?"order-2":x===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+x*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${R?"mb-3":""}`,children:[s.jsx("div",{className:`${I[x]} rounded-full p-0.5 bg-white/10 ring-2 ${k[x].ring} relative ${R?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:y.avatarUrl,alt:N,className:`w-full h-full rounded-full border-2 ${O.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${k[x].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:k[x].icon})]}),s.jsxs("div",{className:`text-center ${R?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${R?"text-sm text-white":"text-xs text-gray-300"} ${S?"italic":""}`,children:N}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${R?"text-xl":"text-base"}`,children:w.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${O.tierColor.split(" ")[1]}`,children:O.rankName}),s.jsxs("button",{onClick:()=>d(y.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(o0,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${P[x]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${x===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":x===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},y.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((x,y)=>{var P,I,k,A;const S=p.length>=3?y+3:y,N=(P=x.settings)==null?void 0:P.privacyMode,w=N?((I=x.gamification)==null?void 0:I.codename)||"Unknown Agent":x.name,E=((A=(k=x.gamification)==null?void 0:k.classXp)==null?void 0:A[n])||0,O=Math.floor(E/1e3)+1,R=c0(O);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*S}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[S<3&&S===0&&s.jsx(ll,{className:"w-6 h-6 text-yellow-400 mx-auto"}),S<3&&S===1&&s.jsx(Ny,{className:"w-6 h-6 text-gray-300 mx-auto"}),S<3&&S===2&&s.jsx(Ny,{className:"w-6 h-6 text-amber-600 mx-auto"}),S>=3&&`#${S+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:x.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:O})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${N?"text-purple-300 italic":"text-white"}`,children:[w,N&&s.jsx(af,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${R.tierColor.split(" ")[1]}`,children:R.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:E.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(x.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(o0,{className:"w-4 h-4"})})]},x.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(ls,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(Gje,{userId:c,classType:n,onClose:()=>d(null)})]})};class Qje extends ie.Component{constructor(r){super(r);TO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(Yv,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const xV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Oo,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx($H,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(_x,{className:"w-4 h-4"})}},Xje={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},sT=3;function oT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const Yje=({assignment:t})=>{const e=Ma(),[r,n]=T.useState([]),[a,i]=T.useState([]),[o,c]=T.useState(!0),[d,h]=T.useState(!1),[p,m]=T.useState({}),[x,y]=T.useState(1),[S,N]=T.useState(null),[w,E]=T.useState(new Set),O=T.useRef({engagementTime:0}),R=T.useRef(Date.now());T.useEffect(()=>{const G=setInterval(()=>{Date.now()-R.current<6e4&&(O.current.engagementTime+=1)},1e3);return()=>clearInterval(G)},[]),T.useEffect(()=>{const G=()=>{R.current=Date.now()},K=["mousemove","keydown","scroll","click"];return K.forEach(H=>window.addEventListener(H,G)),()=>K.forEach(H=>window.removeEventListener(H,G))},[]),T.useEffect(()=>()=>{var K;const G=O.current.engagementTime;if(G>=5){const H=(K=xT().currentUser)==null?void 0:K.uid;H&&ke.submitReviewEngagement(H,t.id,t.title,t.classType,G).catch(()=>{})}},[t.id,t.title,t.classType]);const P=T.useCallback(G=>{const K=oT(G.filter(ne=>ne.tier===1),sT),H=oT(G.filter(ne=>ne.tier===2),sT),Z=oT(G.filter(ne=>ne.tier===3),sT);i([...K,...H,...Z]),m({}),N(null)},[]);T.useEffect(()=>{(async()=>{var K;c(!0),h(!1);try{const H=await pa(ut(Me,"question_banks",t.id));if(!H.exists()){h(!0);return}const Z=H.data().questions||[];n(Z),P(Z)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(K=xT().currentUser)==null?void 0:K.uid;if(H){const Z=await pa(ut(Me,"review_progress",`${H}_${t.id}`));Z.exists()&&E(new Set(Z.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,P]);const I=()=>{r.length>0&&P(r)},k=(G,K,H)=>{const Z=p[G];if(!(Z!=null&&Z.submitted))if(H==="multiple_select"||H==="ranking"){const ne=(Z==null?void 0:Z.selected)||[],ce=ne.includes(K)?ne.filter(he=>he!==K):[...ne,K];m(he=>({...he,[G]:{...he[G],selected:ce,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ne=>({...ne,[G]:{selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))},A=(G,K)=>{var H;(H=p[G])!=null&&H.submitted||m(Z=>({...Z,[G]:{...Z[G],linkedSelected:K}}))},j=async G=>{const K=p[G.id];if(!(K!=null&&K.selected))return;let H=!1;if(G.type==="multiple_select"||G.type==="ranking"){const Z=K.selected,ne=G.correctAnswer;H=Z.length===ne.length&&Z.every((ce,he)=>ce===ne[he])}else G.type==="linked_mc"?H=K.selected===G.correctAnswer&&(!G.linkedFollowUp||K.linkedSelected===G.linkedFollowUp.correctAnswer):H=K.selected===G.correctAnswer;if(H)if(w.has(G.id))m(Z=>({...Z,[G.id]:{...Z[G.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(Z=>({...Z,[G.id]:{...Z[G.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await HT({assignmentId:t.id,questionId:G.id,xpAmount:G.xp,classType:t.classType})).data.awarded?(e.success(`+${G.xp} XP earned!`),m(ce=>({...ce,[G.id]:{...ce[G.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(ce=>new Set([...ce,G.id]))):e.success("Correct! (XP already claimed)")}catch(Z){console.error("XP award error:",Z)}}else{const Z=Math.ceil(G.xp/2);m(ne=>({...ne,[G.id]:{...ne[G.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:Z}})),e.error(`-${Z} XP penalty`);try{await Foe({assignmentId:t.id,questionId:G.id,classType:t.classType})}catch(ne){console.error("Penalty error:",ne)}}},C=T.useMemo(()=>a.filter(G=>G.tier===x),[a,x]),U=T.useMemo(()=>Object.entries(p).filter(([,G])=>G.correct&&G.xpAwarded).reduce((G,[K])=>{var H;return G+(((H=a.find(Z=>Z.id===K))==null?void 0:H.xp)||0)},0),[p,a]),L=T.useMemo(()=>Object.values(p).reduce((G,K)=>G+(K.penalty||0),0),[p]),$=T.useMemo(()=>a.reduce((G,K)=>G+K.xp,0),[a]),B=T.useMemo(()=>a.length>0&&a.every(G=>{var K;return(K=p[G.id])==null?void 0:K.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ei,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Oo,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Oo,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:U}),L>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",L]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(Yv,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(G=>{const K=xV[G],H=a.filter(ce=>ce.tier===G),Z=H.filter(ce=>{var he;return(he=p[ce.id])==null?void 0:he.submitted}).length,ne=H.filter(ce=>{var he;return(he=p[ce.id])==null?void 0:he.correct}).length;return s.jsxs("button",{onClick:()=>y(G),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${x===G?`${K.bg} ${K.color} ${K.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[K.icon,s.jsx("span",{className:"hidden sm:inline",children:K.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",G]}),Z>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ne===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ne,"/",H.length]})]},G)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:I,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(Yv,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[C.map((G,K)=>{const H=p[G.id],Z=S===G.id,ne=H==null?void 0:H.submitted,ce=H==null?void 0:H.correct,he=xV[G.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${ne?ce?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Z?`${he.border} ${he.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>N(Z?null:G.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ne?ce?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${he.bg} ${he.color}`}`,children:ne?ce?s.jsx(Br,{className:"w-4 h-4"}):s.jsx(io,{className:"w-4 h-4"}):K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${he.color}`,children:G.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:Xje[G.type]||G.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(qn,{className:"w-3 h-3"}),G.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(G.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:G.stem})]}),s.jsx(no,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Z?"rotate-90":""}`})]}),Z&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[G.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:G.context}),G.type==="ranking"?s.jsx(eAe,{question:G,answer:H,onSelect:k}):G.type==="multiple_select"?s.jsx(Zje,{question:G,answer:H,onSelect:k}):s.jsx(Jje,{question:G,answer:H,onSelect:k}),G.type==="linked_mc"&&G.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:G.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:G.linkedFollowUp.options.map(Y=>{const ae=(H==null?void 0:H.linkedSelected)===Y.id,re=ne,ye=Y.id===G.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>A(G.id,Y.id),disabled:ne,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${re?ye?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ae?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ae?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),ne?s.jsxs("div",{className:`p-4 rounded-xl border ${ce?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ce?s.jsx(Br,{className:"w-5 h-5 text-emerald-400"}):s.jsx(io,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${ce?"text-emerald-400":"text-red-400"}`,children:ce?`Correct! +${G.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(G.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:G.explanation})]}):s.jsx("button",{onClick:()=>j(G),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},G.id)}),C.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(af,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},Jje=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),Zje=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(Br,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},eAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(cE,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function tAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${ab.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return ab.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const rAe=({assignment:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!0),[o,c]=T.useState(!1),d=T.useRef(Hv()),h=T.useRef(Date.now()),p=T.useRef(e),[m,x]=T.useState(!0),[y,S]=T.useState(0);T.useEffect(()=>{p.current=e},[e]);const N=T.useCallback(()=>{h.current=Date.now(),m||x(!0)},[m]);T.useEffect(()=>{const E=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,S(d.current.engagementTime),m||x(!0)):m&&x(!1)},1e3);return()=>clearInterval(E)},[m]),T.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(O=>window.addEventListener(O,N)),()=>{E.forEach(O=>window.removeEventListener(O,N))}},[N]),T.useEffect(()=>()=>{p.current(d.current)},[]),T.useEffect(()=>{(async()=>{i(!0);try{const O=await pa(ut(Me,"reading_materials",t.id));O.exists()?n(O.data()):c(!0)}catch(O){console.error("Failed to load reading material:",O),c(!0)}finally{i(!1)}})()},[t.id]);const w=T.useMemo(()=>r?r.sections.map(E=>({title:E.title,html:tAe(E.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Ei,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(ni,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(uE,{className:"w-4 h-4"}):s.jsx(so,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ds,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:N,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:w.map((E,O)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:O+1}),E.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},O))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(ni,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},nAe=({user:t})=>{const[e,r]=T.useState(!1),[n,a]=T.useState(""),[i,o]=T.useState("bug"),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await ke.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(CR,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:x=>x.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(s0,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(CR,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Kn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(x=>s.jsx("button",{onClick:()=>o(x),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===x?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:x==="bug"?"Bug":x==="feature"?"Feature Request":"Other"},x))}),s.jsx("textarea",{value:n,onChange:x=>a(x.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(mE,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},aAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},iAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=T.useState(e||null),[i,o]=T.useState(null);if(T.useEffect(()=>{(async()=>{try{const x=await ke.updateDailyStreak(t);x.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):x.newMilestone&&(o({message:`${x.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),T.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Cu,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,x)=>s.jsx(y3,{className:"w-3 h-3 text-cyan-400"},x))})]});const d=Array.from({length:7}).map((m,x)=>{var E;const y=new Date(Date.now()-(6-x)*864e5).toISOString().split("T")[0],S=(E=n.streakHistory)==null?void 0:E.includes(y),N=y===new Date().toISOString().split("T")[0],w=new Date(y).toLocaleDateString("en-US",{weekday:"narrow"});return{date:y,isActive:S,isToday:N,dayLabel:w}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(y3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(ll,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cu,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,x)=>s.jsx(y3,{className:`w-5 h-5 ${x<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},x))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(Cu,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${aAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},sAe=({classConfigs:t,availableSections:e})=>{const r=Ma(),{confirm:n}=Mo(),[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(jr.AP_PHYSICS),[p,m]=T.useState(""),[x,y]=T.useState(""),[S,N]=T.useState(null);T.useEffect(()=>{const k=ke.subscribeToEnrollmentCodes(i);return()=>k()},[]);const w=async()=>{const k=await ke.createEnrollmentCode(d,p||void 0,x?parseInt(x):void 0);r.success(`Code created: ${k}`),c(!1),m(""),y("")},E=(k,A)=>{navigator.clipboard.writeText(k),N(A),setTimeout(()=>N(null),2e3)},O=async k=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await ke.deactivateEnrollmentCode(k)},R=t&&t.length>0?t.map(k=>k.className):Object.values(jr).filter(k=>k!=="Uncategorized"),P=a.filter(k=>k.isActive),I=a.filter(k=>!k.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(hg,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(cn,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:k=>h(k.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:R.map(k=>s.jsx("option",{value:k,children:k},k))}),s.jsxs("select",{value:p,onChange:k=>m(k.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(k=>s.jsx("option",{value:k,children:k},k))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:x,onChange:k=>y(k.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Kn,{className:"w-4 h-4"})})]})]}),P.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(hg,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:P.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:k.code}),s.jsx("span",{className:"text-xs text-gray-500",children:k.classType}),k.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:k.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[k.usedCount," used",k.maxUses?` / ${k.maxUses}`:""]}),s.jsx("button",{onClick:()=>E(k.code,k.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:S===k.id?s.jsx(Xl,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(nf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>O(k.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(ple,{className:"w-3.5 h-3.5"})})]})]},k.id))}),I.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[I.length," expired code",I.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:I.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:k.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[k.classType," | ",k.usedCount," used"]})]},k.id))})]})]})},uY=[{type:"TEXT",label:"Text",icon:s.jsx(Gle,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(BH,{className:"w-4 h-4"}),description:"Section title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(dE,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(Ff,{className:"w-4 h-4"}),description:"YouTube embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(cs,{className:"w-4 h-4"}),description:"Learning objectives",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(K2,{className:"w-4 h-4"}),description:"Separator line",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(q2,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(PH,{className:"w-4 h-4"}),description:"iFrame embed",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(G2,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(ni,{className:"w-4 h-4"}),description:"Term & definition",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(zH,{className:"w-4 h-4"}),description:"Multiple terms",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx(qn,{className:"w-4 h-4"}),description:"Activity instructions",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(hE,{className:"w-4 h-4"}),description:"Task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(cE,{className:"w-4 h-4"}),description:"Categorize items",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(HH,{className:"w-4 h-4"}),description:"Editable table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(Vf,{className:"w-4 h-4"}),description:"Interactive chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(F2,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(sf,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(dg,{className:"w-4 h-4"}),description:"Reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(Kv,{className:"w-4 h-4"}),description:"Follow-up question",category:"Questions"}],zA=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,oAe=t=>{const e={id:zA(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:"",acceptedAnswers:[""]};default:return e}},lAe=`I need you to create a standalone HTML file for an interactive educational activity that integrates with a Learning Management System called "Porters Portal". The HTML file must communicate with the parent application through the Proctor Bridge Protocol using postMessage.

REQUIRED BRIDGE INTEGRATION:
The HTML must include this bridge snippet at the top of its <script>:

\`\`\`javascript
// Portal Bridge - communicates with parent LMS
const PortalBridge = {
  _ready: false,
  _userId: null,
  _savedState: null,
  init() {
    window.addEventListener('message', (e) => {
      if (e.data?.type === 'portal-init') {
        this._userId = e.data.payload.userId;
        this._savedState = e.data.payload.savedState;
        this._ready = true;
        this.onReady(e.data.payload);
      }
      if (e.data?.type === 'portal-xp-result') this.onXPResult(e.data.payload);
      if (e.data?.type === 'portal-reset-ok') this.onReset();
    });
    window.parent.postMessage({ type: 'portal-ready' }, '*');
  },
  save(state, currentQuestion) {
    window.parent.postMessage({ type: 'portal-save', payload: { state, currentQuestion } }, '*');
  },
  answer(questionId, correct, attempts) {
    window.parent.postMessage({ type: 'portal-answer', payload: { questionId, correct, attempts } }, '*');
  },
  complete(score, totalQuestions, correctAnswers) {
    window.parent.postMessage({ type: 'portal-complete', payload: { score, totalQuestions, correctAnswers } }, '*');
  },
  // Override these in your code:
  onReady(payload) { /* { userId, savedState, completionInfo } */ },
  onXPResult(payload) { /* { questionId, awarded, xp } */ },
  onReset() { /* replay requested */ }
};
PortalBridge.init();
\`\`\`

REQUIREMENTS:
1. Self-contained single HTML file (inline CSS + JS, no external dependencies)
2. Call PortalBridge.save() to auto-save student progress
3. Call PortalBridge.answer(questionId, correct, attempts) when students answer questions (awards XP)
4. Call PortalBridge.complete(score, totalQuestions, correctAnswers) when the activity is finished
5. Implement PortalBridge.onReady() to restore saved state
6. Dark theme styling (background: #0f0720, text: white/gray, accents: purple/green)
7. Mobile-responsive layout
8. Smooth animations and transitions

The activity I need is: [DESCRIBE YOUR ACTIVITY HERE]`,cAe=`I need you to convert the following content into a JSON array of lesson blocks for the Porters Portal LMS. Output ONLY valid JSON (no markdown, no explanation).

AVAILABLE BLOCK TYPES AND THEIR REQUIRED FIELDS:

Content blocks:
- {"type":"SECTION_HEADER", "icon":"", "title":"Section Name", "subtitle":"Optional subtitle"}
- {"type":"TEXT", "content":"Plain text content with line breaks"}
- {"type":"IMAGE", "url":"https://...", "caption":"Caption", "alt":"Description"}
- {"type":"VIDEO", "url":"https://youtube.com/watch?v=...", "caption":"Caption"}
- {"type":"OBJECTIVES", "title":"Learning Objectives", "items":["Obj 1","Obj 2"]}
- {"type":"DIVIDER"}
- {"type":"EXTERNAL_LINK", "title":"Link Title", "url":"https://...", "content":"Description", "buttonLabel":"Open", "openInNewTab":true}
- {"type":"EMBED", "url":"https://docs.google.com/...", "caption":"Caption", "height":500}
- {"type":"INFO_BOX", "variant":"tip|warning|note", "content":"Box content"}

Interactive blocks:
- {"type":"VOCABULARY", "term":"Word", "definition":"Definition"}
- {"type":"VOCAB_LIST", "terms":[{"term":"Word1","definition":"Def1"},{"term":"Word2","definition":"Def2"}]}
- {"type":"ACTIVITY", "icon":"", "title":"Activity Name", "instructions":"Do this..."}
- {"type":"CHECKLIST", "content":"Checklist title", "items":["Step 1","Step 2"]}
- {"type":"SORTING", "title":"Sort Title", "instructions":"Sort these", "leftLabel":"Category A", "rightLabel":"Category B", "sortItems":[{"text":"Item","correct":"left|right"}]}
- {"type":"DATA_TABLE", "title":"Table Title", "columns":[{"key":"col1","label":"Name","editable":true}], "trials":3}
- {"type":"BAR_CHART", "title":"Chart Title", "barCount":3, "initialLabel":"Initial", "finalLabel":"Final", "deltaLabel":"Change", "height":300}

Question blocks:
- {"type":"MC", "content":"Question?", "options":["A","B","C","D"], "correctAnswer":0}
- {"type":"SHORT_ANSWER", "content":"Question?", "acceptedAnswers":["answer1","answer2"]}
- {"type":"RANKING", "content":"Put in order:", "items":["First","Second","Third"]}

RULES:
1. Output a JSON array: [{...}, {...}, ...]
2. Start with a SECTION_HEADER block
3. Use OBJECTIVES near the top
4. Add TEXT blocks between interactive elements for context
5. Use INFO_BOX for important callouts
6. Add DIVIDER between major sections
7. Include at least 2-3 question blocks (MC, SHORT_ANSWER, or RANKING)
8. Every block MUST have a "type" field and a "content" field (even if empty string "")

The content to convert is:
[PASTE YOUR CONTENT HERE  supports: Google Slides text, PDF text, Google Docs, spreadsheets, Word docs, PowerPoint content, etc.]`,uAe=({onSelect:t,onClose:e})=>{const r=["Content","Interactive","Questions"];return s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 w-[480px] max-h-[50vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:r.map(n=>s.jsxs("div",{className:"mb-2 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:n}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:uY.filter(a=>a.category===n).map(a=>s.jsxs("button",{type:"button",onClick:()=>{t(a.type),e()},className:"flex items-center gap-2 p-2 rounded-lg text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:a.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-bold text-gray-300",children:a.label}),s.jsx("div",{className:"text-[9px] text-gray-600",children:a.description})]})]},a.type))})]},n))})},yV=({onInsert:t})=>{const[e,r]=T.useState(!1);return s.jsxs("div",{className:"relative flex items-center justify-center py-1 group",children:[s.jsx("div",{className:"absolute inset-x-0 top-1/2 h-px bg-white/5 group-hover:bg-purple-500/20 transition"}),s.jsx("button",{type:"button",onClick:()=>r(!e),className:"relative z-10 w-7 h-7 rounded-full bg-[#1a1b26] border border-white/10 hover:border-purple-500/40 hover:bg-purple-500/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(cn,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-purple-400"})}),e&&s.jsx(uAe,{onSelect:t,onClose:()=>r(!1)})]})},dAe=t=>{switch(t.type){case"TEXT":return t.content.slice(0,80)||"Empty text";case"MC":return t.content.slice(0,60)||"Multiple choice question";case"SHORT_ANSWER":return t.content.slice(0,60)||"Short answer question";case"VOCABULARY":return t.term||"Vocabulary term";case"CHECKLIST":return t.content||`${(t.items||[]).length} items`;case"INFO_BOX":return`${t.variant}: ${t.content.slice(0,50)}`;case"SECTION_HEADER":return`${t.icon||""} ${t.title||"Section"}`.trim();case"IMAGE":return t.caption||t.alt||"Image";case"VIDEO":return t.caption||"Video";case"OBJECTIVES":return t.title||"Objectives";case"DIVIDER":return"";case"EXTERNAL_LINK":return t.title||"Link";case"EMBED":return t.caption||"Embed";case"VOCAB_LIST":return`${(t.terms||[]).length} terms`;case"ACTIVITY":return t.title||"Activity";case"SORTING":return t.title||"Sorting activity";case"DATA_TABLE":return t.title||"Data table";case"BAR_CHART":return t.title||"Bar chart";case"RANKING":return t.content.slice(0,60)||"Ranking question";case"LINKED":return t.content.slice(0,60)||"Linked question";default:return t.type}},hAe=t=>uY.find(e=>e.type===t),fAe=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],pAe=({value:t,onChange:e,existingUnits:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(""),c=T.useRef(null);T.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=r.filter(p=>p.toLowerCase().includes(i.toLowerCase())),h=i&&!r.some(p=>p.toLowerCase()===i.toLowerCase());return s.jsxs("div",{ref:c,className:"relative",children:[s.jsx("label",{className:pr,children:"Unit"}),s.jsx("input",{type:"text",value:t,onChange:p=>{e(p.target.value),o(p.target.value)},onFocus:()=>{a(!0),o("")},placeholder:"Select or type a unit...",className:rr}),n&&r.length>0&&s.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-[#1a1b26] border border-white/10 rounded-xl shadow-2xl max-h-48 overflow-y-auto",children:[d.map(p=>s.jsx("button",{type:"button",onClick:()=>{e(p),a(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-purple-500/10 transition ${t===p?"text-purple-300 bg-purple-500/5":"text-gray-300"}`,children:p},p)),d.length===0&&!h&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 italic",children:"No matching units"}),h&&s.jsxs("button",{type:"button",onClick:()=>{e(i),a(!1)},className:"w-full text-left px-4 py-2 text-sm text-emerald-400 hover:bg-emerald-500/10 transition flex items-center gap-2",children:[s.jsx(cn,{className:"w-3 h-3"}),' Create "',i,'"']})]})]})},mAe=({assignments:t,onClose:e,initialAssignmentId:r,classConfigs:n=[],users:a=[],availableSections:i=[],onCreateAssignment:o})=>{const c=Ma(),d=T.useMemo(()=>{const Le={};return t.sort((it,dt)=>it.title.localeCompare(dt.title)).forEach(it=>{const dt=it.unit||"Unassigned";Le[dt]||(Le[dt]=[]),Le[dt].push(it)}),Le},[t]),h=T.useMemo(()=>{const Le=Object.values(jr).filter(dt=>dt!==jr.UNCATEGORIZED),it=(n||[]).map(dt=>dt.className);return Array.from(new Set([...Le,...it]))},[n]),p=T.useMemo(()=>a.filter(Le=>Le.role==="STUDENT"),[a]),[m,x]=T.useState(r||null),[y,S]=T.useState(!1),[N,w]=T.useState([]),[E,O]=T.useState(null),[R,P]=T.useState(!1),[I,k]=T.useState(!1),[A,j]=T.useState(""),[C,U]=T.useState(""),[L,$]=T.useState(!1),[B,G]=T.useState(""),[K,H]=T.useState(new Set(Object.keys(d))),[Z,ne]=T.useState(!1),[ce,he]=T.useState(!1),[Y,ae]=T.useState(""),[re,ye]=T.useState("Unit 1: Overview"),[De,Ye]=T.useState("Textbook"),[rt,et]=T.useState(""),[Ne,Ue]=T.useState(null),[X,te]=T.useState(new Set([h[0]||jr.AP_PHYSICS])),[be,we]=T.useState([]),[Qe,at]=T.useState(""),[kt,je]=T.useState(""),[ct,Tt]=T.useState(!1),St=T.useMemo(()=>{const Le=Array.from(X)[0];if(!Le)return i;const it=tv(p,Le);return it.length>0?it:i},[X,p,i]),bt=T.useMemo(()=>{const Le=new Set;return t.forEach(it=>{X.has(it.classType)&&it.unit&&Le.add(it.unit)}),Array.from(Le).sort()},[t,X]),de=T.useMemo(()=>t.find(Le=>Le.id===m)||null,[t,m]),He=T.useCallback(Le=>{const it=t.find(dt=>dt.id===Le);it&&(x(Le),S(!1),w(it.lessonBlocks||[]),ae(it.title),ye(it.unit||"Unit 1: Overview"),Ye(it.category||"Textbook"),et(it.description||""),Ue(it.contentUrl||null),te(new Set([it.classType])),we(it.targetSections||[]),at(it.scheduledAt?it.scheduledAt.slice(0,16):""),je(it.dueDate?it.dueDate.slice(0,16):""),O(null),P(!1),ne(!1),he(!1))},[t]),xt=T.useCallback(()=>{x(null),S(!0),w([]),ae(""),ye("Unit 1: Overview"),Ye("Textbook"),et(""),Ue(null),te(new Set([h[0]||jr.AP_PHYSICS])),we([]),at(""),je(""),O(null),P(!1),ne(!1),he(!0)},[h]);ie.useEffect(()=>{r&&He(r)},[r,He]);const Ge=T.useCallback(Le=>{w(Le),ne(!0)},[]),Je=T.useCallback((Le,it)=>{const dt=oAe(it),Pt=[...N];Pt.splice(Le,0,dt),Ge(Pt),O(dt.id)},[N,Ge]),Et=T.useCallback(Le=>{Ge(N.filter((it,dt)=>dt!==Le))},[N,Ge]),Nt=T.useCallback((Le,it)=>{const dt=Le+it;if(dt<0||dt>=N.length)return;const Pt=[...N];[Pt[Le],Pt[dt]]=[Pt[dt],Pt[Le]],Ge(Pt)},[N,Ge]),dr=T.useCallback(Le=>{const it={...N[Le],id:zA()},dt=[...N];dt.splice(Le+1,0,it),Ge(dt)},[N,Ge]),ge=T.useCallback((Le,it)=>{const dt={title:Y,description:rt,unit:re,category:De,status:Le,lessonBlocks:N,contentUrl:Ne};return be.length>0&&(dt.targetSections=be),it&&(dt.scheduledAt=new Date(it).toISOString()),kt&&(dt.dueDate=new Date(kt).toISOString()),de!=null&&de.id&&!y&&(dt.id=de.id),dt},[Y,rt,re,De,N,Ne,be,kt,de,y]),nt=T.useCallback(async(Le,it)=>{if(!Y.trim()){c.error("Title is required.");return}if(X.size===0){c.error("Select a target class.");return}$(!0);try{const dt=ge(Le,it);if(o)de!=null&&de.id&&!y?await o({...dt,classType:Array.from(X)[0]}):await Promise.all(Array.from(X).map(Pt=>o({...dt,classType:Pt})));else for(const Pt of Array.from(X))await ke.addAssignment({...dt,classType:Pt});c.success(Le===Ua.DRAFT?"Draft saved.":it?"Deployment scheduled.":"Resource deployed!"),ne(!1),S(!1)}catch(dt){c.error("Save failed."),console.error(dt)}finally{$(!1)}},[Y,X,ge,o,de,y,c]),jt=T.useCallback(async()=>{if(!(!de&&!y)){if(y){await nt(Ua.ACTIVE);return}$(!0);try{const Le=ge(de.status);await ke.addAssignment({...de,...Le}),c.success("Saved!"),ne(!1)}catch(Le){c.error("Failed to save."),console.error(Le)}finally{$(!1)}}},[de,y,nt,ge,c]),Bt=T.useCallback(()=>{U("");try{const Le=JSON.parse(A);let it;if(Array.isArray(Le))it=Le;else if(Le!=null&&Le.blocks&&Array.isArray(Le.blocks))it=Le.blocks;else{U("JSON must be an array of blocks or { blocks: [...] }");return}it=it.map(dt=>{if(!dt.type)throw new Error('Block missing "type" field');return{...dt,id:dt.id||zA(),content:dt.content??""}}),Ge([...N,...it]),k(!1),j(""),c.success(`${it.length} blocks imported!`)}catch(Le){U(Le instanceof Error?Le.message:"Invalid JSON")}},[A,N,Ge,c]),$t=T.useCallback((Le,it)=>{navigator.clipboard.writeText(Le).then(()=>c.success(`${it} copied to clipboard!`))},[c]),tt=T.useMemo(()=>{if(!B)return d;const Le=B.toLowerCase(),it={};return Object.entries(d).forEach(([dt,Pt])=>{const Vt=Pt.filter(qt=>qt.title.toLowerCase().includes(Le)||dt.toLowerCase().includes(Le));Vt.length>0&&(it[dt]=Vt)}),it},[d,B]),tr=de!==null||y;return s.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#0f0720] flex flex-col",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md border-b border-white/10 px-6 py-3 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h1",{className:"text-lg font-black text-white tracking-tight flex items-center gap-2",children:[s.jsx(ni,{className:"w-5 h-5 text-purple-400"})," Resource Editor"]}),tr&&s.jsxs("span",{className:"text-xs text-gray-400 bg-white/5 px-3 py-1 rounded-lg border border-white/10",children:[y?"New Resource":Y,Z&&s.jsx("span",{className:"ml-2 text-amber-400",children:"*unsaved"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>$t(lAe,"HTML Proctor prompt"),className:"flex items-center gap-1.5 text-[10px] text-cyan-300 bg-cyan-500/10 hover:bg-cyan-500/20 px-3 py-1.5 rounded-lg border border-cyan-500/20 uppercase font-bold tracking-wider transition",title:"Copy AI prompt for generating a Proctor-integrated HTML activity",children:[s.jsx(IR,{className:"w-3 h-3"})," HTML Prompt"]}),s.jsxs("button",{type:"button",onClick:()=>$t(cAe,"JSON lesson prompt"),className:"flex items-center gap-1.5 text-[10px] text-amber-300 bg-amber-500/10 hover:bg-amber-500/20 px-3 py-1.5 rounded-lg border border-amber-500/20 uppercase font-bold tracking-wider transition",title:"Copy AI prompt for converting documents to lesson block JSON",children:[s.jsx(IR,{className:"w-3 h-3"})," JSON Prompt"]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsxs("button",{type:"button",onClick:()=>k(!I),className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(Lu,{className:"w-3 h-3"})," Paste JSON"]}),tr&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>he(!ce),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${ce?"text-amber-300 bg-amber-500/20 border-amber-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(l0,{className:"w-3 h-3"})," Settings"]}),s.jsxs("button",{type:"button",onClick:()=>P(!R),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${R?"text-purple-300 bg-purple-500/20 border-purple-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(o0,{className:"w-3 h-3"})," ",R?"Edit":"Preview"]}),s.jsxs("button",{type:"button",onClick:jt,disabled:L||!Z,className:"flex items-center gap-1.5 text-[10px] text-emerald-300 bg-emerald-500/10 hover:bg-emerald-500/20 disabled:opacity-40 px-3 py-1.5 rounded-lg border border-emerald-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(pE,{className:"w-3 h-3"})," ",L?"Saving...":"Save"]})]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsx("button",{type:"button",onClick:e,className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Kn,{className:"w-5 h-5"})})]})]}),I&&s.jsx("div",{className:"bg-black/60 border-b border-white/10 px-6 py-4 shrink-0",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Paste a JSON array of blocks or ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"})]}),s.jsx("textarea",{value:A,onChange:Le=>{j(Le.target.value),U("")},placeholder:'[{"type":"TEXT","content":"Hello"}]',className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-xs font-mono text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition min-h-[120px]"}),C&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-2",children:C}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Bt,disabled:!A.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Import"}),s.jsx("button",{type:"button",onClick:()=>{k(!1),j(""),U("")},className:"px-4 py-2 text-gray-400 hover:text-white text-xs transition",children:"Cancel"})]})]})}),s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsxs("div",{className:"w-72 border-r border-white/10 bg-black/20 flex flex-col shrink-0",children:[s.jsxs("div",{className:"p-3 border-b border-white/5 space-y-2",children:[s.jsxs("button",{onClick:xt,className:"w-full bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition shadow-lg",children:[s.jsx(cn,{className:"w-4 h-4"})," New Resource"]}),s.jsxs("div",{className:"relative",children:[s.jsx(qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",value:B,onChange:Le=>G(Le.target.value),placeholder:"Search resources...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[Object.entries(tt).sort().map(([Le,it])=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>H(dt=>{const Pt=new Set(dt);return Pt.has(Le)?Pt.delete(Le):Pt.add(Le),Pt}),className:"w-full flex items-center gap-2 px-2 py-1.5 text-left hover:bg-white/5 rounded-lg transition",children:[K.has(Le)?s.jsx(ai,{className:"w-3 h-3 text-gray-500"}):s.jsx(no,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest truncate flex-1",children:Le}),s.jsx("span",{className:"text-[9px] text-gray-600 font-mono",children:it.length})]}),K.has(Le)&&it.map(dt=>{const Pt=dt.lessonBlocks&&dt.lessonBlocks.length>0,Vt=!!dt.contentUrl;return s.jsxs("button",{onClick:()=>He(dt.id),className:`w-full flex items-center gap-2 px-3 py-2 ml-2 rounded-lg text-left transition text-[11px] ${m===dt.id?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"text-gray-400 hover:text-gray-200 hover:bg-white/5"}`,children:[s.jsx(W2,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"truncate flex-1",children:dt.title}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[Pt&&s.jsxs("span",{className:"text-[8px] text-indigo-400 bg-indigo-500/10 px-1 rounded font-mono",children:[dt.lessonBlocks.length,"b"]}),Vt&&s.jsx("span",{className:"text-[8px] text-cyan-400 bg-cyan-500/10 px-1 rounded font-mono",children:"html"}),dt.status===Ua.DRAFT&&s.jsx("span",{className:"text-[8px] text-blue-400 bg-blue-500/10 px-1 rounded font-mono",children:"draft"})]})]},dt.id)})]},Le)),Object.keys(tt).length===0&&s.jsx("div",{className:"text-center py-8 text-gray-600 text-xs",children:"No resources found"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:tr?R?s.jsx("div",{className:"max-w-3xl mx-auto p-8",children:s.jsx(YT,{blocks:N,showSidebar:!0})}):s.jsxs("div",{className:"max-w-3xl mx-auto p-6 pb-32",children:[ce&&s.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-2xl p-5 mb-6 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(l0,{className:"w-3.5 h-3.5"})," Resource Settings"]}),s.jsx("button",{type:"button",onClick:()=>he(!1),className:"text-gray-600 hover:text-gray-300 transition",children:s.jsx(Kn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:Y,onChange:Le=>{ae(Le.target.value),ne(!0)},placeholder:"Resource title...",className:rr})]}),s.jsx(pAe,{value:re,onChange:Le=>{ye(Le),ne(!0)},existingUnits:bt}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Category"}),s.jsx("select",{value:De,onChange:Le=>{Ye(Le.target.value),ne(!0)},className:rr,children:fAe.map(Le=>s.jsx("option",{value:Le,children:Le},Le))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map(Le=>s.jsx("button",{type:"button",onClick:()=>{const it=new Set(X);it.has(Le)?it.size>1&&it.delete(Le):it.add(Le),te(it),we([]),ne(!0)},className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${X.has(Le)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Le},Le))})]}),s.jsx(mg,{availableSections:St,selectedSections:be,onChange:Le=>{we(Le),ne(!0)}}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[s.jsx("label",{className:"block text-[11px] font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-xs file:mr-3 file:py-1.5 file:px-3 file:rounded-full file:border-0 file:bg-purple-600 file:text-white file:text-xs",onChange:async Le=>{var it;if((it=Le.target.files)!=null&&it[0]){Tt(!0);try{const dt=await ke.uploadHtmlResource(Le.target.files[0]);Ue(dt),ne(!0),c.success("File uploaded!")}catch(dt){c.error("Upload failed: "+(dt instanceof Error?dt.message:"Unknown error"))}finally{Tt(!1)}}}}),ct&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(Ei,{className:"w-3.5 h-3.5 animate-spin"})," Uploading..."]}),!ct&&Ne&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(s0,{className:"w-3.5 h-3.5"})," Resource uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{value:rt,onChange:Le=>{et(Le.target.value),ne(!0)},placeholder:"Brief description...",className:`${Ho} h-16`})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Schedule ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:Qe,onChange:Le=>{at(Le.target.value),ne(!0)},className:rr})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Due Date ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:kt,onChange:Le=>{je(Le.target.value),ne(!0)},className:rr})]})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsxs("button",{type:"button",disabled:L,onClick:()=>nt(Ua.DRAFT),className:"flex-1 flex items-center justify-center gap-2 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-3 rounded-xl font-bold text-xs transition",children:[s.jsx(N0,{className:"w-3.5 h-3.5"})," Save Draft"]}),Qe?s.jsx("button",{type:"button",disabled:L,onClick:()=>nt(Ua.ACTIVE,Qe),className:"flex-[2] flex items-center justify-center gap-2 bg-amber-600 hover:bg-amber-500 text-white py-3 rounded-xl font-bold text-xs transition",children:L?s.jsx(Ei,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(MH,{className:"w-3.5 h-3.5"})," Schedule"]})}):s.jsx("button",{type:"button",disabled:L,onClick:()=>nt(Ua.ACTIVE),className:"flex-[2] flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-500 text-white py-3 rounded-xl font-bold text-xs transition",children:L?s.jsx(Ei,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(fE,{className:"w-3.5 h-3.5"})," Deploy"]})})]})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(yV,{onInsert:Le=>Je(0,Le)}),N.map((Le,it)=>{const dt=hAe(Le.type),Pt=E===Le.id;return s.jsxs(ie.Fragment,{children:[s.jsxs("div",{className:`border rounded-2xl transition-all ${Pt?"bg-white/5 border-purple-500/30 shadow-lg shadow-purple-500/5":"bg-white/[0.02] border-white/5 hover:border-white/15"}`,children:[s.jsxs("button",{type:"button",onClick:()=>O(Pt?null:Le.id),className:"w-full flex items-center gap-3 px-4 py-3 text-left",children:[s.jsx("span",{className:"text-gray-500",children:dt==null?void 0:dt.icon}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider w-24 shrink-0",children:dt==null?void 0:dt.label}),s.jsx("span",{className:"text-xs text-gray-400 truncate flex-1",children:dAe(Le)}),s.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",onClick:Vt=>Vt.stopPropagation(),children:[s.jsx("button",{type:"button",onClick:()=>Nt(it,-1),disabled:it===0,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(Nx,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>Nt(it,1),disabled:it===N.length-1,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(ai,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>dr(it),className:"p-1 text-gray-600 hover:text-blue-400 transition",children:s.jsx(nf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>Et(it),className:"p-1 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]}),s.jsx(no,{className:`w-4 h-4 text-gray-600 transition-transform ${Pt?"rotate-90":""}`})]}),Pt&&s.jsx("div",{className:"px-4 pb-4 border-t border-white/5 pt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:s.jsx(gAe,{block:Le,allBlocks:N,onUpdate:Vt=>{const qt=[...N];qt[it]=Vt,Ge(qt)}})})]}),s.jsx(yV,{onInsert:Vt=>Je(it+1,Vt)})]},Le.id)}),N.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-600",children:[s.jsxs("p",{className:"text-sm mb-2",children:["No blocks yet. Click the ",s.jsx(cn,{className:"w-4 h-4 inline"})," button above to add your first block."]}),s.jsx("p",{className:"text-xs",children:"Or paste JSON to import blocks in bulk."})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-8",children:[s.jsx(ni,{className:"w-16 h-16 text-gray-700 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-400 mb-2",children:"Select or Create a Resource"}),s.jsx("p",{className:"text-sm text-gray-600 max-w-md mb-6",children:"Choose a resource from the sidebar to edit, or create a new one."}),s.jsxs("button",{onClick:xt,className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl font-bold flex items-center gap-2 transition shadow-xl",children:[s.jsx(cn,{className:"w-5 h-5"})," New Resource"]})]})})]})]})},rr="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",Ho="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",pr="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",gAe=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Enter text content...",className:`${Ho} min-h-[80px]`,rows:3});case"SECTION_HEADER":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),placeholder:"",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),placeholder:"Section title...",className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:n=>r({...t,subtitle:n.target.value}),placeholder:"Optional subtitle...",className:rr})]})]});case"IMAGE":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://...",className:rr})]}),t.url&&s.jsx("img",{src:t.url,alt:t.alt||"",className:"max-h-32 rounded-lg border border-white/10 object-contain",onError:n=>n.currentTarget.style.display="none"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:n=>r({...t,alt:n.target.value}),placeholder:"Describe...",className:rr})]})]})]});case"VIDEO":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://youtube.com/watch?v=...",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:rr})]})]});case"OBJECTIVES":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(cs,{className:"w-4 h-4 text-emerald-400 mt-2 shrink-0"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Objective ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add"]})]})}case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:n=>r({...t,content:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:n=>r({...t,buttonLabel:n.target.value}),className:rr})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:n=>r({...t,openInNewTab:n.target.checked})})," New tab"]})})]})]});case"EMBED":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:n=>r({...t,height:parseInt(n.target.value)||500}),className:rr})]})]})]});case"INFO_BOX":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(n=>s.jsx("button",{type:"button",onClick:()=>r({...t,variant:n}),className:`px-3 py-1 rounded-lg border text-xs font-bold capitalize transition ${t.variant===n?n==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":n==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400"}`,children:n},n))}),s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Content...",className:Ho,rows:2})]});case"MC":{const n=t.options||["",""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Ho,rows:2}),n.map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>r({...t,correctAnswer:i}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${t.correctAnswer===i?"border-green-500 bg-green-500":"border-gray-600"}`,children:t.correctAnswer===i&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,options:c})},placeholder:`Option ${String.fromCharCode(65+i)}`,className:`flex-1 ${rr}`}),n.length>2&&s.jsx("button",{type:"button",onClick:()=>{const o=n.filter((c,d)=>d!==i);r({...t,options:o,correctAnswer:t.correctAnswer===i?0:(t.correctAnswer||0)>i?(t.correctAnswer||0)-1:t.correctAnswer})},className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),n.length<6&&s.jsxs("button",{type:"button",onClick:()=>r({...t,options:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Option"]})]})}case"SHORT_ANSWER":{const n=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Answer ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Answer"]})]})}case"VOCABULARY":return s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:n=>r({...t,term:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:n=>r({...t,definition:n.target.value}),className:rr})]})]});case"VOCAB_LIST":{const n=t.terms||[{term:"",definition:""}];return s.jsxs("div",{className:"space-y-2",children:[n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.term,onChange:o=>{const c=[...n];c[i]={...c[i],term:o.target.value},r({...t,terms:c})},placeholder:"Term",className:`flex-1 ${rr}`}),s.jsx("input",{type:"text",value:a.definition,onChange:o=>{const c=[...n];c[i]={...c[i],definition:o.target.value},r({...t,terms:c})},placeholder:"Definition",className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,terms:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,terms:[...n,{term:"",definition:""}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Term"]})]})}case"CHECKLIST":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Checklist title...",className:Ho,rows:1}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0 mt-1.5"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"ACTIVITY":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:n=>r({...t,instructions:n.target.value}),className:`${Ho} min-h-[60px]`,rows:2})]})]});case"SORTING":{const n=t.sortItems||[{text:"",correct:"left"}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:a=>r({...t,instructions:a.target.value}),className:Ho,rows:1})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:a=>r({...t,leftLabel:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:a=>r({...t,rightLabel:a.target.value}),className:rr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.text,onChange:o=>{const c=[...n];c[i]={...c[i],text:o.target.value},r({...t,sortItems:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${rr}`}),s.jsxs("select",{value:a.correct,onChange:o=>{const c=[...n];c[i]={...c[i],correct:o.target.value},r({...t,sortItems:c})},className:`w-28 ${rr}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,sortItems:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,sortItems:[...n,{text:"",correct:"left"}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"DATA_TABLE":{const n=t.columns||[{key:"col1",label:"Column 1",editable:!0}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:a=>r({...t,trials:parseInt(a.target.value)||3}),className:rr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.label,onChange:o=>{const c=[...n];c[i]={...c[i],label:o.target.value},r({...t,columns:c})},placeholder:"Label",className:`flex-1 ${rr}`}),s.jsx("input",{type:"text",value:a.unit||"",onChange:o=>{const c=[...n];c[i]={...c[i],unit:o.target.value},r({...t,columns:c})},placeholder:"Unit",className:`w-20 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,columns:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,columns:[...n,{key:`col${n.length+1}`,label:"",editable:!0}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Column"]})]})}case"BAR_CHART":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:n=>r({...t,barCount:parseInt(n.target.value)||3}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:n=>r({...t,height:parseInt(n.target.value)||300}),className:rr})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Initial"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:n=>r({...t,initialLabel:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Delta"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:n=>r({...t,deltaLabel:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Final"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:n=>r({...t,finalLabel:n.target.value}),className:rr})]})]})]});case"RANKING":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Ranking question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Items (in correct order)"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2 w-5 text-right",children:[i+1,"."]}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"LINKED":{const n=e.filter(i=>i.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(i.type)),a=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:i=>r({...t,linkedBlockId:i.target.value}),className:rr,children:[s.jsx("option",{value:"",children:"Select..."}),n.map(i=>s.jsxs("option",{value:i.id,children:[i.type,": ",(i.content||"").slice(0,40)]},i.id))]})]}),s.jsx("textarea",{value:t.content,onChange:i=>r({...t,content:i.target.value}),placeholder:"Follow-up question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),a.map((i,o)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:c=>{const d=[...a];d[o]=c.target.value,r({...t,acceptedAnswers:d})},className:`flex-1 ${rr}`}),a.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:a.filter((c,d)=>d!==o)}),className:"p-1 text-red-400",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},o)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...a,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Answer"]})]})}default:return s.jsxs("div",{className:"text-xs text-gray-500 italic",children:["Unknown block type: ",t.type]})}},xAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=T.useState(""),[i,o]=T.useState(!1),[c,d]=T.useState(null),[h,p]=T.useState(null),m=y=>{const S=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(S.length>4?S.slice(0,4)+"-"+S.slice(4):S),d(null)},x=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const y=await ke.redeemEnrollmentCode(n,e);y.success?p(`Enrolled in ${y.classType}! Refreshing...`):d(y.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(Q2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(hg,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:y=>m(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!i&&x()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:x,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(Ei,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(s0,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",KH," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},vV={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},yAe=()=>{var Ne,Ue;const[t,e]=T.useState(null),[r,n]=T.useState("Dashboard"),[a,i]=T.useState([]),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[x,y]=T.useState([]),[S,N]=T.useState(null),[w,E]=T.useState("STUDENT"),[O,R]=T.useState("WORK"),[P,I]=T.useState(!1),[k,A]=T.useState(!1),[j,C]=T.useState(!0),[U,L]=T.useState(!1),[$,B]=T.useState(new Set),G=T.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),K=T.useRef(new Set);T.useEffect(()=>{if(!(t!=null&&t.id)||t.role===za.ADMIN)return;const X=ke.subscribeToMyGroups(t.id,te=>{K.current=new Set(te.map(be=>be.id))});return()=>X()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=T.useCallback(X=>{const te=Date.now();G.current[X]=te,localStorage.setItem("chatChannelLastSeen",JSON.stringify(G.current)),B(be=>{if(!be.has(X))return be;const we=new Set(be);return we.delete(X),we})},[]);T.useEffect(()=>{const X=ke.subscribeToRecentMessages(te=>{const be=new Set,we=G.current,Qe=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(at=>`class_${at.replace(/\s+/g,"_").toLowerCase()}`));for(const at of te){if(!at.channelId||at.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==za.ADMIN){if(at.channelId.startsWith("group_")){const ct=at.channelId.slice(6);if(!K.current.has(ct))continue}else if(at.channelId.startsWith("class_")&&!Qe.has(at.channelId))continue}const kt=new Date(at.timestamp).getTime(),je=we[at.channelId]||0;kt>je&&be.add(at.channelId)}B(be)});return()=>X()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const Z=T.useMemo(()=>{const X=new Map;return o.forEach(te=>{const be=X.get(te.userId)||[];be.push(te),X.set(te.userId,be)}),d.map(te=>{const be=X.get(te.id)||[],we=be.length,Qe=Math.round(be.reduce((at,kt)=>{var je;return at+(((je=kt.metrics)==null?void 0:je.engagementTime)||0)},0)/60);return{...te,stats:{problemsCompleted:we,avgScore:0,rawAccuracy:0,totalTime:Qe}}})},[d,o]),ne=T.useMemo(()=>{const X=new Set;return d.forEach(te=>{te.section&&X.add(te.section)}),Array.from(X).sort()},[d]),ce=T.useMemo(()=>a.find(X=>X.id===S)||null,[a,S]);T.useEffect(()=>{if(I(!1),A(!1),!S)return;const X=pa(ut(Me,"question_banks",S)).then(be=>{be.exists()&&(be.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),te=pa(ut(Me,"reading_materials",S)).then(be=>{be.exists()&&A(!0)}).catch(()=>{});Promise.all([X,te]).then(()=>{})},[S]),T.useEffect(()=>{let X=null;const te=yte(qT,async be=>{be?(await he(be),X=Ur(ut(Me,"users",be.uid),we=>{we.exists()&&e(Qe=>({...Qe||{},...we.data(),id:be.uid}))})):(e(null),X&&X(),C(!1))});return()=>{te(),X&&X()}},[]),T.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===za.ADMIN)){const X=ke.subscribeToAssignments(i),te=ke.subscribeToClassConfigs(y),be=[X,te];return t.role===za.ADMIN?(be.push(ke.subscribeToSubmissions(c)),be.push(ke.subscribeToUsers(h)),be.push(ke.subscribeToWhitelist(m))):be.push(ke.subscribeToUserSubmissions(t.id,c)),()=>be.forEach(we=>we())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),T.useEffect(()=>{(t==null?void 0:t.role)===za.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),T.useEffect(()=>{var X;uce(((X=t==null?void 0:t.settings)==null?void 0:X.soundEffects)!==!1)},[(Ne=t==null?void 0:t.settings)==null?void 0:Ne.soundEffects]),oce((t==null?void 0:t.id)||null,((Ue=t==null?void 0:t.settings)==null?void 0:Ue.pushNotifications)===!0);const he=async X=>{try{const te=ut(Me,"users",X.uid),be=await pa(te),we=await pa(ut(Me,"allowed_emails",X.email||"")),at=(await X.getIdTokenResult()).claims.admin===!0||X.email===ece,kt=we.exists()||at,je=we.exists()?we.data():null,ct=(je==null?void 0:je.classType)||jr.UNCATEGORIZED,Tt=(je==null?void 0:je.classTypes)||(ct!==jr.UNCATEGORIZED?[ct]:[]);if(be.exists()){const St=be.data(),bt={lastLoginAt:new Date().toISOString(),isWhitelisted:kt};if(at&&(bt.role="ADMIN"),!kt&&!at&&(bt.enrolledClasses=[]),kt&&Tt.length>0){const de=St.enrolledClasses||[],He=Array.from(new Set([...de,...Tt]));He.length!==de.length&&(bt.enrolledClasses=He,(!St.classType||St.classType===jr.UNCATEGORIZED)&&(bt.classType=Tt[0]))}await ur(te,bt)}else{const St={email:X.email,name:X.displayName||"Student",avatarUrl:X.photoURL||"",role:at?"ADMIN":"STUDENT",classType:ct,enrolledClasses:kt?Tt:[],isWhitelisted:kt,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Zn(te,St)}}catch(te){console.error(te)}finally{C(!1)}},Y=async()=>{await vte(qT),e(null),N(null)},ae=X=>{R("WORK"),N(X)},re=T.useRef(ce),ye=T.useRef(t);T.useEffect(()=>{re.current=ce},[ce]),T.useEffect(()=>{ye.current=t},[t]);const De=async X=>{const te=ye.current,be=re.current;if(!(!te||!be||te.role===za.ADMIN)&&!(X.engagementTime<10))try{await ke.submitEngagement(te.id,te.name,be.id,be.title,X,be.classType)}catch(we){console.error("Engagement submission failed:",we)}},Ye=T.useMemo(()=>{const X={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const te=x.find(be=>be.className===t.classType);if(te)return te.features}return X},[t==null?void 0:t.role,t==null?void 0:t.classType,x]);if(j)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(m0e,{});if(!t.isWhitelisted&&t.role!==za.ADMIN)return s.jsx(xAe,{userName:t.name,userId:t.id,onLogout:Y});const rt=t.role===za.ADMIN||Ye.physicsTools,et=t.role===za.ADMIN||Ye.communications;return s.jsx(Qje,{children:s.jsx(g0e,{children:s.jsx(nce,{children:s.jsxs(s.Fragment,{children:[s.jsx(ace,{}),rt&&s.jsx(X0e,{onToggleChat:et?()=>L(!U):void 0,hasUnreadChat:$.size>0}),et&&s.jsx(Z0e,{user:t,isOpen:U,onClose:()=>L(!1),assignments:a,classConfigs:x,unreadChannels:$,onMarkChannelRead:H,onOpenResource:X=>{ae(X)}}),s.jsx(fce,{user:t,onLogout:Y,activeTab:r,setActiveTab:n,children:ce?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[ce.title,t.role===za.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>R("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${O==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),P&&s.jsxs("button",{onClick:()=>R("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${O==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Oo,{className:"w-3.5 h-3.5"})," Review"]}),k&&s.jsxs("button",{onClick:()=>R("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${O==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(ni,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{N(null),R("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(hle,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[O==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(p0e,{onComplete:De,contentUrl:ce.contentUrl,htmlContent:ce.htmlContent,userId:t.id,assignmentId:ce.id,classType:ce.classType,lessonBlocks:ce.lessonBlocks})}),w==="ADMIN"&&t.role===za.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(l0,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(ls,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(X=>X.assignmentId===ce.id&&!X.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>L(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),O==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Yje,{assignment:ce})}),O==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(rAe,{assignment:ce,onComplete:De})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===za.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(k0e,{users:Z,assignments:a,submissions:o}),r==="User Management"&&s.jsx(C0e,{users:Z,whitelistedEmails:p,classConfigs:x,onWhitelist:async(X,te)=>ke.addToWhitelist(X,te)}),r==="Admin Panel"&&s.jsx(P0e,{assignments:a,submissions:o,users:d,onCreateAssignment:async X=>{X.title&&await ke.addAssignment(X)},classConfigs:x,availableSections:ne,onPreviewAssignment:X=>{E("STUDENT"),ae(X)},onNavigate:n}),r==="Student Groups"&&s.jsx(K0e,{students:Z.filter(X=>X.role==="STUDENT"),availableSections:ne,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(sAe,{classConfigs:x,availableSections:ne}),r==="Resource Editor"&&s.jsx(mAe,{assignments:a,onClose:()=>n("Admin Panel"),classConfigs:x,users:d,availableSections:ne,onCreateAssignment:async X=>{X.title&&await ke.addAssignment(X)}}),r.startsWith("XP Command:")&&s.jsx(W0e,{users:d,initialTab:r.split(":")[1]})]}),t.role===za.STUDENT&&s.jsxs(s.Fragment,{children:[r in vV&&s.jsx(fje,{user:t,assignments:a,submissions:o,enabledFeatures:Ye,onNavigate:n,onStartAssignment:ae,studentTab:vV[r]}),r==="Forensics"&&Ye.evidenceLocker&&s.jsx(Vje,{user:t}),r==="Physics Lab"&&Ye.physicsLab&&s.jsx(Fje,{user:t}),r==="Leaderboard"&&Ye.leaderboard&&s.jsx(Kje,{user:t})]})]},r)})}),s.jsx(nAe,{user:t}),t.role===za.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(iAe,{userId:t.id,compact:!0})})]})})})})},dY=document.getElementById("root");if(!dY)throw new Error("Could not find root element to mount to");const vAe=YJ.createRoot(dY);vAe.render(s.jsx(ie.StrictMode,{children:s.jsx(yAe,{})}));
