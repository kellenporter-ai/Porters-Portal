var aZ=Object.defineProperty;var iZ=(t,e,r)=>e in t?aZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var HC=(t,e,r)=>iZ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as sZ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A5={exports:{}},Rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function oZ(){if(GC)return Rp;GC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:s,ref:a!==void 0?a:null,props:i}}return Rp.Fragment=e,Rp.jsx=r,Rp.jsxs=r,Rp}var WC;function lZ(){return WC||(WC=1,A5.exports=oZ()),A5.exports}var o=lZ(),N5={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function cZ(){if(KC)return ir;KC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=y&&K[y]||K["@@iterator"],typeof K=="function"?K:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function E(K,te,re){this.props=K,this.context=te,this.refs=w,this.updater=re||T}E.prototype.isReactComponent={},E.prototype.setState=function(K,te){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,te,"setState")},E.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function I(){}I.prototype=E.prototype;function R(K,te,re){this.props=K,this.context=te,this.refs=w,this.updater=re||T}var L=R.prototype=new I;L.constructor=R,S(L,E.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function M(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function j(K,te,re){var Ne=re.ref;return{$$typeof:t,type:K,key:te,ref:Ne!==void 0?Ne:null,props:re}}function z(K,te){return j(K.type,te,K.props)}function B(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function F(K){var te={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(re){return te[re]})}var U=/\/+/g;function X(K,te){return typeof K=="object"&&K!==null&&K.key!=null?F(""+K.key):te.toString(36)}function W(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(M,M):(K.status="pending",K.then(function(te){K.status==="pending"&&(K.status="fulfilled",K.value=te)},function(te){K.status==="pending"&&(K.status="rejected",K.reason=te)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function H(K,te,re,Ne,ae){var xe=typeof K;(xe==="undefined"||xe==="boolean")&&(K=null);var ye=!1;if(K===null)ye=!0;else switch(xe){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(K.$$typeof){case t:case e:ye=!0;break;case p:return ye=K._init,H(ye(K._payload),te,re,Ne,ae)}}if(ye)return ae=ae(K),ye=Ne===""?"."+X(K,0):Ne,O(ae)?(re="",ye!=null&&(re=ye.replace(U,"$&/")+"/"),H(ae,te,re,"",function(Me){return Me})):ae!=null&&(B(ae)&&(ae=z(ae,re+(ae.key==null||K&&K.key===ae.key?"":(""+ae.key).replace(U,"$&/")+"/")+ye)),te.push(ae)),1;ye=0;var Ue=Ne===""?".":Ne+":";if(O(K))for(var ee=0;ee<K.length;ee++)Ne=K[ee],xe=Ue+X(Ne,ee),ye+=H(Ne,te,re,xe,ae);else if(ee=x(K),typeof ee=="function")for(K=ee.call(K),ee=0;!(Ne=K.next()).done;)Ne=Ne.value,xe=Ue+X(Ne,ee++),ye+=H(Ne,te,re,xe,ae);else if(xe==="object"){if(typeof K.then=="function")return H(W(K),te,re,Ne,ae);throw te=String(K),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Z(K,te,re){if(K==null)return K;var Ne=[],ae=0;return H(K,Ne,"","",function(xe){return te.call(re,xe,ae++)}),Ne}function ie(K){if(K._status===-1){var te=K._result;te=te(),te.then(function(re){(K._status===0||K._status===-1)&&(K._status=1,K._result=re)},function(re){(K._status===0||K._status===-1)&&(K._status=2,K._result=re)}),K._status===-1&&(K._status=0,K._result=te)}if(K._status===1)return K._result.default;throw K._result}var fe=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},me={map:Z,forEach:function(K,te,re){Z(K,function(){te.apply(this,arguments)},re)},count:function(K){var te=0;return Z(K,function(){te++}),te},toArray:function(K){return Z(K,function(te){return te})||[]},only:function(K){if(!B(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return ir.Activity=m,ir.Children=me,ir.Component=E,ir.Fragment=r,ir.Profiler=a,ir.PureComponent=R,ir.StrictMode=n,ir.Suspense=d,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ir.__COMPILER_RUNTIME={__proto__:null,c:function(K){return N.H.useMemoCache(K)}},ir.cache=function(K){return function(){return K.apply(null,arguments)}},ir.cacheSignal=function(){return null},ir.cloneElement=function(K,te,re){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Ne=S({},K.props),ae=K.key;if(te!=null)for(xe in te.key!==void 0&&(ae=""+te.key),te)!A.call(te,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&te.ref===void 0||(Ne[xe]=te[xe]);var xe=arguments.length-2;if(xe===1)Ne.children=re;else if(1<xe){for(var ye=Array(xe),Ue=0;Ue<xe;Ue++)ye[Ue]=arguments[Ue+2];Ne.children=ye}return j(K.type,ae,Ne)},ir.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},ir.createElement=function(K,te,re){var Ne,ae={},xe=null;if(te!=null)for(Ne in te.key!==void 0&&(xe=""+te.key),te)A.call(te,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(ae[Ne]=te[Ne]);var ye=arguments.length-2;if(ye===1)ae.children=re;else if(1<ye){for(var Ue=Array(ye),ee=0;ee<ye;ee++)Ue[ee]=arguments[ee+2];ae.children=Ue}if(K&&K.defaultProps)for(Ne in ye=K.defaultProps,ye)ae[Ne]===void 0&&(ae[Ne]=ye[Ne]);return j(K,xe,ae)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(K){return{$$typeof:c,render:K}},ir.isValidElement=B,ir.lazy=function(K){return{$$typeof:p,_payload:{_status:-1,_result:K},_init:ie}},ir.memo=function(K,te){return{$$typeof:h,type:K,compare:te===void 0?null:te}},ir.startTransition=function(K){var te=N.T,re={};N.T=re;try{var Ne=K(),ae=N.S;ae!==null&&ae(re,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(M,fe)}catch(xe){fe(xe)}finally{te!==null&&re.types!==null&&(te.types=re.types),N.T=te}},ir.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ir.use=function(K){return N.H.use(K)},ir.useActionState=function(K,te,re){return N.H.useActionState(K,te,re)},ir.useCallback=function(K,te){return N.H.useCallback(K,te)},ir.useContext=function(K){return N.H.useContext(K)},ir.useDebugValue=function(){},ir.useDeferredValue=function(K,te){return N.H.useDeferredValue(K,te)},ir.useEffect=function(K,te){return N.H.useEffect(K,te)},ir.useEffectEvent=function(K){return N.H.useEffectEvent(K)},ir.useId=function(){return N.H.useId()},ir.useImperativeHandle=function(K,te,re){return N.H.useImperativeHandle(K,te,re)},ir.useInsertionEffect=function(K,te){return N.H.useInsertionEffect(K,te)},ir.useLayoutEffect=function(K,te){return N.H.useLayoutEffect(K,te)},ir.useMemo=function(K,te){return N.H.useMemo(K,te)},ir.useOptimistic=function(K,te){return N.H.useOptimistic(K,te)},ir.useReducer=function(K,te,re){return N.H.useReducer(K,te,re)},ir.useRef=function(K){return N.H.useRef(K)},ir.useState=function(K){return N.H.useState(K)},ir.useSyncExternalStore=function(K,te,re){return N.H.useSyncExternalStore(K,te,re)},ir.useTransition=function(){return N.H.useTransition()},ir.version="19.2.4",ir}var QC;function p8(){return QC||(QC=1,N5.exports=cZ()),N5.exports}var k=p8();const se=Kr(k);var E5={exports:{}},Mp={},j5={exports:{}},k5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC;function uZ(){return XC||(XC=1,(function(t){function e(H,Z){var ie=H.length;H.push(Z);e:for(;0<ie;){var fe=ie-1>>>1,me=H[fe];if(0<a(me,Z))H[fe]=Z,H[ie]=me,ie=fe;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],ie=H.pop();if(ie!==Z){H[0]=ie;e:for(var fe=0,me=H.length,K=me>>>1;fe<K;){var te=2*(fe+1)-1,re=H[te],Ne=te+1,ae=H[Ne];if(0>a(re,ie))Ne<me&&0>a(ae,re)?(H[fe]=ae,H[Ne]=ie,fe=Ne):(H[fe]=re,H[te]=ie,fe=te);else if(Ne<me&&0>a(ae,ie))H[fe]=ae,H[Ne]=ie,fe=Ne;else break e}}return Z}function a(H,Z){var ie=H.sortIndex-Z.sortIndex;return ie!==0?ie:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],h=[],p=1,m=null,y=3,x=!1,T=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var Z=r(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=H)n(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=r(h)}}function O(H){if(S=!1,L(H),!T)if(r(d)!==null)T=!0,M||(M=!0,F());else{var Z=r(h);Z!==null&&W(O,Z.startTime-H)}}var M=!1,N=-1,A=5,j=-1;function z(){return w?!0:!(t.unstable_now()-j<A)}function B(){if(w=!1,M){var H=t.unstable_now();j=H;var Z=!0;try{e:{T=!1,S&&(S=!1,I(N),N=-1),x=!0;var ie=y;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&z());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,y=m.priorityLevel;var me=fe(m.expirationTime<=H);if(H=t.unstable_now(),typeof me=="function"){m.callback=me,L(H),Z=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)Z=!0;else{var K=r(h);K!==null&&W(O,K.startTime-H),Z=!1}}break e}finally{m=null,y=ie,x=!1}Z=void 0}}finally{Z?F():M=!1}}}var F;if(typeof R=="function")F=function(){R(B)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=B,F=function(){X.postMessage(null)}}else F=function(){E(B,0)};function W(H,Z){N=E(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var ie=y;y=Z;try{return H()}finally{y=ie}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=y;y=H;try{return Z()}finally{y=ie}},t.unstable_scheduleCallback=function(H,Z,ie){var fe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ie+me,H={id:p++,callback:Z,priorityLevel:H,startTime:ie,expirationTime:me,sortIndex:-1},ie>fe?(H.sortIndex=ie,e(h,H),r(d)===null&&H===r(h)&&(S?(I(N),N=-1):S=!0,W(O,ie-fe))):(H.sortIndex=me,e(d,H),T||x||(T=!0,M||(M=!0,F()))),H},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(H){var Z=y;return function(){var ie=y;y=Z;try{return H.apply(this,arguments)}finally{y=ie}}}})(k5)),k5}var YC;function dZ(){return YC||(YC=1,j5.exports=uZ()),j5.exports}var C5={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function hZ(){if(ZC)return xi;ZC=1;var t=p8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},xi.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},xi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},xi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},xi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},xi.requestFormReset=function(d){n.d.r(d)},xi.unstable_batchedUpdates=function(d,h){return d(h)},xi.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},xi.useFormStatus=function(){return s.H.useHostTransitionStatus()},xi.version="19.2.4",xi}var JC;function Dz(){if(JC)return C5.exports;JC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),C5.exports=hZ(),C5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO;function fZ(){if(eO)return Mp;eO=1;var t=dZ(),e=p8(),r=Dz();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var $=!1,Q=b.child;Q;){if(Q===f){$=!0,f=b,g=_;break}if(Q===g){$=!0,g=b,f=_;break}Q=Q.sibling}if(!$){for(Q=_.child;Q;){if(Q===f){$=!0,f=_,g=b;break}if(Q===g){$=!0,g=_,f=b;break}Q=Q.sibling}if(!$)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var U=Symbol.for("react.client.reference");function X(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===U?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList";case j:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case T:return"Portal";case R:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return u=l.displayName||null,u!==null?u:X(l.type)||"Memo";case A:u=l._payload,l=l._init;try{return X(l(u))}catch{}}return null}var W=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},fe=[],me=-1;function K(l){return{current:l}}function te(l){0>me||(l.current=fe[me],fe[me]=null,me--)}function re(l,u){me++,fe[me]=l.current,l.current=u}var Ne=K(null),ae=K(null),xe=K(null),ye=K(null);function Ue(l,u){switch(re(xe,u),re(ae,l),re(Ne,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?pC(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=pC(u),l=mC(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}te(Ne),re(Ne,l)}function ee(){te(Ne),te(ae),te(xe)}function Me(l){l.memoizedState!==null&&re(ye,l);var u=Ne.current,f=mC(u,l.type);u!==f&&(re(ae,l),re(Ne,f))}function ne(l){ae.current===l&&(te(Ne),te(ae)),ye.current===l&&(te(ye),kp._currentValue=ie)}var pe,Xe;function Qe(l){if(pe===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);pe=u&&u[1]||"",Xe=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+l+Xe}var St=!1;function ct(l,u){if(!l||St)return"";St=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Be){var Re=Be}Reflect.construct(l,[],Ke)}else{try{Ke.call()}catch(Be){Re=Be}l.call(Ke.prototype)}}else{try{throw Error()}catch(Be){Re=Be}(Ke=l())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Be){if(Be&&Re&&typeof Be.stack=="string")return[Be.stack,Re.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),$=_[0],Q=_[1];if($&&Q){var ue=$.split(`
`),Oe=Q.split(`
`);for(b=g=0;g<ue.length&&!ue[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Oe.length&&!Oe[b].includes("DetermineComponentFrameRoot");)b++;if(g===ue.length||b===Oe.length)for(g=ue.length-1,b=Oe.length-1;1<=g&&0<=b&&ue[g]!==Oe[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ue[g]!==Oe[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ue[g]!==Oe[b]){var qe=`
`+ue[g].replace(" at new "," at ");return l.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",l.displayName)),qe}while(1<=g&&0<=b);break}}}finally{St=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Qe(f):""}function _t(l,u){switch(l.tag){case 26:case 27:case 5:return Qe(l.type);case 16:return Qe("Lazy");case 13:return l.child!==u&&u!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return ct(l.type,!1);case 11:return ct(l.type.render,!1);case 1:return ct(l.type,!0);case 31:return Qe("Activity");default:return""}}function Ee(l){try{var u="",f=null;do u+=_t(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ve=Object.prototype.hasOwnProperty,nt=t.unstable_scheduleCallback,mt=t.unstable_cancelCallback,Je=t.unstable_shouldYield,de=t.unstable_requestPaint,Ye=t.unstable_now,At=t.unstable_getCurrentPriorityLevel,xt=t.unstable_ImmediatePriority,gt=t.unstable_UserBlockingPriority,Vt=t.unstable_NormalPriority,cr=t.unstable_LowPriority,Hr=t.unstable_IdlePriority,Pr=t.log,we=t.unstable_setDisableYieldValue,ot=null,bt=null;function Ct(l){if(typeof Pr=="function"&&we(l),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(ot,l)}catch{}}var Lt=Math.clz32?Math.clz32:wn,et=Math.log,mr=Math.LN2;function wn(l){return l>>>=0,l===0?32:31-(et(l)/mr|0)|0}var Dn=256,Cr=262144,ur=4194304;function Bt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function it(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,$=l.pingedLanes;l=l.warmLanes;var Q=g&134217727;return Q!==0?(g=Q&~_,g!==0?b=Bt(g):($&=Q,$!==0?b=Bt($):f||(f=Q&~l,f!==0&&(b=Bt(f))))):(Q=g&~_,Q!==0?b=Bt(Q):$!==0?b=Bt($):f||(f=g&~l,f!==0&&(b=Bt(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Kt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function br(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var l=ur;return ur<<=1,(ur&62914560)===0&&(ur=4194304),l}function Or(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function kn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function er(l,u,f,g,b,_){var $=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Q=l.entanglements,ue=l.expirationTimes,Oe=l.hiddenUpdates;for(f=$&~f;0<f;){var qe=31-Lt(f),Ke=1<<qe;Q[qe]=0,ue[qe]=-1;var Re=Oe[qe];if(Re!==null)for(Oe[qe]=null,qe=0;qe<Re.length;qe++){var Be=Re[qe];Be!==null&&(Be.lane&=-536870913)}f&=~Ke}g!==0&&ga(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~($&~u))}function ga(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Lt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function cn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-Lt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function Cn(l,u){var f=u&-u;return f=(f&42)!==0?1:ti(f),(f&(l.suspendedLanes|u))!==0?0:f}function ti(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ar(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function un(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:BC(l.type))}function ri(l,u){var f=Z.p;try{return Z.p=l,u()}finally{Z.p=f}}var Kn=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Kn,dn="__reactProps$"+Kn,Sn="__reactContainer$"+Kn,ni="__reactEvents$"+Kn,Fa="__reactListeners$"+Kn,Ai="__reactHandles$"+Kn,os="__reactResources$"+Kn,gi="__reactMarker$"+Kn;function Nt(l){delete l[Yr],delete l[dn],delete l[ni],delete l[Fa],delete l[Ai]}function he(l){var u=l[Yr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Sn]||f[Yr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=SC(l);l!==null;){if(f=l[Yr])return f;l=SC(l)}return u}l=f,f=l.parentNode}return null}function Ze(l){if(l=l[Yr]||l[Sn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ut(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Xt(l){var u=l[os];return u||(u=l[os]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function dr(l){l[gi]=!0}var rn=new Set,Gr={};function hn(l,u){Ir(l,u),Ir(l+"Capture",u)}function Ir(l,u){for(Gr[l]=u,l=0;l<u.length;l++)rn.add(u[l])}var Ms=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ls={},so={};function ll(l){return Ve.call(so,l)?!0:Ve.call(ls,l)?!1:Ms.test(l)?so[l]=!0:(ls[l]=!0,!1)}function cs(l,u,f){if(ll(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function us(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function ja(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function Ln(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Se(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function($){f=""+$,_.call(this,$)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function($){f=""+$},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Ae(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=Se(l,u,""+l[u])}}function je(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function ft(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Rt=/[\n"\\]/g;function jt(l){return l.replace(Rt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yt(l,u,f,g,b,_,$,Q){l.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.type=$:l.removeAttribute("type"),u!=null?$==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Ln(u)):l.value!==""+Ln(u)&&(l.value=""+Ln(u)):$!=="submit"&&$!=="reset"||l.removeAttribute("value"),u!=null?Zr(l,$,Ln(u)):f!=null?Zr(l,$,Ln(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.name=""+Ln(Q):l.removeAttribute("name")}function Sr(l,u,f,g,b,_,$,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Ae(l);return}f=f!=null?""+Ln(f):"",u=u!=null?""+Ln(u):f,Q||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Q?l.checked:!!g,l.defaultChecked=!!g,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.name=$),Ae(l)}function Zr(l,u,f){u==="number"&&ft(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function oe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+Ln(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function be(l,u,f){if(u!=null&&(u=""+Ln(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+Ln(f):""}function ze(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(W(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Ln(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Ae(l)}function De(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var dt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rr(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||dt.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Qt(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&rr(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&rr(l,_,u[_])}function _n(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ka=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tn(l){return Ps.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function fn(){}var Co=null;function Rr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ds=null,yi=null;function C1(l){var u=Ze(l);if(u&&(l=u.stateNode)){var f=l[dn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+jt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[dn]||null;if(!b)throw Error(n(90));Yt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&je(g)}break e;case"textarea":be(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&oe(l,!!f.multiple,u,!1)}}}var Hf=!1;function O1(l,u,f){if(Hf)return l(u,f);Hf=!0;try{var g=l(u);return g}finally{if(Hf=!1,(ds!==null||yi!==null)&&(Ey(),ds&&(u=ds,l=yi,yi=ds=null,C1(u),l)))for(u=0;u<l.length;u++)C1(l[u])}}function zi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[dn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=!1;if(oo)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Gf=!1}var hs=null,x0=null,Io=null;function mc(){if(Io)return Io;var l,u=x0,f=u.length,g,b="value"in hs?hs.value:hs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var $=f-l;for(g=1;g<=$&&u[f-g]===b[_-g];g++);return Io=b.slice(l,1<g?1-g:void 0)}function Uu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function gc(){return!0}function Bn(){return!1}function vi(l){function u(f,g,b,_,$){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=$,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(f=l[Q],this[Q]=f?f(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?gc:Bn,this.isPropagationStopped=Bn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),u}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=vi(cl),yc=m({},cl,{view:0,detail:0}),I1=vi(yc),vc,b0,Ni,Vu=m({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ni&&(Ni&&l.type==="mousemove"?(vc=l.screenX-Ni.screenX,b0=l.screenY-Ni.screenY):b0=vc=0,Ni=l),vc)},movementY:function(l){return"movementY"in l?l.movementY:b0}}),R1=vi(Vu),Fu=m({},Vu,{dataTransfer:0}),M1=vi(Fu),Wf=m({},yc,{relatedTarget:0}),xc=vi(Wf),P1=m({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),w0=vi(P1),Ow=m({},cl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),D1=vi(Ow),qu=m({},cl,{data:0}),Kf=vi(qu),L1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Xf[l])?!!u[l]:!1}function bc(){return B1}var $1=m({},yc,{key:function(l){if(l.key){var u=L1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Uu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Qf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(l){return l.type==="keypress"?Uu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Uu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),U1=vi($1),ul=m({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=vi(ul),z1=m({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),V1=vi(z1),F1=m({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),S0=vi(F1),Ei=m({},Vu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),q1=vi(Ei),H1=m({},cl,{newState:0,oldState:0}),wc=vi(H1),v=[9,13,27,32],P=oo&&"CompositionEvent"in window,V=null;oo&&"documentMode"in document&&(V=document.documentMode);var J=oo&&"TextEvent"in window&&!V,Te=oo&&(!P||V&&8<V&&11>=V),$e=" ",pt=!1;function Jr(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ya(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vr=!1;function qa(l,u){switch(l){case"compositionend":return ya(u);case"keypress":return u.which!==32?null:(pt=!0,$e);case"textInput":return l=u.data,l===$e&&pt?null:l;default:return null}}function Ha(l,u){if(vr)return l==="compositionend"||!P&&Jr(l,u)?(l=mc(),Io=x0=hs=null,vr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Te&&u.locale!=="ko"?null:u.data;default:return null}}var Sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Sc[l.type]:u==="textarea"}function Hu(l,u,f,g){ds?yi?yi.push(g):yi=[g]:ds=g,u=My(u,"onChange"),0<u.length&&(f=new zu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var dl=null,Zf=null;function OX(l){lC(l,0)}function G1(l){var u=ut(l);if(je(u))return l}function Ej(l,u){if(l==="change")return u}var jj=!1;if(oo){var Iw;if(oo){var Rw="oninput"in document;if(!Rw){var kj=document.createElement("div");kj.setAttribute("oninput","return;"),Rw=typeof kj.oninput=="function"}Iw=Rw}else Iw=!1;jj=Iw&&(!document.documentMode||9<document.documentMode)}function Cj(){dl&&(dl.detachEvent("onpropertychange",Oj),Zf=dl=null)}function Oj(l){if(l.propertyName==="value"&&G1(Zf)){var u=[];Hu(u,Zf,l,Rr(l)),O1(OX,u)}}function IX(l,u,f){l==="focusin"?(Cj(),dl=u,Zf=f,dl.attachEvent("onpropertychange",Oj)):l==="focusout"&&Cj()}function RX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return G1(Zf)}function MX(l,u){if(l==="click")return G1(u)}function PX(l,u){if(l==="input"||l==="change")return G1(u)}function DX(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var fs=typeof Object.is=="function"?Object.is:DX;function Jf(l,u){if(fs(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Ve.call(u,b)||!fs(l[b],u[b]))return!1}return!0}function Ij(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Rj(l,u){var f=Ij(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ij(f)}}function Mj(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Mj(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Pj(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ft(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=ft(l.document)}return u}function Mw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var LX=oo&&"documentMode"in document&&11>=document.documentMode,_0=null,Pw=null,ep=null,Dw=!1;function Dj(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Dw||_0==null||_0!==ft(g)||(g=_0,"selectionStart"in g&&Mw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ep&&Jf(ep,g)||(ep=g,g=My(Pw,"onSelect"),0<g.length&&(u=new zu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=_0)))}function Gu(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var T0={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionrun:Gu("Transition","TransitionRun"),transitionstart:Gu("Transition","TransitionStart"),transitioncancel:Gu("Transition","TransitionCancel"),transitionend:Gu("Transition","TransitionEnd")},Lw={},Lj={};oo&&(Lj=document.createElement("div").style,"AnimationEvent"in window||(delete T0.animationend.animation,delete T0.animationiteration.animation,delete T0.animationstart.animation),"TransitionEvent"in window||delete T0.transitionend.transition);function Wu(l){if(Lw[l])return Lw[l];if(!T0[l])return l;var u=T0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in Lj)return Lw[l]=u[f];return l}var Bj=Wu("animationend"),$j=Wu("animationiteration"),Uj=Wu("animationstart"),BX=Wu("transitionrun"),$X=Wu("transitionstart"),UX=Wu("transitioncancel"),zj=Wu("transitionend"),Vj=new Map,Bw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bw.push("scrollEnd");function lo(l,u){Vj.set(l,u),hn(u,[l])}var W1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ds=[],A0=0,$w=0;function K1(){for(var l=A0,u=$w=A0=0;u<l;){var f=Ds[u];Ds[u++]=null;var g=Ds[u];Ds[u++]=null;var b=Ds[u];Ds[u++]=null;var _=Ds[u];if(Ds[u++]=null,g!==null&&b!==null){var $=g.pending;$===null?b.next=b:(b.next=$.next,$.next=b),g.pending=b}_!==0&&Fj(f,b,_)}}function Q1(l,u,f,g){Ds[A0++]=l,Ds[A0++]=u,Ds[A0++]=f,Ds[A0++]=g,$w|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Uw(l,u,f,g){return Q1(l,u,f,g),X1(l)}function Ku(l,u){return Q1(l,null,null,u),X1(l)}function Fj(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-Lt(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function X1(l){if(50<Sp)throw Sp=0,Q4=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var N0={};function zX(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(l,u,f,g){return new zX(l,u,f,g)}function zw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function hl(l,u){var f=l.alternate;return f===null?(f=ps(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function qj(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Y1(l,u,f,g,b,_){var $=0;if(g=l,typeof l=="function")zw(l)&&($=1);else if(typeof l=="string")$=GY(l,f,Ne.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case j:return l=ps(31,f,u,b),l.elementType=j,l.lanes=_,l;case S:return Qu(f.children,b,_,u);case w:$=8,b|=24;break;case E:return l=ps(12,f,u,b|2),l.elementType=E,l.lanes=_,l;case O:return l=ps(13,f,u,b),l.elementType=O,l.lanes=_,l;case M:return l=ps(19,f,u,b),l.elementType=M,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:$=10;break e;case I:$=9;break e;case L:$=11;break e;case N:$=14;break e;case A:$=16,g=null;break e}$=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=ps($,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function Qu(l,u,f,g){return l=ps(7,l,g,u),l.lanes=f,l}function Vw(l,u,f){return l=ps(6,l,null,u),l.lanes=f,l}function Hj(l){var u=ps(18,null,null,0);return u.stateNode=l,u}function Fw(l,u,f){return u=ps(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Gj=new WeakMap;function Ls(l,u){if(typeof l=="object"&&l!==null){var f=Gj.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Ee(u)},Gj.set(l,u),u)}return{value:l,source:u,stack:Ee(u)}}var E0=[],j0=0,Z1=null,tp=0,Bs=[],$s=0,_c=null,Ro=1,Mo="";function fl(l,u){E0[j0++]=tp,E0[j0++]=Z1,Z1=l,tp=u}function Wj(l,u,f){Bs[$s++]=Ro,Bs[$s++]=Mo,Bs[$s++]=_c,_c=l;var g=Ro;l=Mo;var b=32-Lt(g)-1;g&=~(1<<b),f+=1;var _=32-Lt(u)+b;if(30<_){var $=b-b%5;_=(g&(1<<$)-1).toString(32),g>>=$,b-=$,Ro=1<<32-Lt(u)+b|f<<b|g,Mo=_+l}else Ro=1<<_|f<<b|g,Mo=l}function qw(l){l.return!==null&&(fl(l,1),Wj(l,1,0))}function Hw(l){for(;l===Z1;)Z1=E0[--j0],E0[j0]=null,tp=E0[--j0],E0[j0]=null;for(;l===_c;)_c=Bs[--$s],Bs[$s]=null,Mo=Bs[--$s],Bs[$s]=null,Ro=Bs[--$s],Bs[$s]=null}function Kj(l,u){Bs[$s++]=Ro,Bs[$s++]=Mo,Bs[$s++]=_c,Ro=u.id,Mo=u.overflow,_c=l}var ai=null,$n=null,Mr=!1,Tc=null,Us=!1,Gw=Error(n(519));function Ac(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rp(Ls(u,l)),Gw}function Qj(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Yr]=l,u[dn]=g,f){case"dialog":Tr("cancel",u),Tr("close",u);break;case"iframe":case"object":case"embed":Tr("load",u);break;case"video":case"audio":for(f=0;f<Tp.length;f++)Tr(Tp[f],u);break;case"source":Tr("error",u);break;case"img":case"image":case"link":Tr("error",u),Tr("load",u);break;case"details":Tr("toggle",u);break;case"input":Tr("invalid",u),Sr(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Tr("invalid",u);break;case"textarea":Tr("invalid",u),ze(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||hC(u.textContent,f)?(g.popover!=null&&(Tr("beforetoggle",u),Tr("toggle",u)),g.onScroll!=null&&Tr("scroll",u),g.onScrollEnd!=null&&Tr("scrollend",u),g.onClick!=null&&(u.onclick=fn),u=!0):u=!1,u||Ac(l,!0)}function Xj(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 31:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:ai=ai.return}}function k0(l){if(l!==ai)return!1;if(!Mr)return Xj(l),Mr=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||u5(l.type,l.memoizedProps)),f=!f),f&&$n&&Ac(l),Xj(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));$n=wC(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));$n=wC(l)}else u===27?(u=$n,$c(l.type)?(l=m5,m5=null,$n=l):$n=u):$n=ai?Vs(l.stateNode.nextSibling):null;return!0}function Xu(){$n=ai=null,Mr=!1}function Ww(){var l=Tc;return l!==null&&(Gi===null?Gi=l:Gi.push.apply(Gi,l),Tc=null),l}function rp(l){Tc===null?Tc=[l]:Tc.push(l)}var Kw=K(null),Yu=null,pl=null;function Nc(l,u,f){re(Kw,u._currentValue),u._currentValue=f}function ml(l){l._currentValue=Kw.current,te(Kw)}function Qw(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function Xw(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var $=b.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=b;for(var ue=0;ue<u.length;ue++)if(Q.context===u[ue]){_.lanes|=f,Q=_.alternate,Q!==null&&(Q.lanes|=f),Qw(_.return,f,l),g||($=null);break e}_=Q.next}}else if(b.tag===18){if($=b.return,$===null)throw Error(n(341));$.lanes|=f,_=$.alternate,_!==null&&(_.lanes|=f),Qw($,f,l),$=null}else $=b.child;if($!==null)$.return=b;else for($=b;$!==null;){if($===l){$=null;break}if(b=$.sibling,b!==null){b.return=$.return,$=b;break}$=$.return}b=$}}function C0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var $=b.alternate;if($===null)throw Error(n(387));if($=$.memoizedProps,$!==null){var Q=b.type;fs(b.pendingProps.value,$.value)||(l!==null?l.push(Q):l=[Q])}}else if(b===ye.current){if($=b.alternate,$===null)throw Error(n(387));$.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(kp):l=[kp])}b=b.return}l!==null&&Xw(u,l,f,g),u.flags|=262144}function J1(l){for(l=l.firstContext;l!==null;){if(!fs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Zu(l){Yu=l,pl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ii(l){return Yj(Yu,l)}function ey(l,u){return Yu===null&&Zu(l),Yj(l,u)}function Yj(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},pl===null){if(l===null)throw Error(n(308));pl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else pl=pl.next=u;return f}var VX=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},FX=t.unstable_scheduleCallback,qX=t.unstable_NormalPriority,va={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yw(){return{controller:new VX,data:new Map,refCount:0}}function np(l){l.refCount--,l.refCount===0&&FX(qX,function(){l.controller.abort()})}var ap=null,Zw=0,O0=0,I0=null;function HX(l,u){if(ap===null){var f=ap=[];Zw=0,O0=t5(),I0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Zw++,u.then(Zj,Zj),u}function Zj(){if(--Zw===0&&ap!==null){I0!==null&&(I0.status="fulfilled");var l=ap;ap=null,O0=0,I0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function GX(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var Jj=H.S;H.S=function(l,u){D9=Ye(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&HX(l,u),Jj!==null&&Jj(l,u)};var Ju=K(null);function Jw(){var l=Ju.current;return l!==null?l:An.pooledCache}function ty(l,u){u===null?re(Ju,Ju.current):re(Ju,u.pool)}function ek(){var l=Jw();return l===null?null:{parent:va._currentValue,pool:l}}var R0=Error(n(460)),e4=Error(n(474)),ry=Error(n(542)),ny={then:function(){}};function tk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function rk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(fn,fn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ak(l),l;default:if(typeof u.status=="string")u.then(fn,fn);else{if(l=An,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ak(l),l}throw td=u,R0}}function ed(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(td=f,R0):f}}var td=null;function nk(){if(td===null)throw Error(n(459));var l=td;return td=null,l}function ak(l){if(l===R0||l===ry)throw Error(n(483))}var M0=null,ip=0;function ay(l){var u=ip;return ip+=1,M0===null&&(M0=[]),rk(M0,l,u)}function sp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function iy(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function ik(l){function u(_e,ge){if(l){var ke=_e.deletions;ke===null?(_e.deletions=[ge],_e.flags|=16):ke.push(ge)}}function f(_e,ge){if(!l)return null;for(;ge!==null;)u(_e,ge),ge=ge.sibling;return null}function g(_e){for(var ge=new Map;_e!==null;)_e.key!==null?ge.set(_e.key,_e):ge.set(_e.index,_e),_e=_e.sibling;return ge}function b(_e,ge){return _e=hl(_e,ge),_e.index=0,_e.sibling=null,_e}function _(_e,ge,ke){return _e.index=ke,l?(ke=_e.alternate,ke!==null?(ke=ke.index,ke<ge?(_e.flags|=67108866,ge):ke):(_e.flags|=67108866,ge)):(_e.flags|=1048576,ge)}function $(_e){return l&&_e.alternate===null&&(_e.flags|=67108866),_e}function Q(_e,ge,ke,We){return ge===null||ge.tag!==6?(ge=Vw(ke,_e.mode,We),ge.return=_e,ge):(ge=b(ge,ke),ge.return=_e,ge)}function ue(_e,ge,ke,We){var Ut=ke.type;return Ut===S?qe(_e,ge,ke.props.children,We,ke.key):ge!==null&&(ge.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&ed(Ut)===ge.type)?(ge=b(ge,ke.props),sp(ge,ke),ge.return=_e,ge):(ge=Y1(ke.type,ke.key,ke.props,null,_e.mode,We),sp(ge,ke),ge.return=_e,ge)}function Oe(_e,ge,ke,We){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==ke.containerInfo||ge.stateNode.implementation!==ke.implementation?(ge=Fw(ke,_e.mode,We),ge.return=_e,ge):(ge=b(ge,ke.children||[]),ge.return=_e,ge)}function qe(_e,ge,ke,We,Ut){return ge===null||ge.tag!==7?(ge=Qu(ke,_e.mode,We,Ut),ge.return=_e,ge):(ge=b(ge,ke),ge.return=_e,ge)}function Ke(_e,ge,ke){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Vw(""+ge,_e.mode,ke),ge.return=_e,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:return ke=Y1(ge.type,ge.key,ge.props,null,_e.mode,ke),sp(ke,ge),ke.return=_e,ke;case T:return ge=Fw(ge,_e.mode,ke),ge.return=_e,ge;case A:return ge=ed(ge),Ke(_e,ge,ke)}if(W(ge)||F(ge))return ge=Qu(ge,_e.mode,ke,null),ge.return=_e,ge;if(typeof ge.then=="function")return Ke(_e,ay(ge),ke);if(ge.$$typeof===R)return Ke(_e,ey(_e,ge),ke);iy(_e,ge)}return null}function Re(_e,ge,ke,We){var Ut=ge!==null?ge.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ut!==null?null:Q(_e,ge,""+ke,We);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case x:return ke.key===Ut?ue(_e,ge,ke,We):null;case T:return ke.key===Ut?Oe(_e,ge,ke,We):null;case A:return ke=ed(ke),Re(_e,ge,ke,We)}if(W(ke)||F(ke))return Ut!==null?null:qe(_e,ge,ke,We,null);if(typeof ke.then=="function")return Re(_e,ge,ay(ke),We);if(ke.$$typeof===R)return Re(_e,ge,ey(_e,ke),We);iy(_e,ke)}return null}function Be(_e,ge,ke,We,Ut){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return _e=_e.get(ke)||null,Q(ge,_e,""+We,Ut);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case x:return _e=_e.get(We.key===null?ke:We.key)||null,ue(ge,_e,We,Ut);case T:return _e=_e.get(We.key===null?ke:We.key)||null,Oe(ge,_e,We,Ut);case A:return We=ed(We),Be(_e,ge,ke,We,Ut)}if(W(We)||F(We))return _e=_e.get(ke)||null,qe(ge,_e,We,Ut,null);if(typeof We.then=="function")return Be(_e,ge,ke,ay(We),Ut);if(We.$$typeof===R)return Be(_e,ge,ke,ey(ge,We),Ut);iy(ge,We)}return null}function It(_e,ge,ke,We){for(var Ut=null,$r=null,Dt=ge,hr=ge=0,Er=null;Dt!==null&&hr<ke.length;hr++){Dt.index>hr?(Er=Dt,Dt=null):Er=Dt.sibling;var Ur=Re(_e,Dt,ke[hr],We);if(Ur===null){Dt===null&&(Dt=Er);break}l&&Dt&&Ur.alternate===null&&u(_e,Dt),ge=_(Ur,ge,hr),$r===null?Ut=Ur:$r.sibling=Ur,$r=Ur,Dt=Er}if(hr===ke.length)return f(_e,Dt),Mr&&fl(_e,hr),Ut;if(Dt===null){for(;hr<ke.length;hr++)Dt=Ke(_e,ke[hr],We),Dt!==null&&(ge=_(Dt,ge,hr),$r===null?Ut=Dt:$r.sibling=Dt,$r=Dt);return Mr&&fl(_e,hr),Ut}for(Dt=g(Dt);hr<ke.length;hr++)Er=Be(Dt,_e,hr,ke[hr],We),Er!==null&&(l&&Er.alternate!==null&&Dt.delete(Er.key===null?hr:Er.key),ge=_(Er,ge,hr),$r===null?Ut=Er:$r.sibling=Er,$r=Er);return l&&Dt.forEach(function(qc){return u(_e,qc)}),Mr&&fl(_e,hr),Ut}function Ht(_e,ge,ke,We){if(ke==null)throw Error(n(151));for(var Ut=null,$r=null,Dt=ge,hr=ge=0,Er=null,Ur=ke.next();Dt!==null&&!Ur.done;hr++,Ur=ke.next()){Dt.index>hr?(Er=Dt,Dt=null):Er=Dt.sibling;var qc=Re(_e,Dt,Ur.value,We);if(qc===null){Dt===null&&(Dt=Er);break}l&&Dt&&qc.alternate===null&&u(_e,Dt),ge=_(qc,ge,hr),$r===null?Ut=qc:$r.sibling=qc,$r=qc,Dt=Er}if(Ur.done)return f(_e,Dt),Mr&&fl(_e,hr),Ut;if(Dt===null){for(;!Ur.done;hr++,Ur=ke.next())Ur=Ke(_e,Ur.value,We),Ur!==null&&(ge=_(Ur,ge,hr),$r===null?Ut=Ur:$r.sibling=Ur,$r=Ur);return Mr&&fl(_e,hr),Ut}for(Dt=g(Dt);!Ur.done;hr++,Ur=ke.next())Ur=Be(Dt,_e,hr,Ur.value,We),Ur!==null&&(l&&Ur.alternate!==null&&Dt.delete(Ur.key===null?hr:Ur.key),ge=_(Ur,ge,hr),$r===null?Ut=Ur:$r.sibling=Ur,$r=Ur);return l&&Dt.forEach(function(nZ){return u(_e,nZ)}),Mr&&fl(_e,hr),Ut}function gn(_e,ge,ke,We){if(typeof ke=="object"&&ke!==null&&ke.type===S&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case x:e:{for(var Ut=ke.key;ge!==null;){if(ge.key===Ut){if(Ut=ke.type,Ut===S){if(ge.tag===7){f(_e,ge.sibling),We=b(ge,ke.props.children),We.return=_e,_e=We;break e}}else if(ge.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&ed(Ut)===ge.type){f(_e,ge.sibling),We=b(ge,ke.props),sp(We,ke),We.return=_e,_e=We;break e}f(_e,ge);break}else u(_e,ge);ge=ge.sibling}ke.type===S?(We=Qu(ke.props.children,_e.mode,We,ke.key),We.return=_e,_e=We):(We=Y1(ke.type,ke.key,ke.props,null,_e.mode,We),sp(We,ke),We.return=_e,_e=We)}return $(_e);case T:e:{for(Ut=ke.key;ge!==null;){if(ge.key===Ut)if(ge.tag===4&&ge.stateNode.containerInfo===ke.containerInfo&&ge.stateNode.implementation===ke.implementation){f(_e,ge.sibling),We=b(ge,ke.children||[]),We.return=_e,_e=We;break e}else{f(_e,ge);break}else u(_e,ge);ge=ge.sibling}We=Fw(ke,_e.mode,We),We.return=_e,_e=We}return $(_e);case A:return ke=ed(ke),gn(_e,ge,ke,We)}if(W(ke))return It(_e,ge,ke,We);if(F(ke)){if(Ut=F(ke),typeof Ut!="function")throw Error(n(150));return ke=Ut.call(ke),Ht(_e,ge,ke,We)}if(typeof ke.then=="function")return gn(_e,ge,ay(ke),We);if(ke.$$typeof===R)return gn(_e,ge,ey(_e,ke),We);iy(_e,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,ge!==null&&ge.tag===6?(f(_e,ge.sibling),We=b(ge,ke),We.return=_e,_e=We):(f(_e,ge),We=Vw(ke,_e.mode,We),We.return=_e,_e=We),$(_e)):f(_e,ge)}return function(_e,ge,ke,We){try{ip=0;var Ut=gn(_e,ge,ke,We);return M0=null,Ut}catch(Dt){if(Dt===R0||Dt===ry)throw Dt;var $r=ps(29,Dt,null,_e.mode);return $r.lanes=We,$r.return=_e,$r}finally{}}}var rd=ik(!0),sk=ik(!1),Ec=!1;function t4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function r4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function jc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function kc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Wr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=X1(l),Fj(l,null,f),u}return Q1(l,g,u,f),X1(l)}function op(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,cn(l,f)}}function n4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var $={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=$:_=_.next=$,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var a4=!1;function lp(){if(a4){var l=I0;if(l!==null)throw l}}function cp(l,u,f,g){a4=!1;var b=l.updateQueue;Ec=!1;var _=b.firstBaseUpdate,$=b.lastBaseUpdate,Q=b.shared.pending;if(Q!==null){b.shared.pending=null;var ue=Q,Oe=ue.next;ue.next=null,$===null?_=Oe:$.next=Oe,$=ue;var qe=l.alternate;qe!==null&&(qe=qe.updateQueue,Q=qe.lastBaseUpdate,Q!==$&&(Q===null?qe.firstBaseUpdate=Oe:Q.next=Oe,qe.lastBaseUpdate=ue))}if(_!==null){var Ke=b.baseState;$=0,qe=Oe=ue=null,Q=_;do{var Re=Q.lane&-536870913,Be=Re!==Q.lane;if(Be?(Nr&Re)===Re:(g&Re)===Re){Re!==0&&Re===O0&&(a4=!0),qe!==null&&(qe=qe.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var It=l,Ht=Q;Re=u;var gn=f;switch(Ht.tag){case 1:if(It=Ht.payload,typeof It=="function"){Ke=It.call(gn,Ke,Re);break e}Ke=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Ht.payload,Re=typeof It=="function"?It.call(gn,Ke,Re):It,Re==null)break e;Ke=m({},Ke,Re);break e;case 2:Ec=!0}}Re=Q.callback,Re!==null&&(l.flags|=64,Be&&(l.flags|=8192),Be=b.callbacks,Be===null?b.callbacks=[Re]:Be.push(Re))}else Be={lane:Re,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},qe===null?(Oe=qe=Be,ue=Ke):qe=qe.next=Be,$|=Re;if(Q=Q.next,Q===null){if(Q=b.shared.pending,Q===null)break;Be=Q,Q=Be.next,Be.next=null,b.lastBaseUpdate=Be,b.shared.pending=null}}while(!0);qe===null&&(ue=Ke),b.baseState=ue,b.firstBaseUpdate=Oe,b.lastBaseUpdate=qe,_===null&&(b.shared.lanes=0),Mc|=$,l.lanes=$,l.memoizedState=Ke}}function ok(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function lk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)ok(f[l],u)}var P0=K(null),sy=K(0);function ck(l,u){l=Tl,re(sy,l),re(P0,u),Tl=l|u.baseLanes}function i4(){re(sy,Tl),re(P0,P0.current)}function s4(){Tl=sy.current,te(P0),te(sy)}var ms=K(null),zs=null;function Cc(l){var u=l.alternate;re(oa,oa.current&1),re(ms,l),zs===null&&(u===null||P0.current!==null||u.memoizedState!==null)&&(zs=l)}function o4(l){re(oa,oa.current),re(ms,l),zs===null&&(zs=l)}function uk(l){l.tag===22?(re(oa,oa.current),re(ms,l),zs===null&&(zs=l)):Oc()}function Oc(){re(oa,oa.current),re(ms,ms.current)}function gs(l){te(ms),zs===l&&(zs=null),te(oa)}var oa=K(0);function oy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f5(f)||p5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var gl=0,lr=null,pn=null,xa=null,ly=!1,D0=!1,nd=!1,cy=0,up=0,L0=null,WX=0;function Jn(){throw Error(n(321))}function l4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!fs(l[f],u[f]))return!1;return!0}function c4(l,u,f,g,b,_){return gl=_,lr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?Wk:T4,nd=!1,_=f(g,b),nd=!1,D0&&(_=hk(u,f,g,b)),dk(l),_}function dk(l){H.H=fp;var u=pn!==null&&pn.next!==null;if(gl=0,xa=pn=lr=null,ly=!1,up=0,L0=null,u)throw Error(n(300));l===null||ba||(l=l.dependencies,l!==null&&J1(l)&&(ba=!0))}function hk(l,u,f,g){lr=l;var b=0;do{if(D0&&(L0=null),up=0,D0=!1,25<=b)throw Error(n(301));if(b+=1,xa=pn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=Kk,_=u(f,g)}while(D0);return _}function KX(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?dp(u):u,l=l.useState()[0],(pn!==null?pn.memoizedState:null)!==l&&(lr.flags|=1024),u}function u4(){var l=cy!==0;return cy=0,l}function d4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function h4(l){if(ly){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ly=!1}gl=0,xa=pn=lr=null,D0=!1,up=cy=0,L0=null}function ji(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xa===null?lr.memoizedState=xa=l:xa=xa.next=l,xa}function la(){if(pn===null){var l=lr.alternate;l=l!==null?l.memoizedState:null}else l=pn.next;var u=xa===null?lr.memoizedState:xa.next;if(u!==null)xa=u,pn=l;else{if(l===null)throw lr.alternate===null?Error(n(467)):Error(n(310));pn=l,l={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},xa===null?lr.memoizedState=xa=l:xa=xa.next=l}return xa}function uy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dp(l){var u=up;return up+=1,L0===null&&(L0=[]),l=rk(L0,l,u),u=lr,(xa===null?u.memoizedState:xa.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?Wk:T4),l}function dy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return dp(l);if(l.$$typeof===R)return ii(l)}throw Error(n(438,String(l)))}function f4(l){var u=null,f=lr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=lr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=uy(),lr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=z;return u.index++,f}function yl(l,u){return typeof u=="function"?u(l):u}function hy(l){var u=la();return p4(u,pn,l)}function p4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var $=b.next;b.next=_.next,_.next=$}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var Q=$=null,ue=null,Oe=u,qe=!1;do{var Ke=Oe.lane&-536870913;if(Ke!==Oe.lane?(Nr&Ke)===Ke:(gl&Ke)===Ke){var Re=Oe.revertLane;if(Re===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),Ke===O0&&(qe=!0);else if((gl&Re)===Re){Oe=Oe.next,Re===O0&&(qe=!0);continue}else Ke={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=Ke,$=_):ue=ue.next=Ke,lr.lanes|=Re,Mc|=Re;Ke=Oe.action,nd&&f(_,Ke),_=Oe.hasEagerState?Oe.eagerState:f(_,Ke)}else Re={lane:Ke,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=Re,$=_):ue=ue.next=Re,lr.lanes|=Ke,Mc|=Ke;Oe=Oe.next}while(Oe!==null&&Oe!==u);if(ue===null?$=_:ue.next=Q,!fs(_,l.memoizedState)&&(ba=!0,qe&&(f=I0,f!==null)))throw f;l.memoizedState=_,l.baseState=$,l.baseQueue=ue,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function m4(l){var u=la(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var $=b=b.next;do _=l(_,$.action),$=$.next;while($!==b);fs(_,u.memoizedState)||(ba=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function fk(l,u,f){var g=lr,b=la(),_=Mr;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var $=!fs((pn||b).memoizedState,f);if($&&(b.memoizedState=f,ba=!0),b=b.queue,v4(gk.bind(null,g,b,l),[l]),b.getSnapshot!==u||$||xa!==null&&xa.memoizedState.tag&1){if(g.flags|=2048,B0(9,{destroy:void 0},mk.bind(null,g,b,f,u),null),An===null)throw Error(n(349));_||(gl&127)!==0||pk(g,u,f)}return f}function pk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=lr.updateQueue,u===null?(u=uy(),lr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function mk(l,u,f,g){u.value=f,u.getSnapshot=g,yk(u)&&vk(l)}function gk(l,u,f){return f(function(){yk(u)&&vk(l)})}function yk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!fs(l,f)}catch{return!0}}function vk(l){var u=Ku(l,2);u!==null&&Wi(u,l,2)}function g4(l){var u=ji();if(typeof l=="function"){var f=l;if(l=f(),nd){Ct(!0);try{f()}finally{Ct(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:l},u}function xk(l,u,f,g){return l.baseState=f,p4(l,pn,typeof g=="function"?g:yl)}function QX(l,u,f,g,b){if(my(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){_.listeners.push($)}};H.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,bk(u,_)):(_.next=f.next,u.pending=f.next=_)}}function bk(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=H.T,$={};H.T=$;try{var Q=f(b,g),ue=H.S;ue!==null&&ue($,Q),wk(l,u,Q)}catch(Oe){y4(l,u,Oe)}finally{_!==null&&$.types!==null&&(_.types=$.types),H.T=_}}else try{_=f(b,g),wk(l,u,_)}catch(Oe){y4(l,u,Oe)}}function wk(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){Sk(l,u,g)},function(g){return y4(l,u,g)}):Sk(l,u,f)}function Sk(l,u,f){u.status="fulfilled",u.value=f,_k(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,bk(l,f)))}function y4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,_k(u),u=u.next;while(u!==g)}l.action=null}function _k(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Tk(l,u){return u}function Ak(l,u){if(Mr){var f=An.formState;if(f!==null){e:{var g=lr;if(Mr){if($n){t:{for(var b=$n,_=Us;b.nodeType!==8;){if(!_){b=null;break t}if(b=Vs(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){$n=Vs(b.nextSibling),g=b.data==="F!";break e}}Ac(g)}g=!1}g&&(u=f[0])}}return f=ji(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tk,lastRenderedState:u},f.queue=g,f=qk.bind(null,lr,g),g.dispatch=f,g=g4(!1),_=_4.bind(null,lr,!1,g.queue),g=ji(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=QX.bind(null,lr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function Nk(l){var u=la();return Ek(u,pn,l)}function Ek(l,u,f){if(u=p4(l,u,Tk)[0],l=hy(yl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=dp(u)}catch($){throw $===R0?ry:$}else g=u;u=la();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(lr.flags|=2048,B0(9,{destroy:void 0},XX.bind(null,b,f),null)),[g,_,l]}function XX(l,u){l.action=u}function jk(l){var u=la(),f=pn;if(f!==null)return Ek(u,f,l);la(),u=u.memoizedState,f=la();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function B0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=lr.updateQueue,u===null&&(u=uy(),lr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function kk(){return la().memoizedState}function fy(l,u,f,g){var b=ji();lr.flags|=l,b.memoizedState=B0(1|u,{destroy:void 0},f,g===void 0?null:g)}function py(l,u,f,g){var b=la();g=g===void 0?null:g;var _=b.memoizedState.inst;pn!==null&&g!==null&&l4(g,pn.memoizedState.deps)?b.memoizedState=B0(u,_,f,g):(lr.flags|=l,b.memoizedState=B0(1|u,_,f,g))}function Ck(l,u){fy(8390656,8,l,u)}function v4(l,u){py(2048,8,l,u)}function YX(l){lr.flags|=4;var u=lr.updateQueue;if(u===null)u=uy(),lr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function Ok(l){var u=la().memoizedState;return YX({ref:u,nextImpl:l}),function(){if((Wr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Ik(l,u){return py(4,2,l,u)}function Rk(l,u){return py(4,4,l,u)}function Mk(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Pk(l,u,f){f=f!=null?f.concat([l]):null,py(4,4,Mk.bind(null,u,l),f)}function x4(){}function Dk(l,u){var f=la();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&l4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function Lk(l,u){var f=la();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&l4(u,g[1]))return g[0];if(g=l(),nd){Ct(!0);try{l()}finally{Ct(!1)}}return f.memoizedState=[g,u],g}function b4(l,u,f){return f===void 0||(gl&1073741824)!==0&&(Nr&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=B9(),lr.lanes|=l,Mc|=l,f)}function Bk(l,u,f,g){return fs(f,u)?f:P0.current!==null?(l=b4(l,f,g),fs(l,u)||(ba=!0),l):(gl&42)===0||(gl&1073741824)!==0&&(Nr&261930)===0?(ba=!0,l.memoizedState=f):(l=B9(),lr.lanes|=l,Mc|=l,u)}function $k(l,u,f,g,b){var _=Z.p;Z.p=_!==0&&8>_?_:8;var $=H.T,Q={};H.T=Q,_4(l,!1,u,f);try{var ue=b(),Oe=H.S;if(Oe!==null&&Oe(Q,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var qe=GX(ue,g);hp(l,u,qe,xs(l))}else hp(l,u,g,xs(l))}catch(Ke){hp(l,u,{then:function(){},status:"rejected",reason:Ke},xs())}finally{Z.p=_,$!==null&&Q.types!==null&&($.types=Q.types),H.T=$}}function ZX(){}function w4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=Uk(l).queue;$k(l,b,u,ie,f===null?ZX:function(){return zk(l),f(g)})}function Uk(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:ie},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function zk(l){var u=Uk(l);u.next===null&&(u=l.alternate.memoizedState),hp(l,u.next.queue,{},xs())}function S4(){return ii(kp)}function Vk(){return la().memoizedState}function Fk(){return la().memoizedState}function JX(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=xs();l=jc(f);var g=kc(u,l,f);g!==null&&(Wi(g,u,f),op(g,u,f)),u={cache:Yw()},l.payload=u;return}u=u.return}}function eY(l,u,f){var g=xs();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},my(l)?Hk(u,f):(f=Uw(l,u,f,g),f!==null&&(Wi(f,l,g),Gk(f,u,g)))}function qk(l,u,f){var g=xs();hp(l,u,f,g)}function hp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(my(l))Hk(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var $=u.lastRenderedState,Q=_($,f);if(b.hasEagerState=!0,b.eagerState=Q,fs(Q,$))return Q1(l,u,b,0),An===null&&K1(),!1}catch{}finally{}if(f=Uw(l,u,b,g),f!==null)return Wi(f,l,g),Gk(f,u,g),!0}return!1}function _4(l,u,f,g){if(g={lane:2,revertLane:t5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},my(l)){if(u)throw Error(n(479))}else u=Uw(l,f,g,2),u!==null&&Wi(u,l,2)}function my(l){var u=l.alternate;return l===lr||u!==null&&u===lr}function Hk(l,u){D0=ly=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function Gk(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,cn(l,f)}}var fp={readContext:ii,use:dy,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};fp.useEffectEvent=Jn;var Wk={readContext:ii,use:dy,useCallback:function(l,u){return ji().memoizedState=[l,u===void 0?null:u],l},useContext:ii,useEffect:Ck,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,fy(4194308,4,Mk.bind(null,u,l),f)},useLayoutEffect:function(l,u){return fy(4194308,4,l,u)},useInsertionEffect:function(l,u){fy(4,2,l,u)},useMemo:function(l,u){var f=ji();u=u===void 0?null:u;var g=l();if(nd){Ct(!0);try{l()}finally{Ct(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=ji();if(f!==void 0){var b=f(u);if(nd){Ct(!0);try{f(u)}finally{Ct(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=eY.bind(null,lr,l),[g.memoizedState,l]},useRef:function(l){var u=ji();return l={current:l},u.memoizedState=l},useState:function(l){l=g4(l);var u=l.queue,f=qk.bind(null,lr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:x4,useDeferredValue:function(l,u){var f=ji();return b4(f,l,u)},useTransition:function(){var l=g4(!1);return l=$k.bind(null,lr,l.queue,!0,!1),ji().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=lr,b=ji();if(Mr){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),An===null)throw Error(n(349));(Nr&127)!==0||pk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,Ck(gk.bind(null,g,_,l),[l]),g.flags|=2048,B0(9,{destroy:void 0},mk.bind(null,g,_,f,u),null),f},useId:function(){var l=ji(),u=An.identifierPrefix;if(Mr){var f=Mo,g=Ro;f=(g&~(1<<32-Lt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=cy++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=WX++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:S4,useFormState:Ak,useActionState:Ak,useOptimistic:function(l){var u=ji();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=_4.bind(null,lr,!0,f),f.dispatch=u,[l,u]},useMemoCache:f4,useCacheRefresh:function(){return ji().memoizedState=JX.bind(null,lr)},useEffectEvent:function(l){var u=ji(),f={impl:l};return u.memoizedState=f,function(){if((Wr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},T4={readContext:ii,use:dy,useCallback:Dk,useContext:ii,useEffect:v4,useImperativeHandle:Pk,useInsertionEffect:Ik,useLayoutEffect:Rk,useMemo:Lk,useReducer:hy,useRef:kk,useState:function(){return hy(yl)},useDebugValue:x4,useDeferredValue:function(l,u){var f=la();return Bk(f,pn.memoizedState,l,u)},useTransition:function(){var l=hy(yl)[0],u=la().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:fk,useId:Vk,useHostTransitionStatus:S4,useFormState:Nk,useActionState:Nk,useOptimistic:function(l,u){var f=la();return xk(f,pn,l,u)},useMemoCache:f4,useCacheRefresh:Fk};T4.useEffectEvent=Ok;var Kk={readContext:ii,use:dy,useCallback:Dk,useContext:ii,useEffect:v4,useImperativeHandle:Pk,useInsertionEffect:Ik,useLayoutEffect:Rk,useMemo:Lk,useReducer:m4,useRef:kk,useState:function(){return m4(yl)},useDebugValue:x4,useDeferredValue:function(l,u){var f=la();return pn===null?b4(f,l,u):Bk(f,pn.memoizedState,l,u)},useTransition:function(){var l=m4(yl)[0],u=la().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:fk,useId:Vk,useHostTransitionStatus:S4,useFormState:jk,useActionState:jk,useOptimistic:function(l,u){var f=la();return pn!==null?xk(f,pn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:f4,useCacheRefresh:Fk};Kk.useEffectEvent=Ok;function A4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var N4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=xs(),b=jc(g);b.payload=u,f!=null&&(b.callback=f),u=kc(l,b,g),u!==null&&(Wi(u,l,g),op(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=xs(),b=jc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=kc(l,b,g),u!==null&&(Wi(u,l,g),op(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=xs(),g=jc(f);g.tag=2,u!=null&&(g.callback=u),u=kc(l,g,f),u!==null&&(Wi(u,l,f),op(u,l,f))}};function Qk(l,u,f,g,b,_,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,$):u.prototype&&u.prototype.isPureReactComponent?!Jf(f,g)||!Jf(b,_):!0}function Xk(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&N4.enqueueReplaceState(u,u.state,null)}function ad(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function Yk(l){W1(l)}function Zk(l){console.error(l)}function Jk(l){W1(l)}function gy(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function e9(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function E4(l,u,f){return f=jc(f),f.tag=3,f.payload={element:null},f.callback=function(){gy(l,u)},f}function t9(l){return l=jc(l),l.tag=3,l}function r9(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){e9(u,f,g)}}var $=f.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(l.callback=function(){e9(u,f,g),typeof b!="function"&&(Pc===null?Pc=new Set([this]):Pc.add(this));var Q=g.stack;this.componentDidCatch(g.value,{componentStack:Q!==null?Q:""})})}function tY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&C0(u,f,b,!0),f=ms.current,f!==null){switch(f.tag){case 31:case 13:return zs===null?jy():f.alternate===null&&ea===0&&(ea=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===ny?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),Z4(l,g,b)),!1;case 22:return f.flags|=65536,g===ny?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),Z4(l,g,b)),!1}throw Error(n(435,f.tag))}return Z4(l,g,b),jy(),!1}if(Mr)return u=ms.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==Gw&&(l=Error(n(422),{cause:g}),rp(Ls(l,f)))):(g!==Gw&&(u=Error(n(423),{cause:g}),rp(Ls(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Ls(g,f),b=E4(l.stateNode,g,b),n4(l,b),ea!==4&&(ea=2)),!1;var _=Error(n(520),{cause:g});if(_=Ls(_,f),wp===null?wp=[_]:wp.push(_),ea!==4&&(ea=2),u===null)return!0;g=Ls(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=E4(f.stateNode,g,l),n4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pc===null||!Pc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=t9(b),r9(b,l,f,g),n4(f,b),!1}f=f.return}while(f!==null);return!1}var j4=Error(n(461)),ba=!1;function si(l,u,f,g){u.child=l===null?sk(u,null,f,g):rd(u,l.child,f,g)}function n9(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var $={};for(var Q in g)Q!=="ref"&&($[Q]=g[Q])}else $=g;return Zu(u),g=c4(l,u,f,$,_,b),Q=u4(),l!==null&&!ba?(d4(l,u,b),vl(l,u,b)):(Mr&&Q&&qw(u),u.flags|=1,si(l,u,g,b),u.child)}function a9(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!zw(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,i9(l,u,_,g,b)):(l=Y1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!D4(l,b)){var $=_.memoizedProps;if(f=f.compare,f=f!==null?f:Jf,f($,g)&&l.ref===u.ref)return vl(l,u,b)}return u.flags|=1,l=hl(_,g),l.ref=u.ref,l.return=u,u.child=l}function i9(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(Jf(_,g)&&l.ref===u.ref)if(ba=!1,u.pendingProps=g=_,D4(l,b))(l.flags&131072)!==0&&(ba=!0);else return u.lanes=l.lanes,vl(l,u,b)}return k4(l,u,f,g,b)}function s9(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return o9(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&ty(u,_!==null?_.cachePool:null),_!==null?ck(u,_):i4(),uk(u);else return g=u.lanes=536870912,o9(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(ty(u,_.cachePool),ck(u,_),Oc(),u.memoizedState=null):(l!==null&&ty(u,null),i4(),Oc());return si(l,u,b,f),u.child}function pp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function o9(l,u,f,g,b){var _=Jw();return _=_===null?null:{parent:va._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&ty(u,null),i4(),uk(u),l!==null&&C0(l,u,g,!0),u.childLanes=b,null}function yy(l,u){return u=xy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function l9(l,u,f){return rd(u,l.child,null,f),l=yy(u,u.pendingProps),l.flags|=2,gs(u),u.memoizedState=null,l}function rY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Mr){if(g.mode==="hidden")return l=yy(u,g),u.lanes=536870912,pp(null,l);if(o4(u),(l=$n)?(l=bC(l,Us),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:_c!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Hj(l),f.return=u,u.child=f,ai=u,$n=null)):l=null,l===null)throw Ac(u);return u.lanes=536870912,null}return yy(u,g)}var _=l.memoizedState;if(_!==null){var $=_.dehydrated;if(o4(u),b)if(u.flags&256)u.flags&=-257,u=l9(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(ba||C0(l,u,f,!1),b=(f&l.childLanes)!==0,ba||b){if(g=An,g!==null&&($=Cn(g,f),$!==0&&$!==_.retryLane))throw _.retryLane=$,Ku(l,$),Wi(g,l,$),j4;jy(),u=l9(l,u,f)}else l=_.treeContext,$n=Vs($.nextSibling),ai=u,Mr=!0,Tc=null,Us=!1,l!==null&&Kj(u,l),u=yy(u,g),u.flags|=4096;return u}return l=hl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function vy(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function k4(l,u,f,g,b){return Zu(u),f=c4(l,u,f,g,void 0,b),g=u4(),l!==null&&!ba?(d4(l,u,b),vl(l,u,b)):(Mr&&g&&qw(u),u.flags|=1,si(l,u,f,b),u.child)}function c9(l,u,f,g,b,_){return Zu(u),u.updateQueue=null,f=hk(u,g,f,b),dk(l),g=u4(),l!==null&&!ba?(d4(l,u,_),vl(l,u,_)):(Mr&&g&&qw(u),u.flags|=1,si(l,u,f,_),u.child)}function u9(l,u,f,g,b){if(Zu(u),u.stateNode===null){var _=N0,$=f.contextType;typeof $=="object"&&$!==null&&(_=ii($)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=N4,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},t4(u),$=f.contextType,_.context=typeof $=="object"&&$!==null?ii($):N0,_.state=u.memoizedState,$=f.getDerivedStateFromProps,typeof $=="function"&&(A4(u,f,$,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||($=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),$!==_.state&&N4.enqueueReplaceState(_,_.state,null),cp(u,g,_,b),lp(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var Q=u.memoizedProps,ue=ad(f,Q);_.props=ue;var Oe=_.context,qe=f.contextType;$=N0,typeof qe=="object"&&qe!==null&&($=ii(qe));var Ke=f.getDerivedStateFromProps;qe=typeof Ke=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,qe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||Oe!==$)&&Xk(u,_,g,$),Ec=!1;var Re=u.memoizedState;_.state=Re,cp(u,g,_,b),lp(),Oe=u.memoizedState,Q||Re!==Oe||Ec?(typeof Ke=="function"&&(A4(u,f,Ke,g),Oe=u.memoizedState),(ue=Ec||Qk(u,f,ue,g,Re,Oe,$))?(qe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Oe),_.props=g,_.state=Oe,_.context=$,g=ue):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,r4(l,u),$=u.memoizedProps,qe=ad(f,$),_.props=qe,Ke=u.pendingProps,Re=_.context,Oe=f.contextType,ue=N0,typeof Oe=="object"&&Oe!==null&&(ue=ii(Oe)),Q=f.getDerivedStateFromProps,(Oe=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($!==Ke||Re!==ue)&&Xk(u,_,g,ue),Ec=!1,Re=u.memoizedState,_.state=Re,cp(u,g,_,b),lp();var Be=u.memoizedState;$!==Ke||Re!==Be||Ec||l!==null&&l.dependencies!==null&&J1(l.dependencies)?(typeof Q=="function"&&(A4(u,f,Q,g),Be=u.memoizedState),(qe=Ec||Qk(u,f,qe,g,Re,Be,ue)||l!==null&&l.dependencies!==null&&J1(l.dependencies))?(Oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Be,ue),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Be,ue)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||$===l.memoizedProps&&Re===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Re===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Be),_.props=g,_.state=Be,_.context=ue,g=qe):(typeof _.componentDidUpdate!="function"||$===l.memoizedProps&&Re===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Re===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,vy(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=rd(u,l.child,null,b),u.child=rd(u,null,f,b)):si(l,u,f,b),u.memoizedState=_.state,l=u.child):l=vl(l,u,b),l}function d9(l,u,f,g){return Xu(),u.flags|=256,si(l,u,f,g),u.child}var C4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function O4(l){return{baseLanes:l,cachePool:ek()}}function I4(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=vs),l}function h9(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,$;if(($=_)||($=l!==null&&l.memoizedState===null?!1:(oa.current&2)!==0),$&&(b=!0,u.flags&=-129),$=(u.flags&32)!==0,u.flags&=-33,l===null){if(Mr){if(b?Cc(u):Oc(),(l=$n)?(l=bC(l,Us),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:_c!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Hj(l),f.return=u,u.child=f,ai=u,$n=null)):l=null,l===null)throw Ac(u);return p5(l)?u.lanes=32:u.lanes=536870912,null}var Q=g.children;return g=g.fallback,b?(Oc(),b=u.mode,Q=xy({mode:"hidden",children:Q},b),g=Qu(g,b,f,null),Q.return=u,g.return=u,Q.sibling=g,u.child=Q,g=u.child,g.memoizedState=O4(f),g.childLanes=I4(l,$,f),u.memoizedState=C4,pp(null,g)):(Cc(u),R4(u,Q))}var ue=l.memoizedState;if(ue!==null&&(Q=ue.dehydrated,Q!==null)){if(_)u.flags&256?(Cc(u),u.flags&=-257,u=M4(l,u,f)):u.memoizedState!==null?(Oc(),u.child=l.child,u.flags|=128,u=null):(Oc(),Q=g.fallback,b=u.mode,g=xy({mode:"visible",children:g.children},b),Q=Qu(Q,b,f,null),Q.flags|=2,g.return=u,Q.return=u,g.sibling=Q,u.child=g,rd(u,l.child,null,f),g=u.child,g.memoizedState=O4(f),g.childLanes=I4(l,$,f),u.memoizedState=C4,u=pp(null,g));else if(Cc(u),p5(Q)){if($=Q.nextSibling&&Q.nextSibling.dataset,$)var Oe=$.dgst;$=Oe,g=Error(n(419)),g.stack="",g.digest=$,rp({value:g,source:null,stack:null}),u=M4(l,u,f)}else if(ba||C0(l,u,f,!1),$=(f&l.childLanes)!==0,ba||$){if($=An,$!==null&&(g=Cn($,f),g!==0&&g!==ue.retryLane))throw ue.retryLane=g,Ku(l,g),Wi($,l,g),j4;f5(Q)||jy(),u=M4(l,u,f)}else f5(Q)?(u.flags|=192,u.child=l.child,u=null):(l=ue.treeContext,$n=Vs(Q.nextSibling),ai=u,Mr=!0,Tc=null,Us=!1,l!==null&&Kj(u,l),u=R4(u,g.children),u.flags|=4096);return u}return b?(Oc(),Q=g.fallback,b=u.mode,ue=l.child,Oe=ue.sibling,g=hl(ue,{mode:"hidden",children:g.children}),g.subtreeFlags=ue.subtreeFlags&65011712,Oe!==null?Q=hl(Oe,Q):(Q=Qu(Q,b,f,null),Q.flags|=2),Q.return=u,g.return=u,g.sibling=Q,u.child=g,pp(null,g),g=u.child,Q=l.child.memoizedState,Q===null?Q=O4(f):(b=Q.cachePool,b!==null?(ue=va._currentValue,b=b.parent!==ue?{parent:ue,pool:ue}:b):b=ek(),Q={baseLanes:Q.baseLanes|f,cachePool:b}),g.memoizedState=Q,g.childLanes=I4(l,$,f),u.memoizedState=C4,pp(l.child,g)):(Cc(u),f=l.child,l=f.sibling,f=hl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&($=u.deletions,$===null?(u.deletions=[l],u.flags|=16):$.push(l)),u.child=f,u.memoizedState=null,f)}function R4(l,u){return u=xy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function xy(l,u){return l=ps(22,l,null,u),l.lanes=0,l}function M4(l,u,f){return rd(u,l.child,null,f),l=R4(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function f9(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),Qw(l.return,u,f)}function P4(l,u,f,g,b,_){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:($.isBackwards=u,$.rendering=null,$.renderingStartTime=0,$.last=g,$.tail=f,$.tailMode=b,$.treeForkCount=_)}function p9(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var $=oa.current,Q=($&2)!==0;if(Q?($=$&1|2,u.flags|=128):$&=1,re(oa,$),si(l,u,g,f),g=Mr?tp:0,!Q&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&f9(l,f,u);else if(l.tag===19)f9(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&oy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),P4(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&oy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}P4(u,!0,f,null,_,g);break;case"together":P4(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function vl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Mc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(C0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=hl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=hl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function D4(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&J1(l)))}function nY(l,u,f){switch(u.tag){case 3:Ue(u,u.stateNode.containerInfo),Nc(u,va,l.memoizedState.cache),Xu();break;case 27:case 5:Me(u);break;case 4:Ue(u,u.stateNode.containerInfo);break;case 10:Nc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,o4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Cc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?h9(l,u,f):(Cc(u),l=vl(l,u,f),l!==null?l.sibling:null);Cc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(C0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return p9(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(oa,oa.current),g)break;return null;case 22:return u.lanes=0,s9(l,u,f,u.pendingProps);case 24:Nc(u,va,l.memoizedState.cache)}return vl(l,u,f)}function m9(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)ba=!0;else{if(!D4(l,f)&&(u.flags&128)===0)return ba=!1,nY(l,u,f);ba=(l.flags&131072)!==0}else ba=!1,Mr&&(u.flags&1048576)!==0&&Wj(u,tp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=ed(u.elementType),u.type=l,typeof l=="function")zw(l)?(g=ad(l,g),u.tag=1,u=u9(null,u,l,g,f)):(u.tag=0,u=k4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=n9(null,u,l,g,f);break e}else if(b===N){u.tag=14,u=a9(null,u,l,g,f);break e}}throw u=X(l)||l,Error(n(306,u,""))}}return u;case 0:return k4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=ad(g,u.pendingProps),u9(l,u,g,b,f);case 3:e:{if(Ue(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,r4(l,u),cp(u,g,null,f);var $=u.memoizedState;if(g=$.cache,Nc(u,va,g),g!==_.cache&&Xw(u,[va],f,!0),lp(),g=$.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:$.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=d9(l,u,g,f);break e}else if(g!==b){b=Ls(Error(n(424)),u),rp(b),u=d9(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for($n=Vs(l.firstChild),ai=u,Mr=!0,Tc=null,Us=!0,f=sk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Xu(),g===b){u=vl(l,u,f);break e}si(l,u,g,f)}u=u.child}return u;case 26:return vy(l,u),l===null?(f=NC(u.type,null,u.pendingProps,null))?u.memoizedState=f:Mr||(f=u.type,l=u.pendingProps,g=Py(xe.current).createElement(f),g[Yr]=u,g[dn]=l,oi(g,f,l),dr(g),u.stateNode=g):u.memoizedState=NC(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Me(u),l===null&&Mr&&(g=u.stateNode=_C(u.type,u.pendingProps,xe.current),ai=u,Us=!0,b=$n,$c(u.type)?(m5=b,$n=Vs(g.firstChild)):$n=b),si(l,u,u.pendingProps.children,f),vy(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Mr&&((b=g=$n)&&(g=RY(g,u.type,u.pendingProps,Us),g!==null?(u.stateNode=g,ai=u,$n=Vs(g.firstChild),Us=!1,b=!0):b=!1),b||Ac(u)),Me(u),b=u.type,_=u.pendingProps,$=l!==null?l.memoizedProps:null,g=_.children,u5(b,_)?g=null:$!==null&&u5(b,$)&&(u.flags|=32),u.memoizedState!==null&&(b=c4(l,u,KX,null,null,f),kp._currentValue=b),vy(l,u),si(l,u,g,f),u.child;case 6:return l===null&&Mr&&((l=f=$n)&&(f=MY(f,u.pendingProps,Us),f!==null?(u.stateNode=f,ai=u,$n=null,l=!0):l=!1),l||Ac(u)),null;case 13:return h9(l,u,f);case 4:return Ue(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=rd(u,null,g,f):si(l,u,g,f),u.child;case 11:return n9(l,u,u.type,u.pendingProps,f);case 7:return si(l,u,u.pendingProps,f),u.child;case 8:return si(l,u,u.pendingProps.children,f),u.child;case 12:return si(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Nc(u,u.type,g.value),si(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,Zu(u),b=ii(b),g=g(b),u.flags|=1,si(l,u,g,f),u.child;case 14:return a9(l,u,u.type,u.pendingProps,f);case 15:return i9(l,u,u.type,u.pendingProps,f);case 19:return p9(l,u,f);case 31:return rY(l,u,f);case 22:return s9(l,u,f,u.pendingProps);case 24:return Zu(u),g=ii(va),l===null?(b=Jw(),b===null&&(b=An,_=Yw(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},t4(u),Nc(u,va,b)):((l.lanes&f)!==0&&(r4(l,u),cp(u,null,null,f),lp()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Nc(u,va,g)):(g=_.cache,Nc(u,va,g),g!==b.cache&&Xw(u,[va],f,!0))),si(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function xl(l){l.flags|=4}function L4(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(V9())l.flags|=8192;else throw td=ny,e4}else l.flags&=-16777217}function g9(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!OC(u))if(V9())l.flags|=8192;else throw td=ny,e4}function by(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?yr():536870912,l.lanes|=u,V0|=u)}function mp(l,u){if(!Mr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Un(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function aY(l,u,f){var g=u.pendingProps;switch(Hw(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(u),null;case 1:return Un(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),ml(va),ee(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(k0(u)?xl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ww())),Un(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(xl(u),_!==null?(Un(u),g9(u,_)):(Un(u),L4(u,b,null,g,f))):_?_!==l.memoizedState?(xl(u),Un(u),g9(u,_)):(Un(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&xl(u),Un(u),L4(u,b,l,g,f)),null;case 27:if(ne(u),f=xe.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Un(u),null}l=Ne.current,k0(u)?Qj(u):(l=_C(b,g,f),u.stateNode=l,xl(u))}return Un(u),null;case 5:if(ne(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Un(u),null}if(_=Ne.current,k0(u))Qj(u);else{var $=Py(xe.current);switch(_){case 1:_=$.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=$.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=$.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=$.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=$.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?$.createElement("select",{is:g.is}):$.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?$.createElement(b,{is:g.is}):$.createElement(b)}}_[Yr]=u,_[dn]=g;e:for($=u.child;$!==null;){if($.tag===5||$.tag===6)_.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===u)break e;for(;$.sibling===null;){if($.return===null||$.return===u)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}u.stateNode=_;e:switch(oi(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&xl(u)}}return Un(u),L4(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=xe.current,k0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ai,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Yr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||hC(l.nodeValue,f)),l||Ac(u,!0)}else l=Py(l).createTextNode(g),l[Yr]=u,u.stateNode=l}return Un(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=k0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Yr]=u}else Xu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Un(u),l=!1}else f=Ww(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(gs(u),u):(gs(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Un(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=k0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Yr]=u}else Xu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Un(u),b=!1}else b=Ww(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(gs(u),u):(gs(u),null)}return gs(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),by(u,u.updateQueue),Un(u),null);case 4:return ee(),l===null&&i5(u.stateNode.containerInfo),Un(u),null;case 10:return ml(u.type),Un(u),null;case 19:if(te(oa),g=u.memoizedState,g===null)return Un(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)mp(g,!1);else{if(ea!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=oy(l),_!==null){for(u.flags|=128,mp(g,!1),l=_.updateQueue,u.updateQueue=l,by(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)qj(f,l),f=f.sibling;return re(oa,oa.current&1|2),Mr&&fl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Ye()>Ay&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304)}else{if(!b)if(l=oy(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,by(u,l),mp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Mr)return Un(u),null}else 2*Ye()-g.renderingStartTime>Ay&&f!==536870912&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Ye(),l.sibling=null,f=oa.current,re(oa,b?f&1|2:f&1),Mr&&fl(u,g.treeForkCount),l):(Un(u),null);case 22:case 23:return gs(u),s4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Un(u),u.subtreeFlags&6&&(u.flags|=8192)):Un(u),f=u.updateQueue,f!==null&&by(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&te(Ju),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ml(va),Un(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function iY(l,u){switch(Hw(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ml(va),ee(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return ne(u),null;case 31:if(u.memoizedState!==null){if(gs(u),u.alternate===null)throw Error(n(340));Xu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(gs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Xu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return te(oa),null;case 4:return ee(),null;case 10:return ml(u.type),null;case 22:case 23:return gs(u),s4(),l!==null&&te(Ju),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return ml(va),null;case 25:return null;default:return null}}function y9(l,u){switch(Hw(u),u.tag){case 3:ml(va),ee();break;case 26:case 27:case 5:ne(u);break;case 4:ee();break;case 31:u.memoizedState!==null&&gs(u);break;case 13:gs(u);break;case 19:te(oa);break;case 10:ml(u.type);break;case 22:case 23:gs(u),s4(),l!==null&&te(Ju);break;case 24:ml(va)}}function gp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,$=f.inst;g=_(),$.destroy=g}f=f.next}while(f!==b)}}catch(Q){an(u,u.return,Q)}}function Ic(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var $=g.inst,Q=$.destroy;if(Q!==void 0){$.destroy=void 0,b=u;var ue=f,Oe=Q;try{Oe()}catch(qe){an(b,ue,qe)}}}g=g.next}while(g!==_)}}catch(qe){an(u,u.return,qe)}}function v9(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{lk(u,f)}catch(g){an(l,l.return,g)}}}function x9(l,u,f){f.props=ad(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){an(l,u,g)}}function yp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){an(l,u,b)}}function Po(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){an(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){an(l,u,b)}else f.current=null}function b9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){an(l,l.return,b)}}function B4(l,u,f){try{var g=l.stateNode;EY(g,l.type,f,u),g[dn]=u}catch(b){an(l,l.return,b)}}function w9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&$c(l.type)||l.tag===4}function $4(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||w9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&$c(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function U4(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=fn));else if(g!==4&&(g===27&&$c(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(U4(l,u,f),l=l.sibling;l!==null;)U4(l,u,f),l=l.sibling}function wy(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&$c(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(wy(l,u,f),l=l.sibling;l!==null;)wy(l,u,f),l=l.sibling}function S9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);oi(u,g,f),u[Yr]=l,u[dn]=f}catch(_){an(l,l.return,_)}}var bl=!1,wa=!1,z4=!1,_9=typeof WeakSet=="function"?WeakSet:Set,Ga=null;function sY(l,u){if(l=l.containerInfo,l5=Vy,l=Pj(l),Mw(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var $=0,Q=-1,ue=-1,Oe=0,qe=0,Ke=l,Re=null;t:for(;;){for(var Be;Ke!==f||b!==0&&Ke.nodeType!==3||(Q=$+b),Ke!==_||g!==0&&Ke.nodeType!==3||(ue=$+g),Ke.nodeType===3&&($+=Ke.nodeValue.length),(Be=Ke.firstChild)!==null;)Re=Ke,Ke=Be;for(;;){if(Ke===l)break t;if(Re===f&&++Oe===b&&(Q=$),Re===_&&++qe===g&&(ue=$),(Be=Ke.nextSibling)!==null)break;Ke=Re,Re=Ke.parentNode}Ke=Be}f=Q===-1||ue===-1?null:{start:Q,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(c5={focusedElem:l,selectionRange:f},Vy=!1,Ga=u;Ga!==null;)if(u=Ga,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ga=l;else for(;Ga!==null;){switch(u=Ga,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var It=ad(f.type,b);l=g.getSnapshotBeforeUpdate(It,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ht){an(f,f.return,Ht)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)h5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":h5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Ga=l;break}Ga=u.return}}function T9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Sl(l,f),g&4&&gp(5,f);break;case 1:if(Sl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch($){an(f,f.return,$)}else{var b=ad(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch($){an(f,f.return,$)}}g&64&&v9(f),g&512&&yp(f,f.return);break;case 3:if(Sl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{lk(l,u)}catch($){an(f,f.return,$)}}break;case 27:u===null&&g&4&&S9(f);case 26:case 5:Sl(l,f),u===null&&g&4&&b9(f),g&512&&yp(f,f.return);break;case 12:Sl(l,f);break;case 31:Sl(l,f),g&4&&E9(l,f);break;case 13:Sl(l,f),g&4&&j9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=mY.bind(null,f),PY(l,f))));break;case 22:if(g=f.memoizedState!==null||bl,!g){u=u!==null&&u.memoizedState!==null||wa,b=bl;var _=wa;bl=g,(wa=u)&&!_?_l(l,f,(f.subtreeFlags&8772)!==0):Sl(l,f),bl=b,wa=_}break;case 30:break;default:Sl(l,f)}}function A9(l){var u=l.alternate;u!==null&&(l.alternate=null,A9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Nt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Fn=null,Fi=!1;function wl(l,u,f){for(f=f.child;f!==null;)N9(l,u,f),f=f.sibling}function N9(l,u,f){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(ot,f)}catch{}switch(f.tag){case 26:wa||Po(f,u),wl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:wa||Po(f,u);var g=Fn,b=Fi;$c(f.type)&&(Fn=f.stateNode,Fi=!1),wl(l,u,f),Np(f.stateNode),Fn=g,Fi=b;break;case 5:wa||Po(f,u);case 6:if(g=Fn,b=Fi,Fn=null,wl(l,u,f),Fn=g,Fi=b,Fn!==null)if(Fi)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(f.stateNode)}catch(_){an(f,u,_)}else try{Fn.removeChild(f.stateNode)}catch(_){an(f,u,_)}break;case 18:Fn!==null&&(Fi?(l=Fn,vC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),X0(l)):vC(Fn,f.stateNode));break;case 4:g=Fn,b=Fi,Fn=f.stateNode.containerInfo,Fi=!0,wl(l,u,f),Fn=g,Fi=b;break;case 0:case 11:case 14:case 15:Ic(2,f,u),wa||Ic(4,f,u),wl(l,u,f);break;case 1:wa||(Po(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&x9(f,u,g)),wl(l,u,f);break;case 21:wl(l,u,f);break;case 22:wa=(g=wa)||f.memoizedState!==null,wl(l,u,f),wa=g;break;default:wl(l,u,f)}}function E9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{X0(l)}catch(f){an(u,u.return,f)}}}function j9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{X0(l)}catch(f){an(u,u.return,f)}}function oY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new _9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new _9),u;default:throw Error(n(435,l.tag))}}function Sy(l,u){var f=oY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=gY.bind(null,l,g);g.then(b,b)}})}function qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,$=u,Q=$;e:for(;Q!==null;){switch(Q.tag){case 27:if($c(Q.type)){Fn=Q.stateNode,Fi=!1;break e}break;case 5:Fn=Q.stateNode,Fi=!1;break e;case 3:case 4:Fn=Q.stateNode.containerInfo,Fi=!0;break e}Q=Q.return}if(Fn===null)throw Error(n(160));N9(_,$,b),Fn=null,Fi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)k9(u,l),u=u.sibling}var co=null;function k9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:qi(u,l),Hi(l),g&4&&(Ic(3,l,l.return),gp(3,l),Ic(5,l,l.return));break;case 1:qi(u,l),Hi(l),g&512&&(wa||f===null||Po(f,f.return)),g&64&&bl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=co;if(qi(u,l),Hi(l),g&512&&(wa||f===null||Po(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[gi]||_[Yr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),oi(_,g,f),_[Yr]=l,dr(_),g=_;break e;case"link":var $=kC("link","href",b).get(g+(f.href||""));if($){for(var Q=0;Q<$.length;Q++)if(_=$[Q],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){$.splice(Q,1);break t}}_=b.createElement(g),oi(_,g,f),b.head.appendChild(_);break;case"meta":if($=kC("meta","content",b).get(g+(f.content||""))){for(Q=0;Q<$.length;Q++)if(_=$[Q],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){$.splice(Q,1);break t}}_=b.createElement(g),oi(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[Yr]=l,dr(_),g=_}l.stateNode=g}else CC(b,l.type,l.stateNode);else l.stateNode=jC(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?CC(b,l.type,l.stateNode):jC(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&B4(l,l.memoizedProps,f.memoizedProps)}break;case 27:qi(u,l),Hi(l),g&512&&(wa||f===null||Po(f,f.return)),f!==null&&g&4&&B4(l,l.memoizedProps,f.memoizedProps);break;case 5:if(qi(u,l),Hi(l),g&512&&(wa||f===null||Po(f,f.return)),l.flags&32){b=l.stateNode;try{De(b,"")}catch(It){an(l,l.return,It)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,B4(l,b,f!==null?f.memoizedProps:b)),g&1024&&(z4=!0);break;case 6:if(qi(u,l),Hi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(It){an(l,l.return,It)}}break;case 3:if(By=null,b=co,co=Dy(u.containerInfo),qi(u,l),co=b,Hi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{X0(u.containerInfo)}catch(It){an(l,l.return,It)}z4&&(z4=!1,C9(l));break;case 4:g=co,co=Dy(l.stateNode.containerInfo),qi(u,l),Hi(l),co=g;break;case 12:qi(u,l),Hi(l);break;case 31:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 13:qi(u,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ty=Ye()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 22:b=l.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,Oe=bl,qe=wa;if(bl=Oe||b,wa=qe||ue,qi(u,l),wa=qe,bl=Oe,Hi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||ue||bl||wa||id(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){ue=f=u;try{if(_=ue.stateNode,b)$=_.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Q=ue.stateNode;var Ke=ue.memoizedProps.style,Re=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;Q.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(It){an(ue,ue.return,It)}}}else if(u.tag===6){if(f===null){ue=u;try{ue.stateNode.nodeValue=b?"":ue.memoizedProps}catch(It){an(ue,ue.return,It)}}}else if(u.tag===18){if(f===null){ue=u;try{var Be=ue.stateNode;b?xC(Be,!0):xC(ue.stateNode,!1)}catch(It){an(ue,ue.return,It)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Sy(l,f))));break;case 19:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 30:break;case 21:break;default:qi(u,l),Hi(l)}}function Hi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(w9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=$4(l);wy(l,_,b);break;case 5:var $=f.stateNode;f.flags&32&&(De($,""),f.flags&=-33);var Q=$4(l);wy(l,Q,$);break;case 3:case 4:var ue=f.stateNode.containerInfo,Oe=$4(l);U4(l,Oe,ue);break;default:throw Error(n(161))}}catch(qe){an(l,l.return,qe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function C9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;C9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Sl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)T9(l,u.alternate,u),u=u.sibling}function id(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ic(4,u,u.return),id(u);break;case 1:Po(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&x9(u,u.return,f),id(u);break;case 27:Np(u.stateNode);case 26:case 5:Po(u,u.return),id(u);break;case 22:u.memoizedState===null&&id(u);break;case 30:id(u);break;default:id(u)}l=l.sibling}}function _l(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,$=_.flags;switch(_.tag){case 0:case 11:case 15:_l(b,_,f),gp(4,_);break;case 1:if(_l(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Oe){an(g,g.return,Oe)}if(g=_,b=g.updateQueue,b!==null){var Q=g.stateNode;try{var ue=b.shared.hiddenCallbacks;if(ue!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ue.length;b++)ok(ue[b],Q)}catch(Oe){an(g,g.return,Oe)}}f&&$&64&&v9(_),yp(_,_.return);break;case 27:S9(_);case 26:case 5:_l(b,_,f),f&&g===null&&$&4&&b9(_),yp(_,_.return);break;case 12:_l(b,_,f);break;case 31:_l(b,_,f),f&&$&4&&E9(b,_);break;case 13:_l(b,_,f),f&&$&4&&j9(b,_);break;case 22:_.memoizedState===null&&_l(b,_,f),yp(_,_.return);break;case 30:break;default:_l(b,_,f)}u=u.sibling}}function V4(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&np(f))}function F4(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l))}function uo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)O9(l,u,f,g),u=u.sibling}function O9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:uo(l,u,f,g),b&2048&&gp(9,u);break;case 1:uo(l,u,f,g);break;case 3:uo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l)));break;case 12:if(b&2048){uo(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,$=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q($,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ue){an(u,u.return,ue)}}else uo(l,u,f,g);break;case 31:uo(l,u,f,g);break;case 13:uo(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,$=u.alternate,u.memoizedState!==null?_._visibility&2?uo(l,u,f,g):vp(l,u):_._visibility&2?uo(l,u,f,g):(_._visibility|=2,$0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&V4($,u);break;case 24:uo(l,u,f,g),b&2048&&F4(u.alternate,u);break;default:uo(l,u,f,g)}}function $0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,$=u,Q=f,ue=g,Oe=$.flags;switch($.tag){case 0:case 11:case 15:$0(_,$,Q,ue,b),gp(8,$);break;case 23:break;case 22:var qe=$.stateNode;$.memoizedState!==null?qe._visibility&2?$0(_,$,Q,ue,b):vp(_,$):(qe._visibility|=2,$0(_,$,Q,ue,b)),b&&Oe&2048&&V4($.alternate,$);break;case 24:$0(_,$,Q,ue,b),b&&Oe&2048&&F4($.alternate,$);break;default:$0(_,$,Q,ue,b)}u=u.sibling}}function vp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:vp(f,g),b&2048&&V4(g.alternate,g);break;case 24:vp(f,g),b&2048&&F4(g.alternate,g);break;default:vp(f,g)}u=u.sibling}}var xp=8192;function U0(l,u,f){if(l.subtreeFlags&xp)for(l=l.child;l!==null;)I9(l,u,f),l=l.sibling}function I9(l,u,f){switch(l.tag){case 26:U0(l,u,f),l.flags&xp&&l.memoizedState!==null&&WY(f,co,l.memoizedState,l.memoizedProps);break;case 5:U0(l,u,f);break;case 3:case 4:var g=co;co=Dy(l.stateNode.containerInfo),U0(l,u,f),co=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=xp,xp=16777216,U0(l,u,f),xp=g):U0(l,u,f));break;default:U0(l,u,f)}}function R9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function bp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ga=g,P9(g,l)}R9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)M9(l),l=l.sibling}function M9(l){switch(l.tag){case 0:case 11:case 15:bp(l),l.flags&2048&&Ic(9,l,l.return);break;case 3:bp(l);break;case 12:bp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,_y(l)):bp(l);break;default:bp(l)}}function _y(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ga=g,P9(g,l)}R9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ic(8,u,u.return),_y(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,_y(u));break;default:_y(u)}l=l.sibling}}function P9(l,u){for(;Ga!==null;){var f=Ga;switch(f.tag){case 0:case 11:case 15:Ic(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:np(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ga=g;else e:for(f=l;Ga!==null;){g=Ga;var b=g.sibling,_=g.return;if(A9(g),g===f){Ga=null;break e}if(b!==null){b.return=_,Ga=b;break e}Ga=_}}}var lY={getCacheForType:function(l){var u=ii(va),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return ii(va).controller.signal}},cY=typeof WeakMap=="function"?WeakMap:Map,Wr=0,An=null,_r=null,Nr=0,nn=0,ys=null,Rc=!1,z0=!1,q4=!1,Tl=0,ea=0,Mc=0,sd=0,H4=0,vs=0,V0=0,wp=null,Gi=null,G4=!1,Ty=0,D9=0,Ay=1/0,Ny=null,Pc=null,Ca=0,Dc=null,F0=null,Al=0,W4=0,K4=null,L9=null,Sp=0,Q4=null;function xs(){return(Wr&2)!==0&&Nr!==0?Nr&-Nr:H.T!==null?t5():un()}function B9(){if(vs===0)if((Nr&536870912)===0||Mr){var l=Cr;Cr<<=1,(Cr&3932160)===0&&(Cr=262144),vs=l}else vs=536870912;return l=ms.current,l!==null&&(l.flags|=32),vs}function Wi(l,u,f){(l===An&&(nn===2||nn===9)||l.cancelPendingCommit!==null)&&(q0(l,0),Lc(l,Nr,vs,!1)),kn(l,f),((Wr&2)===0||l!==An)&&(l===An&&((Wr&2)===0&&(sd|=f),ea===4&&Lc(l,Nr,vs,!1)),Do(l))}function $9(l,u,f){if((Wr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Kt(l,u),b=g?hY(l,u):Y4(l,u,!0),_=g;do{if(b===0){z0&&!g&&Lc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!uY(f)){b=Y4(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var $=0;else $=l.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){u=$;e:{var Q=l;b=wp;var ue=Q.current.memoizedState.isDehydrated;if(ue&&(q0(Q,$).flags|=256),$=Y4(Q,$,!1),$!==2){if(q4&&!ue){Q.errorRecoveryDisabledLanes|=_,sd|=_,b=4;break e}_=Gi,Gi=b,_!==null&&(Gi===null?Gi=_:Gi.push.apply(Gi,_))}b=$}if(_=!1,b!==2)continue}}if(b===1){q0(l,0),Lc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Lc(g,u,vs,!Rc);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=Ty+300-Ye(),10<b)){if(Lc(g,u,vs,!Rc),it(g,0,!0)!==0)break e;Al=u,g.timeoutHandle=gC(U9.bind(null,g,f,Gi,Ny,G4,u,vs,sd,V0,Rc,_,"Throttled",-0,0),b);break e}U9(g,f,Gi,Ny,G4,u,vs,sd,V0,Rc,_,null,-0,0)}}break}while(!0);Do(l)}function U9(l,u,f,g,b,_,$,Q,ue,Oe,qe,Ke,Re,Be){if(l.timeoutHandle=-1,Ke=u.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fn},I9(u,_,Ke);var It=(_&62914560)===_?Ty-Ye():(_&4194048)===_?D9-Ye():0;if(It=KY(Ke,It),It!==null){Al=_,l.cancelPendingCommit=It(K9.bind(null,l,u,_,f,g,b,$,Q,ue,qe,Ke,null,Re,Be)),Lc(l,_,$,!Oe);return}}K9(l,u,_,f,g,b,$,Q,ue)}function uY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!fs(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Lc(l,u,f,g){u&=~H4,u&=~sd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-Lt(b),$=1<<_;g[_]=-1,b&=~$}f!==0&&ga(l,f,u)}function Ey(){return(Wr&6)===0?(_p(0),!1):!0}function X4(){if(_r!==null){if(nn===0)var l=_r.return;else l=_r,pl=Yu=null,h4(l),M0=null,ip=0,l=_r;for(;l!==null;)y9(l.alternate,l),l=l.return;_r=null}}function q0(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,CY(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Al=0,X4(),An=l,_r=f=hl(l.current,null),Nr=u,nn=0,ys=null,Rc=!1,z0=Kt(l,u),q4=!1,V0=vs=H4=sd=Mc=ea=0,Gi=wp=null,G4=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-Lt(g),_=1<<b;u|=l[b],g&=~_}return Tl=u,K1(),f}function z9(l,u){lr=null,H.H=fp,u===R0||u===ry?(u=nk(),nn=3):u===e4?(u=nk(),nn=4):nn=u===j4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ys=u,_r===null&&(ea=1,gy(l,Ls(u,l.current)))}function V9(){var l=ms.current;return l===null?!0:(Nr&4194048)===Nr?zs===null:(Nr&62914560)===Nr||(Nr&536870912)!==0?l===zs:!1}function F9(){var l=H.H;return H.H=fp,l===null?fp:l}function q9(){var l=H.A;return H.A=lY,l}function jy(){ea=4,Rc||(Nr&4194048)!==Nr&&ms.current!==null||(z0=!0),(Mc&134217727)===0&&(sd&134217727)===0||An===null||Lc(An,Nr,vs,!1)}function Y4(l,u,f){var g=Wr;Wr|=2;var b=F9(),_=q9();(An!==l||Nr!==u)&&(Ny=null,q0(l,u)),u=!1;var $=ea;e:do try{if(nn!==0&&_r!==null){var Q=_r,ue=ys;switch(nn){case 8:X4(),$=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(u=!0);var Oe=nn;if(nn=0,ys=null,H0(l,Q,ue,Oe),f&&z0){$=0;break e}break;default:Oe=nn,nn=0,ys=null,H0(l,Q,ue,Oe)}}dY(),$=ea;break}catch(qe){z9(l,qe)}while(!0);return u&&l.shellSuspendCounter++,pl=Yu=null,Wr=g,H.H=b,H.A=_,_r===null&&(An=null,Nr=0,K1()),$}function dY(){for(;_r!==null;)H9(_r)}function hY(l,u){var f=Wr;Wr|=2;var g=F9(),b=q9();An!==l||Nr!==u?(Ny=null,Ay=Ye()+500,q0(l,u)):z0=Kt(l,u);e:do try{if(nn!==0&&_r!==null){u=_r;var _=ys;t:switch(nn){case 1:nn=0,ys=null,H0(l,u,_,1);break;case 2:case 9:if(tk(_)){nn=0,ys=null,G9(u);break}u=function(){nn!==2&&nn!==9||An!==l||(nn=7),Do(l)},_.then(u,u);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:tk(_)?(nn=0,ys=null,G9(u)):(nn=0,ys=null,H0(l,u,_,7));break;case 5:var $=null;switch(_r.tag){case 26:$=_r.memoizedState;case 5:case 27:var Q=_r;if($?OC($):Q.stateNode.complete){nn=0,ys=null;var ue=Q.sibling;if(ue!==null)_r=ue;else{var Oe=Q.return;Oe!==null?(_r=Oe,ky(Oe)):_r=null}break t}}nn=0,ys=null,H0(l,u,_,5);break;case 6:nn=0,ys=null,H0(l,u,_,6);break;case 8:X4(),ea=6;break e;default:throw Error(n(462))}}fY();break}catch(qe){z9(l,qe)}while(!0);return pl=Yu=null,H.H=g,H.A=b,Wr=f,_r!==null?0:(An=null,Nr=0,K1(),ea)}function fY(){for(;_r!==null&&!Je();)H9(_r)}function H9(l){var u=m9(l.alternate,l,Tl);l.memoizedProps=l.pendingProps,u===null?ky(l):_r=u}function G9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=c9(f,u,u.pendingProps,u.type,void 0,Nr);break;case 11:u=c9(f,u,u.pendingProps,u.type.render,u.ref,Nr);break;case 5:h4(u);default:y9(f,u),u=_r=qj(u,Tl),u=m9(f,u,Tl)}l.memoizedProps=l.pendingProps,u===null?ky(l):_r=u}function H0(l,u,f,g){pl=Yu=null,h4(u),M0=null,ip=0;var b=u.return;try{if(tY(l,b,u,f,Nr)){ea=1,gy(l,Ls(f,l.current)),_r=null;return}}catch(_){if(b!==null)throw _r=b,_;ea=1,gy(l,Ls(f,l.current)),_r=null;return}u.flags&32768?(Mr||g===1?l=!0:z0||(Nr&536870912)!==0?l=!1:(Rc=l=!0,(g===2||g===9||g===3||g===6)&&(g=ms.current,g!==null&&g.tag===13&&(g.flags|=16384))),W9(u,l)):ky(u)}function ky(l){var u=l;do{if((u.flags&32768)!==0){W9(u,Rc);return}l=u.return;var f=aY(u.alternate,u,Tl);if(f!==null){_r=f;return}if(u=u.sibling,u!==null){_r=u;return}_r=u=l}while(u!==null);ea===0&&(ea=5)}function W9(l,u){do{var f=iY(l.alternate,l);if(f!==null){f.flags&=32767,_r=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){_r=l;return}_r=l=f}while(l!==null);ea=6,_r=null}function K9(l,u,f,g,b,_,$,Q,ue){l.cancelPendingCommit=null;do Cy();while(Ca!==0);if((Wr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=$w,er(l,f,_,$,Q,ue),l===An&&(_r=An=null,Nr=0),F0=u,Dc=l,Al=f,W4=_,K4=b,L9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,yY(Vt,function(){return J9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=Z.p,Z.p=2,$=Wr,Wr|=4;try{sY(l,u,f)}finally{Wr=$,Z.p=b,H.T=g}}Ca=1,Q9(),X9(),Y9()}}function Q9(){if(Ca===1){Ca=0;var l=Dc,u=F0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=Wr;Wr|=4;try{k9(u,l);var _=c5,$=Pj(l.containerInfo),Q=_.focusedElem,ue=_.selectionRange;if($!==Q&&Q&&Q.ownerDocument&&Mj(Q.ownerDocument.documentElement,Q)){if(ue!==null&&Mw(Q)){var Oe=ue.start,qe=ue.end;if(qe===void 0&&(qe=Oe),"selectionStart"in Q)Q.selectionStart=Oe,Q.selectionEnd=Math.min(qe,Q.value.length);else{var Ke=Q.ownerDocument||document,Re=Ke&&Ke.defaultView||window;if(Re.getSelection){var Be=Re.getSelection(),It=Q.textContent.length,Ht=Math.min(ue.start,It),gn=ue.end===void 0?Ht:Math.min(ue.end,It);!Be.extend&&Ht>gn&&($=gn,gn=Ht,Ht=$);var _e=Rj(Q,Ht),ge=Rj(Q,gn);if(_e&&ge&&(Be.rangeCount!==1||Be.anchorNode!==_e.node||Be.anchorOffset!==_e.offset||Be.focusNode!==ge.node||Be.focusOffset!==ge.offset)){var ke=Ke.createRange();ke.setStart(_e.node,_e.offset),Be.removeAllRanges(),Ht>gn?(Be.addRange(ke),Be.extend(ge.node,ge.offset)):(ke.setEnd(ge.node,ge.offset),Be.addRange(ke))}}}}for(Ke=[],Be=Q;Be=Be.parentNode;)Be.nodeType===1&&Ke.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ke.length;Q++){var We=Ke[Q];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}Vy=!!l5,c5=l5=null}finally{Wr=b,Z.p=g,H.T=f}}l.current=u,Ca=2}}function X9(){if(Ca===2){Ca=0;var l=Dc,u=F0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=Wr;Wr|=4;try{T9(l,u.alternate,u)}finally{Wr=b,Z.p=g,H.T=f}}Ca=3}}function Y9(){if(Ca===4||Ca===3){Ca=0,de();var l=Dc,u=F0,f=Al,g=L9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ca=5:(Ca=0,F0=Dc=null,Z9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Pc=null),Ar(f),u=u.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(ot,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=Z.p,Z.p=2,H.T=null;try{for(var _=l.onRecoverableError,$=0;$<g.length;$++){var Q=g[$];_(Q.value,{componentStack:Q.stack})}}finally{H.T=u,Z.p=b}}(Al&3)!==0&&Cy(),Do(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===Q4?Sp++:(Sp=0,Q4=l):Sp=0,_p(0)}}function Z9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,np(u)))}function Cy(){return Q9(),X9(),Y9(),J9()}function J9(){if(Ca!==5)return!1;var l=Dc,u=W4;W4=0;var f=Ar(Al),g=H.T,b=Z.p;try{Z.p=32>f?32:f,H.T=null,f=K4,K4=null;var _=Dc,$=Al;if(Ca=0,F0=Dc=null,Al=0,(Wr&6)!==0)throw Error(n(331));var Q=Wr;if(Wr|=4,M9(_.current),O9(_,_.current,$,f),Wr=Q,_p(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(ot,_)}catch{}return!0}finally{Z.p=b,H.T=g,Z9(l,u)}}function eC(l,u,f){u=Ls(f,u),u=E4(l.stateNode,u,2),l=kc(l,u,2),l!==null&&(kn(l,2),Do(l))}function an(l,u,f){if(l.tag===3)eC(l,l,f);else for(;u!==null;){if(u.tag===3){eC(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Pc===null||!Pc.has(g))){l=Ls(f,l),f=t9(2),g=kc(u,f,2),g!==null&&(r9(f,g,u,l),kn(g,2),Do(g));break}}u=u.return}}function Z4(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new cY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(q4=!0,b.add(f),l=pY.bind(null,l,u,f),u.then(l,l))}function pY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,An===l&&(Nr&f)===f&&(ea===4||ea===3&&(Nr&62914560)===Nr&&300>Ye()-Ty?(Wr&2)===0&&q0(l,0):H4|=f,V0===Nr&&(V0=0)),Do(l)}function tC(l,u){u===0&&(u=yr()),l=Ku(l,u),l!==null&&(kn(l,u),Do(l))}function mY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),tC(l,f)}function gY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),tC(l,f)}function yY(l,u){return nt(l,u)}var Oy=null,G0=null,J4=!1,Iy=!1,e5=!1,Bc=0;function Do(l){l!==G0&&l.next===null&&(G0===null?Oy=G0=l:G0=G0.next=l),Iy=!0,J4||(J4=!0,xY())}function _p(l,u){if(!e5&&Iy){e5=!0;do for(var f=!1,g=Oy;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var $=g.suspendedLanes,Q=g.pingedLanes;_=(1<<31-Lt(42|l)+1)-1,_&=b&~($&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,iC(g,_))}else _=Nr,_=it(g,g===An?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Kt(g,_)||(f=!0,iC(g,_));g=g.next}while(f);e5=!1}}function vY(){rC()}function rC(){Iy=J4=!1;var l=0;Bc!==0&&kY()&&(l=Bc);for(var u=Ye(),f=null,g=Oy;g!==null;){var b=g.next,_=nC(g,u);_===0?(g.next=null,f===null?Oy=b:f.next=b,b===null&&(G0=f)):(f=g,(l!==0||(_&3)!==0)&&(Iy=!0)),g=b}Ca!==0&&Ca!==5||_p(l),Bc!==0&&(Bc=0)}function nC(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var $=31-Lt(_),Q=1<<$,ue=b[$];ue===-1?((Q&f)===0||(Q&g)!==0)&&(b[$]=br(Q,u)):ue<=u&&(l.expiredLanes|=Q),_&=~Q}if(u=An,f=Nr,f=it(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(nn===2||nn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&mt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Kt(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&mt(g),Ar(f)){case 2:case 8:f=gt;break;case 32:f=Vt;break;case 268435456:f=Hr;break;default:f=Vt}return g=aC.bind(null,l),f=nt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&mt(g),l.callbackPriority=2,l.callbackNode=null,2}function aC(l,u){if(Ca!==0&&Ca!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Cy()&&l.callbackNode!==f)return null;var g=Nr;return g=it(l,l===An?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:($9(l,g,u),nC(l,Ye()),l.callbackNode!=null&&l.callbackNode===f?aC.bind(null,l):null)}function iC(l,u){if(Cy())return null;$9(l,u,!0)}function xY(){OY(function(){(Wr&6)!==0?nt(xt,vY):rC()})}function t5(){if(Bc===0){var l=O0;l===0&&(l=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Bc=l}return Bc}function sC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Tn(""+l)}function oC(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function bY(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=sC((b[dn]||null).action),$=g.submitter;$&&(u=(u=$[dn]||null)?sC(u.formAction):$.getAttribute("formAction"),u!==null&&(_=u,$=null));var Q=new zu("action","action",null,g,b);l.push({event:Q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Bc!==0){var ue=$?oC(b,$):new FormData(b);w4(f,{pending:!0,data:ue,method:b.method,action:_},null,ue)}}else typeof _=="function"&&(Q.preventDefault(),ue=$?oC(b,$):new FormData(b),w4(f,{pending:!0,data:ue,method:b.method,action:_},_,ue))},currentTarget:b}]})}}for(var r5=0;r5<Bw.length;r5++){var n5=Bw[r5],wY=n5.toLowerCase(),SY=n5[0].toUpperCase()+n5.slice(1);lo(wY,"on"+SY)}lo(Bj,"onAnimationEnd"),lo($j,"onAnimationIteration"),lo(Uj,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(BX,"onTransitionRun"),lo($X,"onTransitionStart"),lo(UX,"onTransitionCancel"),lo(zj,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_Y=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tp));function lC(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var $=g.length-1;0<=$;$--){var Q=g[$],ue=Q.instance,Oe=Q.currentTarget;if(Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(qe){W1(qe)}b.currentTarget=null,_=ue}else for($=0;$<g.length;$++){if(Q=g[$],ue=Q.instance,Oe=Q.currentTarget,Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(qe){W1(qe)}b.currentTarget=null,_=ue}}}}function Tr(l,u){var f=u[ni];f===void 0&&(f=u[ni]=new Set);var g=l+"__bubble";f.has(g)||(cC(u,l,2,!1),f.add(g))}function a5(l,u,f){var g=0;u&&(g|=4),cC(f,l,g,u)}var Ry="_reactListening"+Math.random().toString(36).slice(2);function i5(l){if(!l[Ry]){l[Ry]=!0,rn.forEach(function(f){f!=="selectionchange"&&(_Y.has(f)||a5(f,!1,l),a5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Ry]||(u[Ry]=!0,a5("selectionchange",!1,u))}}function cC(l,u,f,g){switch(BC(u)){case 2:var b=YY;break;case 8:b=ZY;break;default:b=b5}f=b.bind(null,u,f,l),b=void 0,!Gf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function s5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var $=g.tag;if($===3||$===4){var Q=g.stateNode.containerInfo;if(Q===b)break;if($===4)for($=g.return;$!==null;){var ue=$.tag;if((ue===3||ue===4)&&$.stateNode.containerInfo===b)return;$=$.return}for(;Q!==null;){if($=he(Q),$===null)return;if(ue=$.tag,ue===5||ue===6||ue===26||ue===27){g=_=$;continue e}Q=Q.parentNode}}g=g.return}O1(function(){var Oe=_,qe=Rr(f),Ke=[];e:{var Re=Vj.get(l);if(Re!==void 0){var Be=zu,It=l;switch(l){case"keypress":if(Uu(f)===0)break e;case"keydown":case"keyup":Be=U1;break;case"focusin":It="focus",Be=xc;break;case"focusout":It="blur",Be=xc;break;case"beforeblur":case"afterblur":Be=xc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=R1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=V1;break;case Bj:case $j:case Uj:Be=w0;break;case zj:Be=S0;break;case"scroll":case"scrollend":Be=I1;break;case"wheel":Be=q1;break;case"copy":case"cut":case"paste":Be=D1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Yf;break;case"toggle":case"beforetoggle":Be=wc}var Ht=(u&4)!==0,gn=!Ht&&(l==="scroll"||l==="scrollend"),_e=Ht?Re!==null?Re+"Capture":null:Re;Ht=[];for(var ge=Oe,ke;ge!==null;){var We=ge;if(ke=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||ke===null||_e===null||(We=zi(ge,_e),We!=null&&Ht.push(Ap(ge,We,ke))),gn)break;ge=ge.return}0<Ht.length&&(Re=new Be(Re,It,null,f,qe),Ke.push({event:Re,listeners:Ht}))}}if((u&7)===0){e:{if(Re=l==="mouseover"||l==="pointerover",Be=l==="mouseout"||l==="pointerout",Re&&f!==Co&&(It=f.relatedTarget||f.fromElement)&&(he(It)||It[Sn]))break e;if((Be||Re)&&(Re=qe.window===qe?qe:(Re=qe.ownerDocument)?Re.defaultView||Re.parentWindow:window,Be?(It=f.relatedTarget||f.toElement,Be=Oe,It=It?he(It):null,It!==null&&(gn=i(It),Ht=It.tag,It!==gn||Ht!==5&&Ht!==27&&Ht!==6)&&(It=null)):(Be=null,It=Oe),Be!==It)){if(Ht=R1,We="onMouseLeave",_e="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Ht=Yf,We="onPointerLeave",_e="onPointerEnter",ge="pointer"),gn=Be==null?Re:ut(Be),ke=It==null?Re:ut(It),Re=new Ht(We,ge+"leave",Be,f,qe),Re.target=gn,Re.relatedTarget=ke,We=null,he(qe)===Oe&&(Ht=new Ht(_e,ge+"enter",It,f,qe),Ht.target=ke,Ht.relatedTarget=gn,We=Ht),gn=We,Be&&It)t:{for(Ht=TY,_e=Be,ge=It,ke=0,We=_e;We;We=Ht(We))ke++;We=0;for(var Ut=ge;Ut;Ut=Ht(Ut))We++;for(;0<ke-We;)_e=Ht(_e),ke--;for(;0<We-ke;)ge=Ht(ge),We--;for(;ke--;){if(_e===ge||ge!==null&&_e===ge.alternate){Ht=_e;break t}_e=Ht(_e),ge=Ht(ge)}Ht=null}else Ht=null;Be!==null&&uC(Ke,Re,Be,Ht,!1),It!==null&&gn!==null&&uC(Ke,gn,It,Ht,!0)}}e:{if(Re=Oe?ut(Oe):window,Be=Re.nodeName&&Re.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Re.type==="file")var $r=Ej;else if(Vi(Re))if(jj)$r=PX;else{$r=RX;var Dt=IX}else Be=Re.nodeName,!Be||Be.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?Oe&&_n(Oe.elementType)&&($r=Ej):$r=MX;if($r&&($r=$r(l,Oe))){Hu(Ke,$r,f,qe);break e}Dt&&Dt(l,Re,Oe),l==="focusout"&&Oe&&Re.type==="number"&&Oe.memoizedProps.value!=null&&Zr(Re,"number",Re.value)}switch(Dt=Oe?ut(Oe):window,l){case"focusin":(Vi(Dt)||Dt.contentEditable==="true")&&(_0=Dt,Pw=Oe,ep=null);break;case"focusout":ep=Pw=_0=null;break;case"mousedown":Dw=!0;break;case"contextmenu":case"mouseup":case"dragend":Dw=!1,Dj(Ke,f,qe);break;case"selectionchange":if(LX)break;case"keydown":case"keyup":Dj(Ke,f,qe)}var hr;if(P)e:{switch(l){case"compositionstart":var Er="onCompositionStart";break e;case"compositionend":Er="onCompositionEnd";break e;case"compositionupdate":Er="onCompositionUpdate";break e}Er=void 0}else vr?Jr(l,f)&&(Er="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Er="onCompositionStart");Er&&(Te&&f.locale!=="ko"&&(vr||Er!=="onCompositionStart"?Er==="onCompositionEnd"&&vr&&(hr=mc()):(hs=qe,x0="value"in hs?hs.value:hs.textContent,vr=!0)),Dt=My(Oe,Er),0<Dt.length&&(Er=new Kf(Er,l,null,f,qe),Ke.push({event:Er,listeners:Dt}),hr?Er.data=hr:(hr=ya(f),hr!==null&&(Er.data=hr)))),(hr=J?qa(l,f):Ha(l,f))&&(Er=My(Oe,"onBeforeInput"),0<Er.length&&(Dt=new Kf("onBeforeInput","beforeinput",null,f,qe),Ke.push({event:Dt,listeners:Er}),Dt.data=hr)),bY(Ke,l,Oe,f,qe)}lC(Ke,u)})}function Ap(l,u,f){return{instance:l,listener:u,currentTarget:f}}function My(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=zi(l,f),b!=null&&g.unshift(Ap(l,b,_)),b=zi(l,u),b!=null&&g.push(Ap(l,b,_))),l.tag===3)return g;l=l.return}return[]}function TY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function uC(l,u,f,g,b){for(var _=u._reactName,$=[];f!==null&&f!==g;){var Q=f,ue=Q.alternate,Oe=Q.stateNode;if(Q=Q.tag,ue!==null&&ue===g)break;Q!==5&&Q!==26&&Q!==27||Oe===null||(ue=Oe,b?(Oe=zi(f,_),Oe!=null&&$.unshift(Ap(f,Oe,ue))):b||(Oe=zi(f,_),Oe!=null&&$.push(Ap(f,Oe,ue)))),f=f.return}$.length!==0&&l.push({event:u,listeners:$})}var AY=/\r\n?/g,NY=/\u0000|\uFFFD/g;function dC(l){return(typeof l=="string"?l:""+l).replace(AY,`
`).replace(NY,"")}function hC(l,u){return u=dC(u),dC(l)===u}function mn(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||De(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&De(l,""+g);break;case"className":us(l,"class",g);break;case"tabIndex":us(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":us(l,f,g);break;case"style":Qt(l,g,_);break;case"data":if(u!=="object"){us(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Tn(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&mn(l,u,"name",b.name,b,null),mn(l,u,"formEncType",b.formEncType,b,null),mn(l,u,"formMethod",b.formMethod,b,null),mn(l,u,"formTarget",b.formTarget,b,null)):(mn(l,u,"encType",b.encType,b,null),mn(l,u,"method",b.method,b,null),mn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Tn(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=fn);break;case"onScroll":g!=null&&Tr("scroll",l);break;case"onScrollEnd":g!=null&&Tr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=Tn(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":Tr("beforetoggle",l),Tr("toggle",l),cs(l,"popover",g);break;case"xlinkActuate":ja(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ja(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ja(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ja(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ja(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ja(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ja(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ja(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ja(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":cs(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ka.get(f)||f,cs(l,f,g))}}function o5(l,u,f,g,b,_){switch(f){case"style":Qt(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?De(l,g):(typeof g=="number"||typeof g=="bigint")&&De(l,""+g);break;case"onScroll":g!=null&&Tr("scroll",l);break;case"onScrollEnd":g!=null&&Tr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[dn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):cs(l,f,g)}}}function oi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tr("error",l),Tr("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var $=f[_];if($!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:mn(l,u,_,$,f,null)}}b&&mn(l,u,"srcSet",f.srcSet,f,null),g&&mn(l,u,"src",f.src,f,null);return;case"input":Tr("invalid",l);var Q=_=$=b=null,ue=null,Oe=null;for(g in f)if(f.hasOwnProperty(g)){var qe=f[g];if(qe!=null)switch(g){case"name":b=qe;break;case"type":$=qe;break;case"checked":ue=qe;break;case"defaultChecked":Oe=qe;break;case"value":_=qe;break;case"defaultValue":Q=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,u));break;default:mn(l,u,g,qe,f,null)}}Sr(l,_,Q,ue,Oe,$,b,!1);return;case"select":Tr("invalid",l),g=$=_=null;for(b in f)if(f.hasOwnProperty(b)&&(Q=f[b],Q!=null))switch(b){case"value":_=Q;break;case"defaultValue":$=Q;break;case"multiple":g=Q;default:mn(l,u,b,Q,f,null)}u=_,f=$,l.multiple=!!g,u!=null?oe(l,!!g,u,!1):f!=null&&oe(l,!!g,f,!0);return;case"textarea":Tr("invalid",l),_=b=g=null;for($ in f)if(f.hasOwnProperty($)&&(Q=f[$],Q!=null))switch($){case"value":g=Q;break;case"defaultValue":b=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:mn(l,u,$,Q,f,null)}ze(l,g,b,_);return;case"option":for(ue in f)if(f.hasOwnProperty(ue)&&(g=f[ue],g!=null))switch(ue){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:mn(l,u,ue,g,f,null)}return;case"dialog":Tr("beforetoggle",l),Tr("toggle",l),Tr("cancel",l),Tr("close",l);break;case"iframe":case"object":Tr("load",l);break;case"video":case"audio":for(g=0;g<Tp.length;g++)Tr(Tp[g],l);break;case"image":Tr("error",l),Tr("load",l);break;case"details":Tr("toggle",l);break;case"embed":case"source":case"link":Tr("error",l),Tr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in f)if(f.hasOwnProperty(Oe)&&(g=f[Oe],g!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:mn(l,u,Oe,g,f,null)}return;default:if(_n(u)){for(qe in f)f.hasOwnProperty(qe)&&(g=f[qe],g!==void 0&&o5(l,u,qe,g,f,void 0));return}}for(Q in f)f.hasOwnProperty(Q)&&(g=f[Q],g!=null&&mn(l,u,Q,g,f,null))}function EY(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,$=null,Q=null,ue=null,Oe=null,qe=null;for(Be in f){var Ke=f[Be];if(f.hasOwnProperty(Be)&&Ke!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ue=Ke;default:g.hasOwnProperty(Be)||mn(l,u,Be,null,g,Ke)}}for(var Re in g){var Be=g[Re];if(Ke=f[Re],g.hasOwnProperty(Re)&&(Be!=null||Ke!=null))switch(Re){case"type":_=Be;break;case"name":b=Be;break;case"checked":Oe=Be;break;case"defaultChecked":qe=Be;break;case"value":$=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,u));break;default:Be!==Ke&&mn(l,u,Re,Be,g,Ke)}}Yt(l,$,Q,ue,Oe,qe,_,b);return;case"select":Be=$=Q=Re=null;for(_ in f)if(ue=f[_],f.hasOwnProperty(_)&&ue!=null)switch(_){case"value":break;case"multiple":Be=ue;default:g.hasOwnProperty(_)||mn(l,u,_,null,g,ue)}for(b in g)if(_=g[b],ue=f[b],g.hasOwnProperty(b)&&(_!=null||ue!=null))switch(b){case"value":Re=_;break;case"defaultValue":Q=_;break;case"multiple":$=_;default:_!==ue&&mn(l,u,b,_,g,ue)}u=Q,f=$,g=Be,Re!=null?oe(l,!!f,Re,!1):!!g!=!!f&&(u!=null?oe(l,!!f,u,!0):oe(l,!!f,f?[]:"",!1));return;case"textarea":Be=Re=null;for(Q in f)if(b=f[Q],f.hasOwnProperty(Q)&&b!=null&&!g.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:mn(l,u,Q,null,g,b)}for($ in g)if(b=g[$],_=f[$],g.hasOwnProperty($)&&(b!=null||_!=null))switch($){case"value":Re=b;break;case"defaultValue":Be=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&mn(l,u,$,b,g,_)}be(l,Re,Be);return;case"option":for(var It in f)if(Re=f[It],f.hasOwnProperty(It)&&Re!=null&&!g.hasOwnProperty(It))switch(It){case"selected":l.selected=!1;break;default:mn(l,u,It,null,g,Re)}for(ue in g)if(Re=g[ue],Be=f[ue],g.hasOwnProperty(ue)&&Re!==Be&&(Re!=null||Be!=null))switch(ue){case"selected":l.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:mn(l,u,ue,Re,g,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in f)Re=f[Ht],f.hasOwnProperty(Ht)&&Re!=null&&!g.hasOwnProperty(Ht)&&mn(l,u,Ht,null,g,Re);for(Oe in g)if(Re=g[Oe],Be=f[Oe],g.hasOwnProperty(Oe)&&Re!==Be&&(Re!=null||Be!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,u));break;default:mn(l,u,Oe,Re,g,Be)}return;default:if(_n(u)){for(var gn in f)Re=f[gn],f.hasOwnProperty(gn)&&Re!==void 0&&!g.hasOwnProperty(gn)&&o5(l,u,gn,void 0,g,Re);for(qe in g)Re=g[qe],Be=f[qe],!g.hasOwnProperty(qe)||Re===Be||Re===void 0&&Be===void 0||o5(l,u,qe,Re,g,Be);return}}for(var _e in f)Re=f[_e],f.hasOwnProperty(_e)&&Re!=null&&!g.hasOwnProperty(_e)&&mn(l,u,_e,null,g,Re);for(Ke in g)Re=g[Ke],Be=f[Ke],!g.hasOwnProperty(Ke)||Re===Be||Re==null&&Be==null||mn(l,u,Ke,Re,g,Be)}function fC(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,$=b.initiatorType,Q=b.duration;if(_&&Q&&fC($)){for($=0,Q=b.responseEnd,g+=1;g<f.length;g++){var ue=f[g],Oe=ue.startTime;if(Oe>Q)break;var qe=ue.transferSize,Ke=ue.initiatorType;qe&&fC(Ke)&&(ue=ue.responseEnd,$+=qe*(ue<Q?1:(Q-Oe)/(ue-Oe)))}if(--g,u+=8*(_+$)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var l5=null,c5=null;function Py(l){return l.nodeType===9?l:l.ownerDocument}function pC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mC(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function u5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var d5=null;function kY(){var l=window.event;return l&&l.type==="popstate"?l===d5?!1:(d5=l,!0):(d5=null,!1)}var gC=typeof setTimeout=="function"?setTimeout:void 0,CY=typeof clearTimeout=="function"?clearTimeout:void 0,yC=typeof Promise=="function"?Promise:void 0,OY=typeof queueMicrotask=="function"?queueMicrotask:typeof yC<"u"?function(l){return yC.resolve(null).then(l).catch(IY)}:gC;function IY(l){setTimeout(function(){throw l})}function $c(l){return l==="head"}function vC(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),X0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Np(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Np(f);for(var _=f.firstChild;_;){var $=_.nextSibling,Q=_.nodeName;_[gi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=$}}else f==="body"&&Np(l.ownerDocument.body);f=b}while(f);X0(u)}function xC(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function h5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":h5(f),Nt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function RY(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[gi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=Vs(l.nextSibling),l===null)break}return null}function MY(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Vs(l.nextSibling),l===null))return null;return l}function bC(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Vs(l.nextSibling),l===null))return null;return l}function f5(l){return l.data==="$?"||l.data==="$~"}function p5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function PY(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Vs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var m5=null;function wC(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Vs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function SC(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function _C(l,u,f){switch(u=Py(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Np(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Nt(l)}var Fs=new Map,TC=new Set;function Dy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Nl=Z.d;Z.d={f:DY,r:LY,D:BY,C:$Y,L:UY,m:zY,X:FY,S:VY,M:qY};function DY(){var l=Nl.f(),u=Ey();return l||u}function LY(l){var u=Ze(l);u!==null&&u.tag===5&&u.type==="form"?zk(u):Nl.r(l)}var W0=typeof document>"u"?null:document;function AC(l,u,f){var g=W0;if(g&&typeof u=="string"&&u){var b=jt(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),TC.has(b)||(TC.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),oi(u,"link",l),dr(u),g.head.appendChild(u)))}}function BY(l){Nl.D(l),AC("dns-prefetch",l,null)}function $Y(l,u){Nl.C(l,u),AC("preconnect",l,u)}function UY(l,u,f){Nl.L(l,u,f);var g=W0;if(g&&l&&u){var b='link[rel="preload"][as="'+jt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+jt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+jt(f.imageSizes)+'"]')):b+='[href="'+jt(l)+'"]';var _=b;switch(u){case"style":_=K0(l);break;case"script":_=Q0(l)}Fs.has(_)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Fs.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Ep(_))||u==="script"&&g.querySelector(jp(_))||(u=g.createElement("link"),oi(u,"link",l),dr(u),g.head.appendChild(u)))}}function zY(l,u){Nl.m(l,u);var f=W0;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+jt(g)+'"][href="'+jt(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Q0(l)}if(!Fs.has(_)&&(l=m({rel:"modulepreload",href:l},u),Fs.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(jp(_)))return}g=f.createElement("link"),oi(g,"link",l),dr(g),f.head.appendChild(g)}}}function VY(l,u,f){Nl.S(l,u,f);var g=W0;if(g&&l){var b=Xt(g).hoistableStyles,_=K0(l);u=u||"default";var $=b.get(_);if(!$){var Q={loading:0,preload:null};if($=g.querySelector(Ep(_)))Q.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Fs.get(_))&&g5(l,f);var ue=$=g.createElement("link");dr(ue),oi(ue,"link",l),ue._p=new Promise(function(Oe,qe){ue.onload=Oe,ue.onerror=qe}),ue.addEventListener("load",function(){Q.loading|=1}),ue.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,Ly($,u,g)}$={type:"stylesheet",instance:$,count:1,state:Q},b.set(_,$)}}}function FY(l,u){Nl.X(l,u);var f=W0;if(f&&l){var g=Xt(f).hoistableScripts,b=Q0(l),_=g.get(b);_||(_=f.querySelector(jp(b)),_||(l=m({src:l,async:!0},u),(u=Fs.get(b))&&y5(l,u),_=f.createElement("script"),dr(_),oi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function qY(l,u){Nl.M(l,u);var f=W0;if(f&&l){var g=Xt(f).hoistableScripts,b=Q0(l),_=g.get(b);_||(_=f.querySelector(jp(b)),_||(l=m({src:l,async:!0,type:"module"},u),(u=Fs.get(b))&&y5(l,u),_=f.createElement("script"),dr(_),oi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function NC(l,u,f,g){var b=(b=xe.current)?Dy(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=K0(f.href),f=Xt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=K0(f.href);var _=Xt(b).hoistableStyles,$=_.get(l);if($||(b=b.ownerDocument||b,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,$),(_=b.querySelector(Ep(l)))&&!_._p&&($.instance=_,$.state.loading=5),Fs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Fs.set(l,f),_||HY(b,l,f,$.state))),u&&g===null)throw Error(n(528,""));return $}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Q0(f),f=Xt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function K0(l){return'href="'+jt(l)+'"'}function Ep(l){return'link[rel="stylesheet"]['+l+"]"}function EC(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function HY(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),oi(u,"link",f),dr(u),l.head.appendChild(u))}function Q0(l){return'[src="'+jt(l)+'"]'}function jp(l){return"script[async]"+l}function jC(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+jt(f.href)+'"]');if(g)return u.instance=g,dr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),dr(g),oi(g,"style",b),Ly(g,f.precedence,l),u.instance=g;case"stylesheet":b=K0(f.href);var _=l.querySelector(Ep(b));if(_)return u.state.loading|=4,u.instance=_,dr(_),_;g=EC(f),(b=Fs.get(b))&&g5(g,b),_=(l.ownerDocument||l).createElement("link"),dr(_);var $=_;return $._p=new Promise(function(Q,ue){$.onload=Q,$.onerror=ue}),oi(_,"link",g),u.state.loading|=4,Ly(_,f.precedence,l),u.instance=_;case"script":return _=Q0(f.src),(b=l.querySelector(jp(_)))?(u.instance=b,dr(b),b):(g=f,(b=Fs.get(_))&&(g=m({},f),y5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),dr(b),oi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Ly(g,f.precedence,l));return u.instance}function Ly(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,$=0;$<g.length;$++){var Q=g[$];if(Q.dataset.precedence===u)_=Q;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function g5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function y5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var By=null;function kC(l,u,f){if(By===null){var g=new Map,b=By=new Map;b.set(f,g)}else b=By,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[gi]||_[Yr]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var $=_.getAttribute(u)||"";$=l+$;var Q=g.get($);Q?Q.push(_):g.set($,[_])}}return g}function CC(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function GY(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function OC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function WY(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=K0(g.href),_=u.querySelector(Ep(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=$y.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,dr(_);return}_=u.ownerDocument||u,g=EC(g),(b=Fs.get(b))&&g5(g,b),_=_.createElement("link"),dr(_);var $=_;$._p=new Promise(function(Q,ue){$.onload=Q,$.onerror=ue}),oi(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=$y.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var v5=0;function KY(l,u){return l.stylesheets&&l.count===0&&zy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&zy(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&v5===0&&(v5=62500*jY());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&zy(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>v5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function $y(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Uy=null;function zy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Uy=new Map,u.forEach(QY,l),Uy=null,$y.call(l))}function QY(l,u){if(!(u.state.loading&4)){var f=Uy.get(l);if(f)var g=f.get(null);else{f=new Map,Uy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var $=b[_];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(f.set($.dataset.precedence,$),g=$)}g&&f.set(null,g)}b=u.instance,$=b.getAttribute("data-precedence"),_=f.get($)||g,_===g&&f.set(null,b),f.set($,b),this.count++,g=$y.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var kp={$$typeof:R,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function XY(l,u,f,g,b,_,$,Q,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.hiddenUpdates=Or(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function IC(l,u,f,g,b,_,$,Q,ue,Oe,qe,Ke){return l=new XY(l,u,f,$,ue,Oe,qe,Ke,Q),u=1,_===!0&&(u|=24),_=ps(3,null,null,u),l.current=_,_.stateNode=l,u=Yw(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},t4(_),l}function RC(l){return l?(l=N0,l):N0}function MC(l,u,f,g,b,_){b=RC(b),g.context===null?g.context=b:g.pendingContext=b,g=jc(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=kc(l,g,u),f!==null&&(Wi(f,l,u),op(f,l,u))}function PC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function x5(l,u){PC(l,u),(l=l.alternate)&&PC(l,u)}function DC(l){if(l.tag===13||l.tag===31){var u=Ku(l,67108864);u!==null&&Wi(u,l,67108864),x5(l,67108864)}}function LC(l){if(l.tag===13||l.tag===31){var u=xs();u=ti(u);var f=Ku(l,u);f!==null&&Wi(f,l,u),x5(l,u)}}var Vy=!0;function YY(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=2,b5(l,u,f,g)}finally{Z.p=_,H.T=b}}function ZY(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=8,b5(l,u,f,g)}finally{Z.p=_,H.T=b}}function b5(l,u,f,g){if(Vy){var b=w5(g);if(b===null)s5(l,u,g,Fy,f),$C(l,g);else if(eZ(b,l,u,f,g))g.stopPropagation();else if($C(l,g),u&4&&-1<JY.indexOf(l)){for(;b!==null;){var _=Ze(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var $=Bt(_.pendingLanes);if($!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;$;){var ue=1<<31-Lt($);Q.entanglements[1]|=ue,$&=~ue}Do(_),(Wr&6)===0&&(Ay=Ye()+500,_p(0))}}break;case 31:case 13:Q=Ku(_,2),Q!==null&&Wi(Q,_,2),Ey(),x5(_,2)}if(_=w5(g),_===null&&s5(l,u,g,Fy,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else s5(l,u,g,null,f)}}function w5(l){return l=Rr(l),S5(l)}var Fy=null;function S5(l){if(Fy=null,l=he(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=s(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Fy=l,null}function BC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case xt:return 2;case gt:return 8;case Vt:case cr:return 32;case Hr:return 268435456;default:return 32}default:return 32}}var _5=!1,Uc=null,zc=null,Vc=null,Cp=new Map,Op=new Map,Fc=[],JY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $C(l,u){switch(l){case"focusin":case"focusout":Uc=null;break;case"dragenter":case"dragleave":zc=null;break;case"mouseover":case"mouseout":Vc=null;break;case"pointerover":case"pointerout":Cp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(u.pointerId)}}function Ip(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=Ze(u),u!==null&&DC(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function eZ(l,u,f,g,b){switch(u){case"focusin":return Uc=Ip(Uc,l,u,f,g,b),!0;case"dragenter":return zc=Ip(zc,l,u,f,g,b),!0;case"mouseover":return Vc=Ip(Vc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return Cp.set(_,Ip(Cp.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,Op.set(_,Ip(Op.get(_)||null,l,u,f,g,b)),!0}return!1}function UC(l){var u=he(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){l.blockedOn=u,ri(l.priority,function(){LC(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,ri(l.priority,function(){LC(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function qy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=w5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Co=g,f.target.dispatchEvent(g),Co=null}else return u=Ze(f),u!==null&&DC(u),l.blockedOn=f,!1;u.shift()}return!0}function zC(l,u,f){qy(l)&&f.delete(u)}function tZ(){_5=!1,Uc!==null&&qy(Uc)&&(Uc=null),zc!==null&&qy(zc)&&(zc=null),Vc!==null&&qy(Vc)&&(Vc=null),Cp.forEach(zC),Op.forEach(zC)}function Hy(l,u){l.blockedOn===u&&(l.blockedOn=null,_5||(_5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tZ)))}var Gy=null;function VC(l){Gy!==l&&(Gy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Gy===l&&(Gy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(S5(g||f)===null)continue;break}var _=Ze(f);_!==null&&(l.splice(u,3),u-=3,w4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function X0(l){function u(ue){return Hy(ue,l)}Uc!==null&&Hy(Uc,l),zc!==null&&Hy(zc,l),Vc!==null&&Hy(Vc,l),Cp.forEach(u),Op.forEach(u);for(var f=0;f<Fc.length;f++){var g=Fc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Fc.length&&(f=Fc[0],f.blockedOn===null);)UC(f),f.blockedOn===null&&Fc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],$=b[dn]||null;if(typeof _=="function")$||VC(f);else if($){var Q=null;if(_&&_.hasAttribute("formAction")){if(b=_,$=_[dn]||null)Q=$.formAction;else if(S5(b)!==null)continue}else Q=$.action;typeof Q=="function"?f[g+1]=Q:(f.splice(g,3),g-=3),VC(f)}}}function FC(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function($){return b=$})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function T5(l){this._internalRoot=l}Wy.prototype.render=T5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=xs();MC(f,g,l,u,null,null)},Wy.prototype.unmount=T5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;MC(l.current,2,null,l,null,null),Ey(),u[Sn]=null}};function Wy(l){this._internalRoot=l}Wy.prototype.unstable_scheduleHydration=function(l){if(l){var u=un();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Fc.length&&u!==0&&u<Fc[f].priority;f++);Fc.splice(f,0,l),f===0&&UC(l)}};var qC=e.version;if(qC!=="19.2.4")throw Error(n(527,qC,"19.2.4"));Z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var rZ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ky.isDisabled&&Ky.supportsFiber)try{ot=Ky.inject(rZ),bt=Ky}catch{}}return Mp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=Yk,_=Zk,$=Jk;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&($=u.onRecoverableError)),u=IC(l,1,!1,null,null,f,g,null,b,_,$,FC),l[Sn]=u.current,i5(l),new T5(u)},Mp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=Yk,$=Zk,Q=Jk,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),u=IC(l,1,!0,u,f??null,g,b,ue,_,$,Q,FC),u.context=RC(null),f=u.current,g=xs(),g=ti(g),b=jc(g),b.callback=null,kc(f,b,g),f=g,u.current.lanes=f,kn(u,f),Do(u),l[Sn]=u.current,i5(l),new Wy(u)},Mp.version="19.2.4",Mp}var tO;function pZ(){if(tO)return E5.exports;tO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),E5.exports=fZ(),E5.exports}var mZ=pZ();const gZ=Kr(mZ);var Ka=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Ka||{});const Lr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ia=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ia||{});const $T={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},rO=[1.5,1.4,1.3,1.2,1.1],Im=5,Rm=1;function yZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function Pv(t,e){const r=new Set;return t.forEach(n=>{const a=yZ(n,e);a&&r.add(a)}),Array.from(r).sort()}var nO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},vZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},Bz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,c=s?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,x=h&63;d||(x=64,s||(y=64)),n.push(r[p],r[m],r[y],r[x])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new xZ;const y=i<<2|c>>4;if(n.push(y),h!==64){const x=c<<4&240|h>>2;if(n.push(x),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bZ=function(t){const e=Lz(t);return Bz.encodeByteArray(e,!0)},nx=function(t){return bZ(t).replace(/\./g,"")},$z=function(t){try{return Bz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ=()=>wZ().__FIREBASE_DEFAULTS__,_Z=()=>{if(typeof process>"u"||typeof nO>"u")return;const t=nO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$z(t[1]);return e&&JSON.parse(e)},Zb=()=>{try{return SZ()||_Z()||TZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uz=t=>{var e,r;return(r=(e=Zb())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},zz=t=>{const e=Uz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Vz=()=>{var t;return(t=Zb())===null||t===void 0?void 0:t.config},Fz=t=>{var e;return(e=Zb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nx(JSON.stringify(r)),nx(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function jZ(){var t;const e=(t=Zb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IZ(){const t=Ba();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qz(){return!jZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hz(){try{return typeof indexedDB=="object"}catch{return!1}}function RZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MZ="FirebaseError";class Eo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=MZ,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qg.prototype.create)}}class qg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?PZ(i,n):"Error",c=`${this.serviceName}: ${s} (${a}).`;return new Eo(a,c,n)}}function PZ(t,e){return t.replace(DZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const DZ=/\{\$([^}]+)}/g;function LZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(aO(i)&&aO(s)){if(!Oh(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function aO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function BZ(t,e){const r=new $Z(t,e);return r.subscribe.bind(r)}class $Z{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");UZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=O5),a.error===void 0&&(a.error=O5),a.complete===void 0&&(a.complete=O5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function O5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class Xl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new AZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FZ(e))try{this.getOrInitializeService({instanceIdentifier:gd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=gd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gd){return this.instances.has(e)}getOptions(e=gd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&s.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const s=this.instances.get(a);return s&&e(s,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:VZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=gd){return this.component?this.component.multipleInstances?e:gd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VZ(t){return t===gd?void 0:t}function FZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jr||(jr={}));const HZ={debug:jr.DEBUG,verbose:jr.VERBOSE,info:jr.INFO,warn:jr.WARN,error:jr.ERROR,silent:jr.SILENT},GZ=jr.INFO,WZ={[jr.DEBUG]:"log",[jr.VERBOSE]:"log",[jr.INFO]:"info",[jr.WARN]:"warn",[jr.ERROR]:"error"},KZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=WZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m8{constructor(e){this.name=e,this._logLevel=GZ,this._logHandler=KZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jr.DEBUG,...e),this._logHandler(this,jr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jr.VERBOSE,...e),this._logHandler(this,jr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jr.INFO,...e),this._logHandler(this,jr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jr.WARN,...e),this._logHandler(this,jr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jr.ERROR,...e),this._logHandler(this,jr.ERROR,...e)}}const QZ=(t,e)=>e.some(r=>t instanceof r);let iO,sO;function XZ(){return iO||(iO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YZ(){return sO||(sO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gz=new WeakMap,UT=new WeakMap,Wz=new WeakMap,I5=new WeakMap,g8=new WeakMap;function ZZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(gu(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&Gz.set(r,t)}).catch(()=>{}),g8.set(e,t),e}function JZ(t){if(UT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});UT.set(t,e)}let zT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return UT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wz.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return gu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eJ(t){zT=t(zT)}function tJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(R5(this),e,...r);return Wz.set(n,e.sort?e.sort():[e]),gu(n)}:YZ().includes(t)?function(...e){return t.apply(R5(this),e),gu(Gz.get(this))}:function(...e){return gu(t.apply(R5(this),e))}}function rJ(t){return typeof t=="function"?tJ(t):(t instanceof IDBTransaction&&JZ(t),QZ(t,XZ())?new Proxy(t,zT):t)}function gu(t){if(t instanceof IDBRequest)return ZZ(t);if(I5.has(t))return I5.get(t);const e=rJ(t);return e!==t&&(I5.set(t,e),g8.set(e,t)),e}const R5=t=>g8.get(t);function nJ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),c=gu(s);return n&&s.addEventListener("upgradeneeded",d=>{n(gu(s.result),d.oldVersion,d.newVersion,gu(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const aJ=["get","getKey","getAll","getAllKeys","count"],iJ=["put","add","delete","clear"],M5=new Map;function oO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(M5.get(e))return M5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=iJ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||aJ.includes(r)))return;const i=async function(s,...c){const d=this.transaction(s,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return M5.set(e,i),i}eJ(t=>({...t,get:(e,r,n)=>oO(e,r)||t.get(e,r,n),has:(e,r)=>!!oO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oJ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function oJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const VT="@firebase/app",lO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new m8("@firebase/app"),lJ="@firebase/app-compat",cJ="@firebase/analytics-compat",uJ="@firebase/analytics",dJ="@firebase/app-check-compat",hJ="@firebase/app-check",fJ="@firebase/auth",pJ="@firebase/auth-compat",mJ="@firebase/database",gJ="@firebase/data-connect",yJ="@firebase/database-compat",vJ="@firebase/functions",xJ="@firebase/functions-compat",bJ="@firebase/installations",wJ="@firebase/installations-compat",SJ="@firebase/messaging",_J="@firebase/messaging-compat",TJ="@firebase/performance",AJ="@firebase/performance-compat",NJ="@firebase/remote-config",EJ="@firebase/remote-config-compat",jJ="@firebase/storage",kJ="@firebase/storage-compat",CJ="@firebase/firestore",OJ="@firebase/vertexai-preview",IJ="@firebase/firestore-compat",RJ="firebase",MJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="[DEFAULT]",PJ={[VT]:"fire-core",[lJ]:"fire-core-compat",[uJ]:"fire-analytics",[cJ]:"fire-analytics-compat",[hJ]:"fire-app-check",[dJ]:"fire-app-check-compat",[fJ]:"fire-auth",[pJ]:"fire-auth-compat",[mJ]:"fire-rtdb",[gJ]:"fire-data-connect",[yJ]:"fire-rtdb-compat",[vJ]:"fire-fn",[xJ]:"fire-fn-compat",[bJ]:"fire-iid",[wJ]:"fire-iid-compat",[SJ]:"fire-fcm",[_J]:"fire-fcm-compat",[TJ]:"fire-perf",[AJ]:"fire-perf-compat",[NJ]:"fire-rc",[EJ]:"fire-rc-compat",[jJ]:"fire-gcs",[kJ]:"fire-gcs-compat",[CJ]:"fire-fst",[IJ]:"fire-fst-compat",[OJ]:"fire-vertex","fire-js":"fire-js",[RJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Map,DJ=new Map,qT=new Map;function cO(t,e){try{t.container.addComponent(e)}catch(r){Yl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Su(t){const e=t.name;if(qT.has(e))return Yl.debug(`There were multiple attempts to register component ${e}.`),!1;qT.set(e,t);for(const r of ax.values())cO(r,t);for(const r of DJ.values())cO(r,t);return!0}function Gg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Pl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yu=new qg("app","Firebase",LJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=MJ;function Kz(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:FT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw yu.create("bad-app-name",{appName:String(a)});if(r||(r=Vz()),!r)throw yu.create("no-options");const i=ax.get(a);if(i){if(Oh(r,i.options)&&Oh(n,i.config))return i;throw yu.create("duplicate-app",{appName:a})}const s=new qZ(a);for(const d of qT.values())s.addComponent(d);const c=new BJ(r,n,s);return ax.set(a,c),c}function y8(t=FT){const e=ax.get(t);if(!e&&t===FT&&Vz())return Kz();if(!e)throw yu.create("no-app",{appName:t});return e}function Zs(t,e,r){var n;let a=(n=PJ[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yl.warn(c.join(" "));return}Su(new Xl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $J="firebase-heartbeat-database",UJ=1,Mm="firebase-heartbeat-store";let P5=null;function Qz(){return P5||(P5=nJ($J,UJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mm)}catch(r){console.warn(r)}}}}).catch(t=>{throw yu.create("idb-open",{originalErrorMessage:t.message})})),P5}async function zJ(t){try{const r=(await Qz()).transaction(Mm),n=await r.objectStore(Mm).get(Xz(t));return await r.done,n}catch(e){if(e instanceof Eo)Yl.warn(e.message);else{const r=yu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yl.warn(r.message)}}}async function uO(t,e){try{const n=(await Qz()).transaction(Mm,"readwrite");await n.objectStore(Mm).put(e,Xz(t)),await n.done}catch(r){if(r instanceof Eo)Yl.warn(r.message);else{const n=yu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Yl.warn(n.message)}}}function Xz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VJ=1024,FJ=720*60*60*1e3;class qJ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new GJ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=FJ}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Yl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=dO(),{heartbeatsToSend:n,unsentEntries:a}=HJ(this._heartbeatsCache.heartbeats),i=nx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Yl.warn(r),""}}}function dO(){return new Date().toISOString().substring(0,10)}function HJ(t,e=VJ){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),hO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),hO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class GJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hz()?RZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await zJ(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return uO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return uO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function hO(t){return nx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(t){Su(new Xl("platform-logger",e=>new sJ(e),"PRIVATE")),Su(new Xl("heartbeat",e=>new qJ(e),"PRIVATE")),Zs(VT,lO,t),Zs(VT,lO,"esm2017"),Zs("fire-js","")}WJ("");var KJ="firebase",QJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(KJ,QJ,"app");function v8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Yz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XJ=Yz,Zz=new qg("auth","Firebase",Yz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new m8("@firebase/auth");function YJ(t,...e){ix.logLevel<=jr.WARN&&ix.warn(`Auth (${c0}): ${t}`,...e)}function Dv(t,...e){ix.logLevel<=jr.ERROR&&ix.error(`Auth (${c0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,...e){throw b8(t,...e)}function wo(t,...e){return b8(t,...e)}function x8(t,e,r){const n=Object.assign(Object.assign({},XJ()),{[e]:r});return new qg("auth","Firebase",n).create(e,{appName:t.name})}function Md(t){return x8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZJ(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Qo(t,"argument-error"),x8(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b8(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Zz.create(t,...e)}function ar(t,e,...r){if(!t)throw b8(e,...r)}function Dl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dv(e),new Error(e)}function Zl(t,e){t||Dl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JJ(){return fO()==="http:"||fO()==="https:"}function fO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JJ()||CZ()||"connection"in navigator)?navigator.onLine:!0}function tee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r){this.shortDelay=e,this.longDelay=r,Zl(r>e,"Short delay should be less than long delay!"),this.isMobile=EZ()||OZ()}get(){return eee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t,e){Zl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nee=new Wg(3e4,6e4);function S8(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tf(t,e,r,n,a={}){return eV(t,a,async()=>{let i={},s={};n&&(e==="GET"?s=n:i={body:JSON.stringify(n)});const c=Hg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return kZ()||(h.referrerPolicy="no-referrer"),Jz.fetch()(tV(t,t.config.apiHost,r,c),h)})}async function eV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},ree),e);try{const a=new iee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Xy(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const c=i.ok?s.errorMessage:s.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw Xy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw Xy(t,"user-disabled",s);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw x8(t,p,h);Qo(t,p)}}catch(a){if(a instanceof Eo)throw a;Qo(t,"network-request-failed",{message:String(a)})}}async function aee(t,e,r,n,a={}){const i=await Tf(t,e,r,n,a);return"mfaPendingCredential"in i&&Qo(t,"multi-factor-auth-required",{_serverResponse:i}),i}function tV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?w8(t.config,a):`${t.config.apiScheme}://${a}`}class iee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(wo(this.auth,"network-request-failed")),nee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=wo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function see(t,e){return Tf(t,"POST","/v1/accounts:delete",e)}async function rV(t,e){return Tf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oee(t,e=!1){const r=bn(t),n=await r.getIdToken(e),a=_8(n);ar(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:cm(D5(a.auth_time)),issuedAtTime:cm(D5(a.iat)),expirationTime:cm(D5(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function D5(t){return Number(t)*1e3}function _8(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Dv("JWT malformed, contained fewer than 3 sections"),null;try{const a=$z(r);return a?JSON.parse(a):(Dv("Failed to decode base64 JWT payload"),null)}catch(a){return Dv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function pO(t){const e=_8(t);return ar(e,"internal-error"),ar(typeof e.exp<"u","internal-error"),ar(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Eo&&lee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=cm(this.lastLoginAt),this.creationTime=cm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Pm(t,rV(r,{idToken:n}));ar(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const s=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nV(i.providerUserInfo):[],c=dee(t.providerData,s),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new GT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function uee(t){const e=bn(t);await sx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function nV(t){return t.map(e=>{var{providerId:r}=e,n=v8(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hee(t,e){const r=await eV(t,{},async()=>{const n=Hg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,s=tV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Jz.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fee(t,e){return Tf(t,"POST","/v2/accounts:revokeToken",S8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ar(e.idToken,"internal-error"),ar(typeof e.idToken<"u","internal-error"),ar(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ar(e.length!==0,"internal-error");const r=pO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ar(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await hee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,s=new vh;return n&&(ar(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),a&&(ar(typeof a=="string","internal-error",{appName:e}),s.accessToken=a),i&&(ar(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vh,this.toJSON())}_performRefresh(){return Dl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t,e){ar(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ll{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=v8(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new GT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Pm(this,this.stsTokenManager.getToken(this.auth,e));return ar(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oee(this,e)}reload(){return uee(this)}_assign(e){this!==e&&(ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ll(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await sx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pl(this.auth.app))return Promise.reject(Md(this.auth));const e=await this.getIdToken();return await Pm(this,see(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,s,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,x=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,E=(h=r.createdAt)!==null&&h!==void 0?h:void 0,I=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:L,isAnonymous:O,providerData:M,stsTokenManager:N}=r;ar(R&&N,e,"internal-error");const A=vh.fromJSON(this.name,N);ar(typeof R=="string",e,"internal-error"),Hc(m,e.name),Hc(y,e.name),ar(typeof L=="boolean",e,"internal-error"),ar(typeof O=="boolean",e,"internal-error"),Hc(x,e.name),Hc(T,e.name),Hc(S,e.name),Hc(w,e.name),Hc(E,e.name),Hc(I,e.name);const j=new Ll({uid:R,auth:e,email:y,emailVerified:L,displayName:m,isAnonymous:O,photoURL:T,phoneNumber:x,tenantId:S,stsTokenManager:A,createdAt:E,lastLoginAt:I});return M&&Array.isArray(M)&&(j.providerData=M.map(z=>Object.assign({},z))),w&&(j._redirectEventId=w),j}static async _fromIdTokenResponse(e,r,n=!1){const a=new vh;a.updateFromServerResponse(r);const i=new Ll({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await sx(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];ar(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?nV(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new vh;c.updateFromIdToken(n);const d=new Ll({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:s}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new GT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=new Map;function Bl(t){Zl(t instanceof Function,"Expected a class definition");let e=mO.get(t);return e?(Zl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}aV.type="NONE";const gO=aV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e,r){return`firebase:${t}:${e}:${r}`}class xh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=Lv(this.userKey,a.apiKey,i),this.fullPersistenceKey=Lv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ll._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new xh(Bl(gO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Bl(gO);const s=Lv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(s);if(p){const m=Ll._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new xh(i,e,n):(i=d[0],c&&await i._set(s,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(s)}catch{}})),new xh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uV(e))return"Blackberry";if(dV(e))return"Webos";if(sV(e))return"Safari";if((e.includes("chrome/")||oV(e))&&!e.includes("edge/"))return"Chrome";if(cV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function iV(t=Ba()){return/firefox\//i.test(t)}function sV(t=Ba()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oV(t=Ba()){return/crios\//i.test(t)}function lV(t=Ba()){return/iemobile/i.test(t)}function cV(t=Ba()){return/android/i.test(t)}function uV(t=Ba()){return/blackberry/i.test(t)}function dV(t=Ba()){return/webos/i.test(t)}function T8(t=Ba()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pee(t=Ba()){var e;return T8(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mee(){return IZ()&&document.documentMode===10}function hV(t=Ba()){return T8(t)||cV(t)||dV(t)||uV(t)||/windows phone/i.test(t)||lV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e=[]){let r;switch(t){case"Browser":r=yO(Ba());break;case"Worker":r=`${yO(Ba())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${c0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((s,c)=>{try{const d=e(i);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yee(t,e={}){return Tf(t,"GET","/v2/passwordPolicy",S8(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee=6;class xee{constructor(e){var r,n,a,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:vee,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bee{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vO(this),this.idTokenSubscription=new vO(this),this.beforeStateQueue=new gee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Bl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await xh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await rV(this,{idToken:e}),n=await Ll._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Pl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(s){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await sx(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pl(this.app))return Promise.reject(Md(this));const r=e?bn(e):null;return r&&ar(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ar(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pl(this.app)?Promise.reject(Md(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pl(this.app)?Promise.reject(Md(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yee(this),r=new xee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await fee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Bl(e)||this._popupRedirectResolver;ar(r,this,"argument-error"),this.redirectPersistenceManager=await xh.create(this,[Bl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ar(c,this,"internal-error"),c.then(()=>{s||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&YJ(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Jb(t){return bn(t)}class vO{constructor(e){this.auth=e,this.observer=null,this.addObserver=BZ(r=>this.observer=r)}get next(){return ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wee(t){A8=t}function See(t){return A8.loadJS(t)}function _ee(){return A8.gapiScript}function Tee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aee(t,e){const r=Gg(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Oh(i,e??{}))return a;Qo(a,"already-initialized")}return r.initialize({options:e})}function Nee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Bl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Eee(t,e,r){const n=Jb(t);ar(n._canInitEmulator,n,"emulator-config-failed"),ar(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=pV(e),{host:s,port:c}=jee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),kee()}function pV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jee(t){const e=pV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:xO(n.substr(i.length+1))}}else{const[i,s]=n.split(":");return{host:i,port:xO(s)}}}function xO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Dl("not implemented")}_getIdTokenResponse(e){return Dl("not implemented")}_linkToIdToken(e,r){return Dl("not implemented")}_getReauthenticationResolver(e){return Dl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t,e){return aee(t,"POST","/v1/accounts:signInWithIdp",S8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee="http://localhost";class zd extends mV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new zd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Qo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=v8(r,["providerId","signInMethod"]);if(!n||!a)return null;const s=new zd(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return bh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,bh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,bh(e,r)}buildRequest(){const e={requestUri:Cee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Hg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends N8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Kg{constructor(){super("facebook.com")}static credential(e){return zd._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jc.credentialFromTaggedObject(e)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jc.credential(e.oauthAccessToken)}catch{return null}}}Jc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Kg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return zd._fromParams({providerId:Rl.PROVIDER_ID,signInMethod:Rl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Rl.credentialFromTaggedObject(e)}static credentialFromError(e){return Rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Rl.credential(r,n)}catch{return null}}}Rl.GOOGLE_SIGN_IN_METHOD="google.com";Rl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Kg{constructor(){super("github.com")}static credential(e){return zd._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eu.credential(e.oauthAccessToken)}catch{return null}}}eu.GITHUB_SIGN_IN_METHOD="github.com";eu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Kg{constructor(){super("twitter.com")}static credential(e,r){return zd._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return tu.credential(r,n)}catch{return null}}}tu.TWITTER_SIGN_IN_METHOD="twitter.com";tu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Ll._fromIdTokenResponse(e,n,a),s=bO(n);return new Ih({user:i,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=bO(n);return new Ih({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function bO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends Eo{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,ox.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new ox(e,r,n,a)}}function gV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ox._fromErrorAndOperation(t,i,e,n):i})}async function Oee(t,e,r=!1){const n=await Pm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ih._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iee(t,e,r=!1){const{auth:n}=t;if(Pl(n.app))return Promise.reject(Md(n));const a="reauthenticate";try{const i=await Pm(t,gV(n,a,e,t),r);ar(i.idToken,n,"internal-error");const s=_8(i.idToken);ar(s,n,"internal-error");const{sub:c}=s;return ar(t.uid===c,n,"user-mismatch"),Ih._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qo(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ree(t,e,r=!1){if(Pl(t.app))return Promise.reject(Md(t));const n="signIn",a=await gV(t,n,e),i=await Ih._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Mee(t,e,r,n){return bn(t).onIdTokenChanged(e,r,n)}function Pee(t,e,r){return bn(t).beforeAuthStateChanged(e,r)}function Dee(t,e,r,n){return bn(t).onAuthStateChanged(e,r,n)}function Lee(t){return bn(t).signOut()}const lx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(lx,"1"),this.storage.removeItem(lx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee=1e3,$ee=10;class vV extends yV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);mee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,$ee):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Bee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}vV.type="LOCAL";const Uee=vV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV extends yV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}xV.type="SESSION";const bV=xV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new e2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(s).map(async h=>h(r.origin,i)),d=await zee(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((c,d)=>{const h=E8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(){return window}function Fee(t){Go().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(){return typeof Go().WorkerGlobalScope<"u"&&typeof Go().importScripts=="function"}async function qee(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Gee(){return wV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firebaseLocalStorageDb",Wee=1,cx="firebaseLocalStorage",_V="fbase_key";class Qg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function t2(t,e){return t.transaction([cx],e?"readwrite":"readonly").objectStore(cx)}function Kee(){const t=indexedDB.deleteDatabase(SV);return new Qg(t).toPromise()}function WT(){const t=indexedDB.open(SV,Wee);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(cx,{keyPath:_V})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(cx)?e(n):(n.close(),await Kee(),e(await WT()))})})}async function wO(t,e,r){const n=t2(t,!0).put({[_V]:e,value:r});return new Qg(n).toPromise()}async function Qee(t,e){const r=t2(t,!1).get(e),n=await new Qg(r).toPromise();return n===void 0?null:n.value}function SO(t,e){const r=t2(t,!0).delete(e);return new Qg(r).toPromise()}const Xee=800,Yee=3;class TV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await WT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Yee)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e2._getInstance(Gee()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await qee(),!this.activeServiceWorker)return;this.sender=new Vee(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await WT();return await wO(e,lx,"1"),await SO(e,lx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>wO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Qee(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>SO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=t2(a,!1).getAll();return new Qg(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TV.type="LOCAL";const Zee=TV;new Wg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t,e){return e?Bl(e):(ar(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8 extends mV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return bh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Jee(t){return Ree(t.auth,new j8(t),t.bypassAuthState)}function ete(t){const{auth:e,user:r}=t;return ar(r,e,"internal-error"),Iee(r,new j8(t),t.bypassAuthState)}async function tte(t){const{auth:e,user:r}=t;return ar(r,e,"internal-error"),Oee(r,new j8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jee;case"linkViaPopup":case"linkViaRedirect":return tte;case"reauthViaPopup":case"reauthViaRedirect":return ete;default:Qo(this.auth,"internal-error")}}resolve(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rte=new Wg(2e3,1e4);async function nte(t,e,r){if(Pl(t.app))return Promise.reject(wo(t,"operation-not-supported-in-this-environment"));const n=Jb(t);ZJ(t,e,N8);const a=AV(n,r);return new Nd(n,"signInViaPopup",e,a).executeNotNull()}class Nd extends NV{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Nd.currentPopupAction&&Nd.currentPopupAction.cancel(),Nd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ar(e,this.auth,"internal-error"),e}async onExecution(){Zl(this.filter.length===1,"Popup operations only handle one event");const e=E8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(wo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rte.get())};e()}}Nd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ate="pendingRedirect",Bv=new Map;class ite extends NV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Bv.get(this.auth._key());if(!e){try{const n=await ste(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Bv.set(this.auth._key(),e)}return this.bypassAuthState||Bv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ste(t,e){const r=cte(e),n=lte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function ote(t,e){Bv.set(t._key(),e)}function lte(t){return Bl(t._redirectPersistence)}function cte(t){return Lv(ate,t.config.apiKey,t.name)}async function ute(t,e,r=!1){if(Pl(t.app))return Promise.reject(Md(t));const n=Jb(t),a=AV(n,e),s=await new ite(n,a,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dte=600*1e3;class hte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!EV(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(wo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dte&&this.cachedEventUids.clear(),this.cachedEventUids.has(_O(e))}saveEventToCache(e){this.cachedEventUids.add(_O(e)),this.lastProcessedEventTime=Date.now()}}function _O(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pte(t,e={}){return Tf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gte=/^https?/;async function yte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pte(t);for(const r of e)try{if(vte(r))return}catch{}Qo(t,"unauthorized-domain")}function vte(t){const e=HT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!gte.test(r))return!1;if(mte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xte=new Wg(3e4,6e4);function TO(){const t=Go().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function bte(t){return new Promise((e,r)=>{var n,a,i;function s(){TO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TO(),r(wo(t,"network-request-failed"))},timeout:xte.get()})}if(!((a=(n=Go().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Go().gapi)===null||i===void 0)&&i.load)s();else{const c=Tee("iframefcb");return Go()[c]=()=>{gapi.load?s():r(wo(t,"network-request-failed"))},See(`${_ee()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw $v=null,e})}let $v=null;function wte(t){return $v=$v||bte(t),$v}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ste=new Wg(5e3,15e3),_te="__/auth/iframe",Tte="emulator/auth/iframe",Ate={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ete(t){const e=t.config;ar(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?w8(e,Tte):`https://${t.config.authDomain}/${_te}`,n={apiKey:e.apiKey,appName:t.name,v:c0},a=Nte.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Hg(n).slice(1)}`}async function jte(t){const e=await wte(t),r=Go().gapi;return ar(r,t,"internal-error"),e.open({where:document.body,url:Ete(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ate,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const s=wo(t,"network-request-failed"),c=Go().setTimeout(()=>{i(s)},Ste.get());function d(){Go().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cte=500,Ote=600,Ite="_blank",Rte="http://localhost";class AO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mte(t,e,r,n=Cte,a=Ote){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},kte),{width:n.toString(),height:a.toString(),top:i,left:s}),h=Ba().toLowerCase();r&&(c=oV(h)?Ite:r),iV(h)&&(e=e||Rte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[x,T])=>`${y}${x}=${T},`,"");if(pee(h)&&c!=="_self")return Pte(e||"",c),new AO(null);const m=window.open(e||"",c,p);ar(m,t,"popup-blocked");try{m.focus()}catch{}return new AO(m)}function Pte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte="__/auth/handler",Lte="emulator/auth/handler",Bte=encodeURIComponent("fac");async function NO(t,e,r,n,a,i){ar(t.config.authDomain,t,"auth-domain-config-required"),ar(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:c0,eventId:a};if(e instanceof N8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",LZ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof Kg){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Bte}=${encodeURIComponent(d)}`:"";return`${$te(t)}?${Hg(c).slice(1)}${h}`}function $te({config:t}){return t.emulator?w8(t,Lte):`https://${t.authDomain}/${Dte}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="webStorageSupport";class Ute{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bV,this._completeRedirectFn=ute,this._overrideRedirectResult=ote}async _openPopup(e,r,n,a){var i;Zl((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await NO(e,r,n,HT(),a);return Mte(e,s,E8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await NO(e,r,n,HT(),a);return Fee(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(Zl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await jte(e),n=new hte(e);return r.register("authEvent",a=>(ar(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(L5,{type:L5},a=>{var i;const s=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[L5];s!==void 0&&r(!!s),Qo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=yte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return hV()||sV()||T8()}}const zte=Ute;var EO="@firebase/auth",jO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qte(t){Su(new Xl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;ar(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fV(t)},h=new bee(n,a,i,d);return Nee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Su(new Xl("auth-internal",e=>{const r=Jb(e.getProvider("auth").getImmediate());return(n=>new Vte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(EO,jO,Fte(t)),Zs(EO,jO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte=300,Gte=Fz("authIdTokenMaxAge")||Hte;let kO=null;const Wte=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Gte)return;const a=r==null?void 0:r.token;kO!==a&&(kO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function KT(t=y8()){const e=Gg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Aee(t,{popupRedirectResolver:zte,persistence:[Zee,Uee,bV]}),n=Fz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const s=Wte(i.toString());Pee(r,s,()=>s(r.currentUser)),Mee(r,c=>s(c))}}const a=Uz("auth");return a&&Eee(r,`http://${a}`),r}function Kte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=wo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Kte().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qte("Browser");var CO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pd,jV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function j(){}j.prototype=A.prototype,N.D=A.prototype,N.prototype=new j,N.prototype.constructor=N,N.C=function(z,B,F){for(var U=Array(arguments.length-2),X=2;X<arguments.length;X++)U[X-2]=arguments[X];return A.prototype[B].apply(z,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,j){j||(j=0);var z=Array(16);if(typeof A=="string")for(var B=0;16>B;++B)z[B]=A.charCodeAt(j++)|A.charCodeAt(j++)<<8|A.charCodeAt(j++)<<16|A.charCodeAt(j++)<<24;else for(B=0;16>B;++B)z[B]=A[j++]|A[j++]<<8|A[j++]<<16|A[j++]<<24;A=N.g[0],j=N.g[1],B=N.g[2];var F=N.g[3],U=A+(F^j&(B^F))+z[0]+3614090360&4294967295;A=j+(U<<7&4294967295|U>>>25),U=F+(B^A&(j^B))+z[1]+3905402710&4294967295,F=A+(U<<12&4294967295|U>>>20),U=B+(j^F&(A^j))+z[2]+606105819&4294967295,B=F+(U<<17&4294967295|U>>>15),U=j+(A^B&(F^A))+z[3]+3250441966&4294967295,j=B+(U<<22&4294967295|U>>>10),U=A+(F^j&(B^F))+z[4]+4118548399&4294967295,A=j+(U<<7&4294967295|U>>>25),U=F+(B^A&(j^B))+z[5]+1200080426&4294967295,F=A+(U<<12&4294967295|U>>>20),U=B+(j^F&(A^j))+z[6]+2821735955&4294967295,B=F+(U<<17&4294967295|U>>>15),U=j+(A^B&(F^A))+z[7]+4249261313&4294967295,j=B+(U<<22&4294967295|U>>>10),U=A+(F^j&(B^F))+z[8]+1770035416&4294967295,A=j+(U<<7&4294967295|U>>>25),U=F+(B^A&(j^B))+z[9]+2336552879&4294967295,F=A+(U<<12&4294967295|U>>>20),U=B+(j^F&(A^j))+z[10]+4294925233&4294967295,B=F+(U<<17&4294967295|U>>>15),U=j+(A^B&(F^A))+z[11]+2304563134&4294967295,j=B+(U<<22&4294967295|U>>>10),U=A+(F^j&(B^F))+z[12]+1804603682&4294967295,A=j+(U<<7&4294967295|U>>>25),U=F+(B^A&(j^B))+z[13]+4254626195&4294967295,F=A+(U<<12&4294967295|U>>>20),U=B+(j^F&(A^j))+z[14]+2792965006&4294967295,B=F+(U<<17&4294967295|U>>>15),U=j+(A^B&(F^A))+z[15]+1236535329&4294967295,j=B+(U<<22&4294967295|U>>>10),U=A+(B^F&(j^B))+z[1]+4129170786&4294967295,A=j+(U<<5&4294967295|U>>>27),U=F+(j^B&(A^j))+z[6]+3225465664&4294967295,F=A+(U<<9&4294967295|U>>>23),U=B+(A^j&(F^A))+z[11]+643717713&4294967295,B=F+(U<<14&4294967295|U>>>18),U=j+(F^A&(B^F))+z[0]+3921069994&4294967295,j=B+(U<<20&4294967295|U>>>12),U=A+(B^F&(j^B))+z[5]+3593408605&4294967295,A=j+(U<<5&4294967295|U>>>27),U=F+(j^B&(A^j))+z[10]+38016083&4294967295,F=A+(U<<9&4294967295|U>>>23),U=B+(A^j&(F^A))+z[15]+3634488961&4294967295,B=F+(U<<14&4294967295|U>>>18),U=j+(F^A&(B^F))+z[4]+3889429448&4294967295,j=B+(U<<20&4294967295|U>>>12),U=A+(B^F&(j^B))+z[9]+568446438&4294967295,A=j+(U<<5&4294967295|U>>>27),U=F+(j^B&(A^j))+z[14]+3275163606&4294967295,F=A+(U<<9&4294967295|U>>>23),U=B+(A^j&(F^A))+z[3]+4107603335&4294967295,B=F+(U<<14&4294967295|U>>>18),U=j+(F^A&(B^F))+z[8]+1163531501&4294967295,j=B+(U<<20&4294967295|U>>>12),U=A+(B^F&(j^B))+z[13]+2850285829&4294967295,A=j+(U<<5&4294967295|U>>>27),U=F+(j^B&(A^j))+z[2]+4243563512&4294967295,F=A+(U<<9&4294967295|U>>>23),U=B+(A^j&(F^A))+z[7]+1735328473&4294967295,B=F+(U<<14&4294967295|U>>>18),U=j+(F^A&(B^F))+z[12]+2368359562&4294967295,j=B+(U<<20&4294967295|U>>>12),U=A+(j^B^F)+z[5]+4294588738&4294967295,A=j+(U<<4&4294967295|U>>>28),U=F+(A^j^B)+z[8]+2272392833&4294967295,F=A+(U<<11&4294967295|U>>>21),U=B+(F^A^j)+z[11]+1839030562&4294967295,B=F+(U<<16&4294967295|U>>>16),U=j+(B^F^A)+z[14]+4259657740&4294967295,j=B+(U<<23&4294967295|U>>>9),U=A+(j^B^F)+z[1]+2763975236&4294967295,A=j+(U<<4&4294967295|U>>>28),U=F+(A^j^B)+z[4]+1272893353&4294967295,F=A+(U<<11&4294967295|U>>>21),U=B+(F^A^j)+z[7]+4139469664&4294967295,B=F+(U<<16&4294967295|U>>>16),U=j+(B^F^A)+z[10]+3200236656&4294967295,j=B+(U<<23&4294967295|U>>>9),U=A+(j^B^F)+z[13]+681279174&4294967295,A=j+(U<<4&4294967295|U>>>28),U=F+(A^j^B)+z[0]+3936430074&4294967295,F=A+(U<<11&4294967295|U>>>21),U=B+(F^A^j)+z[3]+3572445317&4294967295,B=F+(U<<16&4294967295|U>>>16),U=j+(B^F^A)+z[6]+76029189&4294967295,j=B+(U<<23&4294967295|U>>>9),U=A+(j^B^F)+z[9]+3654602809&4294967295,A=j+(U<<4&4294967295|U>>>28),U=F+(A^j^B)+z[12]+3873151461&4294967295,F=A+(U<<11&4294967295|U>>>21),U=B+(F^A^j)+z[15]+530742520&4294967295,B=F+(U<<16&4294967295|U>>>16),U=j+(B^F^A)+z[2]+3299628645&4294967295,j=B+(U<<23&4294967295|U>>>9),U=A+(B^(j|~F))+z[0]+4096336452&4294967295,A=j+(U<<6&4294967295|U>>>26),U=F+(j^(A|~B))+z[7]+1126891415&4294967295,F=A+(U<<10&4294967295|U>>>22),U=B+(A^(F|~j))+z[14]+2878612391&4294967295,B=F+(U<<15&4294967295|U>>>17),U=j+(F^(B|~A))+z[5]+4237533241&4294967295,j=B+(U<<21&4294967295|U>>>11),U=A+(B^(j|~F))+z[12]+1700485571&4294967295,A=j+(U<<6&4294967295|U>>>26),U=F+(j^(A|~B))+z[3]+2399980690&4294967295,F=A+(U<<10&4294967295|U>>>22),U=B+(A^(F|~j))+z[10]+4293915773&4294967295,B=F+(U<<15&4294967295|U>>>17),U=j+(F^(B|~A))+z[1]+2240044497&4294967295,j=B+(U<<21&4294967295|U>>>11),U=A+(B^(j|~F))+z[8]+1873313359&4294967295,A=j+(U<<6&4294967295|U>>>26),U=F+(j^(A|~B))+z[15]+4264355552&4294967295,F=A+(U<<10&4294967295|U>>>22),U=B+(A^(F|~j))+z[6]+2734768916&4294967295,B=F+(U<<15&4294967295|U>>>17),U=j+(F^(B|~A))+z[13]+1309151649&4294967295,j=B+(U<<21&4294967295|U>>>11),U=A+(B^(j|~F))+z[4]+4149444226&4294967295,A=j+(U<<6&4294967295|U>>>26),U=F+(j^(A|~B))+z[11]+3174756917&4294967295,F=A+(U<<10&4294967295|U>>>22),U=B+(A^(F|~j))+z[2]+718787259&4294967295,B=F+(U<<15&4294967295|U>>>17),U=j+(F^(B|~A))+z[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(B+(U<<21&4294967295|U>>>11))&4294967295,N.g[2]=N.g[2]+B&4294967295,N.g[3]=N.g[3]+F&4294967295}n.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var j=A-this.blockSize,z=this.B,B=this.h,F=0;F<A;){if(B==0)for(;F<=j;)a(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<A;)if(z[B++]=N.charCodeAt(F++),B==this.blockSize){a(this,z),B=0;break}}else for(;F<A;)if(z[B++]=N[F++],B==this.blockSize){a(this,z),B=0;break}}this.h=B,this.o+=A},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var j=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=j&255,j/=256;for(this.u(N),N=Array(16),A=j=0;4>A;++A)for(var z=0;32>z;z+=8)N[j++]=this.g[A]>>>z&255;return N};function i(N,A){var j=c;return Object.prototype.hasOwnProperty.call(j,N)?j[N]:j[N]=A(N)}function s(N,A){this.h=A;for(var j=[],z=!0,B=N.length-1;0<=B;B--){var F=N[B]|0;z&&F==A||(j[B]=F,z=!1)}this.g=j}var c={};function d(N){return-128<=N&&128>N?i(N,function(A){return new s([A|0],0>A?-1:0)}):new s([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return w(h(-N));for(var A=[],j=1,z=0;N>=j;z++)A[z]=N/j|0,j*=4294967296;return new s(A,0)}function p(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return w(p(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=h(Math.pow(A,8)),z=m,B=0;B<N.length;B+=8){var F=Math.min(8,N.length-B),U=parseInt(N.substring(B,B+F),A);8>F?(F=h(Math.pow(A,F)),z=z.j(F).add(h(U))):(z=z.j(j),z=z.add(h(U)))}return z}var m=d(0),y=d(1),x=d(16777216);t=s.prototype,t.m=function(){if(S(this))return-w(this).m();for(var N=0,A=1,j=0;j<this.g.length;j++){var z=this.i(j);N+=(0<=z?z:4294967296+z)*A,A*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(S(this))return"-"+w(this).toString(N);for(var A=h(Math.pow(N,6)),j=this,z="";;){var B=L(j,A).g;j=E(j,B.j(A));var F=((0<j.g.length?j.g[0]:j.h)>>>0).toString(N);if(j=B,T(j))return F+z;for(;6>F.length;)F="0"+F;z=F+z}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function S(N){return N.h==-1}t.l=function(N){return N=E(this,N),S(N)?-1:T(N)?0:1};function w(N){for(var A=N.g.length,j=[],z=0;z<A;z++)j[z]=~N.g[z];return new s(j,~N.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],z=0,B=0;B<=A;B++){var F=z+(this.i(B)&65535)+(N.i(B)&65535),U=(F>>>16)+(this.i(B)>>>16)+(N.i(B)>>>16);z=U>>>16,F&=65535,U&=65535,j[B]=U<<16|F}return new s(j,j[j.length-1]&-2147483648?-1:0)};function E(N,A){return N.add(w(A))}t.j=function(N){if(T(this)||T(N))return m;if(S(this))return S(N)?w(this).j(w(N)):w(w(this).j(N));if(S(N))return w(this.j(w(N)));if(0>this.l(x)&&0>N.l(x))return h(this.m()*N.m());for(var A=this.g.length+N.g.length,j=[],z=0;z<2*A;z++)j[z]=0;for(z=0;z<this.g.length;z++)for(var B=0;B<N.g.length;B++){var F=this.i(z)>>>16,U=this.i(z)&65535,X=N.i(B)>>>16,W=N.i(B)&65535;j[2*z+2*B]+=U*W,I(j,2*z+2*B),j[2*z+2*B+1]+=F*W,I(j,2*z+2*B+1),j[2*z+2*B+1]+=U*X,I(j,2*z+2*B+1),j[2*z+2*B+2]+=F*X,I(j,2*z+2*B+2)}for(z=0;z<A;z++)j[z]=j[2*z+1]<<16|j[2*z];for(z=A;z<2*A;z++)j[z]=0;return new s(j,0)};function I(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function R(N,A){this.g=N,this.h=A}function L(N,A){if(T(A))throw Error("division by zero");if(T(N))return new R(m,m);if(S(N))return A=L(w(N),A),new R(w(A.g),w(A.h));if(S(A))return A=L(N,w(A)),new R(w(A.g),A.h);if(30<N.g.length){if(S(N)||S(A))throw Error("slowDivide_ only works with positive integers.");for(var j=y,z=A;0>=z.l(N);)j=O(j),z=O(z);var B=M(j,1),F=M(z,1);for(z=M(z,2),j=M(j,2);!T(z);){var U=F.add(z);0>=U.l(N)&&(B=B.add(j),F=U),z=M(z,1),j=M(j,1)}return A=E(N,B.j(A)),new R(B,A)}for(B=m;0<=N.l(A);){for(j=Math.max(1,Math.floor(N.m()/A.m())),z=Math.ceil(Math.log(j)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),F=h(j),U=F.j(A);S(U)||0<U.l(N);)j-=z,F=h(j),U=F.j(A);T(F)&&(F=y),B=B.add(F),N=E(N,U)}return new R(B,N)}t.A=function(N){return L(this,N).h},t.and=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],z=0;z<A;z++)j[z]=this.i(z)&N.i(z);return new s(j,this.h&N.h)},t.or=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],z=0;z<A;z++)j[z]=this.i(z)|N.i(z);return new s(j,this.h|N.h)},t.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],z=0;z<A;z++)j[z]=this.i(z)^N.i(z);return new s(j,this.h^N.h)};function O(N){for(var A=N.g.length+1,j=[],z=0;z<A;z++)j[z]=N.i(z)<<1|N.i(z-1)>>>31;return new s(j,N.h)}function M(N,A){var j=A>>5;A%=32;for(var z=N.g.length-j,B=[],F=0;F<z;F++)B[F]=0<A?N.i(F+j)>>>A|N.i(F+j+1)<<32-A:N.i(F+j);return new s(B,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,jV=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Pd=s}).apply(typeof CO<"u"?CO:typeof self<"u"?self:typeof window<"u"?window:{});var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kV,tm,CV,Uv,QT,OV,IV,RV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,P,V){return v==Array.prototype||v==Object.prototype||(v[P]=V.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yy=="object"&&Yy];for(var P=0;P<v.length;++P){var V=v[P];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function a(v,P){if(P)e:{var V=n;v=v.split(".");for(var J=0;J<v.length-1;J++){var Te=v[J];if(!(Te in V))break e;V=V[Te]}v=v[v.length-1],J=V[v],P=P(J),P!=J&&P!=null&&e(V,v,{configurable:!0,writable:!0,value:P})}}function i(v,P){v instanceof String&&(v+="");var V=0,J=!1,Te={next:function(){if(!J&&V<v.length){var $e=V++;return{value:P($e,v[$e]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}a("Array.prototype.values",function(v){return v||function(){return i(this,function(P,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var P=typeof v;return P=P!="object"?P:v?Array.isArray(v)?"array":P:"null",P=="array"||P=="object"&&typeof v.length=="number"}function h(v){var P=typeof v;return P=="object"&&v!=null||P=="function"}function p(v,P,V){return v.call.apply(v.bind,arguments)}function m(v,P,V){if(!v)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,J),v.apply(P,Te)}}return function(){return v.apply(P,arguments)}}function y(v,P,V){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function x(v,P){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),v.apply(this,J)}}function T(v,P){function V(){}V.prototype=P.prototype,v.aa=P.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(J,Te,$e){for(var pt=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)pt[Jr-2]=arguments[Jr];return P.prototype[Te].apply(J,pt)}}function S(v){const P=v.length;if(0<P){const V=Array(P);for(let J=0;J<P;J++)V[J]=v[J];return V}return[]}function w(v,P){for(let V=1;V<arguments.length;V++){const J=arguments[V];if(d(J)){const Te=v.length||0,$e=J.length||0;v.length=Te+$e;for(let pt=0;pt<$e;pt++)v[Te+pt]=J[pt]}else v.push(J)}}class E{constructor(P,V){this.i=P,this.j=V,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function I(v){return/^[\s\xa0]*$/.test(v)}function R(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var O=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function M(v,P,V){for(const J in v)P.call(V,v[J],J,v)}function N(v,P){for(const V in v)P.call(void 0,v[V],V,v)}function A(v){const P={};for(const V in v)P[V]=v[V];return P}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(v,P){let V,J;for(let Te=1;Te<arguments.length;Te++){J=arguments[Te];for(V in J)v[V]=J[V];for(let $e=0;$e<j.length;$e++)V=j[$e],Object.prototype.hasOwnProperty.call(J,V)&&(v[V]=J[V])}}function B(v){var P=1;v=v.split(":");const V=[];for(;0<P&&v.length;)V.push(v.shift()),P--;return v.length&&V.push(v.join(":")),V}function F(v){c.setTimeout(()=>{throw v},0)}function U(){var v=fe;let P=null;return v.g&&(P=v.g,v.g=v.g.next,v.g||(v.h=null),P.next=null),P}class X{constructor(){this.h=this.g=null}add(P,V){const J=W.get();J.set(P,V),this.h?this.h.next=J:this.g=J,this.h=J}}var W=new E(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(P,V){this.h=P,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,fe=new X,me=()=>{const v=c.Promise.resolve(void 0);Z=()=>{v.then(K)}};var K=()=>{for(var v;v=U();){try{v.h.call(v.g)}catch(V){F(V)}var P=W;P.j(v),100>P.h&&(P.h++,v.next=P.g,P.g=v)}ie=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(v,P){this.type=v,this.g=this.target=P,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,P=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};c.addEventListener("test",V,P),c.removeEventListener("test",V,P)}catch{}return v})();function ae(v,P){if(re.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,J=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=P,P=v.relatedTarget){if(O){e:{try{L(P.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(P=null)}}else V=="mouseover"?P=v.fromElement:V=="mouseout"&&(P=v.toElement);this.relatedTarget=P,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:xe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&ae.aa.h.call(this)}}T(ae,re);var xe={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function ee(v,P,V,J,Te){this.listener=v,this.proxy=null,this.src=P,this.type=V,this.capture=!!J,this.ha=Te,this.key=++Ue,this.da=this.fa=!1}function Me(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ne(v){this.src=v,this.g={},this.h=0}ne.prototype.add=function(v,P,V,J,Te){var $e=v.toString();v=this.g[$e],v||(v=this.g[$e]=[],this.h++);var pt=Xe(v,P,J,Te);return-1<pt?(P=v[pt],V||(P.fa=!1)):(P=new ee(P,this.src,$e,!!J,Te),P.fa=V,v.push(P)),P};function pe(v,P){var V=P.type;if(V in v.g){var J=v.g[V],Te=Array.prototype.indexOf.call(J,P,void 0),$e;($e=0<=Te)&&Array.prototype.splice.call(J,Te,1),$e&&(Me(P),v.g[V].length==0&&(delete v.g[V],v.h--))}}function Xe(v,P,V,J){for(var Te=0;Te<v.length;++Te){var $e=v[Te];if(!$e.da&&$e.listener==P&&$e.capture==!!V&&$e.ha==J)return Te}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),St={};function ct(v,P,V,J,Te){if(Array.isArray(P)){for(var $e=0;$e<P.length;$e++)ct(v,P[$e],V,J,Te);return null}return V=At(V),v&&v[ye]?v.K(P,V,h(J)?!!J.capture:!1,Te):_t(v,P,V,!1,J,Te)}function _t(v,P,V,J,Te,$e){if(!P)throw Error("Invalid event type");var pt=h(Te)?!!Te.capture:!!Te,Jr=de(v);if(Jr||(v[Qe]=Jr=new ne(v)),V=Jr.add(P,V,J,pt,$e),V.proxy)return V;if(J=Ee(),V.proxy=J,J.src=v,J.listener=V,v.addEventListener)Ne||(Te=pt),Te===void 0&&(Te=!1),v.addEventListener(P.toString(),J,Te);else if(v.attachEvent)v.attachEvent(mt(P.toString()),J);else if(v.addListener&&v.removeListener)v.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ee(){function v(V){return P.call(v.src,v.listener,V)}const P=Je;return v}function Ve(v,P,V,J,Te){if(Array.isArray(P))for(var $e=0;$e<P.length;$e++)Ve(v,P[$e],V,J,Te);else J=h(J)?!!J.capture:!!J,V=At(V),v&&v[ye]?(v=v.i,P=String(P).toString(),P in v.g&&($e=v.g[P],V=Xe($e,V,J,Te),-1<V&&(Me($e[V]),Array.prototype.splice.call($e,V,1),$e.length==0&&(delete v.g[P],v.h--)))):v&&(v=de(v))&&(P=v.g[P.toString()],v=-1,P&&(v=Xe(P,V,J,Te)),(V=-1<v?P[v]:null)&&nt(V))}function nt(v){if(typeof v!="number"&&v&&!v.da){var P=v.src;if(P&&P[ye])pe(P.i,v);else{var V=v.type,J=v.proxy;P.removeEventListener?P.removeEventListener(V,J,v.capture):P.detachEvent?P.detachEvent(mt(V),J):P.addListener&&P.removeListener&&P.removeListener(J),(V=de(P))?(pe(V,v),V.h==0&&(V.src=null,P[Qe]=null)):Me(v)}}}function mt(v){return v in St?St[v]:St[v]="on"+v}function Je(v,P){if(v.da)v=!0;else{P=new ae(P,this);var V=v.listener,J=v.ha||v.src;v.fa&&nt(v),v=V.call(J,P)}return v}function de(v){return v=v[Qe],v instanceof ne?v:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(v){return typeof v=="function"?v:(v[Ye]||(v[Ye]=function(P){return v.handleEvent(P)}),v[Ye])}function xt(){te.call(this),this.i=new ne(this),this.M=this,this.F=null}T(xt,te),xt.prototype[ye]=!0,xt.prototype.removeEventListener=function(v,P,V,J){Ve(this,v,P,V,J)};function gt(v,P){var V,J=v.F;if(J)for(V=[];J;J=J.F)V.push(J);if(v=v.M,J=P.type||P,typeof P=="string")P=new re(P,v);else if(P instanceof re)P.target=P.target||v;else{var Te=P;P=new re(J,v),z(P,Te)}if(Te=!0,V)for(var $e=V.length-1;0<=$e;$e--){var pt=P.g=V[$e];Te=Vt(pt,J,!0,P)&&Te}if(pt=P.g=v,Te=Vt(pt,J,!0,P)&&Te,Te=Vt(pt,J,!1,P)&&Te,V)for($e=0;$e<V.length;$e++)pt=P.g=V[$e],Te=Vt(pt,J,!1,P)&&Te}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var v=this.i,P;for(P in v.g){for(var V=v.g[P],J=0;J<V.length;J++)Me(V[J]);delete v.g[P],v.h--}}this.F=null},xt.prototype.K=function(v,P,V,J){return this.i.add(String(v),P,!1,V,J)},xt.prototype.L=function(v,P,V,J){return this.i.add(String(v),P,!0,V,J)};function Vt(v,P,V,J){if(P=v.i.g[String(P)],!P)return!0;P=P.concat();for(var Te=!0,$e=0;$e<P.length;++$e){var pt=P[$e];if(pt&&!pt.da&&pt.capture==V){var Jr=pt.listener,ya=pt.ha||pt.src;pt.fa&&pe(v.i,pt),Te=Jr.call(ya,J)!==!1&&Te}}return Te&&!J.defaultPrevented}function cr(v,P,V){if(typeof v=="function")V&&(v=y(v,V));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(v,P||0)}function Hr(v){v.g=cr(()=>{v.g=null,v.i&&(v.i=!1,Hr(v))},v.l);const P=v.h;v.h=null,v.m.apply(null,P)}class Pr extends te{constructor(P,V){super(),this.m=P,this.l=V,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(v){te.call(this),this.h=v,this.g={}}T(we,te);var ot=[];function bt(v){M(v.g,function(P,V){this.g.hasOwnProperty(V)&&nt(P)},v),v.g={}}we.prototype.N=function(){we.aa.N.call(this),bt(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ct=c.JSON.stringify,Lt=c.JSON.parse,et=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function mr(){}mr.prototype.h=null;function wn(v){return v.h||(v.h=v.i())}function Dn(){}var Cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){re.call(this,"d")}T(ur,re);function Bt(){re.call(this,"c")}T(Bt,re);var it={},Kt=null;function br(){return Kt=Kt||new xt}it.La="serverreachability";function yr(v){re.call(this,it.La,v)}T(yr,re);function Or(v){const P=br();gt(P,new yr(P))}it.STAT_EVENT="statevent";function kn(v,P){re.call(this,it.STAT_EVENT,v),this.stat=P}T(kn,re);function er(v){const P=br();gt(P,new kn(P,v))}it.Ma="timingevent";function ga(v,P){re.call(this,it.Ma,v),this.size=P}T(ga,re);function cn(v,P){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},P)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function ti(v,P,V,J,Te,$e){v.info(function(){if(v.g)if($e)for(var pt="",Jr=$e.split("&"),ya=0;ya<Jr.length;ya++){var vr=Jr[ya].split("=");if(1<vr.length){var qa=vr[0];vr=vr[1];var Ha=qa.split("_");pt=2<=Ha.length&&Ha[1]=="type"?pt+(qa+"="+vr+"&"):pt+(qa+"=redacted&")}}else pt=null;else pt=$e;return"XMLHTTP REQ ("+J+") [attempt "+Te+"]: "+P+`
`+V+`
`+pt})}function Ar(v,P,V,J,Te,$e,pt){v.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Te+"]: "+P+`
`+V+`
`+$e+" "+pt})}function un(v,P,V,J){v.info(function(){return"XMLHTTP TEXT ("+P+"): "+Kn(v,V)+(J?" "+J:"")})}function ri(v,P){v.info(function(){return"TIMEOUT: "+P})}Cn.prototype.info=function(){};function Kn(v,P){if(!v.g)return P;if(!P)return null;try{var V=JSON.parse(P);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var J=V[v];if(!(2>J.length)){var Te=J[1];if(Array.isArray(Te)&&!(1>Te.length)){var $e=Te[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var pt=1;pt<Te.length;pt++)Te[pt]=""}}}}return Ct(V)}catch{return P}}var Yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function ni(){}T(ni,mr),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Sn=new ni;function Fa(v,P,V,J){this.j=v,this.i=P,this.l=V,this.R=J||1,this.U=new we(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var os={},gi={};function Nt(v,P,V){v.L=1,v.v=be(jt(P)),v.m=V,v.P=!0,he(v,null)}function he(v,P){v.F=Date.now(),Xt(v),v.A=jt(v.v);var V=v.A,J=v.R;Array.isArray(J)||(J=[String(J)]),ds(V.i,"t",J),v.C=0,V=v.j.J,v.h=new Ai,v.g=V1(v.j,V?P:null,!v.m),0<v.O&&(v.M=new Pr(y(v.Y,v,v.g),v.O)),P=v.U,V=v.g,J=v.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(ot[0]=Te.toString()),Te=ot);for(var $e=0;$e<Te.length;$e++){var pt=ct(V,Te[$e],J||P.handleEvent,!1,P.h||P);if(!pt)break;P.g[pt.key]=pt}P=v.H?A(v.H):{},v.m?(v.u||(v.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,P)):(v.u="GET",v.g.ea(v.A,v.u,null,P)),Or(),ti(v.i,v.u,v.A,v.l,v.R,v.m)}Fa.prototype.ca=function(v){v=v.target;const P=this.M;P&&Ni(v)==3?P.j():this.Y(v)},Fa.prototype.Y=function(v){try{if(v==this.g)e:{const Ha=Ni(this.g);var P=this.g.Ba();const Sc=this.g.Z();if(!(3>Ha)&&(Ha!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||Ha!=4||P==7||(P==8||0>=Sc?Or(3):Or(2)),rn(this);var V=this.g.Z();this.X=V;t:if(Ze(this)){var J=Vu(this.g);v="";var Te=J.length,$e=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Gr(this);var pt="";break t}this.h.i=new c.TextDecoder}for(P=0;P<Te;P++)this.h.h=!0,v+=this.h.i.decode(J[P],{stream:!($e&&P==Te-1)});J.length=0,this.h.g+=v,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=V==200,Ar(this.i,this.u,this.A,this.l,this.R,Ha,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Jr,ya=this.g;if((Jr=ya.g?ya.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Jr)){var vr=Jr;break t}}vr=null}if(V=vr)un(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ir(this,V);else{this.o=!1,this.s=3,er(12),hn(this),Gr(this);break e}}if(this.P){V=!0;let Vi;for(;!this.J&&this.C<pt.length;)if(Vi=ut(this,pt),Vi==gi){Ha==4&&(this.s=4,er(14),V=!1),un(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==os){this.s=4,er(15),un(this.i,this.l,pt,"[Invalid Chunk]"),V=!1;break}else un(this.i,this.l,Vi,null),Ir(this,Vi);if(Ze(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ha!=4||pt.length!=0||this.h.h||(this.s=1,er(16),V=!1),this.o=this.o&&V,!V)un(this.i,this.l,pt,"[Invalid Chunked Response]"),hn(this),Gr(this);else if(0<pt.length&&!this.W){this.W=!0;var qa=this.j;qa.g==this&&qa.ba&&!qa.M&&(qa.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),Xf(qa),qa.M=!0,er(11))}}else un(this.i,this.l,pt,null),Ir(this,pt);Ha==4&&hn(this),this.o&&!this.J&&(Ha==4?$1(this.j,this):(this.o=!1,Xt(this)))}else R1(this.g),V==400&&0<pt.indexOf("Unknown SID")?(this.s=3,er(12)):(this.s=0,er(13)),hn(this),Gr(this)}}}catch{}finally{}};function Ze(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ut(v,P){var V=v.C,J=P.indexOf(`
`,V);return J==-1?gi:(V=Number(P.substring(V,J)),isNaN(V)?os:(J+=1,J+V>P.length?gi:(P=P.slice(J,J+V),v.C=J+V,P)))}Fa.prototype.cancel=function(){this.J=!0,hn(this)};function Xt(v){v.S=Date.now()+v.I,dr(v,v.I)}function dr(v,P){if(v.B!=null)throw Error("WatchDog timer not null");v.B=cn(y(v.ba,v),P)}function rn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Fa.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(ri(this.i,this.A),this.L!=2&&(Or(),er(17)),hn(this),this.s=2,Gr(this)):dr(this,this.S-v)};function Gr(v){v.j.G==0||v.J||$1(v.j,v)}function hn(v){rn(v);var P=v.M;P&&typeof P.ma=="function"&&P.ma(),v.M=null,bt(v.U),v.g&&(P=v.g,v.g=null,P.abort(),P.ma())}function Ir(v,P){try{var V=v.j;if(V.G!=0&&(V.g==v||cs(V.h,v))){if(!v.K&&cs(V.h,v)&&V.G==3){try{var J=V.Da.g.parse(P)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Te=J;if(Te[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)bc(V),xc(V);else break e;Qf(V),er(18)}}else V.za=Te[1],0<V.za-V.T&&37500>Te[2]&&V.F&&V.v==0&&!V.C&&(V.C=cn(y(V.Za,V),6e3));if(1>=ll(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else ul(V,11)}else if((v.K||V.g==v)&&bc(V),!I(P))for(Te=V.Da.g.parse(P),P=0;P<Te.length;P++){let vr=Te[P];if(V.T=vr[0],vr=vr[1],V.G==2)if(vr[0]=="c"){V.K=vr[1],V.ia=vr[2];const qa=vr[3];qa!=null&&(V.la=qa,V.j.info("VER="+V.la));const Ha=vr[4];Ha!=null&&(V.Aa=Ha,V.j.info("SVER="+V.Aa));const Sc=vr[5];Sc!=null&&typeof Sc=="number"&&0<Sc&&(J=1.5*Sc,V.L=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const Vi=v.g;if(Vi){const Hu=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var $e=J.h;$e.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(us($e,$e.h),$e.h=null))}if(J.D){const dl=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(J.ya=dl,oe(J.I,J.D,dl))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),J=V;var pt=v;if(J.qa=z1(J,J.J?J.ia:null,J.W),pt.K){ja(J.h,pt);var Jr=pt,ya=J.L;ya&&(Jr.I=ya),Jr.B&&(rn(Jr),Xt(Jr)),J.g=pt}else L1(J);0<V.i.length&&w0(V)}else vr[0]!="stop"&&vr[0]!="close"||ul(V,7);else V.G==3&&(vr[0]=="stop"||vr[0]=="close"?vr[0]=="stop"?ul(V,7):Wf(V):vr[0]!="noop"&&V.l&&V.l.ta(vr),V.v=0)}}Or(4)}catch{}}var Ms=class{constructor(v,P){this.g=v,this.map=P}};function ls(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function so(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ll(v){return v.h?1:v.g?v.g.size:0}function cs(v,P){return v.h?v.h==P:v.g?v.g.has(P):!1}function us(v,P){v.g?v.g.add(P):v.h=P}function ja(v,P){v.h&&v.h==P?v.h=null:v.g&&v.g.has(P)&&v.g.delete(P)}ls.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ln(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let P=v.i;for(const V of v.g.values())P=P.concat(V.D);return P}return S(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var P=[],V=v.length,J=0;J<V;J++)P.push(v[J]);return P}P=[],V=0;for(J in v)P[V++]=v[J];return P}function Se(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var P=[];v=v.length;for(var V=0;V<v;V++)P.push(V);return P}P=[],V=0;for(const J in v)P[V++]=J;return P}}}function Ae(v,P){if(v.forEach&&typeof v.forEach=="function")v.forEach(P,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,P,void 0);else for(var V=Se(v),J=q(v),Te=J.length,$e=0;$e<Te;$e++)P.call(void 0,J[$e],V&&V[$e],v)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(v,P){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var J=v[V].indexOf("="),Te=null;if(0<=J){var $e=v[V].substring(0,J);Te=v[V].substring(J+1)}else $e=v[V];P($e,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Rt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Rt){this.h=v.h,Yt(this,v.j),this.o=v.o,this.g=v.g,Sr(this,v.s),this.l=v.l;var P=v.i,V=new Tn;V.i=P.i,P.g&&(V.g=new Map(P.g),V.h=P.h),Zr(this,V),this.m=v.m}else v&&(P=String(v).match(je))?(this.h=!1,Yt(this,P[1]||"",!0),this.o=ze(P[2]||""),this.g=ze(P[3]||"",!0),Sr(this,P[4]),this.l=ze(P[5]||"",!0),Zr(this,P[6]||"",!0),this.m=ze(P[7]||"")):(this.h=!1,this.i=new Tn(null,this.h))}Rt.prototype.toString=function(){var v=[],P=this.j;P&&v.push(De(P,rr,!0),":");var V=this.g;return(V||P=="file")&&(v.push("//"),(P=this.o)&&v.push(De(P,rr,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(De(V,V.charAt(0)=="/"?_n:Qt,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",De(V,Ps)),v.join("")};function jt(v){return new Rt(v)}function Yt(v,P,V){v.j=V?ze(P,!0):P,v.j&&(v.j=v.j.replace(/:$/,""))}function Sr(v,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);v.s=P}else v.s=null}function Zr(v,P,V){P instanceof Tn?(v.i=P,C1(v.i,v.h)):(V||(P=De(P,ka)),v.i=new Tn(P,v.h))}function oe(v,P,V){v.i.set(P,V)}function be(v){return oe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function ze(v,P){return v?P?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function De(v,P,V){return typeof v=="string"?(v=encodeURI(v).replace(P,dt),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function dt(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var rr=/[#\/\?@]/g,Qt=/[#\?:]/g,_n=/[#\?]/g,ka=/[#\?@]/g,Ps=/#/g;function Tn(v,P){this.h=this.g=null,this.i=v||null,this.j=!!P}function fn(v){v.g||(v.g=new Map,v.h=0,v.i&&ft(v.i,function(P,V){v.add(decodeURIComponent(P.replace(/\+/g," ")),V)}))}t=Tn.prototype,t.add=function(v,P){fn(this),this.i=null,v=yi(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(P),this.h+=1,this};function Co(v,P){fn(v),P=yi(v,P),v.g.has(P)&&(v.i=null,v.h-=v.g.get(P).length,v.g.delete(P))}function Rr(v,P){return fn(v),P=yi(v,P),v.g.has(P)}t.forEach=function(v,P){fn(this),this.g.forEach(function(V,J){V.forEach(function(Te){v.call(P,Te,J,this)},this)},this)},t.na=function(){fn(this);const v=Array.from(this.g.values()),P=Array.from(this.g.keys()),V=[];for(let J=0;J<P.length;J++){const Te=v[J];for(let $e=0;$e<Te.length;$e++)V.push(P[J])}return V},t.V=function(v){fn(this);let P=[];if(typeof v=="string")Rr(this,v)&&(P=P.concat(this.g.get(yi(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)P=P.concat(v[V])}return P},t.set=function(v,P){return fn(this),this.i=null,v=yi(this,v),Rr(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[P]),this.h+=1,this},t.get=function(v,P){return v?(v=this.V(v),0<v.length?String(v[0]):P):P};function ds(v,P,V){Co(v,P),0<V.length&&(v.i=null,v.g.set(yi(v,P),S(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],P=Array.from(this.g.keys());for(var V=0;V<P.length;V++){var J=P[V];const $e=encodeURIComponent(String(J)),pt=this.V(J);for(J=0;J<pt.length;J++){var Te=$e;pt[J]!==""&&(Te+="="+encodeURIComponent(String(pt[J]))),v.push(Te)}}return this.i=v.join("&")};function yi(v,P){return P=String(P),v.j&&(P=P.toLowerCase()),P}function C1(v,P){P&&!v.j&&(fn(v),v.i=null,v.g.forEach(function(V,J){var Te=J.toLowerCase();J!=Te&&(Co(this,J),ds(this,Te,V))},v)),v.j=P}function Hf(v,P){const V=new Cn;if(c.Image){const J=new Image;J.onload=x(zi,V,"TestLoadImage: loaded",!0,P,J),J.onerror=x(zi,V,"TestLoadImage: error",!1,P,J),J.onabort=x(zi,V,"TestLoadImage: abort",!1,P,J),J.ontimeout=x(zi,V,"TestLoadImage: timeout",!1,P,J),c.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=v}else P(!1)}function O1(v,P){const V=new Cn,J=new AbortController,Te=setTimeout(()=>{J.abort(),zi(V,"TestPingServer: timeout",!1,P)},1e4);fetch(v,{signal:J.signal}).then($e=>{clearTimeout(Te),$e.ok?zi(V,"TestPingServer: ok",!0,P):zi(V,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Te),zi(V,"TestPingServer: error",!1,P)})}function zi(v,P,V,J,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),J(V)}catch{}}function oo(){this.g=new et}function Gf(v,P,V){const J=V||"";try{Ae(v,function(Te,$e){let pt=Te;h(Te)&&(pt=Ct(Te)),P.push(J+$e+"="+encodeURIComponent(pt))})}catch(Te){throw P.push(J+"type="+encodeURIComponent("_badmap")),Te}}function Oo(v){this.l=v.Ub||null,this.j=v.eb||!1}T(Oo,mr),Oo.prototype.g=function(){return new hs(this.l,this.j)},Oo.prototype.i=(function(v){return function(){return v}})({});function hs(v,P){xt.call(this),this.D=v,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(hs,xt),t=hs.prototype,t.open=function(v,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=P,this.readyState=1,mc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(P.body=v),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,mc(this)),this.g&&(this.readyState=3,mc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function x0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var P=v.value?v.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!v.done}))&&(this.response=this.responseText+=P)}v.done?Io(this):mc(this),this.readyState==3&&x0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Io(this))},t.Qa=function(v){this.g&&(this.response=v,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(v){v.readyState=4,v.l=null,v.j=null,v.v=null,mc(v)}t.setRequestHeader=function(v,P){this.u.append(v,P)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],P=this.h.entries();for(var V=P.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=P.next();return v.join(`\r
`)};function mc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Uu(v){let P="";return M(v,function(V,J){P+=J,P+=":",P+=V,P+=`\r
`}),P}function gc(v,P,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=Uu(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):oe(v,P,V))}function Bn(v){xt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Bn,xt);var vi=/^https?$/i,cl=["POST","PUT"];t=Bn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,P,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);P=P?P.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?wn(this.o):wn(Sn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(P,String(v),!0),this.B=!1}catch($e){zu(this,$e);return}if(v=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Te in J)V.set(Te,J[Te]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const $e of J.keys())V.set($e,J.get($e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find($e=>$e.toLowerCase()=="content-type"),Te=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cl,P,void 0))||J||Te||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,pt]of V)this.g.setRequestHeader($e,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b0(this),this.u=!0,this.g.send(v),this.u=!1}catch($e){zu(this,$e)}};function zu(v,P){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=P,v.m=5,yc(v),vc(v)}function yc(v){v.A||(v.A=!0,gt(v,"complete"),gt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,gt(this,"complete"),gt(this,"abort"),vc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vc(this,!0)),Bn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I1(this):this.bb())},t.bb=function(){I1(this)};function I1(v){if(v.h&&typeof s<"u"&&(!v.v[1]||Ni(v)!=4||v.Z()!=2)){if(v.u&&Ni(v)==4)cr(v.Ea,0,v);else if(gt(v,"readystatechange"),Ni(v)==4){v.h=!1;try{const pt=v.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var V;if(!(V=P)){var J;if(J=pt===0){var Te=String(v.D).match(je)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),J=!vi.test(Te?Te.toLowerCase():"")}V=J}if(V)gt(v,"complete"),gt(v,"success");else{v.m=6;try{var $e=2<Ni(v)?v.g.statusText:""}catch{$e=""}v.l=$e+" ["+v.Z()+"]",yc(v)}}finally{vc(v)}}}}function vc(v,P){if(v.g){b0(v);const V=v.g,J=v.v[0]?()=>{}:null;v.g=null,v.v=null,P||gt(v,"ready");try{V.onreadystatechange=J}catch{}}}function b0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ni(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var P=this.g.responseText;return v&&P.indexOf(v)==0&&(P=P.substring(v.length)),Lt(P)}};function Vu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function R1(v){const P={};v=(v.g&&2<=Ni(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<v.length;J++){if(I(v[J]))continue;var V=B(v[J]);const Te=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const $e=P[Te]||[];P[Te]=$e,$e.push(V)}N(P,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fu(v,P,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||P}function M1(v){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fu("baseRetryDelayMs",5e3,v),this.cb=Fu("retryDelaySeedMs",1e4,v),this.Wa=Fu("forwardChannelMaxRetries",2,v),this.wa=Fu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ls(v&&v.concurrentRequestLimit),this.Da=new oo,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=M1.prototype,t.la=8,t.G=1,t.connect=function(v,P,V,J){er(0),this.W=v,this.H=P||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.I=z1(this,null,this.W),w0(this)};function Wf(v){if(P1(v),v.G==3){var P=v.U++,V=jt(v.I);if(oe(V,"SID",v.K),oe(V,"RID",P),oe(V,"TYPE","terminate"),qu(v,V),P=new Fa(v,v.j,P),P.L=2,P.v=be(jt(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=P.v,V=!0),V||(P.g=V1(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Xt(P)}Yf(v)}function xc(v){v.g&&(Xf(v),v.g.cancel(),v.g=null)}function P1(v){xc(v),v.u&&(c.clearTimeout(v.u),v.u=null),bc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function w0(v){if(!so(v.h)&&!v.s){v.s=!0;var P=v.Ga;Z||me(),ie||(Z(),ie=!0),fe.add(P,v),v.B=0}}function Ow(v,P){return ll(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=P.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=cn(y(v.Ga,v,P),U1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Te=new Fa(this,this.j,v);let $e=this.o;if(this.S&&($e?($e=A($e),z($e,this.S)):$e=this.S),this.m!==null||this.O||(Te.H=$e,$e=null),this.P)e:{for(var P=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(P+=J,4096<P){P=V;break e}if(P===4096||V===this.i.length-1){P=V+1;break e}}P=1e3}else P=1e3;P=Kf(this,Te,P),V=jt(this.I),oe(V,"RID",v),oe(V,"CVER",22),this.D&&oe(V,"X-HTTP-Session-Id",this.D),qu(this,V),$e&&(this.O?P="headers="+encodeURIComponent(String(Uu($e)))+"&"+P:this.m&&gc(V,this.m,$e)),us(this.h,Te),this.Ua&&oe(V,"TYPE","init"),this.P?(oe(V,"$req",P),oe(V,"SID","null"),Te.T=!0,Nt(Te,V,null)):Nt(Te,V,P),this.G=2}}else this.G==3&&(v?D1(this,v):this.i.length==0||so(this.h)||D1(this))};function D1(v,P){var V;P?V=P.l:V=v.U++;const J=jt(v.I);oe(J,"SID",v.K),oe(J,"RID",V),oe(J,"AID",v.T),qu(v,J),v.m&&v.o&&gc(J,v.m,v.o),V=new Fa(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),P&&(v.i=P.D.concat(v.i)),P=Kf(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),us(v.h,V),Nt(V,J,P)}function qu(v,P){v.H&&M(v.H,function(V,J){oe(P,J,V)}),v.l&&Ae({},function(V,J){oe(P,J,V)})}function Kf(v,P,V){V=Math.min(v.i.length,V);var J=v.l?y(v.l.Na,v.l,v):null;e:{var Te=v.i;let $e=-1;for(;;){const pt=["count="+V];$e==-1?0<V?($e=Te[0].g,pt.push("ofs="+$e)):$e=0:pt.push("ofs="+$e);let Jr=!0;for(let ya=0;ya<V;ya++){let vr=Te[ya].g;const qa=Te[ya].map;if(vr-=$e,0>vr)$e=Math.max(0,Te[ya].g-100),Jr=!1;else try{Gf(qa,pt,"req"+vr+"_")}catch{J&&J(qa)}}if(Jr){J=pt.join("&");break e}}}return v=v.i.splice(0,V),P.D=v,J}function L1(v){if(!v.g&&!v.u){v.Y=1;var P=v.Fa;Z||me(),ie||(Z(),ie=!0),fe.add(P,v),v.v=0}}function Qf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=cn(y(v.Fa,v),U1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,B1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=cn(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,er(10),xc(this),B1(this))};function Xf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function B1(v){v.g=new Fa(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var P=jt(v.qa);oe(P,"RID","rpc"),oe(P,"SID",v.K),oe(P,"AID",v.T),oe(P,"CI",v.F?"0":"1"),!v.F&&v.ja&&oe(P,"TO",v.ja),oe(P,"TYPE","xmlhttp"),qu(v,P),v.m&&v.o&&gc(P,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=be(jt(P)),V.m=null,V.P=!0,he(V,v)}t.Za=function(){this.C!=null&&(this.C=null,xc(this),Qf(this),er(19))};function bc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function $1(v,P){var V=null;if(v.g==P){bc(v),Xf(v),v.g=null;var J=2}else if(cs(v.h,P))V=P.D,ja(v.h,P),J=1;else return;if(v.G!=0){if(P.o)if(J==1){V=P.m?P.m.length:0,P=Date.now()-P.F;var Te=v.B;J=br(),gt(J,new ga(J,V)),w0(v)}else L1(v);else if(Te=P.s,Te==3||Te==0&&0<P.X||!(J==1&&Ow(v,P)||J==2&&Qf(v)))switch(V&&0<V.length&&(P=v.h,P.i=P.i.concat(V)),Te){case 1:ul(v,5);break;case 4:ul(v,10);break;case 3:ul(v,6);break;default:ul(v,2)}}}function U1(v,P){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*P}function ul(v,P){if(v.j.info("Error code "+P),P==2){var V=y(v.fb,v),J=v.Xa;const Te=!J;J=new Rt(J||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(J,"https"),be(J),Te?Hf(J.toString(),V):O1(J.toString(),V)}else er(2);v.G=0,v.l&&v.l.sa(P),Yf(v),P1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),er(2)):(this.j.info("Failed to ping google.com"),er(1))};function Yf(v){if(v.G=0,v.ka=[],v.l){const P=Ln(v.h);(P.length!=0||v.i.length!=0)&&(w(v.ka,P),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function z1(v,P,V){var J=V instanceof Rt?jt(V):new Rt(V);if(J.g!="")P&&(J.g=P+"."+J.g),Sr(J,J.s);else{var Te=c.location;J=Te.protocol,P=P?P+"."+Te.hostname:Te.hostname,Te=+Te.port;var $e=new Rt(null);J&&Yt($e,J),P&&($e.g=P),Te&&Sr($e,Te),V&&($e.l=V),J=$e}return V=v.D,P=v.ya,V&&P&&oe(J,V,P),oe(J,"VER",v.la),qu(v,J),J}function V1(v,P,V){if(P&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=v.Ca&&!v.pa?new Bn(new Oo({eb:V})):new Bn(v.pa),P.Ha(v.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F1(){}t=F1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function S0(){}S0.prototype.g=function(v,P){return new Ei(v,P)};function Ei(v,P){xt.call(this),this.g=new M1(P),this.l=v,this.h=P&&P.messageUrlParams||null,v=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(v?v["X-WebChannel-Content-Type"]=P.messageContentType:v={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(v?v["X-WebChannel-Client-Profile"]=P.va:v={"X-WebChannel-Client-Profile":P.va}),this.g.S=v,(v=P&&P.Sb)&&!I(v)&&(this.g.m=v),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!I(P)&&(this.g.D=P,v=this.h,v!==null&&P in v&&(v=this.h,P in v&&delete v[P])),this.j=new wc(this)}T(Ei,xt),Ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ei.prototype.close=function(){Wf(this.g)},Ei.prototype.o=function(v){var P=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=Ct(v),v=V);P.i.push(new Ms(P.Ya++,v)),P.G==3&&w0(P)},Ei.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,Ei.aa.N.call(this)};function q1(v){ur.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var P=v.__sm__;if(P){e:{for(const V in P){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,P=P!==null&&v in P?P[v]:void 0),this.data=P}else this.data=v}T(q1,ur);function H1(){Bt.call(this),this.status=1}T(H1,Bt);function wc(v){this.g=v}T(wc,F1),wc.prototype.ua=function(){gt(this.g,"a")},wc.prototype.ta=function(v){gt(this.g,new q1(v))},wc.prototype.sa=function(v){gt(this.g,new H1)},wc.prototype.ra=function(){gt(this.g,"b")},S0.prototype.createWebChannel=S0.prototype.g,Ei.prototype.send=Ei.prototype.o,Ei.prototype.open=Ei.prototype.m,Ei.prototype.close=Ei.prototype.close,RV=function(){return new S0},IV=function(){return br()},OV=it,QT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Uv=Yr,dn.COMPLETE="complete",CV=dn,Dn.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",xt.prototype.listen=xt.prototype.K,tm=Dn,Bn.prototype.listenOnce=Bn.prototype.L,Bn.prototype.getLastError=Bn.prototype.Ka,Bn.prototype.getLastErrorCode=Bn.prototype.Ba,Bn.prototype.getStatus=Bn.prototype.Z,Bn.prototype.getResponseJson=Bn.prototype.Oa,Bn.prototype.getResponseText=Bn.prototype.oa,Bn.prototype.send=Bn.prototype.ea,Bn.prototype.setWithCredentials=Bn.prototype.Ha,kV=Bn}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});const OO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new m8("@firebase/firestore");function lh(){return Vd.logLevel}function rt(t,...e){if(Vd.logLevel<=jr.DEBUG){const r=e.map(k8);Vd.debug(`Firestore (${Af}): ${t}`,...r)}}function da(t,...e){if(Vd.logLevel<=jr.ERROR){const r=e.map(k8);Vd.error(`Firestore (${Af}): ${t}`,...r)}}function Dm(t,...e){if(Vd.logLevel<=jr.WARN){const r=e.map(k8);Vd.warn(`Firestore (${Af}): ${t}`,...r)}}function k8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t="Unexpected state"){const e=`FIRESTORE (${Af}) INTERNAL ASSERTION FAILED: `+t;throw da(e),new Error(e)}function Pt(t,e){t||kt()}function Mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Eo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qte{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Si.UNAUTHENTICATED)))}shutdown(){}}class Yte{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new So;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new So,e.enqueueRetryable((()=>a(this.currentUser)))};const s=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new So)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pt(typeof n.accessToken=="string"),new Qte(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new Si(e)}}class Zte{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Jte{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Zte(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ere{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Pt(this.o===void 0);const n=i=>{i.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.R;return this.R=i.token,rt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Pt(typeof r.token=="string"),this.R=r.token,new ere(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=rre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function sr(t,e){return t<e?-1:t>e?1:0}function Rh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function PV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ht(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ht(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ht(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Zn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sr(this.nanoseconds,e.nanoseconds):sr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new Zn(0,0))}static max(){return new $t(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,r,n){r===void 0?r=0:r>e.length&&kt(),n===void 0?n=e.length-r:n>e.length-r&&kt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Lm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Lm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),s=r.get(a);if(i<s)return-1;if(i>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class zr extends Lm{construct(e,r,n){return new zr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ht(Fe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new zr(r)}static emptyPath(){return new zr([])}}const nre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends Lm{construct(e,r,n){return new Yn(e,r,n)}static isValidIdentifier(e){return nre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new ht(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new ht(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ht(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(s=!s,a++):c!=="."||s?(n+=c,a++):(i(),a++)}if(i(),s)throw new ht(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(r)}static emptyPath(){return new Yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(zr.fromString(e))}static fromName(e){return new wt(zr.fromString(e).popFirst(5))}static empty(){return new wt(zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return zr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new zr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function XT(t){return t.fields.find((e=>e.kind===2))}function yd(t){return t.fields.filter((e=>e.kind!==2))}ux.UNKNOWN_ID=-1;class zv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Bm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Bm(0,Cs.min())}}function DV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=$t.fromTimestamp(n===1e9?new Zn(r+1,0):new Zn(r,n));return new Cs(a,wt.empty(),e)}function LV(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Cs($t.min(),wt.empty(),-1)}static max(){return new Cs($t.max(),wt.empty(),-1)}}function C8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=wt.comparator(t.documentKey,e.documentKey),r!==0?r:sr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $V{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){if(t.code!==Fe.FAILED_PRECONDITION||t.message!==BV)throw t;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ie(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ie?r:Ie.resolve(r)}catch(r){return Ie.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.reject(r)}static resolve(e){return new Ie(((r,n)=>{r(e)}))}static reject(e){return new Ie(((r,n)=>{n(e)}))}static waitFor(e){return new Ie(((r,n)=>{let a=0,i=0,s=!1;e.forEach((c=>{++a,c.next((()=>{++i,s&&i===a&&r()}),(d=>n(d)))})),s=!0,i===a&&r()}))}static or(e){let r=Ie.resolve(!1);for(const n of e)r=r.next((a=>a?Ie.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Ie(((n,a)=>{const i=e.length,s=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{s[h]=p,++c,c===i&&n(s)}),(p=>a(p)))}}))}static doWhile(e,r){return new Ie(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new So,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new um(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=O8(n.target.error);this.V.reject(new um(e,a))}}static open(e,r,n,a){try{return new r2(r,e.transaction(a,n))}catch(i){throw new um(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(rt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ire(r)}}class vu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,vu.S(Ba())===12.2&&da("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rt("SimpleDb","Removing database:",e),wd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hz())return!1;if(vu.v())return!0;const e=Ba(),r=vu.S(e),n=0<r&&r<10,a=UV(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(rt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const s=i.target.result;r(s)},a.onblocked=()=>{n(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const s=i.target.error;s.name==="VersionError"?n(new ht(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new ht(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new um(e,s))},a.onupgradeneeded=i=>{rt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const s=i.target.result;this.p.O(s,a.transaction,i.oldVersion,this.version).next((()=>{rt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=r2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Ie.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&s<3;if(rt("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class are{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wd(this.B.delete())}}class um extends ht{constructor(e,r){super(Fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ou(t){return t.name==="IndexedDbTransactionError"}class ire{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(rt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wd(n)}add(e){return rt("SimpleDb","ADD",this.store.name,e,e),wd(this.store.add(e))}get(e){return wd(this.store.get(e)).next((r=>(r===void 0&&(r=null),rt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return rt("SimpleDb","DELETE",this.store.name,e),wd(this.store.delete(e))}count(){return rt("SimpleDb","COUNT",this.store.name),wd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Ie(((s,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{s(d.target.result)}}))}{const i=this.cursor(n),s=[];return this.W(i,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ie(((a,i)=>{n.onerror=s=>{i(s.target.error)},n.onsuccess=s=>{a(s.target.result)}}))}j(e,r){rt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ie(((n,a)=>{r.onerror=i=>{const s=O8(i.target.error);a(s)},r.onsuccess=i=>{const s=i.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new Ie(((a,i)=>{e.onerror=s=>{i(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void a();const d=new are(c),h=r(c.primaryKey,c.value,d);if(h instanceof Ie){const p=h.catch((m=>(d.done(),Ie.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Ie.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wd(t){return new Ie(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=O8(n.target.error);r(a)}}))}let IO=!1;function O8(t){const e=vu.S(Ba());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ht("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IO||(IO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class sre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){rt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{rt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ou(r)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Cu(r)}await this.X(6e4)}))}}class ore{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Ie.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return rt("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,a).next((c=>{a-=c,n.add(s)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const s=i.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(a,i))).next((c=>(rt("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const s=LV(i);C8(s,n)>0&&(n=s)})),new Cs(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}es.oe=-1;function Xg(t){return t==null}function $m(t){return t===0&&1/t==-1/0}function zV(t){return typeof t=="number"&&Number.isInteger(t)&&!$m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=RO(e)),e=lre(t.get(r),e);return RO(e)}function lre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function RO(t){return t+""}function $o(t){const e=t.length;if(Pt(e>=2),e===2)return Pt(t.charAt(0)===""&&t.charAt(1)===""),zr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const s=t.indexOf("",i);switch((s<0||s>r)&&kt(),t.charAt(s+1)){case"":const c=t.substring(i,s);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,s),a+="\0";break;case"":a+=t.substring(i,s+1);break;default:kt()}i=s+2}return new zr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){return[t,Di(e)]}function VV(t,e,r){return[t,Di(e),r]}const cre={},ure=["prefixPath","collectionGroup","readTime","documentId"],dre=["prefixPath","collectionGroup","documentId"],hre=["collectionGroup","readTime","prefixPath","documentId"],fre=["canonicalId","targetId"],pre=["targetId","path"],mre=["path","targetId"],gre=["collectionId","parent"],yre=["indexId","uid"],vre=["uid","sequenceNumber"],xre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bre=["indexId","uid","orderedDocumentKey"],wre=["userId","collectionPath","documentId"],Sre=["userId","collectionPath","largestBatchId"],_re=["userId","collectionGroup","largestBatchId"],FV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tre=[...FV,"documentOverlays"],qV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HV=qV,I8=[...HV,"indexConfiguration","indexState","indexEntries"],Are=I8,Nre=[...I8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends $V{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function za(t,e){const r=Mt(t);return vu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function u0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function GV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,r){this.comparator=e,this.root=r||ui.EMPTY}insert(e,r){return new Pn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zy(this.root,e,this.comparator,!0)}}class Zy{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??ui.RED,this.left=a??ui.EMPTY,this.right=i??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new ui(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ui.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new ui(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new DO(this.data.getIterator())}getIteratorFrom(e){return new DO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new xn(this.comparator);return r.data=e,r}}class DO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Y0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new ts([])}unionWith(e){let r=new xn(Yn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ts(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Rh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new WV("Invalid base64 string: "+i):i}})(e);return new ma(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i})(e);return new ma(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const Ere=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jl(t){if(Pt(!!t),typeof t=="string"){let e=0;const r=Ere.exec(t);if(Pt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _u(t){return typeof t=="string"?ma.fromBase64String(t):ma.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function M8(t){const e=t.mapValue.fields.__previous_value__;return R8(e)?M8(e):e}function Um(t){const e=Jl(t.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(e,r,n,a,i,s,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Fd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Fd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fv={nullValue:"NULL_VALUE"};function qd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?R8(t)?4:KV(t)?9007199254740991:n2(t)?10:11:kt()}function Xo(t,e){if(t===e)return!0;const r=qd(t);if(r!==qd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Um(t).isEqual(Um(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=Jl(a.timestampValue),c=Jl(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return _u(a.bytesValue).isEqual(_u(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return qn(a.geoPointValue.latitude)===qn(i.geoPointValue.latitude)&&qn(a.geoPointValue.longitude)===qn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return qn(a.integerValue)===qn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=qn(a.doubleValue),c=qn(i.doubleValue);return s===c?$m(s)===$m(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Rh(t.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:case 11:return(function(a,i){const s=a.mapValue.fields||{},c=i.mapValue.fields||{};if(PO(s)!==PO(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!Xo(s[d],c[d])))return!1;return!0})(t,e);default:return kt()}}function zm(t,e){return(t.values||[]).find((r=>Xo(r,e)))!==void 0}function Tu(t,e){if(t===e)return 0;const r=qd(t),n=qd(e);if(r!==n)return sr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return sr(t.booleanValue,e.booleanValue);case 2:return(function(i,s){const c=qn(i.integerValue||i.doubleValue),d=qn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return LO(t.timestampValue,e.timestampValue);case 4:return LO(Um(t),Um(e));case 5:return sr(t.stringValue,e.stringValue);case 6:return(function(i,s){const c=_u(i),d=_u(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,s){const c=i.split("/"),d=s.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=sr(c[h],d[h]);if(p!==0)return p}return sr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,s){const c=sr(qn(i.latitude),qn(s.latitude));return c!==0?c:sr(qn(i.longitude),qn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BO(t.arrayValue,e.arrayValue);case 10:return(function(i,s){var c,d,h,p;const m=i.fields||{},y=s.fields||{},x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=sr(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:BO(x,T)})(t.mapValue,e.mapValue);case 11:return(function(i,s){if(i===su.mapValue&&s===su.mapValue)return 0;if(i===su.mapValue)return 1;if(s===su.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=s.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=sr(d[m],p[m]);if(y!==0)return y;const x=Tu(c[d[m]],h[p[m]]);if(x!==0)return x}return sr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw kt()}}function LO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return sr(t,e);const r=Jl(t),n=Jl(e),a=sr(r.seconds,n.seconds);return a!==0?a:sr(r.nanos,n.nanos)}function BO(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Tu(r[a],n[a]);if(i)return i}return sr(r.length,n.length)}function Mh(t){return ZT(t)}function ZT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Jl(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return _u(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return wt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=ZT(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${ZT(r.fields[s])}`;return a+"}"})(t.mapValue):kt()}function Vm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function JT(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function $O(t){return!!t&&"nullValue"in t}function UO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qv(t){return!!t&&"mapValue"in t}function n2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function dm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return u0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=dm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=dm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function KV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const QV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kre(t){return"nullValue"in t?Fv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vm(Fd.empty(),wt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?n2(t)?QV:{mapValue:{}}:kt()}function Cre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vm(Fd.empty(),wt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?QV:"mapValue"in t?n2(t)?{mapValue:{}}:su:kt()}function zO(t,e){const r=Tu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function VO(t,e){const r=Tu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(r)}setAll(e){let r=Yn.emptyPath(),n={},a=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}s?n[c.lastSegment()]=dm(s):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());qv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];qv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){u0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new hi(dm(this.value))}}function XV(t){const e=[];return u0(t.fields,((r,n)=>{const a=new Yn([r]);if(qv(n)){const i=XV(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,r,n,a,i,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Hn(e,0,$t.min(),$t.min(),$t.min(),hi.empty(),0)}static newFoundDocument(e,r,n,a){return new Hn(e,1,r,$t.min(),n,a,0)}static newNoDocument(e,r){return new Hn(e,2,r,$t.min(),$t.min(),hi.empty(),0)}static newUnknownDocument(e,r){return new Hn(e,3,r,$t.min(),$t.min(),hi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r){this.position=e,this.inclusive=r}}function FO(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=wt.comparator(wt.fromName(s.referenceValue),r.key):n=Tu(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function qO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Xo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ore(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YV=class{};class kr extends YV{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Ire(e,r,n):r==="array-contains"?new Pre(e,n):r==="in"?new nF(e,n):r==="not-in"?new Dre(e,n):r==="array-contains-any"?new Lre(e,n):new kr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Rre(e,n):new Mre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Tu(r,this.value)):r!==null&&qd(this.value)===qd(r)&&this.matchesComparison(Tu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends YV{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ln(e,r)}matches(e){return Dh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dh(t){return t.op==="and"}function eA(t){return t.op==="or"}function P8(t){return ZV(t)&&Dh(t)}function ZV(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function tA(t){if(t instanceof kr)return t.field.canonicalString()+t.op.toString()+Mh(t.value);if(P8(t))return t.filters.map((e=>tA(e))).join(",");{const e=t.filters.map((r=>tA(r))).join(",");return`${t.op}(${e})`}}function JV(t,e){return t instanceof kr?(function(n,a){return a instanceof kr&&n.op===a.op&&n.field.isEqual(a.field)&&Xo(n.value,a.value)})(t,e):t instanceof ln?(function(n,a){return a instanceof ln&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,s,c)=>i&&JV(s,a.filters[c])),!0):!1})(t,e):void kt()}function eF(t,e){const r=t.filters.concat(e);return ln.create(r,t.op)}function tF(t){return t instanceof kr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Mh(r.value)}`})(t):t instanceof ln?(function(r){return r.op.toString()+" {"+r.getFilters().map(tF).join(" ,")+"}"})(t):"Filter"}class Ire extends kr{constructor(e,r,n){super(e,r,n),this.key=wt.fromName(n.referenceValue)}matches(e){const r=wt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Rre extends kr{constructor(e,r){super(e,"in",r),this.keys=rF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Mre extends kr{constructor(e,r){super(e,"not-in",r),this.keys=rF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function rF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>wt.fromName(n.referenceValue)))}class Pre extends kr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Fm(r)&&zm(r.arrayValue,this.value)}}class nF extends kr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&zm(this.value.arrayValue,r)}}class Dre extends kr{constructor(e,r){super(e,"not-in",r)}matches(e){if(zm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!zm(this.value.arrayValue,r)}}class Lre extends kr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Fm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>zm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e,r=null,n=[],a=[],i=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=c,this.ue=null}}function rA(t,e=null,r=[],n=[],a=null,i=null,s=null){return new Bre(t,e,r,n,a,i,s)}function Hd(t){const e=Mt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>tA(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),Xg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Mh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Mh(n))).join(",")),e.ue=r}return e.ue}function Yg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Ore(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!JV(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qO(t.startAt,e.startAt)&&qO(t.endAt,e.endAt)}function dx(t){return wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hx(t,e){return t.filters.filter((r=>r instanceof kr&&r.field.isEqual(e)))}function HO(t,e,r){let n=Fv,a=!0;for(const i of hx(t,e)){let s=Fv,c=!0;switch(i.op){case"<":case"<=":s=kre(i.value);break;case"==":case"in":case">=":s=i.value;break;case">":s=i.value,c=!1;break;case"!=":case"not-in":s=Fv}zO({value:n,inclusive:a},{value:s,inclusive:c})<0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];zO({value:n,inclusive:a},{value:s,inclusive:r.inclusive})<0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}function GO(t,e,r){let n=su,a=!0;for(const i of hx(t,e)){let s=su,c=!0;switch(i.op){case">=":case">":s=Cre(i.value),c=!1;break;case"==":case"in":case"<=":s=i.value;break;case"<":s=i.value,c=!1;break;case"!=":case"not-in":s=su}VO({value:n,inclusive:a},{value:s,inclusive:c})>0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];VO({value:n,inclusive:a},{value:s,inclusive:r.inclusive})>0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r=null,n=[],a=[],i=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function aF(t,e,r,n,a,i,s,c){return new Nf(t,e,r,n,a,i,s,c)}function Zg(t){return new Nf(t)}function WO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iF(t){return t.collectionGroup!==null}function hm(t){const e=Mt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new xn(Yn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qm(i,n))})),r.has(Yn.keyField().canonicalString())||e.ce.push(new qm(Yn.keyField(),n))}return e.ce}function Ns(t){const e=Mt(t);return e.le||(e.le=$re(e,hm(t))),e.le}function $re(t,e){if(t.limitType==="F")return rA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new qm(a.field,i)}));const r=t.endAt?new Ph(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ph(t.startAt.position,t.startAt.inclusive):null;return rA(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function nA(t,e){const r=t.filters.concat([e]);return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function fx(t,e,r){return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function a2(t,e){return Yg(Ns(t),Ns(e))&&t.limitType===e.limitType}function sF(t){return`${Hd(Ns(t))}|lt:${t.limitType}`}function ch(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>tF(a))).join(", ")}]`),Xg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Mh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Mh(a))).join(",")),`Target(${n})`})(Ns(t))}; limitType=${t.limitType})`}function Jg(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):wt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of hm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(s,c,d){const h=FO(s,c,d);return s.inclusive?h<=0:h<0})(n.startAt,hm(n),a)||n.endAt&&!(function(s,c,d){const h=FO(s,c,d);return s.inclusive?h>=0:h>0})(n.endAt,hm(n),a))})(t,e)}function oF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lF(t){return(e,r)=>{let n=!1;for(const a of hm(t)){const i=Ure(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Ure(t,e,r){const n=t.field.isKeyField()?wt.comparator(e.key,r.key):(function(i,s,c){const d=s.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Tu(d,h):kt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){u0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return GV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zre=new Pn(wt.comparator);function Ts(){return zre}const cF=new Pn(wt.comparator);function rm(...t){let e=cF;for(const r of t)e=e.insert(r.key,r);return e}function uF(t){let e=cF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Uo(){return fm()}function dF(){return fm()}function fm(){return new Iu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Vre=new Pn(wt.comparator),Fre=new xn(wt.comparator);function xr(...t){let e=Fre;for(const r of t)e=e.add(r);return e}const qre=new xn(sr);function D8(){return qre}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(e)?"-0":e}}function hF(t){return{integerValue:""+t}}function fF(t,e){return zV(e)?hF(e):L8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this._=void 0}}function Hre(t,e,r){return t instanceof Hm?(function(a,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&R8(i)&&(i=M8(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}})(r,e):t instanceof Gd?mF(t,e):t instanceof Lh?gF(t,e):(function(a,i){const s=pF(a,i),c=KO(s)+KO(a.Pe);return JT(s)&&JT(a.Pe)?hF(c):L8(a.serializer,c)})(t,e)}function Gre(t,e,r){return t instanceof Gd?mF(t,e):t instanceof Lh?gF(t,e):r}function pF(t,e){return t instanceof Bh?(function(n){return JT(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Hm extends i2{}class Gd extends i2{constructor(e){super(),this.elements=e}}function mF(t,e){const r=yF(e);for(const n of t.elements)r.some((a=>Xo(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Lh extends i2{constructor(e){super(),this.elements=e}}function gF(t,e){let r=yF(e);for(const n of t.elements)r=r.filter((a=>!Xo(a,n)));return{arrayValue:{values:r}}}class Bh extends i2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function KO(t){return qn(t.integerValue||t.doubleValue)}function yF(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,r){this.field=e,this.transform=r}}function Wre(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Gd&&a instanceof Gd||n instanceof Lh&&a instanceof Lh?Rh(n.elements,a.elements,Xo):n instanceof Bh&&a instanceof Bh?Xo(n.Pe,a.Pe):n instanceof Hm&&a instanceof Hm})(t.transform,e.transform)}class Kre{constructor(e,r){this.version=e,this.transformResults=r}}class ha{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ha}static exists(e){return new ha(void 0,e)}static updateTime(e){return new ha(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class s2{}function vF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new e1(t.key,ha.none()):new Ef(t.key,t.data,ha.none());{const r=t.data,n=hi.empty();let a=new xn(Yn.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new cc(t.key,n,new ts(a.toArray()),ha.none())}}function Qre(t,e,r){t instanceof Ef?(function(a,i,s){const c=a.value.clone(),d=XO(a.fieldTransforms,i,s.transformResults);c.setAll(d),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof cc?(function(a,i,s){if(!Hv(a.precondition,i))return void i.convertToUnknownDocument(s.version);const c=XO(a.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(xF(a)),d.setAll(c),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function pm(t,e,r,n){return t instanceof Ef?(function(i,s,c,d){if(!Hv(i.precondition,s))return c;const h=i.value.clone(),p=YO(i.fieldTransforms,d,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof cc?(function(i,s,c,d){if(!Hv(i.precondition,s))return c;const h=YO(i.fieldTransforms,d,s),p=s.data;return p.setAll(xF(i)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,s,c){return Hv(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function Xre(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=pF(n.transform,a||null);i!=null&&(r===null&&(r=hi.empty()),r.set(n.field,i))}return r||null}function QO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Rh(n,a,((i,s)=>Wre(i,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ef extends s2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cc extends s2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function XO(t,e,r){const n=new Map;Pt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,c=e.data.field(i.field);n.set(i.field,Gre(s,c,r[a]))}return n}function YO(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,Hre(i,s,e))}return n}class e1 extends s2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $8 extends s2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Qre(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=dF();return this.mutations.forEach((a=>{const i=e.get(a.key),s=i.overlayedDocument;let c=this.applyToLocalView(s,i.mutatedFields);c=r.has(a.key)?null:c;const d=vF(s,c);d!==null&&n.set(a.key,d),s.isValidDocument()||s.convertToNoDocument($t.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),xr())}isEqual(e){return this.batchId===e.batchId&&Rh(this.mutations,e.mutations,((r,n)=>QO(r,n)))&&Rh(this.baseMutations,e.baseMutations,((r,n)=>QO(r,n)))}}class z8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Pt(e.mutations.length===n.length);let a=(function(){return Vre})();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new z8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sa,Dr;function bF(t){switch(t){default:return kt();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function wF(t){if(t===void 0)return da("GRPC error has no .code"),Fe.UNKNOWN;switch(t){case Sa.OK:return Fe.OK;case Sa.CANCELLED:return Fe.CANCELLED;case Sa.UNKNOWN:return Fe.UNKNOWN;case Sa.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case Sa.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case Sa.INTERNAL:return Fe.INTERNAL;case Sa.UNAVAILABLE:return Fe.UNAVAILABLE;case Sa.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case Sa.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case Sa.NOT_FOUND:return Fe.NOT_FOUND;case Sa.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case Sa.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case Sa.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case Sa.ABORTED:return Fe.ABORTED;case Sa.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case Sa.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case Sa.DATA_LOSS:return Fe.DATA_LOSS;default:return kt()}}(Dr=Sa||(Sa={}))[Dr.OK=0]="OK",Dr[Dr.CANCELLED=1]="CANCELLED",Dr[Dr.UNKNOWN=2]="UNKNOWN",Dr[Dr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dr[Dr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dr[Dr.NOT_FOUND=5]="NOT_FOUND",Dr[Dr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dr[Dr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dr[Dr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dr[Dr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dr[Dr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dr[Dr.ABORTED=10]="ABORTED",Dr[Dr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dr[Dr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dr[Dr.INTERNAL=13]="INTERNAL",Dr[Dr.UNAVAILABLE=14]="UNAVAILABLE",Dr[Dr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zre(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre=new Pd([4294967295,4294967295],0);function ZO(t){const e=Zre().encode(t),r=new jV;return r.update(e),new Uint8Array(r.digest())}function JO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pd([r,n],0),new Pd([a,i],0)]}class F8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new nm(`Invalid padding: ${r}`);if(n<0)throw new nm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new nm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Pd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Pd.fromNumber(n)));return a.compare(Jre)===1&&(a=new Pd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=ZO(e),[n,a]=JO(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);if(!this.de(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new F8(i,a,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=ZO(e),[n,a]=JO(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,r1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new t1($t.min(),a,new Pn(sr),Ts(),xr())}}class r1{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new r1(n,r,xr(),xr(),xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class SF{constructor(e,r){this.targetId=e,this.me=r}}class _F{constructor(e,r,n=ma.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class eI{constructor(){this.fe=0,this.ge=rI(),this.pe=ma.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xr(),r=xr(),n=xr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:kt()}})),new r1(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=rI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ene{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ts(),this.qe=tI(),this.Qe=new Pn(sr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:kt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(dx(i))if(n===0){const s=new wt(i.path);this.Ue(r,s,Hn.newNoDocument(s,$t.min()))}else Pt(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,c;try{s=_u(n).toUint8Array()}catch(d){if(d instanceof WV)return Dm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new F8(s,a,i)}catch(d){return Dm(d instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,s)=>{const c=this.Je(s);if(c){if(i.current&&dx(c.target)){const d=new wt(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,Hn.newNoDocument(d,e))}i.be&&(r.set(s,i.ve()),i.Ce())}}));let n=xr();this.qe.forEach(((i,s)=>{let c=!0;s.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,s)=>s.setReadTime(e)));const a=new t1(e,r,this.Qe,this.ke,n);return this.ke=Ts(),this.qe=tI(),this.Qe=new Pn(sr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new eI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new xn(sr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||rt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function tI(){return new Pn(wt.comparator)}function rI(){return new Pn(wt.comparator)}const tne={asc:"ASCENDING",desc:"DESCENDING"},rne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nne={and:"AND",or:"OR"};class ane{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function aA(t,e){return t.useProto3Json||Xg(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ine(t,e){return $h(t,e.toTimestamp())}function Za(t){return Pt(!!t),$t.fromTimestamp((function(r){const n=Jl(r);return new Zn(n.seconds,n.nanos)})(t))}function q8(t,e){return iA(t,e).canonicalString()}function iA(t,e){const r=(function(a){return new zr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function AF(t){const e=zr.fromString(t);return Pt(MF(e)),e}function Gm(t,e){return q8(t.databaseId,e.path)}function Fl(t,e){const r=AF(e);if(r.get(1)!==t.databaseId.projectId)throw new ht(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ht(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new wt(jF(r))}function NF(t,e){return q8(t.databaseId,e)}function EF(t){const e=AF(t);return e.length===4?zr.emptyPath():jF(e)}function sA(t){return new zr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jF(t){return Pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nI(t,e,r){return{name:Gm(t,e),fields:r.value.mapValue.fields}}function sne(t,e,r){const n=Fl(t,e.name),a=Za(e.updateTime),i=e.createTime?Za(e.createTime):$t.min(),s=new hi({mapValue:{fields:e.fields}}),c=Hn.newFoundDocument(n,a,i,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function one(t,e){return"found"in e?(function(n,a){Pt(!!a.found),a.found.name,a.found.updateTime;const i=Fl(n,a.found.name),s=Za(a.found.updateTime),c=a.found.createTime?Za(a.found.createTime):$t.min(),d=new hi({mapValue:{fields:a.found.fields}});return Hn.newFoundDocument(i,s,c,d)})(t,e):"missing"in e?(function(n,a){Pt(!!a.missing),Pt(!!a.readTime);const i=Fl(n,a.missing),s=Za(a.readTime);return Hn.newNoDocument(i,s)})(t,e):kt()}function lne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:kt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Pt(p===void 0||typeof p=="string"),ma.fromBase64String(p||"")):(Pt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ma.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(h){const p=h.code===void 0?Fe.UNKNOWN:wF(h.code);return new ht(p,h.message||"")})(s);r=new _F(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Fl(t,n.document.name),i=Za(n.document.updateTime),s=n.document.createTime?Za(n.document.createTime):$t.min(),c=new hi({mapValue:{fields:n.document.fields}}),d=Hn.newFoundDocument(a,i,s,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Gv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Fl(t,n.document),i=n.readTime?Za(n.readTime):$t.min(),s=Hn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new Gv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Fl(t,n.document),i=n.removedTargetIds||[];r=new Gv([],i,a,null)}else{if(!("filter"in e))return kt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new Yre(a,i),c=n.targetId;r=new SF(c,s)}}return r}function Wm(t,e){let r;if(e instanceof Ef)r={update:nI(t,e.key,e.value)};else if(e instanceof e1)r={delete:Gm(t,e.key)};else if(e instanceof cc)r={update:nI(t,e.key,e.data),updateMask:pne(e.fieldMask)};else{if(!(e instanceof $8))return kt();r={verify:Gm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,s){const c=s.transform;if(c instanceof Hm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bh)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw kt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:ine(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:kt()})(t,e.precondition)),r}function oA(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ha.updateTime(Za(i.updateTime)):i.exists!==void 0?ha.exists(i.exists):ha.none()})(e.currentDocument):ha.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(s,c){let d=null;if("setToServerValue"in c)Pt(c.setToServerValue==="REQUEST_TIME"),d=new Hm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Gd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Lh(p)}else"increment"in c?d=new Bh(s,c.increment):kt();const h=Yn.fromServerFormat(c.fieldPath);return new B8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=Fl(t,e.update.name),i=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const h=d.fieldPaths||[];return new ts(h.map((p=>Yn.fromServerFormat(p))))})(e.updateMask);return new cc(a,i,s,r,n)}return new Ef(a,i,r,n)}if(e.delete){const a=Fl(t,e.delete);return new e1(a,r)}if(e.verify){const a=Fl(t,e.verify);return new $8(a,r)}return kt()}function cne(t,e){return t&&t.length>0?(Pt(e!==void 0),t.map((r=>(function(a,i){let s=a.updateTime?Za(a.updateTime):Za(i);return s.isEqual($t.min())&&(s=Za(i)),new Kre(s,a.transformResults||[])})(r,e)))):[]}function kF(t,e){return{documents:[NF(t,e.path)]}}function CF(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=NF(t,a);const i=(function(h){if(h.length!==0)return RF(ln.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const s=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:uh(y.field),direction:dne(y.dir)}})(p)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=aA(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function OF(t){let e=EF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Pt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const y=IF(m);return y instanceof ln&&P8(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(m){return m.map((y=>(function(T){return new qm(dh(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,Xg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,x=m.values||[];return new Ph(x,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,x=m.values||[];return new Ph(x,y)})(r.endAt)),aF(e,a,s,i,c,"F",d,h)}function une(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function IF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=dh(r.unaryFilter.field);return kr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=dh(r.unaryFilter.field);return kr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dh(r.unaryFilter.field);return kr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dh(r.unaryFilter.field);return kr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return kt()}})(t):t.fieldFilter!==void 0?(function(r){return kr.create(dh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return ln.create(r.compositeFilter.filters.map((n=>IF(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return kt()}})(r.compositeFilter.op))})(t):kt()}function dne(t){return tne[t]}function hne(t){return rne[t]}function fne(t){return nne[t]}function uh(t){return{fieldPath:t.canonicalString()}}function dh(t){return Yn.fromServerFormat(t.fieldPath)}function RF(t){return t instanceof kr?(function(r){if(r.op==="=="){if(UO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NAN"}};if($O(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(UO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NOT_NAN"}};if($O(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(r.field),op:hne(r.op),value:r.value}}})(t):t instanceof ln?(function(r){const n=r.getFilters().map((a=>RF(a)));return n.length===1?n[0]:{compositeFilter:{op:fne(r.op),filters:n}}})(t):kt()}function pne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function MF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,r,n,a,i=$t.min(),s=$t.min(),c=ma.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new $l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this.ct=e}}function mne(t,e){let r;if(e.document)r=sne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=wt.fromSegments(e.noDocument.path),a=Kd(e.noDocument.readTime);r=Hn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return kt();{const n=wt.fromSegments(e.unknownDocument.path),a=Kd(e.unknownDocument.version);r=Hn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new Zn(a[0],a[1]);return $t.fromTimestamp(i)})(e.readTime)),r}function aI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:px(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,s){return{name:Gm(i,s.key),fields:s.data.value.mapValue.fields,updateTime:$h(i,s.version.toTimestamp()),createTime:$h(i,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Wd(e.version)};else{if(!e.isUnknownDocument())return kt();n.unknownDocument={path:r.path.toArray(),version:Wd(e.version)}}return n}function px(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kd(t){const e=new Zn(t.seconds,t.nanoseconds);return $t.fromTimestamp(e)}function Sd(t,e){const r=(e.baseMutations||[]).map((i=>oA(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const s=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>oA(t.ct,i))),a=Zn.fromMillis(e.localWriteTimeMs);return new U8(e.batchId,a,r,n)}function am(t){const e=Kd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Kd(t.lastLimboFreeSnapshotVersion):$t.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Pt(i.documents.length===1),Ns(Zg(EF(i.documents[0])))})(t.query):(function(i){return Ns(OF(i))})(t.query),new $l(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ma.fromBase64String(t.resumeToken))}function DF(t,e){const r=Wd(e.snapshotVersion),n=Wd(e.lastLimboFreeSnapshotVersion);let a;a=dx(e.target)?kF(t.ct,e.target):CF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function LF(t){const e=OF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fx(e,e.limit,"L"):e}function B5(t,e){return new V8(e.largestBatchId,oA(t.ct,e.overlayMutation))}function iI(t,e){const r=e.path.lastSegment();return[t,Di(e.path.popLast()),r]}function sI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Wd(n.readTime),documentKey:Di(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{getBundleMetadata(e,r){return oI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:Kd(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return oI(e).put((function(a){return{bundleId:a.id,createTime:Wd(Za(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return lI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:LF(i.bundledQuery),readTime:Kd(i.readTime)}})(n)}))}saveNamedQuery(e,r){return lI(e).put((function(a){return{name:a.name,readTime:Wd(Za(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function oI(t){return za(t,"bundles")}function lI(t){return za(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new o2(e,n)}getOverlay(e,r){return Pp(e).get(iI(this.userId,r)).next((n=>n?B5(this.serializer,n):null))}getOverlays(e,r){const n=Uo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,s)=>{const c=new V8(r,s);a.push(this.ht(e,c))})),Ie.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((s=>a.add(Di(s.getCollectionPath()))));const i=[];return a.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);i.push(Pp(e).j("collectionPathOverlayIndex",c))})),Ie.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Uo(),i=Di(r),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Pp(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const h=B5(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Uo();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Pp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=B5(this.serializer,h);i.size()<a||m.largestBatchId===s?(i.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Pp(e).put((function(a,i,s){const[c,d,h]=iI(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Wm(a.ct,s.mutation)}})(this.serializer,this.userId,r))}}function Pp(t){return za(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yne{Pt(e){return za(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?ma.fromUint8Array(n):ma.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(qn(e.integerValue));else if("doubleValue"in e){const n=qn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),$m(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Jl(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(_u(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?KV(e)?this.dt(r,Number.MAX_SAFE_INTEGER):n2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):kt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const s="value",c=((a=(n=i[s].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(qn(c)),this.Vt(s,r),this.Tt(i[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),wt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}_d.vt=new _d;function vne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function cI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const s=vne(255&n[i]);if(a+=s,s!==8)break}return a})(t);return Math.ceil(e/8)}class xne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=cI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=cI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class bne{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class wne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Dp{constructor(){this.jt=new xne,this.Ht=new bne(this.jt),this.Jt=new wne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Td(this.indexId,this.documentKey,this.arrayValue,n)}}function Gc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=uI(t.arrayValue,e.arrayValue),r!==0?r:(r=uI(t.directionalValue,e.directionalValue),r!==0?r:wt.comparator(t.documentKey,e.documentKey)))}function uI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.Xt=new xn(((r,n)=>Yn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Pt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=XT(e);if(r!==void 0&&!this.sn(r))return!1;const n=yd(e);let a=new Set,i=0,s=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new xn(Yn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new zv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new zv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new zv(n.field,n.dir==="asc"?0:1)));return new ux(ux.UNKNOWN_ID,this.collectionId,r,Bm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){var e,r;if(Pt(t instanceof kr||t instanceof ln),t instanceof kr){if(t instanceof nF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>kr.create(t.field,"==",i))))||[];return ln.create(a,"or")}return t}const n=t.filters.map((a=>BF(a)));return ln.create(n,t.op)}function Sne(t){if(t.getFilters().length===0)return[];const e=uA(BF(t));return Pt($F(e)),lA(e)||cA(e)?[e]:e.getFilters()}function lA(t){return t instanceof kr}function cA(t){return t instanceof ln&&P8(t)}function $F(t){return lA(t)||cA(t)||(function(r){if(r instanceof ln&&eA(r)){for(const n of r.getFilters())if(!lA(n)&&!cA(n))return!1;return!0}return!1})(t)}function uA(t){if(Pt(t instanceof kr||t instanceof ln),t instanceof kr)return t;if(t.filters.length===1)return uA(t.filters[0]);const e=t.filters.map((n=>uA(n)));let r=ln.create(e,t.op);return r=mx(r),$F(r)?r:(Pt(r instanceof ln),Pt(Dh(r)),Pt(r.filters.length>1),r.filters.reduce(((n,a)=>H8(n,a))))}function H8(t,e){let r;return Pt(t instanceof kr||t instanceof ln),Pt(e instanceof kr||e instanceof ln),r=t instanceof kr?e instanceof kr?(function(a,i){return ln.create([a,i],"and")})(t,e):hI(t,e):e instanceof kr?hI(e,t):(function(a,i){if(Pt(a.filters.length>0&&i.filters.length>0),Dh(a)&&Dh(i))return eF(a,i.getFilters());const s=eA(a)?a:i,c=eA(a)?i:a,d=s.filters.map((h=>H8(h,c)));return ln.create(d,"or")})(t,e),mx(r)}function hI(t,e){if(Dh(e))return eF(e,t.getFilters());{const r=e.filters.map((n=>H8(t,n)));return ln.create(r,"or")}}function mx(t){if(Pt(t instanceof kr||t instanceof ln),t instanceof kr)return t;const e=t.getFilters();if(e.length===1)return mx(e[0]);if(ZV(t))return t;const r=e.map((a=>mx(a))),n=[];return r.forEach((a=>{a instanceof kr?n.push(a):a instanceof ln&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:ln.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ne{constructor(){this.un=new G8}addToCollectionParentIndex(e,r){return this.un.add(r),Ie.resolve()}getCollectionParents(e,r){return Ie.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ie.resolve()}deleteFieldIndex(e,r){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,r){return Ie.resolve()}getDocumentsMatchingTarget(e,r){return Ie.resolve(null)}getIndexType(e,r){return Ie.resolve(0)}getFieldIndexes(e,r){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,r){return Ie.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,r){return Ie.resolve(Cs.min())}updateCollectionGroup(e,r,n){return Ie.resolve()}updateIndexEntries(e,r){return Ie.resolve()}}class G8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new xn(zr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new xn(zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new Uint8Array(0);class Tne{constructor(e,r){this.databaseId=r,this.cn=new G8,this.ln=new Iu((n=>Hd(n)),((n,a)=>Yg(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Di(a)};return fI(e).put(i)}return Ie.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[PV(r),""],!1,!0);return fI(e).U(a).next((i=>{for(const s of i){if(s.collectionId!==r)break;n.push($o(s.parent))}return n}))}addFieldIndex(e,r){const n=Lp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const s=J0(e);return i.next((c=>{s.put(sI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Lp(e),a=J0(e),i=Z0(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Lp(e),n=Z0(e),a=J0(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Ie.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new dI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=Z0(e);let a=!0;const i=new Map;return Ie.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{a&&(a=!!c),i.set(s,c)})))).next((()=>{if(a){let s=xr();const c=[];return Ie.forEach(i,((d,h)=>{rt("IndexedDbIndexManager",`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Hd(r)}`);const p=(function(R,L){const O=XT(L);if(O===void 0)return null;for(const M of hx(R,O.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null})(h,d),m=(function(R,L){const O=new Map;for(const M of yd(L))for(const N of hx(R,M.fieldPath))switch(N.op){case"==":case"in":O.set(M.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return O.set(M.fieldPath.canonicalString(),N.value),Array.from(O.values())}return null})(h,d),y=(function(R,L){const O=[];let M=!0;for(const N of yd(L)){const A=N.kind===0?HO(R,N.fieldPath,R.startAt):GO(R,N.fieldPath,R.startAt);O.push(A.value),M&&(M=A.inclusive)}return new Ph(O,M)})(h,d),x=(function(R,L){const O=[];let M=!0;for(const N of yd(L)){const A=N.kind===0?GO(R,N.fieldPath,R.endAt):HO(R,N.fieldPath,R.endAt);O.push(A.value),M&&(M=A.inclusive)}return new Ph(O,M)})(h,d),T=this.In(d,h,y),S=this.In(d,h,x),w=this.Tn(d,h,m),E=this.En(d.indexId,p,T,y.inclusive,S,x.inclusive,w);return Ie.forEach(E,(I=>n.G(I,r.limit).next((R=>{R.forEach((L=>{const O=wt.fromSegments(L.documentKey);s.has(O)||(s=s.add(O),c.push(O))}))}))))})).next((()=>c))}return Ie.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Sne(ln.create(e.filters,"and")).map((n=>rA(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):Jy,x=this.An(e,y,n[m%h],a),T=this.Rn(e,y,i[m%h],s),S=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(x,T,S))}return p}An(e,r,n,a){const i=new Td(e,wt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Td(e,wt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new dI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let s=null;for(const c of i)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Ie.forEach(a,(i=>this.Pn(e,i).next((s=>{s?n!==0&&s.fields.length<(function(d){let h=new xn(Yn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Dp;for(const a of yd(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const s=n.Yt(a.kind);_d.vt.It(i,s)}return n.zt()}dn(e){const r=new Dp;return _d.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Dp;return _d.vt.It(Vm(this.databaseId,r),n.Yt((function(i){const s=yd(i);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Dp);let i=0;for(const s of yd(e)){const c=n[i++];for(const d of a)if(this.fn(r,s.fieldPath)&&Fm(c))a=this.gn(a,s,c);else{const h=d.Yt(s.kind);_d.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const s of n.arrayValue.values||[])for(const c of a){const d=new Dp;d.seed(c.zt()),_d.vt.It(s,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof kr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Lp(e),a=J0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const s=[];return Ie.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{s.push((function(p,m){const y=m?new Bm(m.sequenceNumber,new Cs(Kd(m.readTime),new wt($o(m.documentKey)),m.largestBatchId)):Bm.empty(),x=p.fields.map((([T,S])=>new zv(Yn.fromServerFormat(T),S)));return new ux(p.indexId,p.collectionGroup,x,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:sr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Lp(e),i=J0(e);return this.yn(e).next((s=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Ie.forEach(c,(d=>i.put(sI(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ie.forEach(r,((a,i)=>{const s=n.get(a.collectionGroup);return(s?Ie.resolve(s):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Ie.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Ie.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return Z0(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Z0(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Z0(e);let i=new xn(Gc);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{i=i.add(new Td(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new xn(Gc);const a=this.Vn(r,e);if(a==null)return n;const i=XT(r);if(i!=null){const s=e.data.field(i.fieldPath);if(Fm(s))for(const c of s.arrayValue.values||[])n=n.add(new Td(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Td(r.indexId,e.key,Jy,a));return n}bn(e,r,n,a,i){rt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,h,p,m,y){const x=d.getIterator(),T=h.getIterator();let S=Y0(x),w=Y0(T);for(;S||w;){let E=!1,I=!1;if(S&&w){const R=p(S,w);R<0?I=!0:R>0&&(E=!0)}else S!=null?I=!0:E=!0;E?(m(w),w=Y0(T)):I?(y(S),S=Y0(x)):(S=Y0(x),w=Y0(T))}})(a,i,Gc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),Ie.waitFor(s)}yn(e){let r=1;return J0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>Gc(s,c))).filter(((s,c,d)=>!c||Gc(s,d[c-1])!==0));const a=[];a.push(e);for(const s of n){const c=Gc(s,e),d=Gc(s,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(s),a.push(s.Zt());else if(d>0)break}a.push(r);const i=[];for(let s=0;s<a.length;s+=2){if(this.Cn(a[s],a[s+1]))return[];const c=[a[s].indexId,this.uid,a[s].arrayValue,a[s].directionalValue,Jy,[]],d=[a[s+1].indexId,this.uid,a[s+1].arrayValue,a[s+1].directionalValue,Jy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return Gc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(pI)}getMinOffset(e,r){return Ie.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||kt())))).next(pI)}}function fI(t){return za(t,"collectionParents")}function Z0(t){return za(t,"indexEntries")}function Lp(t){return za(t,"indexConfiguration")}function J0(t){return za(t,"indexState")}function pI(t){Pt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;C8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Cs(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((p,m,y)=>(c++,y.delete())));i.push(d.next((()=>{Pt(c===1)})));const h=[];for(const p of r.mutations){const m=VV(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Ie.waitFor(i).next((()=>h))}function gx(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw kt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class l2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Pt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new l2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).J({index:"userMutationsIndex",range:n},((a,i,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=hh(e),s=Wc(e);return s.add({}).next((c=>{Pt(typeof c=="number");const d=new U8(c,r,n,a),h=(function(x,T,S){const w=S.baseMutations.map((I=>Wm(x.ct,I))),E=S.mutations.map((I=>Wm(x.ct,I)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:E}})(this.serializer,this.userId,d),p=[];let m=new xn(((y,x)=>sr(y.canonicalString(),x.canonicalString())));for(const y of a){const x=VV(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(s.put(h)),p.push(i.put(x,cre))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Ie.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Wc(e).get(r).next((n=>n?(Pt(n.userId===this.userId),Sd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ie.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Wc(e).J({index:"userMutationsIndex",range:a},((s,c,d)=>{c.userId===this.userId&&(Pt(c.batchId>=n),i=Sd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Wc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,s)=>{n=i.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).U("userMutationsIndex",r).next((n=>n.map((a=>Sd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Vv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return hh(e).J({range:a},((s,c,d)=>{const[h,p,m]=s,y=$o(p);if(h===this.userId&&r.path.isEqual(y))return Wc(e).get(m).next((x=>{if(!x)throw kt();Pt(x.userId===this.userId),i.push(Sd(this.serializer,x))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new xn(sr);const a=[];return r.forEach((i=>{const s=Vv(this.userId,i.path),c=IDBKeyRange.lowerBound(s),d=hh(e).J({range:c},((h,p,m)=>{const[y,x,T]=h,S=$o(x);y===this.userId&&i.path.isEqual(S)?n=n.add(T):m.done()}));a.push(d)})),Ie.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=Vv(this.userId,n),s=IDBKeyRange.lowerBound(i);let c=new xn(sr);return hh(e).J({range:s},((d,h,p)=>{const[m,y,x]=d,T=$o(y);m===this.userId&&n.isPrefixOf(T)?T.length===a&&(c=c.add(x)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(Wc(e).get(i).next((s=>{if(s===null)throw kt();Pt(s.userId===this.userId),n.push(Sd(this.serializer,s))})))})),Ie.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return UF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ie.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ie.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),a=[];return hh(e).J({range:n},((i,s,c)=>{if(i[0]===this.userId){const d=$o(i[1]);a.push(d)}else c.done()})).next((()=>{Pt(a.length===0)}))}))}containsKey(e,r){return zF(e,this.userId,r)}Nn(e){return VF(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function zF(t,e,r){const n=Vv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let s=!1;return hh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===a&&(s=!0),h.done()})).next((()=>s))}function Wc(t){return za(t,"mutations")}function hh(t){return za(t,"documentMutations")}function VF(t){return za(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qd(0)}static kn(){return new Qd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ane{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Qd(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>$t.fromTimestamp(new Zn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>eh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Pt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return eh(e).J(((s,c)=>{const d=am(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Ie.waitFor(i))).next((()=>a))}forEachTarget(e,r){return eh(e).J(((n,a)=>{const i=am(a);r(i)}))}qn(e){return gI(e).get("targetGlobalKey").next((r=>(Pt(r!==null),r)))}Qn(e,r){return gI(e).put("targetGlobalKey",r)}Kn(e,r){return eh(e).put(DF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Hd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return eh(e).J({range:a,index:"queryTargetsIndex"},((s,c,d)=>{const h=am(c);Yg(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=ru(e);return r.forEach((s=>{const c=Di(s.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,s))})),Ie.waitFor(a)}removeMatchingKeys(e,r,n){const a=ru(e);return Ie.forEach(r,(i=>{const s=Di(i.path);return Ie.waitFor([a.delete([n,s]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=ru(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=ru(e);let i=xr();return a.J({range:n,H:!0},((s,c,d)=>{const h=$o(s[1]),p=new wt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Di(r.path),a=IDBKeyRange.bound([n],[PV(n)],!1,!0);let i=0;return ru(e).J({index:"documentTargetsIndex",H:!0,range:a},(([s,c],d,h)=>{s!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return eh(e).get(r).next((n=>n?am(n):null))}}function eh(t){return za(t,"targets")}function gI(t){return za(t,"targetGlobal")}function ru(t){return za(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI([t,e],[r,n]){const a=sr(t,r);return a===0?sr(e,n):a}class Nne{constructor(e){this.Un=e,this.buffer=new xn(yI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();yI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Ene{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){rt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ou(r)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Cu(r)}await this.Hn(3e5)}))}}class jne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ie.resolve(es.oe);const n=new Nne(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(mI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,s,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,s=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),lh()<=jr.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${a} in `+(c-s)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function kne(t,e){return new jne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e,r){this.db=e,this.garbageCollector=kne(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return ev(e,n)}removeReference(e,r,n){return ev(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return ev(e,r)}nr(e,r){return(function(a,i){let s=!1;return VF(a).Y((c=>zF(a,c,i).next((d=>(d&&(s=!0),Ie.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((h=>{if(!h)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,$t.min()),ru(e).delete((function(m){return[0,Di(m.path)]})(s)))))}));a.push(d)}})).next((()=>Ie.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return ev(e,r)}tr(e,r){const n=ru(e);let a,i=es.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:h})=>{s===0?(i!==es.oe&&r(new wt($o(a)),i),i=h,a=d):i=es.oe})).next((()=>{i!==es.oe&&r(new wt($o(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ev(t,e){return ru(t).put((function(n,a){return{targetId:0,path:Di(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.changes=new Iu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ie.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return od(e).put(n)}removeEntry(e,r,n){return od(e).delete((function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],px(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Hn.newInvalidDocument(r);return od(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Hn.newInvalidDocument(r)};return od(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n={document:this.ir(r,i),size:gx(i)}})).next((()=>n))}getEntries(e,r){let n=Ts();return this._r(e,r,((a,i)=>{const s=this.ir(a,i);n=n.insert(a,s)})).next((()=>n))}ar(e,r){let n=Ts(),a=new Pn(wt.comparator);return this._r(e,r,((i,s)=>{const c=this.ir(i,s);n=n.insert(i,c),a=a.insert(i,gx(s))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Ie.resolve();let a=new xn(bI);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Bp(a.first()),Bp(a.last())),s=a.getIterator();let c=s.getNext();return od(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=wt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&bI(c,m)<0;)n(c,null),c=s.getNext();c&&c.isEqual(m)&&(n(c,h),c=s.hasNext()?s.getNext():null),c?p.$(Bp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),px(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return od(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Ts();for(const m of h){const y=this.ir(wt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Jg(r,y)||a.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=Ts();const s=xI(r,n),c=xI(r,Cs.max());return od(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,h,p)=>{const m=this.ir(wt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new Ine(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return vI(e).get("remoteDocumentGlobalKey").next((r=>(Pt(!!r),r)))}rr(e,r){return vI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=mne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($t.min())))return n}return Hn.newInvalidDocument(e)}}function qF(t){return new One(t)}class Ine extends FF{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Iu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new xn(((i,s)=>sr(i.canonicalString(),s.canonicalString())));return this.changes.forEach(((i,s)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),s.isValidDocument()){const d=aI(this.cr.serializer,s);a=a.add(i.path.popLast());const h=gx(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=aI(this.cr.serializer,s.convertToNoDocument($t.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Ie.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,s)=>{this.lr.set(i,{size:s,readTime:n.get(i).readTime})})),n)))}}function vI(t){return za(t,"remoteDocumentGlobal")}function od(t){return za(t,"remoteDocumentsV14")}function Bp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xI(t,e){const r=e.documentKey.path.toArray();return[t,px(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function bI(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=sr(r[i],n[i]),a)return a;return a=sr(r.length,n.length),a||(a=sr(r[r.length-2],n[n.length-2]),a||sr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&pm(n.mutation,a,ts.empty(),Zn.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,xr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=xr()){const a=Uo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let s=rm();return i.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=Uo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,xr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,a){let i=Ts();const s=fm(),c=(function(){return fm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof cc)?i=i.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),pm(p.mutation,h,p.mutation.getFieldMask(),Zn.now())):s.set(h.key,ts.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>s.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new Rne(p,(m=s.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=fm();let a=new Pn(((s,c)=>s-c)),i=xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||ts.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||xr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const s=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=dF();p.forEach((y=>{if(!i.has(y)){const x=vF(r.get(y),n.get(y));x!==null&&m.set(y,x),i=i.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ie.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(s){return wt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):iF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ie.resolve(Uo());let c=-1,d=i;return s.next((h=>Ie.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Ie.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,xr()))).next((p=>({batchId:c,changes:uF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new wt(r)).next((n=>{let a=rm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=rm();return this.indexManager.getCollectionParents(e,i).next((c=>Ie.forEach(c,(d=>{const h=(function(m,y){return new Nf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,y)=>{s=s.insert(m,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((s=>{i.forEach(((d,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Hn.newInvalidDocument(p)))}));let c=rm();return s.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&pm(p.mutation,h,ts.empty(),Zn.now()),Jg(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ie.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Za(a.createTime)}})(r)),Ie.resolve()}getNamedQuery(e,r){return Ie.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:LF(a.bundledQuery),readTime:Za(a.readTime)}})(r)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(){this.overlays=new Pn(wt.comparator),this.Ir=new Map}getOverlay(e,r){return Ie.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Ie.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Ie.resolve()}getOverlaysForCollection(e,r,n){const a=Uo(),i=r.length+1,s=new wt(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Ie.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Pn(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Uo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Uo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Ie.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new V8(r,n));let i=this.Ir.get(r);i===void 0&&(i=xr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dne{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){this.Tr=new xn(Qa.Er),this.dr=new xn(Qa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Qa(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Qa(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new wt(new zr([])),n=new Qa(r,e),a=new Qa(r,e+1),i=[];return this.dr.forEachInRange([n,a],(s=>{this.Vr(s),i.push(s.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new wt(new zr([])),n=new Qa(r,e),a=new Qa(r,e+1);let i=xr();return this.dr.forEachInRange([n,a],(s=>{i=i.add(s.key)})),i}containsKey(e){const r=new Qa(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qa{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return wt.comparator(e.key,r.key)||sr(e.wr,r.wr)}static Ar(e,r){return sr(e.wr,r.wr)||wt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new xn(Qa.Er)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new U8(i,r,n,a);this.mutationQueue.push(s);for(const c of a)this.br=this.br.add(new Qa(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ie.resolve(s)}lookupMutationBatch(e,r){return Ie.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qa(r,0),a=new Qa(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(s=>{const c=this.Dr(s.wr);i.push(c)})),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new xn(sr);return r.forEach((a=>{const i=new Qa(a,0),s=new Qa(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,s],(c=>{n=n.add(c.wr)}))})),Ie.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;wt.isDocumentKey(i)||(i=i.child(""));const s=new Qa(new wt(i),0);let c=new xn(sr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),s),Ie.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Pt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ie.forEach(r.mutations,(a=>{const i=new Qa(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Qa(r,0),a=this.br.firstAfterOrEqual(n);return Ie.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(e){this.Mr=e,this.docs=(function(){return new Pn(wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ie.resolve(n?n.document.mutableCopy():Hn.newInvalidDocument(r))}getEntries(e,r){let n=Ts();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Hn.newInvalidDocument(a))})),Ie.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Ts();const s=r.path,c=new wt(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||C8(LV(p),n)<=0||(a.has(p.key)||Jg(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,r,n,a){kt()}Or(e,r){return Ie.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new $ne(this)}getSize(e){return Ie.resolve(this.size)}}class $ne extends FF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Ie.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e){this.persistence=e,this.Nr=new Iu((r=>Hd(r)),Yg),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Lr=0,this.Br=new W8,this.targetCount=0,this.kr=Qd.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ie.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Qd(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ie.resolve()}updateTargetData(e,r){return this.Kn(r),Ie.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Ie.waitFor(i).next((()=>a))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ie.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ie.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((s=>{i.push(a.markPotentiallyOrphaned(e,s))})),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ie.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ie.resolve(n)}containsKey(e,r){return Ie.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new es(0),this.Kr=!1,this.Kr=!0,this.$r=new Dne,this.referenceDelegate=e(this),this.Ur=new Une(this),this.indexManager=new _ne,this.remoteDocumentCache=(function(a){return new Bne(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new PF(r),this.Gr=new Mne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Pne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Lne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){rt("MemoryPersistence","Starting transaction:",e);const a=new zne(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Ie.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class zne extends $V{constructor(e){super(),this.currentSequenceNumber=e}}class c2{constructor(e){this.persistence=e,this.Jr=new W8,this.Yr=null}static Zr(e){return new c2(e)}get Xr(){if(this.Yr)return this.Yr;throw kt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ie.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ie.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,(n=>{const a=wt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,$t.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(e){this.serializer=e}O(e,r,n,a){const i=new r2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MO,{unique:!0}),d.createObjectStore("documentMutations")})(e),wI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=Ie.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),wI(e)),s=s.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(s=s.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MO,{unique:!0});const m=h.store("mutations"),y=p.map((x=>m.put(x)));return Ie.waitFor(y)}))})(e,i)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(s=s.next((()=>this.ni(i)))),n<6&&a>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(s=s.next((()=>this.ii(i)))),n<8&&a>=8&&(s=s.next((()=>this.si(e,i)))),n<9&&a>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(s=s.next((()=>this.oi(i)))),n<11&&a>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(s=s.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:wre});h.createIndex("collectionPathOverlayIndex",Sre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",_re,{unique:!1})})(e)}))),n<13&&a>=13&&(s=s.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:ure});h.createIndex("documentKeyIndex",dre),h.createIndex("collectionGroupIndex",hre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(s=s.next((()=>this.ai(e,i)))),n<15&&a>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:yre}).createIndex("sequenceNumberIndex",vre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:xre}).createIndex("documentKeyIndex",bre,{unique:!1})})(e)))),n<16&&a>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=gx(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Ie.forEach(a,(i=>{const s=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>Ie.forEach(c,(d=>{Pt(d.userId===i.userId);const h=Sd(this.serializer,d);return UF(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((s,c)=>{const d=new zr(s),h=(function(m){return[0,Di(m)]})(d);i.push(r.get(h).next((p=>p?Ie.resolve():(m=>r.put({targetId:0,path:Di(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Ie.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:gre});const n=r.store("collectionParents"),a=new G8,i=s=>{if(a.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:Di(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new zr(s);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],h)=>{const p=$o(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=am(a),s=DF(this.serializer,i);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new wt(zr.fromString(m.document.name).popFirst(5)):m.noDocument?wt.fromSegments(m.noDocument.path):m.unknownDocument?wt.fromSegments(m.unknownDocument.path):kt()})(s).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};a.push(c.put(h))})).next((()=>Ie.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=qF(this.serializer),i=new GF(c2.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:xr();Sd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Ie.forEach(c,((d,h)=>{const p=new Si(h),m=o2.lt(this.serializer,p),y=i.getIndexManager(p),x=l2.lt(p,this.serializer,y,i.referenceDelegate);return new HF(a,x,m,y).recalculateAndSaveOverlaysForDocumentKeys(new YT(r,es.oe),d).next()}))}))}}function wI(t){t.createObjectStore("targetDocuments",{keyPath:pre}).createIndex("documentTargetsIndex",mre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fre,{unique:!0}),t.createObjectStore("targetGlobal")}const $5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class K8{constructor(e,r,n,a,i,s,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=s,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!K8.D())throw new ht(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cne(this,a),this.Ai=r+"main",this.serializer=new PF(d),this.Ri=new vu(this.Ai,this.hi,new Vne(this.serializer)),this.$r=new yne,this.Ur=new Ane(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qF(this.serializer),this.Gr=new gne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&da("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ht(Fe.FAILED_PRECONDITION,$5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new es(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>tv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Ou(e))return rt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return $p(e).get("owner").next((r=>Ie.resolve(this.vi(r))))}Ci(e){return tv(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=za(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),s=a.filter((c=>i.indexOf(c)===-1));return Ie.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ie.resolve(!0):$p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ht(Fe.FAILED_PRECONDITION,$5);return!1}}return!(!this.networkEnabled||!this.inForeground)||tv(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,s=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&rt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new YT(e,es.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>tv(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return l2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return o2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){rt("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?Nre:d===16?Are:d===15?I8:d===14?HV:d===13?qV:d===12?Tre:d===11?FV:void kt()})(this.hi);let s;return this.Ri.runTransaction(e,a,i,(c=>(s=new YT(c,this.Qr?this.Qr.next():es.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw da(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ht(Fe.FAILED_PRECONDITION,BV);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return $p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ht(Fe.FAILED_PRECONDITION,$5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $p(e).put("owner",r)}static D(){return vu.D()}bi(e){const r=$p(e);return r.get("owner").next((n=>this.vi(n)?(rt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ie.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(da(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;qz()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return rt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return da("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){da("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $p(t){return za(t,"owner")}function tv(t){return za(t,"clientMetadata")}function WF(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=xr(),a=xr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new Q8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return qz()?8:UV(Ba())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((s=>{i.result=s})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((s=>{i.result=s}))})).next((()=>{if(i.result)return;const s=new Fne;return this.Xi(e,r,s).next((c=>{if(i.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(lh()<=jr.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",ch(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(lh()<=jr.DEBUG&&rt("QueryEngine","Query:",ch(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(lh()<=jr.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",ch(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(r))):Ie.resolve())}Yi(e,r){if(WO(r))return Ie.resolve(null);let n=Ns(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=fx(r,null,"F"),n=Ns(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const s=xr(...i);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,s,d.readTime)?this.Yi(e,fx(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return WO(r)||a.isEqual($t.min())?Ie.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(r,i);return this.ns(r,s,n,a)?Ie.resolve(null):(lh()<=jr.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ch(r)),this.rs(e,s,r,DV(a,-1)).next((c=>c)))}))}ts(e,r){let n=new xn(lF(e));return r.forEach(((a,i)=>{Jg(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return lh()<=jr.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",ch(r)),this.Ji.getDocumentsMatchingQuery(e,r,Cs.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((s=>{i=i.insert(s.key,s)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Pn(sr),this._s=new Iu((i=>Hd(i)),Yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function QF(t,e,r,n){return new qne(t,e,r,n)}async function XF(t,e){const r=Mt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const s=[],c=[];let d=xr();for(const h of a){s.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:s,addedBatchIds:c})))}))}))}function Hne(t,e){const r=Mt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let x=Ie.resolve();return y.forEach((T=>{x=x.next((()=>p.getEntry(d,T))).next((S=>{const w=h.docVersions.get(T);Pt(w!==null),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=xr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function YF(t){const e=Mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Gne(t,e){const r=Mt(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=a.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let x=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(ma.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,n)),a=a.insert(m,x),(function(S,w,E){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,x,p)&&c.push(r.Ur.updateTargetData(i,x))}));let d=Ts(),h=xr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Wne(i,s,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual($t.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Ie.waitFor(c).next((()=>s.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Wne(t,e,r){let n=xr(),a=xr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let s=Ts();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual($t.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):rt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:s,Is:a}}))}function Kne(t,e){const r=Mt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function yx(t,e){const r=Mt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Ie.resolve(a)):r.Ur.allocateTargetId(n).next((s=>(a=new $l(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Uh(t,e,r){const n=Mt(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(s=>n.persistence.referenceDelegate.removeTarget(s,a)))}catch(s){if(!Ou(s))throw s;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function dA(t,e,r){const n=Mt(t);let a=$t.min(),i=xr();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,h,p){const m=Mt(d),y=m._s.get(p);return y!==void 0?Ie.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,s,Ns(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?a:$t.min(),r?i:xr()))).next((c=>(eq(n,oF(e),c),{documents:c,Ts:i})))))}function ZF(t,e){const r=Mt(t),n=Mt(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((s=>s?s.target:null))))}function JF(t,e){const r=Mt(t),n=r.us.get(e)||$t.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,DV(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(eq(r,e,a),a)))}function eq(t,e,r){let n=t.us.get(e)||$t.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function SI(t,e){return`firestore_clients_${t}_${e}`}function _I(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function U5(t,e){return`firestore_targets_${t}_${e}`}class vx{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,s=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return s&&a.error&&(s=typeof a.error.message=="string"&&typeof a.error.code=="string",s&&(i=new ht(a.error.code,a.error.message))),s?new vx(e,r,a.state,i):(da("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new ht(n.error.code,n.error.message))),i?new mm(e,n.state,a):(da("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xx{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=D8();for(let s=0;a&&s<n.activeTargetIds.length;++s)a=zV(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return a?new xx(e,i):(da("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class X8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new X8(r.clientId,r.onlineState):(da("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hA{constructor(){this.activeTargetIds=D8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z5{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pn(sr),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=SI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new hA),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(SI(this.persistenceKey,n));if(a){const i=xx.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(U5(this.persistenceKey,e));if(a){const i=mm.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(U5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return rt("SharedClientState","READ",e,r),r}setItem(e,r){rt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){rt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(rt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void da("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let s=es.oe;if(i!=null)try{const c=JSON.parse(i);Pt(typeof c=="number"),s=c}catch(c){da("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==es.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new vx(this.currentUser,e,r,n),i=_I(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=_I(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=U5(this.persistenceKey,e),i=new mm(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return xx.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return vx.Rs(new Si(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return mm.Rs(a,r)}Ls(e){return X8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);rt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),s=[],c=[];return i.forEach((d=>{a.has(d)||s.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=D8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class tq{constructor(){this.so=new hA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hA,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rv=null;function V5(){return rv===null?rv=(function(){return 268435456+Math.round(2147483648*Math.random())})():rv++,"0x"+rv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="WebChannelConnection";class Zne extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,s){const c=V5(),d=this.xo(r,n.toUriEncodedString());rt("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,s),this.No(r,d,h,a).then((p=>(rt("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Dm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,s,c){return this.Mo(r,n,a,i,s)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Af})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>r[s]=i)),a&&a.headers.forEach(((i,s)=>r[s]=i))}xo(r,n){const a=Xne[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=V5();return new Promise(((s,c)=>{const d=new kV;d.setWithCredentials(!0),d.listenOnce(CV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Uv.NO_ERROR:const p=d.getResponseJson();rt(bi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),s(p);break;case Uv.TIMEOUT:rt(bi,`RPC '${e}' ${i} timed out`),c(new ht(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case Uv.HTTP_ERROR:const m=d.getStatus();if(rt(bi,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const T=(function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(E)>=0?E:Fe.UNKNOWN})(x.status);c(new ht(T,x.message))}else c(new ht(Fe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ht(Fe.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{rt(bi,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);rt(bi,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=V5(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=RV(),c=IV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");rt(bi,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=s.createWebChannel(p,d);let y=!1,x=!1;const T=new Yne({Io:w=>{x?rt(bi,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(y||(rt(bi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),y=!0),rt(bi,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),S=(w,E,I)=>{w.listen(E,(R=>{try{I(R)}catch(L){setTimeout((()=>{throw L}),0)}}))};return S(m,tm.EventType.OPEN,(()=>{x||(rt(bi,`RPC '${e}' stream ${a} transport opened.`),T.yo())})),S(m,tm.EventType.CLOSE,(()=>{x||(x=!0,rt(bi,`RPC '${e}' stream ${a} transport closed`),T.So())})),S(m,tm.EventType.ERROR,(w=>{x||(x=!0,Dm(bi,`RPC '${e}' stream ${a} transport errored:`,w),T.So(new ht(Fe.UNAVAILABLE,"The operation could not be completed")))})),S(m,tm.EventType.MESSAGE,(w=>{var E;if(!x){const I=w.data[0];Pt(!!I);const R=I,L=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(L){rt(bi,`RPC '${e}' stream ${a} received error:`,L);const O=L.status;let M=(function(j){const z=Sa[j];if(z!==void 0)return wF(z)})(O),N=L.message;M===void 0&&(M=Fe.INTERNAL,N="Unknown error status: "+O+" with message "+L.message),x=!0,T.So(new ht(M,N)),m.close()}else rt(bi,`RPC '${e}' stream ${a} received:`,I),T.bo(I)}})),S(c,OV.STAT_EVENT,(w=>{w.stat===QT.PROXY?rt(bi,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===QT.NOPROXY&&rt(bi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(){return typeof window<"u"?window:null}function Wv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){return new ane(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&rt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e,r,n,a,i,s,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Y8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Fe.RESOURCE_EXHAUSTED?(da(r.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new ht(Fe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jne extends nq{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=lne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return $t.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?$t.min():s.readTime?Za(s.readTime):$t.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=sA(this.serializer),r.addTarget=(function(i,s){let c;const d=s.target;if(c=dx(d)?{documents:kF(i,d)}:{query:CF(i,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=TF(i,s.resumeToken);const h=aA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}else if(s.snapshotVersion.compareTo($t.min())>0){c.readTime=$h(i,s.snapshotVersion.toTimestamp());const h=aA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=une(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=sA(this.serializer),r.removeTarget=e,this.a_(r)}}class eae extends nq{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=cne(e.writeResults,e.commitTime),n=Za(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=sA(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Wm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ht(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Mo(e,iA(r,n),a,i,s))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ht(Fe.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,iA(r,n),a,s,c,i))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ht(Fe.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class rae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(da(r),this.D_=!1):rt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((s=>{n.enqueueAndForget((async()=>{d0(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Mt(d);h.L_.add(4),await n1(h),h.q_.set("Unknown"),h.L_.delete(4),await d2(h)})(this))}))})),this.q_=new rae(n,a)}}async function d2(t){if(d0(t))for(const e of t.B_)await e(!0)}async function n1(t){for(const e of t.B_)await e(!1)}function h2(t,e){const r=Mt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),e7(r)?J8(r):kf(r).r_()&&Z8(r,e))}function zh(t,e){const r=Mt(t),n=kf(r);r.N_.delete(e),n.r_()&&aq(r,e),r.N_.size===0&&(n.r_()?n.o_():d0(r)&&r.q_.set("Unknown"))}function Z8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}kf(t).A_(e)}function aq(t,e){t.Q_.xe(e),kf(t).R_(e)}function J8(t){t.Q_=new ene({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kf(t).start(),t.q_.v_()}function e7(t){return d0(t)&&!kf(t).n_()&&t.N_.size>0}function d0(t){return Mt(t).L_.size===0}function iq(t){t.Q_=void 0}async function aae(t){t.q_.set("Online")}async function iae(t){t.N_.forEach(((e,r)=>{Z8(t,e)}))}async function sae(t,e){iq(t),e7(t)?(t.q_.M_(e),J8(t)):t.q_.set("Unknown")}async function oae(t,e,r){if(t.q_.set("Online"),e instanceof _F&&e.state===2&&e.cause)try{await(async function(a,i){const s=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,s),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bx(t,n)}else if(e instanceof Gv?t.Q_.Ke(e):e instanceof SF?t.Q_.He(e):t.Q_.We(e),!r.isEqual($t.min()))try{const n=await YF(t.localStore);r.compareTo(n)>=0&&await(function(i,s){const c=i.Q_.rt(s);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(ma.EMPTY_BYTE_STRING,p.snapshotVersion)),aq(i,d);const m=new $l(p.target,d,h,p.sequenceNumber);Z8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){rt("RemoteStore","Failed to raise snapshot:",n),await bx(t,n)}}async function bx(t,e,r){if(!Ou(e))throw e;t.L_.add(1),await n1(t),t.q_.set("Offline"),r||(r=()=>YF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{rt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await d2(t)}))}function sq(t,e){return e().catch((r=>bx(t,r,e)))}async function jf(t){const e=Mt(t),r=Au(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lae(e);)try{const a=await Kne(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,cae(e,a)}catch(a){await bx(e,a)}oq(e)&&lq(e)}function lae(t){return d0(t)&&t.O_.length<10}function cae(t,e){t.O_.push(e);const r=Au(t);r.r_()&&r.V_&&r.m_(e.mutations)}function oq(t){return d0(t)&&!Au(t).n_()&&t.O_.length>0}function lq(t){Au(t).start()}async function uae(t){Au(t).p_()}async function dae(t){const e=Au(t);for(const r of t.O_)e.m_(r.mutations)}async function hae(t,e,r){const n=t.O_.shift(),a=z8.from(n,e,r);await sq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await jf(t)}async function fae(t,e){e&&Au(t).V_&&await(async function(n,a){if((function(s){return bF(s)&&s!==Fe.ABORTED})(a.code)){const i=n.O_.shift();Au(n).s_(),await sq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await jf(n)}})(t,e),oq(t)&&lq(t)}async function AI(t,e){const r=Mt(t);r.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const n=d0(r);r.L_.add(3),await n1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await d2(r)}async function fA(t,e){const r=Mt(t);e?(r.L_.delete(2),await d2(r)):e||(r.L_.add(2),await n1(r),r.q_.set("Unknown"))}function kf(t){return t.K_||(t.K_=(function(r,n,a){const i=Mt(r);return i.w_(),new Jne(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:aae.bind(null,t),Ro:iae.bind(null,t),mo:sae.bind(null,t),d_:oae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),e7(t)?J8(t):t.q_.set("Unknown")):(await t.K_.stop(),iq(t))}))),t.K_}function Au(t){return t.U_||(t.U_=(function(r,n,a){const i=Mt(r);return i.w_(),new eae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uae.bind(null,t),mo:fae.bind(null,t),f_:dae.bind(null,t),g_:hae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await jf(t)):(await t.U_.stop(),t.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,c=new t7(e,r,s,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r7(t,e){if(da("AsyncQueue",`${e}: ${t}`),Ou(t))return new ht(Fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||wt.comparator(r.key,n.key):(r,n)=>wt.comparator(r.key,n.key),this.keyedMap=rm(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.W_=new Pn(wt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):kt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Vh{constructor(e,r,n,a,i,s,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new Vh(e,r,wh.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&a2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class mae{constructor(){this.queries=EI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Mt(r),i=a.queries;a.queries=EI(),i.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new ht(Fe.ABORTED,"Firestore shutting down"))}}function EI(){return new Iu((t=>sF(t)),a2)}async function n7(t,e){const r=Mt(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new pae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const c=r7(s,`Initialization of query '${ch(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&i7(r)}async function a7(t,e){const r=Mt(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.j_.indexOf(e);s>=0&&(i.j_.splice(s,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gae(t,e){const r=Mt(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const c of s.j_)c.X_(a)&&(n=!0);s.z_=a}}n&&i7(r)}function yae(t,e,r){const n=Mt(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function i7(t){t.Y_.forEach((e=>{e.next()}))}var pA,jI;(jI=pA||(pA={})).ea="default",jI.Cache="cache";class s7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Vh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e){this.key=e}}class uq{constructor(e){this.key=e}}class vae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xr(),this.mutatedKeys=xr(),this.Aa=lF(e),this.Ra=new wh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new NI,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const y=a.get(p),x=Jg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let w=!1;y&&x?y.data.isEqual(x.data)?T!==S&&(n.track({type:3,doc:x}),w=!0):this.ga(y,x)||(n.track({type:2,doc:x}),w=!0,(d&&this.Aa(x,d)>0||h&&this.Aa(x,h)<0)&&(c=!0)):!y&&x?(n.track({type:0,doc:x}),w=!0):y&&!x&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(x?(s=s.add(x),i=S?i.add(p):i.delete(p)):(s=s.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:s,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((p,m)=>(function(x,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return S(x)-S(T)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,s.length!==0||h?{snapshot:new Vh(this.query,e.Ra,i,s,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new NI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new uq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new cq(n))})),r}ba(e){this.Ta=e.Ts,this.da=xr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Vh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class bae{constructor(e){this.key=e,this.va=!1}}class wae{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Iu((c=>sF(c)),a2),this.Ma=new Map,this.xa=new Set,this.Oa=new Pn(wt.comparator),this.Na=new Map,this.La=new W8,this.Ba={},this.ka=new Map,this.qa=Qd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Sae(t,e,r=!0){const n=f2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await dq(n,e,r,!0),a}async function _ae(t,e){const r=f2(t);await dq(r,e,!0,!1)}async function dq(t,e,r,n){const a=await yx(t.localStore,Ns(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await o7(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&h2(t.remoteStore,a),c}async function o7(t,e,r,n,a){t.Ka=(m,y,x)=>(async function(S,w,E,I){let R=w.view.ma(E);R.ns&&(R=await dA(S.localStore,w.query,!1).then((({documents:N})=>w.view.ma(N,R))));const L=I&&I.targetChanges.get(w.targetId),O=I&&I.targetMismatches.get(w.targetId)!=null,M=w.view.applyChanges(R,S.isPrimaryClient,L,O);return mA(S,w.targetId,M.wa),M.snapshot})(t,m,y,x);const i=await dA(t.localStore,e,!0),s=new vae(e,i.Ts),c=s.ma(i.documents),d=r1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=s.applyChanges(c,t.isPrimaryClient,d);mA(t,r,h.wa);const p=new xae(e,r,s);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function Tae(t,e,r){const n=Mt(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((s=>!a2(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Uh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&zh(n.remoteStore,a.targetId),Fh(n,a.targetId)})).catch(Cu)):(Fh(n,a.targetId),await Uh(n.localStore,a.targetId,!0))}async function Aae(t,e){const r=Mt(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zh(r.remoteStore,n.targetId))}async function Nae(t,e,r){const n=d7(t);try{const a=await(function(s,c){const d=Mt(s),h=Zn.now(),p=c.reduce(((x,T)=>x.add(T.key)),xr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let T=Ts(),S=xr();return d.cs.getEntries(x,p).next((w=>{T=w,T.forEach(((E,I)=>{I.isValidDocument()||(S=S.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(x,T))).next((w=>{m=w;const E=[];for(const I of c){const R=Xre(I,m.get(I.key).overlayedDocument);R!=null&&E.push(new cc(I.key,R,XV(R.value.mapValue),ha.exists(!0)))}return d.mutationQueue.addMutationBatch(x,h,E,c)})).next((w=>{y=w;const E=w.applyToLocalDocumentSet(m,S);return d.documentOverlayCache.saveOverlays(x,w.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:uF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(s,c,d){let h=s.Ba[s.currentUser.toKey()];h||(h=new Pn(sr)),h=h.insert(c,d),s.Ba[s.currentUser.toKey()]=h})(n,a.batchId,r),await Ru(n,a.changes),await jf(n.remoteStore)}catch(a){const i=r7(a,"Failed to persist write");r.reject(i)}}async function hq(t,e){const r=Mt(t);try{const n=await Gne(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const s=r.Na.get(i);s&&(Pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?s.va=!0:a.modifiedDocuments.size>0?Pt(s.va):a.removedDocuments.size>0&&(Pt(s.va),s.va=!1))})),await Ru(r,n,e)}catch(n){await Cu(n)}}function kI(t,e,r){const n=Mt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,s)=>{const c=s.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(s,c){const d=Mt(s);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&i7(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Eae(t,e,r){const n=Mt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let s=new Pn(wt.comparator);s=s.insert(i,Hn.newNoDocument(i,$t.min()));const c=xr().add(i),d=new t1($t.min(),new Map,new Pn(sr),s,c);await hq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),u7(n)}else await Uh(n.localStore,e,!1).then((()=>Fh(n,e,r))).catch(Cu)}async function jae(t,e){const r=Mt(t),n=e.batch.batchId;try{const a=await Hne(r.localStore,e);c7(r,n,null),l7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ru(r,a)}catch(a){await Cu(a)}}async function kae(t,e,r){const n=Mt(t);try{const a=await(function(s,c){const d=Mt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Pt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);c7(n,e,r),l7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ru(n,a)}catch(a){await Cu(a)}}function l7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function c7(t,e,r){const n=Mt(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Fh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||fq(t,n)}))}function fq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),u7(t))}function mA(t,e,r){for(const n of r)n instanceof cq?(t.La.addReference(n.key,e),Cae(t,n)):n instanceof uq?(rt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||fq(t,n.key)):kt()}function Cae(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(rt("SyncEngine","New document in limbo: "+r),t.xa.add(n),u7(t))}function u7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new wt(zr.fromString(e)),n=t.qa.next();t.Na.set(n,new bae(r)),t.Oa=t.Oa.insert(r,n),h2(t.remoteStore,new $l(Ns(Zg(r.path)),n,"TargetPurposeLimboResolution",es.oe))}}async function Ru(t,e,r){const n=Mt(t),a=[],i=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=Q8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(s),n.Ca.d_(a),await(async function(d,h){const p=Mt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ie.forEach(h,(y=>Ie.forEach(y.$i,(x=>p.persistence.referenceDelegate.addReference(m,y.targetId,x))).next((()=>Ie.forEach(y.Ui,(x=>p.persistence.referenceDelegate.removeReference(m,y.targetId,x)))))))))}catch(m){if(!Ou(m))throw m;rt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const x=p.os.get(y),T=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,S)}}})(n.localStore,i))}async function Oae(t,e){const r=Mt(t);if(!r.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const n=await XF(r.localStore,e);r.currentUser=e,(function(i,s){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new ht(Fe.CANCELLED,s))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ru(r,n.hs)}}function Iae(t,e){const r=Mt(t),n=r.Na.get(e);if(n&&n.va)return xr().add(n.key);{let a=xr();const i=r.Ma.get(e);if(!i)return a;for(const s of i){const c=r.Fa.get(s);a=a.unionWith(c.view.Va)}return a}}async function Rae(t,e){const r=Mt(t),n=await dA(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&mA(r,e.targetId,a.wa),a}async function Mae(t,e){const r=Mt(t);return JF(r.localStore,e).then((n=>Ru(r,n)))}async function Pae(t,e,r,n){const a=Mt(t),i=await(function(c,d){const h=Mt(c),p=Mt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):Ie.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await jf(a.remoteStore):r==="acknowledged"||r==="rejected"?(c7(a,e,n||null),l7(a,e),(function(c,d){Mt(Mt(c).mutationQueue).On(d)})(a.localStore,e)):kt(),await Ru(a,i)):rt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Dae(t,e){const r=Mt(t);if(f2(r),d7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await CI(r,n.toArray());r.Qa=!0,await fA(r.remoteStore,!0);for(const i of a)h2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):a=a.then((()=>(Fh(r,s),Uh(r.localStore,s,!0)))),zh(r.remoteStore,s)})),await a,await CI(r,n),(function(s){const c=Mt(s);c.Na.forEach(((d,h)=>{zh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Pn(wt.comparator)})(r),r.Qa=!1,await fA(r.remoteStore,!1)}}async function CI(t,e,r){const n=Mt(t),a=[],i=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await yx(n.localStore,Ns(d[0]));for(const h of d){const p=n.Fa.get(h),m=await Rae(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await ZF(n.localStore,s);c=await yx(n.localStore,h),await o7(n,pq(h),s,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function pq(t){return aF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Lae(t){return(function(r){return Mt(Mt(r).persistence).Qi()})(Mt(t).localStore)}async function Bae(t,e,r,n){const a=Mt(t);if(a.Qa)return void rt("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const s=await JF(a.localStore,oF(i[0])),c=t1.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ma.EMPTY_BYTE_STRING);await Ru(a,s,c);break}case"rejected":await Uh(a.localStore,e,!0),Fh(a,e,n);break;default:kt()}}async function $ae(t,e,r){const n=f2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){rt("SyncEngine","Adding an already active target "+a);continue}const i=await ZF(n.localStore,a),s=await yx(n.localStore,i);await o7(n,pq(i),s.targetId,!1,s.resumeToken),h2(n.remoteStore,s)}for(const a of r)n.Ma.has(a)&&await Uh(n.localStore,a,!1).then((()=>{zh(n.remoteStore,a),Fh(n,a)})).catch(Cu)}}function f2(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Eae.bind(null,e),e.Ca.d_=gae.bind(null,e.eventManager),e.Ca.$a=yae.bind(null,e.eventManager),e}function d7(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kae.bind(null,e),e}class Km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=u2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return QF(this.persistence,new KF,e.initialUser,this.serializer)}Ga(e){return new GF(c2.Zr,this.serializer)}Wa(e){return new tq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Km.provider={build:()=>new Km};class mq extends Km{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await d7(this.Ja.syncEngine),await jf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return QF(this.persistence,new KF,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Ene(n,e.asyncQueue,r)}Ha(e,r){const n=new ore(r,this.persistence);return new sre(e.asyncQueue,n)}Ga(e){const r=WF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new K8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,rq(),Wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new tq}}class Uae extends mq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof z5&&(this.sharedClientState.syncEngine={no:Pae.bind(null,r),ro:Bae.bind(null,r),io:$ae.bind(null,r),Qi:Lae.bind(null,r),eo:Mae.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Dae(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=rq();if(!z5.D(r))throw new ht(Fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=WF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Qm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>kI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oae.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mae})()}createDatastore(e){const r=u2(e.databaseInfo.databaseId),n=(function(i){return new Zne(i)})(e.databaseInfo);return(function(i,s,c,d){return new tae(i,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,s,c){return new nae(n,a,i,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>kI(this.syncEngine,r,0)),(function(){return TI.D()?new TI:new Qne})())}createSyncEngine(e,r){return(function(a,i,s,c,d,h,p){const m=new wae(a,i,s,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Mt(a);rt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await n1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ht(Fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const s=Mt(a),c={documents:i.map((m=>Gm(s.serializer,m)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,zr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const y=one(s.serializer,m);h.set(y.key.toString(),y)}));const p=[];return i.forEach((m=>{const y=h.get(m.toString());Pt(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new e1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=wt.fromPath(n);this.mutations.push(new $8(a,this.precondition(a)))})),await(async function(n,a){const i=Mt(n),s={writes:a.map((c=>Wm(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,zr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw kt();r=$t.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ht(Fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($t.min())?ha.exists(!1):ha.updateTime(r):ha.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($t.min()))throw new ht(Fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ha.updateTime(r)}return ha.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new Y8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new zae(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Xg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!bF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fae{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Si.UNAUTHENTICATED,this.clientId=MV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async s=>{rt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(rt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=r7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function F5(t,e){t.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await XF(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function OI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await qae(t);rt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>AI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>AI(e.remoteStore,a))),t._onlineComponents=e}async function qae(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await F5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Fe.FAILED_PRECONDITION||a.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Dm("Error using user provided cache. Falling back to memory cache: "+r),await F5(t,new Km)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await F5(t,new Km);return t._offlineComponents}async function f7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await OI(t,t._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await OI(t,new Qm))),t._onlineComponents}function Hae(t){return f7(t).then((e=>e.syncEngine))}function Gae(t){return f7(t).then((e=>e.datastore))}async function wx(t){const e=await f7(t),r=e.eventManager;return r.onListen=Sae.bind(null,e.syncEngine),r.onUnlisten=Tae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=_ae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Aae.bind(null,e.syncEngine),r}function Wae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new h7({next:y=>{p.Za(),s.enqueueAndForget((()=>a7(i,m)));const x=y.docs.has(c);!x&&y.fromCache?h.reject(new ht(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&d&&d.source==="server"?h.reject(new ht(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new s7(Zg(c.path),p,{includeMetadataChanges:!0,_a:!0});return n7(i,m)})(await wx(t),t.asyncQueue,e,r,n))),n.promise}function Kae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new h7({next:y=>{p.Za(),s.enqueueAndForget((()=>a7(i,m))),y.fromCache&&d.source==="server"?h.reject(new ht(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new s7(c,p,{includeMetadataChanges:!0,_a:!0});return n7(i,m)})(await wx(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(t,e,r){if(!r)throw new ht(Fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qae(t,e,r,n){if(e===!0&&n===!0)throw new ht(Fe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function RI(t){if(!wt.isDocumentKey(t))throw new ht(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MI(t){if(wt.isDocumentKey(t))throw new ht(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function p2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":kt()}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ht(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=p2(t);throw new ht(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Xae(t,e){if(e<=0)throw new ht(Fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ht(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ht(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ht(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ht(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ht(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class p7{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ht(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Xte;switch(n.type){case"firstParty":return new Jte(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ht(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=II.get(r);n&&(rt("ComponentProvider","Removing Datastore"),II.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uc(this.firestore,e,this._query)}}class fi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class xu extends uc{constructor(e,r,n){super(e,r,Zg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new wt(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function Gt(t,e,...r){if(t=bn(t),yq("collection","path",e),t instanceof p7){const n=zr.fromString(e,...r);return MI(n),new xu(t,null,n)}{if(!(t instanceof fi||t instanceof xu))throw new ht(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zr.fromString(e,...r));return MI(n),new xu(t.firestore,null,n)}}function lt(t,e,...r){if(t=bn(t),arguments.length===1&&(e=MV.newId()),yq("doc","path",e),t instanceof p7){const n=zr.fromString(e,...r);return RI(n),new fi(t,null,new wt(n))}{if(!(t instanceof fi||t instanceof xu))throw new ht(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zr.fromString(e,...r));return RI(n),new fi(t.firestore,t instanceof xu?t.converter:null,new wt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Y8(this,"async_queue_retry"),this.Vu=()=>{const n=Wv();n&&rt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Wv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new So;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ou(e))throw e;rt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw da("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=t7.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&kt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function LI(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Yo extends p7{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new DI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DI(e),this._firestoreClient=void 0,await e}}}function Yae(t,e,r){r||(r="(default)");const n=Gg(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Oh(i,e))return a;throw new ht(Fe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ht(Fe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ht(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function a1(t){if(t._terminated)throw new ht(Fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zae(t),t._firestoreClient}function Zae(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new jre(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,gq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Fae(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xd(ma.fromBase64String(e))}catch(r){throw new ht(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Xd(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ht(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ht(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ht(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sr(this._lat,e._lat)||sr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jae=/^__.*__$/;class eie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new cc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ef(e,this.data,r,this.fieldTransforms)}}class vq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new cc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function xq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class m2{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new m2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xq(this.Cu)&&Jae.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||u2(e)}Qu(e,r,n,a=!1){return new m2({Cu:e,methodName:r,qu:n,path:Yn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o1(t){const e=t._freezeSettings(),r=u2(t._databaseId);return new tie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function y7(t,e,r,n,a,i={}){const s=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);b7("Data must be an object, but it was:",s,n);const c=Sq(n,s);let d,h;if(i.merge)d=new ts(s.fieldMask),h=s.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=gA(e,m,r);if(!s.contains(y))throw new ht(Fe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Tq(p,y)||p.push(y)}d=new ts(p),h=s.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=s.fieldTransforms;return new eie(new hi(c),d,h)}class g2 extends s1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof g2}}function rie(t,e,r){return new m2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class v7 extends s1{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=rie(this,e,!0),n=this.Ku.map((i=>Cf(i,r))),a=new Gd(n);return new B8(e.path,a)}isEqual(e){return e instanceof v7&&Oh(this.Ku,e.Ku)}}class x7 extends s1{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Bh(e.serializer,fF(e.serializer,this.$u));return new B8(e.path,r)}isEqual(e){return e instanceof x7&&this.$u===e.$u}}function bq(t,e,r,n){const a=t.Qu(1,e,r);b7("Data must be an object, but it was:",a,n);const i=[],s=hi.empty();u0(n,((d,h)=>{const p=w7(e,d,r);h=bn(h);const m=a.Nu(p);if(h instanceof g2)i.push(p);else{const y=Cf(h,m);y!=null&&(i.push(p),s.set(p,y))}}));const c=new ts(i);return new vq(s,c,a.fieldTransforms)}function wq(t,e,r,n,a,i){const s=t.Qu(1,e,r),c=[gA(e,n,r)],d=[a];if(i.length%2!=0)throw new ht(Fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(gA(e,i[y])),d.push(i[y+1]);const h=[],p=hi.empty();for(let y=c.length-1;y>=0;--y)if(!Tq(h,c[y])){const x=c[y];let T=d[y];T=bn(T);const S=s.Nu(x);if(T instanceof g2)h.push(x);else{const w=Cf(T,S);w!=null&&(h.push(x),p.set(x,w))}}const m=new ts(h);return new vq(p,m,s.fieldTransforms)}function nie(t,e,r,n=!1){return Cf(r,t.Qu(n?4:3,e))}function Cf(t,e){if(_q(t=bn(t)))return b7("Unsupported field value:",e,t),Sq(t,e);if(t instanceof s1)return(function(n,a){if(!xq(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let s=0;for(const c of n){let d=Cf(c,a.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=bn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Zn.fromDate(n);return{timestampValue:$h(a.serializer,i)}}if(n instanceof Zn){const i=new Zn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$h(a.serializer,i)}}if(n instanceof m7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xd)return{bytesValue:TF(a.serializer,n._byteString)};if(n instanceof fi){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof g7)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return L8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${p2(n)}`)})(t,e)}function Sq(t,e){const r={};return GV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):u0(t,((n,a)=>{const i=Cf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function _q(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zn||t instanceof m7||t instanceof Xd||t instanceof fi||t instanceof s1||t instanceof g7)}function b7(t,e,r){if(!_q(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=p2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function gA(t,e,r){if((e=bn(e))instanceof i1)return e._internalPath;if(typeof e=="string")return w7(t,e);throw Sx("Field path arguments must be of type string or ",t,!1,void 0,r)}const aie=new RegExp("[~\\*/\\[\\]]");function w7(t,e,r){if(e.search(aie)>=0)throw Sx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new i1(...e.split("."))._internalPath}catch{throw Sx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Sx(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||s)&&(d+=" (found",i&&(d+=` in field ${n}`),s&&(d+=` in document ${a}`),d+=")"),new ht(Fe.INVALID_ARGUMENT,c+t+d)}function Tq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(y2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class iie extends _x{data(){return super.data()}}function y2(t,e){return typeof e=="string"?w7(t,e):e instanceof i1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ht(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S7{}class _7 extends S7{}function sn(t,e,...r){let n=[];e instanceof S7&&n.push(e),n=n.concat(r),(function(i){const s=i.filter((d=>d instanceof T7)).length,c=i.filter((d=>d instanceof v2)).length;if(s>1||s>0&&c>0)throw new ht(Fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class v2 extends _7{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new v2(e,r,n)}_apply(e){const r=this._parse(e);return Nq(e._query,r),new uc(e.firestore,e.converter,nA(e._query,r))}_parse(e){const r=o1(e.firestore);return(function(i,s,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ht(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){$I(m,p);const x=[];for(const T of m)x.push(BI(d,i,T));y={arrayValue:{values:x}}}else y=BI(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||$I(m,p),y=nie(c,s,m,p==="in"||p==="not-in");return kr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function On(t,e,r){const n=e,a=y2("where",t);return v2._create(a,n,r)}class T7 extends S7{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new T7(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:ln.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let s=a;const c=i.getFlattenedFilters();for(const d of c)Nq(s,d),s=nA(s,d)})(e._query,r),new uc(e.firestore,e.converter,nA(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class A7 extends _7{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new A7(e,r)}_apply(e){const r=(function(a,i,s){if(a.startAt!==null)throw new ht(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ht(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qm(i,s)})(e._query,this._field,this._direction);return new uc(e.firestore,e.converter,(function(a,i){const s=a.explicitOrderBy.concat([i]);return new Nf(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function ld(t,e="asc"){const r=e,n=y2("orderBy",t);return A7._create(n,r)}class N7 extends _7{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new N7(e,r,n)}_apply(e){return new uc(e.firestore,e.converter,fx(e._query,this._limit,this._limitType))}}function El(t){return Xae("limit",t),N7._create("limit",t,"F")}function BI(t,e,r){if(typeof(r=bn(r))=="string"){if(r==="")throw new ht(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iF(e)&&r.indexOf("/")!==-1)throw new ht(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(zr.fromString(r));if(!wt.isDocumentKey(n))throw new ht(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vm(t,new wt(n))}if(r instanceof fi)return Vm(t,r._key);throw new ht(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${p2(r)}.`)}function $I(t,e){if(!Array.isArray(t)||t.length===0)throw new ht(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nq(t,e){const r=(function(a,i){for(const s of a)for(const c of s.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new ht(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ht(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Eq{convertValue(e,r="none"){switch(qd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(_u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return u0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((s=>qn(s.doubleValue)));return new g7(i)}convertGeoPoint(e){return new m7(qn(e.latitude),qn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=M8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Um(e));default:return null}}convertTimestamp(e){const r=Jl(e);return new Zn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=zr.fromString(e);Pt(MF(n));const a=new Fd(n.get(1),n.get(3)),i=new wt(n.popFirst(5));return a.isEqual(r)||da(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class sie extends Eq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class j7 extends _x{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Kv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(y2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Kv extends j7{data(e={}){return super.data(e)}}class jq{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new fh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Kv(this._firestore,this._userDataWriter,n.key,n,new fh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ht(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map((c=>{const d=new Kv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new fh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new Kv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new fh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:oie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function oie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){t=as(t,fi);const e=as(t.firestore,Yo);return Wae(a1(e),t._key).then((r=>kq(e,t,r)))}class x2 extends Eq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}function th(t){t=as(t,uc);const e=as(t.firestore,Yo),r=a1(e),n=new x2(e);return Aq(t._query),Kae(r,t._query).then((a=>new jq(e,n,t,a)))}function ra(t,e,r){t=as(t,fi);const n=as(t.firestore,Yo),a=E7(t.converter,e,r);return b2(n,[y7(o1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ha.none())])}function wr(t,e,r,...n){t=as(t,fi);const a=as(t.firestore,Yo),i=o1(a);let s;return s=typeof(e=bn(e))=="string"||e instanceof i1?wq(i,"updateDoc",t._key,e,r,n):bq(i,"updateDoc",t._key,e),b2(a,[s.toMutation(t._key,ha.exists(!0))])}function Wa(t){return b2(as(t.firestore,Yo),[new e1(t._key,ha.none())])}function cd(t,e){const r=as(t.firestore,Yo),n=lt(t),a=E7(t.converter,e);return b2(r,[y7(o1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ha.exists(!1))]).then((()=>n))}function on(t,...e){var r,n,a;t=bn(t);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||LI(e[s])||(i=e[s],s++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(LI(e[s])){const m=e[s];e[s]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[s+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[s+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof fi)h=as(t.firestore,Yo),p=Zg(t._key.path),d={next:m=>{e[s]&&e[s](kq(h,t,m))},error:e[s+1],complete:e[s+2]};else{const m=as(t,uc);h=as(m.firestore,Yo),p=m._query;const y=new x2(h);d={next:x=>{e[s]&&e[s](new jq(h,y,m,x))},error:e[s+1],complete:e[s+2]},Aq(t._query)}return(function(y,x,T,S){const w=new h7(S),E=new s7(x,w,T);return y.asyncQueue.enqueueAndForget((async()=>n7(await wx(y),E))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>a7(await wx(y),E)))}})(a1(h),p,c,d)}function b2(t,e){return(function(n,a){const i=new So;return n.asyncQueue.enqueueAndForget((async()=>Nae(await Hae(n),a,i))),i.promise})(a1(t),e)}function kq(t,e,r){const n=r.docs.get(e._key),a=new x2(t);return new j7(t,a,e._key,n,new fh(r.hasPendingWrites,r.fromCache),e.converter)}class lie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=hie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function cie(t){return new lie(t)}class uie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new mq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class die{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new Uae(r,e==null?void 0:e.cacheSizeBytes)}}}function hie(t){return new uie(void 0)}function fie(){return new die}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pie={maxAttempts:5};function Up(t,e){if((t=bn(t)).firestore!==e)throw new ht(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=o1(r)}get(r){const n=Up(r,this._firestore),a=new sie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return kt();const s=i[0];if(s.isFoundDocument())return new _x(this._firestore,a,s.key,s,n.converter);if(s.isNoDocument())return new _x(this._firestore,a,n._key,null,n.converter);throw kt()}))}set(r,n,a){const i=Up(r,this._firestore),s=E7(i.converter,n,a),c=y7(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const s=Up(r,this._firestore);let c;return c=typeof(n=bn(n))=="string"||n instanceof i1?wq(this._dataReader,"Transaction.update",s._key,n,a,i):bq(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=Up(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Up(e,this._firestore),n=new x2(this._firestore);return super.get(e).then((a=>new j7(this._firestore,n,r._key,a._document,new fh(!1,!1),r.converter)))}}function q5(t,e,r){t=as(t,Yo);const n=Object.assign(Object.assign({},pie),r);return(function(i){if(i.maxAttempts<1)throw new ht(Fe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,s,c){const d=new So;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Gae(i);new Vae(i.asyncQueue,h,c,s,d).au()})),d.promise})(a1(t),(a=>e(new mie(t,a))),n)}function gie(...t){return new v7("arrayUnion",t)}function yie(t){return new x7("increment",t)}(function(e,r=!0){(function(a){Af=a})(c0),Su(new Xl("firestore",((n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),c=new Yo(new Yte(n.getProvider("auth-internal")),new tre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ht(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(h.options.projectId,p)})(s,a),s);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Zs(OO,"4.7.3",e),Zs(OO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq="firebasestorage.googleapis.com",Oq="storageBucket",vie=120*1e3,xie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Eo{constructor(e,r,n=0){super(H5(e),`Firebase Storage: ${r} (${H5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return H5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ia;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ia||(ia={}));function H5(t){return"storage/"+t}function k7(){const t="An unknown error occurred, please check the error payload for server response.";return new sa(ia.UNKNOWN,t)}function bie(t){return new sa(ia.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wie(t){return new sa(ia.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Sie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sa(ia.UNAUTHENTICATED,t)}function _ie(){return new sa(ia.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Tie(t){return new sa(ia.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Aie(){return new sa(ia.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Nie(){return new sa(ia.CANCELED,"User canceled the upload/download.")}function Eie(t){return new sa(ia.INVALID_URL,"Invalid URL '"+t+"'.")}function jie(t){return new sa(ia.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kie(){return new sa(ia.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Oq+"' property when initializing the app?")}function Cie(){return new sa(ia.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Oie(){return new sa(ia.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Iie(t){return new sa(ia.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yA(t){return new sa(ia.INVALID_ARGUMENT,t)}function Iq(){return new sa(ia.APP_DELETED,"The Firebase app was deleted.")}function Rie(t){return new sa(ia.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gm(t,e){return new sa(ia.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zp(t){throw new sa(ia.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=As.makeFromUrl(e,r)}catch{return new As(e,"")}if(n.path==="")return n;throw jie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+a+s,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${p}/b/${a}/o${y}`,"i"),T={bucket:1,path:3},S=r===Cq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",E=new RegExp(`^https?://${S}/${a}/${w}`,"i"),R=[{regex:c,indices:d,postModify:i},{regex:x,indices:T,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<R.length;L++){const O=R[L],M=O.regex.exec(e);if(M){const N=M[O.indices.bucket];let A=M[O.indices.path];A||(A=""),n=new As(N,A),O.postModify(n);break}}if(n==null)throw Eie(e);return n}}class Mie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pie(t,e,r){let n=1,a=null,i=null,s=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(x,d())},w)}function y(){i&&clearTimeout(i)}function x(w,...E){if(h){y();return}if(w){y(),p.call(null,w,...E);return}if(d()||s){y(),p.call(null,w,...E);return}n<64&&(n*=2);let R;c===1?(c=2,R=0):R=(n+Math.random())*1e3,m(R)}let T=!1;function S(w){T||(T=!0,y(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{s=!0,S(!0)},r),S}function Die(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lie(t){return t!==void 0}function Bie(t){return typeof t=="object"&&!Array.isArray(t)}function C7(t){return typeof t=="string"||t instanceof String}function UI(t){return O7()&&t instanceof Blob}function O7(){return typeof Blob<"u"}function zI(t,e,r,n){if(n<e)throw yA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw yA(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Rq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Dd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Dd||(Dd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ie(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uie{constructor(e,r,n,a,i,s,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,T)=>{this.resolve_=x,this.reject_=T,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new nv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const s=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(s),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(s),this.pendingConnection_=null;const c=i.getErrorCode()===Dd.NO_ERROR,d=i.getStatus();if(!c||$ie(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Dd.ABORT;n(!1,new nv(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new nv(h,i))})},r=(n,a)=>{const i=this.resolve_,s=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Lie(d)?i(d):i()}catch(d){s(d)}else if(c!==null){const d=k7();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(a.canceled){const d=this.appDelete_?Iq():Nie();s(d)}else{const d=Aie();s(d)}};this.canceled_?r(!1,new nv(!1,null,!0)):this.backoffId_=Pie(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Die(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function zie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Vie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Fie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Hie(t,e,r,n,a,i,s=!0){const c=Rq(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Fie(h,e),zie(h,r),Vie(h,i),qie(h,n),new Uie(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Wie(...t){const e=Gie();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(O7())return new Blob(t);throw new sa(ia.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Kie(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qie(t){if(typeof atob>"u")throw Iie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class G5{constructor(e,r){this.data=e,this.contentType=r||null}}function Xie(t,e){switch(t){case zo.RAW:return new G5(Mq(e));case zo.BASE64:case zo.BASE64URL:return new G5(Pq(t,e));case zo.DATA_URL:return new G5(Zie(e),Jie(e))}throw k7()}function Mq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,s=t.charCodeAt(++r);n=65536|(i&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Yie(t){let e;try{e=decodeURIComponent(t)}catch{throw gm(zo.DATA_URL,"Malformed data URL.")}return Mq(e)}function Pq(t,e){switch(t){case zo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Qie(e)}catch(a){throw a.message.includes("polyfill")?a:gm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Dq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw gm(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=ese(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Zie(t){const e=new Dq(t);return e.base64?Pq(zo.BASE64,e.rest):Yie(e.rest)}function Jie(t){return new Dq(t).contentType}function ese(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,r){let n=0,a="";UI(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(UI(this.data_)){const n=this.data_,a=Kie(n,e,r);return a===null?null:new nu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new nu(n,!0)}}static getBlob(...e){if(O7()){const r=e.map(n=>n instanceof nu?n.data_:n);return new nu(Wie.apply(null,r))}else{const r=e.map(s=>C7(s)?Xie(zo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)a[i++]=s[c]}),new nu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){let e;try{e=JSON.parse(t)}catch{return null}return Bie(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rse(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Bq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nse(t,e){return e}class ki{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||nse}}let av=null;function ase(t){return!C7(t)||t.length<2?t:Bq(t)}function $q(){if(av)return av;const t=[];t.push(new ki("bucket")),t.push(new ki("generation")),t.push(new ki("metageneration")),t.push(new ki("name","fullPath",!0));function e(i,s){return ase(s)}const r=new ki("name");r.xform=e,t.push(r);function n(i,s){return s!==void 0?Number(s):s}const a=new ki("size");return a.xform=n,t.push(a),t.push(new ki("timeCreated")),t.push(new ki("updated")),t.push(new ki("md5Hash",null,!0)),t.push(new ki("cacheControl",null,!0)),t.push(new ki("contentDisposition",null,!0)),t.push(new ki("contentEncoding",null,!0)),t.push(new ki("contentLanguage",null,!0)),t.push(new ki("contentType",null,!0)),t.push(new ki("metadata","customMetadata",!0)),av=t,av}function ise(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new As(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function sse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const s=r[i];n[s.local]=s.xform(n,e[s.server])}return ise(n,t),n}function Uq(t,e,r){const n=Lq(e);return n===null?null:sse(t,n,r)}function ose(t,e,r,n){const a=Lq(e);if(a===null||!C7(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const s=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+s(p)+"/o/"+s(m),x=w2(y,r,n),T=Rq({alt:"media",token:h});return x+T})[0]}function lse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class I7{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zq(t){if(!t)throw k7()}function cse(t,e){function r(n,a){const i=Uq(t,a,e);return zq(i!==null),i}return r}function use(t,e){function r(n,a){const i=Uq(t,a,e);return zq(i!==null),ose(i,a,t.host,t._protocol)}return r}function Vq(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=_ie():a=Sie():r.getStatus()===402?a=wie(t.bucket):r.getStatus()===403?a=Tie(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function Fq(t){const e=Vq(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=bie(t.path)),i.serverResponse=a.serverResponse,i}return r}function dse(t,e,r){const n=e.fullServerUrl(),a=w2(n,t.host,t._protocol),i="GET",s=t.maxOperationRetryTime,c=new I7(a,i,use(t,r),s);return c.errorHandler=Fq(e),c}function hse(t,e){const r=e.fullServerUrl(),n=w2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function s(d,h){}const c=new I7(n,a,s,i);return c.successCodes=[200,204],c.errorHandler=Fq(e),c}function fse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=fse(null,e)),n}function mse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let R="";for(let L=0;L<2;L++)R=R+Math.random().toString().slice(2);return R}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const h=pse(e,n,a),p=lse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",x=nu.getBlob(m,n,y);if(x===null)throw Cie();const T={name:h.fullPath},S=w2(i,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,I=new I7(S,w,cse(t,r),E);return I.urlParams=T,I.headers=s,I.body=x.uploadData(),I.errorHandler=Vq(e),I}class gse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw zp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yse extends gse{initXhr(){this.xhr_.responseType="text"}}function R7(){return new yse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,r){this._service=e,r instanceof As?this._location=r:this._location=As.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Yd(e,r)}get root(){const e=new As(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bq(this._location.path)}get storage(){return this._service}get parent(){const e=tse(this._location.path);if(e===null)return null;const r=new As(this._location.bucket,e);return new Yd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Rie(e)}}function vse(t,e,r){t._throwIfRoot("uploadBytes");const n=mse(t.storage,t._location,$q(),new nu(e,!0),r);return t.storage.makeRequestWithTokens(n,R7).then(a=>({metadata:a,ref:t}))}function xse(t){t._throwIfRoot("getDownloadURL");const e=dse(t.storage,t._location,$q());return t.storage.makeRequestWithTokens(e,R7).then(r=>{if(r===null)throw Oie();return r})}function bse(t){t._throwIfRoot("deleteObject");const e=hse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,R7)}function wse(t,e){const r=rse(t._location.path,e),n=new As(t._location.bucket,r);return new Yd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sse(t){return/^[A-Za-z]+:\/\//.test(t)}function _se(t,e){return new Yd(t,e)}function qq(t,e){if(t instanceof M7){const r=t;if(r._bucket==null)throw kie();const n=new Yd(r,r._bucket);return e!=null?qq(n,e):n}else return e!==void 0?wse(t,e):t}function Tse(t,e){if(e&&Sse(e)){if(t instanceof M7)return _se(t,e);throw yA("To use ref(service, url), the first argument must be a Storage instance.")}else return qq(t,e)}function VI(t,e){const r=e==null?void 0:e[Oq];return r==null?null:As.makeFromBucketSpec(r,t)}function Ase(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:NZ(a,t.app.options.projectId))}class M7{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=Cq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vie,this._maxUploadRetryTime=xie,this._requests=new Set,a!=null?this._bucket=As.makeFromBucketSpec(a,this._host):this._bucket=VI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=As.makeFromBucketSpec(this._url,e):this._bucket=VI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new Mie(Iq());{const s=Hie(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const FI="@firebase/storage",qI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq="storage";function vA(t,e,r){return t=bn(t),vse(t,e,r)}function Tx(t){return t=bn(t),xse(t)}function Nse(t){return t=bn(t),bse(t)}function ym(t,e){return t=bn(t),Tse(t,e)}function Ese(t=y8(),e){t=bn(t);const n=Gg(t,Hq).getImmediate({identifier:e}),a=zz("storage");return a&&jse(n,...a),n}function jse(t,e,r,n={}){Ase(t,e,r,n)}function kse(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new M7(r,n,a,e,c0)}function Cse(){Su(new Xl(Hq,kse,"PUBLIC").setMultipleInstances(!0)),Zs(FI,qI,""),Zs(FI,qI,"esm2017")}Cse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ose="type.googleapis.com/google.protobuf.Int64Value",Ise="type.googleapis.com/google.protobuf.UInt64Value";function Gq(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function xA(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>xA(e));if(typeof t=="function"||typeof t=="object")return Gq(t,e=>xA(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ax(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Ose:case Ise:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ax(e)):typeof t=="function"||typeof t=="object"?Gq(t,e=>Ax(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sh extends Eo{constructor(e,r,n){super(`${P7}/${e}`,r||""),this.details=n}}function Rse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Mse(t,e){let r=Rse(t),n=r,a;try{const i=e&&e.error;if(i){const s=i.status;if(typeof s=="string"){if(!HI[s])return new Sh("internal","internal");r=HI[s],n=s}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Ax(a))}}catch{}return r==="ok"?null:new Sh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="us-central1";function Dse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Sh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Lse{constructor(e,r,n,a,i=bA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Pse(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=bA}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Bse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function $se(t,e,r){return(n=>zse(t,e,n,{}))}async function Use(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function zse(t,e,r,n){const a=t._url(e);return Vse(t,a,r,n)}async function Vse(t,e,r,n){r=xA(r);const a={data:r},i={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(i.Authorization="Bearer "+s.authToken),s.messagingToken&&(i["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=Dse(c),h=await Promise.race([Use(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Sh("cancelled","Firebase Functions instance was deleted.");const p=Mse(h.status,h.json);if(p)throw p;if(!h.json)throw new Sh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Sh("internal","Response is missing data field.");return{data:Ax(m)}}const GI="@firebase/functions",WI="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fse="auth-internal",qse="app-check-internal",Hse="messaging-internal";function Gse(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(Fse),c=n.getProvider(Hse),d=n.getProvider(qse);return new Lse(i,s,c,d,a,t)};Su(new Xl(P7,r,"PUBLIC").setMultipleInstances(!0)),Zs(GI,WI,e),Zs(GI,WI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wse(t=y8(),e=bA){const n=Gg(bn(t),P7).getImmediate({identifier:e}),a=zz("functions");return a&&Kse(n,...a),n}function Kse(t,e,r){Bse(bn(t),e,r)}function Qr(t,e,r){return $se(bn(t),e)}Gse(fetch.bind(self));const Wq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Qse=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Qse)if(!Wq[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const S2=Kz(Wq),wA=KT(S2),Xse=new Rl,Le=Yae(S2,{localCache:cie({tabManager:fie()})}),vm=Ese(S2),Xr=Wse(S2),Yse=Qr(Xr,"awardXP"),Zse=Qr(Xr,"acceptQuest"),Jse=Qr(Xr,"deployMission"),eoe=Qr(Xr,"resolveQuest"),toe=Qr(Xr,"equipItem"),roe=Qr(Xr,"unequipItem"),noe=Qr(Xr,"disenchantItem"),aoe=Qr(Xr,"craftItem"),ioe=Qr(Xr,"adminUpdateInventory"),soe=Qr(Xr,"adminUpdateEquipped"),ooe=Qr(Xr,"submitEngagement"),loe=Qr(Xr,"sendClassMessage");Qr(Xr,"uploadQuestionBank");const Kq=Qr(Xr,"awardQuestionXP"),coe=Qr(Xr,"penalizeWrongAnswer"),uoe=Qr(Xr,"updateStreak"),doe=Qr(Xr,"claimDailyLogin"),hoe=Qr(Xr,"spinFortuneWheel"),foe=Qr(Xr,"unlockSkill"),poe=Qr(Xr,"addSocket"),moe=Qr(Xr,"socketGem"),goe=Qr(Xr,"unsocketGem"),yoe=Qr(Xr,"dealBossDamage"),voe=Qr(Xr,"answerBossQuiz"),xoe=Qr(Xr,"createParty"),boe=Qr(Xr,"joinParty"),woe=Qr(Xr,"completeTutoring"),Soe=Qr(Xr,"claimKnowledgeLoot"),_oe=Qr(Xr,"purchaseCosmetic"),Toe=Qr(Xr,"claimDailyChallenge"),Aoe=Qr(Xr,"dismissAlert"),Nx=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),vd={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...c},d)=>k.createElement("svg",{ref:d,...Eoe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Qq("lucide",a),...c},[...s.map(([h,p])=>k.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,e)=>{const r=k.forwardRef(({className:n,...a},i)=>k.createElement(joe,{ref:i,iconNode:e,className:Qq(`lucide-${Noe(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=Ge("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=Ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=Ge("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=Ge("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=Ge("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=Ge("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=Ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Ge("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Ge("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ge("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Ge("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=Ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=Ge("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=Ge("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=Ge("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=Ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=Ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=Ge("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=Ge("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=Ge("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Ge("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=Ge("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=Ge("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=Ge("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=Ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=Ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=Ge("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ge("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=Ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Ge("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Ge("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=Ge("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=Ge("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=Ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=Ge("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=Ge("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=Ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=Ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=Ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=Ge("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=Ge("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=Ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Ge("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ge("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Ge("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=Ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=Ge("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ge("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=Ge("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=Ge("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=Ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=Ge("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=Ge("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=Ge("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=Ge("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Ge("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=Ge("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=Ge("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=Ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=Ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Ge("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Ge("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=Ge("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=Ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=Ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=Ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=Ge("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=Ge("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Ge("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=Ge("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=Ge("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=Ge("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=Ge("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=Ge("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=Ge("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=Ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Ge("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=Ge("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=Ge("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=Ge("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=Ge("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=Ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=Ge("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ge("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ble="kellporter2@paps.net",hH="Mr. Porter",wle=[{name:"Dashboard",icon:o.jsx(Yoe,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:o.jsx(N2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:o.jsx(Es,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:o.jsx(Ao,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:o.jsx(L7,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:o.jsx(Ex,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:o.jsx(Ao,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:o.jsx(ec,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:o.jsx(Goe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:o.jsx(Uoe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:o.jsx(ec,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:o.jsx(Nu,{className:"w-5 h-5"}),role:"STUDENT"}],nR=new Set,qs=(t,e,r)=>nR.has(t)?()=>{}:on(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&nR.add(t)}),Pe={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>qs("xp_events",Gt(Le,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await ra(lt(Le,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Wa(lt(Le,"xp_events",t))},subscribeToQuests:t=>qs("quests",Gt(Le,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await ra(lt(Le,"quests",t.id),t)},deleteQuest:async t=>{await Wa(lt(Le,"quests",t))},acceptQuest:async(t,e)=>{await Zse({questId:e})},deployMission:async(t,e)=>{await Jse({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await eoe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Pe.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await toe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await roe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await noe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await aoe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await ioe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await soe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=lt(Le,"users",t);r?await wr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await wr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await loe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=lt(Le,"class_messages",t);await q5(Le,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=lt(Le,"class_messages",t);await q5(Le,async n=>{const a=await n.get(r);if(!a.exists())return;const s=[...a.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=lt(Le,"class_messages",t);await wr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Wa(lt(Le,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=sn(Gt(Le,"class_messages"),On("isFlagged","==",!0),El(50));return on(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=lt(Le,"class_messages",t);await wr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Pe.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await wr(lt(Le,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await cd(Gt(Le,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await wr(lt(Le,"student_groups",t),r)},deleteStudentGroup:async t=>{await Wa(lt(Le,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=sn(Gt(Le,"student_groups"),On("classType","==",t));return on(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>on(Gt(Le,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=sn(Gt(Le,"student_groups"),On("memberIds","array-contains",t));return on(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=sn(Gt(Le,"class_messages"),On("channelId","==",t),El(100));return on(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=sn(Gt(Le,"class_messages"),ld("timestamp","desc"),El(20));return qs("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=sn(Gt(Le,"conversations"),ld("lastMessageAt","desc"));return on(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=sn(Gt(Le,`conversations/${t}/messages`),ld("timestamp","asc"));return on(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Ka.ADMIN?hH:e.name,content:r,timestamp:new Date().toISOString()};await cd(Gt(Le,`conversations/${t}/messages`),n),await wr(lt(Le,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await wr(lt(Le,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=sn(Gt(Le,"chat_flags"),On("isResolved","==",!1));return on(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await wr(lt(Le,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=sn(Gt(Le,"chat_flags"),On("messageId","==",t),On("isResolved","==",!1)),n=(await th(e)).docs.map(a=>wr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=sn(Gt(Le,"evidence"),On("studentId","==",t),On("weekId","==",e));return on(n,a=>{const i=a.docs.map(s=>({id:s.id,...s.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await ra(lt(Le,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=ym(vm,n.imageUrl);return Nse(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Wa(lt(Le,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await ra(lt(Le,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=lt(Le,"users",t);await wr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await wr(lt(Le,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await wr(lt(Le,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Gt(Le,"users");return on(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Gt(Le,"assignments");return on(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=sn(Gt(Le,"submissions"),ld("submittedAt","desc"),El(200));return on(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Nx(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=sn(Gt(Le,"submissions"),On("userId","==",t),El(50));return on(r,n=>{const a=n.docs.map(i=>{const s=i.data();return{id:i.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Nx(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,s)=>new Date(s.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Gt(Le,"allowed_emails");return on(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Gt(Le,"class_configs");return on(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null};t.id?await ra(lt(Le,"assignments",t.id),e,{merge:!0}):await cd(Gt(Le,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await wr(lt(Le,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Wa(lt(Le,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=lt(Le,"allowed_emails",t),n=await Ma(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await ra(r,{classType:e,classTypes:i});const s=sn(Gt(Le,"users"),On("email","==",t)),c=await th(s);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await wr(lt(Le,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await wr(lt(Le,"allowed_emails",t),{section:e});const r=sn(Gt(Le,"users"),On("email","==",t)),n=await th(r);await Promise.all(n.docs.map(async a=>{await wr(lt(Le,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await wr(lt(Le,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await wr(lt(Le,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Wa(lt(Le,"allowed_emails",t));const e=sn(Gt(Le,"users"),On("email","==",t)),r=await th(e);await Promise.all(r.docs.map(async n=>{await wr(lt(Le,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=lt(Le,"users",t),n=await Ma(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),s=Array.from(new Set([...i,e]));await wr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=a.email;if(c){const d=await Ma(lt(Le,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await ra(lt(Le,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Ma(lt(Le,"users",t));if(e.exists()){const r=e.data().email;await Wa(lt(Le,"allowed_emails",r))}await Wa(lt(Le,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await ra(lt(Le,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,s=lt(Le,"submissions",i);(await Ma(s)).exists()?await wr(s,{"metrics.engagementTime":yie(a),"metrics.lastActive":Date.now()}):await ra(s,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=lt(Le,"users",t),n=await Ma(r);if(!n.exists())return;const i=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,i&&await Wa(lt(Le,"allowed_emails",i))):(s.isWhitelisted=!0,i&&await ra(lt(Le,"allowed_emails",i),{classType:e[0],classTypes:e})),await wr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=lt(Le,"users",t),n=await Ma(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await wr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const s=n.data().email;s&&await ra(lt(Le,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await wr(lt(Le,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Yse({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await ooe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=sn(Gt(Le,"users"),On("role","==","STUDENT"));return on(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await ra(lt(Le,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Wa(lt(Le,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/${e}_${t.name}`);return await vA(r,t),await Tx(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/html/${e}_${t.name}`);return await vA(r,t),await Tx(r)},subscribeToAnnouncements:t=>{const e=sn(Gt(Le,"announcements"),ld("createdAt","desc"),El(20));return qs("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await cd(Gt(Le,"announcements"),t)},deleteAnnouncement:async t=>{await Wa(lt(Le,"announcements",t))},dismissAnnouncement:async(t,e)=>{await wr(lt(Le,"users",t),{"gamification.dismissedAnnouncements":gie(e)})},subscribeToNotifications:(t,e)=>{const r=sn(Gt(Le,"notifications"),On("userId","==",t),ld("timestamp","desc"),El(50));return on(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await wr(lt(Le,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=sn(Gt(Le,"notifications"),On("userId","==",t),On("isRead","==",!1)),n=(await th(e)).docs.map(a=>wr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await cd(Gt(Le,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(s=>cd(Gt(Le,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await wr(lt(Le,"users",t),n)},toggleCodenameLock:async(t,e)=>{await wr(lt(Le,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await uoe({})).data,claimDailyLogin:async()=>(await doe({})).data,spinFortuneWheel:async t=>(await hoe({classType:t})).data,unlockSkill:async(t,e)=>(await foe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await poe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await moe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await goe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=sn(Gt(Le,"boss_encounters"),On("isActive","==",!0));return qs("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Gt(Le,"boss_encounters");return on(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=lt(Le,"boss_encounters",t.id);await ra(e,t)},toggleBossActive:async(t,e)=>{const r=lt(Le,"boss_encounters",t);await wr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=lt(Le,"boss_encounters",t);await Wa(e)},subscribeToBossShards:(t,e)=>{const r=Gt(Le,`boss_encounters/${t}/shards`);return on(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Gt(Le,`boss_encounters/${t}/damage_log`);return on(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await yoe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=sn(Gt(Le,"boss_quizzes"),On("isActive","==",!0));return qs("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Gt(Le,`boss_quizzes/${t}/shards`);return on(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await voe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Gt(Le,"boss_quizzes");return on(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=lt(Le,"boss_quizzes",t.id);await ra(e,t)},toggleBossQuizActive:async(t,e)=>{const r=lt(Le,"boss_quizzes",t);await wr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=lt(Le,"boss_quizzes",t);await Wa(e)},subscribeToBossQuestionBanks:t=>on(Gt(Le,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=lt(Le,"boss_question_banks",t.id);await ra(e,t)},deleteBossQuestionBank:async t=>{await Wa(lt(Le,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=sn(Gt(Le,"boss_quiz_progress"),On("quizId","==",t));return(await th(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=lt(Le,"boss_quiz_progress",`${t}_${e}`);return on(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await xoe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await boe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>on(lt(Le,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await cd(Gt(Le,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await wr(lt(Le,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await wr(lt(Le,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await wr(lt(Le,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=lt(Le,"tutoring_sessions",t),a=await Ma(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),s=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[s]:r};i[c]&&(d.status="COMPLETED"),await wr(n,d)},subscribeToAllTutoringSessions:t=>{const e=sn(Gt(Le,"tutoring_sessions"),ld("createdAt","desc"),El(100));return on(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Wa(lt(Le,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=sn(Gt(Le,"tutoring_sessions"),On("classType","==",t),El(50));return qs("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await woe({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=sn(Gt(Le,"knowledge_gates"),On("isActive","==",!0));return qs("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Soe({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=sn(Gt(Le,"seasonal_cosmetics"),On("isAvailable","==",!0));return qs("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await _oe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await wr(lt(Le,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=sn(Gt(Le,"daily_challenges"),On("date","==",e));return qs("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await Toe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=lt(Le,"users",t);await q5(Le,async i=>{var h;const s=await i.get(a);if(!s.exists())return;const c=((h=s.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Ma(lt(Le,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=sn(Gt(Le,"student_alerts"),On("isDismissed","==",!1));return qs("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[i.riskLevel]||0)-(s[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await Aoe({alertId:t})},subscribeToStudentBuckets:t=>qs("student_buckets",Gt(Le,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=sn(Gt(Le,"practice_progress"),On("userId","==",t));return on(r,n=>{const a={};n.forEach(i=>{const s=i.data();s.assignmentId&&s.completed&&(a[s.assignmentId]={completed:s.completed||!1,totalCompletions:s.totalCompletions||0,bestScore:s.bestScore??null,completedAt:s.completedAt??null})}),e(a)},()=>{})}},fH=k.createContext(null),mi=()=>{const t=k.useContext(fH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Sle={success:o.jsx(Rn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:o.jsx(Is,{className:"w-5 h-5 text-red-400 shrink-0"}),info:o.jsx(eH,{className:"w-5 h-5 text-blue-400 shrink-0"})},_le={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},Tle=({children:t})=>{const[e,r]=k.useState([]),n=k.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:s,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=k.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),i={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return o.jsxs(fH.Provider,{value:i,children:[t,o.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>o.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${_le[s.type]}`,children:[Sle[s.type],o.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),o.jsx("button",{onClick:()=>a(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Da,{className:"w-4 h-4"})})]},s.id))})]})},Ale=()=>{const[t,e]=k.useState(navigator.onLine),[r,n]=k.useState(!1);return k.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:o.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?o.jsxs(o.Fragment,{children:[o.jsx(xle,{className:"w-4 h-4"}),"Connection restored"]}):o.jsxs(o.Fragment,{children:[o.jsx(vle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var lu=Dz();const Ti=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(k.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?lu.createPortal(o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:o.jsx(Da,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),Nle="/favicon.svg";function Of(){return typeof window<"u"&&"Notification"in window}function Xv(){return Of()?Notification.permission:"unsupported"}async function pH(){return Of()?await Notification.requestPermission():"unsupported"}function Ele(t,e,r){if(!(!Of()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:Nle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function jle(t,e){const r=k.useRef(new Set),n=k.useRef(!0),a=k.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const s=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of s.slice(0,3))Ele(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);k.useEffect(()=>{if(!t||!e||!Of())return;n.current=!0,r.current=new Set;const i=Pe.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const kle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=se.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,h]=se.useState(!1),p=mi(),m=S=>{i(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;h(!0);try{await n(a),s!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Pe.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},x=({icon:S,title:w,description:E,value:I,onToggle:R})=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${I?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(S,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:w}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),o.jsx("button",{onClick:R,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${I?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${I?"translate-x-5":"translate-x-0"}`})})]});return o.jsx(Ti,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:ile,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),o.jsx(x,{icon:Boe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:To,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&o.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),o.jsx("input",{type:"text",value:s,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:ole,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),o.jsx(x,{icon:yle,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),o.jsx("div",{className:"space-y-2",children:Of()?o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(Xq,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:Xv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),o.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(S=>({...S,pushNotifications:!1}));else{const S=await pH();S==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):S==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:Xv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${Xv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):o.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),o.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsx(lH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let X5=null,mH=!0;function Cle(t){mH=t}function Ole(){if(!X5){const t=window.AudioContext||window.webkitAudioContext;X5=new t}return X5}function tr(t,e,r="sine",n=.15){if(mH)try{const a=Ole(),i=a.createOscillator(),s=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),s.gain.setValueAtTime(n,a.currentTime),s.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(s),s.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const zn={xpGain:()=>{tr(600,.1,"sine",.1),setTimeout(()=>tr(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{tr(1200,.15,"sine",.08),setTimeout(()=>tr(1500,.12,"sine",.06),100),setTimeout(()=>tr(1800,.2,"triangle",.05),180)},questAccept:()=>{tr(440,.15,"square",.06),setTimeout(()=>tr(660,.2,"square",.06),120)},questDeploy:()=>{tr(880,.12,"sawtooth",.05),setTimeout(()=>tr(660,.12,"sawtooth",.05),100),setTimeout(()=>tr(550,.2,"sawtooth",.04),200)},equip:()=>{tr(200,.05,"square",.1),setTimeout(()=>tr(400,.08,"sine",.08),50)},salvage:()=>{tr(300,.15,"sawtooth",.06),setTimeout(()=>tr(200,.2,"sawtooth",.04),100),setTimeout(()=>tr(100,.3,"sawtooth",.03),200)},craft:()=>{tr(150,.08,"square",.1),setTimeout(()=>tr(800,.2,"triangle",.08),60)},error:()=>{tr(200,.15,"square",.08),setTimeout(()=>tr(150,.2,"square",.06),120)},messageSend:()=>{tr(500,.06,"sine",.05)},notification:()=>{tr(800,.1,"sine",.06),setTimeout(()=>tr(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{tr(523,.12,"sine",.08),setTimeout(()=>tr(659,.12,"sine",.07),100),setTimeout(()=>tr(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>tr(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{tr(523,.15,"triangle",.1),setTimeout(()=>tr(784,.15,"triangle",.1),120),setTimeout(()=>tr(1047,.3,"sine",.12),240)},skillUnlock:()=>{tr(300,.1,"sawtooth",.06),setTimeout(()=>tr(600,.1,"sawtooth",.06),80),setTimeout(()=>tr(900,.15,"sine",.08),160)},bossHit:()=>{tr(100,.1,"square",.12),setTimeout(()=>tr(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{tr(1200,.08,"sine",.08),setTimeout(()=>tr(1600,.1,"sine",.06),60),setTimeout(()=>tr(2e3,.15,"triangle",.04),120)},partyJoin:()=>{tr(440,.1,"sine",.06),setTimeout(()=>tr(554,.1,"sine",.06),80),setTimeout(()=>tr(659,.15,"sine",.05),160)},chestOpen:()=>{tr(200,.15,"square",.06),setTimeout(()=>tr(300,.1,"square",.05),100),setTimeout(()=>tr(500,.1,"triangle",.06),200),setTimeout(()=>tr(800,.2,"sine",.08),350)}},Ile={QUEST_APPROVED:o.jsx(Bd,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:o.jsx(Bd,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:o.jsx(TA,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:o.jsx(Bd,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:o.jsx(sH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:o.jsx(Ioe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:o.jsx(Ox,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:o.jsx($a,{className:"w-4 h-4 text-cyan-400"})},aR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=k.useState([]),[s,c]=k.useState(!1),[d,h]=k.useState(!1),[p,m]=k.useState({}),y=k.useRef(null),x=k.useRef(null),T=k.useRef(0),S=k.useCallback(()=>{if(!y.current)return;const O=y.current.getBoundingClientRect(),M=320;if(n){const N=Math.max(8,O.left),A=N+M>window.innerWidth-8?void 0:N,j=A==null?8:void 0;m({bottom:window.innerHeight-O.top+8,left:A,right:j})}else m({top:O.bottom+8,right:Math.max(8,window.innerWidth-O.right)})},[n]);k.useEffect(()=>{s&&Of()&&Xv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[s,e==null?void 0:e.pushNotifications]),k.useEffect(()=>{const O=Pe.subscribeToNotifications(t,M=>{const N=M.filter(A=>!A.isRead).length;N>T.current&&T.current>=0&&zn.notification(),T.current=N,i(M)});return()=>O()},[t]),k.useEffect(()=>{const O=M=>{var A,j;const N=M.target;(A=y.current)!=null&&A.contains(N)||(j=x.current)!=null&&j.contains(N)||c(!1)};return s&&document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[s]),k.useEffect(()=>{if(s)return S(),window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[s,S]);const w=a.filter(O=>!O.isRead).length,E=async()=>{await Pe.markAllNotificationsRead(t)},I=async O=>{O.isRead||await Pe.markNotificationRead(O.id)},R=O=>{const M=Date.now()-new Date(O).getTime();return M<6e4?"just now":M<36e5?`${Math.floor(M/6e4)}m ago`:M<864e5?`${Math.floor(M/36e5)}h ago`:`${Math.floor(M/864e5)}d ago`},L=()=>{s||S(),c(!s)};return o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:y,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[o.jsx(W5,{className:"w-5 h-5"}),w>0&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),s&&lu.createPortal(o.jsxs("div",{ref:x,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&o.jsxs("button",{onClick:E,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[o.jsx(Poe,{className:"w-3 h-3"})," Mark all read"]})]}),d&&o.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Xq,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:async()=>{await pH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),o.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),o.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx(W5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(O=>o.jsxs("div",{onClick:()=>I(O),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${O.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[o.jsx("div",{className:"mt-0.5 shrink-0",children:Ile[O.type]||o.jsx(W5,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-xs font-bold text-white truncate",children:O.title}),o.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:O.message}),o.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:R(O.timestamp)})]}),!O.isRead&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},O.id))})]}),document.body)]})},Rle=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var T,S;const[i,s]=k.useState(""),[c,d]=k.useState(!1),[h,p]=k.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};k.useEffect(()=>{if(!m.liveBackground){s("");return}(async()=>{try{const E=ym(vm,"public/background.mp4"),I=await Tx(E);s(I)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[m.liveBackground]);const y=async w=>{await Pe.updateUserSettings(t.id,w)},x=()=>{const w=wle.filter(E=>!(E.role==="ADMIN"&&t.role!==Ka.ADMIN||E.role==="STUDENT"&&t.role!==Ka.STUDENT));return o.jsx(o.Fragment,{children:w.map(E=>o.jsxs("button",{onClick:()=>{n(E.name),p(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===E.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[o.jsx("span",{className:`${r===E.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:E.icon}),o.jsx("span",{className:"font-medium text-sm",children:E.name})]},E.name))})};return o.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[o.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&o.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:o.jsx("source",{src:i,type:"video/mp4"})},i)}),o.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),o.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:o.jsx(Nu,{className:"w-5 h-5 text-white"})}),o.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(aR,{userId:t.id,settings:m,onUpdateSettings:y}),o.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:o.jsx(ele,{className:"w-6 h-6"})})]})]}),h&&o.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),o.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),o.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:o.jsx(Da,{className:"w-6 h-6"})})]}),o.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:o.jsx(x,{})}),o.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[o.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[o.jsx(Ym,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Settings"})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[o.jsx(ZI,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),o.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:o.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[o.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[o.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:o.jsx(Nu,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),o.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Ka.ADMIN?"Admin System":"Operative Terminal"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:o.jsx(x,{})}),o.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((S=t.gamification)==null?void 0:S.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(aR,{userId:t.id,settings:m,onUpdateSettings:y,dropUp:!0}),o.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:o.jsx(Ym,{className:"w-4 h-4"})})]})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[o.jsx(ZI,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),o.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:o.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),o.jsx(kle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class Yi{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Yi(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class js{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new js(r,Yi.range(this,e))}}class st{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;a=s.start,i=s.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=st.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}st.prototype.__proto__=Error.prototype;var Mle=function(e,r){return e===void 0?r:e},Ple=/([A-Z])/g,Dle=function(e){return e.replace(Ple,"-$1").toLowerCase()},Lle={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ble=/[&><"']/g;function $le(t){return String(t).replace(Ble,e=>Lle[e])}var gH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Ule=function(e){var r=gH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},zle=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Vle=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Fr={deflt:Mle,escape:$le,hyphenate:Dle,getBaseElem:gH,isCharacterBox:Ule,protocolFromUrl:Vle},Yv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Fle(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class $7{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Yv)if(Yv.hasOwnProperty(r)){var n=Yv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Fle(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new st("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Fr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Kc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Bo[qle[this.id]]}sub(){return Bo[Hle[this.id]]}fracNum(){return Bo[Gle[this.id]]}fracDen(){return Bo[Wle[this.id]]}cramp(){return Bo[Kle[this.id]]}text(){return Bo[Qle[this.id]]}isTight(){return this.size>=2}}var U7=0,Mx=1,Th=2,ql=3,Zm=4,Xs=5,Wh=6,Mi=7,Bo=[new Kc(U7,0,!1),new Kc(Mx,0,!0),new Kc(Th,1,!1),new Kc(ql,1,!0),new Kc(Zm,2,!1),new Kc(Xs,2,!0),new Kc(Wh,3,!1),new Kc(Mi,3,!0)],qle=[Zm,Xs,Zm,Xs,Wh,Mi,Wh,Mi],Hle=[Xs,Xs,Xs,Xs,Mi,Mi,Mi,Mi],Gle=[Th,ql,Zm,Xs,Wh,Mi,Wh,Mi],Wle=[ql,ql,Xs,Xs,Mi,Mi,Mi,Mi],Kle=[Mx,Mx,ql,ql,Xs,Xs,Mi,Mi],Qle=[U7,Mx,Th,ql,Th,ql,Th,ql],qt={DISPLAY:Bo[U7],TEXT:Bo[Th],SCRIPT:Bo[Zm],SCRIPTSCRIPT:Bo[Wh]},NA=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Xle(t){for(var e=0;e<NA.length;e++)for(var r=NA[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var Zv=[];NA.forEach(t=>t.blocks.forEach(e=>Zv.push(...e)));function yH(t){for(var e=0;e<Zv.length;e+=2)if(t>=Zv[e]&&t<=Zv[e+1])return!0;return!1}var rh=80,Yle=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Zle=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Jle=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},ece=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},tce=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},rce=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},nce=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},ace=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=Yle(r,rh);break;case"sqrtSize1":a=Zle(r,rh);break;case"sqrtSize2":a=Jle(r,rh);break;case"sqrtSize3":a=ece(r,rh);break;case"sqrtSize4":a=tce(r,rh);break;case"sqrtTall":a=nce(r,rh,n)}return a},ice=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},iR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},sce=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class l1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Fo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sv={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},sR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function oce(t,e){Fo[t]=e}function z7(t,e,r){if(!Fo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Fo[e][n];if(!a&&t[0]in sR&&(n=sR[t[0]].charCodeAt(0),a=Fo[e][n]),!a&&r==="text"&&yH(n)&&(a=Fo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var Y5={};function lce(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Y5[e]){var r=Y5[e]={cssEmPerMu:sv.quad[e]/18};for(var n in sv)sv.hasOwnProperty(n)&&(r[n]=sv[n][e])}return Y5[e]}var cce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],oR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],lR=function(e,r){return r.size<2?e:cce[e-1][r.size-1]};class Il{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Il.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=oR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Il(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:lR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:oR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=lR(Il.BASESIZE,e);return this.size===r&&this.textSize===Il.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Il.BASESIZE?["sizing","reset-size"+this.size,"size"+Il.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=lce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Il.BASESIZE=6;var EA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},uce={ex:!0,em:!0,mu:!0},vH=function(e){return typeof e!="string"&&(e=e.unit),e in EA||e in uce||e==="ex"},Xn=function(e,r){var n;if(e.unit in EA)n=EA[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new st("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},yt=function(e){return+e.toFixed(4)+"em"},Eu=function(e){return e.filter(r=>r).join(" ")},xH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},bH=function(e){var r=document.createElement(e);r.className=Eu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},dce=/[\s"'>/=\x00-\x1f]/,wH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Fr.escape(Eu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Fr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Fr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(dce.test(i))throw new st("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Fr.escape(this.attributes[i])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class c1{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,xH.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return bH.call(this,"span")}toMarkup(){return wH.call(this,"span")}}class V7{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,xH.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return bH.call(this,"a")}toMarkup(){return wH.call(this,"a")}}class hce{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Fr.escape(this.src)+'"'+(' alt="'+Fr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Fr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Fr.escape(r)+'"'),e+="'/>",e}}var fce={:"",:"",:"",:""};class eo{constructor(e,r,n,a,i,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Xle(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=fce[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=yt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Eu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Fr.escape(Eu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Fr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Fr.escape(n)+'"');var i=Fr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class tc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Fr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class ju{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",iR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Fr.escape(this.alternate)+'"/>':'<path d="'+Fr.escape(iR[this.pathName])+'"/>'}}class jA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Fr.escape(this.attributes[r])+'"');return e+="/>",e}}function cR(t){if(t instanceof eo)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function pce(t){if(t instanceof c1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var mce={bin:1,close:1,inner:1,open:1,punct:1,rel:1},gce={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Mn={math:{},text:{}};function C(t,e,r,n,a,i){Mn[t][a]={font:e,group:r,replace:n},i&&n&&(Mn[t][n]=Mn[t][a])}var D="math",tt="text",G="main",le="ams",Wn="accent-token",Et="bin",$i="close",If="inner",Ft="mathord",Ea="op-token",Rs="open",k2="punct",ce="rel",dc="spacing",ve="textord";C(D,G,ce,"","\\equiv",!0);C(D,G,ce,"","\\prec",!0);C(D,G,ce,"","\\succ",!0);C(D,G,ce,"","\\sim",!0);C(D,G,ce,"","\\perp");C(D,G,ce,"","\\preceq",!0);C(D,G,ce,"","\\succeq",!0);C(D,G,ce,"","\\simeq",!0);C(D,G,ce,"","\\mid",!0);C(D,G,ce,"","\\ll",!0);C(D,G,ce,"","\\gg",!0);C(D,G,ce,"","\\asymp",!0);C(D,G,ce,"","\\parallel");C(D,G,ce,"","\\bowtie",!0);C(D,G,ce,"","\\smile",!0);C(D,G,ce,"","\\sqsubseteq",!0);C(D,G,ce,"","\\sqsupseteq",!0);C(D,G,ce,"","\\doteq",!0);C(D,G,ce,"","\\frown",!0);C(D,G,ce,"","\\ni",!0);C(D,G,ce,"","\\propto",!0);C(D,G,ce,"","\\vdash",!0);C(D,G,ce,"","\\dashv",!0);C(D,G,ce,"","\\owns");C(D,G,k2,".","\\ldotp");C(D,G,k2,"","\\cdotp");C(D,G,ve,"#","\\#");C(tt,G,ve,"#","\\#");C(D,G,ve,"&","\\&");C(tt,G,ve,"&","\\&");C(D,G,ve,"","\\aleph",!0);C(D,G,ve,"","\\forall",!0);C(D,G,ve,"","\\hbar",!0);C(D,G,ve,"","\\exists",!0);C(D,G,ve,"","\\nabla",!0);C(D,G,ve,"","\\flat",!0);C(D,G,ve,"","\\ell",!0);C(D,G,ve,"","\\natural",!0);C(D,G,ve,"","\\clubsuit",!0);C(D,G,ve,"","\\wp",!0);C(D,G,ve,"","\\sharp",!0);C(D,G,ve,"","\\diamondsuit",!0);C(D,G,ve,"","\\Re",!0);C(D,G,ve,"","\\heartsuit",!0);C(D,G,ve,"","\\Im",!0);C(D,G,ve,"","\\spadesuit",!0);C(D,G,ve,"","\\S",!0);C(tt,G,ve,"","\\S");C(D,G,ve,"","\\P",!0);C(tt,G,ve,"","\\P");C(D,G,ve,"","\\dag");C(tt,G,ve,"","\\dag");C(tt,G,ve,"","\\textdagger");C(D,G,ve,"","\\ddag");C(tt,G,ve,"","\\ddag");C(tt,G,ve,"","\\textdaggerdbl");C(D,G,$i,"","\\rmoustache",!0);C(D,G,Rs,"","\\lmoustache",!0);C(D,G,$i,"","\\rgroup",!0);C(D,G,Rs,"","\\lgroup",!0);C(D,G,Et,"","\\mp",!0);C(D,G,Et,"","\\ominus",!0);C(D,G,Et,"","\\uplus",!0);C(D,G,Et,"","\\sqcap",!0);C(D,G,Et,"","\\ast");C(D,G,Et,"","\\sqcup",!0);C(D,G,Et,"","\\bigcirc",!0);C(D,G,Et,"","\\bullet",!0);C(D,G,Et,"","\\ddagger");C(D,G,Et,"","\\wr",!0);C(D,G,Et,"","\\amalg");C(D,G,Et,"&","\\And");C(D,G,ce,"","\\longleftarrow",!0);C(D,G,ce,"","\\Leftarrow",!0);C(D,G,ce,"","\\Longleftarrow",!0);C(D,G,ce,"","\\longrightarrow",!0);C(D,G,ce,"","\\Rightarrow",!0);C(D,G,ce,"","\\Longrightarrow",!0);C(D,G,ce,"","\\leftrightarrow",!0);C(D,G,ce,"","\\longleftrightarrow",!0);C(D,G,ce,"","\\Leftrightarrow",!0);C(D,G,ce,"","\\Longleftrightarrow",!0);C(D,G,ce,"","\\mapsto",!0);C(D,G,ce,"","\\longmapsto",!0);C(D,G,ce,"","\\nearrow",!0);C(D,G,ce,"","\\hookleftarrow",!0);C(D,G,ce,"","\\hookrightarrow",!0);C(D,G,ce,"","\\searrow",!0);C(D,G,ce,"","\\leftharpoonup",!0);C(D,G,ce,"","\\rightharpoonup",!0);C(D,G,ce,"","\\swarrow",!0);C(D,G,ce,"","\\leftharpoondown",!0);C(D,G,ce,"","\\rightharpoondown",!0);C(D,G,ce,"","\\nwarrow",!0);C(D,G,ce,"","\\rightleftharpoons",!0);C(D,le,ce,"","\\nless",!0);C(D,le,ce,"","\\@nleqslant");C(D,le,ce,"","\\@nleqq");C(D,le,ce,"","\\lneq",!0);C(D,le,ce,"","\\lneqq",!0);C(D,le,ce,"","\\@lvertneqq");C(D,le,ce,"","\\lnsim",!0);C(D,le,ce,"","\\lnapprox",!0);C(D,le,ce,"","\\nprec",!0);C(D,le,ce,"","\\npreceq",!0);C(D,le,ce,"","\\precnsim",!0);C(D,le,ce,"","\\precnapprox",!0);C(D,le,ce,"","\\nsim",!0);C(D,le,ce,"","\\@nshortmid");C(D,le,ce,"","\\nmid",!0);C(D,le,ce,"","\\nvdash",!0);C(D,le,ce,"","\\nvDash",!0);C(D,le,ce,"","\\ntriangleleft");C(D,le,ce,"","\\ntrianglelefteq",!0);C(D,le,ce,"","\\subsetneq",!0);C(D,le,ce,"","\\@varsubsetneq");C(D,le,ce,"","\\subsetneqq",!0);C(D,le,ce,"","\\@varsubsetneqq");C(D,le,ce,"","\\ngtr",!0);C(D,le,ce,"","\\@ngeqslant");C(D,le,ce,"","\\@ngeqq");C(D,le,ce,"","\\gneq",!0);C(D,le,ce,"","\\gneqq",!0);C(D,le,ce,"","\\@gvertneqq");C(D,le,ce,"","\\gnsim",!0);C(D,le,ce,"","\\gnapprox",!0);C(D,le,ce,"","\\nsucc",!0);C(D,le,ce,"","\\nsucceq",!0);C(D,le,ce,"","\\succnsim",!0);C(D,le,ce,"","\\succnapprox",!0);C(D,le,ce,"","\\ncong",!0);C(D,le,ce,"","\\@nshortparallel");C(D,le,ce,"","\\nparallel",!0);C(D,le,ce,"","\\nVDash",!0);C(D,le,ce,"","\\ntriangleright");C(D,le,ce,"","\\ntrianglerighteq",!0);C(D,le,ce,"","\\@nsupseteqq");C(D,le,ce,"","\\supsetneq",!0);C(D,le,ce,"","\\@varsupsetneq");C(D,le,ce,"","\\supsetneqq",!0);C(D,le,ce,"","\\@varsupsetneqq");C(D,le,ce,"","\\nVdash",!0);C(D,le,ce,"","\\precneqq",!0);C(D,le,ce,"","\\succneqq",!0);C(D,le,ce,"","\\@nsubseteqq");C(D,le,Et,"","\\unlhd");C(D,le,Et,"","\\unrhd");C(D,le,ce,"","\\nleftarrow",!0);C(D,le,ce,"","\\nrightarrow",!0);C(D,le,ce,"","\\nLeftarrow",!0);C(D,le,ce,"","\\nRightarrow",!0);C(D,le,ce,"","\\nleftrightarrow",!0);C(D,le,ce,"","\\nLeftrightarrow",!0);C(D,le,ce,"","\\vartriangle");C(D,le,ve,"","\\hslash");C(D,le,ve,"","\\triangledown");C(D,le,ve,"","\\lozenge");C(D,le,ve,"","\\circledS");C(D,le,ve,"","\\circledR");C(tt,le,ve,"","\\circledR");C(D,le,ve,"","\\measuredangle",!0);C(D,le,ve,"","\\nexists");C(D,le,ve,"","\\mho");C(D,le,ve,"","\\Finv",!0);C(D,le,ve,"","\\Game",!0);C(D,le,ve,"","\\backprime");C(D,le,ve,"","\\blacktriangle");C(D,le,ve,"","\\blacktriangledown");C(D,le,ve,"","\\blacksquare");C(D,le,ve,"","\\blacklozenge");C(D,le,ve,"","\\bigstar");C(D,le,ve,"","\\sphericalangle",!0);C(D,le,ve,"","\\complement",!0);C(D,le,ve,"","\\eth",!0);C(tt,G,ve,"","");C(D,le,ve,"","\\diagup");C(D,le,ve,"","\\diagdown");C(D,le,ve,"","\\square");C(D,le,ve,"","\\Box");C(D,le,ve,"","\\Diamond");C(D,le,ve,"","\\yen",!0);C(tt,le,ve,"","\\yen",!0);C(D,le,ve,"","\\checkmark",!0);C(tt,le,ve,"","\\checkmark");C(D,le,ve,"","\\beth",!0);C(D,le,ve,"","\\daleth",!0);C(D,le,ve,"","\\gimel",!0);C(D,le,ve,"","\\digamma",!0);C(D,le,ve,"","\\varkappa");C(D,le,Rs,"","\\@ulcorner",!0);C(D,le,$i,"","\\@urcorner",!0);C(D,le,Rs,"","\\@llcorner",!0);C(D,le,$i,"","\\@lrcorner",!0);C(D,le,ce,"","\\leqq",!0);C(D,le,ce,"","\\leqslant",!0);C(D,le,ce,"","\\eqslantless",!0);C(D,le,ce,"","\\lesssim",!0);C(D,le,ce,"","\\lessapprox",!0);C(D,le,ce,"","\\approxeq",!0);C(D,le,Et,"","\\lessdot");C(D,le,ce,"","\\lll",!0);C(D,le,ce,"","\\lessgtr",!0);C(D,le,ce,"","\\lesseqgtr",!0);C(D,le,ce,"","\\lesseqqgtr",!0);C(D,le,ce,"","\\doteqdot");C(D,le,ce,"","\\risingdotseq",!0);C(D,le,ce,"","\\fallingdotseq",!0);C(D,le,ce,"","\\backsim",!0);C(D,le,ce,"","\\backsimeq",!0);C(D,le,ce,"","\\subseteqq",!0);C(D,le,ce,"","\\Subset",!0);C(D,le,ce,"","\\sqsubset",!0);C(D,le,ce,"","\\preccurlyeq",!0);C(D,le,ce,"","\\curlyeqprec",!0);C(D,le,ce,"","\\precsim",!0);C(D,le,ce,"","\\precapprox",!0);C(D,le,ce,"","\\vartriangleleft");C(D,le,ce,"","\\trianglelefteq");C(D,le,ce,"","\\vDash",!0);C(D,le,ce,"","\\Vvdash",!0);C(D,le,ce,"","\\smallsmile");C(D,le,ce,"","\\smallfrown");C(D,le,ce,"","\\bumpeq",!0);C(D,le,ce,"","\\Bumpeq",!0);C(D,le,ce,"","\\geqq",!0);C(D,le,ce,"","\\geqslant",!0);C(D,le,ce,"","\\eqslantgtr",!0);C(D,le,ce,"","\\gtrsim",!0);C(D,le,ce,"","\\gtrapprox",!0);C(D,le,Et,"","\\gtrdot");C(D,le,ce,"","\\ggg",!0);C(D,le,ce,"","\\gtrless",!0);C(D,le,ce,"","\\gtreqless",!0);C(D,le,ce,"","\\gtreqqless",!0);C(D,le,ce,"","\\eqcirc",!0);C(D,le,ce,"","\\circeq",!0);C(D,le,ce,"","\\triangleq",!0);C(D,le,ce,"","\\thicksim");C(D,le,ce,"","\\thickapprox");C(D,le,ce,"","\\supseteqq",!0);C(D,le,ce,"","\\Supset",!0);C(D,le,ce,"","\\sqsupset",!0);C(D,le,ce,"","\\succcurlyeq",!0);C(D,le,ce,"","\\curlyeqsucc",!0);C(D,le,ce,"","\\succsim",!0);C(D,le,ce,"","\\succapprox",!0);C(D,le,ce,"","\\vartriangleright");C(D,le,ce,"","\\trianglerighteq");C(D,le,ce,"","\\Vdash",!0);C(D,le,ce,"","\\shortmid");C(D,le,ce,"","\\shortparallel");C(D,le,ce,"","\\between",!0);C(D,le,ce,"","\\pitchfork",!0);C(D,le,ce,"","\\varpropto");C(D,le,ce,"","\\blacktriangleleft");C(D,le,ce,"","\\therefore",!0);C(D,le,ce,"","\\backepsilon");C(D,le,ce,"","\\blacktriangleright");C(D,le,ce,"","\\because",!0);C(D,le,ce,"","\\llless");C(D,le,ce,"","\\gggtr");C(D,le,Et,"","\\lhd");C(D,le,Et,"","\\rhd");C(D,le,ce,"","\\eqsim",!0);C(D,G,ce,"","\\Join");C(D,le,ce,"","\\Doteq",!0);C(D,le,Et,"","\\dotplus",!0);C(D,le,Et,"","\\smallsetminus");C(D,le,Et,"","\\Cap",!0);C(D,le,Et,"","\\Cup",!0);C(D,le,Et,"","\\doublebarwedge",!0);C(D,le,Et,"","\\boxminus",!0);C(D,le,Et,"","\\boxplus",!0);C(D,le,Et,"","\\divideontimes",!0);C(D,le,Et,"","\\ltimes",!0);C(D,le,Et,"","\\rtimes",!0);C(D,le,Et,"","\\leftthreetimes",!0);C(D,le,Et,"","\\rightthreetimes",!0);C(D,le,Et,"","\\curlywedge",!0);C(D,le,Et,"","\\curlyvee",!0);C(D,le,Et,"","\\circleddash",!0);C(D,le,Et,"","\\circledast",!0);C(D,le,Et,"","\\centerdot");C(D,le,Et,"","\\intercal",!0);C(D,le,Et,"","\\doublecap");C(D,le,Et,"","\\doublecup");C(D,le,Et,"","\\boxtimes",!0);C(D,le,ce,"","\\dashrightarrow",!0);C(D,le,ce,"","\\dashleftarrow",!0);C(D,le,ce,"","\\leftleftarrows",!0);C(D,le,ce,"","\\leftrightarrows",!0);C(D,le,ce,"","\\Lleftarrow",!0);C(D,le,ce,"","\\twoheadleftarrow",!0);C(D,le,ce,"","\\leftarrowtail",!0);C(D,le,ce,"","\\looparrowleft",!0);C(D,le,ce,"","\\leftrightharpoons",!0);C(D,le,ce,"","\\curvearrowleft",!0);C(D,le,ce,"","\\circlearrowleft",!0);C(D,le,ce,"","\\Lsh",!0);C(D,le,ce,"","\\upuparrows",!0);C(D,le,ce,"","\\upharpoonleft",!0);C(D,le,ce,"","\\downharpoonleft",!0);C(D,G,ce,"","\\origof",!0);C(D,G,ce,"","\\imageof",!0);C(D,le,ce,"","\\multimap",!0);C(D,le,ce,"","\\leftrightsquigarrow",!0);C(D,le,ce,"","\\rightrightarrows",!0);C(D,le,ce,"","\\rightleftarrows",!0);C(D,le,ce,"","\\twoheadrightarrow",!0);C(D,le,ce,"","\\rightarrowtail",!0);C(D,le,ce,"","\\looparrowright",!0);C(D,le,ce,"","\\curvearrowright",!0);C(D,le,ce,"","\\circlearrowright",!0);C(D,le,ce,"","\\Rsh",!0);C(D,le,ce,"","\\downdownarrows",!0);C(D,le,ce,"","\\upharpoonright",!0);C(D,le,ce,"","\\downharpoonright",!0);C(D,le,ce,"","\\rightsquigarrow",!0);C(D,le,ce,"","\\leadsto");C(D,le,ce,"","\\Rrightarrow",!0);C(D,le,ce,"","\\restriction");C(D,G,ve,"","`");C(D,G,ve,"$","\\$");C(tt,G,ve,"$","\\$");C(tt,G,ve,"$","\\textdollar");C(D,G,ve,"%","\\%");C(tt,G,ve,"%","\\%");C(D,G,ve,"_","\\_");C(tt,G,ve,"_","\\_");C(tt,G,ve,"_","\\textunderscore");C(D,G,ve,"","\\angle",!0);C(D,G,ve,"","\\infty",!0);C(D,G,ve,"","\\prime");C(D,G,ve,"","\\triangle");C(D,G,ve,"","\\Gamma",!0);C(D,G,ve,"","\\Delta",!0);C(D,G,ve,"","\\Theta",!0);C(D,G,ve,"","\\Lambda",!0);C(D,G,ve,"","\\Xi",!0);C(D,G,ve,"","\\Pi",!0);C(D,G,ve,"","\\Sigma",!0);C(D,G,ve,"","\\Upsilon",!0);C(D,G,ve,"","\\Phi",!0);C(D,G,ve,"","\\Psi",!0);C(D,G,ve,"","\\Omega",!0);C(D,G,ve,"A","");C(D,G,ve,"B","");C(D,G,ve,"E","");C(D,G,ve,"Z","");C(D,G,ve,"H","");C(D,G,ve,"I","");C(D,G,ve,"K","");C(D,G,ve,"M","");C(D,G,ve,"N","");C(D,G,ve,"O","");C(D,G,ve,"P","");C(D,G,ve,"T","");C(D,G,ve,"X","");C(D,G,ve,"","\\neg",!0);C(D,G,ve,"","\\lnot");C(D,G,ve,"","\\top");C(D,G,ve,"","\\bot");C(D,G,ve,"","\\emptyset");C(D,le,ve,"","\\varnothing");C(D,G,Ft,"","\\alpha",!0);C(D,G,Ft,"","\\beta",!0);C(D,G,Ft,"","\\gamma",!0);C(D,G,Ft,"","\\delta",!0);C(D,G,Ft,"","\\epsilon",!0);C(D,G,Ft,"","\\zeta",!0);C(D,G,Ft,"","\\eta",!0);C(D,G,Ft,"","\\theta",!0);C(D,G,Ft,"","\\iota",!0);C(D,G,Ft,"","\\kappa",!0);C(D,G,Ft,"","\\lambda",!0);C(D,G,Ft,"","\\mu",!0);C(D,G,Ft,"","\\nu",!0);C(D,G,Ft,"","\\xi",!0);C(D,G,Ft,"","\\omicron",!0);C(D,G,Ft,"","\\pi",!0);C(D,G,Ft,"","\\rho",!0);C(D,G,Ft,"","\\sigma",!0);C(D,G,Ft,"","\\tau",!0);C(D,G,Ft,"","\\upsilon",!0);C(D,G,Ft,"","\\phi",!0);C(D,G,Ft,"","\\chi",!0);C(D,G,Ft,"","\\psi",!0);C(D,G,Ft,"","\\omega",!0);C(D,G,Ft,"","\\varepsilon",!0);C(D,G,Ft,"","\\vartheta",!0);C(D,G,Ft,"","\\varpi",!0);C(D,G,Ft,"","\\varrho",!0);C(D,G,Ft,"","\\varsigma",!0);C(D,G,Ft,"","\\varphi",!0);C(D,G,Et,"","*",!0);C(D,G,Et,"+","+");C(D,G,Et,"","-",!0);C(D,G,Et,"","\\cdot",!0);C(D,G,Et,"","\\circ",!0);C(D,G,Et,"","\\div",!0);C(D,G,Et,"","\\pm",!0);C(D,G,Et,"","\\times",!0);C(D,G,Et,"","\\cap",!0);C(D,G,Et,"","\\cup",!0);C(D,G,Et,"","\\setminus",!0);C(D,G,Et,"","\\land");C(D,G,Et,"","\\lor");C(D,G,Et,"","\\wedge",!0);C(D,G,Et,"","\\vee",!0);C(D,G,ve,"","\\surd");C(D,G,Rs,"","\\langle",!0);C(D,G,Rs,"","\\lvert");C(D,G,Rs,"","\\lVert");C(D,G,$i,"?","?");C(D,G,$i,"!","!");C(D,G,$i,"","\\rangle",!0);C(D,G,$i,"","\\rvert");C(D,G,$i,"","\\rVert");C(D,G,ce,"=","=");C(D,G,ce,":",":");C(D,G,ce,"","\\approx",!0);C(D,G,ce,"","\\cong",!0);C(D,G,ce,"","\\ge");C(D,G,ce,"","\\geq",!0);C(D,G,ce,"","\\gets");C(D,G,ce,">","\\gt",!0);C(D,G,ce,"","\\in",!0);C(D,G,ce,"","\\@not");C(D,G,ce,"","\\subset",!0);C(D,G,ce,"","\\supset",!0);C(D,G,ce,"","\\subseteq",!0);C(D,G,ce,"","\\supseteq",!0);C(D,le,ce,"","\\nsubseteq",!0);C(D,le,ce,"","\\nsupseteq",!0);C(D,G,ce,"","\\models");C(D,G,ce,"","\\leftarrow",!0);C(D,G,ce,"","\\le");C(D,G,ce,"","\\leq",!0);C(D,G,ce,"<","\\lt",!0);C(D,G,ce,"","\\rightarrow",!0);C(D,G,ce,"","\\to");C(D,le,ce,"","\\ngeq",!0);C(D,le,ce,"","\\nleq",!0);C(D,G,dc,"","\\ ");C(D,G,dc,"","\\space");C(D,G,dc,"","\\nobreakspace");C(tt,G,dc,"","\\ ");C(tt,G,dc,""," ");C(tt,G,dc,"","\\space");C(tt,G,dc,"","\\nobreakspace");C(D,G,dc,null,"\\nobreak");C(D,G,dc,null,"\\allowbreak");C(D,G,k2,",",",");C(D,G,k2,";",";");C(D,le,Et,"","\\barwedge",!0);C(D,le,Et,"","\\veebar",!0);C(D,G,Et,"","\\odot",!0);C(D,G,Et,"","\\oplus",!0);C(D,G,Et,"","\\otimes",!0);C(D,G,ve,"","\\partial",!0);C(D,G,Et,"","\\oslash",!0);C(D,le,Et,"","\\circledcirc",!0);C(D,le,Et,"","\\boxdot",!0);C(D,G,Et,"","\\bigtriangleup");C(D,G,Et,"","\\bigtriangledown");C(D,G,Et,"","\\dagger");C(D,G,Et,"","\\diamond");C(D,G,Et,"","\\star");C(D,G,Et,"","\\triangleleft");C(D,G,Et,"","\\triangleright");C(D,G,Rs,"{","\\{");C(tt,G,ve,"{","\\{");C(tt,G,ve,"{","\\textbraceleft");C(D,G,$i,"}","\\}");C(tt,G,ve,"}","\\}");C(tt,G,ve,"}","\\textbraceright");C(D,G,Rs,"{","\\lbrace");C(D,G,$i,"}","\\rbrace");C(D,G,Rs,"[","\\lbrack",!0);C(tt,G,ve,"[","\\lbrack",!0);C(D,G,$i,"]","\\rbrack",!0);C(tt,G,ve,"]","\\rbrack",!0);C(D,G,Rs,"(","\\lparen",!0);C(D,G,$i,")","\\rparen",!0);C(tt,G,ve,"<","\\textless",!0);C(tt,G,ve,">","\\textgreater",!0);C(D,G,Rs,"","\\lfloor",!0);C(D,G,$i,"","\\rfloor",!0);C(D,G,Rs,"","\\lceil",!0);C(D,G,$i,"","\\rceil",!0);C(D,G,ve,"\\","\\backslash");C(D,G,ve,"","|");C(D,G,ve,"","\\vert");C(tt,G,ve,"|","\\textbar",!0);C(D,G,ve,"","\\|");C(D,G,ve,"","\\Vert");C(tt,G,ve,"","\\textbardbl");C(tt,G,ve,"~","\\textasciitilde");C(tt,G,ve,"\\","\\textbackslash");C(tt,G,ve,"^","\\textasciicircum");C(D,G,ce,"","\\uparrow",!0);C(D,G,ce,"","\\Uparrow",!0);C(D,G,ce,"","\\downarrow",!0);C(D,G,ce,"","\\Downarrow",!0);C(D,G,ce,"","\\updownarrow",!0);C(D,G,ce,"","\\Updownarrow",!0);C(D,G,Ea,"","\\coprod");C(D,G,Ea,"","\\bigvee");C(D,G,Ea,"","\\bigwedge");C(D,G,Ea,"","\\biguplus");C(D,G,Ea,"","\\bigcap");C(D,G,Ea,"","\\bigcup");C(D,G,Ea,"","\\int");C(D,G,Ea,"","\\intop");C(D,G,Ea,"","\\iint");C(D,G,Ea,"","\\iiint");C(D,G,Ea,"","\\prod");C(D,G,Ea,"","\\sum");C(D,G,Ea,"","\\bigotimes");C(D,G,Ea,"","\\bigoplus");C(D,G,Ea,"","\\bigodot");C(D,G,Ea,"","\\oint");C(D,G,Ea,"","\\oiint");C(D,G,Ea,"","\\oiiint");C(D,G,Ea,"","\\bigsqcup");C(D,G,Ea,"","\\smallint");C(tt,G,If,"","\\textellipsis");C(D,G,If,"","\\mathellipsis");C(tt,G,If,"","\\ldots",!0);C(D,G,If,"","\\ldots",!0);C(D,G,If,"","\\@cdots",!0);C(D,G,If,"","\\ddots",!0);C(D,G,ve,"","\\varvdots");C(tt,G,ve,"","\\varvdots");C(D,G,Wn,"","\\acute");C(D,G,Wn,"","\\grave");C(D,G,Wn,"","\\ddot");C(D,G,Wn,"~","\\tilde");C(D,G,Wn,"","\\bar");C(D,G,Wn,"","\\breve");C(D,G,Wn,"","\\check");C(D,G,Wn,"^","\\hat");C(D,G,Wn,"","\\vec");C(D,G,Wn,"","\\dot");C(D,G,Wn,"","\\mathring");C(D,G,Ft,"","\\@imath");C(D,G,Ft,"","\\@jmath");C(D,G,ve,"","");C(D,G,ve,"","");C(tt,G,ve,"","\\i",!0);C(tt,G,ve,"","\\j",!0);C(tt,G,ve,"","\\ss",!0);C(tt,G,ve,"","\\ae",!0);C(tt,G,ve,"","\\oe",!0);C(tt,G,ve,"","\\o",!0);C(tt,G,ve,"","\\AE",!0);C(tt,G,ve,"","\\OE",!0);C(tt,G,ve,"","\\O",!0);C(tt,G,Wn,"","\\'");C(tt,G,Wn,"","\\`");C(tt,G,Wn,"","\\^");C(tt,G,Wn,"","\\~");C(tt,G,Wn,"","\\=");C(tt,G,Wn,"","\\u");C(tt,G,Wn,"","\\.");C(tt,G,Wn,"","\\c");C(tt,G,Wn,"","\\r");C(tt,G,Wn,"","\\v");C(tt,G,Wn,"",'\\"');C(tt,G,Wn,"","\\H");C(tt,G,Wn,"","\\textcircled");var SH={"--":!0,"---":!0,"``":!0,"''":!0};C(tt,G,ve,"","--",!0);C(tt,G,ve,"","\\textendash");C(tt,G,ve,"","---",!0);C(tt,G,ve,"","\\textemdash");C(tt,G,ve,"","`",!0);C(tt,G,ve,"","\\textquoteleft");C(tt,G,ve,"","'",!0);C(tt,G,ve,"","\\textquoteright");C(tt,G,ve,"","``",!0);C(tt,G,ve,"","\\textquotedblleft");C(tt,G,ve,"","''",!0);C(tt,G,ve,"","\\textquotedblright");C(D,G,ve,"","\\degree",!0);C(tt,G,ve,"","\\degree");C(tt,G,ve,"","\\textdegree",!0);C(D,G,ve,"","\\pounds");C(D,G,ve,"","\\mathsterling",!0);C(tt,G,ve,"","\\pounds");C(tt,G,ve,"","\\textsterling",!0);C(D,le,ve,"","\\maltese");C(tt,le,ve,"","\\maltese");var uR='0123456789/@."';for(var Z5=0;Z5<uR.length;Z5++){var dR=uR.charAt(Z5);C(D,G,ve,dR,dR)}var hR='0123456789!@*()-=+";:?/.,';for(var J5=0;J5<hR.length;J5++){var fR=hR.charAt(J5);C(tt,G,ve,fR,fR)}var Px="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var e3=0;e3<Px.length;e3++){var ov=Px.charAt(e3);C(D,G,Ft,ov,ov),C(tt,G,ve,ov,ov)}C(D,le,ve,"C","");C(tt,le,ve,"C","");C(D,le,ve,"H","");C(tt,le,ve,"H","");C(D,le,ve,"N","");C(tt,le,ve,"N","");C(D,le,ve,"P","");C(tt,le,ve,"P","");C(D,le,ve,"Q","");C(tt,le,ve,"Q","");C(D,le,ve,"R","");C(tt,le,ve,"R","");C(D,le,ve,"Z","");C(tt,le,ve,"Z","");C(D,G,Ft,"h","");C(tt,G,Ft,"h","");var Zt="";for(var Ci=0;Ci<Px.length;Ci++){var ta=Px.charAt(Ci);Zt=String.fromCharCode(55349,56320+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56372+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56424+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56580+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56684+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56736+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56788+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56840+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56944+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Ci<26&&(Zt=String.fromCharCode(55349,56632+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt),Zt=String.fromCharCode(55349,56476+Ci),C(D,G,Ft,ta,Zt),C(tt,G,ve,ta,Zt))}Zt="";C(D,G,Ft,"k",Zt);C(tt,G,ve,"k",Zt);for(var ud=0;ud<10;ud++){var Qc=ud.toString();Zt=String.fromCharCode(55349,57294+ud),C(D,G,Ft,Qc,Zt),C(tt,G,ve,Qc,Zt),Zt=String.fromCharCode(55349,57314+ud),C(D,G,Ft,Qc,Zt),C(tt,G,ve,Qc,Zt),Zt=String.fromCharCode(55349,57324+ud),C(D,G,Ft,Qc,Zt),C(tt,G,ve,Qc,Zt),Zt=String.fromCharCode(55349,57334+ud),C(D,G,Ft,Qc,Zt),C(tt,G,ve,Qc,Zt)}var kA="";for(var t3=0;t3<kA.length;t3++){var lv=kA.charAt(t3);C(D,G,Ft,lv,lv),C(tt,G,ve,lv,lv)}var cv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],pR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],yce=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,s=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[cv[c][2],cv[c][s]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[pR[d][2],pR[d][s]]}else{if(i===120485||i===120486)return[cv[0][2],cv[0][s]];if(120486<i&&i<120782)return["",""];throw new st("Unsupported character: "+e)}},C2=function(e,r,n){return Mn[n][e]&&Mn[n][e].replace&&(e=Mn[n][e].replace),{value:e,metrics:z7(e,r,n)}},mo=function(e,r,n,a,i){var s=C2(e,r,n),c=s.metrics;e=s.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new eo(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new eo(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},vce=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&C2(e,"Main-Bold",r).metrics?mo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Mn[r][e].font==="main"?mo(e,"Main-Regular",r,n,a):mo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},xce=function(e,r,n,a,i){return i!=="textord"&&C2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},bce=function(e,r,n){var a=e.mode,i=e.text,s=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=yce(i,a)),h.length>0)return mo(i,h,a,r,s.concat(p));if(d){var m,y;if(d==="boldsymbol"){var x=xce(i,a,r,s,n);m=x.fontName,y=[x.fontClass]}else c?(m=AH[d].fontName,y=[d]):(m=uv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(C2(i,m,a).metrics)return mo(i,m,a,r,s.concat(y));if(SH.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<i.length;S++)T.push(mo(i[S],m,a,r,s.concat(y)));return TH(T)}}if(n==="mathord")return mo(i,"Math-Italic",a,r,s.concat(["mathnormal"]));if(n==="textord"){var w=Mn[a][i]&&Mn[a][i].font;if(w==="ams"){var E=uv("amsrm",r.fontWeight,r.fontShape);return mo(i,E,a,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var I=uv("textrm",r.fontWeight,r.fontShape);return mo(i,I,a,r,s.concat(r.fontWeight,r.fontShape))}else{var R=uv(w,r.fontWeight,r.fontShape);return mo(i,R,a,r,s.concat(R,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},wce=(t,e)=>{if(Eu(t.classes)!==Eu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Sce=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof eo&&n instanceof eo&&wce(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},F7=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>a&&(a=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Qi=function(e,r,n,a){var i=new c1(e,r,n,a);return F7(i),i},_H=(t,e,r,n)=>new c1(t,e,r,n),_ce=function(e,r,n){var a=Qi([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=yt(a.height),a.maxFontSize=1,a},Tce=function(e,r,n,a){var i=new V7(e,r,n,a);return F7(i),i},TH=function(e){var r=new l1(e);return F7(r),r},Ace=function(e,r){return e instanceof l1?Qi([],[e],r):e},Nce=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,s=1;s<r.length;s++){var c=-r[s].shift-i-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Ece=function(e,r){for(var{children:n,depth:a}=Nce(e),i=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Qi(["pstrut"],[]);h.style.height=yt(i);for(var p=[],m=a,y=a,x=a,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")x+=S.size;else{var w=S.elem,E=S.wrapperClasses||[],I=S.wrapperStyle||{},R=Qi(E,[h,w],void 0,I);R.style.top=yt(-i-x-w.depth),S.marginLeft&&(R.style.marginLeft=S.marginLeft),S.marginRight&&(R.style.marginRight=S.marginRight),p.push(R),x+=w.height+w.depth}m=Math.min(m,x),y=Math.max(y,x)}var L=Qi(["vlist"],p);L.style.height=yt(y);var O;if(m<0){var M=Qi([],[]),N=Qi(["vlist"],[M]);N.style.height=yt(-m);var A=Qi(["vlist-s"],[new eo("")]);O=[Qi(["vlist-r"],[L,A]),Qi(["vlist-r"],[N])]}else O=[Qi(["vlist-r"],[L])];var j=Qi(["vlist-t"],O);return O.length===2&&j.classes.push("vlist-t2"),j.height=y,j.depth=-m,j},jce=(t,e)=>{var r=Qi(["mspace"],[],e),n=Xn(t,e);return r.style.marginRight=yt(n),r},uv=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},AH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},NH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},kce=function(e,r){var[n,a,i]=NH[e],s=new ju(n),c=new tc([s],{width:yt(a),height:yt(i),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=_H(["overlay"],[c],r);return d.height=i,d.style.height=yt(i),d.style.width=yt(a),d},Ce={fontMap:AH,makeSymbol:mo,mathsym:vce,makeSpan:Qi,makeSvgSpan:_H,makeLineSpan:_ce,makeAnchor:Tce,makeFragment:TH,wrapFragment:Ace,makeVList:Ece,makeOrd:bce,makeGlue:jce,staticSvg:kce,svgData:NH,tryCombineChars:Sce},Qn={number:3,unit:"mu"},dd={number:4,unit:"mu"},jl={number:5,unit:"mu"},Cce={mord:{mop:Qn,mbin:dd,mrel:jl,minner:Qn},mop:{mord:Qn,mop:Qn,mrel:jl,minner:Qn},mbin:{mord:dd,mop:dd,mopen:dd,minner:dd},mrel:{mord:jl,mop:jl,mopen:jl,minner:jl},mopen:{},mclose:{mop:Qn,mbin:dd,mrel:jl,minner:Qn},mpunct:{mord:Qn,mop:Qn,mrel:jl,mopen:Qn,mclose:Qn,mpunct:Qn,minner:Qn},minner:{mord:Qn,mop:Qn,mbin:dd,mrel:jl,mopen:Qn,mpunct:Qn,minner:Qn}},Oce={mord:{mop:Qn},mop:{mord:Qn,mop:Qn},mbin:{},mrel:{},mopen:{},mclose:{mop:Qn},mpunct:{},minner:{mop:Qn}},EH={},Dx={},Lx={};function Tt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)EH[r[d]]=c;e&&(i&&(Dx[e]=i),s&&(Lx[e]=s))}function h0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;Tt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Bx=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},fa=function(e){return e.type==="ordgroup"?e.body:[e]},rc=Ce.makeSpan,Ice=["leftmost","mbin","mopen","mrel","mop","mpunct"],Rce=["rightmost","mrel","mclose","mpunct"],Mce={display:qt.DISPLAY,text:qt.TEXT,script:qt.SCRIPT,scriptscript:qt.SCRIPTSCRIPT},Pce={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ua=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],s=0;s<e.length;s++){var c=Br(e[s],r);if(c instanceof l1){var d=c.children;i.push(...d)}else i.push(c)}if(Ce.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Mce[p.style]))}var m=rc([a[0]||"leftmost"],[],r),y=rc([a[1]||"rightmost"],[],r),x=n==="root";return mR(i,(T,S)=>{var w=S.classes[0],E=T.classes[0];w==="mbin"&&Rce.includes(E)?S.classes[0]="mord":E==="mbin"&&Ice.includes(w)&&(T.classes[0]="mord")},{node:m},y,x),mR(i,(T,S)=>{var w=CA(S),E=CA(T),I=w&&E?T.hasClass("mtight")?Oce[w][E]:Cce[w][E]:null;if(I)return Ce.makeGlue(I,h)},{node:m},y,x),i},mR=function t(e,r,n,a,i){a&&e.push(a);for(var s=0;s<e.length;s++){var c=e[s],d=jH(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),s++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=rc(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),s++})(s)}a&&e.pop()},jH=function(e){return e instanceof l1||e instanceof V7||e instanceof c1&&e.hasClass("enclosing")?e:null},Dce=function t(e,r){var n=jH(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},CA=function(e,r){return e?(r&&(e=Dce(e,r)),Pce[e.classes[0]]||null):null},Jm=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return rc(r.concat(n))},Br=function(e,r,n){if(!e)return rc();if(Dx[e.type]){var a=Dx[e.type](e,r);if(n&&r.size!==n.size){a=rc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new st("Got group of unknown type: '"+e.type+"'")};function dv(t,e){var r=rc(["base"],t,e),n=rc(["strut"]);return n.style.height=yt(r.height+r.depth),r.depth&&(n.style.verticalAlign=yt(-r.depth)),r.children.unshift(n),r}function OA(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Ua(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(dv(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(i.push(dv(s,e)),s=[]),i.push(n[c]));s.length>0&&i.push(dv(s,e));var h;r?(h=dv(Ua(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=rc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=yt(p.height+p.depth),p.depth&&(m.style.verticalAlign=yt(-p.depth))}return p}function kH(t){return new l1(t)}class Ss{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Eu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof qo&&this.children[n+1]instanceof qo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof qo;)a+=this.children[++n].toText();e.appendChild(new qo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Fr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Fr.escape(Eu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class qo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Fr.escape(this.toText())}toText(){return this.text}}class Lce{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",yt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+yt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var at={MathNode:Ss,TextNode:qo,SpaceNode:Lce,newDocumentFragment:kH},to=function(e,r,n){return Mn[r][e]&&Mn[r][e].replace&&e.charCodeAt(0)!==55349&&!(SH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Mn[r][e].replace),new at.TextNode(e)},q7=function(e){return e.length===1?e[0]:new at.MathNode("mrow",e)},H7=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Mn[a][i]&&Mn[a][i].replace&&(i=Mn[a][i].replace);var s=Ce.fontMap[n].fontName;return z7(i,s,a)?Ce.fontMap[n].variant:null};function r3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof qo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof qo&&r.text===","}else return!1}var is=function(e,r,n){if(e.length===1){var a=jn(e[0],r);return n&&a instanceof Ss&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],s,c=0;c<e.length;c++){var d=jn(e[c],r);if(d instanceof Ss&&s instanceof Ss){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(r3(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&r3(s))d.children=[...s.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||r3(s))){var h=d.children[0];h instanceof Ss&&h.type==="mn"&&(h.children=[...s.children,...h.children],i.pop())}else if(s.type==="mi"&&s.children.length===1){var p=s.children[0];if(p instanceof qo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof qo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),s=d}return i},ku=function(e,r,n){return q7(is(e,r,n))},jn=function(e,r){if(!e)return new at.MathNode("mrow");if(Lx[e.type]){var n=Lx[e.type](e,r);return n}else throw new st("Got group of unknown type: '"+e.type+"'")};function gR(t,e,r,n,a){var i=is(t,r),s;i.length===1&&i[0]instanceof Ss&&["mrow","mtable"].includes(i[0].type)?s=i[0]:s=new at.MathNode("mrow",i);var c=new at.MathNode("annotation",[new at.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new at.MathNode("semantics",[s,c]),h=new at.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ce.makeSpan([p],[h])}var CH=function(e){return new Il({style:e.displayMode?qt.DISPLAY:qt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},OH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ce.makeSpan(n,[e])}return e},Bce=function(e,r,n){var a=CH(n),i;if(n.output==="mathml")return gR(e,r,a,n.displayMode,!0);if(n.output==="html"){var s=OA(e,a);i=Ce.makeSpan(["katex"],[s])}else{var c=gR(e,r,a,n.displayMode,!1),d=OA(e,a);i=Ce.makeSpan(["katex"],[c,d])}return OH(i,n)},$ce=function(e,r,n){var a=CH(n),i=OA(e,a),s=Ce.makeSpan(["katex"],[i]);return OH(s,n)},Uce={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},zce=function(e){var r=new at.MathNode("mo",[new at.TextNode(Uce[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Vce={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Fce=function(e){return e.type==="ordgroup"?e.body.length:1},qce=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=Fce(h.base),m,y,x;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,x=.42,y=d+"4"):(m=312,c=2340,x=.34,y="tilde4");else{var T=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],m=[0,239,300,360,420][T],x=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],m=[0,260,286,306,312][T],x=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new ju(y),w=new tc([S],{width:"100%",height:yt(x),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ce.makeSvgSpan([],[w],r),minWidth:0,height:x}}else{var E=[],I=Vce[d],[R,L,O]=I,M=O/1e3,N=R.length,A,j;if(N===1){var z=I[3];A=["hide-tail"],j=[z]}else if(N===2)A=["halfarrow-left","halfarrow-right"],j=["xMinYMin","xMaxYMin"];else if(N===3)A=["brace-left","brace-center","brace-right"],j=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+N+" children.");for(var B=0;B<N;B++){var F=new ju(R[B]),U=new tc([F],{width:"400em",height:yt(M),viewBox:"0 0 "+c+" "+O,preserveAspectRatio:j[B]+" slice"}),X=Ce.makeSvgSpan([A[B]],[U],r);if(N===1)return{span:X,minWidth:L,height:M};X.style.height=yt(M),E.push(X)}return{span:Ce.makeSpan(["stretchy"],E,r),minWidth:L,height:M}}}var{span:a,minWidth:i,height:s}=n();return a.height=s,a.style.height=yt(s),i>0&&(a.style.minWidth=yt(i)),a},Hce=function(e,r,n,a,i){var s,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(s=Ce.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(s.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new jA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new jA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new tc(h,{width:"100%",height:yt(c)});s=Ce.makeSvgSpan([],[p],i)}return s.height=c,s.style.height=yt(c),s},nc={encloseSpan:Hce,mathMLnode:zce,svgSpan:qce};function pr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function G7(t){var e=O2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function O2(t){return t&&(t.type==="atom"||gce.hasOwnProperty(t.type))?t:null}var W7=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=pr(t.base,"accent"),r=n.base,t.base=r,a=pce(Br(t,e)),t.base=n):(n=pr(t,"accent"),r=n.base);var i=Br(r,e.havingCrampedStyle()),s=n.isShifty&&Fr.isCharacterBox(r),c=0;if(s){var d=Fr.getBaseElem(r),h=Br(d,e.havingCrampedStyle());c=cR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=nc.svgSpan(n,e),y=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+yt(2*c)+")",marginLeft:yt(2*c)}:void 0}]},e);else{var x,T;n.label==="\\vec"?(x=Ce.staticSvg("vec",e),T=Ce.svgData.vec[1]):(x=Ce.makeOrd({mode:n.mode,text:n.label},e,"textord"),x=cR(x),x.italic=0,T=x.width,p&&(m+=x.depth)),y=Ce.makeSpan(["accent-body"],[x]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),m=i.height);var w=c;S||(w-=T/2),y.style.left=yt(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var E=Ce.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=E,a.height=Math.max(E.height,a.height),a.classes[0]="mord",a):E},IH=(t,e)=>{var r=t.isStretchy?nc.mathMLnode(t.label):new at.MathNode("mo",[to(t.label,t.mode)]),n=new at.MathNode("mover",[jn(t.base,e),r]);return n.setAttribute("accent","true"),n},Gce=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Tt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Bx(e[0]),n=!Gce.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:W7,mathmlBuilder:IH});Tt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:W7,mathmlBuilder:IH});Tt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Br(t.base,e),n=nc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=nc.mathMLnode(t.label),n=new at.MathNode("munder",[jn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var hv=t=>{var e=new at.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Tt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ce.wrapFragment(Br(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=Ce.wrapFragment(Br(t.below,n,e),e),s.classes.push(i+"-arrow-pad"));var c=nc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(s){var m=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:m}]},e)}else p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ce.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=nc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=hv(jn(t.body,e));if(t.below){var i=hv(jn(t.below,e));n=new at.MathNode("munderover",[r,i,a])}else n=new at.MathNode("mover",[r,a])}else if(t.below){var s=hv(jn(t.below,e));n=new at.MathNode("munder",[r,s])}else n=hv(),n=new at.MathNode("mover",[r,n]);return n}});var Wce=Ce.makeSpan;function RH(t,e){var r=Ua(t.body,e,!0);return Wce([t.mclass],r,e)}function MH(t,e){var r,n=is(t.body,e);return t.mclass==="minner"?r=new at.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new at.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new at.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Tt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:fa(a),isCharacterBox:Fr.isCharacterBox(a)}},htmlBuilder:RH,mathmlBuilder:MH});var I2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Tt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:I2(e[0]),body:fa(e[1]),isCharacterBox:Fr.isCharacterBox(e[1])}}});Tt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],s;n!=="\\stackrel"?s=I2(a):s="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:fa(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:Fr.isCharacterBox(d)}},htmlBuilder:RH,mathmlBuilder:MH});Tt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:I2(e[0]),body:fa(e[0])}},htmlBuilder(t,e){var r=Ua(t.body,e,!0),n=Ce.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=is(t.body,e),n=new at.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Kce={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},yR=()=>({type:"styling",body:[],mode:"math",style:"display"}),vR=t=>t.type==="textord"&&t.text==="@",Qce=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Xce(t,e,r){var n=Kce[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Yce(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new st("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var s=e[i],c=yR(),d=0;d<s.length;d++)if(!vR(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var h=G7(s[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,x=d+1;x<s.length;x++){if(Qce(s[x],h)){y=!1,d=x;break}if(vR(s[x]))throw new st("Missing a "+h+" character to complete a CD arrow.",s[x]);p[m].body.push(s[x])}if(y)throw new st("Missing a "+h+" character to complete a CD arrow.",s[d])}else throw new st('Expected one of "<>AV=|." after @',s[d]);var T=Xce(h,p,t),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),c=yR()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}Tt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ce.wrapFragment(Br(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=yt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new at.MathNode("mrow",[jn(t.label,e)]);return r=new at.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new at.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Tt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ce.wrapFragment(Br(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new at.MathNode("mrow",[jn(t.fragment,e)])}});Tt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=pr(e[0],"ordgroup"),a=n.body,i="",s=0;s<a.length;s++){var c=pr(a[s],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new st("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new st("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var PH=(t,e)=>{var r=Ua(t.body,e.withColor(t.color),!1);return Ce.makeFragment(r)},DH=(t,e)=>{var r=is(t.body,e.withColor(t.color)),n=new at.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};Tt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=pr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:fa(a)}},htmlBuilder:PH,mathmlBuilder:DH});Tt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=pr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:PH,mathmlBuilder:DH});Tt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&pr(a,"size").value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=yt(Xn(t.size,e)))),r},mathmlBuilder(t,e){var r=new at.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",yt(Xn(t.size,e)))),r}});var IA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},LH=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new st("Expected a control sequence",t);return e},Zce=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},BH=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};Tt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(IA[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=IA[n.text]),pr(e.parseFunction(),"internal");throw new st("Invalid token after macro prefix",n)}});Tt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new st("Expected a control sequence",n);for(var i=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new st('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new st('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new st("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===IA[r]),{type:"internal",mode:e.mode}}});Tt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=LH(e.gullet.popToken());e.gullet.consumeSpaces();var a=Zce(e);return BH(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});Tt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=LH(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return BH(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var im=function(e,r,n){var a=Mn.math[e]&&Mn.math[e].replace,i=z7(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},K7=function(e,r,n,a){var i=n.havingBaseStyle(r),s=Ce.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=i.sizeMultiplier,s},$H=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=yt(i),e.height-=i,e.depth+=i},Jce=function(e,r,n,a,i,s){var c=Ce.makeSymbol(e,"Main-Regular",i,a),d=K7(c,r,a,s);return n&&$H(d,a,r),d},eue=function(e,r,n,a){return Ce.makeSymbol(e,"Size"+r+"-Regular",n,a)},UH=function(e,r,n,a,i,s){var c=eue(e,r,i,a),d=K7(Ce.makeSpan(["delimsizing","size"+r],[c],a),qt.TEXT,a,s);return n&&$H(d,a,qt.TEXT),d},n3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ce.makeSpan(["delimsizinginner",a],[Ce.makeSpan([],[Ce.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},a3=function(e,r,n){var a=Fo["Size4-Regular"][e.charCodeAt(0)]?Fo["Size4-Regular"][e.charCodeAt(0)][4]:Fo["Size1-Regular"][e.charCodeAt(0)][4],i=new ju("inner",ice(e,Math.round(1e3*r))),s=new tc([i],{width:yt(a),height:yt(r),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ce.makeSvgSpan([],[s],n);return c.height=r,c.style.height=yt(r),c.style.width=yt(a),{type:"elem",elem:c}},RA=.008,fv={type:"kern",size:-1*RA},tue=["|","\\lvert","\\rvert","\\vert"],rue=["\\|","\\lVert","\\rVert","\\Vert"],zH=function(e,r,n,a,i,s){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var x="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):tue.includes(e)?(h="",m="vert",y=333):rue.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",x="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",x="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",x="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",x="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",x="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",x="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",x="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",x="Size4-Regular");var T=im(c,x,i),S=T.height+T.depth,w=im(h,x,i),E=w.height+w.depth,I=im(p,x,i),R=I.height+I.depth,L=0,O=1;if(d!==null){var M=im(d,x,i);L=M.height+M.depth,O=2}var N=S+R+L,A=Math.max(0,Math.ceil((r-N)/(O*E))),j=N+A*O*E,z=a.fontMetrics().axisHeight;n&&(z*=a.sizeMultiplier);var B=j/2-z,F=[];if(m.length>0){var U=j-S-R,X=Math.round(j*1e3),W=sce(m,Math.round(U*1e3)),H=new ju(m,W),Z=(y/1e3).toFixed(3)+"em",ie=(X/1e3).toFixed(3)+"em",fe=new tc([H],{width:Z,height:ie,viewBox:"0 0 "+y+" "+X}),me=Ce.makeSvgSpan([],[fe],a);me.height=X/1e3,me.style.width=Z,me.style.height=ie,F.push({type:"elem",elem:me})}else{if(F.push(n3(p,x,i)),F.push(fv),d===null){var K=j-S-R+2*RA;F.push(a3(h,K,a))}else{var te=(j-S-R-L)/2+2*RA;F.push(a3(h,te,a)),F.push(fv),F.push(n3(d,x,i)),F.push(fv),F.push(a3(h,te,a))}F.push(fv),F.push(n3(c,x,i))}var re=a.havingBaseStyle(qt.TEXT),Ne=Ce.makeVList({positionType:"bottom",positionData:B,children:F},re);return K7(Ce.makeSpan(["delimsizing","mult"],[Ne],re),qt.TEXT,a,s)},i3=80,s3=.08,o3=function(e,r,n,a,i){var s=ace(e,a,n),c=new ju(e,s),d=new tc([c],{width:"400em",height:yt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ce.makeSvgSpan(["hide-tail"],[d],i)},nue=function(e,r){var n=r.havingBaseSizing(),a=HH("\\surd",e*n.sizeMultiplier,qH,n),i=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*s+i3,e<1?i=1:e<1.4&&(i=.7),d=(1+s+s3)/i,h=(1+s)/i,c=o3("sqrtMain",d,p,s,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+i3)*xm[a.size],h=(xm[a.size]+s)/i,d=(xm[a.size]+s+s3)/i,c=o3("sqrtSize"+a.size,d,p,s,r),c.style.minWidth="1.02em",m=1/i):(d=e+s+s3,h=e+s,p=Math.floor(1e3*e+s)+i3,c=o3("sqrtTall",d,p,s,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=yt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*i}},VH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],aue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],FH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],xm=[0,1.2,1.8,2.4,3],iue=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),VH.includes(e)||FH.includes(e))return UH(e,r,!1,n,a,i);if(aue.includes(e))return zH(e,xm[r],!1,n,a,i);throw new st("Illegal delimiter: '"+e+"'")},sue=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],oue=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"stack"}],qH=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],lue=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},HH=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),s=i;s<n.length&&n[s].type!=="stack";s++){var c=im(e,lue(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var h=a.havingBaseStyle(n[s].style);d*=h.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},GH=function(e,r,n,a,i,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;FH.includes(e)?c=sue:VH.includes(e)?c=qH:c=oue;var d=HH(e,r,c,a);return d.type==="small"?Jce(e,d.style,n,a,i,s):d.type==="large"?UH(e,d.size,n,a,i,s):zH(e,r,n,a,i,s)},cue=function(e,r,n,a,i,s){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return GH(e,m,!0,a,i,s)},Hl={sqrtImage:nue,sizedDelim:iue,sizeToMaxHeight:xm,customSizedDelim:GH,leftRightDelim:cue},xR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},uue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function R2(t,e){var r=O2(t);if(r&&uue.includes(r.text))return r;throw r?new st("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new st("Invalid delimiter type '"+t.type+"'",t)}Tt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=R2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:xR[t.funcName].size,mclass:xR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ce.makeSpan([t.mclass]):Hl.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(to(t.delim,t.mode));var r=new at.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=yt(Hl.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function bR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Tt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new st("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:R2(e[0],t).text,color:r}}});Tt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=R2(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=pr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{bR(t);for(var r=Ua(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,s=0;s<r.length;s++)r[s].isMiddle?i=!0:(n=Math.max(r[s].height,n),a=Math.max(r[s].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=Jm(e,["mopen"]):c=Hl.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Hl.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=Jm(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Hl.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(m),Ce.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{bR(t);var r=is(t.body,e);if(t.left!=="."){var n=new at.MathNode("mo",[to(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new at.MathNode("mo",[to(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return q7(r)}});Tt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=R2(e[0],t);if(!t.parser.leftrightDepth)throw new st("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Jm(e,[]);else{r=Hl.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?to("|","text"):to(t.delim,t.mode),n=new at.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var Q7=(t,e)=>{var r=Ce.wrapFragment(Br(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,s=0,c=Fr.isCharacterBox(t.body);if(n==="sout")i=Ce.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Xn({number:.6,unit:"pt"},e),h=Xn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=yt(m/2+d);var y=Math.floor(1e3*m*a),x=rce(y),T=new tc([new ju("phase",x)],{width:"400em",height:yt(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=Ce.makeSvgSpan(["hide-tail"],[T],e),i.style.height=yt(m),s=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),w=S):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*E,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),i=nc.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=yt(E)):n==="angl"&&E!==.049&&(i.style.borderTopWidth=yt(E),i.style.borderRightWidth=yt(E)),s=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var I;if(t.backgroundColor)I=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var R=/cancel|phase/.test(n)?["svg-align"]:[];I=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:s,wrapperClasses:R}]},e)}return/cancel/.test(n)&&(I.height=r.height,I.depth=r.depth),/cancel/.test(n)&&!c?Ce.makeSpan(["mord","cancel-lap"],[I],e):Ce.makeSpan(["mord"],[I],e)},X7=(t,e)=>{var r=0,n=new at.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[jn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};Tt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=pr(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:s}},htmlBuilder:Q7,mathmlBuilder:X7});Tt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=pr(e[0],"color-token").color,s=pr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:s,borderColor:i,body:c}},htmlBuilder:Q7,mathmlBuilder:X7});Tt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});Tt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:Q7,mathmlBuilder:X7});Tt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var WH={};function tl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)WH[r[d]]=c;i&&(Dx[e]=i),s&&(Lx[e]=s)}var KH={};function Y(t,e){KH[t]=e}function wR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var M2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new st("{"+t.envName+"} can be used only in display mode.")};function Y7(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Mu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var x=t.gullet.expandMacroAsText("\\arraystretch");if(x==null)s=1;else if(s=parseFloat(x),!s||s<0)throw new st("Invalid \\arraystretch: "+x)}t.gullet.beginGroup();var T=[],S=[T],w=[],E=[],I=d!=null?[]:void 0;function R(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){I&&(t.gullet.macros.get("\\df@tag")?(I.push(t.subparse([new js("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(R(),E.push(wR(t));;){var O=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),O={type:"ordgroup",mode:t.mode,body:O},r&&(O={type:"styling",mode:t.mode,style:r,body:[O]}),T.push(O);var M=t.fetch().text;if(M==="&"){if(m&&T.length===m){if(h||c)throw new st("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(M==="\\end"){L(),T.length===1&&O.type==="styling"&&O.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),E.length<S.length+1&&E.push([]);break}else if(M==="\\\\"){t.consume();var N=void 0;t.gullet.future().text!==" "&&(N=t.parseSizeGroup(!0)),w.push(N?N.value:null),L(),E.push(wR(t)),T=[],S.push(T),R()}else throw new st("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:s,body:S,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:I,leqno:y}}function Z7(t){return t.slice(0,1)==="d"?"display":"text"}var rl=function(e,r){var n,a,i=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var x=r.havingStyle(qt.SCRIPT).sizeMultiplier;y=.2778*(x/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?Xn({number:3,unit:"ex"},r):12*m,S=3*m,w=e.arraystretch*T,E=.7*w,I=.3*w,R=0;function L(Ee){for(var Ve=0;Ve<Ee.length;++Ve)Ve>0&&(R+=.25),h.push({pos:R,isDashed:Ee[Ve]})}for(L(s[0]),n=0;n<e.body.length;++n){var O=e.body[n],M=E,N=I;c<O.length&&(c=O.length);var A=new Array(O.length);for(a=0;a<O.length;++a){var j=Br(O[a],r);N<j.depth&&(N=j.depth),M<j.height&&(M=j.height),A[a]=j}var z=e.rowGaps[n],B=0;z&&(B=Xn(z,r),B>0&&(B+=I,N<B&&(N=B),B=0)),e.addJot&&(N+=S),A.height=M,A.depth=N,R+=M,A.pos=R,R+=N+B,d[n]=A,L(s[n+1])}var F=R/2+r.fontMetrics().axisHeight,U=e.cols||[],X=[],W,H,Z=[];if(e.tags&&e.tags.some(Ee=>Ee))for(n=0;n<i;++n){var ie=d[n],fe=ie.pos-F,me=e.tags[n],K=void 0;me===!0?K=Ce.makeSpan(["eqn-num"],[],r):me===!1?K=Ce.makeSpan([],[],r):K=Ce.makeSpan([],Ua(me,r,!0),r),K.depth=ie.depth,K.height=ie.height,Z.push({type:"elem",elem:K,shift:fe})}for(a=0,H=0;a<c||H<U.length;++a,++H){for(var te=U[H]||{},re=!0;te.type==="separator";){if(re||(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=yt(r.fontMetrics().doubleRuleSep),X.push(W)),te.separator==="|"||te.separator===":"){var Ne=te.separator==="|"?"solid":"dashed",ae=Ce.makeSpan(["vertical-separator"],[],r);ae.style.height=yt(R),ae.style.borderRightWidth=yt(p),ae.style.borderRightStyle=Ne,ae.style.margin="0 "+yt(-p/2);var xe=R-F;xe&&(ae.style.verticalAlign=yt(-xe)),X.push(ae)}else throw new st("Invalid separator type: "+te.separator);H++,te=U[H]||{},re=!1}if(!(a>=c)){var ye=void 0;(a>0||e.hskipBeforeAndAfter)&&(ye=Fr.deflt(te.pregap,y),ye!==0&&(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=yt(ye),X.push(W)));var Ue=[];for(n=0;n<i;++n){var ee=d[n],Me=ee[a];if(Me){var ne=ee.pos-F;Me.depth=ee.depth,Me.height=ee.height,Ue.push({type:"elem",elem:Me,shift:ne})}}Ue=Ce.makeVList({positionType:"individualShift",children:Ue},r),Ue=Ce.makeSpan(["col-align-"+(te.align||"c")],[Ue]),X.push(Ue),(a<c-1||e.hskipBeforeAndAfter)&&(ye=Fr.deflt(te.postgap,y),ye!==0&&(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=yt(ye),X.push(W)))}}if(d=Ce.makeSpan(["mtable"],X),h.length>0){for(var pe=Ce.makeLineSpan("hline",r,p),Xe=Ce.makeLineSpan("hdashline",r,p),Qe=[{type:"elem",elem:d,shift:0}];h.length>0;){var St=h.pop(),ct=St.pos-F;St.isDashed?Qe.push({type:"elem",elem:Xe,shift:ct}):Qe.push({type:"elem",elem:pe,shift:ct})}d=Ce.makeVList({positionType:"individualShift",children:Qe},r)}if(Z.length===0)return Ce.makeSpan(["mord"],[d],r);var _t=Ce.makeVList({positionType:"individualShift",children:Z},r);return _t=Ce.makeSpan(["tag"],[_t],r),Ce.makeFragment([d,_t])},due={c:"center ",l:"left ",r:"right "},nl=function(e,r){for(var n=[],a=new at.MathNode("mtd",[],["mtr-glue"]),i=new at.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],h=0;h<c.length;h++)d.push(new at.MathNode("mtd",[jn(c[h],r)]));e.tags&&e.tags[s]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new at.MathNode("mtr",d))}var p=new at.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",yt(m));var y="",x="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,E=0,I=T.length;T[0].type==="separator"&&(y+="top ",E=1),T[T.length-1].type==="separator"&&(y+="bottom ",I-=1);for(var R=E;R<I;R++)T[R].type==="align"?(x+=due[T[R].align],w&&(S+="none "),w=!0):T[R].type==="separator"&&w&&(S+=T[R].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",x.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],O="",M=1;M<L.length;M++)O+=M%2?"0em ":"1em ";p.setAttribute("columnspacing",O.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var N="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var j=1;j<A.length-1;j++)N+=A[j].length===0?"none ":A[j][0]?"dashed ":"solid ";return/[sd]/.test(N)&&p.setAttribute("rowlines",N.trim()),y!==""&&(p=new at.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new at.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},QH=function(e,r){e.envName.indexOf("ed")===-1&&M2(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",s=Mu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:Y7(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=pr(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var x=!d;s.body.forEach(function(E){for(var I=1;I<E.length;I+=2){var R=pr(E[I],"styling"),L=pr(R.body[0],"ordgroup");L.body.unshift(h)}if(x)d<E.length&&(d=E.length);else{var O=E.length/2;if(c<O)throw new st("Too many math in a row: "+("expected "+c+", but got "+O),E[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&x&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=x?"align":"alignat",s};tl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=O2(e[0]),n=r?[e[0]]:pr(e[0],"ordgroup").body,a=n.map(function(s){var c=G7(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new st("Unknown column alignment: "+d,s)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Mu(t.parser,i,Z7(t.envName))},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new st("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Mu(t.parser,n,Z7(t.envName)),s=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Mu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=O2(e[0]),n=r?[e[0]]:pr(e[0],"ordgroup").body,a=n.map(function(s){var c=G7(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new st("Unknown column alignment: "+d,s)});if(a.length>1)throw new st("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Mu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new st("{subarray} can contain only one column");return i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Mu(t.parser,e,Z7(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:QH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&M2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Y7(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Mu(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:QH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){M2(t);var e={autoTag:Y7(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Mu(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return M2(t),Yce(t.parser)},htmlBuilder:rl,mathmlBuilder:nl});Y("\\nonumber","\\gdef\\@eqnsw{0}");Y("\\notag","\\nonumber");Tt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new st(t.funcName+" valid only within array environment")}});var SR=WH;Tt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new st("Invalid environment name",a);for(var i="",s=0;s<a.body.length;++s)i+=pr(a.body[s],"textord").text;if(n==="\\begin"){if(!SR.hasOwnProperty(i))throw new st("No such environment: "+i,a);var c=SR[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,x=pr(r.parseFunction(),"environment");if(x.name!==i)throw new st("Mismatch: \\begin{"+i+"} matched by \\end{"+x.name+"}",y);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var XH=(t,e)=>{var r=t.font,n=e.withFont(r);return Br(t.body,n)},YH=(t,e)=>{var r=t.font,n=e.withFont(r);return jn(t.body,n)},_R={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Tt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=Bx(e[0]),i=n;return i in _R&&(i=_R[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:XH,mathmlBuilder:YH});Tt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Fr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:I2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});Tt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,s=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:XH,mathmlBuilder:YH});var ZH=(t,e)=>{var r=e;return t==="display"?r=r.id>=qt.SCRIPT.id?r.text():qt.DISPLAY:t==="text"&&r.size===qt.DISPLAY.size?r=qt.TEXT:t==="script"?r=qt.SCRIPT:t==="scriptscript"&&(r=qt.SCRIPTSCRIPT),r},J7=(t,e)=>{var r=ZH(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var s=Br(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}i=e.havingStyle(a);var h=Br(t.denom,i,e),p,m,y;t.hasBarLine?(t.barSize?(m=Xn(t.barSize,e),p=Ce.makeLineSpan("frac-line",e,m)):p=Ce.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var x,T,S;r.size===qt.DISPLAY.size||t.size==="display"?(x=e.fontMetrics().num1,m>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(m>0?(x=e.fontMetrics().num2,T=y):(x=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(p){var I=e.fontMetrics().axisHeight;x-s.depth-(I+.5*m)<T&&(x+=T-(x-s.depth-(I+.5*m))),I-.5*m-(h.height-S)<T&&(S+=T-(I-.5*m-(h.height-S)));var R=-(I-.5*m);w=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:p,shift:R},{type:"elem",elem:s,shift:-x}]},e)}else{var E=x-s.depth-(h.height-S);E<T&&(x+=.5*(T-E),S+=.5*(T-E)),w=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:s,shift:-x}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===qt.DISPLAY.size?L=e.fontMetrics().delim1:r.size===qt.SCRIPTSCRIPT.size?L=e.havingStyle(qt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var O,M;return t.leftDelim==null?O=Jm(e,["mopen"]):O=Hl.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?M=Ce.makeSpan([]):t.rightDelim==null?M=Jm(e,["mclose"]):M=Hl.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),Ce.makeSpan(["mord"].concat(i.sizingClasses(e)),[O,Ce.makeSpan(["mfrac"],[w]),M],e)},eE=(t,e)=>{var r=new at.MathNode("mfrac",[jn(t.numer,e),jn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Xn(t.barSize,e);r.setAttribute("linethickness",yt(n))}var a=ZH(t.size,e.style);if(a.size!==e.style.size){r=new at.MathNode("mstyle",[r]);var i=a.size===qt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new at.MathNode("mo",[new at.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new at.MathNode("mo",[new at.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return q7(s)}return r};Tt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],s,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:s,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:J7,mathmlBuilder:eE});Tt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Tt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var TR=["display","text","script","scriptscript"],AR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};Tt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=Bx(e[0]),s=i.type==="atom"&&i.family==="open"?AR(i.text):null,c=Bx(e[1]),d=c.type==="atom"&&c.family==="close"?AR(c.text):null,h=pr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var T=pr(x.body[0],"textord");y=TR[Number(T.text)]}}else x=pr(x,"textord"),y=TR[Number(x.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:J7,mathmlBuilder:eE});Tt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:pr(e[0],"size").value,token:a}}});Tt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=zle(pr(e[1],"infix").size),s=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:s,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:J7,mathmlBuilder:eE});var JH=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Br(t.sup,e.havingStyle(r.sup()),e):Br(t.sub,e.havingStyle(r.sub()),e),a=pr(t.base,"horizBrace")):a=pr(t,"horizBrace");var i=Br(a.base,e.havingBaseStyle(qt.DISPLAY)),s=nc.svgSpan(a,e),c;if(a.isOver?(c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ce.makeVList({positionType:"bottom",positionData:i.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ce.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},hue=(t,e)=>{var r=nc.mathMLnode(t.label);return new at.MathNode(t.isOver?"mover":"munder",[jn(t.base,e),r])};Tt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:JH,mathmlBuilder:hue});Tt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=pr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:fa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Ua(t.body,e,!1);return Ce.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=ku(t.body,e);return r instanceof Ss||(r=new Ss("mrow",[r])),r.setAttribute("href",t.href),r}});Tt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=pr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var s=n[i];s==="~"&&(s="\\textasciitilde"),a.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:fa(c)}}});Tt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:fa(e[0])}},htmlBuilder(t,e){var r=Ua(t.body,e,!1);return Ce.makeFragment(r)},mathmlBuilder(t,e){return new at.MathNode("mrow",is(t.body,e))}});Tt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=pr(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new st("\\htmlData key/value '"+m+"' missing equals sign");var x=m.slice(0,y),T=m.slice(y+1);d["data-"+x.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:fa(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Ua(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ce.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>ku(t.body,e)});Tt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:fa(e[0]),mathml:fa(e[1])}},htmlBuilder:(t,e)=>{var r=Ua(t.html,e,!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>ku(t.mathml,e)});var l3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new st("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!vH(n))throw new st("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Tt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=pr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":a=l3(y);break;case"height":i=l3(y);break;case"totalheight":s=l3(y);break;default:throw new st("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var x=pr(e[0],"url").url;return c===""&&(c=x,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:s,src:x}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Xn(t.height,e),n=0;t.totalheight.number>0&&(n=Xn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Xn(t.width,e));var i={height:yt(r+n)};a>0&&(i.width=yt(a)),n>0&&(i.verticalAlign=yt(-n));var s=new hce(t.src,t.alt,i);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Xn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Xn(t.totalheight,e)-n,r.setAttribute("valign",yt(-a))),r.setAttribute("height",yt(n+a)),t.width.number>0){var i=Xn(t.width,e);r.setAttribute("width",yt(i))}return r.setAttribute("src",t.src),r}});Tt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=pr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",s=a.value.unit==="mu";i?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ce.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Xn(t.dimension,e);return new at.SpaceNode(r)}});Tt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ce.makeSpan([],[Br(t.body,e)]),r=Ce.makeSpan(["inner"],[r],e)):r=Ce.makeSpan(["inner"],[Br(t.body,e)]);var n=Ce.makeSpan(["fix"],[]),a=Ce.makeSpan([t.alignment],[r,n],e),i=Ce.makeSpan(["strut"]);return i.style.height=yt(a.height+a.depth),a.depth&&(i.style.verticalAlign=yt(-a.depth)),a.children.unshift(i),a=Ce.makeSpan(["thinbox"],[a],e),Ce.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mpadded",[jn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Tt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",s=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:s}}});Tt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new st("Mismatched "+t.funcName)}});var NR=(t,e)=>{switch(e.style.size){case qt.DISPLAY.size:return t.display;case qt.TEXT.size:return t.text;case qt.SCRIPT.size:return t.script;case qt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Tt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:fa(e[0]),text:fa(e[1]),script:fa(e[2]),scriptscript:fa(e[3])}},htmlBuilder:(t,e)=>{var r=NR(t,e),n=Ua(r,e,!1);return Ce.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=NR(t,e);return ku(r,e)}});var eG=(t,e,r,n,a,i,s)=>{t=Ce.makeSpan([],[t]);var c=r&&Fr.isCharacterBox(r),d,h;if(e){var p=Br(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Br(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var x=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=Ce.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=Ce.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var S=t.depth+s;y=Ce.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&i!==0&&!c){var E=Ce.makeSpan(["mspace"],[],n);E.style.marginRight=yt(i),w.unshift(E)}return Ce.makeSpan(["mop","op-limits"],w,n)},tG=["\\smallint"],Rf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=pr(t.base,"op"),a=!0):i=pr(t,"op");var s=e.style,c=!1;s.size===qt.DISPLAY.size&&i.symbol&&!tG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ce.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=Ce.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var x=Ua(i.body,e,!0);x.length===1&&x[0]instanceof eo?(d=x[0],d.classes[0]="mop"):d=Ce.makeSpan(["mop"],x,e)}else{for(var T=[],S=1;S<i.name.length;S++)T.push(Ce.mathsym(i.name[S],i.mode,e));d=Ce.makeSpan(["mop"],T,e)}var w=0,E=0;return(d instanceof eo||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),a?eG(d,r,n,e,s,E,w):(w&&(d.style.position="relative",d.style.top=yt(w)),d)},u1=(t,e)=>{var r;if(t.symbol)r=new Ss("mo",[to(t.name,t.mode)]),tG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Ss("mo",is(t.body,e));else{r=new Ss("mi",[new qo(t.name.slice(1))]);var n=new Ss("mo",[to("","text")]);t.parentIsSupSub?r=new Ss("mrow",[r,n]):r=kH([r,n])}return r},fue={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Tt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=fue[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Rf,mathmlBuilder:u1});Tt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:fa(n)}},htmlBuilder:Rf,mathmlBuilder:u1});var pue={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Tt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:u1});Tt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:u1});Tt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=pue[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Rf,mathmlBuilder:u1});var rG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=pr(t.base,"operatorname"),a=!0):i=pr(t,"operatorname");var s;if(i.body.length>0){for(var c=i.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=Ua(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof eo&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ce.makeSpan(["mop"],d,e)}else s=Ce.makeSpan(["mop"],[],e);return a?eG(s,r,n,e,e.style,0,0):s},mue=(t,e)=>{for(var r=is(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof at.SpaceNode))if(i instanceof at.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=i.children[0];i.children.length===1&&s instanceof at.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new at.TextNode(c)]}var d=new at.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new at.MathNode("mo",[to("","text")]);return t.parentIsSupSub?new at.MathNode("mrow",[d,h]):at.newDocumentFragment([d,h])};Tt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:fa(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:rG,mathmlBuilder:mue});Y("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");h0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ce.makeFragment(Ua(t.body,e,!1)):Ce.makeSpan(["mord"],Ua(t.body,e,!0),e)},mathmlBuilder(t,e){return ku(t.body,e,!0)}});Tt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Br(t.body,e.havingCrampedStyle()),n=Ce.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ce.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new at.MathNode("mo",[new at.TextNode("")]);r.setAttribute("stretchy","true");var n=new at.MathNode("mover",[jn(t.body,e),r]);return n.setAttribute("accent","true"),n}});Tt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:fa(n)}},htmlBuilder:(t,e)=>{var r=Ua(t.body,e.withPhantom(),!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=is(t.body,e);return new at.MathNode("mphantom",r)}});Tt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Br(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ce.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=is(fa(t.body),e),n=new at.MathNode("mphantom",r),a=new at.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});Tt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan(["inner"],[Br(t.body,e.withPhantom())]),n=Ce.makeSpan(["fix"],[]);return Ce.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=is(fa(t.body),e),n=new at.MathNode("mphantom",r),a=new at.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});Tt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=pr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Br(t.body,e),n=Xn(t.dy,e);return Ce.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new at.MathNode("mpadded",[jn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});Tt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Tt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=pr(e[0],"size"),s=pr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&pr(a,"size").value,width:i.value,height:s.value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mord","rule"],[],e),n=Xn(t.width,e),a=Xn(t.height,e),i=t.shift?Xn(t.shift,e):0;return r.style.borderRightWidth=yt(n),r.style.borderTopWidth=yt(a),r.style.bottom=yt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Xn(t.width,e),n=Xn(t.height,e),a=t.shift?Xn(t.shift,e):0,i=e.color&&e.getColor()||"black",s=new at.MathNode("mspace");s.setAttribute("mathbackground",i),s.setAttribute("width",yt(r)),s.setAttribute("height",yt(n));var c=new at.MathNode("mpadded",[s]);return a>=0?c.setAttribute("height",yt(a)):(c.setAttribute("height",yt(a)),c.setAttribute("depth",yt(-a))),c.setAttribute("voffset",yt(a)),c}});function nG(t,e,r){for(var n=Ua(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var s=n[i].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[s+1]==="reset-size"+e.size&&(n[i].classes[s+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ce.makeFragment(n)}var ER=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],gue=(t,e)=>{var r=e.havingSize(t.size);return nG(t.body,r,e)};Tt({type:"sizing",names:ER,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:ER.indexOf(n)+1,body:i}},htmlBuilder:gue,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=is(t.body,r),a=new at.MathNode("mstyle",n);return a.setAttribute("mathsize",yt(r.sizeMultiplier)),a}});Tt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,s=r[0]&&pr(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var h=s.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Br(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mpadded",[jn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});Tt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Br(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ce.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<qt.TEXT.id&&(i=e.fontMetrics().xHeight);var s=a+i/4,c=r.height+r.depth+s+a,{span:d,ruleWidth:h,advanceWidth:p}=Hl.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+s&&(s=(s+m-r.height-r.depth)/2);var y=d.height-r.height-s-h;r.style.paddingLeft=yt(p);var x=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var T=e.havingStyle(qt.SCRIPTSCRIPT),S=Br(t.index,T,e),w=.6*(x.height-x.depth),E=Ce.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),I=Ce.makeSpan(["root"],[E]);return Ce.makeSpan(["mord","sqrt"],[I,x],e)}else return Ce.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new at.MathNode("mroot",[jn(r,e),jn(n,e)]):new at.MathNode("msqrt",[jn(r,e)])}});var jR={display:qt.DISPLAY,text:qt.TEXT,script:qt.SCRIPT,scriptscript:qt.SCRIPTSCRIPT};Tt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:s,body:i}},htmlBuilder(t,e){var r=jR[t.style],n=e.havingStyle(r).withFont("");return nG(t.body,n,e)},mathmlBuilder(t,e){var r=jR[t.style],n=e.havingStyle(r),a=is(t.body,n),i=new at.MathNode("mstyle",a),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var yue=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===qt.DISPLAY.size||n.alwaysHandleSupSub);return a?Rf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===qt.DISPLAY.size||n.limits);return i?rG:null}else{if(n.type==="accent")return Fr.isCharacterBox(n.base)?W7:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?JH:null}else return null}else return null};h0({type:"supsub",htmlBuilder(t,e){var r=yue(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,s=Br(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&Fr.isCharacterBox(n);if(a){var x=e.havingStyle(e.style.sup());c=Br(a,x,e),y||(p=s.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(i){var T=e.havingStyle(e.style.sub());d=Br(i,T,e),y||(m=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===qt.DISPLAY?S=h.sup1:e.style.cramped?S=h.sup3:S=h.sup2;var w=e.sizeMultiplier,E=yt(.5/h.ptPerEm/w),I=null;if(d){var R=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof eo||R)&&(I=yt(-s.italic))}var L;if(c&&d){p=Math.max(p,S,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var O=h.defaultRuleThickness,M=4*O;if(p-c.depth-(d.height-m)<M){m=M-(p-c.depth)+d.height;var N=.8*h.xHeight-(p-c.depth);N>0&&(p+=N,m-=N)}var A=[{type:"elem",elem:d,shift:m,marginRight:E,marginLeft:I},{type:"elem",elem:c,shift:-p,marginRight:E}];L=Ce.makeVList({positionType:"individualShift",children:A},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var j=[{type:"elem",elem:d,marginLeft:I,marginRight:E}];L=Ce.makeVList({positionType:"shift",positionData:m,children:j},e)}else if(c)p=Math.max(p,S,c.depth+.25*h.xHeight),L=Ce.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var z=CA(s,"right")||"mord";return Ce.makeSpan([z],[s,Ce.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[jn(t.base,e)];t.sub&&i.push(jn(t.sub,e)),t.sup&&i.push(jn(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===qt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===qt.DISPLAY||h.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===qt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===qt.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===qt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===qt.DISPLAY)?s="mover":s="msup"}return new at.MathNode(s,i)}});h0({type:"atom",htmlBuilder(t,e){return Ce.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new at.MathNode("mo",[to(t.text,t.mode)]);if(t.family==="bin"){var n=H7(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var aG={mi:"italic",mn:"normal",mtext:"normal"};h0({type:"mathord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new at.MathNode("mi",[to(t.text,t.mode,e)]),n=H7(t,e)||"italic";return n!==aG[r.type]&&r.setAttribute("mathvariant",n),r}});h0({type:"textord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=to(t.text,t.mode,e),n=H7(t,e)||"normal",a;return t.mode==="text"?a=new at.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new at.MathNode("mn",[r]):t.text==="\\prime"?a=new at.MathNode("mo",[r]):a=new at.MathNode("mi",[r]),n!==aG[a.type]&&a.setAttribute("mathvariant",n),a}});var c3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},u3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};h0({type:"spacing",htmlBuilder(t,e){if(u3.hasOwnProperty(t.text)){var r=u3[t.text].className||"";if(t.mode==="text"){var n=Ce.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ce.makeSpan(["mspace",r],[Ce.mathsym(t.text,t.mode,e)],e)}else{if(c3.hasOwnProperty(t.text))return Ce.makeSpan(["mspace",c3[t.text]],[],e);throw new st('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(u3.hasOwnProperty(t.text))r=new at.MathNode("mtext",[new at.TextNode("")]);else{if(c3.hasOwnProperty(t.text))return new at.MathNode("mspace");throw new st('Unknown type of space "'+t.text+'"')}return r}});var kR=()=>{var t=new at.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};h0({type:"tag",mathmlBuilder(t,e){var r=new at.MathNode("mtable",[new at.MathNode("mtr",[kR(),new at.MathNode("mtd",[ku(t.body,e)]),kR(),new at.MathNode("mtd",[ku(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var CR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},OR={"\\textbf":"textbf","\\textmd":"textmd"},vue={"\\textit":"textit","\\textup":"textup"},IR=(t,e)=>{var r=t.font;if(r){if(CR[r])return e.withTextFontFamily(CR[r]);if(OR[r])return e.withTextFontWeight(OR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(vue[r])};Tt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:fa(a),font:n}},htmlBuilder(t,e){var r=IR(t,e),n=Ua(t.body,r,!0);return Ce.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=IR(t,e);return ku(t.body,r)}});Tt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Br(t.body,e),n=Ce.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new at.MathNode("mo",[new at.TextNode("")]);r.setAttribute("stretchy","true");var n=new at.MathNode("munder",[jn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});Tt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Br(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ce.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new at.MathNode("mpadded",[jn(t.body,e)],["vcenter"])}});Tt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new st("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=RR(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var s=r[i];s==="~"&&(s="\\textasciitilde"),n.push(Ce.makeSymbol(s,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ce.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ce.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new at.TextNode(RR(t)),n=new at.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var RR=t=>t.body.replace(/ /g,t.star?"":""),cu=EH,iG=`[ \r
	]`,xue="\\\\[a-zA-Z@]+",bue="\\\\[^\uD800-\uDFFF]",wue="("+xue+")"+iG+"*",Sue=`\\\\(
|[ \r	]+
?)[ \r	]*`,MA="[-]",_ue=new RegExp(MA+"+$"),Tue="("+iG+"+)|"+(Sue+"|")+"([!-\\[\\]---]"+(MA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(MA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+wue)+("|"+bue+")");class MR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Tue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new js("EOF",new Yi(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new st("Unexpected character: '"+e[r]+"'",new js(e[r],new Yi(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new js(a,new Yi(this,r,this.tokenRegex.lastIndex))}}class Aue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new st("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Nue=KH;Y("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Y("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Y("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Y("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Y("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Y("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Y("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var PR={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Y("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new st("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=PR[e.text],n==null||n>=r)throw new st("Invalid base-"+r+" digit "+e.text);for(var a;(a=PR[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var tE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new st("\\newcommand's first argument must be a macro name");var i=a[0].text,s=t.isDefined(i);if(s&&!e)throw new st("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!s&&!r)throw new st("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new st("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return s&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Y("\\newcommand",t=>tE(t,!1,!0,!1));Y("\\renewcommand",t=>tE(t,!0,!1,!1));Y("\\providecommand",t=>tE(t,!0,!0,!0));Y("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Y("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Y("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),cu[r],Mn.math[r],Mn.text[r]),""});Y("\\bgroup","{");Y("\\egroup","}");Y("~","\\nobreakspace");Y("\\lq","`");Y("\\rq","'");Y("\\aa","\\r a");Y("\\AA","\\r A");Y("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Y("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Y("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Y("","\\mathscr{B}");Y("","\\mathscr{E}");Y("","\\mathscr{F}");Y("","\\mathscr{H}");Y("","\\mathscr{I}");Y("","\\mathscr{L}");Y("","\\mathscr{M}");Y("","\\mathscr{R}");Y("","\\mathfrak{C}");Y("","\\mathfrak{H}");Y("","\\mathfrak{Z}");Y("\\Bbbk","\\Bbb{k}");Y("","\\cdotp");Y("\\llap","\\mathllap{\\textrm{#1}}");Y("\\rlap","\\mathrlap{\\textrm{#1}}");Y("\\clap","\\mathclap{\\textrm{#1}}");Y("\\mathstrut","\\vphantom{(}");Y("\\underbar","\\underline{\\text{#1}}");Y("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Y("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Y("\\ne","\\neq");Y("","\\neq");Y("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Y("","\\notin");Y("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Y("","\\perp");Y("","\\mathclose{!\\mkern-0.8mu!}");Y("","\\notni");Y("","\\ulcorner");Y("","\\urcorner");Y("","\\llcorner");Y("","\\lrcorner");Y("","\\copyright");Y("","\\textregistered");Y("","\\textregistered");Y("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Y("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Y("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Y("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Y("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Y("","\\vdots");Y("\\varGamma","\\mathit{\\Gamma}");Y("\\varDelta","\\mathit{\\Delta}");Y("\\varTheta","\\mathit{\\Theta}");Y("\\varLambda","\\mathit{\\Lambda}");Y("\\varXi","\\mathit{\\Xi}");Y("\\varPi","\\mathit{\\Pi}");Y("\\varSigma","\\mathit{\\Sigma}");Y("\\varUpsilon","\\mathit{\\Upsilon}");Y("\\varPhi","\\mathit{\\Phi}");Y("\\varPsi","\\mathit{\\Psi}");Y("\\varOmega","\\mathit{\\Omega}");Y("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Y("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Y("\\boxed","\\fbox{$\\displaystyle{#1}$}");Y("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Y("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Y("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Y("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Y("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var DR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Y("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in DR?e=DR[r]:(r.slice(0,4)==="\\not"||r in Mn.math&&["bin","rel"].includes(Mn.math[r].group))&&(e="\\dotsb"),e});var rE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Y("\\dotso",function(t){var e=t.future().text;return e in rE?"\\ldots\\,":"\\ldots"});Y("\\dotsc",function(t){var e=t.future().text;return e in rE&&e!==","?"\\ldots\\,":"\\ldots"});Y("\\cdots",function(t){var e=t.future().text;return e in rE?"\\@cdots\\,":"\\@cdots"});Y("\\dotsb","\\cdots");Y("\\dotsm","\\cdots");Y("\\dotsi","\\!\\cdots");Y("\\dotsx","\\ldots\\,");Y("\\DOTSI","\\relax");Y("\\DOTSB","\\relax");Y("\\DOTSX","\\relax");Y("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Y("\\,","\\tmspace+{3mu}{.1667em}");Y("\\thinspace","\\,");Y("\\>","\\mskip{4mu}");Y("\\:","\\tmspace+{4mu}{.2222em}");Y("\\medspace","\\:");Y("\\;","\\tmspace+{5mu}{.2777em}");Y("\\thickspace","\\;");Y("\\!","\\tmspace-{3mu}{.1667em}");Y("\\negthinspace","\\!");Y("\\negmedspace","\\tmspace-{4mu}{.2222em}");Y("\\negthickspace","\\tmspace-{5mu}{.277em}");Y("\\enspace","\\kern.5em ");Y("\\enskip","\\hskip.5em\\relax");Y("\\quad","\\hskip1em\\relax");Y("\\qquad","\\hskip2em\\relax");Y("\\tag","\\@ifstar\\tag@literal\\tag@paren");Y("\\tag@paren","\\tag@literal{({#1})}");Y("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new st("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Y("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Y("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Y("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Y("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Y("\\newline","\\\\\\relax");Y("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var sG=yt(Fo["Main-Regular"][84][1]-.7*Fo["Main-Regular"][65][1]);Y("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+sG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Y("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+sG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Y("\\hspace","\\@ifstar\\@hspacer\\@hspace");Y("\\@hspace","\\hskip #1\\relax");Y("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Y("\\ordinarycolon",":");Y("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Y("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Y("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Y("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Y("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Y("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Y("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Y("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Y("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Y("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Y("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Y("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Y("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Y("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Y("","\\dblcolon");Y("","\\eqcolon");Y("","\\coloneqq");Y("","\\eqqcolon");Y("","\\Coloneqq");Y("\\ratio","\\vcentcolon");Y("\\coloncolon","\\dblcolon");Y("\\colonequals","\\coloneqq");Y("\\coloncolonequals","\\Coloneqq");Y("\\equalscolon","\\eqqcolon");Y("\\equalscoloncolon","\\Eqqcolon");Y("\\colonminus","\\coloneq");Y("\\coloncolonminus","\\Coloneq");Y("\\minuscolon","\\eqcolon");Y("\\minuscoloncolon","\\Eqcolon");Y("\\coloncolonapprox","\\Colonapprox");Y("\\coloncolonsim","\\Colonsim");Y("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Y("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Y("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Y("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Y("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Y("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Y("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Y("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Y("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Y("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Y("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Y("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Y("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Y("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Y("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Y("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Y("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Y("\\nleqq","\\html@mathml{\\@nleqq}{}");Y("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Y("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Y("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Y("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Y("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Y("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Y("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Y("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Y("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Y("\\imath","\\html@mathml{\\@imath}{}");Y("\\jmath","\\html@mathml{\\@jmath}{}");Y("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Y("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Y("","\\llbracket");Y("","\\rrbracket");Y("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Y("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Y("","\\lBrace");Y("","\\rBrace");Y("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Y("","\\minuso");Y("\\darr","\\downarrow");Y("\\dArr","\\Downarrow");Y("\\Darr","\\Downarrow");Y("\\lang","\\langle");Y("\\rang","\\rangle");Y("\\uarr","\\uparrow");Y("\\uArr","\\Uparrow");Y("\\Uarr","\\Uparrow");Y("\\N","\\mathbb{N}");Y("\\R","\\mathbb{R}");Y("\\Z","\\mathbb{Z}");Y("\\alef","\\aleph");Y("\\alefsym","\\aleph");Y("\\Alpha","\\mathrm{A}");Y("\\Beta","\\mathrm{B}");Y("\\bull","\\bullet");Y("\\Chi","\\mathrm{X}");Y("\\clubs","\\clubsuit");Y("\\cnums","\\mathbb{C}");Y("\\Complex","\\mathbb{C}");Y("\\Dagger","\\ddagger");Y("\\diamonds","\\diamondsuit");Y("\\empty","\\emptyset");Y("\\Epsilon","\\mathrm{E}");Y("\\Eta","\\mathrm{H}");Y("\\exist","\\exists");Y("\\harr","\\leftrightarrow");Y("\\hArr","\\Leftrightarrow");Y("\\Harr","\\Leftrightarrow");Y("\\hearts","\\heartsuit");Y("\\image","\\Im");Y("\\infin","\\infty");Y("\\Iota","\\mathrm{I}");Y("\\isin","\\in");Y("\\Kappa","\\mathrm{K}");Y("\\larr","\\leftarrow");Y("\\lArr","\\Leftarrow");Y("\\Larr","\\Leftarrow");Y("\\lrarr","\\leftrightarrow");Y("\\lrArr","\\Leftrightarrow");Y("\\Lrarr","\\Leftrightarrow");Y("\\Mu","\\mathrm{M}");Y("\\natnums","\\mathbb{N}");Y("\\Nu","\\mathrm{N}");Y("\\Omicron","\\mathrm{O}");Y("\\plusmn","\\pm");Y("\\rarr","\\rightarrow");Y("\\rArr","\\Rightarrow");Y("\\Rarr","\\Rightarrow");Y("\\real","\\Re");Y("\\reals","\\mathbb{R}");Y("\\Reals","\\mathbb{R}");Y("\\Rho","\\mathrm{P}");Y("\\sdot","\\cdot");Y("\\sect","\\S");Y("\\spades","\\spadesuit");Y("\\sub","\\subset");Y("\\sube","\\subseteq");Y("\\supe","\\supseteq");Y("\\Tau","\\mathrm{T}");Y("\\thetasym","\\vartheta");Y("\\weierp","\\wp");Y("\\Zeta","\\mathrm{Z}");Y("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Y("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Y("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Y("\\bra","\\mathinner{\\langle{#1}|}");Y("\\ket","\\mathinner{|{#1}\\rangle}");Y("\\braket","\\mathinner{\\langle{#1}\\rangle}");Y("\\Bra","\\left\\langle#1\\right|");Y("\\Ket","\\left|#1\\right\\rangle");var oG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",s),a.length&&y.macros.set("\\|",c));var x=m;if(!m&&a.length){var T=y.future();T.text==="|"&&(y.popToken(),x=!0)}return{tokens:x?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Y("\\bra@ket",oG(!1));Y("\\bra@set",oG(!0));Y("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Y("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Y("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Y("\\angln","{\\angl n}");Y("\\blue","\\textcolor{##6495ed}{#1}");Y("\\orange","\\textcolor{##ffa500}{#1}");Y("\\pink","\\textcolor{##ff00af}{#1}");Y("\\red","\\textcolor{##df0030}{#1}");Y("\\green","\\textcolor{##28ae7b}{#1}");Y("\\gray","\\textcolor{gray}{#1}");Y("\\purple","\\textcolor{##9d38bd}{#1}");Y("\\blueA","\\textcolor{##ccfaff}{#1}");Y("\\blueB","\\textcolor{##80f6ff}{#1}");Y("\\blueC","\\textcolor{##63d9ea}{#1}");Y("\\blueD","\\textcolor{##11accd}{#1}");Y("\\blueE","\\textcolor{##0c7f99}{#1}");Y("\\tealA","\\textcolor{##94fff5}{#1}");Y("\\tealB","\\textcolor{##26edd5}{#1}");Y("\\tealC","\\textcolor{##01d1c1}{#1}");Y("\\tealD","\\textcolor{##01a995}{#1}");Y("\\tealE","\\textcolor{##208170}{#1}");Y("\\greenA","\\textcolor{##b6ffb0}{#1}");Y("\\greenB","\\textcolor{##8af281}{#1}");Y("\\greenC","\\textcolor{##74cf70}{#1}");Y("\\greenD","\\textcolor{##1fab54}{#1}");Y("\\greenE","\\textcolor{##0d923f}{#1}");Y("\\goldA","\\textcolor{##ffd0a9}{#1}");Y("\\goldB","\\textcolor{##ffbb71}{#1}");Y("\\goldC","\\textcolor{##ff9c39}{#1}");Y("\\goldD","\\textcolor{##e07d10}{#1}");Y("\\goldE","\\textcolor{##a75a05}{#1}");Y("\\redA","\\textcolor{##fca9a9}{#1}");Y("\\redB","\\textcolor{##ff8482}{#1}");Y("\\redC","\\textcolor{##f9685d}{#1}");Y("\\redD","\\textcolor{##e84d39}{#1}");Y("\\redE","\\textcolor{##bc2612}{#1}");Y("\\maroonA","\\textcolor{##ffbde0}{#1}");Y("\\maroonB","\\textcolor{##ff92c6}{#1}");Y("\\maroonC","\\textcolor{##ed5fa6}{#1}");Y("\\maroonD","\\textcolor{##ca337c}{#1}");Y("\\maroonE","\\textcolor{##9e034e}{#1}");Y("\\purpleA","\\textcolor{##ddd7ff}{#1}");Y("\\purpleB","\\textcolor{##c6b9fc}{#1}");Y("\\purpleC","\\textcolor{##aa87ff}{#1}");Y("\\purpleD","\\textcolor{##7854ab}{#1}");Y("\\purpleE","\\textcolor{##543b78}{#1}");Y("\\mintA","\\textcolor{##f5f9e8}{#1}");Y("\\mintB","\\textcolor{##edf2df}{#1}");Y("\\mintC","\\textcolor{##e0e5cc}{#1}");Y("\\grayA","\\textcolor{##f6f7f7}{#1}");Y("\\grayB","\\textcolor{##f0f1f2}{#1}");Y("\\grayC","\\textcolor{##e3e5e6}{#1}");Y("\\grayD","\\textcolor{##d6d8da}{#1}");Y("\\grayE","\\textcolor{##babec2}{#1}");Y("\\grayF","\\textcolor{##888d93}{#1}");Y("\\grayG","\\textcolor{##626569}{#1}");Y("\\grayH","\\textcolor{##3b3e40}{#1}");Y("\\grayI","\\textcolor{##21242c}{#1}");Y("\\kaBlue","\\textcolor{##314453}{#1}");Y("\\kaGreen","\\textcolor{##71B307}{#1}");var lG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Eue{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Aue(Nue,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new MR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new js("EOF",n.loc)),this.pushTokens(a),new js("",Yi.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,s=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++s;else if(i.text==="}"){if(--s,s===-1)throw new st("Extra }",i)}else if(i.text==="EOF")throw new st("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((s===0||s===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new st("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new st("Use of the macro doesn't match its definition",i)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new st("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new st("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,s=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new st("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...s[+d.text-1]);else throw new st("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new js(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var s=a.replace(/##/g,"");s.indexOf("#"+(i+1))!==-1;)++i;for(var c=new MR(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||cu.hasOwnProperty(e)||Mn.math.hasOwnProperty(e)||Mn.text.hasOwnProperty(e)||lG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:cu.hasOwnProperty(e)&&!cu[e].primitive}}var LR=/^[]/,pv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),d3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},BR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class P2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Eue(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new st("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new js("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(P2.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&cu[a.text]&&cu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new st("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],s],[]):h=this.callFunction(n,[i,s],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new st("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var s=i.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new st("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new st("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new st("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new st("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(pv[i.text]){var h=LR.test(i.text),p=[];for(p.push(new js(pv[i.text])),this.consume();;){var m=this.fetch().text;if(!pv[m]||LR.test(m)!==h)break;p.unshift(new js(pv[m])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=cu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new st("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new st("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new st("Can't use function '"+a+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,s,c,n,e)}callFunction(e,r,n,a,i){var s={funcName:e,parser:this,token:a,breakOnTokenText:i},c=cu[e];if(c&&c.handler)return c.handler(s,r,n);throw new st("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new st("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new st("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new st("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new st("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",s;(s=this.fetch()).text!=="EOF"&&e.test(i+s.text);)a=s,i+=a.text,this.consume();if(i==="")throw new st("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new st("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new st("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!vH(i))throw new st("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),s}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var s=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Yi.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!lG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new st("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Yi.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new st(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}BR.hasOwnProperty(r[0])&&!Mn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=BR[r[0]]+r.slice(1));var i=_ue.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var s;if(Mn[this.mode][r]){this.settings.strict&&this.mode==="math"&&kA.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Mn[this.mode][r].group,d=Yi.range(e),h;if(mce.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};s=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(yH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Yi.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var y=i[0][m];if(!d3[y])throw new st("Unknown accent ' "+y+"'",e);var x=d3[y][this.mode]||d3[y].text;if(!x)throw new st("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Yi.range(e),label:x,isStretchy:!1,isShifty:!0,base:s}}return s}}P2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var nE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new P2(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new st("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new js("\\df@tag")])}]}return a},cG=function(e,r,n){r.textContent="";var a=aE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),cG=function(){throw new st("KaTeX doesn't work in quirks mode.")});var jue=function(e,r){var n=aE(e,r).toMarkup();return n},kue=function(e,r){var n=new $7(r);return nE(e,n)},uG=function(e,r,n){if(n.throwOnError||!(e instanceof st))throw e;var a=Ce.makeSpan(["katex-error"],[new eo(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},aE=function(e,r){var n=new $7(r);try{var a=nE(e,n);return Bce(a,e,n)}catch(i){return uG(i,e,n)}},Cue=function(e,r){var n=new $7(r);try{var a=nE(e,n);return $ce(a,e,n)}catch(i){return uG(i,e,n)}},Oue="0.16.28",Iue={Span:c1,Anchor:V7,SymbolNode:eo,SvgNode:tc,PathNode:ju,LineNode:jA},$x={version:Oue,render:cG,renderToString:jue,ParseError:st,SETTINGS_SCHEMA:Yv,__parse:kue,__renderToDomTree:aE,__renderToHTMLTree:Cue,__setFontMetrics:oce,__defineSymbol:C,__defineFunction:Tt,__defineMacro:Y,__domTree:Iue};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function au(t){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(t)}function PA(t,e){return PA=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},PA(t,e)}function Rue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jv(t,e,r){return Rue()?Jv=Reflect.construct:Jv=function(a,i,s){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return s&&PA(h,s.prototype),h},Jv.apply(null,arguments)}function po(t){return Mue(t)||Pue(t)||Due(t)||Lue()}function Mue(t){if(Array.isArray(t))return DA(t)}function Pue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Due(t,e){if(t){if(typeof t=="string")return DA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DA(t,e)}}function DA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bue=Object.hasOwnProperty,$R=Object.setPrototypeOf,$ue=Object.isFrozen,Uue=Object.getPrototypeOf,zue=Object.getOwnPropertyDescriptor,Bi=Object.freeze,ro=Object.seal,Vue=Object.create,dG=typeof Reflect<"u"&&Reflect,Ux=dG.apply,LA=dG.construct;Ux||(Ux=function(e,r,n){return e.apply(r,n)});Bi||(Bi=function(e){return e});ro||(ro=function(e){return e});LA||(LA=function(e,r){return Jv(e,po(r))});var Fue=no(Array.prototype.forEach),UR=no(Array.prototype.pop),Vp=no(Array.prototype.push),ex=no(String.prototype.toLowerCase),h3=no(String.prototype.toString),zR=no(String.prototype.match),ho=no(String.prototype.replace),que=no(String.prototype.indexOf),Hue=no(String.prototype.trim),li=no(RegExp.prototype.test),f3=Gue(TypeError);function no(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return Ux(t,e,n)}}function Gue(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return LA(t,r)}}function gr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:ex,$R&&$R(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var s=r(i);s!==i&&($ue(e)||(e[a]=s),i=s)}t[i]=!0}return t}function hd(t){var e=Vue(null),r;for(r in t)Ux(Bue,t,[r])===!0&&(e[r]=t[r]);return e}function mv(t,e){for(;t!==null;){var r=zue(t,e);if(r){if(r.get)return no(r.get);if(typeof r.value=="function")return no(r.value)}t=Uue(t)}function n(a){return console.warn("fallback value for",a),null}return n}var VR=Bi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),p3=Bi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),m3=Bi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Wue=Bi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),g3=Bi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Kue=Bi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),FR=Bi(["#text"]),qR=Bi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),y3=Bi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HR=Bi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gv=Bi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Que=ro(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xue=ro(/<%[\w\W]*|[\w\W]*%>/gm),Yue=ro(/\${[\w\W]*}/gm),Zue=ro(/^data-[\-\w.\u00B7-\uFFFF]+$/),Jue=ro(/^aria-[\-\w]+$/),ede=ro(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tde=ro(/^(?:\w+script|data):/i),rde=ro(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nde=ro(/^html$/i),ade=ro(/^[a-z][.\w]*(-[.\w]+)+$/i),ide=function(){return typeof window>"u"?null:window},sde=function(e,r){if(au(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function hG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ide(),e=function(he){return hG(he)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,x=t.trustedTypes,T=c.prototype,S=mv(T,"cloneNode"),w=mv(T,"nextSibling"),E=mv(T,"childNodes"),I=mv(T,"parentNode");if(typeof i=="function"){var R=n.createElement("template");R.content&&R.content.ownerDocument&&(n=R.content.ownerDocument)}var L=sde(x,r),O=L?L.createHTML(""):"",M=n,N=M.implementation,A=M.createNodeIterator,j=M.createDocumentFragment,z=M.getElementsByTagName,B=r.importNode,F={};try{F=hd(n).documentMode?n.documentMode:{}}catch{}var U={};e.isSupported=typeof I=="function"&&N&&N.createHTMLDocument!==void 0&&F!==9;var X=Que,W=Xue,H=Yue,Z=Zue,ie=Jue,fe=tde,me=rde,K=ade,te=ede,re=null,Ne=gr({},[].concat(po(VR),po(p3),po(m3),po(g3),po(FR))),ae=null,xe=gr({},[].concat(po(qR),po(y3),po(HR),po(gv))),ye=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ue=null,ee=null,Me=!0,ne=!0,pe=!1,Xe=!0,Qe=!1,St=!0,ct=!1,_t=!1,Ee=!1,Ve=!1,nt=!1,mt=!1,Je=!0,de=!1,Ye="user-content-",At=!0,xt=!1,gt={},Vt=null,cr=gr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Hr=null,Pr=gr({},["audio","video","img","source","image","track"]),we=null,ot=gr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bt="http://www.w3.org/1998/Math/MathML",Ct="http://www.w3.org/2000/svg",Lt="http://www.w3.org/1999/xhtml",et=Lt,mr=!1,wn=null,Dn=gr({},[bt,Ct,Lt],h3),Cr,ur=["application/xhtml+xml","text/html"],Bt="text/html",it,Kt=null,br=n.createElement("form"),yr=function(he){return he instanceof RegExp||he instanceof Function},Or=function(he){Kt&&Kt===he||((!he||au(he)!=="object")&&(he={}),he=hd(he),Cr=ur.indexOf(he.PARSER_MEDIA_TYPE)===-1?Cr=Bt:Cr=he.PARSER_MEDIA_TYPE,it=Cr==="application/xhtml+xml"?h3:ex,re="ALLOWED_TAGS"in he?gr({},he.ALLOWED_TAGS,it):Ne,ae="ALLOWED_ATTR"in he?gr({},he.ALLOWED_ATTR,it):xe,wn="ALLOWED_NAMESPACES"in he?gr({},he.ALLOWED_NAMESPACES,h3):Dn,we="ADD_URI_SAFE_ATTR"in he?gr(hd(ot),he.ADD_URI_SAFE_ATTR,it):ot,Hr="ADD_DATA_URI_TAGS"in he?gr(hd(Pr),he.ADD_DATA_URI_TAGS,it):Pr,Vt="FORBID_CONTENTS"in he?gr({},he.FORBID_CONTENTS,it):cr,Ue="FORBID_TAGS"in he?gr({},he.FORBID_TAGS,it):{},ee="FORBID_ATTR"in he?gr({},he.FORBID_ATTR,it):{},gt="USE_PROFILES"in he?he.USE_PROFILES:!1,Me=he.ALLOW_ARIA_ATTR!==!1,ne=he.ALLOW_DATA_ATTR!==!1,pe=he.ALLOW_UNKNOWN_PROTOCOLS||!1,Xe=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qe=he.SAFE_FOR_TEMPLATES||!1,St=he.SAFE_FOR_XML!==!1,ct=he.WHOLE_DOCUMENT||!1,Ve=he.RETURN_DOM||!1,nt=he.RETURN_DOM_FRAGMENT||!1,mt=he.RETURN_TRUSTED_TYPE||!1,Ee=he.FORCE_BODY||!1,Je=he.SANITIZE_DOM!==!1,de=he.SANITIZE_NAMED_PROPS||!1,At=he.KEEP_CONTENT!==!1,xt=he.IN_PLACE||!1,te=he.ALLOWED_URI_REGEXP||te,et=he.NAMESPACE||Lt,ye=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&yr(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ye.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&yr(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ye.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ye.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(ne=!1),nt&&(Ve=!0),gt&&(re=gr({},po(FR)),ae=[],gt.html===!0&&(gr(re,VR),gr(ae,qR)),gt.svg===!0&&(gr(re,p3),gr(ae,y3),gr(ae,gv)),gt.svgFilters===!0&&(gr(re,m3),gr(ae,y3),gr(ae,gv)),gt.mathMl===!0&&(gr(re,g3),gr(ae,HR),gr(ae,gv))),he.ADD_TAGS&&(re===Ne&&(re=hd(re)),gr(re,he.ADD_TAGS,it)),he.ADD_ATTR&&(ae===xe&&(ae=hd(ae)),gr(ae,he.ADD_ATTR,it)),he.ADD_URI_SAFE_ATTR&&gr(we,he.ADD_URI_SAFE_ATTR,it),he.FORBID_CONTENTS&&(Vt===cr&&(Vt=hd(Vt)),gr(Vt,he.FORBID_CONTENTS,it)),At&&(re["#text"]=!0),ct&&gr(re,["html","head","body"]),re.table&&(gr(re,["tbody"]),delete Ue.tbody),Bi&&Bi(he),Kt=he)},kn=gr({},["mi","mo","mn","ms","mtext"]),er=gr({},["annotation-xml"]),ga=gr({},["title","style","font","a","script"]),cn=gr({},p3);gr(cn,m3),gr(cn,Wue);var Cn=gr({},g3);gr(Cn,Kue);var ti=function(he){var Ze=I(he);(!Ze||!Ze.tagName)&&(Ze={namespaceURI:et,tagName:"template"});var ut=ex(he.tagName),Xt=ex(Ze.tagName);return wn[he.namespaceURI]?he.namespaceURI===Ct?Ze.namespaceURI===Lt?ut==="svg":Ze.namespaceURI===bt?ut==="svg"&&(Xt==="annotation-xml"||kn[Xt]):!!cn[ut]:he.namespaceURI===bt?Ze.namespaceURI===Lt?ut==="math":Ze.namespaceURI===Ct?ut==="math"&&er[Xt]:!!Cn[ut]:he.namespaceURI===Lt?Ze.namespaceURI===Ct&&!er[Xt]||Ze.namespaceURI===bt&&!kn[Xt]?!1:!Cn[ut]&&(ga[ut]||!cn[ut]):!!(Cr==="application/xhtml+xml"&&wn[he.namespaceURI]):!1},Ar=function(he){Vp(e.removed,{element:he});try{he.parentNode.removeChild(he)}catch{try{he.outerHTML=O}catch{he.remove()}}},un=function(he,Ze){try{Vp(e.removed,{attribute:Ze.getAttributeNode(he),from:Ze})}catch{Vp(e.removed,{attribute:null,from:Ze})}if(Ze.removeAttribute(he),he==="is"&&!ae[he])if(Ve||nt)try{Ar(Ze)}catch{}else try{Ze.setAttribute(he,"")}catch{}},ri=function(he){var Ze,ut;if(Ee)he="<remove></remove>"+he;else{var Xt=zR(he,/^[\r\n\t ]+/);ut=Xt&&Xt[0]}Cr==="application/xhtml+xml"&&et===Lt&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");var dr=L?L.createHTML(he):he;if(et===Lt)try{Ze=new y().parseFromString(dr,Cr)}catch{}if(!Ze||!Ze.documentElement){Ze=N.createDocument(et,"template",null);try{Ze.documentElement.innerHTML=mr?O:dr}catch{}}var rn=Ze.body||Ze.documentElement;return he&&ut&&rn.insertBefore(n.createTextNode(ut),rn.childNodes[0]||null),et===Lt?z.call(Ze,ct?"html":"body")[0]:ct?Ze.documentElement:rn},Kn=function(he){return A.call(he.ownerDocument||he,he,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Yr=function(he){return he instanceof m&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof p)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},dn=function(he){return au(s)==="object"?he instanceof s:he&&au(he)==="object"&&typeof he.nodeType=="number"&&typeof he.nodeName=="string"},Sn=function(he,Ze,ut){U[he]&&Fue(U[he],function(Xt){Xt.call(e,Ze,ut,Kt)})},ni=function(he){var Ze;if(Sn("beforeSanitizeElements",he,null),Yr(he)||li(/[\u0080-\uFFFF]/,he.nodeName))return Ar(he),!0;var ut=it(he.nodeName);if(Sn("uponSanitizeElement",he,{tagName:ut,allowedTags:re}),he.hasChildNodes()&&!dn(he.firstElementChild)&&(!dn(he.content)||!dn(he.content.firstElementChild))&&li(/<[/\w]/g,he.innerHTML)&&li(/<[/\w]/g,he.textContent)||ut==="select"&&li(/<template/i,he.innerHTML)||he.nodeType===7||St&&he.nodeType===8&&li(/<[/\w]/g,he.data))return Ar(he),!0;if(!re[ut]||Ue[ut]){if(!Ue[ut]&&Ai(ut)&&(ye.tagNameCheck instanceof RegExp&&li(ye.tagNameCheck,ut)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(ut)))return!1;if(At&&!Vt[ut]){var Xt=I(he)||he.parentNode,dr=E(he)||he.childNodes;if(dr&&Xt)for(var rn=dr.length,Gr=rn-1;Gr>=0;--Gr){var hn=S(dr[Gr],!0);hn.__removalCount=(he.__removalCount||0)+1,Xt.insertBefore(hn,w(he))}}return Ar(he),!0}return he instanceof c&&!ti(he)||(ut==="noscript"||ut==="noembed"||ut==="noframes")&&li(/<\/no(script|embed|frames)/i,he.innerHTML)?(Ar(he),!0):(Qe&&he.nodeType===3&&(Ze=he.textContent,Ze=ho(Ze,X," "),Ze=ho(Ze,W," "),Ze=ho(Ze,H," "),he.textContent!==Ze&&(Vp(e.removed,{element:he.cloneNode()}),he.textContent=Ze)),Sn("afterSanitizeElements",he,null),!1)},Fa=function(he,Ze,ut){if(Je&&(Ze==="id"||Ze==="name")&&(ut in n||ut in br))return!1;if(!(ne&&!ee[Ze]&&li(Z,Ze))){if(!(Me&&li(ie,Ze))){if(!ae[Ze]||ee[Ze]){if(!(Ai(he)&&(ye.tagNameCheck instanceof RegExp&&li(ye.tagNameCheck,he)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(he))&&(ye.attributeNameCheck instanceof RegExp&&li(ye.attributeNameCheck,Ze)||ye.attributeNameCheck instanceof Function&&ye.attributeNameCheck(Ze))||Ze==="is"&&ye.allowCustomizedBuiltInElements&&(ye.tagNameCheck instanceof RegExp&&li(ye.tagNameCheck,ut)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(ut))))return!1}else if(!we[Ze]){if(!li(te,ho(ut,me,""))){if(!((Ze==="src"||Ze==="xlink:href"||Ze==="href")&&he!=="script"&&que(ut,"data:")===0&&Hr[he])){if(!(pe&&!li(fe,ho(ut,me,"")))){if(ut)return!1}}}}}}return!0},Ai=function(he){return he!=="annotation-xml"&&zR(he,K)},os=function(he){var Ze,ut,Xt,dr;Sn("beforeSanitizeAttributes",he,null);var rn=he.attributes;if(!(!rn||Yr(he))){var Gr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae};for(dr=rn.length;dr--;){Ze=rn[dr];var hn=Ze,Ir=hn.name,Ms=hn.namespaceURI;if(ut=Ir==="value"?Ze.value:Hue(Ze.value),Xt=it(Ir),Gr.attrName=Xt,Gr.attrValue=ut,Gr.keepAttr=!0,Gr.forceKeepAttr=void 0,Sn("uponSanitizeAttribute",he,Gr),ut=Gr.attrValue,!Gr.forceKeepAttr&&(un(Ir,he),!!Gr.keepAttr)){if(!Xe&&li(/\/>/i,ut)){un(Ir,he);continue}Qe&&(ut=ho(ut,X," "),ut=ho(ut,W," "),ut=ho(ut,H," "));var ls=it(he.nodeName);if(Fa(ls,Xt,ut)){if(de&&(Xt==="id"||Xt==="name")&&(un(Ir,he),ut=Ye+ut),St&&li(/((--!?|])>)|<\/(style|title)/i,ut)){un(Ir,he);continue}if(L&&au(x)==="object"&&typeof x.getAttributeType=="function"&&!Ms)switch(x.getAttributeType(ls,Xt)){case"TrustedHTML":{ut=L.createHTML(ut);break}case"TrustedScriptURL":{ut=L.createScriptURL(ut);break}}try{Ms?he.setAttributeNS(Ms,Ir,ut):he.setAttribute(Ir,ut),Yr(he)?Ar(he):UR(e.removed)}catch{}}}}Sn("afterSanitizeAttributes",he,null)}},gi=function Nt(he){var Ze,ut=Kn(he);for(Sn("beforeSanitizeShadowDOM",he,null);Ze=ut.nextNode();)Sn("uponSanitizeShadowNode",Ze,null),ni(Ze),os(Ze),Ze.content instanceof a&&Nt(Ze.content);Sn("afterSanitizeShadowDOM",he,null)};return e.sanitize=function(Nt){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ze,ut,Xt,dr,rn;if(mr=!Nt,mr&&(Nt="<!-->"),typeof Nt!="string"&&!dn(Nt))if(typeof Nt.toString=="function"){if(Nt=Nt.toString(),typeof Nt!="string")throw f3("dirty is not a string, aborting")}else throw f3("toString is not a function");if(!e.isSupported){if(au(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Nt=="string")return t.toStaticHTML(Nt);if(dn(Nt))return t.toStaticHTML(Nt.outerHTML)}return Nt}if(_t||Or(he),e.removed=[],typeof Nt=="string"&&(xt=!1),xt){if(Nt.nodeName){var Gr=it(Nt.nodeName);if(!re[Gr]||Ue[Gr])throw f3("root node is forbidden and cannot be sanitized in-place")}}else if(Nt instanceof s)Ze=ri("<!---->"),ut=Ze.ownerDocument.importNode(Nt,!0),ut.nodeType===1&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?Ze=ut:Ze.appendChild(ut);else{if(!Ve&&!Qe&&!ct&&Nt.indexOf("<")===-1)return L&&mt?L.createHTML(Nt):Nt;if(Ze=ri(Nt),!Ze)return Ve?null:mt?O:""}Ze&&Ee&&Ar(Ze.firstChild);for(var hn=Kn(xt?Nt:Ze);Xt=hn.nextNode();)Xt.nodeType===3&&Xt===dr||(ni(Xt),os(Xt),Xt.content instanceof a&&gi(Xt.content),dr=Xt);if(dr=null,xt)return Nt;if(Ve){if(nt)for(rn=j.call(Ze.ownerDocument);Ze.firstChild;)rn.appendChild(Ze.firstChild);else rn=Ze;return(ae.shadowroot||ae.shadowrootmod)&&(rn=B.call(r,rn,!0)),rn}var Ir=ct?Ze.outerHTML:Ze.innerHTML;return ct&&re["!doctype"]&&Ze.ownerDocument&&Ze.ownerDocument.doctype&&Ze.ownerDocument.doctype.name&&li(nde,Ze.ownerDocument.doctype.name)&&(Ir="<!DOCTYPE "+Ze.ownerDocument.doctype.name+`>
`+Ir),Qe&&(Ir=ho(Ir,X," "),Ir=ho(Ir,W," "),Ir=ho(Ir,H," ")),L&&mt?L.createHTML(Ir):Ir},e.setConfig=function(Nt){Or(Nt),_t=!0},e.clearConfig=function(){Kt=null,_t=!1},e.isValidAttribute=function(Nt,he,Ze){Kt||Or({});var ut=it(Nt),Xt=it(he);return Fa(ut,Xt,Ze)},e.addHook=function(Nt,he){typeof he=="function"&&(U[Nt]=U[Nt]||[],Vp(U[Nt],he))},e.removeHook=function(Nt){if(U[Nt])return UR(U[Nt])},e.removeHooks=function(Nt){U[Nt]&&(U[Nt]=[])},e.removeAllHooks=function(){U={}},e}var fG=hG();const ode=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i})=>{const s=k.useRef(Nx()),c=k.useRef(Date.now()),d=k.useRef(t),[h,p]=k.useState(!0),[m,y]=k.useState(0),[x,T]=k.useState(!1),[S,w]=k.useState(null),[E,I]=k.useState(0),[R,L]=k.useState(0),[O,M]=k.useState(!1),[N,A]=k.useState(0),[j,z]=k.useState(!1),B=k.useRef(null),F=k.useRef(null),U=k.useRef(null),X=k.useRef(new Set),W=k.useRef(null),[H,Z]=k.useState(!1);k.useEffect(()=>{d.current=t},[t]);const ie=k.useCallback(()=>{c.current=Date.now(),h||p(!0)},[h]);k.useEffect(()=>{const K=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),h||p(!0)):h&&p(!1)},1e3);return()=>clearInterval(K)},[h]),k.useEffect(()=>{const K=["mousemove","keydown","scroll","click"];return K.forEach(te=>window.addEventListener(te,ie)),()=>K.forEach(te=>window.removeEventListener(te,ie))},[ie]),k.useEffect(()=>()=>{d.current(s.current)},[]),k.useEffect(()=>{if(!n||!a)return;const K=async te=>{var ye,Ue,ee,Me,ne,pe,Xe,Qe,St,ct,_t,Ee;const re=B.current;if(!re)return;const Ne=re.src?new URL(re.src).origin:"";if(te.origin!==window.location.origin&&te.origin!==Ne)return;const ae=te.origin,xe=te.data;if(!(!xe||typeof xe!="object"||!((ye=xe.type)!=null&&ye.startsWith("portal-"))))switch(ie(),xe.type){case"portal-ready":{T(!0);try{const Ve=await Ma(lt(Le,"practice_progress",`${n}_${a}`)),nt=Ve.exists()?Ve.data():null,mt=(nt==null?void 0:nt.answeredQuestions)||[];mt.forEach(Ye=>X.current.add(Ye)),I(mt.length),nt&&(W.current=nt,nt.completed&&(M(!0),A(nt.totalCompletions||1)));const Je=nt?{state:nt.state||null,currentQuestion:nt.currentQuestion??0}:null,de=nt!=null&&nt.completed?{completed:!0,completedAt:nt.completedAt,bestScore:nt.bestScore,totalCompletions:nt.totalCompletions||0,lastCompletion:((Ue=nt.completionHistory)==null?void 0:Ue.length)>0?nt.completionHistory[nt.completionHistory.length-1]:null}:null;(ee=re.contentWindow)==null||ee.postMessage({type:"portal-init",payload:{userId:n,savedState:Je,completionInfo:de}},ae)}catch(Ve){console.error("Bridge: Failed to load saved state",Ve),(Me=re.contentWindow)==null||Me.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},ae)}break}case"portal-save":{const{state:Ve,currentQuestion:nt}=xe.payload||{};if(!Ve)break;try{const mt=W.current,Je={userId:n,assignmentId:a,state:Ve,currentQuestion:nt??0,answeredQuestions:Array.from(X.current),lastUpdated:new Date().toISOString()};mt!=null&&mt.completed&&(Je.completed=mt.completed,Je.completedAt=mt.completedAt,Je.bestScore=mt.bestScore,Je.totalCompletions=mt.totalCompletions,Je.completionHistory=mt.completionHistory),await ra(lt(Le,"practice_progress",`${n}_${a}`),Je,{merge:!0}),W.current={...W.current,...Je},(ne=re.contentWindow)==null||ne.postMessage({type:"portal-save-ok"},ae)}catch(mt){console.error("Bridge: Save failed",mt),(pe=re.contentWindow)==null||pe.postMessage({type:"portal-save-error"},ae)}break}case"portal-complete":{const{score:Ve,totalQuestions:nt,correctAnswers:mt}=xe.payload||{};try{const Je=W.current,de=new Date().toISOString(),Ye={completedAt:de,score:Ve??0,totalQuestions:nt??0,correctAnswers:mt??0,answeredQuestions:Array.from(X.current)},At=[...(Je==null?void 0:Je.completionHistory)||[],Ye],xt=Math.max((Je==null?void 0:Je.bestScore)||0,Ve||0),gt=((Je==null?void 0:Je.totalCompletions)||0)+1,Vt={userId:n,assignmentId:a,completed:!0,completedAt:(Je==null?void 0:Je.completedAt)||de,bestScore:xt,totalCompletions:gt,completionHistory:At,answeredQuestions:Array.from(X.current),lastUpdated:de};Je!=null&&Je.state&&(Vt.state=Je.state,Vt.currentQuestion=Je.currentQuestion),await ra(lt(Le,"practice_progress",`${n}_${a}`),Vt,{merge:!0}),W.current={...W.current,...Vt},M(!0),A(gt),zn.xpGain(),w({text:"Module Complete!",type:"success"}),setTimeout(()=>w(null),3e3),(Xe=re.contentWindow)==null||Xe.postMessage({type:"portal-complete-ok",payload:{totalCompletions:gt,bestScore:xt}},ae)}catch(Je){console.error("Bridge: Completion save failed",Je),(Qe=re.contentWindow)==null||Qe.postMessage({type:"portal-complete-error"},ae)}break}case"portal-replay":{try{const Ve=W.current,nt={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(X.current),lastUpdated:new Date().toISOString(),completed:(Ve==null?void 0:Ve.completed)||!1,completedAt:(Ve==null?void 0:Ve.completedAt)||null,bestScore:(Ve==null?void 0:Ve.bestScore)||null,totalCompletions:(Ve==null?void 0:Ve.totalCompletions)||0,completionHistory:(Ve==null?void 0:Ve.completionHistory)||[]};await ra(lt(Le,"practice_progress",`${n}_${a}`),nt,{merge:!0}),W.current=nt,z(!1),(St=re.contentWindow)==null||St.postMessage({type:"portal-reset-ok"},ae)}catch(Ve){console.error("Bridge: Replay reset failed",Ve)}break}case"portal-answer":{const{questionId:Ve,correct:nt,attempts:mt}=xe.payload||{};if(!Ve)break;if(nt&&!X.current.has(Ve)){X.current.add(Ve),I(de=>de+1);const Je=mt===1?15:10;try{const Ye=(await Kq({assignmentId:a,questionId:Ve,xpAmount:Je,classType:i||"Uncategorized"})).data;if(Ye.awarded){const At=Ye.serverXP||Je;L(xt=>xt+At),w({text:`+${At} XP`,type:"success"}),zn.xpGain(),setTimeout(()=>w(null),2e3)}(ct=re.contentWindow)==null||ct.postMessage({type:"portal-xp-result",payload:{questionId:Ve,awarded:Ye.awarded,xp:Ye.serverXP||Je}},ae)}catch(de){console.error("Bridge: XP award failed",de),(_t=re.contentWindow)==null||_t.postMessage({type:"portal-xp-result",payload:{questionId:Ve,awarded:!1,xp:0}},ae)}}else nt&&((Ee=re.contentWindow)==null||Ee.postMessage({type:"portal-xp-result",payload:{questionId:Ve,awarded:!1,xp:0}},ae));break}}};return window.addEventListener("message",K),()=>window.removeEventListener("message",K)},[n,a,i,ie]);const fe=k.useCallback(()=>{const K=B.current;if(!K||!n||!a)return;const re=(K.src?new URL(K.src).origin:"")||window.location.origin;(async()=>{var Ne;try{const ae=W.current,xe={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(X.current),lastUpdated:new Date().toISOString(),completed:(ae==null?void 0:ae.completed)||!1,completedAt:(ae==null?void 0:ae.completedAt)||null,bestScore:(ae==null?void 0:ae.bestScore)||null,totalCompletions:(ae==null?void 0:ae.totalCompletions)||0,completionHistory:(ae==null?void 0:ae.completionHistory)||[]};await ra(lt(Le,"practice_progress",`${n}_${a}`),xe,{merge:!0}),W.current=xe,z(!1),(Ne=K.contentWindow)==null||Ne.postMessage({type:"portal-reset-ok"},re)}catch(ae){console.error("Replay reset failed",ae)}})()},[n,a]),me=k.useCallback(()=>{const K=U.current;K&&(document.fullscreenElement?document.exitFullscreen():K.requestFullscreen().catch(()=>{Z(te=>!te)}))},[]);return k.useEffect(()=>{const K=()=>Z(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",K),()=>document.removeEventListener("fullscreenchange",K)},[]),k.useEffect(()=>{if(F.current&&r){const K=r.replace(/\$(.*?)\$/g,(te,re)=>{try{return $x.renderToString(re,{throwOnError:!1})}catch{return re}});F.current.innerHTML=fG.sanitize(K,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h?"text-green-400":"text-yellow-500"}`,children:[h?o.jsx(D7,{className:"w-4 h-4"}):o.jsx(Os,{className:"w-4 h-4 animate-pulse"}),h?"Active Session":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(m/60),"m ",m%60,"s"]}),x&&E>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[o.jsx(Rn,{className:"w-3 h-3"})," ",E," answered"]}),x&&R>0&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[o.jsx($a,{className:"w-3 h-3"})," ",R," XP"]}),O&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[o.jsx(ec,{className:"w-3 h-3"}),"Completed",N>1?` (${N}x)`:""]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[O&&x&&(j?o.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[o.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),o.jsx("button",{onClick:fe,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),o.jsx("button",{onClick:()=>z(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):o.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[o.jsx(cle,{className:"w-3 h-3"})," Replay"]})),e&&o.jsxs("button",{onClick:me,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:H?"Exit full screen (Esc)":"Full screen",children:[H?o.jsx(rH,{className:"w-3 h-3"}):o.jsx(SA,{className:"w-3 h-3"}),H?"Exit Full Screen":"Full Screen"]}),x&&o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[o.jsx($a,{className:"w-3 h-3"})," XP Linked"]}),!h&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(Is,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&o.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?o.jsx(Rn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}),S.text]})}),o.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?o.jsx("div",{ref:U,className:"flex-1 flex flex-col bg-white",children:o.jsx("iframe",{ref:B,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ie})}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Hh,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),o.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&o.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[o.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[o.jsx(SA,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),o.jsx("div",{ref:F,className:"proctor-content text-sm leading-relaxed"})]})]})]})},lde=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(null),a=async()=>{e(!0),n(null);try{await nte(wA,Xse)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[o.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:o.jsxs("div",{className:"p-10 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Is,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"break-words",children:[o.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[o.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[o.jsx(Foe,{className:"w-4 h-4"}),"Action Required:"]}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",o.jsx("code",{children:"lib/firebase.ts"})," and replace",o.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),o.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),o.jsx("span",{children:"Sign in with Google"})]})}),o.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),o.jsx("span",{children:""}),o.jsx("span",{children:"Firebase Auth"})]})]})})]})},pG=k.createContext(null),al=()=>{const t=k.useContext(pG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},cde=({children:t})=>{const[e,r]=k.useState({isOpen:!1,options:{message:""}}),n=k.useRef(null),a=k.useRef(null),i=k.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),s=k.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=k.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);k.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),k.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&s()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return o.jsxs(pG.Provider,{value:{confirm:i},children:[t,e.isOpen&&o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),o.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[o.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[o.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:o.jsx(Is,{className:"w-5 h-5"})}),o.jsxs("div",{children:[e.options.title&&o.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),o.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),o.jsx("button",{ref:a,onClick:s,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),o.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},eg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=s=>{e.includes(s)?r(e.filter(c=>c!==s)):r([...e,s])};return o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(s=>o.jsx("button",{type:"button",onClick:()=>i(s),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(s)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:s},s))]})]})},GR={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:o.jsx(eH,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:o.jsx(Is,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:o.jsx(sle,{className:"w-4 h-4"})}},ude=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=al(),a=mi(),[i,s]=k.useState(!1),[c,d]=k.useState(""),[h,p]=k.useState(""),[m,y]=k.useState("INFO"),[x,T]=k.useState("GLOBAL"),[S,w]=k.useState([]),E=async()=>{if(!(!c.trim()||!h.trim()))try{await Pe.createAnnouncement({title:c.trim(),content:h.trim(),classType:x,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...S.length>0?{targetSections:S}:{}}),await Pe.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),s(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},I=async R=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Pe.deleteAnnouncement(R)};return o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Ox,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),o.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[o.jsx(Ri,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[o.jsx(Ox,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):o.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(R=>{var O;const L=GR[R.priority]||GR.INFO;return o.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[o.jsxs("div",{className:"flex gap-2 items-start",children:[o.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-bold text-white",children:R.title}),o.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:R.content}),o.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[R.classType==="GLOBAL"?"All Classes":R.classType,(O=R.targetSections)!=null&&O.length?`  ${R.targetSections.join(", ")}`:"","  ",new Date(R.createdAt).toLocaleDateString()]})]})]}),o.jsx("button",{onClick:()=>I(R.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:o.jsx(ua,{className:"w-3.5 h-3.5"})})]},R.id)})}),o.jsx(Ti,{isOpen:i,onClose:()=>s(!1),title:"New Announcement",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),o.jsx("input",{type:"text",value:c,onChange:R=>d(R.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),o.jsx("textarea",{value:h,onChange:R=>p(R.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),o.jsxs("select",{value:m,onChange:R=>y(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"INFO",children:"Info"}),o.jsx("option",{value:"WARNING",children:"Warning"}),o.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),o.jsxs("select",{value:x,onChange:R=>T(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Lr).filter(R=>R!=="Uncategorized").map(R=>o.jsx("option",{value:R,children:R},R))]})]})]}),o.jsx(eg,{availableSections:r,selectedSections:S,onChange:w}),o.jsx("button",{onClick:E,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},dde=({students:t,availableSections:e})=>{const{confirm:r}=al(),n=mi(),[a,i]=k.useState([]),[s,c]=k.useState(Lr.AP_PHYSICS),[d,h]=k.useState(!1),[p,m]=k.useState(""),[y,x]=k.useState(null),[T,S]=k.useState("");k.useEffect(()=>{const M=Pe.subscribeToStudentGroups(s,i);return()=>M()},[s]);const w=k.useMemo(()=>t.filter(M=>{var N;return M.role==="STUDENT"&&((N=M.enrolledClasses)==null?void 0:N.includes(s))}).filter(M=>!T||M.section===T),[t,s,T]),E=async()=>{if(p.trim())try{await Pe.createStudentGroup(p.trim(),s,[]),m(""),h(!1),n.success("Group created.")}catch{n.error("Failed to create group.")}},I=async M=>{await r({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Pe.deleteStudentGroup(M)},R=async(M,N)=>{if(M.members.some(j=>j.userId===N.id))return;const A=[...M.members,{userId:N.id,userName:N.name}];await Pe.updateStudentGroup(M.id,{members:A})},L=async(M,N)=>{const A=M.members.filter(j=>j.userId!==N);await Pe.updateStudentGroup(M.id,{members:A})},O=Object.values(Lr).filter(M=>M!=="Uncategorized");return o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Es,{className:"w-5 h-5 text-cyan-400"}),"Student Groups"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("select",{value:s,onChange:M=>c(M.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1 text-xs text-white",children:O.map(M=>o.jsx("option",{value:M,children:M},M))}),o.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-xl text-xs font-bold transition",children:[o.jsx(Ri,{className:"w-3.5 h-3.5"})," New Group"]})]})]}),d&&o.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-black/20 border border-white/10 rounded-xl",children:[o.jsx("input",{type:"text",value:p,onChange:M=>m(M.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-cyan-500",onKeyDown:M=>M.key==="Enter"&&E()}),o.jsx("button",{onClick:E,disabled:!p.trim(),className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-lg text-xs font-bold transition",children:"Create"}),o.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400 hover:text-white transition",children:o.jsx(Da,{className:"w-4 h-4"})})]}),a.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[o.jsx(Es,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No groups for ",s,"."]}):o.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto custom-scrollbar pr-1",children:a.map(M=>o.jsxs("div",{className:"p-4 bg-black/20 border border-white/10 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white text-sm",children:M.name}),o.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[M.members.length," member",M.members.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>x(y===M.id?null:M.id),className:`px-2 py-1 text-[10px] font-bold rounded-lg transition ${y===M.id?"bg-cyan-500/20 text-cyan-400":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:o.jsx(AA,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>I(M.id),className:"p-1 text-gray-500 hover:text-red-400 transition",children:o.jsx(ua,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[M.members.map(N=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg text-[11px] text-gray-300",children:[N.userName,o.jsx("button",{onClick:()=>L(M,N.userId),className:"text-gray-500 hover:text-red-400 transition",children:o.jsx(ple,{className:"w-3 h-3"})})]},N.userId)),M.members.length===0&&o.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No members yet  click the add button to assign students."})]}),y===M.id&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Add Students"}),e.length>0&&o.jsxs("select",{value:T,onChange:N=>S(N.target.value),className:"bg-black/30 border border-white/10 rounded px-1.5 py-0.5 text-[10px] text-white",children:[o.jsx("option",{value:"",children:"All Sections"}),e.map(N=>o.jsx("option",{value:N,children:N},N))]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-32 overflow-y-auto custom-scrollbar",children:w.filter(N=>!M.members.some(A=>A.userId===N.id)).map(N=>o.jsxs("button",{onClick:()=>R(M,N),className:"px-2 py-1 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-[11px] text-cyan-300 font-medium transition",children:["+ ",N.name]},N.id))})]})]},M.id))})]})},mG=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],WR=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],hde=["I","II","III","IV","V"],fde=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Kh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,WR.length-1),a=WR[n]||"Unknownium",i=hde[r],s=n+1,c=fde(s);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Ki={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},pde={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},KR=(t,e,r)=>{const n=Ki.UNSOCKET_BASE,a=pde[t],i=Math.max(1,e),s=1+r;return Math.ceil(n*a*i*s)},QR=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},gG=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},iE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([s,c])=>{e[s]+=c})}),e},Qh=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=i*10+s}),Math.floor(e))},XR=t=>t.runewordActive&&mG.find(e=>e.id===t.runewordActive)||null,ca=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Jd(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const mde=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var O,M,N,A,j,z,B,F,U,X;const[i,s]=k.useState(!1),c=((O=t.gamification)==null?void 0:O.level)||1,d=((M=t.gamification)==null?void 0:M.xp)||0,h=((N=t.gamification)==null?void 0:N.currency)||0,p=Kh(c),m=iE(t),y=t.enrolledClasses||(t.classType?[t.classType]:[]),x=((j=(A=t.gamification)==null?void 0:A.completedQuests)==null?void 0:j.length)||0,T=((B=(z=t.gamification)==null?void 0:z.activeQuests)==null?void 0:B.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").length)||0,S=k.useMemo(()=>y.map(W=>{var te,re;const H=((re=(te=t.gamification)==null?void 0:te.classXp)==null?void 0:re[W])||0,Z=Jd(t,W),ie=Qh(Z.equipped),fe=Z.inventory.length,me=e.filter(Ne=>{const ae=r.find(xe=>xe.id===Ne.assignmentId);return(ae==null?void 0:ae.classType)===W}),K=Math.round(me.reduce((Ne,ae)=>{var xe;return Ne+(((xe=ae.metrics)==null?void 0:xe.engagementTime)||0)},0)/60);return{cls:W,classXp:H,gearScore:ie,inventoryCount:fe,resourcesViewed:me.length,totalTime:K}}),[t,e,r,y]),w=k.useMemo(()=>{const W=new Map;return e.forEach(H=>{var K,te,re,Ne,ae,xe,ye;const Z=r.find(Ue=>Ue.id===H.assignmentId),ie=H.assignmentId,fe=W.get(ie),me=((K=H.metrics)==null?void 0:K.engagementTime)||0;fe?(fe.visits++,fe.totalTime+=me,fe.totalKeystrokes+=((te=H.metrics)==null?void 0:te.keystrokes)||0,fe.totalClicks+=((re=H.metrics)==null?void 0:re.clickCount)||0,fe.totalPastes+=((Ne=H.metrics)==null?void 0:Ne.pasteCount)||0,fe.statuses.push(H.status),H.submittedAt&&(!fe.lastVisit||H.submittedAt>fe.lastVisit)&&(fe.lastVisit=H.submittedAt)):W.set(ie,{title:(Z==null?void 0:Z.title)||H.assignmentTitle,classType:(Z==null?void 0:Z.classType)||"Unknown",category:(Z==null?void 0:Z.category)||"Supplemental",visits:1,totalTime:me,totalKeystrokes:((ae=H.metrics)==null?void 0:ae.keystrokes)||0,totalClicks:((xe=H.metrics)==null?void 0:xe.clickCount)||0,totalPastes:((ye=H.metrics)==null?void 0:ye.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(W.values()).sort((H,Z)=>Z.totalTime-H.totalTime)},[e,r]),E=k.useMemo(()=>e.filter(W=>W.submittedAt).sort((W,H)=>new Date(H.submittedAt).getTime()-new Date(W.submittedAt).getTime()).slice(0,10).map(W=>{var H,Z;return{...W,assignmentTitle:((H=r.find(ie=>ie.id===W.assignmentId))==null?void 0:H.title)||W.assignmentTitle,classType:((Z=r.find(ie=>ie.id===W.assignmentId))==null?void 0:Z.classType)||"Unknown"}}),[e,r]),I=Math.round(e.reduce((W,H)=>{var Z;return W+(((Z=H.metrics)==null?void 0:Z.engagementTime)||0)},0)/60),R=k.useMemo(()=>{const W=new Set;e.forEach(K=>{if(K.submittedAt){const te=new Date(K.submittedAt),re=te.getFullYear(),Ne=new Date(re,0,1),ae=Math.ceil(((te.getTime()-Ne.getTime())/864e5+Ne.getDay()+1)/7);W.add(`${re}-W${ae}`)}});const H=new Date,Z=H.getFullYear(),ie=new Date(Z,0,1),fe=Math.ceil(((H.getTime()-ie.getTime())/864e5+ie.getDay()+1)/7);let me=0;for(let K=fe;K>0&&W.has(`${Z}-W${K}`);K--)me++;return me},[e]),L=k.useMemo(()=>{const W=[],H=new Date;for(let re=6;re>=0;re--){const Ne=new Date(H);Ne.setDate(Ne.getDate()-re);const ae=Ne.toISOString().split("T")[0],xe=e.filter(Ue=>{var ee;return(ee=Ue.submittedAt)==null?void 0:ee.startsWith(ae)}),ye=xe.reduce((Ue,ee)=>{var Me;return Ue+(((Me=ee.metrics)==null?void 0:Me.engagementTime)||0)},0);W.push({label:Ne.toLocaleDateString([],{weekday:"short"}),time:Math.round(ye/60),subs:xe.length})}const Z=W.slice(4).reduce((re,Ne)=>re+Ne.time,0),ie=W.slice(0,4).reduce((re,Ne)=>re+Ne.time,0),fe=Z/3,me=ie/4,K=fe>me*1.2?"up":fe<me*.6?"down":"flat",te=Math.max(1,...W.map(re=>re.time));return{days:W,trend:K,maxTime:te}},[e]);return lu.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),o.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:o.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?o.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):o.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),((F=t.gamification)==null?void 0:F.codename)&&o.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),o.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:o.jsx(Da,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx($a,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Os,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[I,"m"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(_o,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Bd,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:x}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(TA,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:h}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(T2,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),o.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([W,H])=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:W}),o.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),o.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},W))})]}),n.length>0&&(()=>{const W=n[0],H=vd[W.bucket];return H?o.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[o.jsxs("span",{children:["ES: ",W.engagementScore]}),o.jsxs("span",{children:["Subs: ",W.metrics.submissionCount]}),o.jsxs("span",{children:["Days Active: ",W.metrics.activityDays,"/7"]}),o.jsxs("span",{children:["Paste Ratio: ",Math.round(W.metrics.avgPasteRatio*100),"%"]}),o.jsxs("span",{children:["Time: ",Math.round(W.metrics.totalTime/60),"m"]})]}),o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[o.jsx(tH,{className:"w-3.5 h-3.5 text-amber-400"}),o.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-2",children:W.recommendation.action}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:W.recommendation.categories.map(Z=>o.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Z},Z))})]}),(()=>{const Z=r.filter(ie=>ie.classType===W.classType&&ie.status==="ACTIVE"&&W.recommendation.categories.includes(ie.category||"Supplemental")).slice(0,3);return Z.length===0?null:o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),o.jsx("div",{className:"space-y-1",children:Z.map(ie=>o.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[o.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ie.category}),o.jsx("span",{className:"text-white truncate",children:ie.title})]},ie.id))})]})})()]}):null})(),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),o.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&o.jsx(j2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&o.jsx(fle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&o.jsx(nle,{className:"w-3.5 h-3.5 text-gray-400"}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),o.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((W,H)=>{const Z=L.maxTime>0?Math.max(2,W.time/L.maxTime*100):2,ie=H===L.days.length-1;return o.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[o.jsx("div",{className:`w-full rounded-t transition-all ${W.time>0?ie?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Z}%`}}),o.jsx("span",{className:"text-[8px] text-gray-500",children:W.label}),o.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[W.time,"m  ",W.subs," sub",W.subs!==1?"s":""]})]},H)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),o.jsx("div",{className:"space-y-3",children:S.map(W=>o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:W.cls}),o.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[W.classXp.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[o.jsxs("span",{children:[o.jsx(To,{className:"w-3 h-3 inline mr-0.5"}),W.gearScore," GS"]}),o.jsxs("span",{children:[o.jsx(TA,{className:"w-3 h-3 inline mr-0.5"}),W.inventoryCount," items"]}),o.jsxs("span",{children:[o.jsx(_o,{className:"w-3 h-3 inline mr-0.5"}),W.resourcesViewed," viewed"]}),o.jsxs("span",{children:[o.jsx(Os,{className:"w-3 h-3 inline mr-0.5"}),W.totalTime,"m"]})]})]},W.cls))})]}),w.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("button",{onClick:()=>s(!i),className:"flex items-center justify-between w-full mb-1",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[o.jsx(Yq,{className:"w-3.5 h-3.5"})," Resource Performance",o.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?o.jsx(_2,{className:"w-4 h-4 text-gray-500"}):o.jsx(Li,{className:"w-4 h-4 text-gray-500"})]}),i&&o.jsx("div",{className:"space-y-2 mt-3",children:w.map((W,H)=>{const Z=Math.round(W.totalTime/60),ie=W.totalKeystrokes>20&&W.totalClicks>5?"high":W.totalClicks>2?"medium":"low",fe=ie==="high"?"text-green-400":ie==="medium"?"text-yellow-400":"text-red-400",me=ie==="high"?"bg-green-500":ie==="medium"?"bg-yellow-500":"bg-red-500";return o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.title}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[W.classType,"  ",W.category]})]}),o.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${me}`,title:`${ie} engagement`})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Time"}),o.jsxs("div",{className:"text-white font-bold",children:[Z,"m"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Visits"}),o.jsx("div",{className:"text-white font-bold",children:W.visits})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Keys"}),o.jsx("div",{className:"text-white font-bold",children:W.totalKeystrokes})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Quality"}),o.jsx("div",{className:`font-bold capitalize ${fe}`,children:ie})]})]}),W.lastVisit&&o.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(W.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),E.length===0?o.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):o.jsx("div",{className:"space-y-2",children:E.map(W=>{var Z;const H=Math.round((((Z=W.metrics)==null?void 0:Z.engagementTime)||0)/60);return o.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.assignmentTitle}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[W.classType,"  ",H,"m engaged"]})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:W.submittedAt?new Date(W.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},W.id)})})]}),T>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),o.jsx("div",{className:"space-y-2",children:(X=(U=t.gamification)==null?void 0:U.activeQuests)==null?void 0:X.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").map(W=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bd,{className:`w-3.5 h-3.5 ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),o.jsx("span",{className:"text-xs text-white",children:W.questId})]}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:W.status})]},W.questId))})]}),o.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[o.jsxs("div",{children:["Email: ",t.email]}),o.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),o.jsxs("div",{children:["Enrolled: ",y.join(", ")||"None"]}),o.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),o.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&o.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},gde=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=al(),[a,i]=k.useState(null),[s,c]=k.useState([]),[d,h]=k.useState([]),[p,m]=k.useState([]),[y,x]=k.useState([]),[T,S]=k.useState(Date.now()),[w,E]=k.useState(null),[I,R]=k.useState("xp"),[L,O]=k.useState("desc"),M=ae=>{I===ae?O(xe=>xe==="asc"?"desc":"asc"):(R(ae),O("asc"))},N=({label:ae,col:xe,className:ye})=>o.jsx("th",{className:`cursor-pointer select-none group p-3 ${ye??""}`,onClick:()=>M(xe),children:o.jsxs("div",{className:`flex items-center gap-1 ${ye!=null&&ye.includes("text-center")?"justify-center":ye!=null&&ye.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:ae}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(_2,{className:`w-2.5 h-2.5 -mb-0.5 ${I===xe&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Li,{className:`w-2.5 h-2.5 -mt-0.5 ${I===xe&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});k.useEffect(()=>{const ae=Pe.subscribeToChatFlags(c),xe=Pe.subscribeToAnnouncements(h),ye=Pe.subscribeToStudentAlerts(m),Ue=Pe.subscribeToStudentBuckets(x),ee=setInterval(()=>S(Date.now()),6e4);return()=>{ae(),xe(),ye(),Ue(),clearInterval(ee)}},[]);const A=t.filter(ae=>ae.role==="STUDENT"),j=k.useMemo(()=>{const ae=new Set;return A.forEach(xe=>{xe.section&&ae.add(xe.section)}),Array.from(ae).sort()},[A]),z=k.useMemo(()=>{const ae=new Map;for(const xe of p){const ye=ae.get(xe.studentId),Ue={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!ye||(Ue[xe.riskLevel]||0)>(Ue[ye.riskLevel]||0))&&ae.set(xe.studentId,xe)}return ae},[p]),B=k.useMemo(()=>{const ae=new Map;for(const xe of y)ae.has(xe.studentId)||ae.set(xe.studentId,xe);return ae},[y]),F=k.useMemo(()=>{const ae={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},xe=new Set;for(const ye of y)xe.has(ye.studentId)||(xe.add(ye.studentId),ae[ye.bucket]!==void 0&&ae[ye.bucket]++);return ae},[y]),U=A.length,X=Math.round(A.reduce((ae,xe)=>{var ye;return ae+(((ye=xe.stats)==null?void 0:ye.totalTime)||0)},0)/(U||1)),W=A.reduce((ae,xe)=>{var ye;return ae+(((ye=xe.stats)==null?void 0:ye.problemsCompleted)||0)},0),H=A.reduce((ae,xe)=>{var ye;return ae+(((ye=xe.gamification)==null?void 0:ye.xp)||0)},0),Z=A.filter(ae=>ae.mutedUntil&&new Date(ae.mutedUntil).getTime()>T),ie=async ae=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Pe.muteUser(ae,0)},fe=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Pe.INDEFINITE_MUTE}],me=async(ae,xe)=>{await Pe.muteUser(ae,xe),E(null)},K=async(ae,xe)=>{const ye=new Date(xe).getTime(),Ue=new Date(Math.max(ye,Date.now())+3600*1e3),ee=Math.ceil((Ue.getTime()-Date.now())/6e4);await Pe.muteUser(ae,ee)},te=({label:ae,value:xe,icon:ye,color:Ue})=>o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[o.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Ue}`,children:ye}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:xe}),o.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:ae})]}),o.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Ue}`})]}),re=ae=>{const ye=new Date(ae).getTime()-T;if(ye<=0)return"Expired";const Ue=Math.ceil(ye/6e4);return Ue>60?`${Math.ceil(Ue/60)} hrs`:`${Ue} mins`},Ne=ae=>{if(!ae)return"Never";const xe=new Date(ae),ye=Date.now()-xe.getTime(),Ue=Math.floor(ye/6e4);if(Ue<1)return"Just now";if(Ue<60)return`${Ue}m ago`;const ee=Math.floor(Ue/60);return ee<24?`${ee}h ago`:xe.toLocaleDateString()};return o.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[o.jsx("div",{className:"flex justify-between items-end",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(te,{label:"Total Students",value:U,icon:o.jsx(Es,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),o.jsx(te,{label:"Total XP Awarded",value:H.toLocaleString(),icon:o.jsx($a,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),o.jsx(te,{label:"Resources Viewed",value:W,icon:o.jsx(Xm,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),o.jsx(te,{label:"Avg Active Time",value:`${X}m`,icon:o.jsx(Os,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?o.jsx(Is,{className:"w-5 h-5"}):o.jsx(N2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(jx,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):o.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(ae=>o.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-bold text-white",children:[ae.senderName," ",o.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",ae.classType]})]}),o.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',ae.content,'"']})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(ae.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:async()=>{await Pe.resolveFlag(ae.id),ae.messageId&&await Pe.unflagMessage(ae.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(ou,{className:"w-3 h-3"})," Dismiss"]}),o.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Pe.resolveFlag(ae.id),ae.messageId&&await Pe.deleteMessage(ae.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(ua,{className:"w-3 h-3"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>E(w===ae.id?null:ae.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:o.jsx(Ix,{className:"w-3 h-3"})}),w===ae.id&&o.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ae.senderName]}),fe.map(xe=>o.jsx("button",{onClick:()=>me(ae.senderId,xe.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:xe.label},xe.minutes))]})]})]})]},ae.id))})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[o.jsx(Ix,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),Z.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(Es,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[o.jsx("th",{className:"pb-2",children:"Operative"}),o.jsx("th",{className:"pb-2",children:"Remaining"}),o.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:Z.map(ae=>o.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[o.jsxs("td",{className:"py-3",children:[o.jsx("div",{className:"text-sm font-bold text-white",children:ae.name}),o.jsx("div",{className:"text-[10px] text-gray-500",children:ae.classType})]}),o.jsx("td",{className:"py-3",children:o.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:re(ae.mutedUntil)})}),o.jsx("td",{className:"py-3 text-right",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>K(ae.id,ae.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:o.jsx(Rx,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>ie(ae.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:o.jsx(jx,{className:"w-3.5 h-3.5"})})]})})]},ae.id))})]})})]})]}),p.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(KI,{className:"w-5 h-5"}),"Early Warning System"]}),o.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),o.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(ae=>{const xe={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},ye={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Ue=ae.bucket?vd[ae.bucket]:null;return o.jsx("div",{className:`border p-4 rounded-xl ${xe[ae.riskLevel]||xe.LOW}`,children:o.jsxs("div",{className:"flex justify-between items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${ye[ae.riskLevel]||ye.LOW}`,children:ae.riskLevel}),Ue&&o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Ue.bgColor} ${Ue.color} ${Ue.borderColor} border`,children:Ue.label}),o.jsx("span",{className:"text-sm font-bold text-white truncate",children:ae.studentName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:ae.classType})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:ae.message}),Ue&&o.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Ue.description}),o.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["ES: ",ae.engagementScore]}),o.jsxs("span",{children:["Class Avg: ",ae.classMean]}),o.jsx("span",{children:new Date(ae.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsx("button",{onClick:()=>i(ae.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),o.jsx("button",{onClick:async()=>{await Pe.dismissAlert(ae.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},ae.id)})})]}),y.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(KI,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),o.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(vd).map(ae=>{const xe=vd[ae],ye=F[ae];return o.jsxs("div",{className:`border rounded-xl p-3 ${xe.borderColor} ${xe.bgColor} transition hover:scale-[1.02]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-xs font-bold ${xe.color}`,children:xe.label}),o.jsx("span",{className:"text-lg font-bold text-white",children:ye})]}),o.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:xe.description})]},ae)})}),(()=>{const ae=Object.values(F).reduce((xe,ye)=>xe+ye,0);return ae===0?null:o.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(vd).map(xe=>{const ye=F[xe]/ae*100;if(ye===0)return null;const Ue={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return o.jsx("div",{className:`${Ue[xe]||"bg-gray-500"} transition-all`,style:{width:`${ye}%`},title:`${vd[xe].label}: ${F[xe]} (${Math.round(ye)}%)`},xe)})})})()]}),o.jsx("div",{className:"mt-8",children:o.jsx(ude,{announcements:d,studentIds:A.map(ae=>ae.id),availableSections:j})}),o.jsx("div",{className:"mt-8",children:o.jsx(dde,{students:A,availableSections:j})}),o.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[o.jsx(N,{label:"Student",col:"name"}),o.jsx(N,{label:"Class",col:"class"}),o.jsx(N,{label:"Last Seen",col:"lastSeen",className:"text-center"}),o.jsx(N,{label:"Total Time",col:"time",className:"text-center"}),o.jsx(N,{label:"Resources",col:"resources",className:"text-center"}),o.jsx(N,{label:"XP",col:"xp",className:"text-right"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const ae=[...A].sort((ye,Ue)=>{var ee,Me,ne,pe,Xe,Qe,St,ct;switch(I){case"name":return L==="asc"?ye.name.localeCompare(Ue.name):Ue.name.localeCompare(ye.name);case"class":return L==="asc"?(ye.classType||"").localeCompare(Ue.classType||""):(Ue.classType||"").localeCompare(ye.classType||"");case"lastSeen":{const _t=ye.lastLoginAt?new Date(ye.lastLoginAt).getTime():0,Ee=Ue.lastLoginAt?new Date(Ue.lastLoginAt).getTime():0;return L==="asc"?_t-Ee:Ee-_t}case"time":{const _t=((ee=ye.stats)==null?void 0:ee.totalTime)||0,Ee=((Me=Ue.stats)==null?void 0:Me.totalTime)||0;return L==="asc"?_t-Ee:Ee-_t}case"resources":{const _t=((ne=ye.stats)==null?void 0:ne.problemsCompleted)||0,Ee=((pe=Ue.stats)==null?void 0:pe.problemsCompleted)||0;return L==="asc"?_t-Ee:Ee-_t}case"xp":default:{const _t=((Qe=(Xe=ye.gamification)==null?void 0:Xe.classXp)==null?void 0:Qe[ye.classType||""])||0,Ee=((ct=(St=Ue.gamification)==null?void 0:St.classXp)==null?void 0:ct[Ue.classType||""])||0;return L==="asc"?_t-Ee:Ee-_t}}}),xe=Math.max(1,...A.map(ye=>{var Ue,ee;return((ee=(Ue=ye.gamification)==null?void 0:Ue.classXp)==null?void 0:ee[ye.classType||""])||0}));return ae.map(ye=>{var Ee,Ve,nt,mt;const Ue=((Ve=(Ee=ye.gamification)==null?void 0:Ee.classXp)==null?void 0:Ve[ye.classType||""])||0,ee=Math.round(Ue/xe*100),Me=ye.lastLoginAt,ne=Me?Date.now()-new Date(Me).getTime():1/0,pe=ne<36e5?"text-green-400":ne<864e5?"text-yellow-400":ne<1/0?"text-red-400":"text-gray-600",Xe=ne<36e5?"bg-green-500":ne<864e5?"bg-yellow-500":ne<1/0?"bg-red-500":"bg-gray-600",Qe=z.get(ye.id),St={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ct=B.get(ye.id),_t=ct?vd[ct.bucket]:null;return o.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(Qe==null?void 0:Qe.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(ye.id),children:[o.jsx("td",{className:"p-3 font-bold text-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[ye.avatarUrl?o.jsx("img",{src:ye.avatarUrl,alt:ye.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):o.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:ye.name.charAt(0)}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Xe}`})]}),o.jsx("span",{className:"truncate max-w-[120px]",children:ye.name}),Qe&&St[Qe.riskLevel]&&o.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${St[Qe.riskLevel]}`,title:`${Qe.riskLevel} risk: ${Qe.reason}`}),_t&&o.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${_t.bgColor} ${_t.color} border ${_t.borderColor}`,title:_t.description,children:_t.label})]})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:ye.classType}),o.jsx("td",{className:`p-3 text-center text-xs font-mono ${pe}`,children:Ne(ye.lastLoginAt)}),o.jsxs("td",{className:"p-3 text-center text-white",children:[((nt=ye.stats)==null?void 0:nt.totalTime)||0,"m"]}),o.jsx("td",{className:"p-3 text-center text-white",children:((mt=ye.stats)==null?void 0:mt.problemsCompleted)||0}),o.jsx("td",{className:"p-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${ee}%`}})}),o.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ue})]})})]},ye.id)})})()})]})})]}),a&&(()=>{const ae=A.find(xe=>xe.id===a);return ae?o.jsx(mde,{student:ae,submissions:r.filter(xe=>xe.userId===a),assignments:e,bucketProfiles:y.filter(xe=>xe.studentId===a),onClose:()=>i(null)}):null})()]})},yde=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=mi(),{confirm:i}=al(),[s,c]=k.useState(new Set),[d,h]=k.useState(Lr.AP_PHYSICS),[p,m]=k.useState(!1),[y,x]=k.useState(!1),[T,S]=k.useState({}),w=(we,ot)=>{S(bt=>{const Ct=bt[we]||{col:"name",dir:"asc"};return{...bt,[we]:{col:ot,dir:Ct.col===ot&&Ct.dir==="asc"?"desc":"asc"}}})},E=({label:we,col:ot,type:bt,className:Ct})=>{const Lt=T[bt]||{col:"name",dir:"asc"},et=Lt.col===ot;return o.jsx("th",{className:`cursor-pointer select-none group p-4 ${Ct??""}`,onClick:()=>w(bt,ot),children:o.jsxs("div",{className:`flex items-center gap-1 ${Ct!=null&&Ct.includes("text-center")?"justify-center":"justify-start"}`,children:[o.jsx("span",{children:we}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(_2,{className:`w-2.5 h-2.5 -mb-0.5 ${et&&Lt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Li,{className:`w-2.5 h-2.5 -mt-0.5 ${et&&Lt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[I,R]=k.useState(""),[L,O]=k.useState(Lr.AP_PHYSICS),[M,N]=k.useState(""),[A,j]=k.useState(""),[z,B]=k.useState(!1),[F,U]=k.useState(!1),[X,W]=k.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,Z]=k.useState(10),[ie,fe]=k.useState("single"),[me,K]=k.useState([]),[te,re]=k.useState(!1),Ne=k.useRef(null),[ae,xe]=k.useState(null),[ye,Ue]=k.useState(""),[ee,Me]=k.useState(""),ne=t.filter(we=>we.role==="STUDENT"),pe=k.useMemo(()=>{const we=new Set;return ne.forEach(ot=>{ot.classSections&&Object.values(ot.classSections).forEach(bt=>{bt&&we.add(bt)}),ot.section&&we.add(ot.section)}),Array.from(we).sort()},[ne]),Xe=async(we,ot,bt)=>{try{bt?await Pe.updateUserClassSection(we,bt,ot):await Pe.updateUserSection(we,ot),xe(null),Ue(""),Me(""),a.success(`Section updated to ${ot||"none"}${bt?` for ${bt}`:""}`)}catch{a.error("Failed to update section")}},Qe=async we=>{if(s.size!==0)try{await Promise.all(Array.from(s).map(ot=>Pe.updateUserSection(ot,we))),c(new Set),a.success(`Set ${s.size} students to ${we}`)}catch{a.error("Failed to bulk update sections")}},St=k.useMemo(()=>e.filter(we=>!t.some(ot=>ot.email.toLowerCase()===we.email.toLowerCase())),[e,t]),ct=k.useMemo(()=>[...Array.from(new Set([...Object.values(Lr).filter(ot=>ot!==Lr.UNCATEGORIZED),...r.map(ot=>ot.className)])).sort(),Lr.UNCATEGORIZED],[r]),_t=we=>{const ot=ne.filter(Lt=>{var et,mr;return((et=Lt.enrolledClasses)==null?void 0:et.includes(we))||we===Lr.UNCATEGORIZED&&(((mr=Lt.enrolledClasses)==null?void 0:mr.length)===0||!Lt.enrolledClasses)}),bt=ot.every(Lt=>s.has(Lt.id)),Ct=new Set(s);ot.forEach(Lt=>{bt?Ct.delete(Lt.id):Ct.add(Lt.id)}),c(Ct)},Ee=we=>{const ot=new Set(s);ot.has(we)?ot.delete(we):ot.add(we),c(ot)},Ve=async()=>{if(s.size>0){const we=Array.from(s).map(async ot=>{const bt=t.find(Ct=>Ct.id===ot);if(bt){const Ct=bt.enrolledClasses||[],Lt=Array.from(new Set([...Ct.filter(et=>et!==Lr.UNCATEGORIZED),d]));await Pe.updateUserEnrolledClasses(ot,Lt)}});await Promise.all(we),c(new Set)}},nt=async we=>{if(s.size>0){if(!await i({message:`Remove ${s.size} students from ${we}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const ot=Array.from(s).map(async bt=>{const Ct=t.find(Lt=>Lt.id===bt);if(Ct){const et=(Ct.enrolledClasses||[]).filter(mr=>mr!==we);await Pe.updateUserEnrolledClasses(bt,et)}});await Promise.all(ot),c(new Set)}},mt=async(we,ot)=>{if(await i({message:`Remove ${we.name} from ${ot}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Ct=(we.enrolledClasses||[]).filter(Lt=>Lt!==ot);await Pe.updateUserEnrolledClasses(we.id,Ct)}},Je=async(we,ot)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${ot}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Pe.removeUser(we)},de=async we=>{we!==Lr.UNCATEGORIZED&&await i({message:`Delete group config ${we}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Pe.deleteClassConfig(we)},Ye=async we=>{await i({message:`Cancel invite for ${we}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Pe.removeFromWhitelist(we)},At=(we,ot)=>{we!==Lr.UNCATEGORIZED&&(j(we),B(!0),ot?(W(ot.features),Z(ot.xpPerMinute||10)):(W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),Z(10)),x(!0))},xt=we=>{we.preventDefault(),n(I,L),M.trim()&&Pe.updateWhitelistSection(I,M.trim()),R(""),N(""),m(!1)},gt=we=>{var Ct;const ot=(Ct=we.target.files)==null?void 0:Ct[0];if(!ot)return;const bt=new FileReader;bt.onload=Lt=>{var Bt,it;const et=(Bt=Lt.target)==null?void 0:Bt.result;if(!et)return;const mr=et.split(/\r?\n/).filter(Kt=>Kt.trim()),wn=(it=mr[0])!=null&&it.toLowerCase().includes("email")?1:0,Dn=new Set(e.map(Kt=>Kt.email.toLowerCase())),Cr=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ur=mr.slice(wn).map(Kt=>{const br=Kt.includes("	")?Kt.split("	"):Kt.split(","),yr=(br[0]||"").trim().toLowerCase(),Or=(br[1]||"").trim()||Lr.AP_PHYSICS,kn=(br[2]||"").trim();let er="pending";return Cr.test(yr)?Dn.has(yr)&&(er="duplicate"):er="invalid",{email:yr,classType:Or,section:kn,status:er}}).filter(Kt=>Kt.email.length>0);K(ur)},bt.readAsText(ot),we.target.value=""},Vt=async()=>{const we=me.filter(bt=>bt.status==="pending");if(we.length===0)return;re(!0);let ot=0;for(const bt of we)try{await Pe.addToWhitelist(bt.email,bt.classType),bt.section&&await Pe.updateWhitelistSection(bt.email,bt.section),bt.status="success",ot++}catch{bt.status="invalid"}K([...me]),re(!1),a.success(`${ot} operative${ot!==1?"s":""} imported successfully.`),me.every(bt=>bt.status==="success"||bt.status==="duplicate")&&setTimeout(()=>{m(!1),K([]),fe("single")},1500)},cr=async we=>{if(we.preventDefault(),!!A){U(!0);try{await Pe.saveClassConfig({id:A,className:A,features:X,xpPerMinute:H}),j(""),x(!1),B(!1)}catch(ot){console.error("Failed to save config:",ot),a.error("Failed to save class configuration.")}finally{U(!1)}}},Hr=we=>{if(!we)return"Never";const ot=new Date(we),bt=Date.now()-ot.getTime(),Ct=Math.floor(bt/6e4);if(Ct<60)return`${Ct}m ago`;const Lt=Math.floor(Ct/60);return Lt<24?`${Lt}h ago`:ot.toLocaleDateString()},Pr=we=>{const ot=we===Lr.UNCATEGORIZED,bt=T[we]||{col:"name",dir:"asc"},Ct=[...ne.filter(et=>{var mr;return((mr=et.enrolledClasses)==null?void 0:mr.includes(we))||ot&&(!et.enrolledClasses||et.enrolledClasses.length===0)})].sort((et,mr)=>{var wn,Dn,Cr,ur;switch(bt.col){case"section":{const Bt=et.section||"",it=mr.section||"";return bt.dir==="asc"?Bt.localeCompare(it):it.localeCompare(Bt)}case"status":{const Bt=et.isWhitelisted?1:0,it=mr.isWhitelisted?1:0;return bt.dir==="asc"?Bt-it:it-Bt}case"lastSeen":{const Bt=et.lastLoginAt?new Date(et.lastLoginAt).getTime():0,it=mr.lastLoginAt?new Date(mr.lastLoginAt).getTime():0;return bt.dir==="asc"?Bt-it:it-Bt}case"xp":{const Bt=((Dn=(wn=et.gamification)==null?void 0:wn.classXp)==null?void 0:Dn[we])||0,it=((ur=(Cr=mr.gamification)==null?void 0:Cr.classXp)==null?void 0:ur[we])||0;return bt.dir==="asc"?Bt-it:it-Bt}case"name":default:return bt.dir==="asc"?et.name.localeCompare(mr.name):mr.name.localeCompare(et.name)}}),Lt=r.find(et=>et.className===we);return o.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${ot?"opacity-90":""}`,children:[o.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${ot?"bg-orange-500/10":"bg-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h3",{className:`font-bold text-lg tracking-wide ${ot?"text-orange-300":"text-white"}`,children:[ot&&o.jsx(Loe,{className:"w-5 h-5 inline mr-2 mb-1"}),we]}),o.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${ot?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Ct.length," Registered"]}),!ot&&o.jsx("button",{onClick:()=>At(we,Lt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:o.jsx(Ym,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[s.size>0&&Array.from(s).some(et=>Ct.find(mr=>mr.id===et))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex items-center gap-1",children:o.jsxs("select",{onChange:et=>{et.target.value&&Qe(et.target.value),et.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[o.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),o.jsx("option",{value:"",children:"No Section"}),pe.map(et=>o.jsx("option",{value:et,children:et},et))]})}),o.jsxs("button",{onClick:()=>nt(we),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[o.jsx(mle,{className:"w-3 h-3"})," Remove Selected"]})]}),!ot&&o.jsxs("button",{onClick:()=>de(we),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[o.jsx(ua,{className:"w-3 h-3"}),"Config"]})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[o.jsx("th",{className:"w-12 p-4 text-center",children:Ct.length>0&&o.jsx("button",{onClick:()=>_t(we),className:"hover:text-purple-400 transition",children:o.jsx(rR,{className:"w-4 h-4"})})}),o.jsx(E,{label:"Operative",col:"name",type:we}),o.jsx(E,{label:"Section",col:"section",type:we,className:"text-center"}),o.jsx(E,{label:"System Status",col:"status",type:we,className:"text-center"}),o.jsx(E,{label:"Last Seen",col:"lastSeen",type:we,className:"text-center"}),o.jsx(E,{label:"Class XP",col:"xp",type:we,className:"text-center"}),o.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:Ct.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500 italic text-sm",children:ot?"No restricted operatives found.":"No students registered in this roster yet."})}):Ct.map(et=>{var wn,Dn,Cr,ur,Bt;const mr=((Dn=(wn=et.gamification)==null?void 0:wn.classXp)==null?void 0:Dn[we])||0;return o.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(et.id)?"bg-purple-500/10":""}`,children:[o.jsx("td",{className:"p-4 text-center",children:o.jsx("button",{onClick:()=>Ee(et.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(et.id)?o.jsx(dle,{className:"w-4 h-4 text-purple-500"}):o.jsx(rR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:et.avatarUrl,alt:et.name,className:"w-8 h-8 rounded-full border border-white/10"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:et.name}),o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:et.email})]})]})}),o.jsx("td",{className:"p-4 text-center",children:ae===et.id?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((Cr=et.enrolledClasses)!=null&&Cr.length?et.enrolledClasses:[et.classType].filter(Boolean)).map(it=>{var br;if(!it)return null;const Kt=((br=et.classSections)==null?void 0:br[it])||(et.section&&et.classType===it?et.section:"");return o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[o.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:it,children:it}),o.jsxs("select",{value:Kt,onChange:yr=>{const Or=yr.target.value;Or==="__custom__"?(Ue("__custom__"),Me("")):Xe(et.id,Or,it)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[o.jsx("option",{value:"",children:"None"}),pe.map(yr=>o.jsx("option",{value:yr,children:yr},yr)),o.jsx("option",{value:"__custom__",children:"+ New"})]})]},it)}),ye==="__custom__"&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx("input",{value:ee,onChange:it=>Me(it.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:it=>{var Kt;if(it.key==="Enter"&&ee.trim()){const br=(Kt=et.enrolledClasses)!=null&&Kt.length?et.enrolledClasses:[et.classType].filter(Boolean);br[0]&&Xe(et.id,ee.trim(),br[0])}},autoFocus:!0}),o.jsx("button",{onClick:()=>{var it;if(ee.trim()){const Kt=(it=et.enrolledClasses)!=null&&it.length?et.enrolledClasses:[et.classType].filter(Boolean);Kt[0]&&Xe(et.id,ee.trim(),Kt[0])}},className:"text-green-400 hover:text-green-300 p-1",children:o.jsx(Ri,{className:"w-3 h-3"})})]}),o.jsx("button",{onClick:()=>{xe(null),Ue(""),Me("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):o.jsx("button",{onClick:()=>{xe(et.id),Ue(""),Me("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${et.classSections&&Object.keys(et.classSections).length>0||et.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:et.classSections&&Object.keys(et.classSections).length>0?Object.values(et.classSections).filter(Boolean).join(", ")||"Assign":et.section||"Assign"})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${et.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[et.isWhitelisted?o.jsx(eR,{className:"w-3 h-3"}):o.jsx(N2,{className:"w-3 h-3"}),et.isWhitelisted?"Authorized":"Restricted"]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[o.jsx(Os,{className:"w-3 h-3"}),Hr(et.lastLoginAt)]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-lg text-purple-300",children:mr.toLocaleString()}),(((ur=et.enrolledClasses)==null?void 0:ur.length)||0)>1&&o.jsxs("details",{className:"mt-1",children:[o.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),o.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(Bt=et.enrolledClasses)==null?void 0:Bt.map(it=>{var Kt,br;return o.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[o.jsx("span",{className:`truncate ${it===we?"text-purple-400 font-bold":"text-gray-500"}`,children:it}),o.jsx("span",{className:"text-gray-400 font-mono",children:(((br=(Kt=et.gamification)==null?void 0:Kt.classXp)==null?void 0:br[it])||0).toLocaleString()})]},it)})})]})]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsx("button",{onClick:()=>ot?Je(et.id,et.name):mt(et,we),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:ot?"Permanently Delete":"Remove from this Class",children:o.jsx(Da,{className:"w-4 h-4"})})})})]},et.id)})})]})})]},we)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[o.jsxs("button",{onClick:()=>{j(""),W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),B(!1),x(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[o.jsx(Ym,{className:"w-4 h-4"}),"Class Config"]}),o.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[o.jsx(AA,{className:"w-4 h-4"}),"Invite Student"]})]})]}),St.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[o.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[o.jsx(Joe,{className:"w-4 h-4"})," Pending Class Invitations (",St.length,")"]}),o.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),o.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:St.map(we=>o.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:we.email}),o.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[o.jsx(eR,{className:"w-3 h-3 text-amber-500"}),o.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(we.classTypes||[we.classType]).join(", ")," Access"]})]})]}),o.jsx("button",{onClick:()=>Ye(we.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:o.jsx(ua,{className:"w-3.5 h-3.5"})})]},we.email))})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[o.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),o.jsxs("div",{className:"relative w-full sm:w-auto",children:[o.jsx("select",{value:d,onChange:we=>h(we.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:ct.filter(we=>we!==Lr.UNCATEGORIZED).map(we=>o.jsxs("option",{value:we,children:["Apply ",we," Access"]},we))}),o.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),o.jsxs("button",{onClick:Ve,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),o.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),o.jsx("div",{className:"pb-12",children:ct.map(we=>Pr(we))}),o.jsxs(Ti,{isOpen:p,onClose:()=>{m(!1),K([]),fe("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[o.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>{fe("single"),K([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(AA,{className:"w-3.5 h-3.5"})," Single"]}),o.jsxs("button",{onClick:()=>fe("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(Zd,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ie==="single"?o.jsxs("form",{onSubmit:xt,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:I,onChange:we=>R(we.target.value),placeholder:"student@gmail.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),o.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:we=>O(we.target.value),children:ct.filter(we=>we!==Lr.UNCATEGORIZED).map(we=>o.jsx("option",{value:we,children:we},we))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),o.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:M,onChange:we=>N(we.target.value),placeholder:"e.g. Period 3, Block A"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[o.jsx("input",{type:"file",ref:Ne,accept:".csv,.tsv,.txt",onChange:gt,className:"hidden"}),me.length===0?o.jsxs(o.Fragment,{children:[o.jsx(Zd,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),o.jsx("button",{onClick:()=>{var we;return(we=Ne.current)==null?void 0:we.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",o.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),o.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:o.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",o.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",o.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",o.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xm,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),o.jsxs("p",{className:"text-sm font-bold text-white",children:[me.length," records parsed"]}),o.jsx("button",{onClick:()=>{K([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),me.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[o.jsx("th",{className:"p-2 pl-3",children:"Email"}),o.jsx("th",{className:"p-2",children:"Class"}),o.jsx("th",{className:"p-2",children:"Section"}),o.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:me.map((we,ot)=>o.jsxs("tr",{className:we.status==="invalid"?"bg-red-500/5":we.status==="duplicate"?"bg-yellow-500/5":we.status==="success"?"bg-green-500/5":"",children:[o.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:we.email}),o.jsx("td",{className:"p-2 text-gray-400",children:we.classType}),o.jsx("td",{className:"p-2 text-gray-500",children:we.section||""}),o.jsx("td",{className:"p-2 pr-3 text-right",children:o.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${we.status==="pending"?"bg-blue-500/20 text-blue-400":we.status==="success"?"bg-green-500/20 text-green-400":we.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:we.status})})]},ot))})]})}),o.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-blue-400",children:[me.filter(we=>we.status==="pending").length," ready"]}),o.jsxs("span",{className:"text-yellow-400",children:[me.filter(we=>we.status==="duplicate").length," duplicates"]}),o.jsxs("span",{className:"text-red-400",children:[me.filter(we=>we.status==="invalid").length," invalid"]}),me.some(we=>we.status==="success")&&o.jsxs("span",{className:"text-green-400",children:[me.filter(we=>we.status==="success").length," imported"]})]})}),me.filter(we=>we.status==="duplicate").length>0&&o.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[o.jsx(Is,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),o.jsx("button",{onClick:Vt,disabled:te||me.filter(we=>we.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:te?o.jsxs(o.Fragment,{children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," Importing..."]}):o.jsxs(o.Fragment,{children:["Import ",me.filter(we=>we.status==="pending").length," Operatives"]})})]})]})]}),o.jsx(Ti,{isOpen:y,onClose:()=>x(!1),title:z?"Edit Class Node Config":"Initialize New Class Node",children:o.jsxs("form",{onSubmit:cr,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),o.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:we=>j(we.target.value),placeholder:"e.g. AP Physics Period 4"}),z&&o.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:X.physicsLab,onChange:we=>W({...X,physicsLab:we.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:X.evidenceLocker,onChange:we=>W({...X,evidenceLocker:we.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:X.leaderboard,onChange:we=>W({...X,leaderboard:we.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:X.physicsTools,onChange:we=>W({...X,physicsTools:we.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:X.communications,onChange:we=>W({...X,communications:we.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"number",min:1,max:100,value:H,onChange:we=>Z(Math.max(1,Math.min(100,parseInt(we.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),o.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),o.jsx("button",{type:"submit",disabled:F,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${F?"opacity-70 cursor-not-allowed":""}`,children:F?o.jsxs(o.Fragment,{children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):z?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Xc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},YR={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},vde=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,xde=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,bde=({assignment:t,isOpen:e,onClose:r})=>{const n=mi(),a=k.useRef(null),[i,s]=k.useState([]),[c,d]=k.useState(!0),[h,p]=k.useState(!1),[m,y]=k.useState(t.category==="Practice Set"?"reading":"manage"),[x,T]=k.useState(null),[S,w]=k.useState(null),[E,I]=k.useState(""),[R,L]=k.useState(null),[O,M]=k.useState(!1),[N,A]=k.useState(null),[j,z]=k.useState({}),[B,F]=k.useState(null),[U,X]=k.useState(!0),[W,H]=k.useState(null),[Z,ie]=k.useState(null),[fe,me]=k.useState(null),[K,te]=k.useState(!1),re=k.useRef(null),Ne=t.category==="Practice Set";k.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const Ve=await Ma(lt(Le,"question_banks",t.id));Ve.exists()?s(Ve.data().questions||[]):s([]);const nt=await Ma(lt(Le,"reading_materials",t.id));nt.exists()?H(nt.data()):H(null)}catch(Ve){console.error("Failed to load bank:",Ve),s([])}finally{d(!1)}})()},[e,t.id]);const ae=async Ee=>{p(!0);try{await ra(lt(Le,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ee,questionCount:Ee.length,updatedAt:new Date().toISOString()}),s(Ee)}catch(Ve){n.error("Failed to save: "+(Ve instanceof Error?Ve.message:"Unknown error"))}finally{p(!1)}},xe=async Ee=>{const Ve=i.filter(nt=>nt.id!==Ee);await ae(Ve),n.success("Question removed."),R===Ee&&L(null)},ye=async()=>{try{await Wa(lt(Le,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Ue=()=>{navigator.clipboard.writeText(vde(t.title,t.classType,t.description)),M(!0),setTimeout(()=>M(!1),2e3),n.success("Prompt copied!")},ee=()=>{navigator.clipboard.writeText(xde(t.title,t.classType,t.description)),te(!0),setTimeout(()=>te(!1),2e3),n.success("Reading prompt copied!")},Me=async Ee=>{var nt;const Ve=(nt=Ee.target.files)==null?void 0:nt[0];if(Ve){me(null),ie(null);try{let Je=(await Ve.text()).replace(/```json\s*|```\s*/g,"").trim();Je=Je.replace(/[\x00-\x1F\x7F]/g,At=>At===`
`||At==="\r"||At==="	"?" ":"");let de;try{de=JSON.parse(Je)}catch{const At=Je.match(/\{[\s\S]*\}/);if(At)de=JSON.parse(At[0]);else throw new Error("No JSON object found.")}if(!de.title||!de.sections||!Array.isArray(de.sections))throw new Error("Missing required fields: title and sections array.");const Ye=de.sections.filter(At=>!At.title||!At.content);if(Ye.length>0)throw new Error(`${Ye.length} section(s) missing title or content.`);ie(de)}catch(mt){me(mt instanceof Error?mt.message:"Parse failed.")}re.current&&(re.current.value="")}},ne=async()=>{if(Z){p(!0);try{await ra(lt(Le,"reading_materials",t.id),{...Z,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(Z),ie(null),n.success(`Study material uploaded: ${Z.sections.length} sections!`)}catch(Ee){n.error("Failed to save: "+(Ee instanceof Error?Ee.message:"Unknown error"))}finally{p(!1)}}},pe=async()=>{p(!0);try{await Wa(lt(Le,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},Xe=async Ee=>{var nt;const Ve=(nt=Ee.target.files)==null?void 0:nt[0];if(Ve){F(null),A(null);try{let Je=(await Ve.text()).replace(/```json\s*|```\s*/g,"").trim();Je=Je.replace(/[\x00-\x1F\x7F]/g,gt=>gt===`
`||gt==="\r"||gt==="	"?" ":"");let de;try{de=JSON.parse(Je)}catch{const gt=Je.match(/\[[\s\S]*\]/);if(gt)try{de=JSON.parse(gt[0])}catch{const Vt=gt[0];let cr=null;for(let Hr=Vt.length-1;Hr>0;Hr--)if(Vt[Hr]==="}")try{cr=JSON.parse(Vt.slice(0,Hr+1)+"]");break}catch{}if(cr)de=cr;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Vt=null;const cr="["+Je;for(let Hr=cr.length-1;Hr>0;Hr--)if(cr[Hr]==="}")try{Vt=JSON.parse(cr.slice(0,Hr+1)+"]");break}catch{}if(Vt)de=Vt;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(de)||de.length===0)throw new Error("Must be a non-empty JSON array.");const Ye=de.filter(gt=>gt.id&&gt.tier&&gt.type&&gt.stem&&gt.options&&gt.correctAnswer),At=de.length-Ye.length;if(Ye.length===0){F("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const xt={};Ye.forEach(gt=>{const Vt=gt.tier;xt[Vt]=(xt[Vt]||0)+1}),A(Ye),z(xt),At>0&&n.success(`Parsed ${Ye.length} questions (${At} skipped  missing fields).`)}catch(mt){F(mt instanceof Error?mt.message:"Parse failed.")}a.current&&(a.current.value="")}},Qe=async()=>{if(!N)return;let Ee;if(U&&i.length>0){const Ve=new Set(i.map(mt=>mt.id)),nt=N.map((mt,Je)=>({...mt,id:Ve.has(mt.id)?`${mt.id}_${Date.now()}_${Je}`:mt.id}));Ee=[...i,...nt]}else Ee=N;await ae(Ee),n.success(`${U?"Added":"Replaced with"} ${N.length} questions. Total: ${Ee.length}`),A(null),y("manage")},St=k.useMemo(()=>{let Ee=i;if(x&&(Ee=Ee.filter(Ve=>Ve.tier===x)),S&&(Ee=Ee.filter(Ve=>Ve.type===S)),E){const Ve=E.toLowerCase();Ee=Ee.filter(nt=>nt.stem.toLowerCase().includes(Ve)||nt.id.toLowerCase().includes(Ve))}return Ee},[i,x,S,E]),ct=k.useMemo(()=>{const Ee={1:0,2:0,3:0};return i.forEach(Ve=>{Ee[Ve.tier]=(Ee[Ve.tier]||0)+1}),Ee},[i]),_t=k.useMemo(()=>{const Ee={};return i.forEach(Ve=>{Ee[Ve.type]=(Ee[Ve.type]||0)+1}),Ee},[i]);return e?o.jsx(Ti,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:o.jsxs("div",{className:"text-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[o.jsx(_h,{className:"w-5 h-5 text-purple-400 shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),o.jsx("div",{className:"text-xs mt-1",children:c?o.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?o.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):o.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&o.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ee=>o.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Xc[Ee].bg} ${Xc[Ee].border} border`,children:[o.jsx("div",{className:`text-sm font-bold ${Xc[Ee].text}`,children:ct[Ee]}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ee]})]},Ee))})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[!Ne&&o.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!Ne&&o.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(Ri,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),o.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",W?`(${W.sections.length})`:""]})]}),m==="manage"&&o.jsx("div",{className:"space-y-3",children:c?o.jsx("div",{className:"py-12 text-center",children:o.jsx(rs,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?o.jsxs("div",{className:"py-12 text-center",children:[o.jsx(_h,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[o.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[o.jsx(cH,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),o.jsx("input",{value:E,onChange:Ee=>I(Ee.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ee=>o.jsxs("button",{onClick:()=>T(x===Ee?null:Ee),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x===Ee?`${Xc[Ee].bg} ${Xc[Ee].text} ${Xc[Ee].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ee," (",ct[Ee],")"]},Ee))]})]}),Object.keys(_t).length>1&&o.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(_t).sort((Ee,Ve)=>Ve[1]-Ee[1]).map(([Ee,Ve])=>o.jsxs("button",{onClick:()=>w(S===Ee?null:Ee),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Ee?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[YR[Ee]||Ee," (",Ve,")"]},Ee))}),o.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:St.length===0?o.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):St.map(Ee=>{const Ve=Xc[Ee.tier]||Xc[1],nt=R===Ee.id;return o.jsxs("div",{className:`rounded-xl border transition ${nt?`${Ve.border} ${Ve.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[o.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(nt?null:Ee.id),children:[o.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${Ve.bg} ${Ve.text}`,children:["T",Ee.tier]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[o.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ee.id}),o.jsx("span",{className:"text-[8px] text-gray-600",children:""}),o.jsx("span",{className:"text-[8px] text-gray-500",children:YR[Ee.type]||Ee.type}),o.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx($a,{className:"w-2.5 h-2.5"}),Ee.xp]})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ee.stem})]}),o.jsx(Ld,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${nt?"rotate-90":""}`})]}),nt&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ee.context&&o.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ee.context}),o.jsx("div",{className:"space-y-1",children:Ee.options.map(mt=>{const Je=Array.isArray(Ee.correctAnswer)?Ee.correctAnswer.includes(mt.id):Ee.correctAnswer===mt.id;return o.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Je?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[o.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[mt.id.toUpperCase(),"."]}),o.jsx("span",{children:mt.text}),Je&&o.jsx(Rn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},mt.id)})}),o.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ee.explanation]}),Ee.linkedFollowUp&&o.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ee.linkedFollowUp.stem]}),o.jsxs("button",{onClick:()=>xe(Ee.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[o.jsx(ua,{className:"w-3 h-3"})," Delete Question"]})]})]},Ee.id)})}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[o.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",St.length," of ",i.length]}),o.jsxs("button",{onClick:ye,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(ua,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),o.jsx("button",{onClick:Ue,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${O?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:O?o.jsxs(o.Fragment,{children:[o.jsx(Rn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),o.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",o.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[o.jsx(Cx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:Xe,className:"hidden"})]})]}),B&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(Is,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:B})]}),N&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-emerald-400"}),o.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[N.length," questions parsed"]})]}),o.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ee=>o.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[o.jsx("div",{className:"text-base font-bold text-white",children:j[Ee]||0}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ee]})]},Ee))}),i.length>0&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>X(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${U?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[o.jsx(Ri,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",N.length,")"]}),o.jsxs("button",{onClick:()=>X(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${U?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[o.jsx(qh,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:Qe,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(rs,{className:"w-4 h-4 animate-spin"}):o.jsx(Zd,{className:"w-4 h-4"}),h?"Saving...":`Upload ${N.length} Questions`]}),o.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(ua,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&o.jsxs("div",{className:"space-y-5",children:[W?o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_o,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:W.title})]}),o.jsxs("button",{onClick:pe,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(ua,{className:"w-3 h-3"})," Remove"]})]}),W.description&&o.jsx("p",{className:"text-xs text-gray-400",children:W.description}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:[W.sections.length," sections"]}),W.estimatedMinutes&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["~",W.estimatedMinutes," min read"]})]})]}),o.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:W.sections.map((Ee,Ve)=>o.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:Ve+1}),o.jsx("span",{className:"truncate",children:Ee.title})]},Ve))})]}):o.jsxs("div",{className:"py-6 text-center",children:[o.jsx(_o,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),o.jsx("button",{onClick:ee,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${K?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:K?o.jsxs(o.Fragment,{children:[o.jsx(Rn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[o.jsx(Cx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:re,type:"file",accept:".json,.txt",onChange:Me,className:"hidden"})]})]}),fe&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(Is,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:fe})]}),Z&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),o.jsxs("p",{className:"text-xs text-gray-400",children:[Z.sections.length," sections  ~",Z.estimatedMinutes||"?"," min read"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:ne,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(rs,{className:"w-4 h-4 animate-spin"}):o.jsx(Zd,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),o.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(ua,{className:"w-4 h-4"})})]})]})]}),h&&o.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[o.jsx(rs,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},ZR=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],wde={Textbook:o.jsx(_o,{className:"w-4 h-4"}),Simulation:o.jsx(D7,{className:"w-4 h-4"}),"Lab Guide":o.jsx(A2,{className:"w-4 h-4"}),"Practice Set":o.jsx(Ao,{className:"w-4 h-4"}),Article:o.jsx(nH,{className:"w-4 h-4"}),"Video Lesson":o.jsx(dH,{className:"w-4 h-4"}),Supplemental:o.jsx(L7,{className:"w-4 h-4"})},Sde=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:s=[]})=>{const c=mi(),{confirm:d}=al(),[h,p]=k.useState(!1),[m,y]=k.useState(!1),[x,T]=k.useState(!1),[S,w]=k.useState("All Classes"),[E,I]=k.useState("All Categories"),[R,L]=k.useState(new Set),[O,M]=k.useState(null),[N,A]=k.useState({title:"",description:"",status:Ia.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[j,z]=k.useState(new Set([Lr.AP_PHYSICS])),[B,F]=k.useState([]),[U,X]=k.useState(""),[W,H]=k.useState(!1),Z=k.useMemo(()=>n.filter(ee=>ee.role==="STUDENT"),[n]),ie=k.useMemo(()=>{const ee=Object.values(Lr).filter(ne=>ne!==Lr.UNCATEGORIZED),Me=(r||[]).map(ne=>ne.className);return Array.from(new Set(["All Classes",...ee,...Me]))},[r]),fe=k.useMemo(()=>{const ee=Array.from(j)[0];if(!ee)return s;const Me=Pv(Z,ee);return Me.length>0?Me:s},[j,Z,s]),me=k.useMemo(()=>t.filter(ee=>{const Me=S==="All Classes"||ee.classType===S,ne=E==="All Categories"||ee.category===E;return Me&&ne}),[t,S,E]),K=k.useMemo(()=>{const ee={};return me.forEach(Me=>{const ne=S==="All Classes"?`${Me.classType.toUpperCase()}  ${Me.unit||"Unassigned"}`:Me.unit||"Unassigned";ee[ne]||(ee[ne]=[]),ee[ne].push(Me)}),Object.keys(ee).sort().reduce((Me,ne)=>(Me[ne]=ee[ne],Me),{})},[me,S]),te=async(ee,Me)=>{if(j.size===0){c.error("Select a target class.");return}T(!0);try{const ne=B.length>0?{targetSections:B}:{},pe=Me?{scheduledAt:new Date(Me).toISOString()}:{},Xe={...N,status:ee,...ne,...pe};m&&N.id?await a({...Xe,classType:Array.from(j)[0]}):await Promise.all(Array.from(j).map(Qe=>a({...Xe,classType:Qe}))),p(!1),y(!1),X(""),c.success(ee===Ia.DRAFT?"Draft saved.":Me?"Deployment scheduled.":"Resource deployed.")}catch(ne){console.error(ne)}finally{T(!1)}},re=async ee=>{ee.preventDefault(),await te(Ia.ACTIVE)},Ne=async ee=>{await Pe.updateAssignmentStatus(ee.id,Ia.ACTIVE),c.success(`"${ee.title}" deployed.`)},ae=ee=>{A(ee),z(new Set([ee.classType])),F(ee.targetSections||[]),X(ee.scheduledAt?ee.scheduledAt.slice(0,16):""),y(!0),p(!0)},xe=async ee=>{const Me=ee.status===Ia.ACTIVE?Ia.ARCHIVED:Ia.ACTIVE;await Pe.updateAssignmentStatus(ee.id,Me)},ye=k.useMemo(()=>[...Array.isArray(e)?e:[]].sort((Me,ne)=>{const pe=new Date(Me.submittedAt||0).getTime();return new Date(ne.submittedAt||0).getTime()-pe}),[e]),Ue=ee=>ee.status===Ia.DRAFT?o.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):ee.scheduledAt&&new Date(ee.scheduledAt)>new Date?o.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[o.jsx(XI,{className:"w-3 h-3"}),new Date(ee.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return o.jsxs("div",{className:"space-y-8 pb-12",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),o.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),o.jsxs("button",{onClick:()=>{A({title:"",description:"",status:Ia.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),F([]),X(""),y(!1),p(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[o.jsx(Ri,{className:"w-5 h-5"})," Deploy Resource"]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:S,onChange:ee=>w(ee.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ie.map(ee=>o.jsx("option",{value:ee,children:ee},ee))}),o.jsx(Li,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:E,onChange:ee=>I(ee.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[o.jsx("option",{value:"All Categories",children:"All Categories"}),ZR.map(ee=>o.jsx("option",{value:ee,children:ee},ee))]}),o.jsx(Li,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(K).map(([ee,Me])=>o.jsxs("div",{className:"mb-6 last:mb-0",children:[o.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[o.jsx("button",{onClick:()=>{const ne=new Set(R);ne.has(ee)?ne.delete(ee):ne.add(ee),L(ne)},className:"text-gray-400 hover:text-white transition",children:R.has(ee)?o.jsx(Li,{className:"w-4 h-4"}):o.jsx(Ld,{className:"w-4 h-4"})}),o.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:ee}),o.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!R.has(ee)&&o.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:Me.map(ne=>{const pe=Ue(ne);return o.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ne.status===Ia.ARCHIVED?"bg-white/2 border-white/5 opacity-60":ne.status===Ia.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[o.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ne.status===Ia.DRAFT?"bg-blue-500/20 text-blue-400":ne.status===Ia.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:ne.status===Ia.DRAFT?o.jsx(Xm,{className:"w-4 h-4"}):wde[ne.category||"Supplemental"]}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ne.title}),pe,o.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ne.classType})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ne.description})]})]}),o.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[ne.status===Ia.DRAFT&&o.jsx("button",{onClick:()=>Ne(ne),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:o.jsx(oH,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>M(ne),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:o.jsx(Vo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>i==null?void 0:i(ne.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:o.jsx(ale,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ae(ne),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:o.jsx(lle,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>xe(ne),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ne.status===Ia.ACTIVE?o.jsx(koe,{className:"w-4 h-4"}):o.jsx(Hh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Pe.deleteAssignment(ne.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:o.jsx(ua,{className:"w-4 h-4"})})]})]},ne.id)})})]},ee))})]}),o.jsx("div",{className:"lg:col-span-4",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[o.jsx(Os,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),o.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[ye.length===0&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[o.jsx(Os,{className:"w-10 h-10 text-gray-700 mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),ye.map(ee=>o.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:ee.userName}),o.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:ee.assignmentTitle})]}),o.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(ee.score)," XP"]})]}),o.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[o.jsxs("span",{children:[Math.round(ee.metrics.engagementTime/60),"m active"]}),o.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(ee.submittedAt||"").toLocaleDateString()})]})]},ee.id))]})]})})]}),o.jsx(Ti,{isOpen:h,onClose:()=>p(!1),title:m?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:o.jsxs("form",{onSubmit:re,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:N.title,onChange:ee=>A({...N,title:ee.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:N.unit,onChange:ee=>A({...N,unit:ee.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),o.jsx("select",{value:N.category,onChange:ee=>A({...N,category:ee.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:ZR.map(ee=>o.jsx("option",{value:ee,children:ee},ee))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:ie.filter(ee=>ee!=="All Classes").map(ee=>o.jsx("button",{type:"button",onClick:()=>{const Me=new Set(j);Me.has(ee)?Me.size>1&&Me.delete(ee):Me.add(ee),z(Me),F([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${j.has(ee)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:ee},ee))})]}),o.jsx(eg,{availableSections:fe,selectedSections:B,onChange:F}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[o.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),o.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async ee=>{var Me;if((Me=ee.target.files)!=null&&Me[0]){H(!0);try{const ne=await Pe.uploadHtmlResource(ee.target.files[0]);A({...N,contentUrl:ne}),c.success("File uploaded!")}catch(ne){c.error("Upload failed: "+(ne instanceof Error?ne.message:"Unknown error"))}finally{H(!1)}}}}),W&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!W&&N.contentUrl&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[o.jsx(jx,{className:"w-4 h-4"})," Resource uploaded"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",o.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),o.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:N.description,onChange:ee=>A({...N,description:ee.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",o.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),o.jsx("input",{type:"datetime-local",value:U,onChange:ee=>X(ee.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"button",disabled:x,onClick:()=>te(Ia.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[o.jsx(Xm,{className:"w-4 h-4"})," Save Draft"]}),U?o.jsx("button",{type:"button",disabled:x,onClick:()=>te(Ia.ACTIVE,U),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:x?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(XI,{className:"w-4 h-4"})," Schedule Deployment"]})}):o.jsx("button",{type:"submit",disabled:x,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:x?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),O&&o.jsx(bde,{assignment:O,isOpen:!!O,onClose:()=>M(null)})]})},yG=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),o.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),o.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),o.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:o.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),o.jsxs("g",{filter:"url(#b-glow)",children:[o.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),o.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),o.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),o.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>o.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),_de=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),o.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:o.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),o.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>o.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[o.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),o.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),o.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),o.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),o.jsxs("g",{filter:"url(#p-glow)",children:[o.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),o.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),o.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),o.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return o.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[o.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),Tde=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),o.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),o.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),o.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),o.jsxs("g",{filter:"url(#s-glow)",children:[o.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),o.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),o.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>o.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),o.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>o.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Ade={BRUTE:yG,PHANTOM:_de,SERPENT:Tde},vG=({bossType:t,hue:e,size:r})=>{const n=Ade[t]||yG;return o.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:o.jsx(n,{hue:e})})},Nde=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Ede=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,s]=k.useState(null),c=k.useMemo(()=>{var x;if(!t)return[];const y=Object.keys(((x=t.gamification)==null?void 0:x.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=k.useMemo(()=>{var x,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((x=t.gamification)==null?void 0:x.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=Jd(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[o.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:o.jsx(Ri,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:o.jsx(Da,{className:"w-4 h-4"})})]})]})]}),c.length>1&&o.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>o.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),o.jsxs("div",{className:"border-b border-white/5 pb-6",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&o.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:Nde.map(y=>{var T;const x=(T=h.equipped)==null?void 0:T[y];return o.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${x?ca(x.rarity).border+" "+ca(x.rarity).bg:"border-white/10 bg-black/20"}`,children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:x.name}),o.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:o.jsx(Da,{className:"w-3 h-3"})})]}):o.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),o.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,x)=>o.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ca(y.rarity).border}`,children:[o.jsx("div",{className:`text-[8px] font-bold ${ca(y.rarity).text} text-center truncate w-full`,children:y.name}),o.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),o.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:o.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:o.jsx(ua,{className:"w-4 h-4"})})})]},x)),h.inventory.length===0&&o.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},jde=[10,50,100,-10,-50,-100],kde=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,a]=k.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.email}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:jde.map(c=>o.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),o.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},Cde=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&o.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return o.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),o.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[o.jsx(Ao,{className:"w-3 h-3"}),n.quest.title]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),o.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),o.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&o.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:o.jsx($oe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),o.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:o.jsx(ou,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:o.jsx(Da,{className:"w-5 h-5"})})]})]})]})]},a)})]}),v3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},Ode=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:s,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return o.jsx(Ti,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:o.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),o.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),o.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),o.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),o.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),o.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),o.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),o.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"",children:"All Classes"}),Object.values(Lr).filter(h=>h!=="Uncategorized").map(h=>o.jsx("option",{value:h,children:h},h))]})]})]}),o.jsx(eg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),o.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),o.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[o.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),o.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),o.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),o.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"COMMON",children:"Common"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&o.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[o.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),o.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),o.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),o.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),o.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),o.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),o.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[i&&o.jsx("button",{type:"button",disabled:s,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),o.jsx("button",{type:"submit",disabled:s,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:s?"Transmitting...":"Broadcast Mission"})]})]})})},Ide=({users:t})=>{const e=mi(),{confirm:r}=al(),[n,a]=k.useState("OPERATIVES"),[i,s]=k.useState(""),[c,d]=k.useState("All Classes"),[h,p]=k.useState("All Sections"),[m,y]=k.useState("xp"),[x,T]=k.useState("desc"),S=q=>{m===q?T(Se=>Se==="asc"?"desc":"asc"):(y(q),T("asc"))},w=({label:q,col:Se,className:Ae})=>o.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Ae??""}`,onClick:()=>S(Se),children:o.jsxs("div",{className:`flex items-center gap-1 ${Ae!=null&&Ae.includes("text-center")?"justify-center":Ae!=null&&Ae.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:q}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(_2,{className:`w-2.5 h-2.5 -mb-0.5 ${m===Se&&x==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Li,{className:`w-2.5 h-2.5 -mt-0.5 ${m===Se&&x==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[E,I]=k.useState([]),[R,L]=k.useState([]),[O,M]=k.useState(null),[N,A]=k.useState(null),[j,z]=k.useState(!1),[B,F]=k.useState(!1),[U,X]=k.useState(v3),[W,H]=k.useState(!1),[Z,ie]=k.useState([]),[fe,me]=k.useState(null),[K,te]=k.useState(""),[re,Ne]=k.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Lr.AP_PHYSICS,targetSections:[]}),[ae,xe]=k.useState([]),[ye,Ue]=k.useState(!1),[ee,Me]=k.useState(null),[ne,pe]=k.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[Xe,Qe]=k.useState(!1),St=k.useRef(null),[ct,_t]=k.useState(null),[Ee,Ve]=k.useState([]),[nt,mt]=k.useState("bosses"),[Je,de]=k.useState(!1),[Ye,At]=k.useState(null),[xt,gt]=k.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Vt=k.useRef(null),[cr,Hr]=k.useState(null),[Pr,we]=k.useState([]),[ot,bt]=k.useState(null),[Ct,Lt]=k.useState([]),[et,mr]=k.useState(!1),[wn,Dn]=k.useState("pending"),[Cr,ur]=k.useState([]);k.useEffect(()=>{const q=Pe.subscribeToXPEvents(I),Se=Pe.subscribeToQuests(L),Ae=Pe.subscribeToAllBossQuizzes(xe),je=Pe.subscribeToAllTutoringSessions(ur),ft=Pe.subscribeToBossQuestionBanks(Ve);return()=>{q(),Se(),Ae(),je(),ft()}},[]),k.useEffect(()=>{const q=[];t.forEach(Se=>{var Ae,je;(je=(Ae=Se.gamification)==null?void 0:Ae.activeQuests)==null||je.forEach(ft=>{const Rt=R.find(jt=>jt.id===ft.questId);Rt&&(ft.status==="DEPLOYED"||ft.status==="ACCEPTED")&&q.push({user:Se,quest:Rt,status:ft.status,roll:ft.deploymentRoll,acceptedAt:ft.acceptedAt})})}),ie(q)},[t,R,n]);const Bt=k.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),it=k.useMemo(()=>{const q=new Set;return Bt.forEach(Se=>{Se.classSections?Object.values(Se.classSections).forEach(Ae=>{Ae&&q.add(Ae)}):Se.section&&q.add(Se.section)}),Array.from(q).sort()},[Bt]),Kt=k.useMemo(()=>{if(re.type!=="CLASS_SPECIFIC"||!re.targetClass)return it;const q=Pv(Bt,re.targetClass);return q.length>0?q:it},[re.type,re.targetClass,Bt,it]),br=k.useMemo(()=>{if(!U.targetClass)return it;const q=Pv(Bt,U.targetClass);return q.length>0?q:it},[U.targetClass,Bt,it]),yr=k.useMemo(()=>{if(ne.classType==="GLOBAL"||!ne.classType)return it;const q=Pv(Bt,ne.classType);return q.length>0?q:it},[ne.classType,Bt,it]),Or=q=>{var Ae,je;const Se=(Ae=q.gamification)==null?void 0:Ae.classProfiles;return Se&&Object.keys(Se).length>0?Object.values(Se).reduce((ft,Rt)=>ft+Qh(Rt.equipped),0):Qh((je=q.gamification)==null?void 0:je.equipped)},kn=k.useMemo(()=>Bt.filter(q=>{var Rt;const Se=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Ae=c==="All Classes"||q.classType===c||((Rt=q.enrolledClasses)==null?void 0:Rt.includes(c)),je=q.classSections?Object.values(q.classSections):[],ft=h==="All Sections"||q.section===h||je.includes(h);return Se&&Ae&&ft}).sort((q,Se)=>{var Ae,je,ft,Rt,jt,Yt,Sr,Zr,oe,be;switch(m){case"name":return x==="asc"?q.name.localeCompare(Se.name):Se.name.localeCompare(q.name);case"class":return x==="asc"?(q.classType||"").localeCompare(Se.classType||""):(Se.classType||"").localeCompare(q.classType||"");case"level":{const ze=((Ae=q.gamification)==null?void 0:Ae.level)||1,De=((je=Se.gamification)==null?void 0:je.level)||1;return x==="asc"?ze-De:De-ze}case"flux":{const ze=((ft=q.gamification)==null?void 0:ft.currency)||0,De=((Rt=Se.gamification)==null?void 0:Rt.currency)||0;return x==="asc"?ze-De:De-ze}case"gear":{const ze=Or(q),De=Or(Se);return x==="asc"?ze-De:De-ze}case"xp":default:{const ze=c!=="All Classes"?((Yt=(jt=q.gamification)==null?void 0:jt.classXp)==null?void 0:Yt[c])||0:((Sr=q.gamification)==null?void 0:Sr.xp)||0,De=c!=="All Classes"?((oe=(Zr=Se.gamification)==null?void 0:Zr.classXp)==null?void 0:oe[c])||0:((be=Se.gamification)==null?void 0:be.xp)||0;return x==="asc"?ze-De:De-ze}}}),[Bt,i,c,h,m,x]),er=async(q,Se)=>{try{await Pe.adjustUserXP(q.id,Se,q.classType||Lr.UNCATEGORIZED),e.success(`${Se>0?"+":""}${Se} XP applied to ${q.name}.`)}catch{e.error("Failed to adjust XP.")}M(null)},ga=async q=>{q.preventDefault();const Se={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!0,type:re.type};re.type==="CLASS_SPECIFIC"&&(Se.targetClass=re.targetClass),re.targetSections.length>0&&(Se.targetSections=re.targetSections),await Pe.saveXPEvent(Se),z(!1),Ne({title:"",multiplier:2,type:"GLOBAL",targetClass:Lr.AP_PHYSICS,targetSections:[]})},cn=async q=>{q.preventDefault(),H(!0);try{const Se={};U.techReq>0&&(Se.tech=U.techReq),U.focusReq>0&&(Se.focus=U.focusReq),U.analysisReq>0&&(Se.analysis=U.analysisReq),U.charismaReq>0&&(Se.charisma=U.charismaReq);const Ae=new Date;Ae.setHours(Ae.getHours()+(U.durationHours||0));const je={id:Math.random().toString(36).substring(2,9),title:U.title,description:U.description,xpReward:U.xpReward,fluxReward:U.fluxReward,isActive:!0,type:U.type,statRequirements:Se,startsAt:U.startsAt?new Date(U.startsAt).toISOString():null,expiresAt:U.durationHours>0?Ae.toISOString():null,itemRewardRarity:U.lootRarity||null,rollDieSides:U.dieSides||20,consequenceText:U.consequence||null,isGroupQuest:U.isGroup,targetClass:U.targetClass||void 0,targetSections:U.targetSections.length>0?U.targetSections:void 0};await Pe.saveQuest(je),e.success(`Mission "${je.title}" deployed.`),X(v3),F(!1)}catch(Se){console.error("Failed to issue mission:",Se),e.error("Failed to issue mission.")}finally{H(!1)}},Cn=async q=>{await Pe.saveXPEvent({...q,isActive:!q.isActive})},ti=async q=>{const Se={...q,isActive:!q.isActive};Se.isActive&&(Se.expiresAt=null),await Pe.saveQuest(Se)},Ar=async(q,Se,Ae)=>{var Rt,jt;if(!await r({message:`Confiscate ${Se.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const ft=(Ae?Jd(q,Ae):{inventory:((Rt=q.gamification)==null?void 0:Rt.inventory)||[]}).inventory.filter(Yt=>Yt.id!==Se.id);await Pe.adminUpdateInventory(q.id,ft,((jt=q.gamification)==null?void 0:jt.currency)||0,Ae),A(Yt=>{var Sr,Zr;return Yt?Ae&&((Zr=(Sr=Yt.gamification)==null?void 0:Sr.classProfiles)!=null&&Zr[Ae])?{...Yt,gamification:{...Yt.gamification,classProfiles:{...Yt.gamification.classProfiles,[Ae]:{...Yt.gamification.classProfiles[Ae],inventory:ft}}}}:{...Yt,gamification:{...Yt.gamification,inventory:ft}}:null})},un=async(q,Se,Ae)=>{var Rt;if(!await r({message:`Force unequip ${Se} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const ft={...(Ae?Jd(q,Ae):{equipped:{...(Rt=q.gamification)==null?void 0:Rt.equipped}}).equipped};delete ft[Se],await Pe.adminUpdateEquipped(q.id,ft,Ae),A(jt=>{var Yt,Sr;return jt?Ae&&((Sr=(Yt=jt.gamification)==null?void 0:Yt.classProfiles)!=null&&Sr[Ae])?{...jt,gamification:{...jt.gamification,classProfiles:{...jt.gamification.classProfiles,[Ae]:{...jt.gamification.classProfiles[Ae],equipped:ft}}}}:{...jt,gamification:{...jt.gamification,equipped:ft}}:null})},ri=async(q,Se)=>{var je,ft;const Ae=Math.max(0,(((je=q.gamification)==null?void 0:je.currency)||0)+Se);await Pe.adminUpdateInventory(q.id,((ft=q.gamification)==null?void 0:ft.inventory)||[],Ae),A(Rt=>Rt?{...Rt,gamification:{...Rt.gamification,currency:Ae}}:null)},Kn=async(q,Se,Ae,je)=>{try{await Pe.resolveQuest(q,Se,Ae,je),e.success(Ae?`Mission "${Se.title}" approved.`:`Mission "${Se.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},Yr=async q=>{const Se=q.quest.rollDieSides||20,Ae=Math.floor(Math.random()*Se)+1;e.info(`Rolled a ${Ae} on a D${Se}. ${Ae===Se?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Kn(q.user.id,q.quest,Ae===Se,q.user.classType)},dn=async q=>{try{await Pe.updateCodename(q,K.trim().slice(0,24)),e.success("Code name updated.")}catch{e.error("Failed to update code name.")}me(null)},Sn=async(q,Se)=>{try{await Pe.toggleCodenameLock(q,Se),e.success(Se?"Codename locked.":"Codename unlocked.")}catch{e.error("Failed to update lock.")}},ni=q=>{var Se,Ae,je,ft,Rt;if(q)Me(q),pe({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((Se=q.rewards)==null?void 0:Se.xp)||500,rewardFlux:((Ae=q.rewards)==null?void 0:Ae.flux)||100,rewardItemRarity:((je=q.rewards)==null?void 0:je.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(jt=>({...jt,damageBonus:jt.damageBonus||0})),targetSections:q.targetSections||[],bossType:((ft=q.bossAppearance)==null?void 0:ft.bossType)||"BRUTE",bossHue:((Rt=q.bossAppearance)==null?void 0:Rt.hue)??0}),we(q.modifiers||[]);else{Me(null);const jt=new Date;jt.setDate(jt.getDate()+7),pe({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:jt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),we([])}Ue(!0)},Fa=()=>{pe(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Ai=(q,Se,Ae)=>{pe(je=>{const ft=[...je.questions];return ft[q]={...ft[q],[Se]:Ae},{...je,questions:ft}})},os=(q,Se,Ae)=>{pe(je=>{const ft=[...je.questions],Rt=[...ft[q].options];return Rt[Se]=Ae,ft[q]={...ft[q],options:Rt},{...je,questions:ft}})},gi=q=>{pe(Se=>({...Se,questions:Se.questions.filter((Ae,je)=>je!==q)}))},Nt=async q=>{if(q.preventDefault(),ne.questions.length===0){e.error("Add at least one question.");return}try{const Se=[...new Set(ne.questions.map(je=>je.bankId).filter(Boolean))],Ae={id:(ee==null?void 0:ee.id)||Math.random().toString(36).substring(2,12),bossName:ne.bossName,description:ne.description,maxHp:ne.maxHp,currentHp:(ee==null?void 0:ee.currentHp)??ne.maxHp,classType:ne.classType,isActive:(ee==null?void 0:ee.isActive)??!0,deadline:new Date(ne.deadline).toISOString(),damagePerCorrect:ne.damagePerCorrect,questions:ne.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(ft=>ft.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{},...je.bankId?{bankId:je.bankId}:{}})),rewards:{xp:ne.rewardXp,flux:ne.rewardFlux,...ne.rewardItemRarity?{itemRarity:ne.rewardItemRarity}:{}},...ne.targetSections.length>0?{targetSections:ne.targetSections}:{},bossAppearance:{bossType:ne.bossType,hue:ne.bossHue},...Pr.length>0?{modifiers:Pr}:{},...Se.length>0?{questionBankIds:Se}:{}};await Pe.saveBossQuiz(Ae),e.success(ee?"Quiz boss updated.":"Quiz boss deployed!"),Ue(!1)}catch{e.error("Failed to save quiz boss.")}},he=async q=>{await Pe.toggleBossQuizActive(q.id,!q.isActive)},Ze=async q=>{await r({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Pe.deleteBossQuiz(q.id),e.success("Quiz boss deleted."))},ut=q=>{q?(At(q),gt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(Se=>({...Se,damageBonus:Se.damageBonus||0}))})):(At(null),gt({name:"",classType:"GLOBAL",description:"",questions:[]})),Hr(null),de(!0)},Xt=async q=>{if(q.preventDefault(),xt.questions.length===0){e.error("Add at least one question.");return}try{const Se=new Date().toISOString(),Ae={id:(Ye==null?void 0:Ye.id)||Math.random().toString(36).substring(2,12),name:xt.name,classType:xt.classType,description:xt.description,questions:xt.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(ft=>ft.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{}})),createdAt:(Ye==null?void 0:Ye.createdAt)||Se,updatedAt:Se};await Pe.saveBossQuestionBank(Ae),e.success(Ye?"Question bank updated.":"Question bank created!"),de(!1)}catch{e.error("Failed to save question bank.")}},dr=async q=>{await r({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Pe.deleteBossQuestionBank(q.id),e.success("Question bank deleted."))},rn=async(q,Se)=>{var ft;const Ae=(ft=q.target.files)==null?void 0:ft[0];if(!Ae)return;const je=Se==="bank"?Hr:_t;je(null);try{let jt=(await Ae.text()).replace(/```json\s*|```\s*/g,"").trim();jt=jt.replace(/[\x00-\x1F\x7F]/g,be=>be===`
`||be==="\r"||be==="	"?" ":"");let Yt;try{Yt=JSON.parse(jt)}catch{const be=jt.match(/\[[\s\S]*\]/);if(be)try{Yt=JSON.parse(be[0])}catch{let ze=null;for(let De=be[0].length-1;De>0;De--)if(be[0][De]==="}")try{ze=JSON.parse(be[0].slice(0,De+1)+"]");break}catch{}if(ze)Yt=ze;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Yt)||Yt.length===0)throw new Error("Must be a non-empty JSON array.");const Sr=Yt.filter(be=>be.stem&&be.options&&be.correctAnswer!==void 0);if(Sr.length===0)throw new Error("No valid questions found.");const Zr=Sr.map(be=>({id:be.id||Math.random().toString(36).substring(2,10),stem:be.stem,options:be.options.slice(0,4),correctAnswer:typeof be.correctAnswer=="number"?be.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(be.difficulty)?be.difficulty:"MEDIUM",damageBonus:typeof be.damageBonus=="number"?be.damageBonus:0})),oe=Yt.length-Sr.length;Se==="bank"?gt(be=>({...be,questions:[...be.questions,...Zr]})):pe(be=>({...be,questions:[...be.questions,...Zr]})),e.success(`Imported ${Zr.length} questions${oe>0?` (${oe} skipped)`:""}`)}catch(Rt){je(Rt instanceof Error?Rt.message:"Import failed."),e.error("Failed to import questions.")}Se==="bank"&&Vt.current&&(Vt.current.value=""),Se==="boss"&&St.current&&(St.current.value="")},Gr=q=>{const Se=q.questions.map(Ae=>({...Ae,damageBonus:Ae.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));pe(Ae=>({...Ae,questions:[...Ae.questions,...Se]})),e.success(`Imported ${Se.length} questions from "${q.name}"`)},hn=q=>{we(Se=>{if(Se.find(ft=>ft.type===q))return Se.filter(ft=>ft.type!==q);const je=$T[q];return[...Se,{type:q,...je.hasValue?{value:je.defaultValue}:{}}]})},Ir=(q,Se)=>{we(Ae=>Ae.map(je=>je.type===q?{...je,value:Se}:je))},Ms=async q=>{bt(q),mr(!0);try{const Se=await Pe.getBossQuizAllProgress(q.id);Lt(Se)}catch{e.error("Failed to load endgame data.")}mr(!1)},ls=(q,Se)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${Se||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,so=()=>{const q=ls(ne.bossName,ne.classType);navigator.clipboard.writeText(q),Qe(!0),setTimeout(()=>Qe(!1),2500),e.success("Prompt copied to clipboard!")},ll=q=>rn(q,"boss"),cs=async(q,Se)=>{try{const Ae=await Pe.completeTutoring(q,Se);e.success(`Verified! Tutor earned ${Ae.xpAwarded} XP and ${Ae.fluxAwarded} Flux`)}catch{e.error("Failed to verify session")}},us=async q=>{if(await r({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Pe.cancelTutoringSession(q),e.success("Session cancelled.")}catch{e.error("Failed to cancel session")}},ja=Cr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),Ln=({id:q,label:Se,icon:Ae})=>o.jsxs("button",{onClick:()=>a(q),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===q?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[o.jsx(Ae,{className:"w-4 h-4"}),Se]});return o.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),o.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),o.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&o.jsxs("button",{onClick:()=>z(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[o.jsx(oH,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&o.jsxs("button",{onClick:()=>F(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[o.jsx(Roe,{className:"w-4 h-4"})," Issue Mission"]}),n==="BOSS_OPS"&&o.jsxs("button",{onClick:()=>ni(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[o.jsx(Vo,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[o.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[o.jsx(Ln,{id:"OPERATIVES",label:"Operatives",icon:To}),o.jsx(Ln,{id:"PROTOCOLS",label:"XP Protocols",icon:$a}),o.jsx(Ln,{id:"MISSIONS",label:"Missions",icon:Ao}),o.jsx(Ln,{id:"MISSION_CONTROL",label:"Mission Control",icon:Ex}),o.jsx(Ln,{id:"BOSS_OPS",label:"Boss Ops",icon:Vo}),o.jsx(Ln,{id:"TUTORING",label:"Tutoring",icon:Nu})]}),o.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(cH,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>s(q.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[kn.length," operatives"]}),o.jsxs("div",{className:"relative",children:[o.jsx(qoe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),o.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Classes"}),Object.values(Lr).map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),it.length>0&&o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Sections"}),it.map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[o.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),o.jsx(w,{label:"Class",col:"class"}),o.jsx(w,{label:"Level",col:"level",className:"text-center"}),o.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),o.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),o.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),o.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:kn.map(q=>{var ft,Rt,jt,Yt,Sr,Zr,oe,be,ze;const Se=((ft=q.gamification)==null?void 0:ft.level)||1,Ae=((Rt=q.gamification)==null?void 0:Rt.currency)||0,je=q.enrolledClasses||(q.classType?[q.classType]:[]);return o.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"py-3 pl-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),fe===q.id?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{autoFocus:!0,value:K,onChange:De=>te(De.target.value),maxLength:24,onKeyDown:De=>{De.key==="Enter"&&dn(q.id),De.key==="Escape"&&me(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),o.jsx("button",{onClick:()=>dn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:o.jsx(ou,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>me(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:o.jsx(Da,{className:"w-3 h-3"})})]}):o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("button",{onClick:()=>{var De;me(q.id),te(((De=q.gamification)==null?void 0:De.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((jt=q.gamification)==null?void 0:jt.codename)||"UNASSIGNED",o.jsx(Q5,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),o.jsx("button",{onClick:()=>{var De;return Sn(q.id,!((De=q.gamification)!=null&&De.codenameLocked))},className:`transition ${(Yt=q.gamification)!=null&&Yt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Sr=q.gamification)!=null&&Sr.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(Zr=q.gamification)!=null&&Zr.codenameLocked?o.jsx(Gh,{className:"w-2.5 h-2.5"}):o.jsx(Zoe,{className:"w-2.5 h-2.5"})})]})]})]})}),o.jsx("td",{className:"py-3",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:je.map(De=>o.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:De},De))})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-lg font-black text-white",children:Se})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((be=(oe=q.gamification)==null?void 0:oe.classXp)==null?void 0:be[c])||0:((ze=q.gamification)==null?void 0:ze.xp)||0).toLocaleString()})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Ae})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Or(q)})}),o.jsx("td",{className:"py-3 text-right pr-4",children:o.jsxs("div",{className:"flex justify-end gap-1.5",children:[o.jsxs("button",{onClick:()=>A(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Ex,{className:"w-3 h-3"})," Inventory"]}),o.jsxs("button",{onClick:()=>M(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Ri,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),n==="PROTOCOLS"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.map(q=>o.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&o.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:o.jsx($a,{className:"w-6 h-6"})}),o.jsx("button",{onClick:()=>Pe.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ua,{className:"w-4 h-4"})})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),o.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[o.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),o.jsx("button",{onClick:()=>Cn(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),o.jsxs("button",{onClick:()=>z(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:o.jsx(Ri,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&o.jsx("div",{className:"space-y-4",children:R.map(q=>o.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(ec,{className:"w-7 h-7"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),o.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&o.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([Se,Ae])=>o.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ae," ",Se]},Se))}),o.jsxs("div",{className:"flex gap-3 mt-2",children:[o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("button",{onClick:()=>ti(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),o.jsx("button",{onClick:()=>Pe.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ua,{className:"w-4 h-4"})})]})]},q.id))}),n==="MISSION_CONTROL"&&o.jsx(Cde,{deployments:Z,onResolveQuest:Kn,onRollForSalvation:Yr}),n==="BOSS_OPS"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs("button",{onClick:()=>mt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${nt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(B7,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",ae.length,")"]}),o.jsxs("button",{onClick:()=>mt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${nt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Ee.length,")"]})]}),nt==="bosses"&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),ae.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Vo,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),o.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),ae.map(q=>{var ft,Rt;const Se=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Ae=new Date(q.deadline)<new Date,je=(q.currentHp??q.maxHp)<=0||!q.isActive;return o.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Ae?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Ae?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(Vo,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[o.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),o.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(ft=q.modifiers)!=null&&ft.length?o.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Rt=q.targetSections)!=null&&Rt.length?o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Ae&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),je&&o.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),o.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:o.jsx("div",{className:`h-full rounded-full transition-all ${Se>50?"bg-amber-500":Se>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${Se}%`}})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[je&&o.jsxs("button",{onClick:()=>Ms(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(Yq,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),o.jsxs("button",{onClick:()=>ni(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(Q5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>he(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("button",{onClick:()=>Ze(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ua,{className:"w-4 h-4"})})]})]},q.id)})]}),nt==="banks"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),o.jsxs("button",{onClick:()=>ut(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[o.jsx(Ri,{className:"w-3 h-3"})," New Bank"]})]}),Ee.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(_h,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No question banks yet."}),o.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Ee.map(q=>o.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:o.jsx(_h,{className:"w-5 h-5 text-purple-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&o.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs("button",{onClick:()=>ut(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[o.jsx(Q5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>dr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ua,{className:"w-4 h-4"})})]})]},q.id))]})]}),n==="TUTORING"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsxs("button",{onClick:()=>Dn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${wn==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",ja.length,")"]}),o.jsxs("button",{onClick:()=>Dn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${wn==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",Cr.length,")"]})]}),(wn==="pending"?ja:Cr).length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Nu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:wn==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(wn==="pending"?ja:Cr).map(q=>o.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(tle,{className:"w-4 h-4 text-gray-500"}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),o.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["Requester: ",o.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&o.jsxs("span",{children:["Tutor: ",o.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),o.jsxs("span",{children:["Class: ",o.jsx("span",{className:"text-purple-400",children:q.classType})]}),o.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&o.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&o.jsxs("button",{onClick:()=>cs(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Rn,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>us(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Da,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&o.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[o.jsx(Rn,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})]}),o.jsx(Ede,{user:N,onClose:()=>A(null),onDeleteItem:Ar,onUnequipItem:un,onGrantFlux:ri}),o.jsx(Ode,{isOpen:B,onClose:()=>F(!1),form:U,setForm:X,onSubmit:cn,onSaveDraft:async()=>{const q={};U.techReq>0&&(q.tech=U.techReq),U.focusReq>0&&(q.focus=U.focusReq),U.analysisReq>0&&(q.analysis=U.analysisReq),U.charismaReq>0&&(q.charisma=U.charismaReq);const Se={id:Math.random().toString(36).substring(2,9),title:U.title,description:U.description,xpReward:U.xpReward,fluxReward:U.fluxReward,isActive:!1,type:U.type,statRequirements:q,startsAt:U.startsAt?new Date(U.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:U.lootRarity||null,rollDieSides:U.dieSides||20,consequenceText:U.consequence||null,isGroupQuest:U.isGroup,targetClass:U.targetClass||void 0,targetSections:U.targetSections.length>0?U.targetSections:void 0};await Pe.saveQuest(Se),e.success("Mission saved as draft (standby)."),X(v3),F(!1)},isSubmitting:W,availableSections:br}),o.jsx(Ti,{isOpen:j,onClose:()=>z(!1),title:"New XP Protocol Deployment",children:o.jsxs("form",{onSubmit:ga,className:"space-y-4 text-gray-100 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),o.jsx("input",{value:re.title,onChange:q=>Ne({...re,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),o.jsx("input",{type:"number",step:"0.5",value:re.multiplier,onChange:q=>Ne({...re,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),o.jsxs("select",{value:re.type,onChange:q=>Ne({...re,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[o.jsx("option",{value:"GLOBAL",children:"Global Node"}),o.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),re.type==="CLASS_SPECIFIC"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),o.jsx("select",{value:re.targetClass,onChange:q=>Ne({...re,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Lr).map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsx(eg,{availableSections:Kt,selectedSections:re.targetSections,onChange:q=>Ne({...re,targetSections:q})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!1,type:re.type,...re.type==="CLASS_SPECIFIC"?{targetClass:re.targetClass}:{},...re.targetSections.length>0?{targetSections:re.targetSections}:{}};await Pe.saveXPEvent(q),z(!1),Ne({title:"",multiplier:2,type:"GLOBAL",targetClass:Lr.AP_PHYSICS,targetSections:[]}),e.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),o.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),o.jsx(kde,{user:O,onClose:()=>M(null),onAdjust:er}),o.jsx(Ti,{isOpen:ye,onClose:()=>Ue(!1),title:ee?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:Nt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),o.jsx("input",{value:ne.bossName,onChange:q=>pe({...ne,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("textarea",{value:ne.description,onChange:q=>pe({...ne,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:o.jsx(vG,{bossType:ne.bossType,hue:ne.bossHue})}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),o.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>o.jsx("button",{type:"button",onClick:()=>pe({...ne,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${ne.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",ne.bossHue,""]}),o.jsx("input",{type:"range",min:"0",max:"360",value:ne.bossHue,onChange:q=>pe({...ne,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),o.jsx("input",{type:"number",value:ne.maxHp,onChange:q=>pe({...ne,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),o.jsx("input",{type:"number",value:ne.damagePerCorrect,onChange:q=>pe({...ne,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:ne.classType,onChange:q=>pe({...ne,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Lr).map(q=>o.jsx("option",{value:q,children:q},q))]})]})]}),o.jsx(eg,{availableSections:yr,selectedSections:ne.targetSections,onChange:q=>pe({...ne,targetSections:q})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),o.jsx("input",{type:"datetime-local",value:ne.deadline,onChange:q=>pe({...ne,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),o.jsx("input",{type:"number",value:ne.rewardXp,onChange:q=>pe({...ne,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),o.jsx("input",{type:"number",value:ne.rewardFlux,onChange:q=>pe({...ne,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),o.jsxs("select",{value:ne.rewardItemRarity,onChange:q=>pe({...ne,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",Pr.length," active)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries($T).map(([q,Se])=>{const Ae=Pr.find(je=>je.type===q);return o.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Ae?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[o.jsxs("button",{type:"button",onClick:()=>hn(q),className:"w-full text-left",children:[o.jsx("div",{className:"text-[10px] font-bold text-white",children:Se.name}),o.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:Se.description})]}),Ae&&Se.hasValue&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx("input",{type:"number",value:Ae.value??Se.defaultValue,onChange:je=>Ir(q,parseInt(je.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),o.jsx("span",{className:"text-[9px] text-gray-500",children:Se.unit})]})]},q)})})]}),Ee.length>0&&o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ee.filter(q=>q.classType===ne.classType||q.classType==="GLOBAL"||ne.classType==="GLOBAL").map(q=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),o.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),o.jsxs("button",{type:"button",onClick:()=>Gr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[o.jsx(Ri,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",ne.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:so,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${Xe?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:Xe?o.jsxs(o.Fragment,{children:[o.jsx(ou,{className:"w-3 h-3"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-3 h-3"})," Copy AI Prompt"]})}),o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Zd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:St,type:"file",accept:".json,.txt",onChange:ll,className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:Fa,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Ri,{className:"w-3 h-3"})," Add Manual"]})]})]}),ct&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[o.jsx(Da,{className:"w-4 h-4 flex-shrink-0"}),ct,o.jsx("button",{type:"button",onClick:()=>_t(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Da,{className:"w-3 h-3"})})]}),ne.questions.length===0&&o.jsxs("div",{className:"text-center py-6 space-y-2",children:[o.jsx(Cx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),o.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",o.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",o.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),ne.questions.map((q,Se)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",Se+1]}),o.jsx("textarea",{value:q.stem,onChange:Ae=>Ai(Se,"stem",Ae.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),o.jsx("button",{type:"button",onClick:()=>gi(Se),className:"text-gray-600 hover:text-red-400 mt-4",children:o.jsx(ua,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Ae,je)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Ai(Se,"correctAnswer",je),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===je?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:o.jsx(ou,{className:"w-3 h-3"})}),o.jsx("input",{value:Ae,onChange:ft=>os(Se,je,ft.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+je)}`,required:!0})]},je))}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:q.difficulty,onChange:Ae=>Ai(Se,"difficulty",Ae.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>Ai(Se,"damageBonus",parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),o.jsxs("div",{className:"flex gap-3",children:[!ee&&o.jsx("button",{type:"button",onClick:async()=>{if(ne.questions.length===0){e.error("Add at least one question.");return}const q=[...new Set(ne.questions.map(Ae=>Ae.bankId).filter(Boolean))],Se={id:Math.random().toString(36).substring(2,12),bossName:ne.bossName,description:ne.description,maxHp:ne.maxHp,currentHp:ne.maxHp,classType:ne.classType,isActive:!1,deadline:ne.deadline?new Date(ne.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:ne.damagePerCorrect,questions:ne.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(je=>je.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{},...Ae.bankId?{bankId:Ae.bankId}:{}})),rewards:{xp:ne.rewardXp,flux:ne.rewardFlux,...ne.rewardItemRarity?{itemRarity:ne.rewardItemRarity}:{}},...ne.targetSections.length>0?{targetSections:ne.targetSections}:{},bossAppearance:{bossType:ne.bossType,hue:ne.bossHue},...Pr.length>0?{modifiers:Pr}:{},...q.length>0?{questionBankIds:q}:{}};await Pe.saveBossQuiz(Se),e.success("Quiz boss saved as draft (inactive)."),Ue(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),o.jsx("button",{type:"submit",className:`${ee?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:ee?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),o.jsx(Ti,{isOpen:Je,onClose:()=>de(!1),title:Ye?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:Xt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),o.jsx("input",{value:xt.name,onChange:q=>gt({...xt,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),o.jsxs("select",{value:xt.classType,onChange:q=>gt({...xt,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Lr).map(q=>o.jsx("option",{value:q,children:q},q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("input",{value:xt.description,onChange:q=>gt({...xt,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",xt.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Zd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:Vt,type:"file",accept:".json,.txt",onChange:q=>rn(q,"bank"),className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:()=>gt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Ri,{className:"w-3 h-3"})," Add Manual"]})]})]}),cr&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[o.jsx(Da,{className:"w-4 h-4 flex-shrink-0"})," ",cr,o.jsx("button",{type:"button",onClick:()=>Hr(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Da,{className:"w-3 h-3"})})]}),xt.questions.length===0&&o.jsxs("div",{className:"text-center py-6",children:[o.jsx(Cx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),xt.questions.map((q,Se)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("textarea",{value:q.stem,onChange:Ae=>{const je=[...xt.questions];je[Se]={...je[Se],stem:Ae.target.value},gt({...xt,questions:je})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${Se+1}`,required:!0})}),o.jsx("button",{type:"button",onClick:()=>gt(Ae=>({...Ae,questions:Ae.questions.filter((je,ft)=>ft!==Se)})),className:"text-gray-600 hover:text-red-400 mt-2",children:o.jsx(ua,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Ae,je)=>o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>{const ft=[...xt.questions];ft[Se]={...ft[Se],correctAnswer:je},gt({...xt,questions:ft})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===je?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:o.jsx(ou,{className:"w-2.5 h-2.5"})}),o.jsx("input",{value:Ae,onChange:ft=>{const Rt=[...xt.questions],jt=[...Rt[Se].options];jt[je]=ft.target.value,Rt[Se]={...Rt[Se],options:jt},gt({...xt,questions:Rt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+je)}`,required:!0})]},je))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{value:q.difficulty,onChange:Ae=>{const je=[...xt.questions];je[Se]={...je[Se],difficulty:Ae.target.value},gt({...xt,questions:je})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>{const je=[...xt.questions];je[Se]={...je[Se],damageBonus:parseInt(Ae.target.value)||0},gt({...xt,questions:je})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Ye?"Update Question Bank":"Create Question Bank"})]})}),o.jsx(Ti,{isOpen:!!ot,onClose:()=>{bt(null),Lt([])},title:ot?`Endgame: ${ot.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:et?o.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):ot&&o.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-white",children:Ct.length}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-amber-400",children:Ct.reduce((q,Se)=>{var Ae;return q+(((Ae=Se.combatStats)==null?void 0:Ae.totalDamageDealt)||0)},0).toLocaleString()}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-green-400",children:Ct.reduce((q,Se)=>{var Ae;return q+(((Ae=Se.combatStats)==null?void 0:Ae.questionsCorrect)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-red-400",children:Ct.reduce((q,Se)=>{var Ae;return q+(((Ae=Se.combatStats)==null?void 0:Ae.criticalHits)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[o.jsx(Jq,{className:"w-4 h-4"})," Top Damage Dealers"]}),o.jsx("div",{className:"space-y-2",children:[...Ct].sort((q,Se)=>{var Ae,je;return(((Ae=Se.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((je=q.combatStats)==null?void 0:je.totalDamageDealt)||0)}).slice(0,5).map((q,Se)=>{var Sr;const Ae=t.find(Zr=>Zr.id===q.userId),je=q.combatStats,ft=Se,Rt=ft<rO.length?rO[ft]:1,jt=((je==null?void 0:je.questionsAttempted)||0)>=Im&&((je==null?void 0:je.questionsCorrect)||0)>=Rm,Yt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${Se===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[o.jsxs("div",{className:`text-xl font-black w-8 text-center ${Yt[Se]||"text-gray-500"}`,children:["#",Se+1]}),(Ae==null?void 0:Ae.avatarUrl)&&o.jsx("img",{src:Ae.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Ae==null?void 0:Ae.name)||q.userId}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{className:"text-amber-400 font-bold",children:[((Sr=je==null?void 0:je.totalDamageDealt)==null?void 0:Sr.toLocaleString())||0," dmg"]}),o.jsxs("span",{children:[(je==null?void 0:je.questionsCorrect)||0,"/",(je==null?void 0:je.questionsAttempted)||0," correct"]}),o.jsxs("span",{children:[(je==null?void 0:je.criticalHits)||0," crits"]}),o.jsxs("span",{children:["Streak: ",(je==null?void 0:je.longestStreak)||0]})]})]}),o.jsx("div",{className:"text-right flex-shrink-0",children:jt?o.jsxs("span",{className:`text-xs font-bold ${Se<5?Yt[Se]:"text-gray-400"}`,children:[Rt,"x"]}):o.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[o.jsx(Hh,{className:"w-4 h-4"})," All Participants"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[o.jsx("th",{className:"pb-2 pl-2",children:"#"}),o.jsx("th",{className:"pb-2",children:"Student"}),o.jsx("th",{className:"pb-2 text-center",children:"Damage"}),o.jsx("th",{className:"pb-2 text-center",children:"Correct"}),o.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),o.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),o.jsx("th",{className:"pb-2 text-center",children:"Crits"}),o.jsx("th",{className:"pb-2 text-center",children:"Streak"}),o.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),o.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:[...Ct].sort((q,Se)=>{var Ae,je;return(((Ae=Se.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((je=q.combatStats)==null?void 0:je.totalDamageDealt)||0)}).map((q,Se)=>{const Ae=t.find(Sr=>Sr.id===q.userId),je=q.combatStats,ft=(je==null?void 0:je.questionsAttempted)||0,Rt=(je==null?void 0:je.questionsCorrect)||0,jt=ft>0?Math.round(Rt/ft*100):0,Yt=ft>=Im&&Rt>=Rm;return o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:Se+1}),o.jsx("td",{className:"py-2 font-bold text-white",children:(Ae==null?void 0:Ae.name)||q.userId.slice(0,8)}),o.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((je==null?void 0:je.totalDamageDealt)||0).toLocaleString()}),o.jsx("td",{className:"py-2 text-center text-green-400",children:Rt}),o.jsx("td",{className:"py-2 text-center text-gray-400",children:ft}),o.jsxs("td",{className:"py-2 text-center text-gray-300",children:[jt,"%"]}),o.jsx("td",{className:"py-2 text-center text-red-400",children:(je==null?void 0:je.criticalHits)||0}),o.jsx("td",{className:"py-2 text-center text-purple-400",children:(je==null?void 0:je.longestStreak)||0}),o.jsx("td",{className:"py-2 text-center text-cyan-400",children:(je==null?void 0:je.damageReduced)||0}),o.jsx("td",{className:"py-2 text-center",children:Yt?o.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):o.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const Se=Ct.reduce((jt,Yt)=>{var Sr,Zr;return jt+(((Zr=(Sr=Yt.combatStats)==null?void 0:Sr.correctByDifficulty)==null?void 0:Zr[q])||0)},0),Ae=Ct.reduce((jt,Yt)=>{var Sr,Zr;return jt+(((Zr=(Sr=Yt.combatStats)==null?void 0:Sr.incorrectByDifficulty)==null?void 0:Zr[q])||0)},0),je=Se+Ae,ft=je>0?Math.round(Se/je*100):0,Rt=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return o.jsxs("div",{className:`bg-${Rt}-500/5 border border-${Rt}-500/20 rounded-xl p-3 text-center`,children:[o.jsx("div",{className:`text-[10px] font-bold text-${Rt}-400 uppercase mb-1`,children:q}),o.jsxs("div",{className:"text-lg font-black text-white",children:[ft,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[Se,"/",je," correct"]})]},q)})})]})]})})]})},Rde={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:o.jsx(aH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:o.jsx(Zq,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:o.jsx(j2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},Mde=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=k.useState(null),[a,i]=k.useState(!1),s=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return o.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[o.jsxs("button",{onClick:()=>s("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[o.jsx(j2,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),o.jsxs("button",{onClick:()=>s("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[o.jsx(Zq,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),o.jsxs("button",{onClick:()=>s("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[o.jsx(aH,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&o.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[o.jsx(_A,{className:"w-6 h-6"}),e&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=Rde[r];return o.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[o.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),o.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?o.jsx(SA,{className:"w-4 h-4"}):o.jsx(rH,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:o.jsx(Da,{className:"w-4 h-4"})})]})]}),!a&&o.jsx("div",{className:"flex-1 bg-white relative",children:o.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Pde=["","","","","","","",""],Dde=["","","","","","","","","","","","","","","","","","","","","","","","","",""],Lde=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:s,onOpenResource:c})=>{var mt,Je;const{confirm:d}=al(),[h,p]=k.useState([]),[m,y]=k.useState(""),[x,T]=k.useState("Main"),[S,w]=k.useState(!1),[E,I]=k.useState(!1),[R,L]=k.useState(null),[O,M]=k.useState(null),[N,A]=k.useState([]),[j,z]=k.useState([]),[B,F]=k.useState(null),[U,X]=k.useState([]),[W,H]=k.useState(null),Z=k.useRef(null),ie=k.useRef(null),fe=k.useRef(null),me=k.useMemo(()=>Object.values(Lr).filter(de=>{var gt;if(de===Lr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Ye=a.find(Vt=>Vt.className===de),At=(gt=t.enrolledClasses)==null?void 0:gt.includes(de),xt=Ye?Ye.features.communications:!0;return At&&xt}),[a,t.role,t.enrolledClasses]),[K,te]=k.useState(me[0]||"");k.useEffect(()=>{(!K||!me.includes(K))&&me.length>0&&te(me[0])},[me]);const re=k.useMemo(()=>x==="Resources"&&O?`res_${O}`:x==="Resources"&&!O?"":x==="Groups"&&B?`group_${B}`:x==="Groups"&&!B||!K?"":`class_${K.replace(/\s+/g,"_").toLowerCase()}`,[K,x,O,B]),Ne=k.useRef(null),ae=k.useMemo(()=>n.filter(de=>!(de.classType!==K||de.status==="DRAFT"||de.status==="ARCHIVED"||de.scheduledAt&&new Date(de.scheduledAt)>new Date)),[n,K]),xe=k.useMemo(()=>h.filter(de=>{var Ye;return de.isGlobalPinned||((Ye=de.pinnedBy)==null?void 0:Ye.includes(t.id))}),[h,t.id]),ye=k.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Ue=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("class_")),[i]),ee=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("res_")),[i]),Me=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("group_")),[i]),ne=k.useRef(!1);k.useEffect(()=>{if(!e){ne.current=!1;return}if(ne.current||!i||i.size===0)return;ne.current=!0;const de=Array.from(i)[0];if(de.startsWith("class_")){T("Main");const Ye=me.find(At=>`class_${At.replace(/\s+/g,"_").toLowerCase()}`===de);Ye&&te(Ye)}else de.startsWith("res_")?(T("Resources"),M(de.replace("res_",""))):de.startsWith("group_")&&(T("Groups"),F(de.replace("group_","")))},[e,i,me]),k.useEffect(()=>{!e||!re||s==null||s(re)},[e,re,s]),k.useEffect(()=>{if(!e)return;const de=t.role==="ADMIN"?Pe.subscribeToStudentGroups(K,A):Pe.subscribeToMyGroups(t.id,A);return()=>de()},[e,t.id,t.role,K]),k.useEffect(()=>{if(!e)return;let de="";if(x==="Resources"&&O?de=`res_${O}`:x==="Groups"&&B?de=`group_${B}`:(x==="Main"||x==="Bookmarks")&&(de=`class_${K.replace(/\s+/g,"_").toLowerCase()}`),!de)return;w(!0);const Ye=Pe.subscribeToChannelMessages(de,At=>{p(At),w(!1)});return()=>{Ye()}},[e,K,x,O,B]),k.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const de=Pe.subscribeToFlaggedMessages(At=>{X(At)}),Ye=Pe.subscribeToAllGroups(z);return()=>{de(),Ye()}},[e,t.role]),k.useEffect(()=>{Ne.current&&(Ne.current.scrollTop=Ne.current.scrollHeight)},[h,S,x,O]),k.useEffect(()=>{const de=Ye=>{Z.current&&!Z.current.contains(Ye.target)&&I(!1),ie.current&&!ie.current.contains(Ye.target)&&L(null)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]),k.useEffect(()=>{if(!e)return;const de=Ye=>{Ye.key==="Escape"&&r()};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[e,r]);const pe=k.useCallback(async de=>{if(de.preventDefault(),!(!m.trim()||!re)&&!ye)try{await Pe.sendMessage(t,m,re,K),y(""),I(!1)}catch(Ye){console.error("Failed to send message:",Ye)}},[m,re,ye,t,K]),Xe=k.useCallback(async(de,Ye)=>{try{await Pe.toggleReaction(de,Ye,t.id),L(null)}catch(At){console.error(At)}},[t.id]),Qe=k.useCallback(async de=>{try{await Pe.togglePersonalPin(de,t.id)}catch(Ye){console.error(Ye)}},[t.id]),St=k.useCallback(async(de,Ye)=>{try{await Pe.toggleGlobalPin(de,!Ye)}catch(At){console.error(At)}},[]),ct=async de=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Pe.deleteMessage(de)}catch(Ye){console.error(Ye)}},_t=async de=>{try{await Pe.unflagMessage(de),await Pe.resolveFlagByMessageId(de)}catch(Ye){console.error(Ye)}},Ee=async de=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Pe.resolveFlagByMessageId(de),await Pe.deleteMessage(de)}catch(Ye){console.error(Ye)}},Ve=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Pe.INDEFINITE_MUTE}],nt=async de=>{if(W){try{await Pe.muteUser(W.senderId,de)}catch(Ye){console.error(Ye)}H(null)}};return k.useEffect(()=>{const de=Ye=>{fe.current&&!fe.current.contains(Ye.target)&&H(null)};return W&&document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[W]),e?o.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[x==="Resources"&&O||x==="Groups"&&B?o.jsx("button",{onClick:()=>{M(null),F(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:o.jsx(Doe,{className:"w-5 h-5"})}):o.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:o.jsx(_A,{className:"w-5 h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:x==="Moderation"?"Moderation Queue":x==="Groups"?B?(mt=N.find(de=>de.id===B))==null?void 0:mt.name:"My Groups":x==="Resources"?O?(Je=ae.find(de=>de.id===O))==null?void 0:Je.title:"Class Resources":K}),x!=="Resources"&&x!=="Moderation"&&x!=="Groups"&&me.length>1&&o.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[o.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:K}),o.jsx(Li,{className:"w-3 h-3 text-gray-500 ml-1"}),o.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:K,onChange:de=>te(de.target.value),children:me.map(de=>o.jsx("option",{value:de,children:de},de))})]})]})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:o.jsx(Da,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[o.jsxs("button",{onClick:()=>T("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${x==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(_A,{className:"w-5 h-5"}),Ue&&x!=="Main"&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("button",{onClick:()=>T("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${x==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(_o,{className:"w-5 h-5"}),ee&&x!=="Resources"&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(N.length>0||t.role==="ADMIN")&&o.jsxs("button",{onClick:()=>{T("Groups"),F(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${x==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(Es,{className:"w-5 h-5"}),Me&&x!=="Groups"?o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):N.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:N.length})]}),o.jsx("button",{onClick:()=>T("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${x==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:o.jsx(QI,{className:"w-5 h-5"})}),t.role==="ADMIN"&&o.jsxs("button",{onClick:()=>T("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${x==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(To,{className:"w-5 h-5"}),U.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:U.length})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative",children:[x==="Resources"&&!O&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:ae.map(de=>o.jsxs("div",{onClick:()=>M(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${de.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[o.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[o.jsx(Qoe,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${de.id}`))&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.title}),o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:de.unit})]})]}),o.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),c==null||c(de.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:o.jsx(Voe,{className:"w-4 h-4"})})]},de.id))})}),x==="Groups"&&!B&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:N.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(Es,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"No groups yet"}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):N.map(de=>o.jsx("div",{onClick:()=>F(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${de.id}`)?"border-cyan-500/40":"border-white/5"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[o.jsx(Es,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${de.id}`))&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.name}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[de.members.length," member",de.members.length!==1?"s":"","  ",de.classType]})]})]})},de.id))})}),x==="Moderation"&&t.role==="ADMIN"&&o.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Is,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),o.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[U.length," item",U.length!==1?"s":""]})]}),U.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(To,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):o.jsx("div",{className:"space-y-3",children:U.map(de=>{var Ye,At,xt;return o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300",children:de.senderName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(de.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.jsx("p",{className:"text-sm text-gray-200 mb-1",children:de.content}),de.systemNote&&o.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:de.systemNote}),o.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Ye=de.channelId)!=null&&Ye.startsWith("group_")?`Group: ${((At=j.find(gt=>gt.id===de.channelId.replace("group_","")))==null?void 0:At.name)||de.channelId.replace("group_","")}`:((xt=de.channelId)==null?void 0:xt.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>_t(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[o.jsx(ou,{className:"w-3.5 h-3.5"})," Approve"]}),o.jsxs("button",{onClick:()=>Ee(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[o.jsx(ua,{className:"w-3.5 h-3.5"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>H((W==null?void 0:W.id)===`flag-${de.id}`?null:{id:`flag-${de.id}`,senderId:de.senderId,senderName:de.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:o.jsx(Ix,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===`flag-${de.id}`&&o.jsxs("div",{ref:fe,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),Ve.map(gt=>o.jsx("button",{onClick:()=>nt(gt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:gt.label},gt.minutes))]})]})]})]},de.id)})})]}),(x==="Main"||x==="Bookmarks"||x==="Resources"&&O||x==="Groups"&&B)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:Ne,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(x==="Bookmarks"?xe:h).map((de,Ye,At)=>{var Vt;const xt=de.senderId===t.id,gt=Ye>0&&At[Ye-1].senderId===de.senderId&&new Date(de.timestamp).getTime()-new Date(At[Ye-1].timestamp).getTime()<3e5;return o.jsxs("div",{className:`group flex flex-col ${xt?"items-end":"items-start"} ${gt?"mt-1":"mt-4"}`,children:[!gt&&o.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[o.jsx("span",{className:`text-xs font-bold ${xt?"text-indigo-400":"text-gray-300"}`,children:de.senderName}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),de.isGlobalPinned&&o.jsx(JI,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"relative max-w-[85%]",children:[o.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${xt?"right-0":"left-0"} z-30`,children:[o.jsx("button",{onClick:()=>L(de.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:o.jsx(tR,{className:"w-3.5 h-3.5 text-yellow-400"})}),o.jsx("button",{onClick:()=>Qe(de.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Vt=de.pinnedBy)!=null&&Vt.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:o.jsx(QI,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>St(de.id,!!de.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${de.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:o.jsx(JI,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>ct(de.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:o.jsx(ua,{className:"w-3.5 h-3.5"})}),de.senderId!==t.id&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>H((W==null?void 0:W.id)===de.id?null:{id:de.id,senderId:de.senderId,senderName:de.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:o.jsx(Ix,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===de.id&&o.jsxs("div",{ref:fe,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),Ve.map(cr=>o.jsx("button",{onClick:()=>nt(cr.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:cr.label},cr.minutes))]})]})]})]}),R===de.id&&o.jsx("div",{ref:ie,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${xt?"right-0":"left-0"}`,children:Pde.map(cr=>o.jsx("button",{onClick:()=>Xe(de.id,cr),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:cr},cr))}),o.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${xt?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${de.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${de.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:de.content}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:de.reactions&&Object.entries(de.reactions).map(([cr,Hr])=>{const Pr=Hr;return Pr.length>0&&o.jsxs("button",{onClick:()=>Xe(de.id,cr),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${Pr.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[cr," ",Pr.length]},cr)})})]})]},de.id)})}),o.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:o.jsxs("form",{onSubmit:pe,className:"relative flex items-center gap-2",children:[E&&o.jsx("div",{ref:Z,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:Dde.map(de=>o.jsx("button",{type:"button",onClick:()=>y(Ye=>Ye+de),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:de},de))}),o.jsx("button",{type:"button",onClick:()=>I(!E),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:o.jsx(tR,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:m,onChange:de=>y(de.target.value),placeholder:ye?"Transmission Disabled":"Type message...",disabled:!re||ye,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),o.jsx("button",{type:"submit",disabled:!re||ye||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:o.jsx(uH,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function xG(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=xG(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function fr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=xG(t))&&(n&&(n+=" "),n+=e);return n}var x3,JR;function ss(){if(JR)return x3;JR=1;var t=Array.isArray;return x3=t,x3}var b3,eM;function bG(){if(eM)return b3;eM=1;var t=typeof Qy=="object"&&Qy&&Qy.Object===Object&&Qy;return b3=t,b3}var w3,tM;function il(){if(tM)return w3;tM=1;var t=bG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return w3=r,w3}var S3,rM;function d1(){if(rM)return S3;rM=1;var t=il(),e=t.Symbol;return S3=e,S3}var _3,nM;function Bde(){if(nM)return _3;nM=1;var t=d1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var c=r.call(s,a),d=s[a];try{s[a]=void 0;var h=!0}catch{}var p=n.call(s);return h&&(c?s[a]=d:delete s[a]),p}return _3=i,_3}var T3,aM;function $de(){if(aM)return T3;aM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return T3=r,T3}var A3,iM;function hc(){if(iM)return A3;iM=1;var t=d1(),e=Bde(),r=$de(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return A3=s,A3}var N3,sM;function fc(){if(sM)return N3;sM=1;function t(e){return e!=null&&typeof e=="object"}return N3=t,N3}var E3,oM;function Mf(){if(oM)return E3;oM=1;var t=hc(),e=fc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return E3=n,E3}var j3,lM;function sE(){if(lM)return j3;lM=1;var t=ss(),e=Mf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return j3=a,j3}var k3,cM;function Pu(){if(cM)return k3;cM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return k3=t,k3}var C3,uM;function oE(){if(uM)return C3;uM=1;var t=hc(),e=Pu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return C3=s,C3}var O3,dM;function Ude(){if(dM)return O3;dM=1;var t=il(),e=t["__core-js_shared__"];return O3=e,O3}var I3,hM;function zde(){if(hM)return I3;hM=1;var t=Ude(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return I3=r,I3}var R3,fM;function wG(){if(fM)return R3;fM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return R3=r,R3}var M3,pM;function Vde(){if(pM)return M3;pM=1;var t=oE(),e=zde(),r=Pu(),n=wG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var x=t(y)?p:i;return x.test(n(y))}return M3=m,M3}var P3,mM;function Fde(){if(mM)return P3;mM=1;function t(e,r){return e==null?void 0:e[r]}return P3=t,P3}var D3,gM;function f0(){if(gM)return D3;gM=1;var t=Vde(),e=Fde();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return D3=r,D3}var L3,yM;function D2(){if(yM)return L3;yM=1;var t=f0(),e=t(Object,"create");return L3=e,L3}var B3,vM;function qde(){if(vM)return B3;vM=1;var t=D2();function e(){this.__data__=t?t(null):{},this.size=0}return B3=e,B3}var $3,xM;function Hde(){if(xM)return $3;xM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return $3=t,$3}var U3,bM;function Gde(){if(bM)return U3;bM=1;var t=D2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var c=s[i];return c===e?void 0:c}return n.call(s,i)?s[i]:void 0}return U3=a,U3}var z3,wM;function Wde(){if(wM)return z3;wM=1;var t=D2(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return z3=n,z3}var V3,SM;function Kde(){if(SM)return V3;SM=1;var t=D2(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return V3=r,V3}var F3,_M;function Qde(){if(_M)return F3;_M=1;var t=qde(),e=Hde(),r=Gde(),n=Wde(),a=Kde();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,F3=i,F3}var q3,TM;function Xde(){if(TM)return q3;TM=1;function t(){this.__data__=[],this.size=0}return q3=t,q3}var H3,AM;function lE(){if(AM)return H3;AM=1;function t(e,r){return e===r||e!==e&&r!==r}return H3=t,H3}var G3,NM;function L2(){if(NM)return G3;NM=1;var t=lE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return G3=e,G3}var W3,EM;function Yde(){if(EM)return W3;EM=1;var t=L2(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var c=i.length-1;return s==c?i.pop():r.call(i,s,1),--this.size,!0}return W3=n,W3}var K3,jM;function Zde(){if(jM)return K3;jM=1;var t=L2();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return K3=e,K3}var Q3,kM;function Jde(){if(kM)return Q3;kM=1;var t=L2();function e(r){return t(this.__data__,r)>-1}return Q3=e,Q3}var X3,CM;function e0e(){if(CM)return X3;CM=1;var t=L2();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return X3=e,X3}var Y3,OM;function B2(){if(OM)return Y3;OM=1;var t=Xde(),e=Yde(),r=Zde(),n=Jde(),a=e0e();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Y3=i,Y3}var Z3,IM;function cE(){if(IM)return Z3;IM=1;var t=f0(),e=il(),r=t(e,"Map");return Z3=r,Z3}var J3,RM;function t0e(){if(RM)return J3;RM=1;var t=Qde(),e=B2(),r=cE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return J3=n,J3}var e6,MM;function r0e(){if(MM)return e6;MM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return e6=t,e6}var t6,PM;function $2(){if(PM)return t6;PM=1;var t=r0e();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return t6=e,t6}var r6,DM;function n0e(){if(DM)return r6;DM=1;var t=$2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return r6=e,r6}var n6,LM;function a0e(){if(LM)return n6;LM=1;var t=$2();function e(r){return t(this,r).get(r)}return n6=e,n6}var a6,BM;function i0e(){if(BM)return a6;BM=1;var t=$2();function e(r){return t(this,r).has(r)}return a6=e,a6}var i6,$M;function s0e(){if($M)return i6;$M=1;var t=$2();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return i6=e,i6}var s6,UM;function uE(){if(UM)return s6;UM=1;var t=t0e(),e=n0e(),r=a0e(),n=i0e(),a=s0e();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,s6=i,s6}var o6,zM;function SG(){if(zM)return o6;zM=1;var t=uE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,c=a?a.apply(this,s):s[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,s);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,o6=r,o6}var l6,VM;function o0e(){if(VM)return l6;VM=1;var t=SG(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return l6=r,l6}var c6,FM;function l0e(){if(FM)return c6;FM=1;var t=o0e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,c,d,h){i.push(d?h.replace(r,"$1"):c||s)}),i});return c6=n,c6}var u6,qM;function dE(){if(qM)return u6;qM=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return u6=t,u6}var d6,HM;function c0e(){if(HM)return d6;HM=1;var t=d1(),e=dE(),r=ss(),n=Mf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return d6=s,d6}var h6,GM;function _G(){if(GM)return h6;GM=1;var t=c0e();function e(r){return r==null?"":t(r)}return h6=e,h6}var f6,WM;function TG(){if(WM)return f6;WM=1;var t=ss(),e=sE(),r=l0e(),n=_G();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return f6=a,f6}var p6,KM;function U2(){if(KM)return p6;KM=1;var t=Mf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return p6=e,p6}var m6,QM;function hE(){if(QM)return m6;QM=1;var t=TG(),e=U2();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return m6=r,m6}var g6,XM;function AG(){if(XM)return g6;XM=1;var t=hE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return g6=e,g6}var u0e=AG();const Js=Kr(u0e);var y6,YM;function d0e(){if(YM)return y6;YM=1;function t(e){return e==null}return y6=t,y6}var h0e=d0e();const or=Kr(h0e);var v6,ZM;function f0e(){if(ZM)return v6;ZM=1;var t=hc(),e=ss(),r=fc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return v6=a,v6}var p0e=f0e();const e0=Kr(p0e);var m0e=oE();const nr=Kr(m0e);var g0e=Pu();const Pf=Kr(g0e);var x6={exports:{}},en={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM;function y0e(){if(JM)return en;JM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case m:case i:return w;default:return E}}case e:return E}}}return en.ContextConsumer=s,en.ContextProvider=i,en.Element=t,en.ForwardRef=d,en.Fragment=r,en.Lazy=y,en.Memo=m,en.Portal=e,en.Profiler=a,en.StrictMode=n,en.Suspense=h,en.SuspenseList=p,en.isAsyncMode=function(){return!1},en.isConcurrentMode=function(){return!1},en.isContextConsumer=function(w){return S(w)===s},en.isContextProvider=function(w){return S(w)===i},en.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},en.isForwardRef=function(w){return S(w)===d},en.isFragment=function(w){return S(w)===r},en.isLazy=function(w){return S(w)===y},en.isMemo=function(w){return S(w)===m},en.isPortal=function(w){return S(w)===e},en.isProfiler=function(w){return S(w)===a},en.isStrictMode=function(w){return S(w)===n},en.isSuspense=function(w){return S(w)===h},en.isSuspenseList=function(w){return S(w)===p},en.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===i||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},en.typeOf=S,en}var eP;function v0e(){return eP||(eP=1,x6.exports=y0e()),x6.exports}var x0e=v0e(),b6,tP;function NG(){if(tP)return b6;tP=1;var t=hc(),e=fc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return b6=n,b6}var w6,rP;function b0e(){if(rP)return w6;rP=1;var t=NG();function e(r){return t(r)&&r!=+r}return w6=e,w6}var w0e=b0e();const h1=Kr(w0e);var S0e=NG();const _0e=Kr(S0e);var vo=function(e){return e===0?0:e>0?1:-1},Ed=function(e){return e0(e)&&e.indexOf("%")===e.length-1},vt=function(e){return _0e(e)&&!h1(e)},T0e=function(e){return or(e)},La=function(e){return vt(e)||e0(e)},A0e=0,f1=function(e){var r=++A0e;return"".concat(e||"").concat(r)},xo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(e)&&!e0(e))return n;var i;if(Ed(e)){var s=e.indexOf("%");i=r*parseFloat(e.slice(0,s))/100}else i=+e;return h1(i)&&(i=n),a&&i>r&&(i=r),i},iu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},N0e=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Zi=function(e,r){return vt(e)&&vt(r)?function(n){return e+n*(r-e)}:function(){return r}};function zx(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Js(n,e))===r})}var E0e=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,s=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,s+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*s!==n*n?(r*i-n*a)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(a-y*n)/r}},j0e=function(e,r){return vt(e)&&vt(r)?e-r:e0(e)&&e0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Ah(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function BA(t){"@babel/helpers - typeof";return BA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BA(t)}var k0e=["viewBox","children"],C0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nP=["points","pathLength"],S6={svg:k0e,polygon:nP,polyline:nP},fE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Vx=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),!Pf(n))return null;var a={};return Object.keys(n).forEach(function(i){fE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},O0e=function(e,r,n){return function(a){return e(r,n,a),null}},t0=function(e,r,n){if(!Pf(e)||BA(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var s=e[i];fE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=O0e(s,r,n))}),a},I0e=["children"],R0e=["children"];function aP(t,e){if(t==null)return{};var r=M0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function M0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var iP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Gl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},sP=null,_6=null,pE=function t(e){if(e===sP&&Array.isArray(_6))return _6;var r=[];return k.Children.forEach(e,function(n){or(n)||(x0e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),_6=r,sP=e,r};function ks(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Gl(a)}):n=[Gl(e)],pE(t).forEach(function(a){var i=Js(a,"type.displayName")||Js(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ws(t,e){var r=ks(t,e);return r&&r[0]}var oP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!vt(n)||n<=0||!vt(a)||a<=0)},P0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],D0e=function(e){return e&&e.type&&e0(e.type)&&P0e.indexOf(e.type)>=0},L0e=function(e,r,n,a){var i,s=(i=S6==null?void 0:S6[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!nr(e)&&(a&&s.includes(r)||C0e.includes(r))||n&&fE.includes(r)},zt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(k.isValidElement(e)&&(a=e.props),!Pf(a))return null;var i={};return Object.keys(a).forEach(function(s){var c;L0e((c=a)===null||c===void 0?void 0:c[s],s,r,n)&&(i[s]=a[s])}),i},$A=function t(e,r){if(e===r)return!0;var n=k.Children.count(e);if(n!==k.Children.count(r))return!1;if(n===0)return!0;if(n===1)return lP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!t(i,s))return!1}else if(!lP(i,s))return!1}return!0},lP=function(e,r){if(or(e)&&or(r))return!0;if(!or(e)&&!or(r)){var n=e.props||{},a=n.children,i=aP(n,I0e),s=r.props||{},c=s.children,d=aP(s,R0e);return a&&c?Ah(i,d)&&$A(a,c):!a&&!c?Ah(i,d):!1}return!1},cP=function(e,r){var n=[],a={};return pE(e).forEach(function(i,s){if(D0e(i))n.push(i);else if(i){var c=Gl(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,s);n.push(m),a[c]=!0}}}),n},B0e=function(e){var r=e&&e.type;return r&&iP[r]?iP[r]:null},$0e=function(e,r){return pE(r).indexOf(e)},U0e=["children","width","height","viewBox","className","style","title","desc"];function UA(){return UA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UA.apply(this,arguments)}function z0e(t,e){if(t==null)return{};var r=V0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function V0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zA(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,s=t.style,c=t.title,d=t.desc,h=z0e(t,U0e),p=a||{width:r,height:n,x:0,y:0},m=fr("recharts-surface",i);return se.createElement("svg",UA({},zt(h,!0,"svg"),{className:m,width:r,height:n,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var F0e=["children","className"];function VA(){return VA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VA.apply(this,arguments)}function q0e(t,e){if(t==null)return{};var r=H0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Vr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=q0e(t,F0e),i=fr("recharts-layer",n);return se.createElement("g",VA({className:i},zt(a,!0),{ref:e}),r)}),Wl=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},T6,uP;function G0e(){if(uP)return T6;uP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(i);++a<i;)s[a]=e[a+r];return s}return T6=t,T6}var A6,dP;function W0e(){if(dP)return A6;dP=1;var t=G0e();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return A6=e,A6}var N6,hP;function EG(){if(hP)return N6;hP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+a+i+"]");function d(h){return c.test(h)}return N6=d,N6}var E6,fP;function K0e(){if(fP)return E6;fP=1;function t(e){return e.split("")}return E6=t,E6}var j6,pP;function Q0e(){if(pP)return j6;pP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",T=h+"?",S="["+i+"]?",w="(?:"+x+"(?:"+[p,m,y].join("|")+")"+S+T+")*",E=S+T+w,I="(?:"+[p+c+"?",c,m,y,s].join("|")+")",R=RegExp(d+"(?="+d+")|"+I+E,"g");function L(O){return O.match(R)||[]}return j6=L,j6}var k6,mP;function X0e(){if(mP)return k6;mP=1;var t=K0e(),e=EG(),r=Q0e();function n(a){return e(a)?r(a):t(a)}return k6=n,k6}var C6,gP;function Y0e(){if(gP)return C6;gP=1;var t=W0e(),e=EG(),r=X0e(),n=_G();function a(i){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),h=c?t(c,1).join(""):s.slice(1);return d[i]()+h}}return C6=a,C6}var O6,yP;function Z0e(){if(yP)return O6;yP=1;var t=Y0e(),e=t("toUpperCase");return O6=e,O6}var J0e=Z0e();const z2=Kr(J0e);function In(t){return function(){return t}}const jG=Math.cos,Fx=Math.sin,jo=Math.sqrt,qx=Math.PI,V2=2*qx,FA=Math.PI,qA=2*FA,xd=1e-6,ehe=qA-xd;function kG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function the(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return kG;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class rhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?kG:the(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,s){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,c=this._y1,d=n-e,h=a-r,p=s-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>xd)if(!(Math.abs(m*d-h*p)>xd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let x=n-s,T=a-c,S=d*d+h*h,w=x*x+T*T,E=Math.sqrt(S),I=Math.sqrt(y),R=i*Math.tan((FA-Math.acos((S+y-w)/(2*E*I)))/2),L=R/I,O=R/E;Math.abs(L-1)>xd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*x>p*T)},${this._x1=e+O*d},${this._y1=r+O*h}`}}arc(e,r,n,a,i,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^s,y=s?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xd||Math.abs(this._y1-p)>xd)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%qA+qA),y>ehe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>xd&&this._append`A${n},${n},0,${+(y>=FA)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function mE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new rhe(e)}function gE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CG(t){this._context=t}CG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function F2(t){return new CG(t)}function OG(t){return t[0]}function IG(t){return t[1]}function RG(t,e){var r=In(!0),n=null,a=F2,i=null,s=mE(c);t=typeof t=="function"?t:t===void 0?OG:In(t),e=typeof e=="function"?e:e===void 0?IG:In(e);function c(d){var h,p=(d=gE(d)).length,m,y=!1,x;for(n==null&&(i=a(x=s())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(m,h,d),+e(m,h,d));if(x)return i=null,x+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:In(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:In(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:In(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function yv(t,e,r){var n=null,a=In(!0),i=null,s=F2,c=null,d=mE(h);t=typeof t=="function"?t:t===void 0?OG:In(+t),e=typeof e=="function"?e:In(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?IG:In(+r);function h(m){var y,x,T,S=(m=gE(m)).length,w,E=!1,I,R=new Array(S),L=new Array(S);for(i==null&&(c=s(I=d())),y=0;y<=S;++y){if(!(y<S&&a(w=m[y],y,m))===E)if(E=!E)x=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=x;--T)c.point(R[T],L[T]);c.lineEnd(),c.areaEnd()}E&&(R[y]=+t(w,y,m),L[y]=+e(w,y,m),c.point(n?+n(w,y,m):R[y],r?+r(w,y,m):L[y]))}if(I)return c=null,I+""||null}function p(){return RG().defined(a).curve(s).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:In(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:In(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:In(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:In(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:In(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:In(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:In(!!m),h):a},h.curve=function(m){return arguments.length?(s=m,i!=null&&(c=s(i)),h):s},h.context=function(m){return arguments.length?(m==null?i=c=null:c=s(i=m),h):i},h}class MG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function nhe(t){return new MG(t,!0)}function ahe(t){return new MG(t,!1)}const yE={draw(t,e){const r=jo(e/qx);t.moveTo(r,0),t.arc(0,0,r,0,V2)}},ihe={draw(t,e){const r=jo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},PG=jo(1/3),she=PG*2,ohe={draw(t,e){const r=jo(e/she),n=r*PG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},lhe={draw(t,e){const r=jo(e),n=-r/2;t.rect(n,n,r,r)}},che=.8908130915292852,DG=Fx(qx/10)/Fx(7*qx/10),uhe=Fx(V2/10)*DG,dhe=-jG(V2/10)*DG,hhe={draw(t,e){const r=jo(e*che),n=uhe*r,a=dhe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const s=V2*i/5,c=jG(s),d=Fx(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},I6=jo(3),fhe={draw(t,e){const r=-jo(e/(I6*3));t.moveTo(0,r*2),t.lineTo(-I6*r,-r),t.lineTo(I6*r,-r),t.closePath()}},Hs=-.5,Gs=jo(3)/2,HA=1/jo(12),phe=(HA/2+1)*3,mhe={draw(t,e){const r=jo(e/phe),n=r/2,a=r*HA,i=n,s=r*HA+r,c=-i,d=s;t.moveTo(n,a),t.lineTo(i,s),t.lineTo(c,d),t.lineTo(Hs*n-Gs*a,Gs*n+Hs*a),t.lineTo(Hs*i-Gs*s,Gs*i+Hs*s),t.lineTo(Hs*c-Gs*d,Gs*c+Hs*d),t.lineTo(Hs*n+Gs*a,Hs*a-Gs*n),t.lineTo(Hs*i+Gs*s,Hs*s-Gs*i),t.lineTo(Hs*c+Gs*d,Hs*d-Gs*c),t.closePath()}};function ghe(t,e){let r=null,n=mE(a);t=typeof t=="function"?t:In(t||yE),e=typeof e=="function"?e:In(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:In(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:In(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Hx(){}function Gx(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function LG(t){this._context=t}LG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yhe(t){return new LG(t)}function BG(t){this._context=t}BG.prototype={areaStart:Hx,areaEnd:Hx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Gx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vhe(t){return new BG(t)}function $G(t){this._context=t}$G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xhe(t){return new $G(t)}function UG(t){this._context=t}UG.prototype={areaStart:Hx,areaEnd:Hx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bhe(t){return new UG(t)}function vP(t){return t<0?-1:1}function xP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),s=(r-t._y1)/(a||n<0&&-0),c=(i*a+s*n)/(n+a);return(vP(i)+vP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(c))||0}function bP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function R6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,s=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,s-c*r,i,s)}function Wx(t){this._context=t}Wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R6(this,this._t0,bP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,R6(this,bP(this,r=xP(this,t,e)),r);break;default:R6(this,this._t0,r=xP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function zG(t){this._context=new VG(t)}(zG.prototype=Object.create(Wx.prototype)).point=function(t,e){Wx.prototype.point.call(this,e,t)};function VG(t){this._context=t}VG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function whe(t){return new Wx(t)}function She(t){return new zG(t)}function FG(t){this._context=t}FG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=wP(t),a=wP(e),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function wP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,s[e]-=n*s[e-1];for(a[r-1]=s[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(s[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function _he(t){return new FG(t)}function q2(t,e){this._context=t,this._t=e}q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function The(t){return new q2(t,.5)}function Ahe(t){return new q2(t,0)}function Nhe(t){return new q2(t,1)}function Xh(t,e){if((s=t.length)>1)for(var r=1,n,a,i=t[e[0]],s,c=i.length;r<s;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function GA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ehe(t,e){return t[e]}function jhe(t){const e=[];return e.key=t,e}function khe(){var t=In([]),e=GA,r=Xh,n=Ehe;function a(i){var s=Array.from(t.apply(this,arguments),jhe),c,d=s.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(s[c][h]=[0,+n(m,s[c].key,h,i)]).data=m;for(c=0,p=gE(e(s));c<d;++c)s[p[c]].index=c;return r(s,p),s}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:In(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:In(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?GA:typeof i=="function"?i:In(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??Xh,a):r},a}function Che(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=t[r][a][1]||0;if(s)for(r=0;r<n;++r)t[r][a][1]/=s}Xh(t,e)}}function Ohe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var s=0,c=0;s<a;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}Xh(t,e)}}function Ihe(t,e){if(!(!((s=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var c=0,d=0,h=0;c<s;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,x=(m-y)/2,T=0;T<c;++T){var S=t[e[T]],w=S[n][1]||0,E=S[n-1][1]||0;x+=w-E}d+=m,h+=x*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Xh(t,e)}}function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}var Rhe=["type","size","sizeType"];function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WA.apply(this,arguments)}function SP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _P(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(r),!0).forEach(function(n){Mhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mhe(t,e,r){return e=Phe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Phe(t){var e=Dhe(t,"string");return tg(e)=="symbol"?e:e+""}function Dhe(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lhe(t,e){if(t==null)return{};var r=Bhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qG={symbolCircle:yE,symbolCross:ihe,symbolDiamond:ohe,symbolSquare:lhe,symbolStar:hhe,symbolTriangle:fhe,symbolWye:mhe},$he=Math.PI/180,Uhe=function(e){var r="symbol".concat(z2(e));return qG[r]||yE},zhe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*$he;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vhe=function(e,r){qG["symbol".concat(z2(e))]=r},H2=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,s=e.sizeType,c=s===void 0?"area":s,d=Lhe(e,Rhe),h=_P(_P({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=Uhe(n),E=ghe().type(w).size(zhe(i,c,n));return E()},m=h.className,y=h.cx,x=h.cy,T=zt(h,!0);return y===+y&&x===+x&&i===+i?se.createElement("path",WA({},T,{className:fr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(x,")"),d:p()})):null};H2.registerSymbol=Vhe;function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}function TP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(r),!0).forEach(function(n){rg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GG(n.key),n)}}function Ghe(t,e,r){return e&&Hhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Whe(t,e,r){return e=Kx(e),Khe(t,HG()?Reflect.construct(e,r||[],Kx(t).constructor):e.apply(t,r))}function Khe(t,e){if(e&&(Yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qhe(t)}function Qhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HG=function(){return!!t})()}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kx(t)}function Xhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QA(t,e)}function rg(t,e,r){return e=GG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GG(t){var e=Yhe(t,"string");return Yh(e)=="symbol"?e:e+""}function Yhe(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ws=32,vE=(function(t){function e(){return qhe(this,e),Whe(this,e,arguments)}return Xhe(e,t),Ghe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ws/2,s=Ws/6,c=Ws/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ws,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ws,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ws/8,"h").concat(Ws,"v").concat(Ws*3/4,"h").concat(-Ws,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=Fhe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(H2,{fill:d,cx:i,cy:i,size:Ws,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Ws,height:Ws},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,T){var S=x.formatter||d,w=fr(rg(rg({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",x.inactive));if(x.type==="none")return null;var E=nr(x.value)?null:x.value;Wl(!nr(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=x.inactive?h:x.color;return se.createElement("li",KA({className:w,style:m,key:"legend-item-".concat(T)},t0(n.props,x,T)),se.createElement(zA,{width:s,height:s,viewBox:p,style:y},n.renderIcon(x)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},S?S(E,x,T):E))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(k.PureComponent);rg(vE,"displayName","Legend");rg(vE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var M6,AP;function Zhe(){if(AP)return M6;AP=1;var t=B2();function e(){this.__data__=new t,this.size=0}return M6=e,M6}var P6,NP;function Jhe(){if(NP)return P6;NP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return P6=t,P6}var D6,EP;function efe(){if(EP)return D6;EP=1;function t(e){return this.__data__.get(e)}return D6=t,D6}var L6,jP;function tfe(){if(jP)return L6;jP=1;function t(e){return this.__data__.has(e)}return L6=t,L6}var B6,kP;function rfe(){if(kP)return B6;kP=1;var t=B2(),e=cE(),r=uE(),n=200;function a(i,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,s),this.size=c.size,this}return B6=a,B6}var $6,CP;function WG(){if(CP)return $6;CP=1;var t=B2(),e=Zhe(),r=Jhe(),n=efe(),a=tfe(),i=rfe();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,$6=s,$6}var U6,OP;function nfe(){if(OP)return U6;OP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return U6=e,U6}var z6,IP;function afe(){if(IP)return z6;IP=1;function t(e){return this.__data__.has(e)}return z6=t,z6}var V6,RP;function KG(){if(RP)return V6;RP=1;var t=uE(),e=nfe(),r=afe();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,V6=n,V6}var F6,MP;function QG(){if(MP)return F6;MP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return F6=t,F6}var q6,PP;function XG(){if(PP)return q6;PP=1;function t(e,r){return e.has(r)}return q6=t,q6}var H6,DP;function YG(){if(DP)return H6;DP=1;var t=KG(),e=QG(),r=XG(),n=1,a=2;function i(s,c,d,h,p,m){var y=d&n,x=s.length,T=c.length;if(x!=T&&!(y&&T>x))return!1;var S=m.get(s),w=m.get(c);if(S&&w)return S==c&&w==s;var E=-1,I=!0,R=d&a?new t:void 0;for(m.set(s,c),m.set(c,s);++E<x;){var L=s[E],O=c[E];if(h)var M=y?h(O,L,E,c,s,m):h(L,O,E,s,c,m);if(M!==void 0){if(M)continue;I=!1;break}if(R){if(!e(c,function(N,A){if(!r(R,A)&&(L===N||p(L,N,d,h,m)))return R.push(A)})){I=!1;break}}else if(!(L===O||p(L,O,d,h,m))){I=!1;break}}return m.delete(s),m.delete(c),I}return H6=i,H6}var G6,LP;function ife(){if(LP)return G6;LP=1;var t=il(),e=t.Uint8Array;return G6=e,G6}var W6,BP;function sfe(){if(BP)return W6;BP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return W6=t,W6}var K6,$P;function xE(){if($P)return K6;$P=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return K6=t,K6}var Q6,UP;function ofe(){if(UP)return Q6;UP=1;var t=d1(),e=ife(),r=lE(),n=YG(),a=sfe(),i=xE(),s=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",x="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",I="[object DataView]",R=t?t.prototype:void 0,L=R?R.valueOf:void 0;function O(M,N,A,j,z,B,F){switch(A){case I:if(M.byteLength!=N.byteLength||M.byteOffset!=N.byteOffset)return!1;M=M.buffer,N=N.buffer;case E:return!(M.byteLength!=N.byteLength||!B(new e(M),new e(N)));case d:case h:case y:return r(+M,+N);case p:return M.name==N.name&&M.message==N.message;case x:case S:return M==N+"";case m:var U=a;case T:var X=j&s;if(U||(U=i),M.size!=N.size&&!X)return!1;var W=F.get(M);if(W)return W==N;j|=c,F.set(M,N);var H=n(U(M),U(N),j,z,B,F);return F.delete(M),H;case w:if(L)return L.call(M)==L.call(N)}return!1}return Q6=O,Q6}var X6,zP;function ZG(){if(zP)return X6;zP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return X6=t,X6}var Y6,VP;function lfe(){if(VP)return Y6;VP=1;var t=ZG(),e=ss();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return Y6=r,Y6}var Z6,FP;function cfe(){if(FP)return Z6;FP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var c=e[n];r(c,n,e)&&(s[i++]=c)}return s}return Z6=t,Z6}var J6,qP;function ufe(){if(qP)return J6;qP=1;function t(){return[]}return J6=t,J6}var eS,HP;function dfe(){if(HP)return eS;HP=1;var t=cfe(),e=ufe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(c){return n.call(s,c)}))}:e;return eS=i,eS}var tS,GP;function hfe(){if(GP)return tS;GP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return tS=t,tS}var rS,WP;function ffe(){if(WP)return rS;WP=1;var t=hc(),e=fc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return rS=n,rS}var nS,KP;function bE(){if(KP)return nS;KP=1;var t=ffe(),e=fc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return nS=i,nS}var sm={exports:{}},aS,QP;function pfe(){if(QP)return aS;QP=1;function t(){return!1}return aS=t,aS}sm.exports;var XP;function JG(){return XP||(XP=1,(function(t,e){var r=il(),n=pfe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(sm,sm.exports)),sm.exports}var iS,YP;function wE(){if(YP)return iS;YP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return iS=r,iS}var sS,ZP;function SE(){if(ZP)return sS;ZP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return sS=e,sS}var oS,JP;function mfe(){if(JP)return oS;JP=1;var t=hc(),e=SE(),r=fc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",x="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",O="[object Int16Array]",M="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",j="[object Uint16Array]",z="[object Uint32Array]",B={};B[I]=B[R]=B[L]=B[O]=B[M]=B[N]=B[A]=B[j]=B[z]=!0,B[n]=B[a]=B[w]=B[i]=B[E]=B[s]=B[c]=B[d]=B[h]=B[p]=B[m]=B[y]=B[x]=B[T]=B[S]=!1;function F(U){return r(U)&&e(U.length)&&!!B[t(U)]}return oS=F,oS}var lS,eD;function eW(){if(eD)return lS;eD=1;function t(e){return function(r){return e(r)}}return lS=t,lS}var om={exports:{}};om.exports;var tD;function gfe(){return tD||(tD=1,(function(t,e){var r=bG(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(om,om.exports)),om.exports}var cS,rD;function tW(){if(rD)return cS;rD=1;var t=mfe(),e=eW(),r=gfe(),n=r&&r.isTypedArray,a=n?e(n):t;return cS=a,cS}var uS,nD;function yfe(){if(nD)return uS;nD=1;var t=hfe(),e=bE(),r=ss(),n=JG(),a=wE(),i=tW(),s=Object.prototype,c=s.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),x=!m&&!y&&n(h),T=!m&&!y&&!x&&i(h),S=m||y||x||T,w=S?t(h.length,String):[],E=w.length;for(var I in h)(p||c.call(h,I))&&!(S&&(I=="length"||x&&(I=="offset"||I=="parent")||T&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||a(I,E)))&&w.push(I);return w}return uS=d,uS}var dS,aD;function vfe(){if(aD)return dS;aD=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return dS=e,dS}var hS,iD;function rW(){if(iD)return hS;iD=1;function t(e,r){return function(n){return e(r(n))}}return hS=t,hS}var fS,sD;function xfe(){if(sD)return fS;sD=1;var t=rW(),e=t(Object.keys,Object);return fS=e,fS}var pS,oD;function bfe(){if(oD)return pS;oD=1;var t=vfe(),e=xfe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&s.push(c);return s}return pS=a,pS}var mS,lD;function p1(){if(lD)return mS;lD=1;var t=oE(),e=SE();function r(n){return n!=null&&e(n.length)&&!t(n)}return mS=r,mS}var gS,cD;function G2(){if(cD)return gS;cD=1;var t=yfe(),e=bfe(),r=p1();function n(a){return r(a)?t(a):e(a)}return gS=n,gS}var yS,uD;function wfe(){if(uD)return yS;uD=1;var t=lfe(),e=dfe(),r=G2();function n(a){return t(a,r,e)}return yS=n,yS}var vS,dD;function Sfe(){if(dD)return vS;dD=1;var t=wfe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,c,d,h,p){var m=c&e,y=t(i),x=y.length,T=t(s),S=T.length;if(x!=S&&!m)return!1;for(var w=x;w--;){var E=y[w];if(!(m?E in s:n.call(s,E)))return!1}var I=p.get(i),R=p.get(s);if(I&&R)return I==s&&R==i;var L=!0;p.set(i,s),p.set(s,i);for(var O=m;++w<x;){E=y[w];var M=i[E],N=s[E];if(d)var A=m?d(N,M,E,s,i,p):d(M,N,E,i,s,p);if(!(A===void 0?M===N||h(M,N,c,d,p):A)){L=!1;break}O||(O=E=="constructor")}if(L&&!O){var j=i.constructor,z=s.constructor;j!=z&&"constructor"in i&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof z=="function"&&z instanceof z)&&(L=!1)}return p.delete(i),p.delete(s),L}return vS=a,vS}var xS,hD;function _fe(){if(hD)return xS;hD=1;var t=f0(),e=il(),r=t(e,"DataView");return xS=r,xS}var bS,fD;function Tfe(){if(fD)return bS;fD=1;var t=f0(),e=il(),r=t(e,"Promise");return bS=r,bS}var wS,pD;function nW(){if(pD)return wS;pD=1;var t=f0(),e=il(),r=t(e,"Set");return wS=r,wS}var SS,mD;function Afe(){if(mD)return SS;mD=1;var t=f0(),e=il(),r=t(e,"WeakMap");return SS=r,SS}var _S,gD;function Nfe(){if(gD)return _S;gD=1;var t=_fe(),e=cE(),r=Tfe(),n=nW(),a=Afe(),i=hc(),s=wG(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",x=s(t),T=s(e),S=s(r),w=s(n),E=s(a),I=i;return(t&&I(new t(new ArrayBuffer(1)))!=y||e&&I(new e)!=c||r&&I(r.resolve())!=h||n&&I(new n)!=p||a&&I(new a)!=m)&&(I=function(R){var L=i(R),O=L==d?R.constructor:void 0,M=O?s(O):"";if(M)switch(M){case x:return y;case T:return c;case S:return h;case w:return p;case E:return m}return L}),_S=I,_S}var TS,yD;function Efe(){if(yD)return TS;yD=1;var t=WG(),e=YG(),r=ofe(),n=Sfe(),a=Nfe(),i=ss(),s=JG(),c=tW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,x=y.hasOwnProperty;function T(S,w,E,I,R,L){var O=i(S),M=i(w),N=O?p:a(S),A=M?p:a(w);N=N==h?m:N,A=A==h?m:A;var j=N==m,z=A==m,B=N==A;if(B&&s(S)){if(!s(w))return!1;O=!0,j=!1}if(B&&!j)return L||(L=new t),O||c(S)?e(S,w,E,I,R,L):r(S,w,N,E,I,R,L);if(!(E&d)){var F=j&&x.call(S,"__wrapped__"),U=z&&x.call(w,"__wrapped__");if(F||U){var X=F?S.value():S,W=U?w.value():w;return L||(L=new t),R(X,W,E,I,L)}}return B?(L||(L=new t),n(S,w,E,I,R,L)):!1}return TS=T,TS}var AS,vD;function _E(){if(vD)return AS;vD=1;var t=Efe(),e=fc();function r(n,a,i,s,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,c)}return AS=r,AS}var NS,xD;function jfe(){if(xD)return NS;xD=1;var t=WG(),e=_E(),r=1,n=2;function a(i,s,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var y=c[h];if(m&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<p;){y=c[h];var x=y[0],T=i[x],S=y[1];if(m&&y[2]){if(T===void 0&&!(x in i))return!1}else{var w=new t;if(d)var E=d(T,S,x,i,s,w);if(!(E===void 0?e(S,T,r|n,d,w):E))return!1}}return!0}return NS=a,NS}var ES,bD;function aW(){if(bD)return ES;bD=1;var t=Pu();function e(r){return r===r&&!t(r)}return ES=e,ES}var jS,wD;function kfe(){if(wD)return jS;wD=1;var t=aW(),e=G2();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],c=n[s];a[i]=[s,c,t(c)]}return a}return jS=r,jS}var kS,SD;function iW(){if(SD)return kS;SD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return kS=t,kS}var CS,_D;function Cfe(){if(_D)return CS;_D=1;var t=jfe(),e=kfe(),r=iW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return CS=n,CS}var OS,TD;function Ofe(){if(TD)return OS;TD=1;function t(e,r){return e!=null&&r in Object(e)}return OS=t,OS}var IS,AD;function Ife(){if(AD)return IS;AD=1;var t=TG(),e=bE(),r=ss(),n=wE(),a=SE(),i=U2();function s(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var x=i(d[p]);if(!(y=c!=null&&h(c,x)))break;c=c[x]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&a(m)&&n(x,m)&&(r(c)||e(c)))}return IS=s,IS}var RS,ND;function Rfe(){if(ND)return RS;ND=1;var t=Ofe(),e=Ife();function r(n,a){return n!=null&&e(n,a,t)}return RS=r,RS}var MS,ED;function Mfe(){if(ED)return MS;ED=1;var t=_E(),e=AG(),r=Rfe(),n=sE(),a=aW(),i=iW(),s=U2(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(s(p),m):function(y){var x=e(y,p);return x===void 0&&x===m?r(y,p):t(m,x,c|d)}}return MS=h,MS}var PS,jD;function Df(){if(jD)return PS;jD=1;function t(e){return e}return PS=t,PS}var DS,kD;function Pfe(){if(kD)return DS;kD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return DS=t,DS}var LS,CD;function Dfe(){if(CD)return LS;CD=1;var t=hE();function e(r){return function(n){return t(n,r)}}return LS=e,LS}var BS,OD;function Lfe(){if(OD)return BS;OD=1;var t=Pfe(),e=Dfe(),r=sE(),n=U2();function a(i){return r(i)?t(n(i)):e(i)}return BS=a,BS}var $S,ID;function sl(){if(ID)return $S;ID=1;var t=Cfe(),e=Mfe(),r=Df(),n=ss(),a=Lfe();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return $S=i,$S}var US,RD;function sW(){if(RD)return US;RD=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return US=t,US}var zS,MD;function Bfe(){if(MD)return zS;MD=1;function t(e){return e!==e}return zS=t,zS}var VS,PD;function $fe(){if(PD)return VS;PD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return VS=t,VS}var FS,DD;function Ufe(){if(DD)return FS;DD=1;var t=sW(),e=Bfe(),r=$fe();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return FS=n,FS}var qS,LD;function zfe(){if(LD)return qS;LD=1;var t=Ufe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return qS=e,qS}var HS,BD;function Vfe(){if(BD)return HS;BD=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return HS=t,HS}var GS,$D;function Ffe(){if($D)return GS;$D=1;function t(){}return GS=t,GS}var WS,UD;function qfe(){if(UD)return WS;UD=1;var t=nW(),e=Ffe(),r=xE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return WS=a,WS}var KS,zD;function Hfe(){if(zD)return KS;zD=1;var t=KG(),e=zfe(),r=Vfe(),n=XG(),a=qfe(),i=xE(),s=200;function c(d,h,p){var m=-1,y=e,x=d.length,T=!0,S=[],w=S;if(p)T=!1,y=r;else if(x>=s){var E=h?null:a(d);if(E)return i(E);T=!1,y=n,w=new t}else w=h?[]:S;e:for(;++m<x;){var I=d[m],R=h?h(I):I;if(I=p||I!==0?I:0,T&&R===R){for(var L=w.length;L--;)if(w[L]===R)continue e;h&&w.push(R),S.push(I)}else y(w,R,p)||(w!==S&&w.push(R),S.push(I))}return S}return KS=c,KS}var QS,VD;function Gfe(){if(VD)return QS;VD=1;var t=sl(),e=Hfe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return QS=r,QS}var Wfe=Gfe();const FD=Kr(Wfe);function oW(t,e,r){return e===!0?FD(t,r):nr(e)?FD(t,e):t}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}var Kfe=["ref"];function qD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(r),!0).forEach(function(n){W2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cW(n.key),n)}}function Xfe(t,e,r){return e&&HD(t.prototype,e),r&&HD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yfe(t,e,r){return e=Qx(e),Zfe(t,lW()?Reflect.construct(e,r||[],Qx(t).constructor):e.apply(t,r))}function Zfe(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jfe(t)}function Jfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lW=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qx(t)}function epe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XA(t,e)}function W2(t,e,r){return e=cW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cW(t){var e=tpe(t,"string");return Zh(e)=="symbol"?e:e+""}function tpe(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function rpe(t,e){if(t==null)return{};var r=npe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function npe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ape(t){return t.value}function ipe(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=rpe(e,Kfe);return se.createElement(vE,r)}var GD=1,Nh=(function(t){function e(){var r;Qfe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Yfe(this,e,[].concat(a)),W2(r,"lastBoundingBox",{width:-1,height:-1}),r}return epe(e,t),Xfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>GD||Math.abs(a.height-this.lastBoundingBox.height)>GD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?kl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((h||0)-x.width)/2}}else m=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((p||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return kl(kl({},m),y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=kl(kl({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){n.wrapperNode=x}},ipe(i,kl(kl({},this.props),{},{payload:oW(p,h,ape)})))}}],[{key:"getWithHeight",value:function(n,a){var i=kl(kl({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&vt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])})(k.PureComponent);W2(Nh,"displayName","Legend");W2(Nh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var XS,WD;function spe(){if(WD)return XS;WD=1;var t=d1(),e=bE(),r=ss(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return XS=a,XS}var YS,KD;function uW(){if(KD)return YS;KD=1;var t=ZG(),e=spe();function r(n,a,i,s,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,s,c):t(c,p):s||(c[c.length]=p)}return c}return YS=r,YS}var ZS,QD;function ope(){if(QD)return ZS;QD=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(s[h],h,s)===!1)break}return r}}return ZS=t,ZS}var JS,XD;function lpe(){if(XD)return JS;XD=1;var t=ope(),e=t();return JS=e,JS}var e_,YD;function dW(){if(YD)return e_;YD=1;var t=lpe(),e=G2();function r(n,a){return n&&t(n,a,e)}return e_=r,e_}var t_,ZD;function cpe(){if(ZD)return t_;ZD=1;var t=p1();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,c=n?s:-1,d=Object(a);(n?c--:++c<s)&&i(d[c],c,d)!==!1;);return a}}return t_=e,t_}var r_,JD;function TE(){if(JD)return r_;JD=1;var t=dW(),e=cpe(),r=e(t);return r_=r,r_}var n_,eL;function hW(){if(eL)return n_;eL=1;var t=TE(),e=p1();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,h){s[++i]=a(c,d,h)}),s}return n_=r,n_}var a_,tL;function upe(){if(tL)return a_;tL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return a_=t,a_}var i_,rL;function dpe(){if(rL)return i_;rL=1;var t=Mf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!s)return 1;if(!i&&!c&&!m&&r<n||m&&a&&s&&!i&&!c||h&&a&&s||!d&&s||!p)return-1}return 0}return i_=e,i_}var s_,nL;function hpe(){if(nL)return s_;nL=1;var t=dpe();function e(r,n,a){for(var i=-1,s=r.criteria,c=n.criteria,d=s.length,h=a.length;++i<d;){var p=t(s[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return s_=e,s_}var o_,aL;function fpe(){if(aL)return o_;aL=1;var t=dE(),e=hE(),r=sl(),n=hW(),a=upe(),i=eW(),s=hpe(),c=Df(),d=ss();function h(p,m,y){m.length?m=t(m,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):m=[c];var x=-1;m=t(m,i(r));var T=n(p,function(S,w,E){var I=t(m,function(R){return R(S)});return{criteria:I,index:++x,value:S}});return a(T,function(S,w){return s(S,w,y)})}return o_=h,o_}var l_,iL;function ppe(){if(iL)return l_;iL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return l_=t,l_}var c_,sL;function mpe(){if(sL)return c_;sL=1;var t=ppe(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,c=-1,d=e(s.length-a,0),h=Array(d);++c<d;)h[c]=s[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=s[c];return p[a]=i(h),t(n,this,p)}}return c_=r,c_}var u_,oL;function gpe(){if(oL)return u_;oL=1;function t(e){return function(){return e}}return u_=t,u_}var d_,lL;function fW(){if(lL)return d_;lL=1;var t=f0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return d_=e,d_}var h_,cL;function ype(){if(cL)return h_;cL=1;var t=gpe(),e=fW(),r=Df(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return h_=n,h_}var f_,uL;function vpe(){if(uL)return f_;uL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return f_=n,f_}var p_,dL;function xpe(){if(dL)return p_;dL=1;var t=ype(),e=vpe(),r=e(t);return p_=r,p_}var m_,hL;function bpe(){if(hL)return m_;hL=1;var t=Df(),e=mpe(),r=xpe();function n(a,i){return r(e(a,i,t),a+"")}return m_=n,m_}var g_,fL;function K2(){if(fL)return g_;fL=1;var t=lE(),e=p1(),r=wE(),n=Pu();function a(i,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],i):!1}return g_=a,g_}var y_,pL;function wpe(){if(pL)return y_;pL=1;var t=uW(),e=fpe(),r=bpe(),n=K2(),a=r(function(i,s){if(i==null)return[];var c=s.length;return c>1&&n(i,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return y_=a,y_}var Spe=wpe();const AE=Kr(Spe);function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YA.apply(this,arguments)}function _pe(t,e){return Epe(t)||Npe(t,e)||Ape(t,e)||Tpe()}function Tpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ape(t,e){if(t){if(typeof t=="string")return mL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mL(t,e)}}function mL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Npe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Epe(t){if(Array.isArray(t))return t}function gL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(r),!0).forEach(function(n){jpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jpe(t,e,r){return e=kpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kpe(t){var e=Cpe(t,"string");return ng(e)=="symbol"?e:e+""}function Cpe(t,e){if(ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ope(t){return Array.isArray(t)&&La(t[0])&&La(t[1])?t.join(" ~ "):t}var Ipe=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,x=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,E=e.accessibilityLayer,I=E===void 0?!1:E,R=function(){if(p&&p.length){var F={padding:0,margin:0},U=(y?AE(p,y):p).map(function(X,W){if(X.type==="none")return null;var H=v_({display:"block",paddingTop:4,paddingBottom:4,color:X.color||"#000"},c),Z=X.formatter||m||Ope,ie=X.value,fe=X.name,me=ie,K=fe;if(Z&&me!=null&&K!=null){var te=Z(ie,fe,X,W,p);if(Array.isArray(te)){var re=_pe(te,2);me=re[0],K=re[1]}else me=te}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:H},La(K)?se.createElement("span",{className:"recharts-tooltip-item-name"},K):null,La(K)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},me),se.createElement("span",{className:"recharts-tooltip-item-unit"},X.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:F},U)}return null},L=v_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),O=v_({margin:0},h),M=!or(S),N=M?S:"",A=fr("recharts-default-tooltip",x),j=fr("recharts-tooltip-label",T);M&&w&&p!==void 0&&p!==null&&(N=w(S,p));var z=I?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",YA({className:A,style:L},z),se.createElement("p",{className:j,style:O},se.isValidElement(N)?N:"".concat(N)),R())};function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function vv(t,e,r){return e=Rpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rpe(t){var e=Mpe(t,"string");return ag(e)=="symbol"?e:e+""}function Mpe(t,e){if(ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fp="recharts-tooltip-wrapper",Ppe={visibility:"hidden"};function Dpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return fr(Fp,vv(vv(vv(vv({},"".concat(Fp,"-right"),vt(r)&&e&&vt(e.x)&&r>=e.x),"".concat(Fp,"-left"),vt(r)&&e&&vt(e.x)&&r<e.x),"".concat(Fp,"-bottom"),vt(n)&&e&&vt(e.y)&&n>=e.y),"".concat(Fp,"-top"),vt(n)&&e&&vt(e.y)&&n<e.y))}function yL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&vt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return s[n]?p:m;if(s[n]){var y=p,x=d[n];return y<x?Math.max(m,d[n]):Math.max(p,d[n])}var T=m+c,S=d[n]+h;return T>S?Math.max(p,d[n]):Math.max(m,d[n])}function Lpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Bpe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return s.height>0&&s.width>0&&r?(p=yL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),m=yL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=Lpe({translateX:p,translateY:m,useTranslate3d:c})):h=Ppe,{cssProperties:h,cssClasses:Dpe({translateX:p,translateY:m,coordinate:r})}}function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function vL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(r),!0).forEach(function(n){JA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Upe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mW(n.key),n)}}function zpe(t,e,r){return e&&Upe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vpe(t,e,r){return e=Xx(e),Fpe(t,pW()?Reflect.construct(e,r||[],Xx(t).constructor):e.apply(t,r))}function Fpe(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qpe(t)}function qpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pW=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xx(t)}function Hpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZA(t,e)}function ZA(t,e){return ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZA(t,e)}function JA(t,e,r){return e=mW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mW(t){var e=Gpe(t,"string");return Jh(e)=="symbol"?e:e+""}function Gpe(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bL=1,Wpe=(function(t){function e(){var r;$pe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Vpe(this,e,[].concat(a)),JA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),JA(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return Hpe(e,t),zpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>bL||Math.abs(n.height-this.state.lastBoundingBox.height)>bL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,y=a.isAnimationActive,x=a.offset,T=a.position,S=a.reverseDirection,w=a.useTranslate3d,E=a.viewBox,I=a.wrapperStyle,R=Bpe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:x,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),L=R.cssClasses,O=R.cssProperties,M=xL(xL({transition:y&&i?"transform ".concat(c,"ms ").concat(d):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},I);return se.createElement("div",{tabIndex:-1,className:L,style:M,ref:function(A){n.wrapperNode=A}},h)}}])})(k.PureComponent),Kpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},p0={isSsr:Kpe()};function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function wL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wL(Object(r),!0).forEach(function(n){NE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yW(n.key),n)}}function Ype(t,e,r){return e&&Xpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zpe(t,e,r){return e=Yx(e),Jpe(t,gW()?Reflect.construct(e,r||[],Yx(t).constructor):e.apply(t,r))}function Jpe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eme(t)}function eme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!t})()}function Yx(t){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yx(t)}function tme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eN(t,e)}function eN(t,e){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eN(t,e)}function NE(t,e,r){return e=yW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yW(t){var e=rme(t,"string");return ef(e)=="symbol"?e:e+""}function rme(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nme(t){return t.dataKey}function ame(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(Ipe,e)}var Lo=(function(t){function e(){return Qpe(this,e),Zpe(this,e,arguments)}return tme(e,t),Ype(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,y=a.isAnimationActive,x=a.offset,T=a.payload,S=a.payloadUniqBy,w=a.position,E=a.reverseDirection,I=a.useTranslate3d,R=a.viewBox,L=a.wrapperStyle,O=T??[];m&&O.length&&(O=oW(T.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),S,nme));var M=O.length>0;return se.createElement(Wpe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:i,coordinate:p,hasPayload:M,offset:x,position:w,reverseDirection:E,useTranslate3d:I,viewBox:R,wrapperStyle:L},ame(h,SL(SL({},this.props),{},{payload:O})))}}])})(k.PureComponent);NE(Lo,"displayName","Tooltip");NE(Lo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!p0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var x_,_L;function ime(){if(_L)return x_;_L=1;var t=il(),e=function(){return t.Date.now()};return x_=e,x_}var b_,TL;function sme(){if(TL)return b_;TL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return b_=e,b_}var w_,AL;function ome(){if(AL)return w_;AL=1;var t=sme(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return w_=r,w_}var S_,NL;function vW(){if(NL)return S_;NL=1;var t=ome(),e=Pu(),r=Mf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return S_=d,S_}var __,EL;function lme(){if(EL)return __;EL=1;var t=Pu(),e=ime(),r=vW(),n="Expected a function",a=Math.max,i=Math.min;function s(c,d,h){var p,m,y,x,T,S,w=0,E=!1,I=!1,R=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(E=!!h.leading,I="maxWait"in h,y=I?a(r(h.maxWait)||0,d):y,R="trailing"in h?!!h.trailing:R);function L(U){var X=p,W=m;return p=m=void 0,w=U,x=c.apply(W,X),x}function O(U){return w=U,T=setTimeout(A,d),E?L(U):x}function M(U){var X=U-S,W=U-w,H=d-X;return I?i(H,y-W):H}function N(U){var X=U-S,W=U-w;return S===void 0||X>=d||X<0||I&&W>=y}function A(){var U=e();if(N(U))return j(U);T=setTimeout(A,M(U))}function j(U){return T=void 0,R&&p?L(U):(p=m=void 0,x)}function z(){T!==void 0&&clearTimeout(T),w=0,p=S=m=T=void 0}function B(){return T===void 0?x:j(e())}function F(){var U=e(),X=N(U);if(p=arguments,m=this,S=U,X){if(T===void 0)return O(S);if(I)return clearTimeout(T),T=setTimeout(A,d),L(S)}return T===void 0&&(T=setTimeout(A,d)),x}return F.cancel=z,F.flush=B,F}return __=s,__}var T_,jL;function cme(){if(jL)return T_;jL=1;var t=lme(),e=Pu(),r="Expected a function";function n(a,i,s){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return T_=n,T_}var ume=cme();const xW=Kr(ume);function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function kL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(r),!0).forEach(function(n){dme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dme(t,e,r){return e=hme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hme(t){var e=fme(t,"string");return ig(e)=="symbol"?e:e+""}function fme(t,e){if(ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pme(t,e){return vme(t)||yme(t,e)||gme(t,e)||mme()}function mme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gme(t,e){if(t){if(typeof t=="string")return CL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CL(t,e)}}function CL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function vme(t){if(Array.isArray(t))return t}var bW=k.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,s=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,x=t.children,T=t.debounce,S=T===void 0?0:T,w=t.id,E=t.className,I=t.onResize,R=t.style,L=R===void 0?{}:R,O=k.useRef(null),M=k.useRef();M.current=I,k.useImperativeHandle(e,function(){return Object.defineProperty(O.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),O.current},configurable:!0})});var N=k.useState({containerWidth:a.width,containerHeight:a.height}),A=pme(N,2),j=A[0],z=A[1],B=k.useCallback(function(U,X){z(function(W){var H=Math.round(U),Z=Math.round(X);return W.containerWidth===H&&W.containerHeight===Z?W:{containerWidth:H,containerHeight:Z}})},[]);k.useEffect(function(){var U=function(fe){var me,K=fe[0].contentRect,te=K.width,re=K.height;B(te,re),(me=M.current)===null||me===void 0||me.call(M,te,re)};S>0&&(U=xW(U,S,{trailing:!0,leading:!1}));var X=new ResizeObserver(U),W=O.current.getBoundingClientRect(),H=W.width,Z=W.height;return B(H,Z),X.observe(O.current),function(){X.disconnect()}},[B,S]);var F=k.useMemo(function(){var U=j.containerWidth,X=j.containerHeight;if(U<0||X<0)return null;Wl(Ed(s)||Ed(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Wl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=Ed(s)?U:s,H=Ed(d)?X:d;r&&r>0&&(W?H=W/r:H&&(W=H*r),y&&H>y&&(H=y)),Wl(W>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,H,s,d,p,m,r);var Z=!Array.isArray(x)&&Gl(x.type).endsWith("Chart");return se.Children.map(x,function(ie){return se.isValidElement(ie)?k.cloneElement(ie,xv({width:W,height:H},Z?{style:xv({height:"100%",width:"100%",maxHeight:H,maxWidth:W},ie.props.style)}:{})):ie})},[r,x,d,y,m,p,j,s]);return se.createElement("div",{id:w?"".concat(w):void 0,className:fr("recharts-responsive-container",E),style:xv(xv({},L),{},{width:s,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:O},F)}),EE=function(e){return null};EE.displayName="Cell";function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function OL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(r),!0).forEach(function(n){xme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xme(t,e,r){return e=bme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bme(t){var e=wme(t,"string");return sg(e)=="symbol"?e:e+""}function wme(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nh={widthCache:{},cacheCount:0},Sme=2e3,_me={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IL="recharts_measurement_span";function Tme(t){var e=tN({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var bm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||p0.isSsr)return{width:0,height:0};var n=Tme(r),a=JSON.stringify({text:e,copyStyle:n});if(nh.widthCache[a])return nh.widthCache[a];try{var i=document.getElementById(IL);i||(i=document.createElement("span"),i.setAttribute("id",IL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=tN(tN({},_me),n);Object.assign(i.style,s),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return nh.widthCache[a]=d,++nh.cacheCount>Sme&&(nh.cacheCount=0,nh.widthCache={}),d}catch{return{width:0,height:0}}},Ame=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function Zx(t,e){return kme(t)||jme(t,e)||Eme(t,e)||Nme()}function Nme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eme(t,e){if(t){if(typeof t=="string")return RL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RL(t,e)}}function RL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function kme(t){if(Array.isArray(t))return t}function Cme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ML(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ime(n.key),n)}}function Ome(t,e,r){return e&&ML(t.prototype,e),r&&ML(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ime(t){var e=Rme(t,"string");return og(e)=="symbol"?e:e+""}function Rme(t,e){if(og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var PL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Dme=Object.keys(wW),ph="NaN";function Lme(t,e){return t*wW[e]}var bv=(function(){function t(e,r){Cme(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Mme.test(r)&&(this.num=NaN,this.unit=""),Dme.includes(r)&&(this.num=Lme(e,r),this.unit="px")}return Ome(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Pme.exec(r))!==null&&n!==void 0?n:[],i=Zx(a,3),s=i[1],c=i[2];return new t(parseFloat(s),c??"")}}])})();function SW(t){if(t.includes(ph))return ph;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=PL.exec(e))!==null&&r!==void 0?r:[],a=Zx(n,4),i=a[1],s=a[2],c=a[3],d=bv.parse(i??""),h=bv.parse(c??""),p=s==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return ph;e=e.replace(PL,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=DL.exec(e))!==null&&m!==void 0?m:[],x=Zx(y,4),T=x[1],S=x[2],w=x[3],E=bv.parse(T??""),I=bv.parse(w??""),R=S==="+"?E.add(I):E.subtract(I);if(R.isNaN())return ph;e=e.replace(DL,R.toString())}return e}var LL=/\(([^()]*)\)/;function Bme(t){for(var e=t;e.includes("(");){var r=LL.exec(e),n=Zx(r,2),a=n[1];e=e.replace(LL,SW(a))}return e}function $me(t){var e=t.replace(/\s+/g,"");return e=Bme(e),e=SW(e),e}function Ume(t){try{return $me(t)}catch{return ph}}function A_(t){var e=Ume(t.slice(5,-1));return e===ph?"":e}var zme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Vme=["dx","dy","angle","className","breakAll"];function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rN.apply(this,arguments)}function BL(t,e){if(t==null)return{};var r=Fme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $L(t,e){return Wme(t)||Gme(t,e)||Hme(t,e)||qme()}function qme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hme(t,e){if(t){if(typeof t=="string")return UL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UL(t,e)}}function UL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Wme(t){if(Array.isArray(t))return t}var _W=/[ \f\n\r\t\v\u2028\u2029]+/,TW=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];or(r)||(n?i=r.toString().split(""):i=r.toString().split(_W));var s=i.map(function(d){return{word:d,width:bm(d,a).width}}),c=n?0:bm("",a).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Kme=function(e,r,n,a,i){var s=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=vt(s),m=c,y=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(H,Z){var ie=Z.word,fe=Z.width,me=H[H.length-1];if(me&&(a==null||i||me.width+fe+n<Number(a)))me.words.push(ie),me.width+=fe+n;else{var K={words:[ie],width:fe};H.push(K)}return H},[])},x=y(r),T=function(W){return W.reduce(function(H,Z){return H.width>Z.width?H:Z})};if(!p)return x;for(var S="",w=function(W){var H=m.slice(0,W),Z=TW({breakAll:h,style:d,children:H+S}).wordsWithComputedWidth,ie=y(Z),fe=ie.length>s||T(ie).width>Number(a);return[fe,ie]},E=0,I=m.length-1,R=0,L;E<=I&&R<=m.length-1;){var O=Math.floor((E+I)/2),M=O-1,N=w(M),A=$L(N,2),j=A[0],z=A[1],B=w(O),F=$L(B,1),U=F[0];if(!j&&!U&&(E=O+1),j&&U&&(I=O-1),!j&&U){L=z;break}R++}return L||x},zL=function(e){var r=or(e)?[]:e.toString().split(_W);return[{words:r}]},Qme=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!p0.isSsr){var d,h,p=TW({breakAll:s,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return zL(a);return Kme({breakAll:s,children:a,maxLines:c,style:i},d,h,r,n)}return zL(a)},VL="#808080",tf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,x=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,E=w===void 0?VL:w,I=BL(e,zme),R=k.useMemo(function(){return Qme({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:m,style:I.style,width:I.width})},[I.breakAll,I.children,I.maxLines,m,I.style,I.width]),L=I.dx,O=I.dy,M=I.angle,N=I.className,A=I.breakAll,j=BL(I,Vme);if(!La(n)||!La(i))return null;var z=n+(vt(L)?L:0),B=i+(vt(O)?O:0),F;switch(S){case"start":F=A_("calc(".concat(h,")"));break;case"middle":F=A_("calc(".concat((R.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:F=A_("calc(".concat(R.length-1," * -").concat(c,")"));break}var U=[];if(m){var X=R[0].width,W=I.width;U.push("scale(".concat((vt(W)?W/X:1)/X,")"))}return M&&U.push("rotate(".concat(M,", ").concat(z,", ").concat(B,")")),U.length&&(j.transform=U.join(" ")),se.createElement("text",rN({},zt(j,!0),{x:z,y:B,className:fr("recharts-text",N),textAnchor:x,fill:E.includes("url")?VL:E}),R.map(function(H,Z){var ie=H.words.join(A?"":" ");return se.createElement("tspan",{x:z,dy:Z===0?F:c,key:"".concat(ie,"-").concat(Z)},ie)}))};function bu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xme(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jE(t){let e,r,n;t.length!==2?(e=bu,r=(c,d)=>bu(t(c),d),n=(c,d)=>t(c)-d):(e=t===bu||t===Xme?t:Yme,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function s(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:s,right:i}}function Yme(){return 0}function AW(t){return t===null?NaN:+t}function*Zme(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Jme=jE(bu),m1=Jme.right;jE(AW).center;class FL extends Map{constructor(e,r=rge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(qL(this,e))}has(e){return super.has(qL(this,e))}set(e,r){return super.set(ege(this,e),r)}delete(e){return super.delete(tge(this,e))}}function qL({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function ege({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function tge({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function rge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nge(t=bu){if(t===bu)return NW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function NW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const age=Math.sqrt(50),ige=Math.sqrt(10),sge=Math.sqrt(2);function Jx(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=age?10:i>=ige?5:i>=sge?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/s,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*s,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Jx(t,e,r*2):[c,d,h]}function nN(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,s]=n?Jx(e,t,r):Jx(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(s<0)for(let h=0;h<c;++h)d[h]=(i-h)/-s;else for(let h=0;h<c;++h)d[h]=(i-h)*s;else if(s<0)for(let h=0;h<c;++h)d[h]=(a+h)/-s;else for(let h=0;h<c;++h)d[h]=(a+h)*s;return d}function aN(t,e,r){return e=+e,t=+t,r=+r,Jx(t,e,r)[2]}function iN(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?aN(e,t,r):aN(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function HL(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function GL(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function EW(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?NW:nge(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(r,Math.floor(e-h*m/d+y)),T=Math.min(n,Math.floor(e+(d-h)*m/d+y));EW(t,e,x,T,a)}const i=t[e];let s=r,c=n;for(qp(t,r,e),a(t[n],i)>0&&qp(t,r,n);s<c;){for(qp(t,s,c),++s,--c;a(t[s],i)<0;)++s;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?qp(t,r,c):(++c,qp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function qp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function oge(t,e,r){if(t=Float64Array.from(Zme(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return GL(t);if(e>=1)return HL(t);var n,a=(n-1)*e,i=Math.floor(a),s=HL(EW(t,i).subarray(0,i+1)),c=GL(t.subarray(i+1));return s+(c-s)*(a-i)}}function lge(t,e,r=AW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),s=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return s+(c-s)*(a-i)}}function cge(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function pc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const sN=Symbol("implicit");function kE(){var t=new FL,e=[],r=[],n=sN;function a(i){let s=t.get(i);if(s===void 0){if(n!==sN)return n;t.set(i,s=e.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new FL;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return kE(e,r).unknown(n)},io.apply(a,arguments),a}function lg(){var t=kE().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,s,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,x=a<n,T=x?a:n,S=x?n:a;i=(S-T)/Math.max(1,y-d+h*2),c&&(i=Math.floor(i)),T+=(S-T-i*(y-d))*p,s=i*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=cge(y).map(function(E){return T+i*E});return r(x?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return lg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},io.apply(m(),arguments)}function jW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jW(e())},t}function wm(){return jW(lg.apply(null,arguments).paddingInner(1))}function CE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function kW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function g1(){}var cg=.7,eb=1/cg,Eh="\\s*([+-]?\\d+)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uge=/^#([0-9a-f]{3,8})$/,dge=new RegExp(`^rgb\\(${Eh},${Eh},${Eh}\\)$`),hge=new RegExp(`^rgb\\(${Wo},${Wo},${Wo}\\)$`),fge=new RegExp(`^rgba\\(${Eh},${Eh},${Eh},${ug}\\)$`),pge=new RegExp(`^rgba\\(${Wo},${Wo},${Wo},${ug}\\)$`),mge=new RegExp(`^hsl\\(${ug},${Wo},${Wo}\\)$`),gge=new RegExp(`^hsla\\(${ug},${Wo},${Wo},${ug}\\)$`),WL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CE(g1,dg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KL,formatHex:KL,formatHex8:yge,formatHsl:vge,formatRgb:QL,toString:QL});function KL(){return this.rgb().formatHex()}function yge(){return this.rgb().formatHex8()}function vge(){return CW(this).formatHsl()}function QL(){return this.rgb().formatRgb()}function dg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=uge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?XL(e):r===3?new ns(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?wv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?wv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dge.exec(t))?new ns(e[1],e[2],e[3],1):(e=hge.exec(t))?new ns(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fge.exec(t))?wv(e[1],e[2],e[3],e[4]):(e=pge.exec(t))?wv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mge.exec(t))?JL(e[1],e[2]/100,e[3]/100,1):(e=gge.exec(t))?JL(e[1],e[2]/100,e[3]/100,e[4]):WL.hasOwnProperty(t)?XL(WL[t]):t==="transparent"?new ns(NaN,NaN,NaN,0):null}function XL(t){return new ns(t>>16&255,t>>8&255,t&255,1)}function wv(t,e,r,n){return n<=0&&(t=e=r=NaN),new ns(t,e,r,n)}function xge(t){return t instanceof g1||(t=dg(t)),t?(t=t.rgb(),new ns(t.r,t.g,t.b,t.opacity)):new ns}function oN(t,e,r,n){return arguments.length===1?xge(t):new ns(t,e,r,n??1)}function ns(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}CE(ns,oN,kW(g1,{brighter(t){return t=t==null?eb:Math.pow(eb,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cg:Math.pow(cg,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ns($d(this.r),$d(this.g),$d(this.b),tb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YL,formatHex:YL,formatHex8:bge,formatRgb:ZL,toString:ZL}));function YL(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}`}function bge(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}${jd((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZL(){const t=tb(this.opacity);return`${t===1?"rgb(":"rgba("}${$d(this.r)}, ${$d(this.g)}, ${$d(this.b)}${t===1?")":`, ${t})`}`}function tb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $d(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jd(t){return t=$d(t),(t<16?"0":"")+t.toString(16)}function JL(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new yo(t,e,r,n)}function CW(t){if(t instanceof yo)return new yo(t.h,t.s,t.l,t.opacity);if(t instanceof g1||(t=dg(t)),!t)return new yo;if(t instanceof yo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),s=NaN,c=i-a,d=(i+a)/2;return c?(e===i?s=(r-n)/c+(r<n)*6:r===i?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?i+a:2-i-a,s*=60):c=d>0&&d<1?0:s,new yo(s,c,d,t.opacity)}function wge(t,e,r,n){return arguments.length===1?CW(t):new yo(t,e,r,n??1)}function yo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}CE(yo,wge,kW(g1,{brighter(t){return t=t==null?eb:Math.pow(eb,t),new yo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cg:Math.pow(cg,t),new yo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ns(N_(t>=240?t-240:t+120,a,n),N_(t,a,n),N_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new yo(eB(this.h),Sv(this.s),Sv(this.l),tb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tb(this.opacity);return`${t===1?"hsl(":"hsla("}${eB(this.h)}, ${Sv(this.s)*100}%, ${Sv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function eB(t){return t=(t||0)%360,t<0?t+360:t}function Sv(t){return Math.max(0,Math.min(1,t||0))}function N_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const OE=t=>()=>t;function Sge(t,e){return function(r){return t+r*e}}function _ge(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Tge(t){return(t=+t)==1?OW:function(e,r){return r-e?_ge(e,r,t):OE(isNaN(e)?r:e)}}function OW(t,e){var r=e-t;return r?Sge(t,r):OE(isNaN(t)?e:t)}const tB=(function t(e){var r=Tge(e);function n(a,i){var s=r((a=oN(a)).r,(i=oN(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=OW(a.opacity,i.opacity);return function(p){return a.r=s(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Age(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Nge(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ege(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Lf(t[s],e[s]);for(;s<r;++s)i[s]=e[s];return function(c){for(s=0;s<n;++s)i[s]=a[s](c);return i}}function jge(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function rb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function kge(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Lf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var lN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,E_=new RegExp(lN.source,"g");function Cge(t){return function(){return t}}function Oge(t){return function(e){return t(e)+""}}function Ige(t,e){var r=lN.lastIndex=E_.lastIndex=0,n,a,i,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=lN.exec(t))&&(a=E_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[s]?c[s]+=i:c[++s]=i),(n=n[0])===(a=a[0])?c[s]?c[s]+=a:c[++s]=a:(c[++s]=null,d.push({i:s,x:rb(n,a)})),r=E_.lastIndex;return r<e.length&&(i=e.slice(r),c[s]?c[s]+=i:c[++s]=i),c.length<2?d[0]?Oge(d[0].x):Cge(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Lf(t,e){var r=typeof e,n;return e==null||r==="boolean"?OE(e):(r==="number"?rb:r==="string"?(n=dg(e))?(e=n,tB):Ige:e instanceof dg?tB:e instanceof Date?jge:Nge(e)?Age:Array.isArray(e)?Ege:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kge:rb)(t,e)}function IE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Rge(t,e){e===void 0&&(e=t,t=Lf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[c](s-c)}}function Mge(t){return function(){return t}}function nb(t){return+t}var rB=[0,1];function Pi(t){return t}function cN(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Mge(isNaN(e)?NaN:.5)}function Pge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Dge(t,e,r){var n=t[0],a=t[1],i=e[0],s=e[1];return a<n?(n=cN(a,n),i=r(s,i)):(n=cN(n,a),i=r(i,s)),function(c){return i(n(c))}}function Lge(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)a[s]=cN(t[s],t[s+1]),i[s]=r(e[s],e[s+1]);return function(c){var d=m1(t,c,1,n)-1;return i[d](a[d](c))}}function y1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Q2(){var t=rB,e=rB,r=Lf,n,a,i,s=Pi,c,d,h;function p(){var y=Math.min(t.length,e.length);return s!==Pi&&(s=Pge(t[0],t[y-1])),c=y>2?Lge:Dge,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?i:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return m.invert=function(y){return s(a((h||(h=c(e,t.map(n),rb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,nb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=IE,p()},m.clamp=function(y){return arguments.length?(s=y?!0:Pi,p()):s!==Pi},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(i=y,m):i},function(y,x){return n=y,a=x,p()}}function RE(){return Q2()(Pi,Pi)}function Bge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ab(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function rf(t){return t=ab(Math.abs(t)),t?t[1]:NaN}function $ge(t,e){return function(r,n){for(var a=r.length,i=[],s=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return i.reverse().join(e)}}function Uge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var zge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hg(t){if(!(e=zge.exec(t)))throw new Error("invalid format: "+t);var e;return new ME({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hg.prototype=ME.prototype;function ME(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ME.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vge(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var ib;function Fge(t,e){var r=ab(t,e);if(!r)return ib=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(ib=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ab(t,Math.max(0,e+i-1))[0]}function nB(t,e){var r=ab(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const aB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nB(t*100,e),r:nB,s:Fge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iB(t){return t}var sB=Array.prototype.map,oB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qge(t){var e=t.grouping===void 0||t.thousands===void 0?iB:$ge(sB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?iB:Uge(sB.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=hg(m);var x=m.fill,T=m.align,S=m.sign,w=m.symbol,E=m.zero,I=m.width,R=m.comma,L=m.precision,O=m.trim,M=m.type;M==="n"?(R=!0,M="g"):aB[M]||(L===void 0&&(L=12),O=!0,M="g"),(E||x==="0"&&T==="=")&&(E=!0,x="0",T="=");var N=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(M)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),j=aB[M],z=/[defgprs%]/.test(M);L=L===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function B(F){var U=N,X=A,W,H,Z;if(M==="c")X=j(F)+X,F="";else{F=+F;var ie=F<0||1/F<0;if(F=isNaN(F)?d:j(Math.abs(F),L),O&&(F=Vge(F)),ie&&+F==0&&S!=="+"&&(ie=!1),U=(ie?S==="("?S:c:S==="-"||S==="("?"":S)+U,X=(M==="s"&&!isNaN(F)&&ib!==void 0?oB[8+ib/3]:"")+X+(ie&&S==="("?")":""),z){for(W=-1,H=F.length;++W<H;)if(Z=F.charCodeAt(W),48>Z||Z>57){X=(Z===46?a+F.slice(W+1):F.slice(W))+X,F=F.slice(0,W);break}}}R&&!E&&(F=e(F,1/0));var fe=U.length+F.length+X.length,me=fe<I?new Array(I-fe+1).join(x):"";switch(R&&E&&(F=e(me+F,me.length?I-X.length:1/0),me=""),T){case"<":F=U+F+X+me;break;case"=":F=U+me+F+X;break;case"^":F=me.slice(0,fe=me.length>>1)+U+F+X+me.slice(fe);break;default:F=me+U+F+X;break}return i(F)}return B.toString=function(){return m+""},B}function p(m,y){var x=Math.max(-8,Math.min(8,Math.floor(rf(y)/3)))*3,T=Math.pow(10,-x),S=h((m=hg(m),m.type="f",m),{suffix:oB[8+x/3]});return function(w){return S(T*w)}}return{format:h,formatPrefix:p}}var _v,PE,IW;Hge({thousands:",",grouping:[3],currency:["$",""]});function Hge(t){return _v=qge(t),PE=_v.format,IW=_v.formatPrefix,_v}function Gge(t){return Math.max(0,-rf(Math.abs(t)))}function Wge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(e)/3)))*3-rf(Math.abs(t)))}function Kge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rf(e)-rf(t))+1}function RW(t,e,r,n){var a=iN(t,e,r),i;switch(n=hg(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=Wge(a,s))&&(n.precision=i),IW(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Kge(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Gge(a))&&(n.precision=i-(n.type==="%")*2);break}}return PE(n)}function Du(t){var e=t.domain;return t.ticks=function(r){var n=e();return nN(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return RW(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,s=n[a],c=n[i],d,h,p=10;for(c<s&&(h=s,s=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=aN(s,c,r),h===d)return n[a]=s,n[i]=c,e(n);if(h>0)s=Math.floor(s/h)*h,c=Math.ceil(c/h)*h;else if(h<0)s=Math.ceil(s*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function sb(){var t=RE();return t.copy=function(){return y1(t,sb())},io.apply(t,arguments),Du(t)}function MW(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,nb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return MW(t).unknown(e)},t=arguments.length?Array.from(t,nb):[0,1],Du(r)}function PW(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),t[r]=e.floor(a),t[n]=e.ceil(i),t}function lB(t){return Math.log(t)}function cB(t){return Math.exp(t)}function Qge(t){return-Math.log(-t)}function Xge(t){return-Math.exp(-t)}function Yge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Zge(t){return t===10?Yge:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Jge(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function uB(t){return(e,r)=>-t(-e,r)}function DE(t){const e=t(lB,cB),r=e.domain;let n=10,a,i;function s(){return a=Jge(n),i=Zge(n),r()[0]<0?(a=uB(a),i=uB(i),t(Qge,Xge)):t(lB,cB),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=a(h),x=a(p),T,S;const w=c==null?10:+c;let E=[];if(!(n%1)&&x-y<w){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(T=1;T<n;++T)if(S=y<0?T/i(-y):T*i(y),!(S<h)){if(S>p)break;E.push(S)}}else for(;y<=x;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/i(-y):T*i(y),!(S<h)){if(S>p)break;E.push(S)}E.length*2<w&&(E=nN(h,p,w))}else E=nN(y,x,Math.min(x-y,w)).map(i);return m?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=hg(d)).precision==null&&(d.trim=!0),d=PE(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(PW(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function DW(){const t=DE(Q2()).domain([1,10]);return t.copy=()=>y1(t,DW()).base(t.base()),io.apply(t,arguments),t}function dB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function hB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function LE(t){var e=1,r=t(dB(e),hB(e));return r.constant=function(n){return arguments.length?t(dB(e=+n),hB(e)):e},Du(r)}function LW(){var t=LE(Q2());return t.copy=function(){return y1(t,LW()).constant(t.constant())},io.apply(t,arguments)}function fB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function e1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function t1e(t){return t<0?-t*t:t*t}function BE(t){var e=t(Pi,Pi),r=1;function n(){return r===1?t(Pi,Pi):r===.5?t(e1e,t1e):t(fB(r),fB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Du(e)}function $E(){var t=BE(Q2());return t.copy=function(){return y1(t,$E()).exponent(t.exponent())},io.apply(t,arguments),t}function r1e(){return $E.apply(null,arguments).exponent(.5)}function pB(t){return Math.sign(t)*t*t}function n1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function BW(){var t=RE(),e=[0,1],r=!1,n;function a(i){var s=n1e(t(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return t.invert(pB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,nb)).map(pB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return BW(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},io.apply(a,arguments),Du(a)}function $W(){var t=[],e=[],r=[],n;function a(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=lge(t,s/c);return i}function i(s){return s==null||isNaN(s=+s)?n:e[m1(r,s)]}return i.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(bu),a()},i.range=function(s){return arguments.length?(e=Array.from(s),a()):e.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return $W().domain(t).range(e).unknown(n)},io.apply(i,arguments)}function UW(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function s(d){return d!=null&&d<=d?a[m1(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},s.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},s.unknown=function(d){return arguments.length&&(i=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return UW().domain([t,e]).range(a).unknown(i)},io.apply(Du(s),arguments)}function zW(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[m1(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var s=e.indexOf(i);return[t[s-1],t[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return zW().domain(t).range(e).unknown(r)},io.apply(a,arguments)}const j_=new Date,k_=new Date;function Va(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),c=a.ceil(i);return i-s<c-i?s:c},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<s)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<s);return d},a.filter=i=>Va(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!i(s););else for(;--c>=0;)for(;e(s,1),!i(s););}),r&&(a.count=(i,s)=>(j_.setTime(+i),k_.setTime(+s),t(j_),t(k_),Math.floor(r(j_,k_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const ob=Va(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ob.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Va(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):ob);ob.range;const Ul=1e3,Ys=Ul*60,zl=Ys*60,ac=zl*24,UE=ac*7,mB=ac*30,C_=ac*365,kd=Va(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ul)},(t,e)=>(e-t)/Ul,t=>t.getUTCSeconds());kd.range;const zE=Va(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ul)},(t,e)=>{t.setTime(+t+e*Ys)},(t,e)=>(e-t)/Ys,t=>t.getMinutes());zE.range;const VE=Va(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ys)},(t,e)=>(e-t)/Ys,t=>t.getUTCMinutes());VE.range;const FE=Va(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ul-t.getMinutes()*Ys)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getHours());FE.range;const qE=Va(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getUTCHours());qE.range;const v1=Va(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ys)/ac,t=>t.getDate()-1);v1.range;const X2=Va(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ac,t=>t.getUTCDate()-1);X2.range;const VW=Va(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ac,t=>Math.floor(t/ac));VW.range;function m0(t){return Va(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ys)/UE)}const Y2=m0(0),lb=m0(1),a1e=m0(2),i1e=m0(3),nf=m0(4),s1e=m0(5),o1e=m0(6);Y2.range;lb.range;a1e.range;i1e.range;nf.range;s1e.range;o1e.range;function g0(t){return Va(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/UE)}const Z2=g0(0),cb=g0(1),l1e=g0(2),c1e=g0(3),af=g0(4),u1e=g0(5),d1e=g0(6);Z2.range;cb.range;l1e.range;c1e.range;af.range;u1e.range;d1e.range;const HE=Va(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());HE.range;const GE=Va(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());GE.range;const ic=Va(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ic.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Va(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ic.range;const sc=Va(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Va(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});sc.range;function FW(t,e,r,n,a,i){const s=[[kd,1,Ul],[kd,5,5*Ul],[kd,15,15*Ul],[kd,30,30*Ul],[i,1,Ys],[i,5,5*Ys],[i,15,15*Ys],[i,30,30*Ys],[a,1,zl],[a,3,3*zl],[a,6,6*zl],[a,12,12*zl],[n,1,ac],[n,2,2*ac],[r,1,UE],[e,1,mB],[e,3,3*mB],[t,1,C_]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),T=x?x.range(h,+p+1):[];return y?T.reverse():T}function d(h,p,m){const y=Math.abs(p-h)/m,x=jE(([,,w])=>w).right(s,y);if(x===s.length)return t.every(iN(h/C_,p/C_,m));if(x===0)return ob.every(Math.max(iN(h,p,m),1));const[T,S]=s[y/s[x-1][2]<s[x][2]/y?x-1:x];return T.every(S)}return[c,d]}const[h1e,f1e]=FW(sc,GE,Z2,VW,qE,VE),[p1e,m1e]=FW(ic,HE,Y2,v1,FE,zE);function O_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function I_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function g1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,h=Gp(a),p=Wp(a),m=Gp(i),y=Wp(i),x=Gp(s),T=Wp(s),S=Gp(c),w=Wp(c),E=Gp(d),I=Wp(d),R={a:Z,A:ie,b:fe,B:me,c:null,d:wB,e:wB,f:$1e,g:Q1e,G:Y1e,H:D1e,I:L1e,j:B1e,L:qW,m:U1e,M:z1e,p:K,q:te,Q:TB,s:AB,S:V1e,u:F1e,U:q1e,V:H1e,w:G1e,W:W1e,x:null,X:null,y:K1e,Y:X1e,Z:Z1e,"%":_B},L={a:re,A:Ne,b:ae,B:xe,c:null,d:SB,e:SB,f:rye,g:hye,G:pye,H:J1e,I:eye,j:tye,L:GW,m:nye,M:aye,p:ye,q:Ue,Q:TB,s:AB,S:iye,u:sye,U:oye,V:lye,w:cye,W:uye,x:null,X:null,y:dye,Y:fye,Z:mye,"%":_B},O={a:z,A:B,b:F,B:U,c:X,d:xB,e:xB,f:I1e,g:vB,G:yB,H:bB,I:bB,j:j1e,L:O1e,m:E1e,M:k1e,p:j,q:N1e,Q:M1e,s:P1e,S:C1e,u:w1e,U:S1e,V:_1e,w:b1e,W:T1e,x:W,X:H,y:vB,Y:yB,Z:A1e,"%":R1e};R.x=M(r,R),R.X=M(n,R),R.c=M(e,R),L.x=M(r,L),L.X=M(n,L),L.c=M(e,L);function M(ee,Me){return function(ne){var pe=[],Xe=-1,Qe=0,St=ee.length,ct,_t,Ee;for(ne instanceof Date||(ne=new Date(+ne));++Xe<St;)ee.charCodeAt(Xe)===37&&(pe.push(ee.slice(Qe,Xe)),(_t=gB[ct=ee.charAt(++Xe)])!=null?ct=ee.charAt(++Xe):_t=ct==="e"?" ":"0",(Ee=Me[ct])&&(ct=Ee(ne,_t)),pe.push(ct),Qe=Xe+1);return pe.push(ee.slice(Qe,Xe)),pe.join("")}}function N(ee,Me){return function(ne){var pe=Hp(1900,void 0,1),Xe=A(pe,ee,ne+="",0),Qe,St;if(Xe!=ne.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(Me&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Qe=I_(Hp(pe.y,0,1)),St=Qe.getUTCDay(),Qe=St>4||St===0?cb.ceil(Qe):cb(Qe),Qe=X2.offset(Qe,(pe.V-1)*7),pe.y=Qe.getUTCFullYear(),pe.m=Qe.getUTCMonth(),pe.d=Qe.getUTCDate()+(pe.w+6)%7):(Qe=O_(Hp(pe.y,0,1)),St=Qe.getDay(),Qe=St>4||St===0?lb.ceil(Qe):lb(Qe),Qe=v1.offset(Qe,(pe.V-1)*7),pe.y=Qe.getFullYear(),pe.m=Qe.getMonth(),pe.d=Qe.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),St="Z"in pe?I_(Hp(pe.y,0,1)).getUTCDay():O_(Hp(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(St+5)%7:pe.w+pe.U*7-(St+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,I_(pe)):O_(pe)}}function A(ee,Me,ne,pe){for(var Xe=0,Qe=Me.length,St=ne.length,ct,_t;Xe<Qe;){if(pe>=St)return-1;if(ct=Me.charCodeAt(Xe++),ct===37){if(ct=Me.charAt(Xe++),_t=O[ct in gB?Me.charAt(Xe++):ct],!_t||(pe=_t(ee,ne,pe))<0)return-1}else if(ct!=ne.charCodeAt(pe++))return-1}return pe}function j(ee,Me,ne){var pe=h.exec(Me.slice(ne));return pe?(ee.p=p.get(pe[0].toLowerCase()),ne+pe[0].length):-1}function z(ee,Me,ne){var pe=x.exec(Me.slice(ne));return pe?(ee.w=T.get(pe[0].toLowerCase()),ne+pe[0].length):-1}function B(ee,Me,ne){var pe=m.exec(Me.slice(ne));return pe?(ee.w=y.get(pe[0].toLowerCase()),ne+pe[0].length):-1}function F(ee,Me,ne){var pe=E.exec(Me.slice(ne));return pe?(ee.m=I.get(pe[0].toLowerCase()),ne+pe[0].length):-1}function U(ee,Me,ne){var pe=S.exec(Me.slice(ne));return pe?(ee.m=w.get(pe[0].toLowerCase()),ne+pe[0].length):-1}function X(ee,Me,ne){return A(ee,e,Me,ne)}function W(ee,Me,ne){return A(ee,r,Me,ne)}function H(ee,Me,ne){return A(ee,n,Me,ne)}function Z(ee){return s[ee.getDay()]}function ie(ee){return i[ee.getDay()]}function fe(ee){return d[ee.getMonth()]}function me(ee){return c[ee.getMonth()]}function K(ee){return a[+(ee.getHours()>=12)]}function te(ee){return 1+~~(ee.getMonth()/3)}function re(ee){return s[ee.getUTCDay()]}function Ne(ee){return i[ee.getUTCDay()]}function ae(ee){return d[ee.getUTCMonth()]}function xe(ee){return c[ee.getUTCMonth()]}function ye(ee){return a[+(ee.getUTCHours()>=12)]}function Ue(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var Me=M(ee+="",R);return Me.toString=function(){return ee},Me},parse:function(ee){var Me=N(ee+="",!1);return Me.toString=function(){return ee},Me},utcFormat:function(ee){var Me=M(ee+="",L);return Me.toString=function(){return ee},Me},utcParse:function(ee){var Me=N(ee+="",!0);return Me.toString=function(){return ee},Me}}}var gB={"-":"",_:" ",0:"0"},ei=/^\s*\d+/,y1e=/^%/,v1e=/[\\^$*+?|[\]().{}]/g;function qr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function x1e(t){return t.replace(v1e,"\\$&")}function Gp(t){return new RegExp("^(?:"+t.map(x1e).join("|")+")","i")}function Wp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function b1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function w1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function S1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function _1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function T1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function yB(t,e,r){var n=ei.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function vB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function A1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function N1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function E1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function xB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function j1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function bB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function k1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function C1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function O1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function I1e(t,e,r){var n=ei.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function R1e(t,e,r){var n=y1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function M1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function P1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function wB(t,e){return qr(t.getDate(),e,2)}function D1e(t,e){return qr(t.getHours(),e,2)}function L1e(t,e){return qr(t.getHours()%12||12,e,2)}function B1e(t,e){return qr(1+v1.count(ic(t),t),e,3)}function qW(t,e){return qr(t.getMilliseconds(),e,3)}function $1e(t,e){return qW(t,e)+"000"}function U1e(t,e){return qr(t.getMonth()+1,e,2)}function z1e(t,e){return qr(t.getMinutes(),e,2)}function V1e(t,e){return qr(t.getSeconds(),e,2)}function F1e(t){var e=t.getDay();return e===0?7:e}function q1e(t,e){return qr(Y2.count(ic(t)-1,t),e,2)}function HW(t){var e=t.getDay();return e>=4||e===0?nf(t):nf.ceil(t)}function H1e(t,e){return t=HW(t),qr(nf.count(ic(t),t)+(ic(t).getDay()===4),e,2)}function G1e(t){return t.getDay()}function W1e(t,e){return qr(lb.count(ic(t)-1,t),e,2)}function K1e(t,e){return qr(t.getFullYear()%100,e,2)}function Q1e(t,e){return t=HW(t),qr(t.getFullYear()%100,e,2)}function X1e(t,e){return qr(t.getFullYear()%1e4,e,4)}function Y1e(t,e){var r=t.getDay();return t=r>=4||r===0?nf(t):nf.ceil(t),qr(t.getFullYear()%1e4,e,4)}function Z1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qr(e/60|0,"0",2)+qr(e%60,"0",2)}function SB(t,e){return qr(t.getUTCDate(),e,2)}function J1e(t,e){return qr(t.getUTCHours(),e,2)}function eye(t,e){return qr(t.getUTCHours()%12||12,e,2)}function tye(t,e){return qr(1+X2.count(sc(t),t),e,3)}function GW(t,e){return qr(t.getUTCMilliseconds(),e,3)}function rye(t,e){return GW(t,e)+"000"}function nye(t,e){return qr(t.getUTCMonth()+1,e,2)}function aye(t,e){return qr(t.getUTCMinutes(),e,2)}function iye(t,e){return qr(t.getUTCSeconds(),e,2)}function sye(t){var e=t.getUTCDay();return e===0?7:e}function oye(t,e){return qr(Z2.count(sc(t)-1,t),e,2)}function WW(t){var e=t.getUTCDay();return e>=4||e===0?af(t):af.ceil(t)}function lye(t,e){return t=WW(t),qr(af.count(sc(t),t)+(sc(t).getUTCDay()===4),e,2)}function cye(t){return t.getUTCDay()}function uye(t,e){return qr(cb.count(sc(t)-1,t),e,2)}function dye(t,e){return qr(t.getUTCFullYear()%100,e,2)}function hye(t,e){return t=WW(t),qr(t.getUTCFullYear()%100,e,2)}function fye(t,e){return qr(t.getUTCFullYear()%1e4,e,4)}function pye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?af(t):af.ceil(t),qr(t.getUTCFullYear()%1e4,e,4)}function mye(){return"+0000"}function _B(){return"%"}function TB(t){return+t}function AB(t){return Math.floor(+t/1e3)}var ah,KW,QW;gye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gye(t){return ah=g1e(t),KW=ah.format,ah.parse,QW=ah.utcFormat,ah.utcParse,ah}function yye(t){return new Date(t)}function vye(t){return t instanceof Date?+t:+new Date(+t)}function WE(t,e,r,n,a,i,s,c,d,h){var p=RE(),m=p.invert,y=p.domain,x=h(".%L"),T=h(":%S"),S=h("%I:%M"),w=h("%I %p"),E=h("%a %d"),I=h("%b %d"),R=h("%B"),L=h("%Y");function O(M){return(d(M)<M?x:c(M)<M?T:s(M)<M?S:i(M)<M?w:n(M)<M?a(M)<M?E:I:r(M)<M?R:L)(M)}return p.invert=function(M){return new Date(m(M))},p.domain=function(M){return arguments.length?y(Array.from(M,vye)):y().map(yye)},p.ticks=function(M){var N=y();return t(N[0],N[N.length-1],M??10)},p.tickFormat=function(M,N){return N==null?O:h(N)},p.nice=function(M){var N=y();return(!M||typeof M.range!="function")&&(M=e(N[0],N[N.length-1],M??10)),M?y(PW(N,M)):p},p.copy=function(){return y1(p,WE(t,e,r,n,a,i,s,c,d,h))},p}function xye(){return io.apply(WE(p1e,m1e,ic,HE,Y2,v1,FE,zE,kd,KW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bye(){return io.apply(WE(h1e,f1e,sc,GE,Z2,X2,qE,VE,kd,QW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J2(){var t=0,e=1,r,n,a,i,s=Pi,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:s(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(s=m,h):s};function p(m){return function(y){var x,T;return arguments.length?([x,T]=y,s=m(x,T),h):[s(0),s(1)]}}return h.range=p(Lf),h.rangeRound=p(IE),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Lu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function XW(){var t=Du(J2()(Pi));return t.copy=function(){return Lu(t,XW())},pc.apply(t,arguments)}function YW(){var t=DE(J2()).domain([1,10]);return t.copy=function(){return Lu(t,YW()).base(t.base())},pc.apply(t,arguments)}function ZW(){var t=LE(J2());return t.copy=function(){return Lu(t,ZW()).constant(t.constant())},pc.apply(t,arguments)}function KE(){var t=BE(J2());return t.copy=function(){return Lu(t,KE()).exponent(t.exponent())},pc.apply(t,arguments)}function wye(){return KE.apply(null,arguments).exponent(.5)}function JW(){var t=[],e=Pi;function r(n){if(n!=null&&!isNaN(n=+n))return e((m1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(bu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>oge(t,i/n))},r.copy=function(){return JW(e).domain(t)},pc.apply(r,arguments)}function ew(){var t=0,e=.5,r=1,n=1,a,i,s,c,d,h=Pi,p,m=!1,y;function x(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-i)*(n*S<n*i?c:d),h(m?Math.max(0,Math.min(1,S)):S))}x.domain=function(S){return arguments.length?([t,e,r]=S,a=p(t=+t),i=p(e=+e),s=p(r=+r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,x):[t,e,r]},x.clamp=function(S){return arguments.length?(m=!!S,x):m},x.interpolator=function(S){return arguments.length?(h=S,x):h};function T(S){return function(w){var E,I,R;return arguments.length?([E,I,R]=w,h=Rge(S,[E,I,R]),x):[h(0),h(.5),h(1)]}}return x.range=T(Lf),x.rangeRound=T(IE),x.unknown=function(S){return arguments.length?(y=S,x):y},function(S){return p=S,a=S(t),i=S(e),s=S(r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,x}}function eK(){var t=Du(ew()(Pi));return t.copy=function(){return Lu(t,eK())},pc.apply(t,arguments)}function tK(){var t=DE(ew()).domain([.1,1,10]);return t.copy=function(){return Lu(t,tK()).base(t.base())},pc.apply(t,arguments)}function rK(){var t=LE(ew());return t.copy=function(){return Lu(t,rK()).constant(t.constant())},pc.apply(t,arguments)}function QE(){var t=BE(ew());return t.copy=function(){return Lu(t,QE()).exponent(t.exponent())},pc.apply(t,arguments)}function Sye(){return QE.apply(null,arguments).exponent(.5)}const NB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lg,scaleDiverging:eK,scaleDivergingLog:tK,scaleDivergingPow:QE,scaleDivergingSqrt:Sye,scaleDivergingSymlog:rK,scaleIdentity:MW,scaleImplicit:sN,scaleLinear:sb,scaleLog:DW,scaleOrdinal:kE,scalePoint:wm,scalePow:$E,scaleQuantile:$W,scaleQuantize:UW,scaleRadial:BW,scaleSequential:XW,scaleSequentialLog:YW,scaleSequentialPow:KE,scaleSequentialQuantile:JW,scaleSequentialSqrt:wye,scaleSequentialSymlog:ZW,scaleSqrt:r1e,scaleSymlog:LW,scaleThreshold:zW,scaleTime:xye,scaleUtc:bye,tickFormat:RW},Symbol.toStringTag,{value:"Module"}));var R_,EB;function tw(){if(EB)return R_;EB=1;var t=Mf();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return R_=e,R_}var M_,jB;function nK(){if(jB)return M_;jB=1;function t(e,r){return e>r}return M_=t,M_}var P_,kB;function _ye(){if(kB)return P_;kB=1;var t=tw(),e=nK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return P_=n,P_}var Tye=_ye();const rw=Kr(Tye);var D_,CB;function aK(){if(CB)return D_;CB=1;function t(e,r){return e<r}return D_=t,D_}var L_,OB;function Aye(){if(OB)return L_;OB=1;var t=tw(),e=aK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return L_=n,L_}var Nye=Aye();const nw=Kr(Nye);var B_,IB;function Eye(){if(IB)return B_;IB=1;var t=dE(),e=sl(),r=hW(),n=ss();function a(i,s){var c=n(i)?t:r;return c(i,e(s,3))}return B_=a,B_}var $_,RB;function jye(){if(RB)return $_;RB=1;var t=uW(),e=Eye();function r(n,a){return t(e(n,a),1)}return $_=r,$_}var kye=jye();const Cye=Kr(kye);var U_,MB;function Oye(){if(MB)return U_;MB=1;var t=_E();function e(r,n){return t(r,n)}return U_=e,U_}var Iye=Oye();const x1=Kr(Iye);var Bf=1e9,Rye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},YE,Gn=!0,ao="[DecimalError] ",Ud=ao+"Invalid argument: ",XE=ao+"Exponent out of range: ",$f=Math.floor,bd=Math.pow,Mye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_s,Xa=1e7,Vn=7,iK=9007199254740991,ub=$f(iK/Vn),Ot={};Ot.absoluteValue=Ot.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ot.comparedTo=Ot.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Vn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ot.dividedBy=Ot.div=function(t){return Kl(this,new this.constructor(t))};Ot.dividedToIntegerBy=Ot.idiv=function(t){var e=this,r=e.constructor;return En(Kl(e,new r(t),0,1),r.precision)};Ot.equals=Ot.eq=function(t){return!this.cmp(t)};Ot.exponent=function(){return Aa(this)};Ot.greaterThan=Ot.gt=function(t){return this.cmp(t)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(t){return this.cmp(t)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(t){return this.cmp(t)<0};Ot.lessThanOrEqualTo=Ot.lte=function(t){return this.cmp(t)<1};Ot.logarithm=Ot.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(_s))throw Error(ao+"NaN");if(r.s<1)throw Error(ao+(r.s?"NaN":"-Infinity"));return r.eq(_s)?new n(0):(Gn=!1,e=Kl(fg(r,i),fg(t,i),i),Gn=!0,En(e,a))};Ot.minus=Ot.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?lK(e,t):sK(e,(t.s=-t.s,t))};Ot.modulo=Ot.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(ao+"NaN");return r.s?(Gn=!1,e=Kl(r,t,0,1).times(t),Gn=!0,r.minus(e)):En(new n(r),a)};Ot.naturalExponential=Ot.exp=function(){return oK(this)};Ot.naturalLogarithm=Ot.ln=function(){return fg(this)};Ot.negated=Ot.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ot.plus=Ot.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sK(e,t):lK(e,(t.s=-t.s,t))};Ot.precision=Ot.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ud+t);if(e=Aa(a)+1,n=a.d.length-1,r=n*Vn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ot.squareRoot=Ot.sqrt=function(){var t,e,r,n,a,i,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(ao+"NaN")}for(t=Aa(c),Gn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Ho(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=$f((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=s=r+3;;)if(i=n,n=i.plus(Kl(c,i,s+2)).times(.5),Ho(i.d).slice(0,s)===(e=Ho(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),a==s&&e=="4999"){if(En(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;s+=4}return Gn=!0,En(n,r)};Ot.times=Ot.mul=function(t){var e,r,n,a,i,s,c,d,h,p=this,m=p.constructor,y=p.d,x=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=x.length,d<h&&(i=y,y=x,x=i,s=d,d=h,h=s),i=[],s=d+h,n=s;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+x[n]*y[a-n-1]+e,i[a--]=c%Xa|0,e=c/Xa|0;i[a]=(i[a]+e)%Xa|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Gn?En(t,m.precision):t};Ot.toDecimalPlaces=Ot.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Zo(t,0,Bf),e===void 0?e=n.rounding:Zo(e,0,8),En(r,t+Aa(r)+1,e))};Ot.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=r0(n,!0):(Zo(t,0,Bf),e===void 0?e=a.rounding:Zo(e,0,8),n=En(new a(n),t+1,e),r=r0(n,!0,t+1)),r};Ot.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?r0(a):(Zo(t,0,Bf),e===void 0?e=i.rounding:Zo(e,0,8),n=En(new i(a),t+Aa(a)+1,e),r=r0(n.abs(),!1,t+Aa(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ot.toInteger=Ot.toint=function(){var t=this,e=t.constructor;return En(new e(t),Aa(t)+1,e.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(t){var e,r,n,a,i,s,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(_s);if(c=new d(c),!c.s){if(t.s<1)throw Error(ao+"Infinity");return c}if(c.eq(_s))return c;if(n=d.precision,t.eq(_s))return En(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,i=c.s,s){if((r=p<0?-p:p)<=iK){for(a=new d(_s),e=Math.ceil(n/Vn+4),Gn=!1;r%2&&(a=a.times(c),DB(a.d,e)),r=$f(r/2),r!==0;)c=c.times(c),DB(c.d,e);return Gn=!0,t.s<0?new d(_s).div(a):En(a,n)}}else if(i<0)throw Error(ao+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Gn=!1,a=t.times(fg(c,n+h)),Gn=!0,a=oK(a),a.s=i,a};Ot.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Aa(a),n=r0(a,r<=i.toExpNeg||r>=i.toExpPos)):(Zo(t,1,Bf),e===void 0?e=i.rounding:Zo(e,0,8),a=En(new i(a),t,e),r=Aa(a),n=r0(a,t<=r||r<=i.toExpNeg,t)),n};Ot.toSignificantDigits=Ot.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Zo(t,1,Bf),e===void 0?e=n.rounding:Zo(e,0,8)),En(new n(r),t,e)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Aa(t),r=t.constructor;return r0(t,e<=r.toExpNeg||e>=r.toExpPos)};function sK(t,e){var r,n,a,i,s,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Gn?En(e,m):e;if(d=t.d,h=e.d,s=t.e,a=e.e,d=d.slice(),i=s-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=s,c=d.length),s=Math.ceil(m/Vn),c=s>c?s+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Xa|0,d[i]%=Xa;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Gn?En(e,m):e}function Zo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ud+t)}function Ho(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=Vn-n.length,r&&(i+=Yc(r)),i+=n;s=t[e],n=s+"",r=Vn-n.length,r&&(i+=Yc(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Kl=(function(){function t(n,a){var i,s=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+s,n[c]=i%Xa|0,s=i/Xa|0;return s&&n.unshift(s),n}function e(n,a,i,s){var c,d;if(i!=s)d=i>s?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Xa+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var c,d,h,p,m,y,x,T,S,w,E,I,R,L,O,M,N,A,j=n.constructor,z=n.s==a.s?1:-1,B=n.d,F=a.d;if(!n.s)return new j(n);if(!a.s)throw Error(ao+"Division by zero");for(d=n.e-a.e,N=F.length,O=B.length,x=new j(z),T=x.d=[],h=0;F[h]==(B[h]||0);)++h;if(F[h]>(B[h]||0)&&--d,i==null?I=i=j.precision:s?I=i+(Aa(n)-Aa(a))+1:I=i,I<0)return new j(0);if(I=I/Vn+2|0,h=0,N==1)for(p=0,F=F[0],I++;(h<O||p)&&I--;h++)R=p*Xa+(B[h]||0),T[h]=R/F|0,p=R%F|0;else{for(p=Xa/(F[0]+1)|0,p>1&&(F=t(F,p),B=t(B,p),N=F.length,O=B.length),L=N,S=B.slice(0,N),w=S.length;w<N;)S[w++]=0;A=F.slice(),A.unshift(0),M=F[0],F[1]>=Xa/2&&++M;do p=0,c=e(F,S,N,w),c<0?(E=S[0],N!=w&&(E=E*Xa+(S[1]||0)),p=E/M|0,p>1?(p>=Xa&&(p=Xa-1),m=t(F,p),y=m.length,w=S.length,c=e(m,S,y,w),c==1&&(p--,r(m,N<y?A:F,y))):(p==0&&(c=p=1),m=F.slice()),y=m.length,y<w&&m.unshift(0),r(S,m,w),c==-1&&(w=S.length,c=e(F,S,N,w),c<1&&(p++,r(S,N<w?A:F,w))),w=S.length):c===0&&(p++,S=[0]),T[h++]=p,c&&S[0]?S[w++]=B[L]||0:(S=[B[L]],w=1);while((L++<O||S[0]!==void 0)&&I--)}return T[0]||T.shift(),x.e=d,En(x,s?i+Aa(x)+1:i)}})();function oK(t,e){var r,n,a,i,s,c,d=0,h=0,p=t.constructor,m=p.precision;if(Aa(t)>16)throw Error(XE+Aa(t));if(!t.s)return new p(_s);for(Gn=!1,c=m,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(n=Math.log(bd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(_s),p.precision=c;;){if(a=En(a.times(t),c),r=r.times(++d),s=i.plus(Kl(a,r,c)),Ho(s.d).slice(0,c)===Ho(i.d).slice(0,c)){for(;h--;)i=En(i.times(i),c);return p.precision=m,e==null?(Gn=!0,En(i,m)):i}i=s}}function Aa(t){for(var e=t.e*Vn,r=t.d[0];r>=10;r/=10)e++;return e}function z_(t,e,r){if(e>t.LN10.sd())throw Gn=!0,r&&(t.precision=r),Error(ao+"LN10 precision limit exceeded");return En(new t(t.LN10),e)}function Yc(t){for(var e="";t--;)e+="0";return e}function fg(t,e){var r,n,a,i,s,c,d,h,p,m=1,y=10,x=t,T=x.d,S=x.constructor,w=S.precision;if(x.s<1)throw Error(ao+(x.s?"NaN":"-Infinity"));if(x.eq(_s))return new S(0);if(e==null?(Gn=!1,h=w):h=e,x.eq(10))return e==null&&(Gn=!0),z_(S,h);if(h+=y,S.precision=h,r=Ho(T),n=r.charAt(0),i=Aa(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=Ho(x.d),n=r.charAt(0),m++;i=Aa(x),n>1?(x=new S("0."+r),i++):x=new S(n+"."+r.slice(1))}else return d=z_(S,h+2,w).times(i+""),x=fg(new S(n+"."+r.slice(1)),h-y).plus(d),S.precision=w,e==null?(Gn=!0,En(x,w)):x;for(c=s=x=Kl(x.minus(_s),x.plus(_s),h),p=En(x.times(x),h),a=3;;){if(s=En(s.times(p),h),d=c.plus(Kl(s,new S(a),h)),Ho(d.d).slice(0,h)===Ho(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(z_(S,h+2,w).times(i+""))),c=Kl(c,new S(m),h),S.precision=w,e==null?(Gn=!0,En(c,w)):c;c=d,a+=2}}function PB(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=$f(r/Vn),t.d=[],n=(r+1)%Vn,r<0&&(n+=Vn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Vn;n<a;)t.d.push(+e.slice(n,n+=Vn));e=e.slice(n),n=Vn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Gn&&(t.e>ub||t.e<-ub))throw Error(XE+r)}else t.s=0,t.e=0,t.d=[0];return t}function En(t,e,r){var n,a,i,s,c,d,h,p,m=t.d;for(s=1,i=m[0];i>=10;i/=10)s++;if(n=e-s,n<0)n+=Vn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Vn),i=m.length,p>=i)return t;for(h=i=m[p],s=1;i>=10;i/=10)s++;n%=Vn,a=n-Vn+s}if(r!==void 0&&(i=bd(10,s-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/bd(10,s-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Aa(t),m.length=1,e=e-i-1,m[0]=bd(10,(Vn-e%Vn)%Vn),t.e=$f(-e/Vn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=bd(10,Vn-n),m[p]=a>0?(h/bd(10,s-a)%bd(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Xa&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=Xa)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Gn&&(t.e>ub||t.e<-ub))throw Error(XE+Aa(t));return t}function lK(t,e){var r,n,a,i,s,c,d,h,p,m,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Gn?En(e,x):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),s=h-n,s){for(p=s<0,p?(r=d,s=-s,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(x/Vn),c)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}s=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>s;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=Xa-1;--d[i],d[a]+=Xa}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Gn?En(e,x):e):new y(0)}function r0(t,e,r){var n,a=Aa(t),i=Ho(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Yc(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yc(-a-1)+i,r&&(n=r-s)>0&&(i+=Yc(n))):a>=s?(i+=Yc(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Yc(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Yc(n))),t.s<0?"-"+i:i}function DB(t,e){if(t.length>e)return t.length=e,!0}function cK(t){var e,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ud+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return PB(s,i.toString())}else if(typeof i!="string")throw Error(Ud+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Mye.test(i))PB(s,i);else throw Error(Ud+i)}if(a.prototype=Ot,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=cK,a.config=a.set=Pye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Pye(t){if(!t||typeof t!="object")throw Error(ao+"Object expected");var e,r,n,a=["precision",1,Bf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if($f(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ud+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ud+r+": "+n);return this}var YE=cK(Rye);_s=new YE(1);const yn=YE;function Dye(t){return Uye(t)||$ye(t)||Bye(t)||Lye()}function Lye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bye(t,e){if(t){if(typeof t=="string")return uN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uN(t,e)}}function $ye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Uye(t){if(Array.isArray(t))return uN(t)}function uN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zye=function(e){return e},uK={},dK=function(e){return e===uK},LB=function(e){return function r(){return arguments.length===0||arguments.length===1&&dK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Vye=function t(e,r){return e===1?r:LB(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(c){return c!==uK}).length;return s>=e?r.apply(void 0,a):t(e-s,LB(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return dK(m)?d.shift():m});return r.apply(void 0,Dye(p).concat(d))}))})},aw=function(e){return Vye(e.length,e)},dN=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},Fye=aw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),qye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return zye;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},hN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Hye(t){var e;return t===0?e=1:e=Math.floor(new yn(t).abs().log(10).toNumber())+1,e}function Gye(t,e,r){for(var n=new yn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Wye=aw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Kye=aw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Qye=aw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const iw={rangeStep:Gye,getDigitCount:Hye,interpolateNumber:Wye,uninterpolateNumber:Kye,uninterpolateTruncation:Qye};function fN(t){return Zye(t)||Yye(t)||fK(t)||Xye()}function Xye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zye(t){if(Array.isArray(t))return pN(t)}function pg(t,e){return tve(t)||eve(t,e)||fK(t,e)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fK(t,e){if(t){if(typeof t=="string")return pN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pN(t,e)}}function pN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function tve(t){if(Array.isArray(t))return t}function pK(t){var e=pg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function mK(t,e,r){if(t.lte(0))return new yn(0);var n=iw.getDigitCount(t.toNumber()),a=new yn(10).pow(n),i=t.div(a),s=n!==1?.05:.1,c=new yn(Math.ceil(i.div(s).toNumber())).add(r).mul(s),d=c.mul(a);return e?d:new yn(Math.ceil(d))}function rve(t,e,r){var n=1,a=new yn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new yn(10).pow(iw.getDigitCount(t)-1),a=new yn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new yn(Math.floor(t)))}else t===0?a=new yn(Math.floor((e-1)/2)):r||(a=new yn(Math.floor(t)));var s=Math.floor((e-1)/2),c=qye(Fye(function(d){return a.add(new yn(d-s).mul(n)).toNumber()}),dN);return c(0,e)}function gK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var i=mK(new yn(e).sub(t).div(r-1),n,a),s;t<=0&&e>=0?s=new yn(0):(s=new yn(t).add(e).div(2),s=s.sub(new yn(s).mod(i)));var c=Math.ceil(s.sub(t).div(i).toNumber()),d=Math.ceil(new yn(e).sub(s).div(i).toNumber()),h=c+d+1;return h>r?gK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:s.sub(new yn(c).mul(i)),tickMax:s.add(new yn(d).mul(i))})}function nve(t){var e=pg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),c=pK([r,n]),d=pg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(fN(dN(0,a-1).map(function(){return 1/0}))):[].concat(fN(dN(0,a-1).map(function(){return-1/0})),[p]);return r>n?hN(m):m}if(h===p)return rve(h,a,i);var y=gK(h,p,s,i),x=y.step,T=y.tickMin,S=y.tickMax,w=iw.rangeStep(T,S.add(new yn(.1).mul(x)),x);return r>n?hN(w):w}function ave(t,e){var r=pg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=pK([n,a]),c=pg(s,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=mK(new yn(h).sub(d).div(p-1),i,0),y=[].concat(fN(iw.rangeStep(new yn(d),new yn(h).sub(new yn(.99).mul(m)),m)),[h]);return n>a?hN(y):y}var ive=hK(nve),sve=hK(ave),ove="Invariant failed";function n0(t,e){throw new Error(ove)}var lve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function db(){return db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},db.apply(this,arguments)}function cve(t,e){return fve(t)||hve(t,e)||dve(t,e)||uve()}function uve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dve(t,e){if(t){if(typeof t=="string")return BB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BB(t,e)}}function BB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function fve(t){if(Array.isArray(t))return t}function pve(t,e){if(t==null)return{};var r=mve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function gve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xK(n.key),n)}}function vve(t,e,r){return e&&yve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xve(t,e,r){return e=hb(e),bve(t,yK()?Reflect.construct(e,r||[],hb(t).constructor):e.apply(t,r))}function bve(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wve(t)}function wve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yK=function(){return!!t})()}function hb(t){return hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hb(t)}function Sve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mN(t,e)}function mN(t,e){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mN(t,e)}function vK(t,e,r){return e=xK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xK(t){var e=_ve(t,"string");return sf(e)=="symbol"?e:e+""}function _ve(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b1=(function(t){function e(){return gve(this,e),xve(this,e,arguments)}return Sve(e,t),vve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=pve(n,lve),x=zt(y,!1);this.props.direction==="x"&&p.type!=="number"&&n0();var T=d.map(function(S){var w=h(S,c),E=w.x,I=w.y,R=w.value,L=w.errorVal;if(!L)return null;var O=[],M,N;if(Array.isArray(L)){var A=cve(L,2);M=A[0],N=A[1]}else M=N=L;if(i==="vertical"){var j=p.scale,z=I+a,B=z+s,F=z-s,U=j(R-M),X=j(R+N);O.push({x1:X,y1:B,x2:X,y2:F}),O.push({x1:U,y1:z,x2:X,y2:z}),O.push({x1:U,y1:B,x2:U,y2:F})}else if(i==="horizontal"){var W=m.scale,H=E+a,Z=H-s,ie=H+s,fe=W(R-M),me=W(R+N);O.push({x1:Z,y1:me,x2:ie,y2:me}),O.push({x1:H,y1:fe,x2:H,y2:me}),O.push({x1:Z,y1:fe,x2:ie,y2:fe})}return se.createElement(Vr,db({className:"recharts-errorBar",key:"bar-".concat(O.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},x),O.map(function(K){return se.createElement("line",db({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return se.createElement(Vr,{className:"recharts-errorBars"},T)}}])})(se.Component);vK(b1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});vK(b1,"displayName","ErrorBar");function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function $B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(r),!0).forEach(function(n){Tve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$B(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tve(t,e,r){return e=Ave(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ave(t){var e=Nve(t,"string");return mg(e)=="symbol"?e:e+""}function Nve(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bK=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,s=ws(r,Nh);if(!s)return null;var c=Nh.defaultProps,d=c!==void 0?fd(fd({},c),s.props):{},h;return s.props&&s.props.payload?h=s.props&&s.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,x=m.props,T=x.sectors||x.data||[];return p.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,x=y!==void 0?fd(fd({},y),m.props):{},T=x.dataKey,S=x.name,w=x.legendType,E=x.hide;return{inactive:E,dataKey:T,type:d.iconType||w||"square",color:ZE(m),value:S||T,payload:x}}),fd(fd(fd({},d),Nh.getWithHeight(s,a)),{},{payload:h,item:s})};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function UB(t){return Cve(t)||kve(t)||jve(t)||Eve()}function Eve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jve(t,e){if(t){if(typeof t=="string")return gN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gN(t,e)}}function kve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cve(t){if(Array.isArray(t))return gN(t)}function gN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(r),!0).forEach(function(n){jh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jh(t,e,r){return e=Ove(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ove(t){var e=Ive(t,"string");return gg(e)=="symbol"?e:e+""}function Ive(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pi(t,e,r){return or(t)||or(e)?r:La(e)?Js(t,e,r):nr(e)?e(t):r}function Sm(t,e,r,n){var a=Cye(t,function(c){return pi(c,e)});if(r==="number"){var i=a.filter(function(c){return vt(c)||parseFloat(c)});return i.length?[nw(i),rw(i)]:[1/0,-1/0]}var s=n?a.filter(function(c){return!or(c)}):a;return s.map(function(c){return La(c)||c instanceof Date?c:""})}var Rve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,x=void 0;if(vo(m-p)!==vo(y-m)){var T=[];if(vo(y-m)===vo(d[1]-d[0])){x=y;var S=m+d[1]-d[0];T[0]=Math.min(S,(S+p)/2),T[1]=Math.max(S,(S+p)/2)}else{x=p;var w=y+d[1]-d[0];T[0]=Math.min(m,(w+m)/2),T[1]=Math.max(m,(w+m)/2)}var E=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>E[0]&&e<=E[1]||e>=T[0]&&e<=T[1]){s=a[h].index;break}}else{var I=Math.min(p,y),R=Math.max(p,y);if(e>(I+m)/2&&e<=(R+m)/2){s=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){s=n[L].index;break}return s},ZE=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?aa(aa({},e.type.defaultProps),e.props):e.props,s=i.stroke,c=i.fill,d;switch(a){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},Mve=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),y=0,x=m.length;y<x;y++){var T=p[m[y]],S=T.items,w=T.cateAxisId,E=S.filter(function(N){return Gl(N.type).indexOf("Bar")>=0});if(E&&E.length){var I=E[0].type.defaultProps,R=I!==void 0?aa(aa({},I),E[0].props):E[0].props,L=R.barSize,O=R[w];s[O]||(s[O]=[]);var M=or(L)?r:L;s[O].push({item:E[0],stackList:E.slice(1),barSize:or(M)?void 0:xo(M,n,0)})}}return s},Pve=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,s=i===void 0?[]:i,c=e.maxBarSize,d=s.length;if(d<1)return null;var h=xo(r,a,0,!0),p,m=[];if(s[0].barSize===+s[0].barSize){var y=!1,x=a/d,T=s.reduce(function(L,O){return L+O.barSize||0},0);T+=(d-1)*h,T>=a&&(T-=(d-1)*h,h=0),T>=a&&x>0&&(y=!0,x*=.9,T=d*x);var S=(a-T)/2>>0,w={offset:S-h,size:0};p=s.reduce(function(L,O){var M={item:O.item,position:{offset:w.offset+w.size+h,size:y?x:O.barSize}},N=[].concat(UB(L),[M]);return w=N[N.length-1].position,O.stackList&&O.stackList.length&&O.stackList.forEach(function(A){N.push({item:A,position:w})}),N},m)}else{var E=xo(n,a,0,!0);a-2*E-(d-1)*h<=0&&(h=0);var I=(a-2*E-(d-1)*h)/d;I>1&&(I>>=0);var R=c===+c?Math.min(I,c):I;p=s.reduce(function(L,O,M){var N=[].concat(UB(L),[{item:O.item,position:{offset:E+(I+h)*M+(I-R)/2,size:R}}]);return O.stackList&&O.stackList.length&&O.stackList.forEach(function(A){N.push({item:A,position:N[N.length-1].position})}),N},m)}return p},Dve=function(e,r,n,a){var i=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),h=bK({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,y=p.height,x=h.align,T=h.verticalAlign,S=h.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&x!=="center"&&vt(e[x]))return aa(aa({},e),{},jh({},x,e[x]+(m||0)));if((S==="horizontal"||S==="vertical"&&x==="center")&&T!=="middle"&&vt(e[T]))return aa(aa({},e),{},jh({},T,e[T]+(y||0)))}return e},Lve=function(e,r,n){return or(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},wK=function(e,r,n,a,i){var s=r.props.children,c=ks(s,b1).filter(function(h){return Lve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=pi(p,n);if(or(m))return h;var y=Array.isArray(m)?[nw(m),rw(m)]:[m,m],x=d.reduce(function(T,S){var w=pi(p,S,0),E=y[0]-Math.abs(Array.isArray(w)?w[0]:w),I=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,T[0]),Math.max(I,T[1])]},[1/0,-1/0]);return[Math.min(x[0],h[0]),Math.max(x[1],h[1])]},[1/0,-1/0])}return null},Bve=function(e,r,n,a,i){var s=r.map(function(c){return wK(e,c,n,i,a)}).filter(function(c){return!or(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},SK=function(e,r,n,a,i){var s=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&wK(e,d,h,a)||Sm(e,h,n,i)});if(n==="number")return s.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},_K=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},TK=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,s,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(s=!0),d.coordinate});return i||c.push(r),s||c.push(n),c},Vl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?vo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=i?i.indexOf(m):m;return{coordinate:a(y)+h,value:m,offset:h}});return p.filter(function(m){return!h1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:a(m)+h,value:m,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,y){return{coordinate:a(m)+h,value:i?i[m]:m,index:y,offset:h}})},V_=new WeakMap,Tv=function(e,r){if(typeof r!="function")return e;V_.has(e)||V_.set(e,new WeakMap);var n=V_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},AK=function(e,r,n){var a=e.scale,i=e.type,s=e.layout,c=e.axisType;if(a==="auto")return s==="radial"&&c==="radiusAxis"?{scale:lg(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:sb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wm(),realScaleType:"point"}:i==="category"?{scale:lg(),realScaleType:"band"}:{scale:sb(),realScaleType:"linear"};if(e0(a)){var d="scale".concat(z2(a));return{scale:(NB[d]||wm)(),realScaleType:NB[d]?d:"point"}}return nr(a)?{scale:a}:{scale:wm(),realScaleType:"point"}},VB=1e-4,NK=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-VB,s=Math.max(a[0],a[1])+VB,c=e(r[0]),d=e(r[n-1]);(c<i||c>s||d<i||d>s)&&e.domain([r[0],r[n-1]])}},$ve=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},Uve=function(e,r){if(!r||r.length!==2||!vt(r[0])||!vt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!vt(e[0])||e[0]<n)&&(i[0]=n),(!vt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},zve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0,c=0;c<r;++c){var d=h1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},Vve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var c=h1(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=i,e[s][n][1]=i+c,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},Fve={sign:zve,expand:Che,none:Xh,silhouette:Ohe,wiggle:Ihe,positive:Vve},qve=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=Fve[n],s=khe().keys(a).value(function(c,d){return+pi(c,d,0)}).order(GA).offset(i);return s(e)},Hve=function(e,r,n,a,i,s){if(!e)return null;var c=s?r.reverse():r,d={},h=c.reduce(function(m,y){var x,T=(x=y.type)!==null&&x!==void 0&&x.defaultProps?aa(aa({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return m;var E=T[n],I=m[E]||{hasStack:!1,stackGroups:{}};if(La(S)){var R=I.stackGroups[S]||{numericAxisId:n,cateAxisId:a,items:[]};R.items.push(y),I.hasStack=!0,I.stackGroups[S]=R}else I.stackGroups[f1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return aa(aa({},m),{},jh({},E,I))},d),p={};return Object.keys(h).reduce(function(m,y){var x=h[y];if(x.hasStack){var T={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(S,w){var E=x.stackGroups[w];return aa(aa({},S),{},jh({},w,{numericAxisId:n,cateAxisId:a,items:E.items,stackedData:qve(e,E.items,i)}))},T)}return aa(aa({},m),{},jh({},y,x))},p)},EK=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=ive(h,i,c);return e.domain([nw(p),rw(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),y=sve(m,i,c);return{niceTicks:y}}return null};function FB(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!or(a[e.dataKey])){var c=zx(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=pi(a,or(s)?e.dataKey:s);return or(d)?null:e.scale(d)}var qB=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=pi(s,r.dataKey,r.domain[c]);return or(d)?null:r.scale(d)-i/2+a},Gve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Wve=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?aa(aa({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(La(i)){var s=r[i];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},Kve=function(e){return e.reduce(function(r,n){return[nw(n.concat([r[0]]).filter(vt)),rw(n.concat([r[1]]).filter(vt))]},[1/0,-1/0])},jK=function(e,r,n){return Object.keys(e).reduce(function(a,i){var s=e[i],c=s.stackedData,d=c.reduce(function(h,p){var m=Kve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},HB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yN=function(e,r,n){if(nr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(vt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(HB.test(e[0])){var i=+HB.exec(e[0])[1];a[0]=r[0]-i}else nr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(vt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(GB.test(e[1])){var s=+GB.exec(e[1])[1];a[1]=r[1]+s}else nr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},fb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=AE(r,function(m){return m.coordinate}),s=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];s=Math.min((h.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},WB=function(e,r,n){return!e||!e.length||x1(e,Js(n,"type.defaultProps.domain"))?r:e},kK=function(e,r){var n=e.type.defaultProps?aa(aa({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return aa(aa({},zt(e,!1)),{},{dataKey:a,unit:s,formatter:c,name:i||a,color:ZE(e),value:pi(r,a),type:d,payload:r,chartType:h,hide:p})};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function KB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ol(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(r),!0).forEach(function(n){CK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CK(t,e,r){return e=Qve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qve(t){var e=Xve(t,"string");return yg(e)=="symbol"?e:e+""}function Xve(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yve(t,e){return txe(t)||exe(t,e)||Jve(t,e)||Zve()}function Zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jve(t,e){if(t){if(typeof t=="string")return QB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QB(t,e)}}function QB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function exe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function txe(t){if(Array.isArray(t))return t}var pb=Math.PI/180,rxe=function(e){return e*180/Math.PI},vn=function(e,r,n,a){return{x:e+Math.cos(-pb*a)*n,y:r+Math.sin(-pb*a)*n}},nxe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},axe=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=xo(e.cx,s,s/2),m=xo(e.cy,c,c/2),y=nxe(s,c,n),x=xo(e.innerRadius,y,0),T=xo(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,E){var I=r[E],R=I.domain,L=I.reversed,O;if(or(I.range))a==="angleAxis"?O=[d,h]:a==="radiusAxis"&&(O=[x,T]),L&&(O=[O[1],O[0]]);else{O=I.range;var M=O,N=Yve(M,2);d=N[0],h=N[1]}var A=AK(I,i),j=A.realScaleType,z=A.scale;z.domain(R).range(O),NK(z);var B=EK(z,Ol(Ol({},I),{},{realScaleType:j})),F=Ol(Ol(Ol({},I),B),{},{range:O,radius:T,realScaleType:j,scale:z,cx:p,cy:m,innerRadius:x,outerRadius:T,startAngle:d,endAngle:h});return Ol(Ol({},w),{},CK({},E,F))},{})},ixe=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},sxe=function(e,r){var n=e.x,a=e.y,i=r.cx,s=r.cy,c=ixe({x:n,y:a},{x:i,y:s});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>s&&(h=2*Math.PI-h),{radius:c,angle:rxe(h),angleInRadian:h}},oxe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},lxe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),c=Math.min(i,s);return e+c*360},XB=function(e,r){var n=e.x,a=e.y,i=sxe({x:n,y:a},r),s=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(s<d||s>h)return!1;if(s===0)return!0;var p=oxe(r),m=p.startAngle,y=p.endAngle,x=c,T;if(m<=y){for(;x>y;)x-=360;for(;x<m;)x+=360;T=x>=m&&x<=y}else{for(;x>m;)x-=360;for(;x<y;)x+=360;T=x>=y&&x<=m}return T?Ol(Ol({},r),{},{radius:s,angle:lxe(x,r)}):null},OK=function(e){return!k.isValidElement(e)&&!nr(e)&&typeof e!="boolean"?e.className:""};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}var cxe=["offset"];function uxe(t){return pxe(t)||fxe(t)||hxe(t)||dxe()}function dxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hxe(t,e){if(t){if(typeof t=="string")return vN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vN(t,e)}}function fxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pxe(t){if(Array.isArray(t))return vN(t)}function vN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mxe(t,e){if(t==null)return{};var r=gxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function YB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(r),!0).forEach(function(n){yxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yxe(t,e,r){return e=vxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vxe(t){var e=xxe(t,"string");return vg(e)=="symbol"?e:e+""}function xxe(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(this,arguments)}var bxe=function(e){var r=e.value,n=e.formatter,a=or(e.children)?r:e.children;return nr(n)?n(a):a},wxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Sxe=function(e,r,n){var a=e.position,i=e.viewBox,s=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,x=d.startAngle,T=d.endAngle,S=d.clockWise,w=(m+y)/2,E=wxe(x,T),I=E>=0?1:-1,R,L;a==="insideStart"?(R=x+I*s,L=S):a==="insideEnd"?(R=T-I*s,L=!S):a==="end"&&(R=T+I*s,L=S),L=E<=0?L:!L;var O=vn(h,p,w,R),M=vn(h,p,w,R+(L?1:-1)*359),N="M".concat(O.x,",").concat(O.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(M.x,",").concat(M.y),A=or(e.id)?f1("recharts-radial-line-"):e.id;return se.createElement("text",xg({},n,{dominantBaseline:"central",className:fr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:A,d:N})),se.createElement("textPath",{xlinkHref:"#".concat(A)},r))},_xe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,s=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,y=(p+m)/2;if(a==="outside"){var x=vn(s,c,h+n,y),T=x.x,S=x.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,E=vn(s,c,w,y),I=E.x,R=E.y;return{x:I,y:R,textAnchor:"middle",verticalAnchor:"middle"}},Txe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,s=r,c=s.x,d=s.y,h=s.width,p=s.height,m=p>=0?1:-1,y=m*a,x=m>0?"end":"start",T=m>0?"start":"end",S=h>=0?1:-1,w=S*a,E=S>0?"end":"start",I=S>0?"start":"end";if(i==="top"){var R={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:x};return Ra(Ra({},R),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:T};return Ra(Ra({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var O={x:c-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return Ra(Ra({},O),n?{width:Math.max(O.x-n.x,0),height:p}:{})}if(i==="right"){var M={x:c+h+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"};return Ra(Ra({},M),n?{width:Math.max(n.x+n.width-M.x,0),height:p}:{})}var N=n?{width:h,height:p}:{};return i==="insideLeft"?Ra({x:c+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"},N):i==="insideRight"?Ra({x:c+h-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},N):i==="insideTop"?Ra({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:T},N):i==="insideBottom"?Ra({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:x},N):i==="insideTopLeft"?Ra({x:c+w,y:d+y,textAnchor:I,verticalAnchor:T},N):i==="insideTopRight"?Ra({x:c+h-w,y:d+y,textAnchor:E,verticalAnchor:T},N):i==="insideBottomLeft"?Ra({x:c+w,y:d+p-y,textAnchor:I,verticalAnchor:x},N):i==="insideBottomRight"?Ra({x:c+h-w,y:d+p-y,textAnchor:E,verticalAnchor:x},N):Pf(i)&&(vt(i.x)||Ed(i.x))&&(vt(i.y)||Ed(i.y))?Ra({x:c+xo(i.x,h),y:d+xo(i.y,p),textAnchor:"end",verticalAnchor:"end"},N):Ra({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Axe=function(e){return"cx"in e&&vt(e.cx)};function di(t){var e=t.offset,r=e===void 0?5:e,n=mxe(t,cxe),a=Ra({offset:r},n),i=a.viewBox,s=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,y=a.textBreakAll;if(!i||or(c)&&or(d)&&!k.isValidElement(h)&&!nr(h))return null;if(k.isValidElement(h))return k.cloneElement(h,a);var x;if(nr(h)){if(x=k.createElement(h,a),k.isValidElement(x))return x}else x=bxe(a);var T=Axe(i),S=zt(a,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Sxe(a,x,S);var w=T?_xe(a):Txe(a);return se.createElement(tf,xg({className:fr("recharts-label",m)},S,w,{breakAll:y}),x)}di.displayName="Label";var IK=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,x=e.top,T=e.left,S=e.width,w=e.height,E=e.clockWise,I=e.labelViewBox;if(I)return I;if(vt(S)&&vt(w)){if(vt(m)&&vt(y))return{x:m,y,width:S,height:w};if(vt(x)&&vt(T))return{x,y:T,width:S,height:w}}return vt(m)&&vt(y)?{x:m,y,width:0,height:0}:vt(r)&&vt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},Nxe=function(e,r){return e?e===!0?se.createElement(di,{key:"label-implicit",viewBox:r}):La(e)?se.createElement(di,{key:"label-implicit",viewBox:r,value:e}):k.isValidElement(e)?e.type===di?k.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):nr(e)?se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):Pf(e)?se.createElement(di,xg({viewBox:r},e,{key:"label-implicit"})):null:null},Exe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=IK(e),s=ks(a,di).map(function(d,h){return k.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return s;var c=Nxe(e.label,r||i);return[c].concat(uxe(s))};di.parseViewBox=IK;di.renderCallByParent=Exe;var F_,ZB;function jxe(){if(ZB)return F_;ZB=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return F_=t,F_}var kxe=jxe();const RK=Kr(kxe);function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}var Cxe=["valueAccessor"],Oxe=["data","dataKey","clockWise","id","textBreakAll"];function Ixe(t){return Dxe(t)||Pxe(t)||Mxe(t)||Rxe()}function Rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mxe(t,e){if(t){if(typeof t=="string")return xN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xN(t,e)}}function Pxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dxe(t){if(Array.isArray(t))return xN(t)}function xN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mb(){return mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mb.apply(this,arguments)}function JB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function e$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(r),!0).forEach(function(n){Lxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lxe(t,e,r){return e=Bxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bxe(t){var e=$xe(t,"string");return bg(e)=="symbol"?e:e+""}function $xe(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t$(t,e){if(t==null)return{};var r=Uxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Uxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zxe=function(e){return Array.isArray(e.value)?RK(e.value):e.value};function Ql(t){var e=t.valueAccessor,r=e===void 0?zxe:e,n=t$(t,Cxe),a=n.data,i=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,h=t$(n,Oxe);return!a||!a.length?null:se.createElement(Vr,{className:"recharts-label-list"},a.map(function(p,m){var y=or(i)?r(p,m):pi(p&&p.payload,i),x=or(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(di,mb({},zt(p,!0),h,x,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:di.parseViewBox(or(s)?p:e$(e$({},p),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Ql.displayName="LabelList";function Vxe(t,e){return t?t===!0?se.createElement(Ql,{key:"labelList-implicit",data:e}):se.isValidElement(t)||nr(t)?se.createElement(Ql,{key:"labelList-implicit",data:e,content:t}):Pf(t)?se.createElement(Ql,mb({data:e},t,{key:"labelList-implicit"})):null:null}function Fxe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ks(n,Ql).map(function(s,c){return k.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=Vxe(t.label,e);return[i].concat(Ixe(a))}Ql.renderCallByParent=Fxe;function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bN.apply(this,arguments)}function r$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function n$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(r),!0).forEach(function(n){qxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qxe(t,e,r){return e=Hxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hxe(t){var e=Gxe(t,"string");return wg(e)=="symbol"?e:e+""}function Gxe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Av=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/pb,y=h?i:i+s*m,x=vn(r,n,p,y),T=vn(r,n,a,y),S=h?i-s*m:i,w=vn(r,n,p*Math.cos(m*pb),S);return{center:x,circleTangency:T,lineTangency:w,theta:m}},MK=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.startAngle,c=e.endAngle,d=Wxe(s,c),h=s+d,p=vn(r,n,i,s),m=vn(r,n,i,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=vn(r,n,a,s),T=vn(r,n,a,h);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=h),`,
            `).concat(x.x,",").concat(x.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Kxe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=vo(p-h),y=Av({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:s,cornerIsExternal:d}),x=y.circleTangency,T=y.lineTangency,S=y.theta,w=Av({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:s,cornerIsExternal:d}),E=w.circleTangency,I=w.lineTangency,R=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-S-R;if(L<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):MK({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var O="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(I.x,",").concat(I.y,`
  `);if(a>0){var M=Av({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),N=M.circleTangency,A=M.lineTangency,j=M.theta,z=Av({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),B=z.circleTangency,F=z.lineTangency,U=z.theta,X=d?Math.abs(h-p):Math.abs(h-p)-j-U;if(X<0&&s===0)return"".concat(O,"L").concat(r,",").concat(n,"Z");O+="L".concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(X>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else O+="L".concat(r,",").concat(n,"Z");return O},Qxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PK=function(e){var r=n$(n$({},Qxe),e),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(s<i||p===m)return null;var x=fr("recharts-sector",y),T=s-i,S=xo(c,T,0,!0),w;return S>0&&Math.abs(p-m)<360?w=Kxe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=MK({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:p,endAngle:m}),se.createElement("path",bN({},zt(r,!0),{className:x,d:w,role:"img"}))};function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wN.apply(this,arguments)}function a$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function i$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(r),!0).forEach(function(n){Xxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xxe(t,e,r){return e=Yxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yxe(t){var e=Zxe(t,"string");return Sg(e)=="symbol"?e:e+""}function Zxe(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s$={curveBasisClosed:vhe,curveBasisOpen:xhe,curveBasis:yhe,curveBumpX:nhe,curveBumpY:ahe,curveLinearClosed:bhe,curveLinear:F2,curveMonotoneX:whe,curveMonotoneY:She,curveNatural:_he,curveStep:The,curveStepAfter:Nhe,curveStepBefore:Ahe},Nv=function(e){return e.x===+e.x&&e.y===+e.y},Kp=function(e){return e.x},Qp=function(e){return e.y},Jxe=function(e,r){if(nr(e))return e;var n="curve".concat(z2(e));return(n==="curveMonotone"||n==="curveBump")&&r?s$["".concat(n).concat(r==="vertical"?"Y":"X")]:s$[n]||F2},ebe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,s=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=Jxe(n,c),m=h?i.filter(function(S){return Nv(S)}):i,y;if(Array.isArray(s)){var x=h?s.filter(function(S){return Nv(S)}):s,T=m.map(function(S,w){return i$(i$({},S),{},{base:x[w]})});return c==="vertical"?y=yv().y(Qp).x1(Kp).x0(function(S){return S.base.x}):y=yv().x(Kp).y1(Qp).y0(function(S){return S.base.y}),y.defined(Nv).curve(p),y(T)}return c==="vertical"&&vt(s)?y=yv().y(Qp).x1(Kp).x0(s):vt(s)?y=yv().x(Kp).y1(Qp).y0(s):y=RG().x(Kp).y(Qp),y.defined(Nv).curve(p),y(m)},SN=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?ebe(e):a;return k.createElement("path",wN({},zt(e,!1),Vx(e),{className:fr("recharts-curve",r),d:s,ref:i}))},q_={exports:{}},H_,o$;function tbe(){if(o$)return H_;o$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H_=t,H_}var G_,l$;function rbe(){if(l$)return G_;l$=1;var t=tbe();function e(){}function r(){}return r.resetWarningCache=e,G_=function(){function n(s,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},G_}var c$;function nbe(){return c$||(c$=1,q_.exports=rbe()()),q_.exports}var abe=nbe();const tn=Kr(abe),{getOwnPropertyNames:ibe,getOwnPropertySymbols:sbe}=Object,{hasOwnProperty:obe}=Object.prototype;function W_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Ev(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,s=i.get(r),c=i.get(n);if(s&&c)return s===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function lbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function u$(t){return ibe(t).concat(sbe(t))}const cbe=Object.hasOwn||((t,e)=>obe.call(t,e));function y0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const ube="__v",dbe="__o",hbe="_owner",{getOwnPropertyDescriptor:d$,keys:h$}=Object;function fbe(t,e){return t.byteLength===e.byteLength&&gb(new Uint8Array(t),new Uint8Array(e))}function pbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function mbe(t,e){return t.byteLength===e.byteLength&&gb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function gbe(t,e){return y0(t.getTime(),e.getTime())}function ybe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function vbe(t,e){return t===e}function f$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let s,c,d=0;for(;(s=i.next())&&!s.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const y=s.value,x=c.value;if(r.equals(y[0],x[0],d,m,t,e,r)&&r.equals(y[1],x[1],y[0],x[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const xbe=y0;function bbe(t,e,r){const n=h$(t);let a=n.length;if(h$(e).length!==a)return!1;for(;a-- >0;)if(!DK(t,e,r,n[a]))return!1;return!0}function Xp(t,e,r){const n=u$(t);let a=n.length;if(u$(e).length!==a)return!1;let i,s,c;for(;a-- >0;)if(i=n[a],!DK(t,e,r,i)||(s=d$(t,i),c=d$(e,i),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function wbe(t,e){return y0(t.valueOf(),e.valueOf())}function Sbe(t,e){return t.source===e.source&&t.flags===e.flags}function p$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let s,c;for(;(s=i.next())&&!s.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function gb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function _be(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function DK(t,e,r,n){return(n===hbe||n===dbe||n===ube)&&(t.$$typeof||e.$$typeof)?!0:cbe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Tbe="[object ArrayBuffer]",Abe="[object Arguments]",Nbe="[object Boolean]",Ebe="[object DataView]",jbe="[object Date]",kbe="[object Error]",Cbe="[object Map]",Obe="[object Number]",Ibe="[object Object]",Rbe="[object RegExp]",Mbe="[object Set]",Pbe="[object String]",Dbe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Lbe="[object URL]",Bbe=Object.prototype.toString;function $be({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:x,unknownTagComparators:T}){return function(w,E,I){if(w===E)return!0;if(w==null||E==null)return!1;const R=typeof w;if(R!==typeof E)return!1;if(R!=="object")return R==="number"?c(w,E,I):R==="function"?i(w,E,I):!1;const L=w.constructor;if(L!==E.constructor)return!1;if(L===Object)return d(w,E,I);if(Array.isArray(w))return e(w,E,I);if(L===Date)return n(w,E,I);if(L===RegExp)return p(w,E,I);if(L===Map)return s(w,E,I);if(L===Set)return m(w,E,I);const O=Bbe.call(w);if(O===jbe)return n(w,E,I);if(O===Rbe)return p(w,E,I);if(O===Cbe)return s(w,E,I);if(O===Mbe)return m(w,E,I);if(O===Ibe)return typeof w.then!="function"&&typeof E.then!="function"&&d(w,E,I);if(O===Lbe)return x(w,E,I);if(O===kbe)return a(w,E,I);if(O===Abe)return d(w,E,I);if(Dbe[O])return y(w,E,I);if(O===Tbe)return t(w,E,I);if(O===Ebe)return r(w,E,I);if(O===Nbe||O===Obe||O===Pbe)return h(w,E,I);if(T){let M=T[O];if(!M){const N=lbe(w);N&&(M=T[N])}if(M)return M(w,E,I)}return!1}}function Ube({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:fbe,areArraysEqual:r?Xp:pbe,areDataViewsEqual:mbe,areDatesEqual:gbe,areErrorsEqual:ybe,areFunctionsEqual:vbe,areMapsEqual:r?W_(f$,Xp):f$,areNumbersEqual:xbe,areObjectsEqual:r?Xp:bbe,arePrimitiveWrappersEqual:wbe,areRegExpsEqual:Sbe,areSetsEqual:r?W_(p$,Xp):p$,areTypedArraysEqual:r?W_(gb,Xp):gb,areUrlsEqual:_be,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Ev(n.areArraysEqual),i=Ev(n.areMapsEqual),s=Ev(n.areObjectsEqual),c=Ev(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return n}function zbe(t){return function(e,r,n,a,i,s,c){return t(e,r,c)}}function Vbe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const Fbe=Bu();Bu({strict:!0});Bu({circular:!0});Bu({circular:!0,strict:!0});Bu({createInternalComparator:()=>y0});Bu({strict:!0,createInternalComparator:()=>y0});Bu({circular:!0,createInternalComparator:()=>y0});Bu({circular:!0,createInternalComparator:()=>y0,strict:!0});function Bu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=Ube(t),s=$be(i),c=r?r(s):zbe(s);return Vbe({circular:e,comparator:s,createState:n,equals:c,strict:a})}function qbe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function m$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):qbe(a)};requestAnimationFrame(n)}function _N(t){"@babel/helpers - typeof";return _N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_N(t)}function Hbe(t){return Qbe(t)||Kbe(t)||Wbe(t)||Gbe()}function Gbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wbe(t,e){if(t){if(typeof t=="string")return g$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g$(t,e)}}function g$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qbe(t){if(Array.isArray(t))return t}function Xbe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,c=Hbe(s),d=c[0],h=c.slice(1);if(typeof d=="number"){m$(a.bind(null,h),d);return}a(d),m$(a.bind(null,h));return}_N(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(r),!0).forEach(function(n){LK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LK(t,e,r){return e=Ybe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ybe(t){var e=Zbe(t,"string");return _g(e)==="symbol"?e:String(e)}function Zbe(t,e){if(_g(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jbe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},e2e=function(e){return e},t2e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},_m=function(e,r){return Object.keys(r).reduce(function(n,a){return v$(v$({},n),{},LK({},a,e(a,r[a])))},{})},x$=function(e,r,n){return e.map(function(a){return"".concat(t2e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function r2e(t,e){return i2e(t)||a2e(t,e)||BK(t,e)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function i2e(t){if(Array.isArray(t))return t}function s2e(t){return c2e(t)||l2e(t)||BK(t)||o2e()}function o2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BK(t,e){if(t){if(typeof t=="string")return TN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TN(t,e)}}function l2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c2e(t){if(Array.isArray(t))return TN(t)}function TN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yb=1e-4,$K=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},UK=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},b$=function(e,r){return function(n){var a=$K(e,r);return UK(a,n)}},u2e=function(e,r){return function(n){var a=$K(e,r),i=[].concat(s2e(a.map(function(s,c){return s*c}).slice(1)),[0]);return UK(i,n)}},w$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,c=1;break;case"ease":a=.25,i=.1,s=.25,c=1;break;case"ease-in":a=.42,i=0,s=1,c=1;break;case"ease-out":a=.42,i=0,s=.58,c=1;break;case"ease-in-out":a=0,i=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=r2e(h,4);a=p[0],i=p[1],s=p[2],c=p[3]}}}var m=b$(a,s),y=b$(i,c),x=u2e(a,s),T=function(E){return E>1?1:E<0?0:E},S=function(E){for(var I=E>1?1:E,R=I,L=0;L<8;++L){var O=m(R)-I,M=x(R);if(Math.abs(O-I)<yb||M<yb)return y(R);R=T(R-O/M)}return y(R)};return S.isStepper=!1,S},d2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,s=e.dt,c=s===void 0?17:s,d=function(p,m,y){var x=-(p-m)*n,T=y*i,S=y+(x-T)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<yb&&Math.abs(S)<yb?[m,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},h2e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return w$(a);case"spring":return d2e();default:if(a.split("(")[0]==="cubic-bezier")return w$(a)}return typeof a=="function"?a:null};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function S$(t){return m2e(t)||p2e(t)||zK(t)||f2e()}function f2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function m2e(t){if(Array.isArray(t))return NN(t)}function _$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(r),!0).forEach(function(n){AN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AN(t,e,r){return e=g2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g2e(t){var e=y2e(t,"string");return Tg(e)==="symbol"?e:String(e)}function y2e(t,e){if(Tg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v2e(t,e){return w2e(t)||b2e(t,e)||zK(t,e)||x2e()}function x2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zK(t,e){if(t){if(typeof t=="string")return NN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NN(t,e)}}function NN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function w2e(t){if(Array.isArray(t))return t}var vb=function(e,r,n){return e+(r-e)*n},EN=function(e){var r=e.from,n=e.to;return r!==n},S2e=function t(e,r,n){var a=_m(function(i,s){if(EN(s)){var c=e(s.from,s.to,s.velocity),d=v2e(c,2),h=d[0],p=d[1];return ci(ci({},s),{},{from:h,velocity:p})}return s},r);return n<1?_m(function(i,s){return EN(s)?ci(ci({},s),{},{velocity:vb(s.velocity,a[i].velocity,n),from:vb(s.from,a[i].from,n)}):s},r):t(e,a,n-1)};const _2e=(function(t,e,r,n,a){var i=Jbe(t,e),s=i.reduce(function(w,E){return ci(ci({},w),{},AN({},E,[t[E],e[E]]))},{}),c=i.reduce(function(w,E){return ci(ci({},w),{},AN({},E,{from:t[E],velocity:0,to:e[E]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return _m(function(E,I){return I.from},c)},x=function(){return!Object.values(c).filter(EN).length},T=function(E){h||(h=E);var I=E-h,R=I/r.dt;c=S2e(r,c,R),a(ci(ci(ci({},t),e),y())),h=E,x()||(d=requestAnimationFrame(m))},S=function(E){p||(p=E);var I=(E-p)/n,R=_m(function(O,M){return vb.apply(void 0,S$(M).concat([r(I)]))},s);if(a(ci(ci(ci({},t),e),R)),I<1)d=requestAnimationFrame(m);else{var L=_m(function(O,M){return vb.apply(void 0,S$(M).concat([r(1)]))},s);a(ci(ci(ci({},t),e),L))}};return m=r.isStepper?T:S,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}var T2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function A2e(t,e){if(t==null)return{};var r=N2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function N2e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function K_(t){return C2e(t)||k2e(t)||j2e(t)||E2e()}function E2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2e(t,e){if(t){if(typeof t=="string")return jN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jN(t,e)}}function k2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C2e(t){if(Array.isArray(t))return jN(t)}function jN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function T$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(r),!0).forEach(function(n){lm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lm(t,e,r){return e=VK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VK(n.key),n)}}function R2e(t,e,r){return e&&I2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VK(t){var e=M2e(t,"string");return of(e)==="symbol"?e:String(e)}function M2e(t,e){if(of(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kN(t,e)}function kN(t,e){return kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kN(t,e)}function D2e(t){var e=L2e();return function(){var n=xb(t),a;if(e){var i=xb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return CN(this,a)}}function CN(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ON(t)}function ON(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xb(t)}var Jo=(function(t){P2e(r,t);var e=D2e(r);function r(n,a){var i;O2e(this,r),i=e.call(this,n,a);var s=i.props,c=s.isActive,d=s.attributeName,h=s.from,p=s.to,m=s.steps,y=s.children,x=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(ON(i)),i.changeStyle=i.changeStyle.bind(ON(i)),!c||x<=0)return i.state={style:{}},typeof y=="function"&&(i.state={style:p}),CN(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof y=="function")return i.state={style:h},CN(i);i.state={style:d?lm({},d,h):h}}else i.state={style:{}};return i}return R2e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,y=this.state.style;if(c){if(!s){var x={style:d?lm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(x);return}if(!(Fbe(a.to,p)&&a.canBegin&&a.isActive)){var T=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||h?m:a.to;if(this.state&&y){var w={style:d?lm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(fo(fo({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,y=a.onAnimationStart,x=_2e(s,c,h2e(h),d,this.changeStyle),T=function(){i.stopJSAnimation=x()};this.manager.start([y,p,T,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,c=a.begin,d=a.onAnimationStart,h=s[0],p=h.style,m=h.duration,y=m===void 0?0:m,x=function(S,w,E){if(E===0)return S;var I=w.duration,R=w.easing,L=R===void 0?"ease":R,O=w.style,M=w.properties,N=w.onAnimationEnd,A=E>0?s[E-1]:w,j=M||Object.keys(O);if(typeof L=="function"||L==="spring")return[].concat(K_(S),[i.runJSAnimation.bind(i,{from:A.style,to:O,duration:I,easing:L}),I]);var z=x$(j,I,L),B=fo(fo(fo({},A.style),O),{},{transition:z});return[].concat(K_(S),[B,I,N]).filter(e2e)};return this.manager.start([d].concat(K_(s.reduce(x,[p,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Xbe());var i=a.begin,s=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,y=a.steps,x=a.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof h=="function"||typeof x=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var S=c?lm({},c,d):d,w=x$(Object.keys(S),s,h);T.start([p,i,fo(fo({},S),{},{transition:w}),s,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=A2e(a,T2e),h=k.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||s<=0)return i;var m=function(x){var T=x.props,S=T.style,w=S===void 0?{}:S,E=T.className,I=k.cloneElement(x,fo(fo({},d),{},{style:fo(fo({},w),p),className:E}));return I};return h===1?m(k.Children.only(i)):se.createElement("div",null,k.Children.map(i,function(y){return m(y)}))}}]),r})(k.PureComponent);Jo.displayName="Animate";Jo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Jo.propTypes={from:tn.oneOfType([tn.object,tn.string]),to:tn.oneOfType([tn.object,tn.string]),attributeName:tn.string,duration:tn.number,begin:tn.number,easing:tn.oneOfType([tn.string,tn.func]),steps:tn.arrayOf(tn.shape({duration:tn.number.isRequired,style:tn.object.isRequired,easing:tn.oneOfType([tn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tn.func]),properties:tn.arrayOf("string"),onAnimationEnd:tn.func})),children:tn.oneOfType([tn.node,tn.func]),isActive:tn.bool,canBegin:tn.bool,onAnimationEnd:tn.func,shouldReAnimate:tn.bool,onAnimationStart:tn.func,onAnimationReStart:tn.func};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function bb(){return bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bb.apply(this,arguments)}function B2e(t,e){return V2e(t)||z2e(t,e)||U2e(t,e)||$2e()}function $2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U2e(t,e){if(t){if(typeof t=="string")return A$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A$(t,e)}}function A$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function V2e(t){if(Array.isArray(t))return t}function N$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function E$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(r),!0).forEach(function(n){F2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F2e(t,e,r){return e=q2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q2e(t){var e=H2e(t,"string");return Ag(e)=="symbol"?e:e+""}function H2e(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j$=function(e,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,x=4;y<x;y++)m[y]=i[y]>s?s:i[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(s>0&&i===+i&&i>0){var T=Math.min(s,i);p="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+a-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n-d*T,",").concat(r+a,`
            L `).concat(e+d*T,",").concat(r+a,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*T," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},G2e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(s,s+d),y=Math.max(s,s+d);return n>=h&&n<=p&&a>=m&&a<=y}return!1},W2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JE=function(e){var r=E$(E$({},W2e),e),n=k.useRef(),a=k.useState(-1),i=B2e(a,2),s=i[0],c=i[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,x=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,E=r.isAnimationActive,I=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var R=fr("recharts-rectangle",x);return I?se.createElement(Jo,{canBegin:s>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:S,animationEasing:T,isActive:I},function(L){var O=L.width,M=L.height,N=L.x,A=L.y;return se.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:E,easing:T},se.createElement("path",bb({},zt(r,!0),{className:R,d:j$(N,A,O,M,y),ref:n})))}):se.createElement("path",bb({},zt(r,!0),{className:R,d:j$(d,h,p,m,y)}))},K2e=["points","className","baseLinePoints","connectNulls"];function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mh.apply(this,arguments)}function Q2e(t,e){if(t==null)return{};var r=X2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function X2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k$(t){return ewe(t)||J2e(t)||Z2e(t)||Y2e()}function Y2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2e(t,e){if(t){if(typeof t=="string")return IN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IN(t,e)}}function J2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ewe(t){if(Array.isArray(t))return IN(t)}function IN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C$=function(e){return e&&e.x===+e.x&&e.y===+e.y},twe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){C$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),C$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tm=function(e,r){var n=twe(e);r&&(n=[n.reduce(function(i,s){return[].concat(k$(i),k$(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},rwe=function(e,r,n){var a=Tm(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Tm(r.reverse(),n).slice(1))},FK=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,s=Q2e(e,K2e);if(!r||!r.length)return null;var c=fr("recharts-polygon",n);if(a&&a.length){var d=s.stroke&&s.stroke!=="none",h=rwe(r,a,i);return se.createElement("g",{className:c},se.createElement("path",mh({},zt(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:h})),d?se.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(r,i)})):null,d?se.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(a,i)})):null)}var p=Tm(r,i);return se.createElement("path",mh({},zt(s,!0),{fill:p.slice(-1)==="Z"?s.fill:"none",className:c,d:p}))};function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RN.apply(this,arguments)}var sw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,s=fr("recharts-dot",i);return r===+r&&n===+n&&a===+a?k.createElement("circle",RN({},zt(e,!1),Vx(e),{className:s,cx:r,cy:n,r:a})):null};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}var nwe=["x","y","top","left","width","height","className"];function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MN.apply(this,arguments)}function O$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function awe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(r),!0).forEach(function(n){iwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iwe(t,e,r){return e=swe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function swe(t){var e=owe(t,"string");return Ng(e)=="symbol"?e:e+""}function owe(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lwe(t,e){if(t==null)return{};var r=cwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var uwe=function(e,r,n,a,i,s){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},dwe=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.top,c=s===void 0?0:s,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,x=y===void 0?0:y,T=e.className,S=lwe(e,nwe),w=awe({x:n,y:i,top:c,left:h,width:m,height:x},S);return!vt(n)||!vt(i)||!vt(m)||!vt(x)||!vt(c)||!vt(h)?null:se.createElement("path",MN({},zt(w,!0),{className:fr("recharts-cross",T),d:uwe(n,i,m,x,c,h)}))},hwe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function fwe(t,e){if(t==null)return{};var r=pwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oc.apply(this,arguments)}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){mwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mwe(t,e,r){return e=gwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gwe(t){var e=ywe(t,"string");return Eg(e)=="symbol"?e:e+""}function ywe(t,e){if(Eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vwe=function(e,r,n,a){var i="";return a.forEach(function(s,c){var d=vn(r,n,e,s);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},xwe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=jg({stroke:"#ccc"},zt(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(h){var p=vn(r,n,a,h),m=vn(r,n,i,h);return se.createElement("line",oc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},bwe=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,s=jg(jg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return se.createElement("circle",oc({},s,{className:fr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},wwe=function(e){var r=e.radius,n=e.index,a=jg(jg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return se.createElement("path",oc({},a,{className:fr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:vwe(r,e.cx,e.cy,e.polarAngles)}))},Swe=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var s=i;return n==="circle"?se.createElement(bwe,oc({key:s},e,{radius:a,index:i})):se.createElement(wwe,oc({key:s},e,{radius:a,index:i}))}))},qK=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,x=y===void 0?!0:y,T=fwe(e,hwe);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(xwe,oc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},T)),se.createElement(Swe,oc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},T)))};qK.displayName="PolarGrid";var Q_,R$;function _we(){if(R$)return Q_;R$=1;var t=tw(),e=nK(),r=sl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return Q_=n,Q_}var Twe=_we();const Awe=Kr(Twe);var X_,M$;function Nwe(){if(M$)return X_;M$=1;var t=tw(),e=sl(),r=aK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return X_=n,X_}var Ewe=Nwe();const jwe=Kr(Ewe);var kwe=["cx","cy","angle","ticks","axisLine"],Cwe=["ticks","tick","angle","tickFormatter","stroke"];function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Am.apply(this,arguments)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){ow(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D$(t,e){if(t==null)return{};var r=Owe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Owe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Iwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GK(n.key),n)}}function Rwe(t,e,r){return e&&L$(t.prototype,e),r&&L$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mwe(t,e,r){return e=wb(e),Pwe(t,HK()?Reflect.construct(e,r||[],wb(t).constructor):e.apply(t,r))}function Pwe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dwe(t)}function Dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HK=function(){return!!t})()}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wb(t)}function Lwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PN(t,e)}function PN(t,e){return PN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PN(t,e)}function ow(t,e,r){return e=GK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GK(t){var e=Bwe(t,"string");return lf(e)=="symbol"?e:e+""}function Bwe(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w1=(function(t){function e(){return Iwe(this,e),Mwe(this,e,arguments)}return Lwe(e,t),Rwe(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,c=i.cx,d=i.cy;return vn(c,d,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=Awe(c,function(p){return p.coordinate||0}),h=jwe(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,h=D$(n,kwe),p=c.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),m=vn(a,i,p[0],s),y=vn(a,i,p[1],s),x=pd(pd(pd({},zt(h,!1)),{},{fill:"none"},zt(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return se.createElement("line",Am({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=D$(a,Cwe),m=this.getTickTextAnchor(),y=zt(p,!1),x=zt(s,!1),T=i.map(function(S,w){var E=n.getTickValueCoord(S),I=pd(pd(pd(pd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},y),{},{stroke:"none",fill:h},x),{},{index:w},E),{},{payload:S});return se.createElement(Vr,Am({className:fr("recharts-polar-radius-axis-tick",OK(s)),key:"tick-".concat(S.coordinate)},t0(n.props,S,w)),e.renderTickItem(s,I,d?d(S.value,w):S.value))});return se.createElement(Vr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:se.createElement(Vr,{className:fr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),di.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):nr(n)?s=n(a):s=se.createElement(tf,Am({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])})(k.PureComponent);ow(w1,"displayName","PolarRadiusAxis");ow(w1,"axisType","radiusAxis");ow(w1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ad.apply(this,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function md(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){lw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KK(n.key),n)}}function Uwe(t,e,r){return e&&$$(t.prototype,e),r&&$$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zwe(t,e,r){return e=Sb(e),Vwe(t,WK()?Reflect.construct(e,r||[],Sb(t).constructor):e.apply(t,r))}function Vwe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fwe(t)}function Fwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WK=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sb(t)}function qwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DN(t,e)}function DN(t,e){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},DN(t,e)}function lw(t,e,r){return e=KK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=Hwe(t,"string");return cf(e)=="symbol"?e:e+""}function Hwe(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gwe=Math.PI/180,U$=1e-5,S1=(function(t){function e(){return $we(this,e),zwe(this,e,arguments)}return qwe(e,t),Uwe(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=vn(i,s,c,n.coordinate),y=vn(i,s,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*Gwe),s;return i>U$?s=a==="outer"?"start":"end":i<-U$?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,h=md(md({},zt(this.props,!1)),{},{fill:"none"},zt(c,!1));if(d==="circle")return se.createElement(sw,Ad({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:s}));var p=this.props.ticks,m=p.map(function(y){return vn(a,i,s,y.coordinate)});return se.createElement(FK,Ad({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=zt(this.props,!1),m=zt(s,!1),y=md(md({},p),{},{fill:"none"},zt(c,!1)),x=i.map(function(T,S){var w=n.getTickLineCoord(T),E=n.getTickTextAnchor(T),I=md(md(md({textAnchor:E},p),{},{stroke:"none",fill:h},m),{},{index:S,payload:T,x:w.x2,y:w.y2});return se.createElement(Vr,Ad({className:fr("recharts-polar-angle-axis-tick",OK(s)),key:"tick-".concat(T.coordinate)},t0(n.props,T,S)),c&&se.createElement("line",Ad({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,I,d?d(T.value,S):T.value))});return se.createElement(Vr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Vr,{className:fr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):nr(n)?s=n(a):s=se.createElement(tf,Ad({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])})(k.PureComponent);lw(S1,"displayName","PolarAngleAxis");lw(S1,"axisType","angleAxis");lw(S1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Y_,z$;function Wwe(){if(z$)return Y_;z$=1;var t=rW(),e=t(Object.getPrototypeOf,Object);return Y_=e,Y_}var Z_,V$;function Kwe(){if(V$)return Z_;V$=1;var t=hc(),e=Wwe(),r=fc(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,c=i.hasOwnProperty,d=s.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return Z_=h,Z_}var Qwe=Kwe();const Xwe=Kr(Qwe);var J_,F$;function Ywe(){if(F$)return J_;F$=1;var t=hc(),e=fc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return J_=n,J_}var Zwe=Ywe();const Jwe=Kr(Zwe);function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_b.apply(this,arguments)}function e4e(t,e){return a4e(t)||n4e(t,e)||r4e(t,e)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r4e(t,e){if(t){if(typeof t=="string")return q$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q$(t,e)}}function q$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function a4e(t){if(Array.isArray(t))return t}function H$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function G$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(r),!0).forEach(function(n){i4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i4e(t,e,r){return e=s4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s4e(t){var e=o4e(t,"string");return kg(e)=="symbol"?e:e+""}function o4e(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W$=function(e,r,n,a,i){var s=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+i),c+="L ".concat(e+n-s/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},l4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},c4e=function(e){var r=G$(G$({},l4e),e),n=k.useRef(),a=k.useState(-1),i=e4e(a,2),s=i[0],c=i[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&c(R)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,x=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,E=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var I=fr("recharts-trapezoid",x);return E?se.createElement(Jo,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:S,animationEasing:T,isActive:E},function(R){var L=R.upperWidth,O=R.lowerWidth,M=R.height,N=R.x,A=R.y;return se.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},se.createElement("path",_b({},zt(r,!0),{className:I,d:W$(N,A,L,O,M),ref:n})))}):se.createElement("g",null,se.createElement("path",_b({},zt(r,!0),{className:I,d:W$(d,h,p,m,y)})))},u4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function d4e(t,e){if(t==null)return{};var r=h4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Tb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(n){f4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f4e(t,e,r){return e=p4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p4e(t){var e=m4e(t,"string");return Cg(e)=="symbol"?e:e+""}function m4e(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g4e(t,e){return Tb(Tb({},e),t)}function y4e(t,e){return t==="symbols"}function Q$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(JE,r);case"trapezoid":return se.createElement(c4e,r);case"sector":return se.createElement(PK,r);case"symbols":if(y4e(e))return se.createElement(H2,r);break;default:return null}}function v4e(t){return k.isValidElement(t)?t.props:t}function LN(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?g4e:n,i=t.activeClassName,s=i===void 0?"recharts-active-shape":i,c=t.isActive,d=d4e(t,u4e),h;if(k.isValidElement(e))h=k.cloneElement(e,Tb(Tb({},d),v4e(e)));else if(nr(e))h=e(d);else if(Xwe(e)&&!Jwe(e)){var p=a(e,d);h=se.createElement(Q$,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(Q$,{shapeType:r,elementProps:m})}return c?se.createElement(Vr,{className:s},h):h}function cw(t,e){return e!=null&&"trapezoids"in t.props}function uw(t,e){return e!=null&&"sectors"in t.props}function Og(t,e){return e!=null&&"points"in t.props}function x4e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function b4e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function w4e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function S4e(t,e){var r;return cw(t,e)?r=x4e:uw(t,e)?r=b4e:Og(t,e)&&(r=w4e),r}function _4e(t,e){var r;return cw(t,e)?r="trapezoids":uw(t,e)?r="sectors":Og(t,e)&&(r="points"),r}function T4e(t,e){if(cw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(uw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Og(t,e)?e.payload:{}}function A4e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=_4e(r,e),i=T4e(r,e),s=n.filter(function(d,h){var p=x1(i,d),m=r.props[a].filter(function(T){var S=S4e(r,e);return S(T,e)}),y=r.props[a].indexOf(m[m.length-1]),x=h===y;return p&&x}),c=n.indexOf(s[s.length-1]);return c}var eT,X$;function N4e(){if(X$)return eT;X$=1;function t(e){return e&&e.length?e[0]:void 0}return eT=t,eT}var tT,Y$;function E4e(){return Y$||(Y$=1,tT=N4e()),tT}var j4e=E4e();const k4e=Kr(j4e);var C4e=["key"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function O4e(t,e){if(t==null)return{};var r=I4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function I4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ab(){return Ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ab.apply(this,arguments)}function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ii(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){Ml(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XK(n.key),n)}}function M4e(t,e,r){return e&&J$(t.prototype,e),r&&J$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P4e(t,e,r){return e=Nb(e),D4e(t,QK()?Reflect.construct(e,r||[],Nb(t).constructor):e.apply(t,r))}function D4e(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L4e(t)}function L4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QK=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(t)}function B4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BN(t,e)}function BN(t,e){return BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BN(t,e)}function Ml(t,e,r){return e=XK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XK(t){var e=$4e(t,"string");return uf(e)=="symbol"?e:e+""}function $4e(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _1=(function(t){function e(){var r;R4e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=P4e(this,e,[].concat(a)),Ml(r,"state",{isAnimationFinished:!1}),Ml(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),nr(s)&&s()}),Ml(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),nr(s)&&s()}),Ml(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),Ml(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return B4e(e,t),M4e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,s=a.dataKey,c=zt(this.props,!1),d=zt(i,!0),h=n.map(function(p,m){var y=Ii(Ii(Ii({key:"dot-".concat(m),r:3},c),d),{},{dataKey:s,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,y)});return se.createElement(Vr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,s=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,Ii(Ii({},this.props),{},{points:n})):nr(i)?p=i(Ii(Ii({},this.props),{},{points:n})):p=se.createElement(FK,Ab({},zt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(Vr,{className:"recharts-radar-polygon"},p,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,T=m&&m.length/i.length,S=i.map(function(w,E){var I=m&&m[Math.floor(E*T)];if(I){var R=Zi(I.x,w.x),L=Zi(I.y,w.y);return Ii(Ii({},w),{},{x:R(x),y:L(x)})}var O=Zi(w.cx,w.x),M=Zi(w.cy,w.y);return Ii(Ii({},w),{},{x:O(x),y:M(x)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!s&&(!c||!x1(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,s=n.points,c=n.isAnimationActive;if(a||!s||!s.length)return null;var d=this.state.isAnimationFinished,h=fr("recharts-radar",i);return se.createElement(Vr,{className:h},this.renderPolygon(),(!c||d)&&Ql.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(nr(n))i=n(a);else{var s=a.key,c=O4e(a,C4e);i=se.createElement(sw,Ab({},c,{key:s,className:fr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(k.PureComponent);Ml(_1,"displayName","Radar");Ml(_1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ml(_1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,s=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(y,x){var T=pi(y,r.dataKey,x),S=pi(y,a),w=r.scale(T)+p,E=Array.isArray(S)?RK(S):S,I=or(E)?void 0:e.scale(E);Array.isArray(S)&&S.length>=2&&(d=!0),h.push(Ii(Ii({},vn(s,c,I,w)),{},{name:T,value:S,cx:s,cy:c,radius:I,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var x=k4e(y.value),T=or(x)?void 0:e.scale(x);m.push(Ii(Ii({},y),{},{radius:T},vn(s,c,T,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var rT,eU;function U4e(){if(eU)return rT;eU=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[s?d:++c]=n,n+=i;return h}return rT=r,rT}var nT,tU;function YK(){if(tU)return nT;tU=1;var t=vW(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return nT=n,nT}var aT,rU;function z4e(){if(rU)return aT;rU=1;var t=U4e(),e=K2(),r=YK();function n(a){return function(i,s,c){return c&&typeof c!="number"&&e(i,s,c)&&(s=c=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),c=c===void 0?i<s?1:-1:r(c),t(i,s,c,a)}}return aT=n,aT}var iT,nU;function V4e(){if(nU)return iT;nU=1;var t=z4e(),e=t();return iT=e,iT}var F4e=V4e();const Eb=Kr(F4e);function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function aU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(r),!0).forEach(function(n){ZK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZK(t,e,r){return e=q4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q4e(t){var e=H4e(t,"string");return Ig(e)=="symbol"?e:e+""}function H4e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G4e=["Webkit","Moz","O","ms"],W4e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=G4e.reduce(function(i,s){return iU(iU({},i),{},ZK({},s+n,r))},{});return a[e]=r,a};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function jb(){return jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jb.apply(this,arguments)}function sU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(r),!0).forEach(function(n){bs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eQ(n.key),n)}}function Q4e(t,e,r){return e&&oU(t.prototype,e),r&&oU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function X4e(t,e,r){return e=kb(e),Y4e(t,JK()?Reflect.construct(e,r||[],kb(t).constructor):e.apply(t,r))}function Y4e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z4e(t)}function Z4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JK=function(){return!!t})()}function kb(t){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kb(t)}function J4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$N(t,e)}function $N(t,e){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$N(t,e)}function bs(t,e,r){return e=eQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eQ(t){var e=e5e(t,"string");return df(e)=="symbol"?e:e+""}function e5e(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var t5e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=wm().domain(Eb(0,d)).range([i,i+s-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},lU=function(e){return e.changedTouches&&!!e.changedTouches.length},hf=(function(t){function e(r){var n;return K4e(this,e),n=X4e(this,e,[r]),bs(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),bs(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),bs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,c=a.startIndex;s==null||s({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),bs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),bs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),bs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),bs(n,"handleSlideDragStart",function(a){var i=lU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return J4e(e,t),Q4e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),y=Math.max(a,i),x=e.getIndexInRange(s,m),T=e.getIndexInRange(s,y);return{startIndex:x-x%d,endIndex:T===p?p:T-T%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,c=a.dataKey,d=pi(i[n],c,n);return nr(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,x=d.endIndex,T=d.onChange,S=n.pageX-i;S>0?S=Math.min(S,h+p-m-c,h+p-m-s):S<0&&(S=Math.max(S,h-s,h-c));var w=this.getIndex({startX:s+S,endX:c+S});(w.startIndex!==y||w.endIndex!==x)&&T&&T(w),this.setState({startX:s+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=lU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[s],p=this.props,m=p.x,y=p.width,x=p.travellerWidth,T=p.onChange,S=p.gap,w=p.data,E={startX:this.state.startX,endX:this.state.endX},I=n.pageX-i;I>0?I=Math.min(I,m+y-x-h):I<0&&(I=Math.max(I,m-h)),E[s]=h+I;var R=this.getIndex(E),L=R.startIndex,O=R.endIndex,M=function(){var A=w.length-1;return s==="startX"&&(c>d?L%S===0:O%S===0)||c<d&&O===A||s==="endX"&&(c>d?O%S===0:L%S===0)||c>d&&O===A};this.setState(bs(bs({},s,h+I),"brushMoveStartX",n.pageX),function(){T&&M()&&T(R)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,c=s.scaleValues,d=s.startX,h=s.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var x=c[y];a==="startX"&&x>=h||a==="endX"&&x<=d||this.setState(bs({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=k.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:s,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,x=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,E=Math.max(n,this.props.x),I=sT(sT({},zt(this.props,!1)),{},{x:E,y:h,width:p,height:m}),R=x||"Min value: ".concat((i=T[S])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return se.createElement(Vr,{tabIndex:0,role:"slider","aria-label":R,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(O){["ArrowLeft","ArrowRight"].includes(O.key)&&(O.preventDefault(),O.stopPropagation(),c.handleTravellerMoveKeyboard(O.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,I))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:s,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,x=5,T={pointerEvents:"none",fill:h};return se.createElement(Vr,{className:"recharts-brush-texts"},se.createElement(tf,jb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-x,y:s+c/2},T),this.getTextOfTick(a)),se.createElement(tf,jb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+x,y:s+c/2},T),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,x=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,E=y.isTravellerMoving,I=y.isTravellerFocused;if(!a||!a.length||!vt(c)||!vt(d)||!vt(h)||!vt(p)||h<=0||p<=0)return null;var R=fr("recharts-brush",i),L=se.Children.count(s)===1,O=W4e("userSelect","none");return se.createElement(Vr,{className:R,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:O},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(x,T),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||E||I||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:s,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+s-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):nr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return sT({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s},i&&i.length?t5e({data:i,width:s,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+s-d]);var y=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,c=i-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>a?c=d:s=d}return a>=n[c]?c:s}}])})(k.PureComponent);bs(hf,"displayName","Brush");bs(hf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oT,cU;function r5e(){if(cU)return oT;cU=1;var t=TE();function e(r,n){var a;return t(r,function(i,s,c){return a=n(i,s,c),!a}),!!a}return oT=e,oT}var lT,uU;function n5e(){if(uU)return lT;uU=1;var t=QG(),e=sl(),r=r5e(),n=ss(),a=K2();function i(s,c,d){var h=n(s)?t:r;return d&&a(s,c,d)&&(c=void 0),h(s,e(c,3))}return lT=i,lT}var a5e=n5e();const i5e=Kr(a5e);var Ko=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},cT,dU;function s5e(){if(dU)return cT;dU=1;var t=fW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return cT=e,cT}var uT,hU;function o5e(){if(hU)return uT;hU=1;var t=s5e(),e=dW(),r=sl();function n(a,i){var s={};return i=r(i,3),e(a,function(c,d,h){t(s,d,i(c,d,h))}),s}return uT=n,uT}var l5e=o5e();const c5e=Kr(l5e);var dT,fU;function u5e(){if(fU)return dT;fU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return dT=t,dT}var hT,pU;function d5e(){if(pU)return hT;pU=1;var t=TE();function e(r,n){var a=!0;return t(r,function(i,s,c){return a=!!n(i,s,c),a}),a}return hT=e,hT}var fT,mU;function h5e(){if(mU)return fT;mU=1;var t=u5e(),e=d5e(),r=sl(),n=ss(),a=K2();function i(s,c,d){var h=n(s)?t:e;return d&&a(s,c,d)&&(c=void 0),h(s,r(c,3))}return fT=i,fT}var f5e=h5e();const tQ=Kr(f5e);var p5e=["x","y"];function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UN.apply(this,arguments)}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){m5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m5e(t,e,r){return e=g5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g5e(t){var e=y5e(t,"string");return Rg(e)=="symbol"?e:e+""}function y5e(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v5e(t,e){if(t==null)return{};var r=x5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b5e(t,e){var r=t.x,n=t.y,a=v5e(t,p5e),i="".concat(r),s=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),y=parseInt(m,10);return Yp(Yp(Yp(Yp(Yp({},e),a),s?{x:s}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function yU(t){return se.createElement(LN,UN({shapeType:"rectangle",propTransformer:b5e,activeClassName:"recharts-active-bar"},t))}var w5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=vt(n)||T0e(n);return i?e(n,a):(i||n0(),r)}},S5e=["value","background"],rQ;function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function _5e(t,e){if(t==null)return{};var r=T5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function T5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cb.apply(this,arguments)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){uu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aQ(n.key),n)}}function N5e(t,e,r){return e&&xU(t.prototype,e),r&&xU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E5e(t,e,r){return e=Ob(e),j5e(t,nQ()?Reflect.construct(e,r||[],Ob(t).constructor):e.apply(t,r))}function j5e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k5e(t)}function k5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}function C5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zN(t,e)}function zN(t,e){return zN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zN(t,e)}function uu(t,e,r){return e=aQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aQ(t){var e=O5e(t,"string");return ff(e)=="symbol"?e:e+""}function O5e(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T1=(function(t){function e(){var r;A5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=E5e(this,e,[].concat(a)),uu(r,"state",{isAnimationFinished:!1}),uu(r,"id",f1("recharts-bar-")),uu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),uu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return C5e(e,t),N5e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=zt(this.props,!1);return n&&n.map(function(m,y){var x=y===d,T=x?h:s,S=_a(_a(_a({},p),m),{},{isActive:x,option:T,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Vr,Cb({className:"recharts-bar-rectangle"},t0(a.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),se.createElement(yU,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=this.state.prevData;return se.createElement(Jo,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var T=x.t,S=i.map(function(w,E){var I=y&&y[E];if(I){var R=Zi(I.x,w.x),L=Zi(I.y,w.y),O=Zi(I.width,w.width),M=Zi(I.height,w.height);return _a(_a({},w),{},{x:R(T),y:L(T),width:O(T),height:M(T)})}if(s==="horizontal"){var N=Zi(0,w.height),A=N(T);return _a(_a({},w),{},{y:w.y+w.height-A,height:A})}var j=Zi(0,w.width),z=j(T);return _a(_a({},w),{},{width:z})});return se.createElement(Vr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!x1(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,c=a.activeIndex,d=zt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,y=_5e(h,S5e);if(!m)return null;var x=_a(_a(_a(_a(_a({},y),{},{fill:"#eee"},m),d),t0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(yU,Cb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=ks(p,b1);if(!m)return null;var y=h==="vertical"?s[0].height/2:s[0].width/2,x=function(w,E){var I=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:I,errorVal:pi(w,E)}},T={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Vr,T,m.map(function(S){return se.cloneElement(S,{key:"error-bar-".concat(a,"-").concat(S.props.dataKey),data:s,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,x=n.isAnimationActive,T=n.background,S=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=fr("recharts-bar",s),I=c&&c.allowDataOverflow,R=d&&d.allowDataOverflow,L=I||R,O=or(S)?this.id:S;return se.createElement(Vr,{className:E},I||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(O)},se.createElement("rect",{x:I?h:h-m/2,y:R?p:p-y/2,width:I?m:m*2,height:R?y:y*2}))):null,se.createElement(Vr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(O,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,O),(!x||w)&&Ql.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(k.PureComponent);rQ=T1;uu(T1,"displayName","Bar");uu(T1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uu(T1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,x=$ve(n,r);if(!x)return null;var T=e.layout,S=r.type.defaultProps,w=S!==void 0?_a(_a({},S),r.props):r.props,E=w.dataKey,I=w.children,R=w.minPointSize,L=T==="horizontal"?s:i,O=h?L.scale.domain():null,M=Gve({numericAxis:L}),N=ks(I,EE),A=m.map(function(j,z){var B,F,U,X,W,H;h?B=Uve(h[p+z],O):(B=pi(j,E),Array.isArray(B)||(B=[M,B]));var Z=w5e(R,rQ.defaultProps.minPointSize)(B[1],z);if(T==="horizontal"){var ie,fe=[s.scale(B[0]),s.scale(B[1])],me=fe[0],K=fe[1];F=qB({axis:i,ticks:c,bandSize:a,offset:x.offset,entry:j,index:z}),U=(ie=K??me)!==null&&ie!==void 0?ie:void 0,X=x.size;var te=me-K;if(W=Number.isNaN(te)?0:te,H={x:F,y:s.y,width:X,height:s.height},Math.abs(Z)>0&&Math.abs(W)<Math.abs(Z)){var re=vo(W||Z)*(Math.abs(Z)-Math.abs(W));U-=re,W+=re}}else{var Ne=[i.scale(B[0]),i.scale(B[1])],ae=Ne[0],xe=Ne[1];if(F=ae,U=qB({axis:s,ticks:d,bandSize:a,offset:x.offset,entry:j,index:z}),X=xe-ae,W=x.size,H={x:i.x,y:U,width:i.width,height:W},Math.abs(Z)>0&&Math.abs(X)<Math.abs(Z)){var ye=vo(X||Z)*(Math.abs(Z)-Math.abs(X));X+=ye}}return _a(_a(_a({},j),{},{x:F,y:U,width:X,height:W,value:h?B:B[1],payload:j,background:H},N&&N[z]&&N[z].props),{},{tooltipPayload:[kK(r,j)],tooltipPosition:{x:F+X/2,y:U+W/2}})});return _a({data:A,layout:T},y)});function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function I5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iQ(n.key),n)}}function R5e(t,e,r){return e&&bU(t.prototype,e),r&&bU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){dw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dw(t,e,r){return e=iQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iQ(t){var e=M5e(t,"string");return Mg(e)=="symbol"?e:e+""}function M5e(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P5e=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!ws(h,T1);return p.reduce(function(x,T){var S=r[T],w=S.orientation,E=S.domain,I=S.padding,R=I===void 0?{}:I,L=S.mirror,O=S.reversed,M="".concat(w).concat(L?"Mirror":""),N,A,j,z,B;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var F=E[1]-E[0],U=1/0,X=S.categoricalDomain.sort(j0e);if(X.forEach(function(Ne,ae){ae>0&&(U=Math.min((Ne||0)-(X[ae-1]||0),U))}),Number.isFinite(U)){var W=U/F,H=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(N=W*H/2),S.padding==="no-gap"){var Z=xo(e.barCategoryGap,W*H),ie=W*H/2;N=ie-Z-(ie-Z)/H*Z}}}a==="xAxis"?A=[n.left+(R.left||0)+(N||0),n.left+n.width-(R.right||0)-(N||0)]:a==="yAxis"?A=d==="horizontal"?[n.top+n.height-(R.bottom||0),n.top+(R.top||0)]:[n.top+(R.top||0)+(N||0),n.top+n.height-(R.bottom||0)-(N||0)]:A=S.range,O&&(A=[A[1],A[0]]);var fe=AK(S,i,y),me=fe.scale,K=fe.realScaleType;me.domain(E).range(A),NK(me);var te=EK(me,go(go({},S),{},{realScaleType:K}));a==="xAxis"?(B=w==="top"&&!L||w==="bottom"&&L,j=n.left,z=m[M]-B*S.height):a==="yAxis"&&(B=w==="left"&&!L||w==="right"&&L,j=m[M]-B*S.width,z=n.top);var re=go(go(go({},S),te),{},{realScaleType:K,x:j,y:z,scale:me,width:a==="xAxis"?n.width:S.width,height:a==="yAxis"?n.height:S.height});return re.bandSize=fb(re,te),!S.hide&&a==="xAxis"?m[M]+=(B?-1:1)*re.height:S.hide||(m[M]+=(B?-1:1)*re.width),go(go({},x),{},dw({},T,re))},{})},sQ=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},D5e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return sQ({x:r,y:n},{x:a,y:i})},oQ=(function(){function t(e){I5e(this,t),this.scale=e}return R5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();dw(oQ,"EPS",1e-4);var ej=function(e){var r=Object.keys(e).reduce(function(n,a){return go(go({},n),{},dw({},a,oQ.create(e[a])))},{});return go(go({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,c=i.position;return c5e(a,function(d,h){return r[h].apply(d,{bandAware:s,position:c})})},isInRange:function(a){return tQ(a,function(i,s){return r[s].isInRange(i)})}})};function L5e(t){return(t%180+180)%180}var B5e=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=L5e(a),s=i*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},pT,SU;function $5e(){if(SU)return pT;SU=1;var t=sl(),e=p1(),r=G2();function n(a){return function(i,s,c){var d=Object(i);if(!e(i)){var h=t(s,3);i=r(i),s=function(m){return h(d[m],m,d)}}var p=a(i,s,c);return p>-1?d[h?i[p]:p]:void 0}}return pT=n,pT}var mT,_U;function U5e(){if(_U)return mT;_U=1;var t=YK();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return mT=e,mT}var gT,TU;function z5e(){if(TU)return gT;TU=1;var t=sW(),e=sl(),r=U5e(),n=Math.max;function a(i,s,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(s,3),h)}return gT=a,gT}var yT,AU;function V5e(){if(AU)return yT;AU=1;var t=$5e(),e=z5e(),r=t(e);return yT=r,yT}var F5e=V5e();const q5e=Kr(F5e);var H5e=SG();const G5e=Kr(H5e);var W5e=G5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),tj=k.createContext(void 0),rj=k.createContext(void 0),lQ=k.createContext(void 0),cQ=k.createContext({}),uQ=k.createContext(void 0),dQ=k.createContext(0),hQ=k.createContext(0),NU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=e.clipPathId,c=e.children,d=e.width,h=e.height,p=W5e(i);return se.createElement(tj.Provider,{value:n},se.createElement(rj.Provider,{value:a},se.createElement(cQ.Provider,{value:i},se.createElement(lQ.Provider,{value:p},se.createElement(uQ.Provider,{value:s},se.createElement(dQ.Provider,{value:h},se.createElement(hQ.Provider,{value:d},c)))))))},K5e=function(){return k.useContext(uQ)},fQ=function(e){var r=k.useContext(tj);r==null&&n0();var n=r[e];return n==null&&n0(),n},Q5e=function(){var e=k.useContext(tj);return iu(e)},X5e=function(){var e=k.useContext(rj),r=q5e(e,function(n){return tQ(n.domain,Number.isFinite)});return r||iu(e)},pQ=function(e){var r=k.useContext(rj);r==null&&n0();var n=r[e];return n==null&&n0(),n},Y5e=function(){var e=k.useContext(lQ);return e},Z5e=function(){return k.useContext(cQ)},nj=function(){return k.useContext(hQ)},aj=function(){return k.useContext(dQ)};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function J5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gQ(n.key),n)}}function t3e(t,e,r){return e&&e3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r3e(t,e,r){return e=Ib(e),n3e(t,mQ()?Reflect.construct(e,r||[],Ib(t).constructor):e.apply(t,r))}function n3e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a3e(t)}function a3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mQ=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(t)}function i3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VN(t,e)}function VN(t,e){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VN(t,e)}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){ij(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ij(t,e,r){return e=gQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gQ(t){var e=s3e(t,"string");return pf(e)=="symbol"?e:e+""}function s3e(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function o3e(t,e){return d3e(t)||u3e(t,e)||c3e(t,e)||l3e()}function l3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c3e(t,e){if(t){if(typeof t=="string")return kU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kU(t,e)}}function kU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function d3e(t){if(Array.isArray(t))return t}function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FN.apply(this,arguments)}var h3e=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):nr(e)?n=e(r):n=se.createElement("line",FN({},r,{className:"recharts-reference-line-line"})),n},f3e=function(e,r,n,a,i,s,c,d,h){var p=i.x,m=i.y,y=i.width,x=i.height;if(n){var T=h.y,S=e.y.apply(T,{position:s});if(Ko(h,"discard")&&!e.y.isInRange(S))return null;var w=[{x:p+y,y:S},{x:p,y:S}];return d==="left"?w.reverse():w}if(r){var E=h.x,I=e.x.apply(E,{position:s});if(Ko(h,"discard")&&!e.x.isInRange(I))return null;var R=[{x:I,y:m+x},{x:I,y:m}];return c==="top"?R.reverse():R}if(a){var L=h.segment,O=L.map(function(M){return e.apply(M,{position:s})});return Ko(h,"discard")&&i5e(O,function(M){return!e.isInRange(M)})?null:O}return null};function p3e(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,h=K5e(),p=fQ(a),m=pQ(i),y=Y5e();if(!h||!y)return null;Wl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=ej({x:p.scale,y:m.scale}),T=La(e),S=La(r),w=n&&n.length===2,E=f3e(x,T,S,w,y,t.position,p.orientation,m.orientation,t);if(!E)return null;var I=o3e(E,2),R=I[0],L=R.x,O=R.y,M=I[1],N=M.x,A=M.y,j=Ko(t,"hidden")?"url(#".concat(h,")"):void 0,z=jU(jU({clipPath:j},zt(t,!0)),{},{x1:L,y1:O,x2:N,y2:A});return se.createElement(Vr,{className:fr("recharts-reference-line",c)},h3e(s,z),di.renderCallByParent(t,D5e({x1:L,y1:O,x2:N,y2:A})))}var sj=(function(t){function e(){return J5e(this,e),r3e(this,e,arguments)}return i3e(e,t),t3e(e,[{key:"render",value:function(){return se.createElement(p3e,this.props)}}])})(se.Component);ij(sj,"displayName","ReferenceLine");ij(sj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qN.apply(this,arguments)}function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function CU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(r),!0).forEach(function(n){hw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vQ(n.key),n)}}function y3e(t,e,r){return e&&g3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v3e(t,e,r){return e=Rb(e),x3e(t,yQ()?Reflect.construct(e,r||[],Rb(t).constructor):e.apply(t,r))}function x3e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b3e(t)}function b3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yQ=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(t)}function w3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HN(t,e)}function HN(t,e){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HN(t,e)}function hw(t,e,r){return e=vQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vQ(t){var e=S3e(t,"string");return mf(e)=="symbol"?e:e+""}function S3e(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _3e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,s=ej({x:a.scale,y:i.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return Ko(e,"discard")&&!s.isInRange(c)?null:c},fw=(function(t){function e(){return m3e(this,e),v3e(this,e,arguments)}return w3e(e,t),y3e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,h=La(a),p=La(i);if(Wl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=_3e(this.props);if(!m)return null;var y=m.x,x=m.y,T=this.props,S=T.shape,w=T.className,E=Ko(this.props,"hidden")?"url(#".concat(d,")"):void 0,I=OU(OU({clipPath:E},zt(this.props,!0)),{},{cx:y,cy:x});return se.createElement(Vr,{className:fr("recharts-reference-dot",w)},e.renderDot(S,I),di.renderCallByParent(this.props,{x:y-s,y:x-s,width:2*s,height:2*s}))}}])})(se.Component);hw(fw,"displayName","ReferenceDot");hw(fw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});hw(fw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):nr(t)?r=t(e):r=se.createElement(sw,qN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GN.apply(this,arguments)}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bQ(n.key),n)}}function N3e(t,e,r){return e&&A3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E3e(t,e,r){return e=Mb(e),j3e(t,xQ()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function j3e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k3e(t)}function k3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function C3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WN(t,e)}function WN(t,e){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WN(t,e)}function pw(t,e,r){return e=bQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bQ(t){var e=O3e(t,"string");return gf(e)=="symbol"?e:e+""}function O3e(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I3e=function(e,r,n,a,i){var s=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var y=ej({x:p.scale,y:m.scale}),x={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Ko(i,"discard")&&(!y.isInRange(x)||!y.isInRange(T))?null:sQ(x,T)},mw=(function(t){function e(){return T3e(this,e),E3e(this,e,arguments)}return C3e(e,t),N3e(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Wl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=La(a),y=La(i),x=La(s),T=La(c),S=this.props.shape;if(!m&&!y&&!x&&!T&&!S)return null;var w=I3e(m,y,x,T,this.props);if(!w&&!S)return null;var E=Ko(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(Vr,{className:fr("recharts-reference-area",d)},e.renderRect(S,RU(RU({clipPath:E},zt(this.props,!0)),w)),di.renderCallByParent(this.props,w))}}])})(se.Component);pw(mw,"displayName","ReferenceArea");pw(mw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});pw(mw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):nr(t)?r=t(e):r=se.createElement(JE,GN({},e,{className:"recharts-reference-area-rect"})),r});function wQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function R3e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return B5e(n,r)}function M3e(t,e,r){var n=r==="width",a=t.x,i=t.y,s=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+s:i+c}:{start:n?a+s:i+c,end:n?a:i}}function Pb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function P3e(t,e){return wQ(t,e+1)}function D3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=e.start,c=e.end,d=0,h=1,p=s,m=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:wQ(n,h)};var S=d,w,E=function(){return w===void 0&&(w=r(T,S)),w},I=T.coordinate,R=d===0||Pb(t,I,E,p,c);R||(d=0,p=s,h+=1),R&&(p=I+t*(E()/2+a),d+=h)},y;h<=i.length;)if(y=m(),y)return y.v;return[]}function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){L3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L3e(t,e,r){return e=B3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B3e(t){var e=$3e(t,"string");return Pg(e)=="symbol"?e:e+""}function $3e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=i.length,c=e.start,d=e.end,h=function(y){var x=i[y],T,S=function(){return T===void 0&&(T=r(x,y)),T};if(y===s-1){var w=t*(x.coordinate+t*S()/2-d);i[y]=x=wi(wi({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else i[y]=x=wi(wi({},x),{},{tickCoord:x.coordinate});var E=Pb(t,x.tickCoord,S,c,d);E&&(d=x.tickCoord-t*(S()/2+a),i[y]=wi(wi({},x),{},{isShow:!0}))},p=s-1;p>=0;p--)h(p);return i}function z3e(t,e,r,n,a,i){var s=(n||[]).slice(),c=s.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);s[c-1]=p=wi(wi({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var x=Pb(t,p.tickCoord,function(){return m},d,h);x&&(h=p.tickCoord-t*(m/2+a),s[c-1]=wi(wi({},p),{},{isShow:!0}))}for(var T=i?c-1:c,S=function(I){var R=s[I],L,O=function(){return L===void 0&&(L=r(R,I)),L};if(I===0){var M=t*(R.coordinate-t*O()/2-d);s[I]=R=wi(wi({},R),{},{tickCoord:M<0?R.coordinate-M*t:R.coordinate})}else s[I]=R=wi(wi({},R),{},{tickCoord:R.coordinate});var N=Pb(t,R.tickCoord,O,d,h);N&&(d=R.tickCoord+t*(O()/2+a),s[I]=wi(wi({},R),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function oj(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(vt(d)||p0.isSsr)return P3e(a,typeof d=="number"&&vt(d)?d:0);var y=[],x=c==="top"||c==="bottom"?"width":"height",T=p&&x==="width"?bm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(R,L){var O=nr(h)?h(R.value,L):R.value;return x==="width"?R3e(bm(O,{fontSize:e,letterSpacing:r}),T,m):bm(O,{fontSize:e,letterSpacing:r})[x]},w=a.length>=2?vo(a[1].coordinate-a[0].coordinate):1,E=M3e(i,w,x);return d==="equidistantPreserveStart"?D3e(w,E,S,a,s):(d==="preserveStart"||d==="preserveStartEnd"?y=z3e(w,E,S,a,s,d==="preserveStartEnd"):y=U3e(w,E,S,a,s),y.filter(function(I){return I.isShow}))}var V3e=["viewBox"],F3e=["viewBox"],q3e=["ticks"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gh.apply(this,arguments)}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){lj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vT(t,e){if(t==null)return{};var r=H3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_Q(n.key),n)}}function W3e(t,e,r){return e&&DU(t.prototype,e),r&&DU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function K3e(t,e,r){return e=Db(e),Q3e(t,SQ()?Reflect.construct(e,r||[],Db(t).constructor):e.apply(t,r))}function Q3e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X3e(t)}function X3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SQ=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(t)}function Y3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KN(t,e)}function KN(t,e){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KN(t,e)}function lj(t,e,r){return e=_Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Q(t){var e=Z3e(t,"string");return yf(e)=="symbol"?e:e+""}function Z3e(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uf=(function(t){function e(r){var n;return G3e(this,e),n=K3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Y3e(e,t),W3e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=vT(n,V3e),c=this.props,d=c.viewBox,h=vT(c,F3e);return!Ah(i,d)||!Ah(s,h)||!Ah(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,y=a.tickMargin,x,T,S,w,E,I,R=m?-1:1,L=n.tickSize||p,O=vt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":x=T=n.coordinate,w=s+ +!m*d,S=w-R*L,I=S-R*y,E=O;break;case"left":S=w=n.coordinate,T=i+ +!m*c,x=T-R*L,E=x-R*y,I=O;break;case"right":S=w=n.coordinate,T=i+ +m*c,x=T+R*L,E=x+R*y,I=O;break;default:x=T=n.coordinate,w=s+ +m*d,S=w+R*L,I=S+R*y,E=O;break}return{line:{x1:x,y1:S,x2:T,y2:w},tick:{x:E,y:I}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Oa(Oa(Oa({},zt(this.props,!1)),zt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=Oa(Oa({},m),{},{x1:a,y1:i+y*c,x2:a+s,y2:i+y*c})}else{var x=+(d==="left"&&!h||d==="right"&&h);m=Oa(Oa({},m),{},{x1:a+x*s,y1:i,x2:a+x*s,y2:i+c})}return se.createElement("line",gh({},m,{className:fr("recharts-cartesian-axis-line",Js(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,x=oj(Oa(Oa({},this.props),{},{ticks:n}),a,i),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=zt(this.props,!1),E=zt(p,!1),I=Oa(Oa({},w),{},{fill:"none"},zt(d,!1)),R=x.map(function(L,O){var M=s.getTickLineCoord(L),N=M.line,A=M.tick,j=Oa(Oa(Oa(Oa({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:h},E),A),{},{index:O,payload:L,visibleTicksCount:x.length,tickFormatter:m});return se.createElement(Vr,gh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},t0(s.props,L,O)),d&&se.createElement("line",gh({},I,N,{className:fr("recharts-cartesian-axis-tick-line",Js(d,"className"))})),p&&e.renderTickItem(p,j,"".concat(nr(m)?m(L.value,O):L.value).concat(y||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},R)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,y=m.ticks,x=vT(m,q3e),T=y;return nr(d)&&(T=y&&y.length>0?d(this.props):d(x)),s<=0||c<=0||!T||!T.length?null:se.createElement(Vr,{className:fr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),di.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,c=fr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?s=se.cloneElement(n,Oa(Oa({},a),{},{className:c})):nr(n)?s=n(Oa(Oa({},a),{},{className:c})):s=se.createElement(tf,gh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])})(k.Component);lj(Uf,"displayName","CartesianAxis");lj(Uf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var J3e=["x1","y1","x2","y2","key"],e6e=["offset"];function a0(t){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a0(t)}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){t6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t6e(t,e,r){return e=r6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r6e(t){var e=n6e(t,"string");return a0(e)=="symbol"?e:e+""}function n6e(t,e){if(a0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(a0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cd.apply(this,arguments)}function BU(t,e){if(t==null)return{};var r=a6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function a6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var i6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function TQ(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(nr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,s=e.y2,c=e.key,d=BU(e,J3e),h=zt(d,!1);h.offset;var p=BU(h,e6e);r=se.createElement("line",Cd({},p,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:c}))}return r}function s6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return TQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function o6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return TQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function l6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,x){return y-x});a!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var T=!p[x+1],S=T?a+s-y:p[x+1]-y;if(S<=0)return null;var w=x%e.length;return se.createElement("rect",{key:"react-".concat(x),y,x:n,height:S,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function c6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,s=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+i-i)}).sort(function(y,x){return y-x});i!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var T=!p[x+1],S=T?i+c-y:p[x+1]-y;if(S<=0)return null;var w=x%n.length;return se.createElement("rect",{key:"react-".concat(x),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var u6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,s=e.offset;return TK(oj(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:Vl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},d6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,s=e.offset;return TK(oj(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:Vl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},ih={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function AQ(t){var e,r,n,a,i,s,c=nj(),d=aj(),h=Z5e(),p=_i(_i({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ih.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:ih.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:ih.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:ih.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:ih.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:ih.verticalFill,x:vt(t.x)?t.x:h.left,y:vt(t.y)?t.y:h.top,width:vt(t.width)?t.width:h.width,height:vt(t.height)?t.height:h.height}),m=p.x,y=p.y,x=p.width,T=p.height,S=p.syncWithTicks,w=p.horizontalValues,E=p.verticalValues,I=Q5e(),R=X5e();if(!vt(x)||x<=0||!vt(T)||T<=0||!vt(m)||m!==+m||!vt(y)||y!==+y)return null;var L=p.verticalCoordinatesGenerator||u6e,O=p.horizontalCoordinatesGenerator||d6e,M=p.horizontalPoints,N=p.verticalPoints;if((!M||!M.length)&&nr(O)){var A=w&&w.length,j=O({yAxis:R?_i(_i({},R),{},{ticks:A?w:R.ticks}):void 0,width:c,height:d,offset:h},A?!0:S);Wl(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(a0(j),"]")),Array.isArray(j)&&(M=j)}if((!N||!N.length)&&nr(L)){var z=E&&E.length,B=L({xAxis:I?_i(_i({},I),{},{ticks:z?E:I.ticks}):void 0,width:c,height:d,offset:h},z?!0:S);Wl(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(a0(B),"]")),Array.isArray(B)&&(N=B)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(i6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(s6e,Cd({},p,{offset:h,horizontalPoints:M,xAxis:I,yAxis:R})),se.createElement(o6e,Cd({},p,{offset:h,verticalPoints:N,xAxis:I,yAxis:R})),se.createElement(l6e,Cd({},p,{horizontalPoints:M})),se.createElement(c6e,Cd({},p,{verticalPoints:N})))}AQ.displayName="CartesianGrid";function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function h6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jQ(n.key),n)}}function p6e(t,e,r){return e&&f6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m6e(t,e,r){return e=Lb(e),g6e(t,NQ()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function g6e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y6e(t)}function y6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NQ=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function v6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QN(t,e)}function QN(t,e){return QN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QN(t,e)}function EQ(t,e,r){return e=jQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jQ(t){var e=x6e(t,"string");return vf(e)=="symbol"?e:e+""}function x6e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gw=(function(t){function e(){return h6e(this,e),m6e(this,e,arguments)}return v6e(e,t),p6e(e,[{key:"render",value:function(){return null}}])})(k.Component);EQ(gw,"displayName","ZAxis");EQ(gw,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var b6e=["option","isActive"];function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nm.apply(this,arguments)}function w6e(t,e){if(t==null)return{};var r=S6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function S6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _6e(t){var e=t.option,r=t.isActive,n=w6e(t,b6e);return typeof e=="string"?k.createElement(LN,Nm({option:k.createElement(H2,Nm({type:e},n)),isActive:r,shapeType:"symbols"},n)):k.createElement(LN,Nm({option:e,isActive:r,shapeType:"symbols"},n))}function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Em.apply(this,arguments)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ks(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(n){du(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CQ(n.key),n)}}function A6e(t,e,r){return e&&UU(t.prototype,e),r&&UU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N6e(t,e,r){return e=Bb(e),E6e(t,kQ()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function E6e(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j6e(t)}function j6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kQ=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function k6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XN(t,e)}function XN(t,e){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XN(t,e)}function du(t,e,r){return e=CQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CQ(t){var e=C6e(t,"string");return xf(e)=="symbol"?e:e+""}function C6e(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A1=(function(t){function e(){var r;T6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=N6e(this,e,[].concat(a)),du(r,"state",{isAnimationFinished:!1}),du(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),du(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),du(r,"id",f1("recharts-scatter-")),r}return k6e(e,t),A6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.activeShape,d=i.activeIndex,h=zt(this.props,!1);return n.map(function(p,m){var y=d===m,x=y?c:s,T=Ks(Ks({},h),p);return se.createElement(Vr,Em({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},t0(a.props,p,m),{role:"img"}),se.createElement(_6e,Em({option:x,isActive:y,key:"symbol-".concat(m)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,T=i.map(function(S,w){var E=m&&m[w];if(E){var I=Zi(E.cx,S.cx),R=Zi(E.cy,S.cy),L=Zi(E.size,S.size);return Ks(Ks({},S),{},{cx:I(x),cy:R(x),size:L(x)})}var O=Zi(0,S.size);return Ks(Ks({},S),{},{size:O(x)})});return se.createElement(Vr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=this.state.prevPoints;return i&&a&&a.length&&(!s||!x1(s,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,s=a.xAxis,c=a.yAxis,d=a.children,h=ks(d,b1);return h?h.map(function(p,m){var y=p.props,x=y.direction,T=y.dataKey;return se.cloneElement(p,{key:"".concat(x,"-").concat(T,"-").concat(i[m]),data:i,xAxis:s,yAxis:c,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(w,E){return{x:w.cx,y:w.cy,value:x==="x"?+w.node.x:+w.node.y,errorVal:pi(w,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,s=n.lineType,c=n.lineJointType,d=zt(this.props,!1),h=zt(i,!1),p,m;if(s==="joint")p=a.map(function(R){return{x:R.cx,y:R.cy}});else if(s==="fitting"){var y=E0e(a),x=y.xmin,T=y.xmax,S=y.a,w=y.b,E=function(L){return S*L+w};p=[{x,y:E(x)},{x:T,y:E(T)}]}var I=Ks(Ks(Ks({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,I):nr(i)?m=i(I):m=se.createElement(SN,Em({},I,{type:c})),se.createElement(Vr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,s=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,x=n.height,T=n.id,S=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=fr("recharts-scatter",c),I=d&&d.allowDataOverflow,R=h&&h.allowDataOverflow,L=I||R,O=or(T)?this.id:T;return se.createElement(Vr,{className:E,clipPath:L?"url(#clipPath-".concat(O,")"):null},I||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(O)},se.createElement("rect",{x:I?p:p-y/2,y:R?m:m-x/2,width:I?y:y*2,height:R?x:x*2}))):null,s&&this.renderLine(),this.renderErrorBar(),se.createElement(Vr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&Ql.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(k.PureComponent);du(A1,"displayName","Scatter");du(A1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});du(A1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=ks(a.props.children,EE),m=or(e.dataKey)?a.props.dataKey:e.dataKey,y=or(r.dataKey)?a.props.dataKey:r.dataKey,x=n&&n.dataKey,T=n?n.range:gw.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,E=r.scale.bandwidth?r.scale.bandwidth():0,I=i.map(function(R,L){var O=pi(R,m),M=pi(R,y),N=!or(x)&&pi(R,x)||"-",A=[{name:or(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:O,payload:R,dataKey:m,type:h},{name:or(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:M,payload:R,dataKey:y,type:h}];N!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:N,payload:R,dataKey:x,type:h});var j=FB({axis:e,ticks:s,bandSize:w,entry:R,index:L,dataKey:m}),z=FB({axis:r,ticks:c,bandSize:E,entry:R,index:L,dataKey:y}),B=N!=="-"?n.scale(N):S,F=Math.sqrt(Math.max(B,0)/Math.PI);return Ks(Ks({},R),{},{cx:j,cy:z,x:j-F,y:z-F,xAxis:e,yAxis:r,zAxis:n,width:2*F,height:2*F,size:B,node:{x:O,y:M,z:N},tooltipPayload:A,tooltipPosition:{x:j,y:z},payload:R},p&&p[L]&&p[L].props)});return Ks({points:I},d)});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function O6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RQ(n.key),n)}}function R6e(t,e,r){return e&&I6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function M6e(t,e,r){return e=$b(e),P6e(t,OQ()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function P6e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D6e(t)}function D6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OQ=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function L6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YN(t,e)}function YN(t,e){return YN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YN(t,e)}function IQ(t,e,r){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RQ(t){var e=B6e(t,"string");return bf(e)=="symbol"?e:e+""}function B6e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ZN(){return ZN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZN.apply(this,arguments)}function $6e(t){var e=t.xAxisId,r=nj(),n=aj(),a=fQ(e);return a==null?null:k.createElement(Uf,ZN({},a,{className:fr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Vl(s,!0)}}))}var yw=(function(t){function e(){return O6e(this,e),M6e(this,e,arguments)}return L6e(e,t),R6e(e,[{key:"render",value:function(){return k.createElement($6e,this.props)}}])})(k.Component);IQ(yw,"displayName","XAxis");IQ(yw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function U6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DQ(n.key),n)}}function V6e(t,e,r){return e&&z6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F6e(t,e,r){return e=Ub(e),q6e(t,MQ()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function q6e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H6e(t)}function H6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MQ=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function G6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JN(t,e)}function JN(t,e){return JN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JN(t,e)}function PQ(t,e,r){return e=DQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DQ(t){var e=W6e(t,"string");return wf(e)=="symbol"?e:e+""}function W6e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function e8(){return e8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e8.apply(this,arguments)}var K6e=function(e){var r=e.yAxisId,n=nj(),a=aj(),i=pQ(r);return i==null?null:k.createElement(Uf,e8({},i,{className:fr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Vl(c,!0)}}))},vw=(function(t){function e(){return U6e(this,e),F6e(this,e,arguments)}return G6e(e,t),V6e(e,[{key:"render",value:function(){return k.createElement(K6e,this.props)}}])})(k.Component);PQ(vw,"displayName","YAxis");PQ(vw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function zU(t){return Z6e(t)||Y6e(t)||X6e(t)||Q6e()}function Q6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X6e(t,e){if(t){if(typeof t=="string")return t8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t8(t,e)}}function Y6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z6e(t){if(Array.isArray(t))return t8(t)}function t8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var r8=function(e,r,n,a,i){var s=ks(e,sj),c=ks(e,fw),d=[].concat(zU(s),zU(c)),h=ks(e,mw),p="".concat(a,"Id"),m=a[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[p]===n&&Ko(w.props,"extendDomain")&&vt(w.props[m])){var E=w.props[m];return[Math.min(S[0],E),Math.max(S[1],E)]}return S},y)),h.length){var x="".concat(m,"1"),T="".concat(m,"2");y=h.reduce(function(S,w){if(w.props[p]===n&&Ko(w.props,"extendDomain")&&vt(w.props[x])&&vt(w.props[T])){var E=w.props[x],I=w.props[T];return[Math.min(S[0],E,I),Math.max(S[1],E,I)]}return S},y)}return i&&i.length&&(y=i.reduce(function(S,w){return vt(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},xT={exports:{}},VU;function J6e(){return VU||(VU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new a(p,m||d,y),T=r?r+h:h;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],x]:d._events[T].push(x):(d._events[T]=x,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,T=new Array(x);y<x;y++)T[y]=m[y].fn;return T},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,x,T){var S=r?r+h:h;if(!this._events[S])return!1;var w=this._events[S],E=arguments.length,I,R;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,x),!0;case 6:return w.fn.call(w.context,p,m,y,x,T),!0}for(R=1,I=new Array(E-1);R<E;R++)I[R-1]=arguments[R];w.fn.apply(w.context,I)}else{var L=w.length,O;for(R=0;R<L;R++)switch(w[R].once&&this.removeListener(h,w[R].fn,void 0,!0),E){case 1:w[R].fn.call(w[R].context);break;case 2:w[R].fn.call(w[R].context,p);break;case 3:w[R].fn.call(w[R].context,p,m);break;case 4:w[R].fn.call(w[R].context,p,m,y);break;default:if(!I)for(O=1,I=new Array(E-1);O<E;O++)I[O-1]=arguments[O];w[R].fn.apply(w[R].context,I)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return s(this,x),this;var T=this._events[x];if(T.fn)T.fn===p&&(!y||T.once)&&(!m||T.context===m)&&s(this,x);else{for(var S=0,w=[],E=T.length;S<E;S++)(T[S].fn!==p||y&&!T[S].once||m&&T[S].context!==m)&&w.push(T[S]);w.length?this._events[x]=w.length===1?w[0]:w:s(this,x)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&s(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(xT)),xT.exports}var eSe=J6e();const tSe=Kr(eSe);var bT=new tSe,wT="recharts.syncMouseEvents";function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function rSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function aSe(t,e,r){return e&&nSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ST(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=iSe(t,"string");return Dg(e)=="symbol"?e:e+""}function iSe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sSe=(function(){function t(){rSe(this,t),ST(this,"activeIndex",0),ST(this,"coordinateList",[]),ST(this,"layout","horizontal")}return aSe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,c=s===void 0?null:s,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,x=y===void 0?null:y;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,y=s+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function oSe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&vt(n)&&vt(a))return!0}return!1}function lSe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function BQ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,s=vn(e,r,n,a),c=vn(e,r,n,i);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function cSe(t,e,r){var n,a,i,s;if(t==="horizontal")n=e.x,i=n,a=r.top,s=r.top+r.height;else if(t==="vertical")a=e.y,s=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=vn(c,d,h,m),x=vn(c,d,p,m);n=y.x,a=y.y,i=x.x,s=x.y}else return BQ(e);return[{x:n,y:a},{x:i,y:s}]}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function FU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(r),!0).forEach(function(n){uSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uSe(t,e,r){return e=dSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dSe(t){var e=hSe(t,"string");return Lg(e)=="symbol"?e:e+""}function hSe(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fSe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,x=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!s||y!=="ScatterChart"&&a!=="axis")return null;var T,S=SN;if(y==="ScatterChart")T=s,S=dwe;else if(y==="BarChart")T=lSe(m,s,d,p),S=JE;else if(m==="radial"){var w=BQ(s),E=w.cx,I=w.cy,R=w.radius,L=w.startAngle,O=w.endAngle;T={cx:E,cy:I,startAngle:L,endAngle:O,innerRadius:R,outerRadius:R},S=PK}else T={points:cSe(m,s,d)},S=SN;var M=jv(jv(jv(jv({stroke:"#ccc",pointerEvents:"none"},d),T),zt(x,!1)),{},{payload:c,payloadIndex:h,className:fr("recharts-tooltip-cursor",x.className)});return k.isValidElement(x)?k.cloneElement(x,M):k.createElement(S,M)}var pSe=["item"],mSe=["children","className","width","height","style","compact","title","desc"];function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(this,arguments)}function qU(t,e){return vSe(t)||ySe(t,e)||UQ(t,e)||gSe()}function gSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ySe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function vSe(t){if(Array.isArray(t))return t}function HU(t,e){if(t==null)return{};var r=xSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zQ(n.key),n)}}function SSe(t,e,r){return e&&wSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Se(t,e,r){return e=zb(e),TSe(t,$Q()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function TSe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ASe(t)}function ASe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Q=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function NSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n8(t,e)}function n8(t,e){return n8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},n8(t,e)}function _f(t){return kSe(t)||jSe(t)||UQ(t)||ESe()}function ESe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UQ(t,e){if(t){if(typeof t=="string")return a8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a8(t,e)}}function jSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kSe(t){if(Array.isArray(t))return a8(t)}function a8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function GU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(r),!0).forEach(function(n){Wt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wt(t,e,r){return e=zQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zQ(t){var e=CSe(t,"string");return Sf(e)=="symbol"?e:e+""}function CSe(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OSe={xAxis:["bottom","top"],yAxis:["left","right"]},ISe={width:"100%",height:"100%"},VQ={x:0,y:0};function kv(t){return t}var RSe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},MSe=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,c=a.radius;return He(He(He({},a),vn(a.cx,a.cy,c,s)),{},{angle:s,radius:c})}var d=i.coordinate,h=a.angle;return He(He(He({},a),vn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return VQ},xw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(_f(c),_f(h)):c},[]);return s.length>0?s:e&&e.length&&vt(a)&&vt(i)?e.slice(a,i+1):[]};function FQ(t){return t==="number"?[0,"auto"]:void 0}var i8=function(e,r,n,a){var i=e.graphicalItems,s=e.tooltipAxis,c=xw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var x=m===void 0?c:m;y=zx(x,s.dataKey,a)}else y=m&&m[n]||c[n];return y?[].concat(_f(d),[kK(h,y)]):d},[])},WU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},s=RSe(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Rve(s,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=i8(e,r,p,m),x=MSe(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:x}}return null},PSe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,x=_K(p,i);return n.reduce(function(T,S){var w,E=S.type.defaultProps!==void 0?He(He({},S.type.defaultProps),S.props):S.props,I=E.type,R=E.dataKey,L=E.allowDataOverflow,O=E.allowDuplicatedCategory,M=E.scale,N=E.ticks,A=E.includeHidden,j=E[s];if(T[j])return T;var z=xw(e.data,{graphicalItems:a.filter(function(te){var re,Ne=s in te.props?te.props[s]:(re=te.type.defaultProps)===null||re===void 0?void 0:re[s];return Ne===j}),dataStartIndex:d,dataEndIndex:h}),B=z.length,F,U,X;oSe(E.domain,L,I)&&(F=yN(E.domain,null,L),x&&(I==="number"||M!=="auto")&&(X=Sm(z,R,"category")));var W=FQ(I);if(!F||F.length===0){var H,Z=(H=E.domain)!==null&&H!==void 0?H:W;if(R){if(F=Sm(z,R,I),I==="category"&&x){var ie=N0e(F);O&&ie?(U=F,F=Eb(0,B)):O||(F=WB(Z,F,S).reduce(function(te,re){return te.indexOf(re)>=0?te:[].concat(_f(te),[re])},[]))}else if(I==="category")O?F=F.filter(function(te){return te!==""&&!or(te)}):F=WB(Z,F,S).reduce(function(te,re){return te.indexOf(re)>=0||re===""||or(re)?te:[].concat(_f(te),[re])},[]);else if(I==="number"){var fe=Bve(z,a.filter(function(te){var re,Ne,ae=s in te.props?te.props[s]:(re=te.type.defaultProps)===null||re===void 0?void 0:re[s],xe="hide"in te.props?te.props.hide:(Ne=te.type.defaultProps)===null||Ne===void 0?void 0:Ne.hide;return ae===j&&(A||!xe)}),R,i,p);fe&&(F=fe)}x&&(I==="number"||M!=="auto")&&(X=Sm(z,R,"category"))}else x?F=Eb(0,B):c&&c[j]&&c[j].hasStack&&I==="number"?F=y==="expand"?[0,1]:jK(c[j].stackGroups,d,h):F=SK(z,a.filter(function(te){var re=s in te.props?te.props[s]:te.type.defaultProps[s],Ne="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return re===j&&(A||!Ne)}),I,p,!0);if(I==="number")F=r8(m,F,j,i,N),Z&&(F=yN(Z,F,L));else if(I==="category"&&Z){var me=Z,K=F.every(function(te){return me.indexOf(te)>=0});K&&(F=me)}}return He(He({},T),{},Wt({},j,He(He({},E),{},{axisType:i,domain:F,categoricalDomain:X,duplicateDomain:U,originalDomain:(w=E.domain)!==null&&w!==void 0?w:W,isCategorical:x,layout:p})))},{})},DSe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=xw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),x=y.length,T=_K(p,i),S=-1;return n.reduce(function(w,E){var I=E.type.defaultProps!==void 0?He(He({},E.type.defaultProps),E.props):E.props,R=I[s],L=FQ("number");if(!w[R]){S++;var O;return T?O=Eb(0,x):c&&c[R]&&c[R].hasStack?(O=jK(c[R].stackGroups,d,h),O=r8(m,O,R,i)):(O=yN(L,SK(y,n.filter(function(M){var N,A,j=s in M.props?M.props[s]:(N=M.type.defaultProps)===null||N===void 0?void 0:N[s],z="hide"in M.props?M.props.hide:(A=M.type.defaultProps)===null||A===void 0?void 0:A.hide;return j===R&&!z}),"number",p),a.defaultProps.allowDataOverflow),O=r8(m,O,R,i)),He(He({},w),{},Wt({},R,He(He({axisType:i},a.defaultProps),{},{hide:!0,orientation:Js(OSe,"".concat(i,".").concat(S%2),null),domain:O,originalDomain:L,isCategorical:T,layout:p})))}return w},{})},LSe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),y=ks(p,i),x={};return y&&y.length?x=PSe(e,{axes:y,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):s&&s.length&&(x=DSe(e,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),x},BSe=function(e){var r=iu(e),n=Vl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:AE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:fb(r,n)}},KU=function(e){var r=e.children,n=e.defaultShowTooltip,a=ws(r,hf),i=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},$Se=function(e){return!e||!e.length?!1:e.some(function(r){var n=Gl(r&&r.type);return n&&n.indexOf("Bar")>=0})},QU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},USe=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,s=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},x=ws(m,hf),T=ws(m,Nh),S=Object.keys(d).reduce(function(O,M){var N=d[M],A=N.orientation;return!N.mirror&&!N.hide?He(He({},O),{},Wt({},A,O[A]+N.width)):O},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(O,M){var N=s[M],A=N.orientation;return!N.mirror&&!N.hide?He(He({},O),{},Wt({},A,Js(O,"".concat(A))+N.height)):O},{top:y.top||0,bottom:y.bottom||0}),E=He(He({},w),S),I=E.bottom;x&&(E.bottom+=x.props.height||hf.defaultProps.height),T&&r&&(E=Dve(E,a,n,r));var R=h-E.left-E.right,L=p-E.top-E.bottom;return He(He({brushBottom:I},E),{},{width:Math.max(R,0),height:Math.max(L,0)})},zSe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},qQ=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(E,I){var R=I.graphicalItems,L=I.stackGroups,O=I.offset,M=I.updateId,N=I.dataStartIndex,A=I.dataEndIndex,j=E.barSize,z=E.layout,B=E.barGap,F=E.barCategoryGap,U=E.maxBarSize,X=QU(z),W=X.numericAxisName,H=X.cateAxisName,Z=$Se(R),ie=[];return R.forEach(function(fe,me){var K=xw(E.data,{graphicalItems:[fe],dataStartIndex:N,dataEndIndex:A}),te=fe.type.defaultProps!==void 0?He(He({},fe.type.defaultProps),fe.props):fe.props,re=te.dataKey,Ne=te.maxBarSize,ae=te["".concat(W,"Id")],xe=te["".concat(H,"Id")],ye={},Ue=d.reduce(function(mt,Je){var de=I["".concat(Je.axisType,"Map")],Ye=te["".concat(Je.axisType,"Id")];de&&de[Ye]||Je.axisType==="zAxis"||n0();var At=de[Ye];return He(He({},mt),{},Wt(Wt({},Je.axisType,At),"".concat(Je.axisType,"Ticks"),Vl(At)))},ye),ee=Ue[H],Me=Ue["".concat(H,"Ticks")],ne=L&&L[ae]&&L[ae].hasStack&&Wve(fe,L[ae].stackGroups),pe=Gl(fe.type).indexOf("Bar")>=0,Xe=fb(ee,Me),Qe=[],St=Z&&Mve({barSize:j,stackGroups:L,totalSize:zSe(Ue,H)});if(pe){var ct,_t,Ee=or(Ne)?U:Ne,Ve=(ct=(_t=fb(ee,Me,!0))!==null&&_t!==void 0?_t:Ee)!==null&&ct!==void 0?ct:0;Qe=Pve({barGap:B,barCategoryGap:F,bandSize:Ve!==Xe?Ve:Xe,sizeList:St[xe],maxBarSize:Ee}),Ve!==Xe&&(Qe=Qe.map(function(mt){return He(He({},mt),{},{position:He(He({},mt.position),{},{offset:mt.position.offset-Ve/2})})}))}var nt=fe&&fe.type&&fe.type.getComposedData;nt&&ie.push({props:He(He({},nt(He(He({},Ue),{},{displayedData:K,props:E,dataKey:re,item:fe,bandSize:Xe,barPosition:Qe,offset:O,stackedData:ne,layout:z,dataStartIndex:N,dataEndIndex:A}))),{},Wt(Wt(Wt({key:fe.key||"item-".concat(me)},W,Ue[W]),H,Ue[H]),"animationId",M)),childIndex:$0e(fe,E.children),item:fe})}),ie},x=function(E,I){var R=E.props,L=E.dataStartIndex,O=E.dataEndIndex,M=E.updateId;if(!oP({props:R}))return null;var N=R.children,A=R.layout,j=R.stackOffset,z=R.data,B=R.reverseStackOrder,F=QU(A),U=F.numericAxisName,X=F.cateAxisName,W=ks(N,n),H=Hve(z,W,"".concat(U,"Id"),"".concat(X,"Id"),j,B),Z=d.reduce(function(te,re){var Ne="".concat(re.axisType,"Map");return He(He({},te),{},Wt({},Ne,LSe(R,He(He({},re),{},{graphicalItems:W,stackGroups:re.axisType===U&&H,dataStartIndex:L,dataEndIndex:O}))))},{}),ie=USe(He(He({},Z),{},{props:R,graphicalItems:W}),I==null?void 0:I.legendBBox);Object.keys(Z).forEach(function(te){Z[te]=p(R,Z[te],ie,te.replace("Map",""),r)});var fe=Z["".concat(X,"Map")],me=BSe(fe),K=y(R,He(He({},Z),{},{dataStartIndex:L,dataEndIndex:O,updateId:M,graphicalItems:W,stackGroups:H,offset:ie}));return He(He({formattedGraphicalItems:K,graphicalItems:W,offset:ie,stackGroups:H},me),Z)},T=(function(w){function E(I){var R,L,O;return bSe(this,E),O=_Se(this,E,[I]),Wt(O,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Wt(O,"accessibilityManager",new sSe),Wt(O,"handleLegendBBoxUpdate",function(M){if(M){var N=O.state,A=N.dataStartIndex,j=N.dataEndIndex,z=N.updateId;O.setState(He({legendBBox:M},x({props:O.props,dataStartIndex:A,dataEndIndex:j,updateId:z},He(He({},O.state),{},{legendBBox:M}))))}}),Wt(O,"handleReceiveSyncEvent",function(M,N,A){if(O.props.syncId===M){if(A===O.eventEmitterSymbol&&typeof O.props.syncMethod!="function")return;O.applySyncEvent(N)}}),Wt(O,"handleBrushChange",function(M){var N=M.startIndex,A=M.endIndex;if(N!==O.state.dataStartIndex||A!==O.state.dataEndIndex){var j=O.state.updateId;O.setState(function(){return He({dataStartIndex:N,dataEndIndex:A},x({props:O.props,dataStartIndex:N,dataEndIndex:A,updateId:j},O.state))}),O.triggerSyncEvent({dataStartIndex:N,dataEndIndex:A})}}),Wt(O,"handleMouseEnter",function(M){var N=O.getMouseInfo(M);if(N){var A=He(He({},N),{},{isTooltipActive:!0});O.setState(A),O.triggerSyncEvent(A);var j=O.props.onMouseEnter;nr(j)&&j(A,M)}}),Wt(O,"triggeredAfterMouseMove",function(M){var N=O.getMouseInfo(M),A=N?He(He({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};O.setState(A),O.triggerSyncEvent(A);var j=O.props.onMouseMove;nr(j)&&j(A,M)}),Wt(O,"handleItemMouseEnter",function(M){O.setState(function(){return{isTooltipActive:!0,activeItem:M,activePayload:M.tooltipPayload,activeCoordinate:M.tooltipPosition||{x:M.cx,y:M.cy}}})}),Wt(O,"handleItemMouseLeave",function(){O.setState(function(){return{isTooltipActive:!1}})}),Wt(O,"handleMouseMove",function(M){M.persist(),O.throttleTriggeredAfterMouseMove(M)}),Wt(O,"handleMouseLeave",function(M){O.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};O.setState(N),O.triggerSyncEvent(N);var A=O.props.onMouseLeave;nr(A)&&A(N,M)}),Wt(O,"handleOuterEvent",function(M){var N=B0e(M),A=Js(O.props,"".concat(N));if(N&&nr(A)){var j,z;/.*touch.*/i.test(N)?z=O.getMouseInfo(M.changedTouches[0]):z=O.getMouseInfo(M),A((j=z)!==null&&j!==void 0?j:{},M)}}),Wt(O,"handleClick",function(M){var N=O.getMouseInfo(M);if(N){var A=He(He({},N),{},{isTooltipActive:!0});O.setState(A),O.triggerSyncEvent(A);var j=O.props.onClick;nr(j)&&j(A,M)}}),Wt(O,"handleMouseDown",function(M){var N=O.props.onMouseDown;if(nr(N)){var A=O.getMouseInfo(M);N(A,M)}}),Wt(O,"handleMouseUp",function(M){var N=O.props.onMouseUp;if(nr(N)){var A=O.getMouseInfo(M);N(A,M)}}),Wt(O,"handleTouchMove",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&O.throttleTriggeredAfterMouseMove(M.changedTouches[0])}),Wt(O,"handleTouchStart",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&O.handleMouseDown(M.changedTouches[0])}),Wt(O,"handleTouchEnd",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&O.handleMouseUp(M.changedTouches[0])}),Wt(O,"handleDoubleClick",function(M){var N=O.props.onDoubleClick;if(nr(N)){var A=O.getMouseInfo(M);N(A,M)}}),Wt(O,"handleContextMenu",function(M){var N=O.props.onContextMenu;if(nr(N)){var A=O.getMouseInfo(M);N(A,M)}}),Wt(O,"triggerSyncEvent",function(M){O.props.syncId!==void 0&&bT.emit(wT,O.props.syncId,M,O.eventEmitterSymbol)}),Wt(O,"applySyncEvent",function(M){var N=O.props,A=N.layout,j=N.syncMethod,z=O.state.updateId,B=M.dataStartIndex,F=M.dataEndIndex;if(M.dataStartIndex!==void 0||M.dataEndIndex!==void 0)O.setState(He({dataStartIndex:B,dataEndIndex:F},x({props:O.props,dataStartIndex:B,dataEndIndex:F,updateId:z},O.state)));else if(M.activeTooltipIndex!==void 0){var U=M.chartX,X=M.chartY,W=M.activeTooltipIndex,H=O.state,Z=H.offset,ie=H.tooltipTicks;if(!Z)return;if(typeof j=="function")W=j(ie,M);else if(j==="value"){W=-1;for(var fe=0;fe<ie.length;fe++)if(ie[fe].value===M.activeLabel){W=fe;break}}var me=He(He({},Z),{},{x:Z.left,y:Z.top}),K=Math.min(U,me.x+me.width),te=Math.min(X,me.y+me.height),re=ie[W]&&ie[W].value,Ne=i8(O.state,O.props.data,W),ae=ie[W]?{x:A==="horizontal"?ie[W].coordinate:K,y:A==="horizontal"?te:ie[W].coordinate}:VQ;O.setState(He(He({},M),{},{activeLabel:re,activeCoordinate:ae,activePayload:Ne,activeTooltipIndex:W}))}else O.setState(M)}),Wt(O,"renderCursor",function(M){var N,A=O.state,j=A.isTooltipActive,z=A.activeCoordinate,B=A.activePayload,F=A.offset,U=A.activeTooltipIndex,X=A.tooltipAxisBandSize,W=O.getTooltipEventType(),H=(N=M.props.active)!==null&&N!==void 0?N:j,Z=O.props.layout,ie=M.key||"_recharts-cursor";return se.createElement(fSe,{key:ie,activeCoordinate:z,activePayload:B,activeTooltipIndex:U,chartName:r,element:M,isActive:H,layout:Z,offset:F,tooltipAxisBandSize:X,tooltipEventType:W})}),Wt(O,"renderPolarAxis",function(M,N,A){var j=Js(M,"type.axisType"),z=Js(O.state,"".concat(j,"Map")),B=M.type.defaultProps,F=B!==void 0?He(He({},B),M.props):M.props,U=z&&z[F["".concat(j,"Id")]];return k.cloneElement(M,He(He({},U),{},{className:fr(j,U.className),key:M.key||"".concat(N,"-").concat(A),ticks:Vl(U,!0)}))}),Wt(O,"renderPolarGrid",function(M){var N=M.props,A=N.radialLines,j=N.polarAngles,z=N.polarRadius,B=O.state,F=B.radiusAxisMap,U=B.angleAxisMap,X=iu(F),W=iu(U),H=W.cx,Z=W.cy,ie=W.innerRadius,fe=W.outerRadius;return k.cloneElement(M,{polarAngles:Array.isArray(j)?j:Vl(W,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray(z)?z:Vl(X,!0).map(function(me){return me.coordinate}),cx:H,cy:Z,innerRadius:ie,outerRadius:fe,key:M.key||"polar-grid",radialLines:A})}),Wt(O,"renderLegend",function(){var M=O.state.formattedGraphicalItems,N=O.props,A=N.children,j=N.width,z=N.height,B=O.props.margin||{},F=j-(B.left||0)-(B.right||0),U=bK({children:A,formattedGraphicalItems:M,legendWidth:F,legendContent:h});if(!U)return null;var X=U.item,W=HU(U,pSe);return k.cloneElement(X,He(He({},W),{},{chartWidth:j,chartHeight:z,margin:B,onBBoxUpdate:O.handleLegendBBoxUpdate}))}),Wt(O,"renderTooltip",function(){var M,N=O.props,A=N.children,j=N.accessibilityLayer,z=ws(A,Lo);if(!z)return null;var B=O.state,F=B.isTooltipActive,U=B.activeCoordinate,X=B.activePayload,W=B.activeLabel,H=B.offset,Z=(M=z.props.active)!==null&&M!==void 0?M:F;return k.cloneElement(z,{viewBox:He(He({},H),{},{x:H.left,y:H.top}),active:Z,label:W,payload:Z?X:[],coordinate:U,accessibilityLayer:j})}),Wt(O,"renderBrush",function(M){var N=O.props,A=N.margin,j=N.data,z=O.state,B=z.offset,F=z.dataStartIndex,U=z.dataEndIndex,X=z.updateId;return k.cloneElement(M,{key:M.key||"_recharts-brush",onChange:Tv(O.handleBrushChange,M.props.onChange),data:j,x:vt(M.props.x)?M.props.x:B.left,y:vt(M.props.y)?M.props.y:B.top+B.height+B.brushBottom-(A.bottom||0),width:vt(M.props.width)?M.props.width:B.width,startIndex:F,endIndex:U,updateId:"brush-".concat(X)})}),Wt(O,"renderReferenceElement",function(M,N,A){if(!M)return null;var j=O,z=j.clipPathId,B=O.state,F=B.xAxisMap,U=B.yAxisMap,X=B.offset,W=M.type.defaultProps||{},H=M.props,Z=H.xAxisId,ie=Z===void 0?W.xAxisId:Z,fe=H.yAxisId,me=fe===void 0?W.yAxisId:fe;return k.cloneElement(M,{key:M.key||"".concat(N,"-").concat(A),xAxis:F[ie],yAxis:U[me],viewBox:{x:X.left,y:X.top,width:X.width,height:X.height},clipPathId:z})}),Wt(O,"renderActivePoints",function(M){var N=M.item,A=M.activePoint,j=M.basePoint,z=M.childIndex,B=M.isRange,F=[],U=N.props.key,X=N.item.type.defaultProps!==void 0?He(He({},N.item.type.defaultProps),N.item.props):N.item.props,W=X.activeDot,H=X.dataKey,Z=He(He({index:z,dataKey:H,cx:A.x,cy:A.y,r:4,fill:ZE(N.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},zt(W,!1)),Vx(W));return F.push(E.renderActiveDot(W,Z,"".concat(U,"-activePoint-").concat(z))),j?F.push(E.renderActiveDot(W,He(He({},Z),{},{cx:j.x,cy:j.y}),"".concat(U,"-basePoint-").concat(z))):B&&F.push(null),F}),Wt(O,"renderGraphicChild",function(M,N,A){var j=O.filterFormatItem(M,N,A);if(!j)return null;var z=O.getTooltipEventType(),B=O.state,F=B.isTooltipActive,U=B.tooltipAxis,X=B.activeTooltipIndex,W=B.activeLabel,H=O.props.children,Z=ws(H,Lo),ie=j.props,fe=ie.points,me=ie.isRange,K=ie.baseLine,te=j.item.type.defaultProps!==void 0?He(He({},j.item.type.defaultProps),j.item.props):j.item.props,re=te.activeDot,Ne=te.hide,ae=te.activeBar,xe=te.activeShape,ye=!!(!Ne&&F&&Z&&(re||ae||xe)),Ue={};z!=="axis"&&Z&&Z.props.trigger==="click"?Ue={onClick:Tv(O.handleItemMouseEnter,M.props.onClick)}:z!=="axis"&&(Ue={onMouseLeave:Tv(O.handleItemMouseLeave,M.props.onMouseLeave),onMouseEnter:Tv(O.handleItemMouseEnter,M.props.onMouseEnter)});var ee=k.cloneElement(M,He(He({},j.props),Ue));function Me(Je){return typeof U.dataKey=="function"?U.dataKey(Je.payload):null}if(ye)if(X>=0){var ne,pe;if(U.dataKey&&!U.allowDuplicatedCategory){var Xe=typeof U.dataKey=="function"?Me:"payload.".concat(U.dataKey.toString());ne=zx(fe,Xe,W),pe=me&&K&&zx(K,Xe,W)}else ne=fe==null?void 0:fe[X],pe=me&&K&&K[X];if(xe||ae){var Qe=M.props.activeIndex!==void 0?M.props.activeIndex:X;return[k.cloneElement(M,He(He(He({},j.props),Ue),{},{activeIndex:Qe})),null,null]}if(!or(ne))return[ee].concat(_f(O.renderActivePoints({item:j,activePoint:ne,basePoint:pe,childIndex:X,isRange:me})))}else{var St,ct=(St=O.getItemByXY(O.state.activeCoordinate))!==null&&St!==void 0?St:{graphicalItem:ee},_t=ct.graphicalItem,Ee=_t.item,Ve=Ee===void 0?M:Ee,nt=_t.childIndex,mt=He(He(He({},j.props),Ue),{},{activeIndex:nt});return[k.cloneElement(Ve,mt),null,null]}return me?[ee,null,null]:[ee,null]}),Wt(O,"renderCustomized",function(M,N,A){return k.cloneElement(M,He(He({key:"recharts-customized-".concat(A)},O.props),O.state))}),Wt(O,"renderMap",{CartesianGrid:{handler:kv,once:!0},ReferenceArea:{handler:O.renderReferenceElement},ReferenceLine:{handler:kv},ReferenceDot:{handler:O.renderReferenceElement},XAxis:{handler:kv},YAxis:{handler:kv},Brush:{handler:O.renderBrush,once:!0},Bar:{handler:O.renderGraphicChild},Line:{handler:O.renderGraphicChild},Area:{handler:O.renderGraphicChild},Radar:{handler:O.renderGraphicChild},RadialBar:{handler:O.renderGraphicChild},Scatter:{handler:O.renderGraphicChild},Pie:{handler:O.renderGraphicChild},Funnel:{handler:O.renderGraphicChild},Tooltip:{handler:O.renderCursor,once:!0},PolarGrid:{handler:O.renderPolarGrid,once:!0},PolarAngleAxis:{handler:O.renderPolarAxis},PolarRadiusAxis:{handler:O.renderPolarAxis},Customized:{handler:O.renderCustomized}}),O.clipPathId="".concat((R=I.id)!==null&&R!==void 0?R:f1("recharts"),"-clip"),O.throttleTriggeredAfterMouseMove=xW(O.triggeredAfterMouseMove,(L=I.throttleDelay)!==null&&L!==void 0?L:1e3/60),O.state={},O}return NSe(E,w),SSe(E,[{key:"componentDidMount",value:function(){var R,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var R=this.props,L=R.children,O=R.data,M=R.height,N=R.layout,A=ws(L,Lo);if(A){var j=A.props.defaultIndex;if(!(typeof j!="number"||j<0||j>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[j]&&this.state.tooltipTicks[j].value,B=i8(this.state,O,j,z),F=this.state.tooltipTicks[j].coordinate,U=(this.state.offset.top+M)/2,X=N==="horizontal",W=X?{x:F,y:U}:{y:F,x:U},H=this.state.formattedGraphicalItems.find(function(ie){var fe=ie.item;return fe.type.name==="Scatter"});H&&(W=He(He({},W),H.props.points[j].tooltipPosition),B=H.props.points[j].tooltipPayload);var Z={activeTooltipIndex:j,isTooltipActive:!0,activeLabel:z,activePayload:B,activeCoordinate:W};this.setState(Z),this.renderCursor(A),this.accessibilityManager.setIndex(j)}}}},{key:"getSnapshotBeforeUpdate",value:function(R,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var O,M;this.accessibilityManager.setDetails({offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0}})}return null}},{key:"componentDidUpdate",value:function(R){$A([ws(R.children,Lo)],[ws(this.props.children,Lo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=ws(this.props.children,Lo);if(R&&typeof R.props.shared=="boolean"){var L=R.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var L=this.container,O=L.getBoundingClientRect(),M=Ame(O),N={chartX:Math.round(R.pageX-M.left),chartY:Math.round(R.pageY-M.top)},A=O.width/L.offsetWidth||1,j=this.inRange(N.chartX,N.chartY,A);if(!j)return null;var z=this.state,B=z.xAxisMap,F=z.yAxisMap,U=this.getTooltipEventType(),X=WU(this.state,this.props.data,this.props.layout,j);if(U!=="axis"&&B&&F){var W=iu(B).scale,H=iu(F).scale,Z=W&&W.invert?W.invert(N.chartX):null,ie=H&&H.invert?H.invert(N.chartY):null;return He(He({},N),{},{xValue:Z,yValue:ie},X)}return X?He(He({},N),X):null}},{key:"inRange",value:function(R,L){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=this.props.layout,N=R/O,A=L/O;if(M==="horizontal"||M==="vertical"){var j=this.state.offset,z=N>=j.left&&N<=j.left+j.width&&A>=j.top&&A<=j.top+j.height;return z?{x:N,y:A}:null}var B=this.state,F=B.angleAxisMap,U=B.radiusAxisMap;if(F&&U){var X=iu(F);return XB({x:N,y:A},X)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,L=this.getTooltipEventType(),O=ws(R,Lo),M={};O&&L==="axis"&&(O.props.trigger==="click"?M={onClick:this.handleClick}:M={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Vx(this.props,this.handleOuterEvent);return He(He({},N),M)}},{key:"addListener",value:function(){bT.on(wT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){bT.removeListener(wT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,L,O){for(var M=this.state.formattedGraphicalItems,N=0,A=M.length;N<A;N++){var j=M[N];if(j.item===R||j.props.key===R.key||L===Gl(j.item.type)&&O===j.childIndex)return j}return null}},{key:"renderClipPath",value:function(){var R=this.clipPathId,L=this.state.offset,O=L.left,M=L.top,N=L.height,A=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:R},se.createElement("rect",{x:O,y:M,height:N,width:A})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(L,O){var M=qU(O,2),N=M[0],A=M[1];return He(He({},L),{},Wt({},N,A.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(L,O){var M=qU(O,2),N=M[0],A=M[1];return He(He({},L),{},Wt({},N,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(R){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(R){var L=this.state,O=L.formattedGraphicalItems,M=L.activeItem;if(O&&O.length)for(var N=0,A=O.length;N<A;N++){var j=O[N],z=j.props,B=j.item,F=B.type.defaultProps!==void 0?He(He({},B.type.defaultProps),B.props):B.props,U=Gl(B.type);if(U==="Bar"){var X=(z.data||[]).find(function(ie){return G2e(R,ie)});if(X)return{graphicalItem:j,payload:X}}else if(U==="RadialBar"){var W=(z.data||[]).find(function(ie){return XB(R,ie)});if(W)return{graphicalItem:j,payload:W}}else if(cw(j,M)||uw(j,M)||Og(j,M)){var H=A4e({graphicalItem:j,activeTooltipItem:M,itemData:F.data}),Z=F.activeIndex===void 0?H:F.activeIndex;return{graphicalItem:He(He({},j),{},{childIndex:Z}),payload:Og(j,M)?F.data[H]:j.props.data[H]}}}return null}},{key:"render",value:function(){var R=this;if(!oP(this))return null;var L=this.props,O=L.children,M=L.className,N=L.width,A=L.height,j=L.style,z=L.compact,B=L.title,F=L.desc,U=HU(L,mSe),X=zt(U,!1);if(z)return se.createElement(NU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(zA,yh({},X,{width:N,height:A,title:B,desc:F}),this.renderClipPath(),cP(O,this.renderMap)));if(this.props.accessibilityLayer){var W,H;X.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,X.role=(H=this.props.role)!==null&&H!==void 0?H:"application",X.onKeyDown=function(ie){R.accessibilityManager.keyboardEvent(ie)},X.onFocus=function(){R.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return se.createElement(NU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",yh({className:fr("recharts-wrapper",M),style:He({position:"relative",cursor:"default",width:N,height:A},j)},Z,{ref:function(fe){R.container=fe}}),se.createElement(zA,yh({},X,{width:N,height:A,title:B,desc:F,style:ISe}),this.renderClipPath(),cP(O,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(k.Component);Wt(T,"displayName",r),Wt(T,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Wt(T,"getDerivedStateFromProps",function(w,E){var I=w.dataKey,R=w.data,L=w.children,O=w.width,M=w.height,N=w.layout,A=w.stackOffset,j=w.margin,z=E.dataStartIndex,B=E.dataEndIndex;if(E.updateId===void 0){var F=KU(w);return He(He(He({},F),{},{updateId:0},x(He(He({props:w},F),{},{updateId:0}),E)),{},{prevDataKey:I,prevData:R,prevWidth:O,prevHeight:M,prevLayout:N,prevStackOffset:A,prevMargin:j,prevChildren:L})}if(I!==E.prevDataKey||R!==E.prevData||O!==E.prevWidth||M!==E.prevHeight||N!==E.prevLayout||A!==E.prevStackOffset||!Ah(j,E.prevMargin)){var U=KU(w),X={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},W=He(He({},WU(E,R,N)),{},{updateId:E.updateId+1}),H=He(He(He({},U),X),W);return He(He(He({},H),x(He({props:w},H),E)),{},{prevDataKey:I,prevData:R,prevWidth:O,prevHeight:M,prevLayout:N,prevStackOffset:A,prevMargin:j,prevChildren:L})}if(!$A(L,E.prevChildren)){var Z,ie,fe,me,K=ws(L,hf),te=K&&(Z=(ie=K.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&Z!==void 0?Z:z,re=K&&(fe=(me=K.props)===null||me===void 0?void 0:me.endIndex)!==null&&fe!==void 0?fe:B,Ne=te!==z||re!==B,ae=!or(R),xe=ae&&!Ne?E.updateId:E.updateId+1;return He(He({updateId:xe},x(He(He({props:w},E),{},{updateId:xe,dataStartIndex:te,dataEndIndex:re}),E)),{},{prevChildren:L,dataStartIndex:te,dataEndIndex:re})}return null}),Wt(T,"renderActiveDot",function(w,E,I){var R;return k.isValidElement(w)?R=k.cloneElement(w,E):nr(w)?R=w(E):R=se.createElement(sw,E),se.createElement(Vr,{className:"recharts-active-dot",key:I},R)});var S=k.forwardRef(function(E,I){return se.createElement(T,yh({},E,{ref:I}))});return S.displayName=T.displayName,S},VSe=qQ({chartName:"RadarChart",GraphicalChild:_1,axisComponents:[{axisType:"angleAxis",AxisComp:S1},{axisType:"radiusAxis",AxisComp:w1}],formatAxisMap:axe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),FSe=qQ({chartName:"ScatterChart",GraphicalChild:A1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:yw},{axisType:"yAxis",AxisComp:vw},{axisType:"zAxis",AxisComp:gw}],formatAxisMap:P5e});const bw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function cj(t){return"nodeType"in t}function Ui(t){var e,r;return t?zf(t)?t:cj(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function uj(t){const{Document:e}=Ui(t);return t instanceof e}function N1(t){return zf(t)?!1:t instanceof Ui(t).HTMLElement}function HQ(t){return t instanceof Ui(t).SVGElement}function Vf(t){return t?zf(t)?t.document:cj(t)?uj(t)?t:N1(t)||HQ(t)?t.ownerDocument:document:document:document}const lc=bw?k.useLayoutEffect:k.useEffect;function ww(t){const e=k.useRef(t);return lc(()=>{e.current=t}),k.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function qSe(){const t=k.useRef(null),e=k.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=k.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Bg(t,e){e===void 0&&(e=[t]);const r=k.useRef(t);return lc(()=>{r.current!==t&&(r.current=t)},e),r}function E1(t,e){const r=k.useRef();return k.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Vb(t){const e=ww(t),r=k.useRef(null),n=k.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function Fb(t){const e=k.useRef();return k.useEffect(()=>{e.current=t},[t]),e.current}let _T={};function Sw(t,e){return k.useMemo(()=>{if(e)return e;const r=_T[t]==null?0:_T[t]+1;return _T[t]=r,t+"-"+r},[t,e])}function GQ(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const c=Object.entries(s);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const kh=GQ(1),qb=GQ(-1);function HSe(t){return"clientX"in t&&"clientY"in t}function dj(t){if(!t)return!1;const{KeyboardEvent:e}=Ui(t.target);return e&&t instanceof e}function GSe(t){if(!t)return!1;const{TouchEvent:e}=Ui(t.target);return e&&t instanceof e}function $g(t){if(GSe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return HSe(t)?{x:t.clientX,y:t.clientY}:null}const Ug=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Ug.Translate.toString(t),Ug.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),XU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function WSe(t){return t.matches(XU)?t:t.querySelector(XU)}const KSe={display:"none"};function QSe(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:KSe},r)}function XSe(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function YSe(){const[t,e]=k.useState("");return{announce:k.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const WQ=k.createContext(null);function ZSe(t){const e=k.useContext(WQ);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function JSe(){const[t]=k.useState(()=>new Set),e=k.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[k.useCallback(n=>{let{type:a,event:i}=n;t.forEach(s=>{var c;return(c=s[a])==null?void 0:c.call(s,i)})},[t]),e]}const e_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},t_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function r_e(t){let{announcements:e=t_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=e_e}=t;const{announce:i,announcement:s}=YSe(),c=Sw("DndLiveRegion"),[d,h]=k.useState(!1);if(k.useEffect(()=>{h(!0)},[]),ZSe(k.useMemo(()=>({onDragStart(m){let{active:y}=m;i(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:x}=m;e.onDragMove&&i(e.onDragMove({active:y,over:x}))},onDragOver(m){let{active:y,over:x}=m;i(e.onDragOver({active:y,over:x}))},onDragEnd(m){let{active:y,over:x}=m;i(e.onDragEnd({active:y,over:x}))},onDragCancel(m){let{active:y,over:x}=m;i(e.onDragCancel({active:y,over:x}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(QSe,{id:n,value:a.draggable}),se.createElement(XSe,{id:c,announcement:s}));return r?lu.createPortal(p,r):p}var Pa;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Pa||(Pa={}));function Hb(){}function YU(t,e){return k.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function n_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return k.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const No=Object.freeze({x:0,y:0});function a_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function i_e(t,e){const r=$g(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function s_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function o_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function l_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function ZU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const c_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=ZU(e,e.left,e.top),i=[];for(const s of n){const{id:c}=s,d=r.get(c);if(d){const h=a_e(ZU(d),a);i.push({id:c,data:{droppableContainer:s,value:h}})}}return i.sort(s_e)};function u_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),s=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=s*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const d_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:s}=i,c=r.get(s);if(c){const d=u_e(c,e);d>0&&a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(o_e)};function h_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function KQ(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:No}function f_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,c)=>({...s,top:s.top+t*c.y,bottom:s.bottom+t*c.y,left:s.left+t*c.x,right:s.right+t*c.x}),{...r})}}const p_e=f_e(1);function QQ(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function m_e(t,e,r){const n=QQ(e);if(!n)return t;const{scaleX:a,scaleY:i,x:s,y:c}=n,d=t.left-s-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const g_e={ignoreTransform:!1};function j1(t,e){e===void 0&&(e=g_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ui(t).getComputedStyle(t);h&&(r=m_e(r,h,p))}const{top:n,left:a,width:i,height:s,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:s,bottom:c,right:d}}function JU(t){return j1(t,{ignoreTransform:!0})}function y_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function v_e(t,e){return e===void 0&&(e=Ui(t).getComputedStyle(t)),e.position==="fixed"}function x_e(t,e){e===void 0&&(e=Ui(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function hj(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(uj(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!N1(a)||HQ(a)||r.includes(a))return r;const i=Ui(t).getComputedStyle(a);return a!==t&&x_e(a,i)&&r.push(a),v_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function XQ(t){const[e]=hj(t,1);return e??null}function TT(t){return!bw||!t?null:zf(t)?t:cj(t)?uj(t)||t===Vf(t).scrollingElement?window:N1(t)?t:null:null}function YQ(t){return zf(t)?t.scrollX:t.scrollLeft}function ZQ(t){return zf(t)?t.scrollY:t.scrollTop}function s8(t){return{x:YQ(t),y:ZQ(t)}}var Ya;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ya||(Ya={}));function JQ(t){return!bw||!t?!1:t===document.scrollingElement}function eX(t){const e={x:0,y:0},r=JQ(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,s=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:c,maxScroll:n,minScroll:e}}const b_e={x:.2,y:.2};function w_e(t,e,r,n,a){let{top:i,left:s,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=b_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=eX(t),x={x:0,y:0},T={x:0,y:0},S={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+S.height?(x.y=Ya.Backward,T.y=n*Math.abs((e.top+S.height-i)/S.height)):!p&&d>=e.bottom-S.height&&(x.y=Ya.Forward,T.y=n*Math.abs((e.bottom-S.height-d)/S.height)),!y&&c>=e.right-S.width?(x.x=Ya.Forward,T.x=n*Math.abs((e.right-S.width-c)/S.width)):!m&&s<=e.left+S.width&&(x.x=Ya.Backward,T.x=n*Math.abs((e.left+S.width-s)/S.width)),{direction:x,speed:T}}function S_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function tX(t){return t.reduce((e,r)=>kh(e,s8(r)),No)}function __e(t){return t.reduce((e,r)=>e+YQ(r),0)}function T_e(t){return t.reduce((e,r)=>e+ZQ(r),0)}function rX(t,e){if(e===void 0&&(e=j1),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);XQ(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const A_e=[["x",["left","right"],__e],["y",["top","bottom"],T_e]];class fj{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=hj(r),a=tX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,c]of A_e)for(const d of s)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function N_e(t){const{EventTarget:e}=Ui(t);return t instanceof e?t:Vf(t)}function AT(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Qs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Qs||(Qs={}));function ez(t){t.preventDefault()}function E_e(t){t.stopPropagation()}var Nn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Nn||(Nn={}));const nX={start:[Nn.Space,Nn.Enter],cancel:[Nn.Esc],end:[Nn.Space,Nn.Enter,Nn.Tab]},j_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Nn.Right:return{...r,x:r.x+25};case Nn.Left:return{...r,x:r.x-25};case Nn.Down:return{...r,y:r.y+25};case Nn.Up:return{...r,y:r.y-25}}};class aX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new jm(Vf(r)),this.windowListeners=new jm(Ui(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Qs.Resize,this.handleCancel),this.windowListeners.add(Qs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Qs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&rX(n),r(No)}handleKeyDown(e){if(dj(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=nX,coordinateGetter:s=j_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:No;this.referenceCoordinates||(this.referenceCoordinates=p);const m=s(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=qb(m,p),x={x:0,y:0},{scrollableAncestors:T}=n.current;for(const S of T){const w=e.code,{isTop:E,isRight:I,isLeft:R,isBottom:L,maxScroll:O,minScroll:M}=eX(S),N=S_e(S),A={x:Math.min(w===Nn.Right?N.right-N.width/2:N.right,Math.max(w===Nn.Right?N.left:N.left+N.width/2,m.x)),y:Math.min(w===Nn.Down?N.bottom-N.height/2:N.bottom,Math.max(w===Nn.Down?N.top:N.top+N.height/2,m.y))},j=w===Nn.Right&&!I||w===Nn.Left&&!R,z=w===Nn.Down&&!L||w===Nn.Up&&!E;if(j&&A.x!==m.x){const B=S.scrollLeft+y.x,F=w===Nn.Right&&B<=O.x||w===Nn.Left&&B>=M.x;if(F&&!y.y){S.scrollTo({left:B,behavior:c});return}F?x.x=S.scrollLeft-B:x.x=w===Nn.Right?S.scrollLeft-O.x:S.scrollLeft-M.x,x.x&&S.scrollBy({left:-x.x,behavior:c});break}else if(z&&A.y!==m.y){const B=S.scrollTop+y.y,F=w===Nn.Down&&B<=O.y||w===Nn.Up&&B>=M.y;if(F&&!y.x){S.scrollTo({top:B,behavior:c});return}F?x.y=S.scrollTop-B:x.y=w===Nn.Down?S.scrollTop-O.y:S.scrollTop-M.y,x.y&&S.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,kh(qb(m,this.referenceCoordinates),x))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}aX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=nX,onActivation:a}=e,{active:i}=r;const{code:s}=t.nativeEvent;if(n.start.includes(s)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function tz(t){return!!(t&&"distance"in t)}function rz(t){return!!(t&&"delay"in t)}class pj{constructor(e,r,n){var a;n===void 0&&(n=N_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:s}=i;this.props=e,this.events=r,this.document=Vf(s),this.documentListeners=new jm(this.document),this.listeners=new jm(n),this.windowListeners=new jm(Ui(s)),this.initialCoordinates=(a=$g(i))!=null?a:No,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Qs.Resize,this.handleCancel),this.windowListeners.add(Qs.DragStart,ez),this.windowListeners.add(Qs.VisibilityChange,this.handleCancel),this.windowListeners.add(Qs.ContextMenu,ez),this.documentListeners.add(Qs.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(tz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Qs.Click,E_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Qs.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=$g(e))!=null?r:No,h=qb(a,d);if(!n&&c){if(tz(c)){if(c.tolerance!=null&&AT(h,c.tolerance))return this.handleCancel();if(AT(h,c.distance))return this.handleStart()}if(rz(c)&&AT(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),s(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Nn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const k_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class mj extends pj{constructor(e){const{event:r}=e,n=Vf(r.target);super(e,k_e,n)}}mj.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const C_e={move:{name:"mousemove"},end:{name:"mouseup"}};var o8;(function(t){t[t.RightClick=2]="RightClick"})(o8||(o8={}));class O_e extends pj{constructor(e){super(e,C_e,Vf(e.event.target))}}O_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===o8.RightClick?!1:(n==null||n({event:r}),!0)}}];const NT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class iX extends pj{constructor(e){super(e,NT)}static setup(){return window.addEventListener(NT.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(NT.move.name,e)};function e(){}}}iX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var km;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(km||(km={}));var Gb;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gb||(Gb={}));function I_e(t){let{acceleration:e,activator:r=km.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:c=Gb.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const x=M_e({delta:m,disabled:!i}),[T,S]=qSe(),w=k.useRef({x:0,y:0}),E=k.useRef({x:0,y:0}),I=k.useMemo(()=>{switch(r){case km.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case km.DraggableRect:return a}},[r,a,d]),R=k.useRef(null),L=k.useCallback(()=>{const M=R.current;if(!M)return;const N=w.current.x*E.current.x,A=w.current.y*E.current.y;M.scrollBy(N,A)},[]),O=k.useMemo(()=>c===Gb.TreeOrder?[...h].reverse():h,[c,h]);k.useEffect(()=>{if(!i||!h.length||!I){S();return}for(const M of O){if((n==null?void 0:n(M))===!1)continue;const N=h.indexOf(M),A=p[N];if(!A)continue;const{direction:j,speed:z}=w_e(M,A,I,e,y);for(const B of["x","y"])x[B][j[B]]||(z[B]=0,j[B]=0);if(z.x>0||z.y>0){S(),R.current=M,T(L,s),w.current=z,E.current=j;return}}w.current={x:0,y:0},E.current={x:0,y:0},S()},[e,L,n,S,i,s,JSON.stringify(I),JSON.stringify(x),T,h,O,p,JSON.stringify(y)])}const R_e={x:{[Ya.Backward]:!1,[Ya.Forward]:!1},y:{[Ya.Backward]:!1,[Ya.Forward]:!1}};function M_e(t){let{delta:e,disabled:r}=t;const n=Fb(e);return E1(a=>{if(r||!n||!a)return R_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ya.Backward]:a.x[Ya.Backward]||i.x===-1,[Ya.Forward]:a.x[Ya.Forward]||i.x===1},y:{[Ya.Backward]:a.y[Ya.Backward]||i.y===-1,[Ya.Forward]:a.y[Ya.Forward]||i.y===1}}},[r,e,n])}function P_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return E1(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function D_e(t,e){return k.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,n)}));return[...r,...i]},[]),[t,e])}var zg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(zg||(zg={}));var l8;(function(t){t.Optimized="optimized"})(l8||(l8={}));const nz=new Map;function L_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,s]=k.useState(null),{frequency:c,measure:d,strategy:h}=a,p=k.useRef(t),m=w(),y=Bg(m),x=k.useCallback(function(E){E===void 0&&(E=[]),!y.current&&s(I=>I===null?E:I.concat(E.filter(R=>!I.includes(R))))},[y]),T=k.useRef(null),S=E1(E=>{if(m&&!r)return nz;if(!E||E===nz||p.current!==t||i!=null){const I=new Map;for(let R of t){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){I.set(R.id,R.rect.current);continue}const L=R.node.current,O=L?new fj(d(L),L):null;R.rect.current=O,O&&I.set(R.id,O)}return I}return E},[t,i,r,m,d]);return k.useEffect(()=>{p.current=t},[t]),k.useEffect(()=>{m||x()},[r,m]),k.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),k.useEffect(()=>{m||typeof c!="number"||T.current!==null||(T.current=setTimeout(()=>{x(),T.current=null},c))},[c,m,x,...n]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:i!=null};function w(){switch(h){case zg.Always:return!1;case zg.BeforeDragging:return r;default:return!r}}}function gj(t,e){return E1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function B_e(t,e){return gj(t,e)}function $_e(t){let{callback:e,disabled:r}=t;const n=ww(e),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function _w(t){let{callback:e,disabled:r}=t;const n=ww(e),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function U_e(t){return new fj(j1(t),t)}function az(t,e,r){e===void 0&&(e=U_e);const[n,a]=k.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const s=$_e({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=_w({callback:i});return lc(()=>{i(),t?(c==null||c.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),s==null||s.disconnect())},[t]),n}function z_e(t){const e=gj(t);return KQ(t,e)}const iz=[];function V_e(t){const e=k.useRef(t),r=E1(n=>t?n&&n!==iz&&t&&e.current&&t.parentNode===e.current.parentNode?n:hj(t):iz,[t]);return k.useEffect(()=>{e.current=t},[t]),r}function F_e(t){const[e,r]=k.useState(null),n=k.useRef(t),a=k.useCallback(i=>{const s=TT(i.target);s&&r(c=>c?(c.set(s,s8(s)),new Map(c)):null)},[]);return k.useEffect(()=>{const i=n.current;if(t!==i){s(i);const c=t.map(d=>{const h=TT(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,s8(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{s(t),s(i)};function s(c){c.forEach(d=>{const h=TT(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),k.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,s)=>kh(i,s),No):tX(t):No,[t,e])}function sz(t,e){e===void 0&&(e=[]);const r=k.useRef(null);return k.useEffect(()=>{r.current=null},e),k.useEffect(()=>{const n=t!==No;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?qb(t,r.current):No}function q_e(t){k.useEffect(()=>{if(!bw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function H_e(t,e){return k.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,e)},r},{}),[t,e])}function sX(t){return k.useMemo(()=>t?y_e(t):null,[t])}const oz=[];function G_e(t,e){e===void 0&&(e=j1);const[r]=t,n=sX(r?Ui(r):null),[a,i]=k.useState(oz);function s(){i(()=>t.length?t.map(d=>JQ(d)?n:new fj(e(d),d)):oz)}const c=_w({callback:s});return lc(()=>{c==null||c.disconnect(),s(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function oX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return N1(e)?e:t}function W_e(t){let{measure:e}=t;const[r,n]=k.useState(null),a=k.useCallback(h=>{for(const{target:p}of h)if(N1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),i=_w({callback:a}),s=k.useCallback(h=>{const p=oX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=Vb(s);return k.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const K_e=[{sensor:mj,options:{}},{sensor:aX,options:{}}],Q_e={current:{}},tx={draggable:{measure:JU},droppable:{measure:JU,strategy:zg.WhileDragging,frequency:l8.Optimized},dragOverlay:{measure:j1}};class Cm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const X_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tx,measureDroppableContainers:Hb,windowRect:null,measuringScheduled:!1},lX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hb,draggableNodes:new Map,over:null,measureDroppableContainers:Hb},k1=k.createContext(lX),cX=k.createContext(X_e);function Y_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cm}}}function Z_e(t,e){switch(e.type){case Pa.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Pa.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Pa.DragEnd:case Pa.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pa.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Cm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Pa.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new Cm(t.droppable.containers);return s.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:s}}}case Pa.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Cm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function J_e(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=k.useContext(k1),i=Fb(n),s=Fb(r==null?void 0:r.id);return k.useEffect(()=>{if(!e&&!n&&i&&s!=null){if(!dj(i)||document.activeElement===i.target)return;const c=a.get(s);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=WSe(p);if(m){m.focus();break}}})}},[n,e,a,s,i]),null}function uX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function eTe(t){return k.useMemo(()=>({draggable:{...tx.draggable,...t==null?void 0:t.draggable},droppable:{...tx.droppable,...t==null?void 0:t.droppable},dragOverlay:{...tx.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function tTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=k.useRef(!1),{x:s,y:c}=typeof a=="boolean"?{x:a,y:a}:a;lc(()=>{if(!s&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=KQ(p,n);if(s||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=XQ(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,s,c,n,r])}const Tw=k.createContext({...No,scaleX:1,scaleY:1});var Zc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Zc||(Zc={}));const rTe=k.memo(function(e){var r,n,a,i;let{id:s,accessibility:c,autoScroll:d=!0,children:h,sensors:p=K_e,collisionDetection:m=d_e,measuring:y,modifiers:x,...T}=e;const S=k.useReducer(Z_e,void 0,Y_e),[w,E]=S,[I,R]=JSe(),[L,O]=k.useState(Zc.Uninitialized),M=L===Zc.Initialized,{draggable:{active:N,nodes:A,translate:j},droppable:{containers:z}}=w,B=N!=null?A.get(N):null,F=k.useRef({initial:null,translated:null}),U=k.useMemo(()=>{var ur;return N!=null?{id:N,data:(ur=B==null?void 0:B.data)!=null?ur:Q_e,rect:F}:null},[N,B]),X=k.useRef(null),[W,H]=k.useState(null),[Z,ie]=k.useState(null),fe=Bg(T,Object.values(T)),me=Sw("DndDescribedBy",s),K=k.useMemo(()=>z.getEnabled(),[z]),te=eTe(y),{droppableRects:re,measureDroppableContainers:Ne,measuringScheduled:ae}=L_e(K,{dragging:M,dependencies:[j.x,j.y],config:te.droppable}),xe=P_e(A,N),ye=k.useMemo(()=>Z?$g(Z):null,[Z]),Ue=Cr(),ee=B_e(xe,te.draggable.measure);tTe({activeNode:N!=null?A.get(N):null,config:Ue.layoutShiftCompensation,initialRect:ee,measure:te.draggable.measure});const Me=az(xe,te.draggable.measure,ee),ne=az(xe?xe.parentElement:null),pe=k.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Xe=z.getNodeFor((r=pe.current.over)==null?void 0:r.id),Qe=W_e({measure:te.dragOverlay.measure}),St=(n=Qe.nodeRef.current)!=null?n:xe,ct=M?(a=Qe.rect)!=null?a:Me:null,_t=!!(Qe.nodeRef.current&&Qe.rect),Ee=z_e(_t?null:Me),Ve=sX(St?Ui(St):null),nt=V_e(M?Xe??xe:null),mt=G_e(nt),Je=uX(x,{transform:{x:j.x-Ee.x,y:j.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:Z,active:U,activeNodeRect:Me,containerNodeRect:ne,draggingNodeRect:ct,over:pe.current.over,overlayNodeRect:Qe.rect,scrollableAncestors:nt,scrollableAncestorRects:mt,windowRect:Ve}),de=ye?kh(ye,j):null,Ye=F_e(nt),At=sz(Ye),xt=sz(Ye,[Me]),gt=kh(Je,At),Vt=ct?p_e(ct,Je):null,cr=U&&Vt?m({active:U,collisionRect:Vt,droppableRects:re,droppableContainers:K,pointerCoordinates:de}):null,Hr=l_e(cr,"id"),[Pr,we]=k.useState(null),ot=_t?Je:kh(Je,xt),bt=h_e(ot,(i=Pr==null?void 0:Pr.rect)!=null?i:null,Me),Ct=k.useRef(null),Lt=k.useCallback((ur,Bt)=>{let{sensor:it,options:Kt}=Bt;if(X.current==null)return;const br=A.get(X.current);if(!br)return;const yr=ur.nativeEvent,Or=new it({active:X.current,activeNode:br,event:yr,options:Kt,context:pe,onAbort(er){if(!A.get(er))return;const{onDragAbort:cn}=fe.current,Cn={id:er};cn==null||cn(Cn),I({type:"onDragAbort",event:Cn})},onPending(er,ga,cn,Cn){if(!A.get(er))return;const{onDragPending:Ar}=fe.current,un={id:er,constraint:ga,initialCoordinates:cn,offset:Cn};Ar==null||Ar(un),I({type:"onDragPending",event:un})},onStart(er){const ga=X.current;if(ga==null)return;const cn=A.get(ga);if(!cn)return;const{onDragStart:Cn}=fe.current,ti={activatorEvent:yr,active:{id:ga,data:cn.data,rect:F}};lu.unstable_batchedUpdates(()=>{Cn==null||Cn(ti),O(Zc.Initializing),E({type:Pa.DragStart,initialCoordinates:er,active:ga}),I({type:"onDragStart",event:ti}),H(Ct.current),ie(yr)})},onMove(er){E({type:Pa.DragMove,coordinates:er})},onEnd:kn(Pa.DragEnd),onCancel:kn(Pa.DragCancel)});Ct.current=Or;function kn(er){return async function(){const{active:cn,collisions:Cn,over:ti,scrollAdjustedTranslate:Ar}=pe.current;let un=null;if(cn&&Ar){const{cancelDrop:ri}=fe.current;un={activatorEvent:yr,active:cn,collisions:Cn,delta:Ar,over:ti},er===Pa.DragEnd&&typeof ri=="function"&&await Promise.resolve(ri(un))&&(er=Pa.DragCancel)}X.current=null,lu.unstable_batchedUpdates(()=>{E({type:er}),O(Zc.Uninitialized),we(null),H(null),ie(null),Ct.current=null;const ri=er===Pa.DragEnd?"onDragEnd":"onDragCancel";if(un){const Kn=fe.current[ri];Kn==null||Kn(un),I({type:ri,event:un})}})}}},[A]),et=k.useCallback((ur,Bt)=>(it,Kt)=>{const br=it.nativeEvent,yr=A.get(Kt);if(X.current!==null||!yr||br.dndKit||br.defaultPrevented)return;const Or={active:yr};ur(it,Bt.options,Or)===!0&&(br.dndKit={capturedBy:Bt.sensor},X.current=Kt,Lt(it,Bt))},[A,Lt]),mr=D_e(p,et);q_e(p),lc(()=>{Me&&L===Zc.Initializing&&O(Zc.Initialized)},[Me,L]),k.useEffect(()=>{const{onDragMove:ur}=fe.current,{active:Bt,activatorEvent:it,collisions:Kt,over:br}=pe.current;if(!Bt||!it)return;const yr={active:Bt,activatorEvent:it,collisions:Kt,delta:{x:gt.x,y:gt.y},over:br};lu.unstable_batchedUpdates(()=>{ur==null||ur(yr),I({type:"onDragMove",event:yr})})},[gt.x,gt.y]),k.useEffect(()=>{const{active:ur,activatorEvent:Bt,collisions:it,droppableContainers:Kt,scrollAdjustedTranslate:br}=pe.current;if(!ur||X.current==null||!Bt||!br)return;const{onDragOver:yr}=fe.current,Or=Kt.get(Hr),kn=Or&&Or.rect.current?{id:Or.id,rect:Or.rect.current,data:Or.data,disabled:Or.disabled}:null,er={active:ur,activatorEvent:Bt,collisions:it,delta:{x:br.x,y:br.y},over:kn};lu.unstable_batchedUpdates(()=>{we(kn),yr==null||yr(er),I({type:"onDragOver",event:er})})},[Hr]),lc(()=>{pe.current={activatorEvent:Z,active:U,activeNode:xe,collisionRect:Vt,collisions:cr,droppableRects:re,draggableNodes:A,draggingNode:St,draggingNodeRect:ct,droppableContainers:z,over:Pr,scrollableAncestors:nt,scrollAdjustedTranslate:gt},F.current={initial:ct,translated:Vt}},[U,xe,cr,Vt,A,St,ct,re,z,Pr,nt,gt]),I_e({...Ue,delta:j,draggingRect:Vt,pointerCoordinates:de,scrollableAncestors:nt,scrollableAncestorRects:mt});const wn=k.useMemo(()=>({active:U,activeNode:xe,activeNodeRect:Me,activatorEvent:Z,collisions:cr,containerNodeRect:ne,dragOverlay:Qe,draggableNodes:A,droppableContainers:z,droppableRects:re,over:Pr,measureDroppableContainers:Ne,scrollableAncestors:nt,scrollableAncestorRects:mt,measuringConfiguration:te,measuringScheduled:ae,windowRect:Ve}),[U,xe,Me,Z,cr,ne,Qe,A,z,re,Pr,Ne,nt,mt,te,ae,Ve]),Dn=k.useMemo(()=>({activatorEvent:Z,activators:mr,active:U,activeNodeRect:Me,ariaDescribedById:{draggable:me},dispatch:E,draggableNodes:A,over:Pr,measureDroppableContainers:Ne}),[Z,mr,U,Me,E,me,A,Pr,Ne]);return se.createElement(WQ.Provider,{value:R},se.createElement(k1.Provider,{value:Dn},se.createElement(cX.Provider,{value:wn},se.createElement(Tw.Provider,{value:bt},h)),se.createElement(J_e,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(r_e,{...c,hiddenTextDescribedById:me}));function Cr(){const ur=(W==null?void 0:W.autoScrollEnabled)===!1,Bt=typeof d=="object"?d.enabled===!1:d===!1,it=M&&!ur&&!Bt;return typeof d=="object"?{...d,enabled:it}:{enabled:it}}}),nTe=k.createContext(null),lz="button",aTe="Draggable";function dX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Sw(aTe),{activators:s,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=k.useContext(k1),{role:x=lz,roleDescription:T="draggable",tabIndex:S=0}=a??{},w=(d==null?void 0:d.id)===e,E=k.useContext(w?Tw:nTe),[I,R]=Vb(),[L,O]=Vb(),M=H_e(s,e),N=Bg(r);lc(()=>(m.set(e,{id:e,key:i,node:I,activatorNode:L,data:N}),()=>{const j=m.get(e);j&&j.key===i&&m.delete(e)}),[m,e]);const A=k.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":n,"aria-pressed":w&&x===lz?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[n,x,S,w,T,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:A,isDragging:w,listeners:n?void 0:M,node:I,over:y,setNodeRef:R,setActivatorNodeRef:O,transform:E}}function iTe(){return k.useContext(cX)}const sTe="Droppable",oTe={timeout:25};function yj(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Sw(sTe),{active:s,dispatch:c,over:d,measureDroppableContainers:h}=k.useContext(k1),p=k.useRef({disabled:r}),m=k.useRef(!1),y=k.useRef(null),x=k.useRef(null),{disabled:T,updateMeasurementsFor:S,timeout:w}={...oTe,...a},E=Bg(S??n),I=k.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),x.current=null},w)},[w]),R=_w({callback:I,disabled:T||!s}),L=k.useCallback((A,j)=>{R&&(j&&(R.unobserve(j),m.current=!1),A&&R.observe(A))},[R]),[O,M]=Vb(L),N=Bg(e);return k.useEffect(()=>{!R||!O.current||(R.disconnect(),m.current=!1,R.observe(O.current))},[O,R]),k.useEffect(()=>(c({type:Pa.RegisterDroppable,element:{id:n,key:i,disabled:r,node:O,rect:y,data:N}}),()=>c({type:Pa.UnregisterDroppable,key:i,id:n})),[n]),k.useEffect(()=>{r!==p.current.disabled&&(c({type:Pa.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:s,rect:y,isOver:(d==null?void 0:d.id)===n,node:O,over:d,setNodeRef:M}}function lTe(t){let{animation:e,children:r}=t;const[n,a]=k.useState(null),[i,s]=k.useState(null),c=Fb(r);return!r&&!n&&c&&a(c),lc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?k.cloneElement(n,{ref:s}):null)}const cTe={x:0,y:0,scaleX:1,scaleY:1};function uTe(t){let{children:e}=t;return se.createElement(k1.Provider,{value:lX},se.createElement(Tw.Provider,{value:cTe},e))}const dTe={position:"fixed",touchAction:"none"},hTe=t=>dj(t)?"transform 250ms ease":void 0,fTe=k.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:c,style:d,transform:h,transition:p=hTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},y={...dTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:Ug.Transform.toString(m),transformOrigin:a&&n?i_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:s,style:y,ref:e},i)}),pTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:s}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);s!=null&&s.active&&r.node.classList.remove(s.active)}},mTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Ug.Transform.toString(e)},{transform:Ug.Transform.toString(r)}]},gTe={duration:250,easing:"ease",keyframes:mTe,sideEffects:pTe({styles:{active:{opacity:"0"}}})};function yTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return ww((i,s)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=oX(s);if(!h)return;const{transform:p}=Ui(s).getComputedStyle(s),m=QQ(p);if(!m)return;const y=typeof e=="function"?e:vTe(e);return rX(d,a.draggable.measure),y({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function vTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...gTe,...t};return i=>{let{active:s,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-s.rect.left,y:c.rect.top-s.rect.top},m={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},x=a({...h,active:s,dragOverlay:c,transform:{initial:d,final:y}}),[T]=x,S=x[x.length-1];if(JSON.stringify(T)===JSON.stringify(S))return;const w=n==null?void 0:n({active:s,dragOverlay:c,...h}),E=c.node.animate(x,{duration:e,easing:r,fill:"forwards"});return new Promise(I=>{E.onfinish=()=>{w==null||w(),I()}})}}let cz=0;function xTe(t){return k.useMemo(()=>{if(t!=null)return cz++,cz},[t])}const bTe=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggableNodes:T,droppableContainers:S,dragOverlay:w,over:E,measuringConfiguration:I,scrollableAncestors:R,scrollableAncestorRects:L,windowRect:O}=iTe(),M=k.useContext(Tw),N=xTe(m==null?void 0:m.id),A=uX(s,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggingNodeRect:w.rect,over:E,overlayNodeRect:w.rect,scrollableAncestors:R,scrollableAncestorRects:L,transform:M,windowRect:O}),j=gj(y),z=yTe({config:n,draggableNodes:T,droppableContainers:S,measuringConfiguration:I}),B=j?w.setRef:void 0;return se.createElement(uTe,null,se.createElement(lTe,{animation:z},m&&N?se.createElement(fTe,{key:N,id:m.id,ref:B,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:j,style:{zIndex:h,...a},transform:A},r):null))});function uz(t,e=800){const[r,n]=k.useState(t),a=k.useRef(t),i=k.useRef(0);return k.useEffect(()=>{const s=a.current,c=t;if(a.current=t,s===c)return;const d=performance.now(),h=c-s,p=m=>{const y=m-d,x=Math.min(y/e,1),T=1-Math.pow(1-x,3);n(Math.round(s+h*T)),x<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const hX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],fX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],wTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],dz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},sh=t=>t?dz[t.rarity]||dz.COMMON:null,STe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Vg=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",c=s==="B",d=s==="C",h=hX[(e==null?void 0:e.skinTone)??0],p=fX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",x=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,E=t==null?void 0:t.BELT,I=t==null?void 0:t.AMULET,R=k.useMemo(()=>[x,T,S,w,E,I].filter(Boolean).length,[x,T,S,w,E,I]),L=k.useMemo(()=>[x,T,S,w,E,I].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[x,T,S,w,E,I]),O=Math.min(1,.2+R*.13),M=c?23:21,N=k.useMemo(()=>STe(m,M),[m,M]);return o.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[o.jsxs("defs",{children:[o.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[o.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),o.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),o.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[o.jsx("stop",{offset:"0%",stopColor:h}),o.jsx("stop",{offset:"100%",stopColor:y})]}),o.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:O}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:O*.3}),o.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),o.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:p}),o.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),o.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&o.jsxs("g",{filter:"url(#av-bloom)",children:[o.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),o.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=sh(w);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),o.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),o.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),o.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),o.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),o.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),o.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=sh(T);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),o.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),o.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),o.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&o.jsxs("g",{children:[o.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),E?(()=>{const A=sh(E);return o.jsxs("g",{children:[o.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),o.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),o.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),o.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():o.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),o.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const A=sh(S);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),o.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),R>0&&o.jsxs(o.Fragment,{children:[o.jsx("g",{filter:"url(#av-bloom)",children:o.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:o.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),o.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:O*.7,children:o.jsx("animate",{attributeName:"fillOpacity",values:`${O*.7};${O*.3};${O*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),R>=3&&o.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),o.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),I&&(()=>{const A=sh(I);return o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),o.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:o.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:o.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),o.jsxs("g",{children:[N.back&&o.jsx("path",{d:N.back,fill:"url(#av-hair)",opacity:"0.8"}),o.jsx("ellipse",{cx:"100",cy:"50",rx:M,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),o.jsx("ellipse",{cx:100-M-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsx("ellipse",{cx:100+M+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsxs("g",{children:[o.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),o.jsx("path",{d:N.main,fill:"url(#av-hair)"}),N.accent&&o.jsx("path",{d:N.accent,fill:"url(#av-hair)",opacity:"0.9"}),x&&(()=>{const A=sh(x),j=x.visualId||"";return o.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:j.includes("helm")?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M${100-M-2} 28 Q100 10 ${100+M+2} 28 L${100+M+4} 62 Q100 72 ${100-M-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),o.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):j.includes("visor")?o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&o.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,j)=>o.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+j*.2}s`,repeatCount:"indefinite"})},j))]}),L&&o.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,j)=>{const z=A*Math.PI/180,B=100+Math.cos(z)*50,F=145+Math.sin(z)*75;return o.jsxs("circle",{cx:B,cy:F,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[o.jsx("animate",{attributeName:"cy",values:`${F};${F-18};${F}`,dur:`${2+j*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+j*.3}s`,repeatCount:"indefinite"})]},j)})}),r>=5&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),o.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,j)=>{const z=j*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),B=100+Math.cos(z)*(38+j*3),F=140+Math.sin(z)*(55+j*2),U=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return o.jsxs("circle",{cx:B,cy:F,r:"1",fill:U,fillOpacity:"0.35",children:[o.jsx("animate",{attributeName:"cy",values:`${F};${F-12};${F}`,dur:`${2+j*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+j*.4}s`,repeatCount:"indefinite"})]},j)})}),n&&a&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,j)=>{const z=60+Math.random()*80,B=20+Math.random()*260;return o.jsxs("circle",{cx:z,cy:B,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[o.jsx("animate",{attributeName:"cy",values:`${B};${B-25};${B}`,dur:`${3+j*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+j*.5}s`,repeatCount:"indefinite"})]},`c-${j}`)})})]})]})},vj=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],_Te=t=>vj.filter(e=>!e.isSecret||t.includes(e.id)),Cv={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},pX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],hz=(t,e)=>{const r=pX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},TTe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],mX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of TTe){const a=n.itemIds.filter(s=>r.includes(s)).length,i=n.bonuses.filter(s=>a>=s.count).sort((s,c)=>c.count-s.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},ATe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],fz=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],gX=t=>[...fz].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||fz[0],NTe=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,ETe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},jTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=k.useMemo(()=>_Te(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=vj.filter(s=>!s.isSecret).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(ec,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),o.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(s=>{const c=r.filter(h=>h.category===s);if(c.length===0)return null;const d=ETe[s];return o.jsxs("div",{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[o.jsx("span",{children:d.icon})," ",d.label]}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[o.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600"})]}),o.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&o.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&o.jsxs("div",{className:"text-right shrink-0",children:[o.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&o.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},s)})]})},kTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},CTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=k.useState(t||null),[i,s]=k.useState(null),c=mi(),{confirm:d}=al(),h=!!t,p=n||"THEORIST",m=pX.filter(T=>T.specialization===p),y=[1,2,3,4],x=async T=>{if(!i){if(!h){const S=Cv[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${S} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${S}`,cancelLabel:"Go Back",variant:"warning"}))return}s(T);try{await Pe.unlockSkill(T,p),zn.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}s(null)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[o.jsx($a,{className:"w-4 h-4 text-yellow-400"}),o.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[o.jsx(Is,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),o.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",o.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx(Rn,{className:"w-4 h-4 text-green-400"}),o.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",o.jsxs("span",{className:"font-bold text-white",children:[Cv[t].icon," ",Cv[t].name]})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Cv).map(([T,S])=>{const w=p===T,E=h&&t!==T;return o.jsxs("button",{onClick:()=>!E&&a(T),disabled:E,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${kTe[T]} bg-opacity-10`:E?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:S.icon}),o.jsx("span",{className:"font-bold text-sm text-white",children:S.name}),E&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:S.description}),!h&&w&&o.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},T)})}),o.jsx("div",{className:"space-y-4",children:y.map(T=>{const S=m.filter(w=>w.tier===T);return o.jsxs("div",{children:[o.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",T]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(w=>{const E=r.includes(w.id),I=!E&&hz(w.id,r)&&e>=w.cost,R=hz(w.id,r);return o.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${E?"border-green-500/30 bg-green-500/10":I?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>I&&x(w.id),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm",children:w.icon}),o.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),E&&o.jsx(Rn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!E&&!R&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!E&&o.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},T)})})]})},ET=25,Ov=ATe,OTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=k.useState(!1),[i,s]=k.useState(0),[c,d]=k.useState(null),h=k.useRef(null),p=mi(),m=new Date().toISOString().split("T")[0],y=e===m,x=!y&&t>=ET&&!n,T=async()=>{if(x){a(!0),d(null),zn.wheelSpin();try{const E=await Pe.spinFortuneWheel(r),I=Ov.findIndex(O=>O.id===E.prizeId),R=360/Ov.length,L=360*5+(360-I*R-R/2);s(O=>O+L),setTimeout(()=>{zn.wheelPrize(),d(E.rewardDescription),a(!1),E.prizeType!=="NOTHING"?p.success(`You won: ${E.rewardDescription}!`):p.info(E.rewardDescription)},4e3)}catch(E){a(!1),p.error(E instanceof Error?E.message:"Spin failed")}}},S=360/Ov.length,w=140;return o.jsxs("div",{className:"flex flex-col items-center gap-6",children:[o.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",ET," Flux for a daily spin"]}),o.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[o.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),o.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:o.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Ov.map((E,I)=>{const R=(I*S-90)*(Math.PI/180),L=((I+1)*S-90)*(Math.PI/180),O=w*Math.cos(R),M=w*Math.sin(R),N=w*Math.cos(L),A=w*Math.sin(L),j=S>180?1:0,z=((I+.5)*S-90)*(Math.PI/180),B=w*.65*Math.cos(z),F=w*.65*Math.sin(z),U=(I+.5)*S;return o.jsxs("g",{children:[o.jsx("path",{d:`M0,0 L${O},${M} A${w},${w} 0 ${j},1 ${N},${A} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),o.jsx("text",{x:B,y:F,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${U}, ${B}, ${F})`,children:E.label})]},E.id)}),o.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),o.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&o.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[o.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),o.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),o.jsx("button",{onClick:T,disabled:!x,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${x?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${ET} Flux)`})]})};function ITe(t,e){const[r,n]=k.useState(e);return k.useEffect(()=>{const a=Pe.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function RTe(t){const[e,r]=k.useState([]);return k.useEffect(()=>{const n=Pe.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const MTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var T;const i=ITe(t.id,t.maxHp),s=RTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=s.reduce((S,w)=>(S[w.userId]||(S[w.userId]={name:w.userName,total:0}),S[w.userId].total+=w.damage,S),{}),m=Object.entries(p).sort(([,S],[,w])=>w.total-S.total).slice(0,5),y=((T=p[e])==null?void 0:T.total)||0,x=(a==null?void 0:a.bossId)===t.id;return o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[x&&o.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[o.jsx(Os,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),x&&a&&o.jsx("div",{className:"text-center animate-bounce",children:o.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),y>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(To,{className:"w-3 h-3"}),"Your total damage: ",o.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[o.jsx(Es,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([S,w],E)=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:`${S===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",E+1," ",w.name]}),o.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},S))]}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),o.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[o.jsx(Bd,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),o.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},PTe=({userId:t,userName:e,classType:r})=>{const[n,a]=k.useState([]),[i,s]=k.useState(null),[c,d]=k.useState(null),h=mi();k.useEffect(()=>{let m;try{m=Pe.subscribeToBossEncounters(y=>{const x=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");a(x)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){s(m);try{const y=await Pe.dealBossDamage(m,e,r||"");if(zn.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)zn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const x=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${x} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[o.jsx(hle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>o.jsx(MTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},DTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:s,bossHpPercent:c})=>{const[d,h]=k.useState(!1),[p,m]=k.useState(!1),[y,x]=k.useState(null),T=(n==null?void 0:n.bossType)||"BRUTE",S=(n==null?void 0:n.hue)??0;return k.useEffect(()=>{if(a==="player-attack"&&i){h(!0),x({value:i,side:"right"});const w=setTimeout(()=>h(!1),500),E=setTimeout(()=>x(null),1200);return()=>{clearTimeout(w),clearTimeout(E)}}else if(a==="boss-attack"&&i){m(!0),x({value:i,side:"left"});const w=setTimeout(()=>m(!1),500),E=setTimeout(()=>x(null),1200);return()=>{clearTimeout(w),clearTimeout(E)}}},[a,i]),o.jsxs("div",{className:"relative w-full h-32 flex items-end justify-between px-2 overflow-hidden select-none",children:[o.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),o.jsxs("div",{className:`relative w-16 h-24 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-8 scale-110":""} ${p?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2rem) scale(1.1)":void 0},children:[o.jsx(Vg,{equipped:e,appearance:t,evolutionLevel:r}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${s>50?"bg-emerald-500":s>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s}%`}})})]}),o.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[o.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),d&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[o.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),o.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),o.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),p&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[o.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),o.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),y&&o.jsxs("div",{className:`absolute text-lg font-black animate-[floatUp_1.2s_ease-out_forwards] ${y.side==="right"?"right-4 text-amber-400":"left-4 text-red-400"}`,style:{top:"10%"},children:["-",y.value]})]}),o.jsxs("div",{className:`relative w-20 h-28 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-8 scale-110":""} ${d?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2rem) scale(1.1)":d?void 0:"scaleX(-1)",...d?{}:{filter:void 0}},children:[o.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:o.jsx(vG,{bossType:T,hue:S})}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),o.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
            `})]})};function LTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function BTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function $Te(t,e){const r=[...t],n=LTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function UTe(t,e){const[r,n]=k.useState(e);return k.useEffect(()=>{const a=Pe.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const zTe=({modifier:t})=>{const e=$T[t.type];return e?o.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[o.jsx(T2,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&o.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},VTe=({quiz:t,progress:e})=>{var m,y;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,s=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=s>0?Math.round(c/s*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[o.jsxs("div",{className:"text-center py-4",children:[o.jsx(Jq,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),o.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&o.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[o.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),o.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((y=t.rewards)==null?void 0:y.flux)||0)*(a||1))," Flux"]}),a&&a>1&&o.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[o.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Im," attempts and ",Rm," correct answer"]})]}):null,r&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(B7,{className:"w-3 h-3"})," Damage Dealt"]}),o.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Accuracy"]}),o.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",s]})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx($a,{className:"w-3 h-3"})," Critical Hits"]}),o.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(To,{className:"w-3 h-3"})," Damage Mitigated"]}),o.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(j2,{className:"w-3 h-3"})," Longest Streak"]}),o.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Qv,{className:"w-3 h-3"})," Healing Received"]}),o.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&o.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(x=>{const T=r.correctByDifficulty[x]||0,S=r.incorrectByDifficulty[x]||0,w=T+S,E=w>0?Math.round(T/w*100):0;return o.jsxs("div",{className:`rounded-lg p-2 border text-center ${x==="EASY"?"border-green-500/20 bg-green-500/5":x==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[o.jsx("div",{className:`text-[9px] font-bold uppercase ${x==="EASY"?"text-green-400":x==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:x}),o.jsxs("div",{className:"text-sm font-black text-white",children:[E,"%"]}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[T,"/",w]})]},x)})})]})},FTe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:s})=>{var te,re,Ne,ae;const c=UTe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>$Te(t.questions,BTe(e+t.id)),[t.questions,e,t.id]),[p,m]=k.useState(null),[y,x]=k.useState(!1);k.useEffect(()=>{const xe=Pe.subscribeToBossQuizProgress(e,t.id,ye=>{m(ye),x(!0)});return()=>xe()},[e,t.id]);const T=se.useMemo(()=>n?gG(n).maxHp:100,[n]),[S,w]=k.useState(-1),[E,I]=k.useState(-1),[R,L]=k.useState(T),[O,M]=k.useState(!1),[N,A]=k.useState(null),[j,z]=k.useState(null),[B,F]=k.useState(!1),[U,X]=k.useState("idle"),[W,H]=k.useState(void 0);k.useEffect(()=>{if(y&&S===-1)if(p){const xe=new Set(p.answeredQuestions||[]),ye=h.findIndex(Me=>!xe.has(Me.id));w(ye===-1?h.length:ye);const Ue=p.currentHp,ee=p.maxHp>0?p.maxHp:T;L(ee),Ue>=0?(I(Ue),Ue===0&&M(!0)):I(ee)}else w(0),I(T),L(T)},[y]),k.useEffect(()=>{L(T)},[T]);const Z=R>0?(E===-1?R:E)/R*100:100,ie=S>=0?h[S%h.length]:void 0,fe=S>=h.length,me=c<=0,K=async(xe,ye,Ue)=>{B||O||(F(!0),A(Ue),r(xe,ye,Ue,{onResult:ee=>{ee.playerHp!==void 0&&I(ee.playerHp),ee.playerMaxHp!==void 0&&L(ee.playerMaxHp),ee.knockedOut&&M(!0),ee.correct?(H(ee.damage),X("player-attack"),setTimeout(()=>X("idle"),800)):!ee.shieldBlocked&&ee.playerDamage&&ee.playerDamage>0&&(H(ee.playerDamage),X("boss-attack"),setTimeout(()=>X("idle"),800)),z(ee),ee.knockedOut||setTimeout(()=>{w(Me=>Me+1),A(null),z(null)},2e3),F(!1)}}))};return o.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!me&&o.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((xe,ye)=>o.jsx(zTe,{modifier:xe},ye))}),me?o.jsx(VTe,{quiz:t,progress:p}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:o.jsx(DTe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:s,bossAppearance:t.bossAppearance,attackState:U,damage:W,playerHpPercent:Z,bossHpPercent:d})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[o.jsx(Qv,{className:"w-3 h-3"})," Your HP: ",E===-1?R:E]}),o.jsx("span",{className:"text-gray-600",children:R})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:o.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${Z>50?"bg-gradient-to-r from-emerald-600 to-green-500":Z>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${Z}%`}})})]}),O?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(qh,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):fe?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Rn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ie?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:["Question ",S+1," / ",h.length]}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ie.difficulty==="HARD"?"bg-red-500/20 text-red-400":ie.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ie.difficulty,ie.damageBonus?` (+${ie.damageBonus} dmg)`:""]})]}),o.jsx("p",{className:"text-sm text-white font-medium",children:ie.stem}),o.jsx("div",{className:"space-y-2",children:ie.options.map((xe,ye)=>{const Ue=N===ye,ee=j&&Ue,Me=j==null?void 0:j.correct;return o.jsx("button",{onClick:()=>K(t.id,ie.id,ye),disabled:B||!!j||O,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ee&&Me?"border-green-500/50 bg-green-500/10 text-green-400":ee&&!Me?"border-red-500/50 bg-red-500/10 text-red-400":Ue?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+ye),"."]}),o.jsx("span",{children:xe}),ee&&Me&&o.jsx(Rn,{className:"w-4 h-4 text-green-400 ml-auto"}),ee&&!Me&&o.jsx(qh,{className:"w-4 h-4 text-red-400 ml-auto"})]})},ye)})}),j&&j.correct&&o.jsxs("div",{className:"text-center space-y-1",children:[o.jsxs("div",{className:"text-sm text-amber-400 font-bold animate-bounce",children:[o.jsx($a,{className:"w-4 h-4 inline mr-1"}),j.isCrit?"CRITICAL HIT! ":"","-",j.damage," HP to boss!"]}),j.healAmount&&j.healAmount>0&&o.jsxs("div",{className:"text-xs text-emerald-400 font-bold",children:[o.jsx(Qv,{className:"w-3 h-3 inline mr-1"})," +",j.healAmount," HP healed"]})]}),j&&!j.correct&&j.shieldBlocked&&o.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[o.jsx(To,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),j&&!j.correct&&!j.shieldBlocked&&j.playerDamage&&j.playerDamage>0&&o.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[o.jsx(Qv,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",j.playerDamage," damage!"]})]}):null,p&&!me&&!O&&!fe&&o.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((te=p.combatStats)==null?void 0:te.questionsAttempted)||0)<Im||(((re=p.combatStats)==null?void 0:re.questionsCorrect)||0)<Rm?o.jsxs("span",{children:["Rewards: ",((Ne=p.combatStats)==null?void 0:Ne.questionsAttempted)||0,"/",Im," attempts"," ",""," ",((ae=p.combatStats)==null?void 0:ae.questionsCorrect)||0,"/",Rm," correct needed"]}):o.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsx("span",{children:"Defeat rewards:"}),o.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),o.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},qTe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:s,playerEvolutionLevel:c})=>{const[d,h]=k.useState([]),p=mi();k.useEffect(()=>{let x;try{x=Pe.subscribeToBossQuizzes(e,h)}catch{}return()=>x==null?void 0:x()},[e]);const m=d.filter(x=>{var T;if(x.scheduledAt&&new Date(x.scheduledAt)>new Date)return!1;if((T=x.targetSections)!=null&&T.length){const S=x.classType!=="GLOBAL"?x.classType:e,w=(n==null?void 0:n[S])||(n==null?void 0:n[e])||r||"";if(!x.targetSections.includes(w))return!1}return!0}),y=async(x,T,S,w)=>{try{const E=await Pe.answerBossQuiz(x,T,S);E.alreadyAnswered?p.info("Already answered this question!"):E.correct?(zn.bossHit(),E.bossDefeated?(zn.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):E.isCrit?p.success(`CRITICAL HIT! Dealt ${E.damage} damage!`):p.success(`Correct! Dealt ${E.damage} damage!`)):E.shieldBlocked?p.info("Shield blocked the attack!"):E.playerDamage&&E.playerDamage>0?p.error(`Wrong! The boss hits you for ${E.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),E.knockedOut&&zn.bossHit(),w.onResult(E)}catch(E){p.error(E instanceof Error?E.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(Vo,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(x=>o.jsx(FTe,{quiz:x,userId:t,onAnswer:y,playerStats:a,playerAppearance:i,playerEquipped:s||{},playerEvolutionLevel:c||1},x.id))]})},HTe=({activeChallenges:t,classType:e})=>{const[r,n]=k.useState([]),[a,i]=k.useState(null),s=mi();k.useEffect(()=>{let y;try{y=Pe.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(x=>x.challengeId===y),d=async y=>{if(!a){i(y);try{const x=await Pe.claimDailyChallenge(y,e);zn.dailyReward(),s.success(`Claimed! +${x.xpReward} XP${x.fluxReward?` +${x.fluxReward} Flux`:""}`)}catch(x){s.error(x instanceof Error?x.message:"Claim failed")}i(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const x=c(y.id),T=(x==null?void 0:x.progress)||0,S=(x==null?void 0:x.completed)||!1,w=!!(x!=null&&x.claimedAt),E=Math.min(100,T/y.target*100);return o.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?o.jsx(Rn,{className:"w-4 h-4 text-green-400"}):S?o.jsx(Hoe,{className:"w-4 h-4 text-yellow-400"}):o.jsx(Ao,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&o.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),o.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${E}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&o.jsx("button",{onClick:()=>d(y.id),disabled:!!a,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:a===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Moe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),o.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),o.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},jT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},pz=({value:t,onChange:e,label:r})=>o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),o.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>o.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:o.jsx(E2,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),GTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=k.useState(0),[i,s]=k.useState(0),[c,d]=k.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return o.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[o.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),o.jsx(pz,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),o.jsx(pz,{value:i,onChange:s,label:h?"Tutor communication":"Student engagement"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),o.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),o.jsx("div",{className:"flex justify-between mt-1",children:o.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),o.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[o.jsx(uH,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},WTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=k.useState([]),[s,c]=k.useState(!1),[d,h]=k.useState(""),[p,m]=k.useState(!1),[y,x]=k.useState(null),[T,S]=k.useState(!1),w=mi();k.useEffect(()=>{let j;try{j=Pe.subscribeToTutoringSessions(r,i)}catch{}return()=>j==null?void 0:j()},[r]);const E=async()=>{if(!(!d.trim()||p)){m(!0);try{await Pe.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},I=async j=>{try{await Pe.claimTutorRole(j,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},R=async j=>{try{await Pe.startTutoringSession(j),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(j,z)=>{S(!0);try{const B=a.find(U=>U.id===j);if(!B)throw new Error("Session not found");const F=B.requesterId===t?"requester":"tutor";await Pe.submitTutoringFeedback(j,F,z),w.success("Feedback submitted! "+(F==="requester"?B.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":B.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),x(null)}catch{w.error("Failed to submit feedback")}S(!1)},O=async(j,z)=>{try{const B=await Pe.completeTutoring(j,z);w.success(`Verified! Tutor earned ${B.xpAwarded} XP and ${B.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},M=a.filter(j=>j.status==="OPEN"),N=a.filter(j=>["MATCHED","IN_PROGRESS"].includes(j.status)),A=a.filter(j=>j.status==="VERIFIED");return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Nu,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),o.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Ri,{className:"w-3 h-3"})," Request Help"]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[o.jsx("input",{value:d,onChange:j=>h(j.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:E,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),o.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),M.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Koe,{className:"w-3 h-3"})," Open Requests"]}),M.map(j=>o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",j.requesterName," - ",new Date(j.createdAt).toLocaleDateString()]})]}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${jT[j.status]}`,children:j.status})]}),j.requesterId!==t&&o.jsxs("button",{onClick:()=>I(j.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[o.jsx(Es,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},j.id))]}),N.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Os,{className:"w-3 h-3"})," Active Sessions"]}),N.map(j=>{const z=j.requesterId===t||j.tutorId===t,B=j.requesterId===t,F=j.tutorId===t,U=B?j.requesterFeedback:j.tutorFeedback,X=B?j.tutorFeedback:j.requesterFeedback;return o.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[j.requesterName,"  ",j.tutorName||"Finding tutor..."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${jT[j.status]}`,children:j.status}),j.status==="MATCHED"&&z&&o.jsx("button",{onClick:()=>R(j.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),j.status==="IN_PROGRESS"&&z&&!U&&o.jsxs("button",{onClick:()=>x(j.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Rn,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),j.status==="IN_PROGRESS"&&z&&U&&!X&&o.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",B?"tutor":"student"]}),n&&j.tutorId&&j.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>O(j.id,j.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[o.jsx(Rn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),y===j.id&&j.status==="IN_PROGRESS"&&(F||B)&&o.jsx(GTe,{role:B?"requester":"tutor",onSubmit:W=>L(j.id,W),submitting:T})]},j.id)})]}),a.filter(j=>j.status==="COMPLETED").length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[o.jsx(Os,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(j=>j.status==="COMPLETED").map(j=>o.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[j.requesterName,"  ",j.tutorName]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),j.requesterFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),j.tutorFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&j.tutorId&&o.jsxs("button",{onClick:()=>O(j.id,j.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Rn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},j.id))]}),A.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Rn,{className:"w-3 h-3 text-green-400"})," Completed (",A.length,")"]}),A.slice(0,3).map(j=>o.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-gray-400 truncate",children:j.topic}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${jT[j.status]}`,children:j.status})]},j.id))]}),a.length===0&&o.jsxs("div",{className:"text-center py-6 text-gray-600",children:[o.jsx(Nu,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},KTe=({item:t,onClose:e})=>{const[r,n]=k.useState("chest"),a=ca(t.rarity);k.useEffect(()=>{zn.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:o.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&o.jsxs("div",{className:"animate-in zoom-in duration-500",children:[o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),o.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),o.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[o.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),o.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&o.jsx("div",{className:"animate-in zoom-in duration-300",children:o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[o.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>o.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[o.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&o.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[o.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[o.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),o.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),o.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400 capitalize",children:s}),o.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>o.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&o.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&o.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>o.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),o.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},QTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],XTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],YTe=({user:t,classType:e,onClose:r})=>{var M,N,A;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=i.level||1,c=Kh(s),d=gX(s),{equipped:h,appearance:p}=Jd(t,e),m=iE({gamification:{...i,equipped:h}}),y=Qh(h),x=((M=i.classXp)==null?void 0:M[e])||0,T=(N=t.settings)==null?void 0:N.privacyMode,S=T?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),E=mX(w),I=i.unlockedAchievements||[],R=k.useMemo(()=>vj.filter(j=>I.includes(j.id)),[I]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),O=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),o.jsxs("div",{className:"relative flex items-center gap-6",children:[o.jsx("div",{className:"w-32 h-44 shrink-0",children:o.jsx(Vg,{equipped:h,appearance:p})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),o.jsx("button",{onClick:O,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?o.jsx(ou,{className:"w-4 h-4 text-green-400"}):o.jsx(kx,{className:"w-4 h-4"})})]}),o.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),o.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),o.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:x.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-purple-400",children:I.length}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&o.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:o.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Combat Stats"]}),o.jsx("div",{className:"space-y-2",children:QTe.map(({key:j,label:z,color:B,bg:F})=>{const U=m[j]||0,X=U/L*100;return o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-xs text-gray-400",children:z}),o.jsx("span",{className:`text-xs font-bold ${B}`,children:U})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full ${F} transition-all`,style:{width:`${X}%`}})})]},j)})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"space-y-1.5",children:XTe.map(j=>{const z=h[j];if(!z)return o.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[o.jsx("span",{className:"font-mono w-12 text-[10px]",children:j}),o.jsx("span",{className:"italic",children:"Empty"})]},j);const B=ca(z.rarity);return o.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${B.border} ${B.bg}`,children:[o.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:j}),o.jsx("span",{className:`text-xs font-bold truncate ${B.text}`,children:z.name})]},j)})})]}),E.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[o.jsx(E2,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:j,activeBonus:z})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:j.name}),o.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",z.label]})]},j.id))]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(ec,{className:"w-3 h-3 text-yellow-400"})," Achievements (",I.length,")"]}),R.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-2",children:R.slice(0,12).map(j=>o.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[o.jsx("div",{className:"text-xl",children:j.icon}),o.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:j.title})]},j.id))}):o.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(T2,{className:"w-3.5 h-3.5 text-orange-400"}),o.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),o.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(B7,{className:"w-3.5 h-3.5 text-red-400"}),o.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),o.jsx("span",{className:"text-red-400 font-bold",children:((A=i.completedQuests)==null?void 0:A.length)||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Nu,{className:"w-3.5 h-3.5 text-green-400"}),o.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),o.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx($a,{className:"w-3.5 h-3.5 text-cyan-400"}),o.jsx("span",{className:"text-gray-400",children:"Total XP:"}),o.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})};function ZTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=$g(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const JTe={Textbook:o.jsx(_o,{className:"w-5 h-5"}),Simulation:o.jsx(iH,{className:"w-5 h-5 fill-current"}),"Lab Guide":o.jsx(A2,{className:"w-5 h-5"}),"Practice Set":o.jsx(Ao,{className:"w-5 h-5"}),Article:o.jsx(nH,{className:"w-5 h-5"}),"Video Lesson":o.jsx(dH,{className:"w-5 h-5"}),Supplemental:o.jsx(L7,{className:"w-5 h-5"})};let oh=0,kT=!1,CT=!1,mz="";const eAe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:s="RESOURCES"})=>{var Fa,Ai,os,gi,Nt,he,Ze,ut,Xt,dr,rn,Gr,hn,Ir,Ms,ls,so,ll,cs,us,ja,Ln,q,Se,Ae,je,ft,Rt,jt,Yt,Sr,Zr;const c=mi(),{confirm:d}=al(),[h,p]=k.useState(new Set),[m,y]=k.useState(t.classType||((Fa=t.enrolledClasses)==null?void 0:Fa[0])||"Unassigned"),[x,T]=k.useState(null),[S,w]=k.useState([]),[E,I]=k.useState({}),[R,L]=k.useState(!1),[O,M]=k.useState(null);mz!==t.id&&(mz=t.id,oh=((Ai=t.gamification)==null?void 0:Ai.lastLevelSeen)||1,kT=!1,CT=!1),oh===0&&(oh=((os=t.gamification)==null?void 0:os.lastLevelSeen)||1);const N=s,[A,j]=k.useState(!1),[z,B]=k.useState(null),[F,U]=k.useState(!1),[X,W]=k.useState(null),[H,Z]=k.useState(null),[ie,fe]=k.useState(null),[me,K]=k.useState(null),[te,re]=k.useState(null),[Ne,ae]=k.useState(null),[xe,ye]=k.useState(!1),[Ue,ee]=k.useState(null),[Me,ne]=k.useState(!1);k.useEffect(()=>{var ze,De,dt;const oe=((ze=t.gamification)==null?void 0:ze.level)||1,be=Math.max(((De=t.gamification)==null?void 0:De.lastLevelSeen)||1,oh);if(oe>be){oh=oe;const rr=((dt=t.gamification)==null?void 0:dt.inventory)||[],Qt=rr.length>0?rr[rr.length-1]:null;M(Qt),L(!0),zn.levelUp()}},[(gi=t.gamification)==null?void 0:gi.level,(Nt=t.gamification)==null?void 0:Nt.lastLevelSeen,(he=t.gamification)==null?void 0:he.inventory]),k.useEffect(()=>{const oe=[];try{oe.push(Pe.subscribeToXPEvents(be=>{const ze=be.find(De=>{var dt,rr,Qt;if(!De.isActive||De.type!=="GLOBAL"&&De.targetClass!==m||De.scheduledAt&&new Date(De.scheduledAt)>new Date)return!1;if((dt=De.targetSections)!=null&&dt.length){const _n=De.type!=="GLOBAL"&&De.targetClass?De.targetClass:m,ka=((rr=t.classSections)==null?void 0:rr[_n])||((Qt=t.classSections)==null?void 0:Qt[m])||t.section||"";if(!De.targetSections.includes(ka))return!1}return!0});T(ze||null)}))}catch{}try{oe.push(Pe.subscribeToQuests(be=>{const ze=t.enrolledClasses||(t.classType?[t.classType]:[]);w(be.filter(De=>{var rr,Qt;if(!De.isActive)return!1;const dt=new Date;if(De.startsAt&&new Date(De.startsAt)>dt||De.expiresAt&&new Date(De.expiresAt)<dt||De.targetClass&&!ze.includes(De.targetClass))return!1;if((rr=De.targetSections)!=null&&rr.length){const _n=((Qt=t.classSections)==null?void 0:Qt[De.targetClass||m])||t.section||"";if(!De.targetSections.includes(_n))return!1}return!0}))}))}catch{}try{oe.push(Pe.subscribeToStudentPracticeProgress(t.id,I))}catch{}return()=>oe.forEach(be=>be())},[m]);const pe=((ut=(Ze=t.gamification)==null?void 0:Ze.classXp)==null?void 0:ut[m])||0,Xe=se.useRef(pe),Qe=se.useRef(m);k.useEffect(()=>{if(Qe.current!==m){Qe.current=m,Xe.current=pe;return}if(pe>Xe.current&&Xe.current>=0){const oe=pe-Xe.current;if(oe>0&&oe<500){ae(oe),zn.xpGain();const be=setTimeout(()=>ae(null),2e3);return()=>clearTimeout(be)}}Xe.current=pe},[pe]),k.useEffect(()=>{var ze;if(kT)return;kT=!0;const oe=new Date().toISOString().split("T")[0];((ze=t.gamification)==null?void 0:ze.lastLoginRewardDate)!==oe&&!Me&&Pe.claimDailyLogin().then(De=>{De.alreadyClaimed||(ne(!0),zn.dailyReward(),c.success(`Daily login: +${De.xpReward} XP, +${De.fluxReward} Flux (${De.streak}-day streak!)`))}).catch(()=>{})},[]),k.useEffect(()=>{CT||(CT=!0,Pe.updateEngagementStreak().catch(()=>{}))},[]);const[St,ct]=k.useState([]);k.useEffect(()=>{let oe;try{oe=Pe.subscribeToAnnouncements(ct)}catch{}return()=>oe==null?void 0:oe()},[]);const _t=k.useMemo(()=>{var be;const oe=((be=t.gamification)==null?void 0:be.dismissedAnnouncements)||[];return St.filter(ze=>{var De,dt,rr;if(oe.includes(ze.id)||ze.classType!=="GLOBAL"&&ze.classType!==m)return!1;if((De=ze.targetSections)!=null&&De.length){const Qt=ze.classType!=="GLOBAL"?ze.classType:m,_n=((dt=t.classSections)==null?void 0:dt[Qt])||((rr=t.classSections)==null?void 0:rr[m])||t.section||"";if(!ze.targetSections.includes(_n))return!1}return!0})},[St,(Xt=t.gamification)==null?void 0:Xt.dismissedAnnouncements,m,t.classSections,t.section]),Ee=async oe=>{await Pe.dismissAnnouncement(t.id,oe)},Ve=()=>{var be;const oe=((be=t.gamification)==null?void 0:be.level)||1;oh=oe,L(!1),M(null),Pe.updateUserLastLevelSeen(t.id,oe).catch(()=>{})},nt=async oe=>{try{await Pe.updateUserAppearance(t.id,oe,m),c.success("Profile updated!"),j(!1),W(null),Z(null),fe(null),K(null),re(null)}catch{c.error("Failed to save  try again")}},mt=t.enrolledClasses||(t.classType?[t.classType]:[]),Je=k.useMemo(()=>Jd(t,m),[t,m]),de=Je.equipped,Ye=Je.inventory,At=k.useMemo(()=>{const oe={tech:10,focus:10,analysis:10,charisma:10};return Object.values(de).filter(Boolean).forEach(ze=>{ze.stats&&Object.entries(ze.stats).forEach(([De,dt])=>{oe[De]+=dt})}),oe},[de]),xt=k.useMemo(()=>Qh(de),[de]),gt=k.useMemo(()=>{const oe=t.gamification||{},ze={...oe.achievementProgress||{}},De=oe.xp||0,dt=oe.level||1,rr=oe.inventory||[],Qt=oe.completedQuests||[],_n=oe.engagementStreak||0,ka=oe.loginStreak||0,Ps=oe.tutoringSessionsCompleted||0,Tn=oe.bossesDefeated||0,fn=oe.challengesCompleted||0,Co=oe.itemsCrafted||0,Rr=(ds,yi)=>{(!ze[ds]||yi>ze[ds])&&(ze[ds]=yi)};return Rr("first_steps",De),Rr("xp_5k",De),Rr("xp_25k",De),Rr("rising_star",dt),Rr("veteran",dt),Rr("elite",dt),Rr("legend",dt),Rr("collector_10",rr.length),Rr("collector_50",rr.length),Rr("gear_score_100",xt),Rr("gear_score_500",xt),Rr("first_mission",Qt.length),Rr("mission_5",Qt.length),Rr("mission_20",Qt.length),Rr("boss_slayer",Tn),Rr("streak_3",_n),Rr("streak_8",_n),Rr("streak_16",_n),Rr("login_7",ka),Rr("login_30",ka),Rr("challenges_10",fn),Rr("tutor_1",Ps),Rr("tutor_10",Ps),Rr("tech_50",At.tech),Rr("focus_50",At.focus),Rr("analysis_50",At.analysis),Rr("charisma_50",At.charisma),Rr("craft_10",Co),ze},[t,xt,At]),Vt=[{subject:"Tech",A:At.tech,fullMark:100},{subject:"Focus",A:At.focus,fullMark:100},{subject:"Analysis",A:At.analysis,fullMark:100},{subject:"Charisma",A:At.charisma,fullMark:100}],cr=k.useMemo(()=>{const oe={};return e.filter(be=>{var ze,De;if(be.classType!==m||be.status==="DRAFT"||be.status==="ARCHIVED"||be.scheduledAt&&new Date(be.scheduledAt)>new Date)return!1;if((ze=be.targetSections)!=null&&ze.length){const dt=((De=t.classSections)==null?void 0:De[m])||t.section||"";if(!be.targetSections.includes(dt))return!1}return!0}).forEach(be=>{var dt;const ze=r.find(rr=>rr.assignmentId===be.id),De=be.unit||"General Resources";oe[De]||(oe[De]=[]),oe[De].push({...be,lastEngagement:ze&&ze.submittedAt||null,engagementTime:((dt=ze==null?void 0:ze.metrics)==null?void 0:dt.engagementTime)||0})}),oe},[e,r,m]),Hr=oe=>{const be=new Set(h);be.has(oe)?be.delete(oe):be.add(oe),p(be)},Pr=((dr=t.gamification)==null?void 0:dr.level)||1,we=((rn=t.gamification)==null?void 0:rn.currency)||0,ot=pe,bt=ot%1e3/1e3*100,Ct=uz(ot),Lt=uz(we),et=Kh(Pr),mr=async oe=>{const be=oe.target.value;y(be),await Pe.switchUserView(t.id,be)},wn=async oe=>{if(!F){U(!0);try{await Pe.equipItem(t.id,oe,m),B(null),zn.equip(),c.success(`${oe.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{U(!1)}}},Dn=async oe=>{U(!0);try{await Pe.unequipItem(t.id,oe,m),B(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{U(!1)}},Cr=async()=>{if(!z)return;if(Object.values(de).some(ze=>ze&&ze.id===z.id)){c.error("Unequip this item before salvaging.");return}const be=QR(z);if(await d({message:`Salvage ${z.name} for ${be} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){U(!0);try{await Pe.disenchantItem(t.id,z,m),B(null),zn.salvage(),c.success(`Salvaged for ${be} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{U(!1)}}},ur=async oe=>{if(!z)return;const be=Ki[oe];if(we<be)return c.error("Insufficient Cyber-Flux.");U(!0);try{await Pe.craftItem(t.id,z,oe,m),B(null),zn.craft(),c.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch(ze){const De=(ze==null?void 0:ze.message)||(ze==null?void 0:ze.code)||"Unknown error";c.error(`Fabrication failed: ${De}`)}finally{U(!1)}},Bt=((Gr=t.gamification)==null?void 0:Gr.gemsInventory)||[],it=async()=>{if(!(!z||F)){if(we<Ki.SOCKET)return c.error("Insufficient Cyber-Flux.");if((z.sockets||0)>=3)return c.error("Maximum sockets reached.");U(!0);try{const oe=await Pe.addSocket(z.id,m);B(oe.item),zn.craft(),c.success("Socket added!")}catch(oe){c.error((oe==null?void 0:oe.message)||"Failed to add socket.")}finally{U(!1)}}},Kt=async oe=>{if(!(!z||F)){if(we<Ki.ENCHANT)return c.error("Insufficient Cyber-Flux.");U(!0);try{const be=await Pe.socketGem(z.id,oe,m);B(be.item),zn.craft(),be.runewordActivated?(zn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${be.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(be){c.error((be==null?void 0:be.message)||"Failed to socket gem.")}finally{U(!1)}}},br=async oe=>{var De;if(!z||F)return;const be=(De=z.gems)==null?void 0:De[oe];if(!be)return;const ze=KR(z.rarity,be.tier,z.unsocketCount||0);if(we<ze)return c.error(`Insufficient Cyber-Flux. Need ${ze}.`);U(!0);try{const dt=await Pe.unsocketGem(z.id,oe,m);B(dt.item),zn.craft(),c.success(`Gem removed! -${dt.cost} Flux`)}catch(dt){c.error((dt==null?void 0:dt.message)||"Failed to unsocket gem.")}finally{U(!1)}},yr=((hn=t.gamification)==null?void 0:hn.activeQuests)||[],Or=((Ir=t.gamification)==null?void 0:Ir.completedQuests)||[],kn=S.filter(oe=>yr.some(be=>be.questId===oe.id)),er=S.filter(oe=>!yr.some(be=>be.questId===oe.id)&&!Or.includes(oe.id)),ga=async oe=>{try{await Pe.acceptQuest(t.id,oe.id),zn.questAccept(),c.success(`Contract accepted: ${oe.title}`)}catch{c.error("Failed to accept contract.")}},cn=async oe=>{const be=oe.type==="CUSTOM";if(await d({message:be?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:be?"Submit":"Deploy",variant:"info"}))try{await Pe.deployMission(t.id,oe),zn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},Cn=["HEAD","HANDS","RING1","AMULET"],ti=["CHEST","BELT","FEET","RING2"],[Ar,un]=k.useState(null),ri=n_e(YU(mj,{activationConstraint:{distance:8}}),YU(iX,{activationConstraint:{delay:150,tolerance:5}})),Kn=oe=>oe==="RING1"||oe==="RING2"?["RING"]:[oe],Yr=oe=>{const{active:be}=oe,ze=Ye.find(De=>De.id===be.id)||Object.values(de).find(De=>De&&De.id===be.id);un(ze||null)},dn=oe=>{const{active:be,over:ze}=oe;if(un(null),!ze)return;const De=be.id,dt=ze.id;if(dt.startsWith("slot-")){const rr=dt.replace("slot-",""),Qt=Ye.find(ka=>ka.id===De);if(!Qt||!Kn(rr).includes(Qt.slot))return;wn(Qt)}if(De.startsWith("equipped-")&&(dt==="inventory-zone"||dt.startsWith("storage-cell-"))){const rr=De.replace("equipped-","");Dn(rr)}},Sn=(oe,be,ze="w-5 h-5")=>{const De=`${ze} ${be}`,dt={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(oe){case"HEAD":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),o.jsx("path",{d:"M5 11v2h14v-2"}),o.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),o.jsx("path",{d:"M6 4h12"}),o.jsx("path",{d:"M12 4v5"}),o.jsx("path",{d:"M9 9h6"})]});case"HANDS":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),o.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),o.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),o.jsx("path",{d:"M4 19h16"}),o.jsx("path",{d:"M11 3v4"})]});case"BELT":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),o.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),o.jsx("path",{d:"M12 7v3"}),o.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return o.jsxs("svg",{className:De,...dt,children:[o.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),o.jsx("path",{d:"M12 9V6"}),o.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return o.jsx(Ex,{className:De})}},ni=({slot:oe})=>{const be=de[oe],ze=be?ca(be.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:De,isOver:dt}=yj({id:`slot-${oe}`}),{attributes:rr,listeners:Qt,setNodeRef:_n,isDragging:ka}=dX({id:be?`equipped-${oe}`:`empty-slot-${oe}`,disabled:!be}),Ps=Ar&&Kn(oe).includes(Ar.slot),Tn=dt&&Ps?"ring-2 ring-purple-500 scale-110":Ar&&Ps?"ring-1 ring-purple-500/40 animate-pulse":"";return o.jsx("div",{ref:De,className:"relative",children:o.jsx("div",{ref:_n,...rr,...Qt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ka?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${ze.border} ${ze.bg} ${ze.shimmer} ${ze.glow} ${Tn}`,onClick:()=>!ka&&be&&B(be),children:be?o.jsxs(o.Fragment,{children:[Sn(oe.replace(/\d/,""),ze.text),o.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${ze.text}`,children:be.baseName||be.name.split(" ").slice(-1)[0]}),!ka&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${ze.text}`,children:be.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[be.rarity," ",oe]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(be.stats).map(([fn,Co])=>`+${Co} ${fn.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):o.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})})};return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[_t.length>0&&o.jsx("div",{className:"lg:col-span-12 space-y-2",children:_t.map(oe=>{const be={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return o.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${be[oe.priority]}`,children:[o.jsx(Ox,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),o.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),o.jsx("button",{onClick:()=>Ee(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Da,{className:"w-4 h-4"})})]},oe.id)})}),x&&o.jsx("div",{className:"lg:col-span-12",children:o.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:o.jsx($a,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[x.title," ACTIVE"]}),o.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",x.multiplier,"x XP on all tasks."]})]})]}),o.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[x.multiplier,"x"]})]})}),o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${et.tierColor.split(" ")[0]} border-opacity-30`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${et.tierGlow} shadow-xl`,children:o.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${et.tierColor.split(" ")[0]}`})}),o.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ms=t.gamification)==null?void 0:Ms.codename)||t.name}),o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${et.tierColor.split(" ")[1]}`,children:[et.rankName," (Lvl ",Pr,")"]}),o.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",xt]})]}),mt.length>1&&o.jsxs("div",{className:"mt-4 relative w-full",children:[o.jsx("select",{value:m,onChange:mr,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:mt.map(oe=>o.jsx("option",{value:oe,children:oe},oe))}),o.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),o.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${bt}%`}})}),o.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[o.jsxs("span",{children:[Ct.toLocaleString()," XP (",m,")"]}),o.jsx("span",{children:"Next Rank"}),Ne&&o.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",Ne," XP"]})]})]})]}),o.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:o.jsx(K5,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-white leading-none",children:Lt})]})]})}),(((ls=t.gamification)==null?void 0:ls.engagementStreak)||0)>0&&(()=>{var ze;const oe=((ze=t.gamification)==null?void 0:ze.engagementStreak)||0,be=NTe(oe);return o.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:o.jsx(T2,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),o.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),be>1&&o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),o.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((be-1)*100),"%"]})]})]})})})(),(((so=t.gamification)==null?void 0:so.loginStreak)||0)>1&&o.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[o.jsx(ule,{className:"w-5 h-5 text-purple-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),o.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((ll=t.gamification)==null?void 0:ll.loginStreak)||0," day streak"]})]})]}),o.jsxs("button",{onClick:()=>ye(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[o.jsx(Hh,{className:"w-4 h-4"})," View Profile"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&o.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:o.jsx(A2,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),o.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),o.jsx(Ld,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&o.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:o.jsx(rle,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),o.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),o.jsx(Ld,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),o.jsx("div",{className:"lg:col-span-9 space-y-6",children:o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[N==="MISSIONS"&&o.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[er.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),er.map(oe=>o.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),o.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),o.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&o.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([be,ze])=>o.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[ze," ",be]},be))}),oe.expiresAt&&o.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[o.jsx(Is,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),o.jsxs("button",{onClick:()=>ga(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[o.jsx(Bd,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[kn.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),kn.map(oe=>{var dt,rr;const be=((dt=yr.find(Qt=>Qt.questId===oe.id))==null?void 0:dt.status)||"ACCEPTED",ze=(rr=yr.find(Qt=>Qt.questId===oe.id))==null?void 0:rr.deploymentRoll,De=oe.type==="CUSTOM";return o.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:o.jsx(Ao,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),o.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${be==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":be==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":be==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:be})]}),be==="ACCEPTED"?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>cn(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[o.jsx(sH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),De?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&o.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:o.jsx(Es,{className:"w-5 h-5"})})]})]}):be==="DEPLOYED"?o.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),o.jsx($a,{className:"w-6 h-6 text-purple-400"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),o.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:De?"AWAITING_HQ_SIG_VERIFICATION":ze===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),o.jsx("div",{className:"h-10 w-px bg-white/5"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),o.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),o.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),o.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:De?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),N==="RESOURCES"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(cr).length===0?o.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):o.jsx("div",{className:"space-y-4",children:Object.entries(cr).sort().map(([oe,be])=>o.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[o.jsxs("button",{onClick:()=>Hr(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[h.has(oe)?o.jsx(Li,{className:"w-4 h-4 text-purple-400"}):o.jsx(Ld,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),o.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[be.length," Files"]})]}),h.has(oe)&&o.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:be.map(ze=>{const De=!!ze.dueDate,dt=ze.dueDate?new Date(ze.dueDate):null,rr=new Date,Qt=dt?Math.ceil((dt.getTime()-rr.getTime())/864e5):1/0,_n=Qt<=0?"text-red-400":Qt<=2?"text-yellow-400":"text-gray-500",ka=Math.floor(ze.engagementTime/60),Ps=ka>=5,Tn=E[ze.id],fn=Tn==null?void 0:Tn.completed;return o.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${fn?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i(ze.id),children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${fn||Ps?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":ze.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:fn?o.jsx(Rn,{className:"w-6 h-6"}):Ps?o.jsx(Rn,{className:"w-6 h-6"}):ze.lastEngagement?o.jsx(Rn,{className:"w-5 h-5 opacity-60"}):JTe[ze.category||"Supplemental"]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:ze.category}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:ze.title}),fn&&o.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[o.jsx(Rn,{className:"w-2.5 h-2.5"}),"COMPLETED",((Tn==null?void 0:Tn.totalCompletions)||0)>1?` (${Tn.totalCompletions}x)`:""]})]}),o.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:o.jsx("p",{className:"text-xs text-gray-500 truncate",children:ze.description})}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[ze.lastEngagement&&o.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ka,"m engaged"]}),fn&&(Tn==null?void 0:Tn.bestScore)!=null&&Tn.bestScore>0&&o.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",Tn.bestScore,"%"]}),De&&o.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${_n}`,children:[o.jsx(Os,{className:"w-3 h-3"}),Qt<=0?"Overdue":Qt===1?"Due tomorrow":`Due in ${Qt}d`]})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:o.jsx(iH,{className:"w-4 h-4 text-purple-400 fill-current"})})]},ze.id)})})]},oe))})},"resources"),N==="LOADOUT"&&o.jsxs(rTe,{sensors:ri,collisionDetection:c_e,modifiers:[ZTe],onDragStart:Yr,onDragEnd:dn,children:[o.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[o.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((cs=Je.appearance)==null?void 0:cs.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),o.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[o.jsx("div",{className:"flex flex-col gap-4",children:Cn.map(oe=>o.jsx(ni,{slot:oe},oe))}),o.jsx("div",{className:"w-40 h-full relative",children:o.jsx(Vg,{equipped:de,appearance:Je.appearance,evolutionLevel:Pr})}),o.jsx("div",{className:"flex flex-col gap-4",children:ti.map(oe=>o.jsx(ni,{slot:oe},oe))})]}),o.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),j(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[o.jsx(gle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),o.jsx("div",{className:"h-[200px]",children:o.jsx(bW,{width:"100%",height:"100%",children:o.jsxs(VSe,{cx:"50%",cy:"50%",outerRadius:"70%",data:Vt,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),o.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),o.jsx(qK,{stroke:"rgba(255,255,255,0.08)"}),o.jsx(S1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),o.jsx(w1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),o.jsx(_1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const oe=gG(At);return o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),o.jsx("span",{className:"text-gray-500",children:"Tech"}),o.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:At.tech}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),o.jsx("br",{}),"Increases damage dealt to bosses."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),o.jsx("span",{className:"text-gray-500",children:"Focus"}),o.jsx("span",{className:"text-green-400 font-bold ml-auto",children:At.focus}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),o.jsx("br",{}),"Crit chance: ",(oe.critChance*100).toFixed(0),"%  Crit damage: ",oe.critMultiplier.toFixed(2),"x"]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),o.jsx("span",{className:"text-gray-500",children:"Analysis"}),o.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:At.analysis}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),o.jsx("br",{}),"Reduces boss damage by ",oe.armorPercent.toFixed(0),"%."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),o.jsx("span",{className:"text-gray-500",children:"Charisma"}),o.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:At.charisma}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),o.jsx("br",{}),"Max HP: ",oe.maxHp]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"HP"}),o.jsx("span",{className:"text-emerald-400 font-bold",children:oe.maxHp})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Armor"}),o.jsxs("span",{className:"text-yellow-400 font-bold",children:[oe.armorPercent.toFixed(0),"%"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Crit"}),o.jsxs("span",{className:"text-green-400 font-bold",children:[(oe.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),o.jsx(tAe,{inventory:Ye,equipped:de,draggedItem:Ar,onInspect:B,getSlotIcon:Sn})]},"loadout"),o.jsx(bTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Ar&&(()=>{const oe=ca(Ar.rarity);return o.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:o.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${oe.bg} ${oe.border} ${oe.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Sn(Ar.slot,oe.text,"w-7 h-7"),o.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${oe.text} drop-shadow-lg`,children:Ar.baseName||Ar.name.split(" ").slice(-1)[0]})]})})})()})]}),N==="ACHIEVEMENTS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(jTe,{unlockedAchievements:((us=t.gamification)==null?void 0:us.unlockedAchievements)||[],achievementProgress:gt})},"achievements"),N==="SKILLS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(CTe,{specialization:(ja=t.gamification)==null?void 0:ja.specialization,skillPoints:((Ln=t.gamification)==null?void 0:Ln.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),N==="FORTUNE"&&o.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(OTe,{currency:we,lastSpin:(Se=t.gamification)==null?void 0:Se.lastWheelSpin,classType:m})},"fortune"),N==="TUTORING"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(WTe,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),o.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:o.jsx(HTe,{userId:t.id,activeChallenges:((Ae=t.gamification)==null?void 0:Ae.activeDailyChallenges)||[],classType:m})}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[o.jsx(PTe,{userId:t.id,userName:t.name,classType:m}),o.jsx(qTe,{userId:t.id,classType:m,userSection:((je=t.classSections)==null?void 0:je[m])||t.section,userClassSections:t.classSections,playerStats:At,playerAppearance:Je.appearance,playerEquipped:de,playerEvolutionLevel:Pr})]})]}),o.jsx(Ti,{isOpen:A,onClose:()=>{j(!1),W(null),Z(null),fe(null),K(null),re(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:o.jsx(Vg,{equipped:de,appearance:{...Je.appearance,hue:X??((ft=Je.appearance)==null?void 0:ft.hue)??0,bodyType:H??((Rt=Je.appearance)==null?void 0:Rt.bodyType)??"A",skinTone:ie??((jt=Je.appearance)==null?void 0:jt.skinTone)??0,hairStyle:me??((Yt=Je.appearance)==null?void 0:Yt.hairStyle)??1,hairColor:te??((Sr=Je.appearance)==null?void 0:Sr.hairColor)??0}})})}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),o.jsx("div",{className:"flex justify-center gap-2",children:hX.map((oe,be)=>{var De;const ze=(ie??((De=Je.appearance)==null?void 0:De.skinTone)??0)===be;return o.jsx("button",{onClick:()=>fe(be),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${ze?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},be)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:wTe.map((oe,be)=>{var De;const ze=(me??((De=Je.appearance)==null?void 0:De.hairStyle)??1)===be;return o.jsx("button",{onClick:()=>K(be),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${ze?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:oe},be)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),o.jsx("div",{className:"flex justify-center gap-2",children:fX.map((oe,be)=>{var De;const ze=(te??((De=Je.appearance)==null?void 0:De.hairColor)??0)===be;return o.jsx("button",{onClick:()=>re(be),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${ze?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},be)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),o.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(oe=>{var ze;const be=(H??((ze=Je.appearance)==null?void 0:ze.bodyType)??"A")===oe;return o.jsx("button",{onClick:()=>Z(oe),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${be?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:oe==="A"?"Alpha":oe==="B"?"Beta":"Femme"},oe)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),o.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(oe=>{var ze;const be=(X??((ze=Je.appearance)==null?void 0:ze.hue)??0)===oe;return o.jsx("button",{onClick:()=>W(oe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${be?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{j(!1),W(null),Z(null),fe(null),K(null),re(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:()=>{var oe,be,ze,De,dt;return nt({hue:X??((oe=Je.appearance)==null?void 0:oe.hue)??0,bodyType:H??((be=Je.appearance)==null?void 0:be.bodyType)??"A",skinTone:ie??((ze=Je.appearance)==null?void 0:ze.skinTone)??0,hairStyle:me??((De=Je.appearance)==null?void 0:De.hairStyle)??1,hairColor:te??((dt=Je.appearance)==null?void 0:dt.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),o.jsx(Ti,{isOpen:!!z,onClose:()=>B(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:z&&o.jsxs("div",{className:"space-y-6 text-gray-100",children:[o.jsxs("div",{className:`p-5 rounded-xl border ${z.runewordActive?"border-amber-500/40 runeword-active":ca(z.rarity).border} ${ca(z.rarity).bg} ${ca(z.rarity).shimmer} relative overflow-hidden`,children:[o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${z.runewordActive?"border-amber-500/50":ca(z.rarity).border} ${ca(z.rarity).bg}`,style:{boxShadow:z.runewordActive?"0 0 20px rgba(245,158,11,0.3)":z.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":z.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Sn(z.slot,z.runewordActive?"text-amber-400":ca(z.rarity).text,"w-7 h-7")}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`text-lg font-bold ${z.runewordActive?"text-amber-300":ca(z.rarity).text}`,children:z.name}),o.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[z.rarity," ",z.slot]}),z.runewordActive&&o.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(Zr=XR(z))==null?void 0:Zr.name})]})]}),o.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(z.stats).map(([oe,be])=>o.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[o.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),o.jsxs("span",{className:"font-mono font-bold",children:["+",be]})]},oe))}),o.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:z.affixes.map((oe,be)=>o.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},be))})]}),(z.sockets||0)>0&&(()=>{const oe=z.sockets||0,be=z.gems||[],ze=oe-be.length,De=XR(z);return o.jsxs("div",{className:`p-4 rounded-xl border ${De?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[De&&o.jsxs("div",{className:"mb-3 text-center",children:[o.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),o.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:De.name}),o.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:De.lore}),o.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(De.bonusStats).map(([dt,rr])=>o.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",rr," ",dt.slice(0,3).toUpperCase()]},dt))}),De.bonusEffects&&De.bonusEffects.length>0&&o.jsx("div",{className:"mt-1",children:De.bonusEffects.map(dt=>o.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:dt.description},dt.id))})]}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[o.jsx(K5,{className:"w-3 h-3"})," Gem Sockets (",be.length,"/",oe,")"]}),o.jsxs("div",{className:"flex gap-2",children:[be.map((dt,rr)=>{const Qt=KR(z.rarity,dt.tier,z.unsocketCount||0);return o.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:dt.color,backgroundColor:`${dt.color}20`,boxShadow:`0 0 8px ${dt.color}40`},children:o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:dt.color}})}),o.jsx("span",{className:"text-[9px] text-gray-400",children:dt.name}),o.jsxs("button",{onClick:()=>br(rr),disabled:F||we<Qt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Qt} Flux`,children:["Remove (",Qt," F)"]})]},rr)}),Array.from({length:ze}).map((dt,rr)=>o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${rr}`))]}),ze>0&&Bt.length>0&&o.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[o.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Ki.ENCHANT," Flux)"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Bt.map(dt=>o.jsxs("button",{onClick:()=>Kt(dt.id),disabled:F||we<Ki.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:dt.color}}),o.jsx("span",{className:"text-gray-300",children:dt.name}),o.jsxs("span",{className:"text-gray-600 font-mono",children:["+",dt.value]})]},dt.id))}),be.length>0&&!De&&(()=>{const dt=be.map(Qt=>Qt.name),rr=mG.filter(Qt=>Qt.requiredSockets===oe&&Qt.pattern.slice(0,dt.length).every((_n,ka)=>_n===dt[ka]));return rr.length===0?null:o.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:rr.map(Qt=>o.jsxs("div",{children:["Possible: ",o.jsx("span",{className:"font-bold text-amber-400/80",children:Qt.name}),"  needs [",Qt.pattern.join("  "),"]"]},Qt.id))})})()]})]})})(),(z.sockets||0)<3&&o.jsxs("button",{onClick:it,disabled:F||we<Ki.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[o.jsx(K5,{className:"w-4 h-4"}),"Add Socket (",Ki.SOCKET," Flux)  ",z.sockets||0,"/3"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=z.slot==="RING"?"RING1":z.slot,be=de[oe]||(z.slot==="RING"?de.RING2:null);if(!be||be.id===z.id)return null;const ze=ca(be.rarity),De=new Set([...Object.keys(z.stats),...Object.keys(be.stats)]);return o.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`text-xs font-bold ${ze.text}`,children:be.name}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:be.rarity})]}),o.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(De).map(dt=>{const rr=z.stats[dt]||0,Qt=be.stats[dt]||0,_n=rr-Qt;return _n===0?o.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[dt.slice(0,3).toUpperCase(),": 0"]},dt):o.jsxs("span",{className:`text-[10px] font-mono font-bold ${_n>0?"text-green-400":"text-red-400"}`,children:[dt.slice(0,3).toUpperCase(),": ",_n>0?"":"",Math.abs(_n)]},dt)})})]})})(),(()=>{var be;const oe=(be=Object.entries(de).find(([,ze])=>ze&&ze.id===z.id))==null?void 0:be[0];return oe?o.jsx("button",{onClick:()=>Dn(oe),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:F,children:"Unequip Gear"}):o.jsx("button",{onClick:()=>wn(z),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:F,children:"Equip Gear"})})(),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),o.jsxs("button",{onClick:()=>ur("RECALIBRATE"),disabled:F||we<Ki.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.RECALIBRATE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),o.jsxs("button",{onClick:()=>ur("REFORGE"),disabled:F||we<Ki.REFORGE||z.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.REFORGE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),o.jsxs("button",{onClick:()=>ur("OPTIMIZE"),disabled:F||we<Ki.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.OPTIMIZE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsxs("button",{onClick:Cr,disabled:F,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[o.jsx(ua,{className:"w-4 h-4"}),"Salvage for ",QR(z)," Flux"]})]})]})}),xe&&o.jsx(YTe,{user:t,classType:m,onClose:()=>ye(!1)}),Ue&&o.jsx(KTe,{item:Ue,onClose:()=>ee(null)}),o.jsx(Ti,{isOpen:R,onClose:Ve,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:o.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,be)=>o.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][be%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},be))}),o.jsxs("div",{className:"relative inline-block mb-6",children:[o.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),o.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),o.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:o.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:Pr})})]}),o.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:o.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:et.rankName})}),o.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),O&&o.jsxs("div",{className:`${ca(O.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ca(O.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),o.jsx("div",{className:`text-xl font-bold ${ca(O.rarity).text}`,children:O.name}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[O.rarity," ",O.slot]}),o.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(O.stats).map(([oe,be])=>o.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",be," ",oe.toUpperCase()]},oe))})]})]}),o.jsx("button",{onClick:Ve,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},tAe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:s}=yj({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return o.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":s?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[o.jsxs("span",{children:["Gear Storage (",t.length,")"]}),o.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[o.jsx(Woe,{className:"w-3 h-3"})," Drag to equip"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>o.jsx(nAe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>o.jsx(rAe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},rAe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=yj({id:`storage-cell-${t}`});return o.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},nAe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:s,isDragging:c}=dX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ca(t.rarity);return o.jsxs("div",{ref:s,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&o.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Aw=typeof self<"u"?self:global;const Fg=typeof navigator<"u",aAe=Fg&&typeof HTMLImageElement>"u",Wb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Nw=Aw.Buffer,Iv=Aw.BigInt,Ew=!!Nw,iAe=t=>t;function Kb(t,e=iAe){if(Wb)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let xj=Aw.fetch;const sAe=t=>xj=t;if(!Aw.fetch){const t=Kb("http",(n=>n)),e=Kb("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,s)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(y.port=Number(c));const x=(p==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return r(S,{headers:a}).then(i).catch(s)}i({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(E=>w.push(E))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));x.on("error",s),x.end()}));sAe(r)}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Qb=t=>yX(t)?void 0:t,oAe=t=>t!==void 0;function yX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(oAe).length===0)}function Na(t){let e=new Error(t);throw delete e.stack,e}function Od(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function c8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const u8=t=>String.fromCharCode.apply(null,t),gz=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function vX(t){return gz?gz.decode(t):Ew?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(u8(t)))}class Ji{static from(e,r){return e instanceof this&&e.le===r?e:new Ji(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ji){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Na("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Na("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Ji){return e instanceof DataView||e instanceof Ji?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Na("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Ji(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return vX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return u8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return u8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function d8(t,e){Na(`${t} '${e}' was not loaded, try using full build of exifr.`)}class bj extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||d8(this.kind,e),r&&(e in r||(function(n,a){Na(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||d8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var el=new bj("file parser"),Ta=new bj("segment parser"),ol=new bj("file reader");function lAe(t,e){return typeof t=="string"?yz(t,e):Fg&&!aAe&&t instanceof HTMLImageElement?yz(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Ji(t):Fg&&t instanceof Blob?h8(t,e,"blob",s0):void Na("Invalid input argument")}function yz(t,e){return(r=t).startsWith("data:")||r.length>1e4?f8(t,e,"base64"):Wb&&t.includes("://")?h8(t,e,"url",i0):Wb?f8(t,e,"fs"):Fg?h8(t,e,"url",i0):void Na("Invalid input argument");var r}async function h8(t,e,r,n){return ol.has(r)?f8(t,e,r):n?(async function(a,i){let s=await i(a);return new Ji(s)})(t,n):void Na(`Parser ${r} is not loaded`)}async function f8(t,e,r){let n=new(ol.get(r))(t,e);return await n.read(),n}const i0=t=>xj(t).then((e=>e.arrayBuffer())),s0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class cAe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function pa(t,e,r){let n=new cAe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function o0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const Ja=new Map,ko=new Map,wu=new Map,hu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ff=["jfif","xmp","icc","iptc","ihdr"],l0=["tiff",...Ff],na=["ifd0","ifd1","exif","gps","interop"],fu=[...l0,...na],pu=["makerNote","userComment"],qf=["translateKeys","translateValues","reviveValues","multiSegment"],mu=[...qf,"sanitize","mergeOutput","silentErrors"];class xX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Zp extends xX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Jt(this,"enabled",!1),Jt(this,"skip",new Set),Jt(this,"pick",new Set),Jt(this,"deps",new Set),Jt(this,"translateKeys",!1),Jt(this,"translateValues",!1),Jt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=na.includes(e),this.canBeFiltered&&(this.dict=Ja.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:s}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Na(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of qf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(a=s.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Xb(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Xb(this.pick,this.deps)}}var Oi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},vz=new Map;class v0 extends xX{static useCached(e){let r=vz.get(e);return r!==void 0||(r=new this(e),vz.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Na(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Fg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of hu)this[e]=Oi[e];for(e of mu)this[e]=Oi[e];for(e of pu)this[e]=Oi[e];for(e of fu)this[e]=new Zp(e,Oi[e],void 0,this)}setupFromTrue(){let e;for(e of hu)this[e]=Oi[e];for(e of mu)this[e]=Oi[e];for(e of pu)this[e]=!0;for(e of fu)this[e]=new Zp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of hu)this[r]=Oi[r];for(r of mu)this[r]=Oi[r];for(r of pu)this[r]=Oi[r];for(r of fu)this[r]=new Zp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,na)}setupFromObject(e){let r;for(r of(na.ifd0=na.ifd0||na.image,na.ifd1=na.ifd1||na.thumbnail,Object.assign(this,e),hu))this[r]=OT(e[r],Oi[r]);for(r of mu)this[r]=OT(e[r],Oi[r]);for(r of pu)this[r]=OT(e[r],Oi[r]);for(r of l0)this[r]=new Zp(r,Oi[r],e[r],this);for(r of na)this[r]=new Zp(r,Oi[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,na,fu),e.tiff===!0?this.batchEnableWithBool(na,!0):e.tiff===!1?this.batchEnableWithUserValue(na,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,na):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,na)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let s of a)this[s].enabled=!1;let i=xz(e,n);for(let[s,c]of i)Xb(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let i=xz(r,n);for(let[s,c]of i)Xb(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=na.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of na)this[i].finalizeFilters()}get onlyTiff(){return!Ff.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of l0)this[e].enabled&&!Ta.has(e)&&d8("segment parser",e)}}function xz(t,e){let r,n,a,i,s=[];for(a of e){for(i of(r=Ja.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&s.push([a,n])}return s}function OT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function Xb(t,e){for(let r of e)t.add(r)}Jt(v0,"default",Oi);class $u{constructor(e){Jt(this,"parsers",{}),Jt(this,"output",{}),Jt(this,"errors",[]),Jt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=v0.useCached(e)}async read(e){this.file=await lAe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of el)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Na("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Qb(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Ta.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),s=this.parsers.tiff=new n(i,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function jw(t,e){let r=new $u(e);return await r.read(t),r.parse()}var uAe=Object.freeze({__proto__:null,parse:jw,Exifr:$u,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:wu,createDictionary:pa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:hu,otherSegments:Ff,segments:l0,tiffBlocks:na,segmentsAndBlocks:fu,tiffExtractables:pu,inheritables:qf,allFormatters:mu,Options:v0});class kw{constructor(e,r,n){Jt(this,"errors",[]),Jt(this,"ensureSegmentChunk",(async a=>{let i=a.start,s=a.size||65536;if(this.file.chunked)if(this.file.available(i,s))a.chunk=this.file.subarray(i,s);else try{a.chunk=await this.file.readChunk(i,s)}catch(c){Na(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+s?a.chunk=this.file.subarray(i,s):a.size===void 0?a.chunk=this.file.subarray(i):Na("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Ta.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class bo{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,s=n-a;return{offset:r,length:n,headerLength:a,start:i,size:s,end:i+s}}static parse(e,r={}){return new this(e,new v0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Ji?e:new Ji(e)}constructor(e,r={},n){Jt(this,"errors",[]),Jt(this,"raw",new Map),Jt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=wu.get(r),a=ko.get(r),i=Ja.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!a,h=s.translateKeys&&!!i,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&a.has(m)&&(y=this.translateValue(y,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Jt(bo,"headerLength",4),Jt(bo,"type",void 0),Jt(bo,"multiSegment",!1),Jt(bo,"canHandle",(()=>!1));function dAe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function hAe(t){return t>=224&&t<=239}function fAe(t,e,r){for(let[n,a]of Ta)if(a.canHandle(t,e,r))return n}class bz extends kw{constructor(...e){super(...e),Jt(this,"appSegments",[]),Jt(this,"jpegSegments",[]),Jt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ta.keyList())):(e=e===void 0?Ta.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Ta.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:s}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Ta.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,s,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:x}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),hAe(n)){if(a=h.getUint16(e+2),i=fAe(h,e,a),i&&m.has(i)&&(s=Ta.get(i),c=s.findPosition(h,e),d=x[i],c.type=i,this.appSegments.push(c),!p&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(i)):y.delete(i),y.size===0)))break;x.recordUnknownSegments&&(c=bo.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(dAe(n)){if(a=h.getUint16(e+2),n===218&&x.stopAfterSos!==!1)return;x.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,s,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?s=c.get(i):c.set(i,s=[]),s.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Ta.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Jt(bz,"type","jpeg"),el.set("jpeg",bz);const pAe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class mAe extends bo{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let s=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(s){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),s=a.getUint32(e+4),c=pAe[i];if(c*s<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Na(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Na(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,s);if(i===2)return Od(a.getString(e,s));if(i===7)return a.getUint8Array(e,s);if(s===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(s),h=c;for(let p=0;p<s;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Na(`Invalid tiff type ${e}`)}}}class IT extends mAe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Na("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Na(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,c8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,c8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",wz(...e.get(2),e.get(1))),e.set("longitude",wz(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of na)if(e=this[r],!yX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function wz(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Jt(IT,"type","tiff"),Jt(IT,"headerLength",10),Ta.set("tiff",IT);var gAe=Object.freeze({__proto__:null,default:uAe,Exifr:$u,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:wu,createDictionary:pa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:hu,otherSegments:Ff,segments:l0,tiffBlocks:na,segmentsAndBlocks:fu,tiffExtractables:pu,inheritables:qf,allFormatters:mu,Options:v0,parse:jw});const wj={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Sj=Object.assign({},wj,{firstChunkSize:4e4,gps:[1,2,3,4]});async function bX(t){let e=new $u(Sj);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const _j=Object.assign({},wj,{tiff:!1,ifd1:!0,mergeOutput:!1});async function wX(t){let e=new $u(_j);await e.read(t);let r=await e.extractThumbnail();return r&&Ew?Nw.from(r):r}async function SX(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const Tj=Object.assign({},wj,{firstChunkSize:4e4,ifd0:[274]});async function Aj(t){let e=new $u(Tj);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const Nj=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Id=!0,Rd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Id=Number(r)+.1*Number(n)<13.4,Rd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Id=Rd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Id=Rd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Id=Rd=Number(e)<77}}async function _X(t){let e=await Aj(t);return Object.assign({canvas:Id,css:Rd},Nj[e])}class yAe extends Ji{constructor(...e){super(...e),Jt(this,"ranges",new vAe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Ew?Nw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class vAe{constructor(){Jt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((s=>Sz(e,s.offset,a)||Sz(e,s.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let s=i.shift();s.offset=e,s.length=r,s.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function Sz(t,e,r){return t<=e&&e<=r}class Cw extends yAe{constructor(e,r){super(0),Jt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ol.set("blob",class extends Cw{async readWhole(){this.chunked=!1;let t=await s0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await s0(n);return this.set(a,t,!0)}});var xAe=Object.freeze({__proto__:null,default:gAe,Exifr:$u,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:wu,createDictionary:pa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:hu,otherSegments:Ff,segments:l0,tiffBlocks:na,segmentsAndBlocks:fu,tiffExtractables:pu,inheritables:qf,allFormatters:mu,Options:v0,parse:jw,gpsOnlyOptions:Sj,gps:bX,thumbnailOnlyOptions:_j,thumbnail:wX,thumbnailUrl:SX,orientationOnlyOptions:Tj,orientation:Aj,rotations:Nj,get rotateCanvas(){return Id},get rotateCss(){return Rd},rotation:_X});ol.set("url",class extends Cw{async readWhole(){this.chunked=!1;let t=await i0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await xj(this.input,{headers:n}),i=await a.arrayBuffer(),s=i.byteLength;if(a.status!==416)return s!==e&&(this.size=t+s),this.set(i,t,!0)}});Ji.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Iv!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Iv(e)<<Iv(32)|Iv(r)):void Na("Trying to read 64b value but JS can only handle 53b numbers.")};class bAe extends kw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class TX extends bAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[s,c]=i;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let x=this.file.getUintBytes(n,d);n+=d+h+2+s;let T=this.file.getUint16(n);if(n+=2,x===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=T*p}}}class AX extends TX{}Jt(AX,"type","heic");class _z extends TX{}Jt(_z,"type","avif"),el.set("heic",AX),el.set("avif",_z),pa(Ja,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),pa(Ja,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),pa(Ja,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),pa(ko,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Om=pa(ko,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Tz={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Om.set(37392,Tz),Om.set(41488,Tz);const RT={0:"Normal",1:"Low",2:"High"};function Az(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Nz(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function MT(t){if(typeof t=="string"){var[e,r,n,a,i,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(s)||(c.setHours(a),c.setMinutes(i),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function Jp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(Ez(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(Ez(t[r],t[r+1]));return Od(String.fromCodePoint(...e))}function Ez(t,e){return t<<8|e}Om.set(41992,RT),Om.set(41993,RT),Om.set(41994,RT),pa(wu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?vX(t):t}],[306,MT],[40091,Jp],[40092,Jp],[40093,Jp],[40094,Jp],[40095,Jp]]),pa(wu,"exif",[[40960,Nz],[36864,Nz],[36867,MT],[36868,MT],[40962,Az],[40963,Az]]),pa(wu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class PT extends bo{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Ji.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let s={},c={};for(let d of kX)s[d]=[],c[d]=0;return i.replace(TAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return s[p].push(m),`${d}#${m}`}return`${d}#${s[p].pop()}`}))})(e);let r=Ch.findAll(e,"rdf","Description");r.length===0&&r.push(new Ch("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let s of i.properties)n=_Ae(s.ns,a),NX(s,n);return(function(i){let s;for(let c in i)s=i[c]=Qb(i[c]),s===void 0&&delete i[c];return Qb(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Jt(PT,"type","xmp"),Jt(PT,"multiSegment",!0),Ta.set("xmp",PT);class Yb{static findAll(e){return EX(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Yb.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=jX(a),new Yb(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Ch{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return EX(e,a).map(Ch.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Ch(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=Yb.findAll(n),this.children=Ch.findAll(a),this.value=this.children.length===0?jX(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return SAe(this.children.map(wAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)NX(r,e);return this.value!==void 0&&(e.value=this.value),Qb(e)}}function NX(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var wAe=t=>t.serialize(),SAe=t=>t.length===1?t[0]:t,_Ae=(t,e)=>e[t]?e[t]:e[t]={};function EX(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function jX(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const kX=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],TAe=new RegExp(`(<|\\/)(${kX.join("|")})`,"g");var AAe=Object.freeze({__proto__:null,default:xAe,Exifr:$u,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:wu,createDictionary:pa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:hu,otherSegments:Ff,segments:l0,tiffBlocks:na,segmentsAndBlocks:fu,tiffExtractables:pu,inheritables:qf,allFormatters:mu,Options:v0,parse:jw,gpsOnlyOptions:Sj,gps:bX,thumbnailOnlyOptions:_j,thumbnail:wX,thumbnailUrl:SX,orientationOnlyOptions:Tj,orientation:Aj,rotations:Nj,get rotateCanvas(){return Id},get rotateCss(){return Rd},rotation:_X});let jz=Kb("fs",(t=>t.promises));ol.set("fs",class extends Cw{async readWhole(){this.chunked=!1,this.fs=await jz;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await jz,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});ol.set("base64",class extends Cw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,s=r+4*Math.ceil(i/3);a=a.slice(r,s);let c=Math.min(e,this.size-t);if(Ew){let d=Nw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class kz extends kw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(c8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Jt(kz,"type","tiff"),el.set("tiff",kz);let NAe=Kb("zlib");const EAe=["ihdr","iccp","text","itxt","exif"];class Cz extends kw{constructor(...e){super(...e),Jt(this,"catchError",(r=>this.errors.push(r))),Jt(this,"metaChunks",[]),Jt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:a,marker:i};EAe.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,s=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",s),Wb){let c=await NAe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Jt(Cz,"type","png"),el.set("png",Cz),pa(Ja,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),o0(Ja,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Oz=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];o0(Ja,"ifd0",Oz),o0(Ja,"exif",Oz),pa(ko,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class DT extends bo{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Jt(DT,"type","jfif"),Jt(DT,"headerLength",9),Ta.set("jfif",DT),pa(Ja,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Iz extends bo{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Jt(Iz,"type","ihdr"),Ta.set("ihdr",Iz),pa(Ja,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),pa(ko,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class rx extends bo{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,s=0;for(let h of a)s+=h.length;let c=new i(s),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new Ji(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Na("ICC header is too short");for(let[r,n]of Object.entries(jAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:s}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&s.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Od(this.chunk.getString(e+12,r))}parseText(e,r){return Od(this.chunk.getString(e+8,r-8))}parseSig(e){return Od(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,y=Od(r.getUnicodeString(m,p));s.push({lang:d,country:h,text:y}),i+=a}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Jt(rx,"type","icc"),Jt(rx,"multiSegment",!0),Jt(rx,"headerLength",18);const jAe={4:Cl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Cl,16:Cl,20:Cl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,s,c))},36:Cl,40:Cl,48:Cl,52:Cl,64:(t,e)=>t.getUint32(e),80:Cl};function Cl(t,e){return Od(t.getString(e,4))}Ta.set("icc",rx),pa(Ja,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Rv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Rz={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};pa(ko,"icc",[[4,Rv],[12,Rz],[40,Object.assign({},Rv,Rz)],[48,Rv],[80,Rv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Mv extends bo{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),s=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(s,this.pluralizeValue(e.get(s),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Jt(Mv,"type","iptc"),Jt(Mv,"translateValues",!1),Jt(Mv,"reviveValues",!1),Ta.set("iptc",Mv),pa(Ja,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),pa(ko,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const em=["Monday","Tuesday","Wednesday","Thursday","Friday"],kAe=({user:t})=>{const e=mi(),{confirm:r}=al(),n=k.useMemo(()=>Pe.getWeekId(),[]),[a,i]=k.useState([]),[s,c]=k.useState("Monday"),[d,h]=k.useState(!1),p=k.useRef(null),[m,y]=k.useState(!1),x=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,S]=k.useState(t.classType||x[0]||"Uncategorized");k.useEffect(()=>{const N=new Date().toLocaleDateString("en-US",{weekday:"long"});em.includes(N)&&c(N)},[]),k.useEffect(()=>{const N=Pe.subscribeToEvidence(t.id,n,i);return()=>N()},[t.id,n]);const w=k.useMemo(()=>{const N=x[0]||"Uncategorized";return a.filter(A=>A.classType?A.classType===T:T===N)},[a,T,x]),E=N=>w.find(A=>A.dayOfWeek===N),I=N=>N?new Date(N).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,R=async N=>{var j;const A=(j=N.target.files)==null?void 0:j[0];if(A){h(!0);try{let z=null;if(A.type.startsWith("image/"))try{const ie=await AAe.parse(A,["DateTimeOriginal"])||{};ie.DateTimeOriginal&&(z=ie.DateTimeOriginal.toISOString())}catch(ie){console.warn("EXIF extraction failed",ie)}const B=T.replace(/[^a-zA-Z0-9]/g,"_"),F=Math.random().toString(36).substring(2,9),U=ym(vm,`evidence/${t.id}/${n}/${B}_${s}_${F}`);await vA(U,A);const X=await Tx(U),W=E(s),Z={id:`${t.id}_${n}_${s}_${B}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:X,timestamp:new Date().toISOString(),exifDate:z,reflection:(W==null?void 0:W.reflection)||""};await Pe.uploadEvidence(Z)}catch(z){e.error("Upload failed: "+(z instanceof Error?z.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(N,A)=>{const j=E(N);j&&j.reflection!==A&&await Pe.uploadEvidence({...j,reflection:A})},O=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new sZ,j=A.internal.pageSize.getWidth(),z=A.internal.pageSize.getHeight(),B=20,F=j-B*2,U=z-B;A.setFillColor(15,7,32),A.rect(0,0,j,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",B,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,B,28),A.text(`Class: ${T}`,B,33),A.text(`Cycle ID: ${n}`,B,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,j-B,33,{align:"right"});let X=55;const W=[...w].sort((H,Z)=>em.indexOf(H.dayOfWeek)-em.indexOf(Z.dayOfWeek));for(const H of W){let Z=null,ie="JPEG",fe=0,me=0,K=!1;try{const ee=await fetch(H.imageUrl);if(!ee.ok)throw new Error(`Image fetch failed: ${ee.statusText}`);const Me=await ee.blob();Z=await new Promise((Qe,St)=>{const ct=new FileReader;ct.onloadend=()=>Qe(ct.result),ct.onerror=St,ct.readAsDataURL(Me)}),Me.type==="image/png"&&(ie="PNG"),Me.type==="image/webp"&&(ie="WEBP");const ne=A.getImageProperties(Z),pe=ne.width/ne.height,Xe=100;fe=F,me=fe/pe,me>Xe&&(me=Xe,fe=me*pe)}catch(ee){console.warn("Image processing error for PDF",ee),K=!0,me=15}const Ne=20+me+12;X+Ne>U&&(A.addPage(),X=B),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(B,X,j-B,X),X+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(H.dayOfWeek.toUpperCase(),B,X);const ae=I(H.exifDate)||I(H.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${ae}`,j-B,X,{align:"right"}),X+=10,!K&&Z){const ee=(j-fe)/2;A.addImage(Z,ie,ee,X,fe,me),X+=me+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",B,X),X+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const xe=H.reflection||"No reflection logged for this cycle.",ye=A.splitTextToSize(xe,F),Ue=ye.length*5+15;X+Ue>U&&(A.addPage(),X=B),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",B,X),X+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(ye,B,X),X+=ye.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Pe.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},M=E(s);return o.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[o.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[o.jsx(YI,{className:"w-7 h-7"})," Weekly Evidence Log"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.length>1?o.jsxs("div",{className:"relative group",children:[o.jsx("select",{value:T,onChange:N=>S(N.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:x.map(N=>o.jsx("option",{value:N,children:N},N))}),o.jsx(Li,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):o.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),o.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),o.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),o.jsxs("button",{onClick:O,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsx(zoe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),o.jsx("input",{type:"file",ref:p,onChange:R,className:"hidden",accept:"image/*"}),o.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:em.map(N=>{const A=E(N),j=s===N;return o.jsxs("button",{onClick:()=>c(N),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${j?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${j?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",em.indexOf(N)+1]}),o.jsx("span",{className:"font-bold text-sm",children:N}),A&&o.jsx("div",{className:`absolute top-2 right-2 ${j?"text-emerald-200":"text-emerald-500"}`,children:o.jsx(jx,{className:"w-3 h-3"})})]},N)})}),o.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[o.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(Xoe,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),M&&o.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[o.jsx(Os,{className:"w-3 h-3"}),I(M.exifDate)||I(M.timestamp)]})]}),o.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:M?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:M.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),o.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},children:[o.jsx(Zd,{className:"w-8 h-8 text-emerald-400"}),o.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):o.jsxs("button",{onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?o.jsx(rs,{className:"w-10 h-10 animate-spin text-emerald-500"}):o.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:o.jsx(YI,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),o.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),o.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[o.jsx("div",{className:"mb-2",children:o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(Xm,{className:"w-4 h-4"})," Daily Reflection"]})}),M?o.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:M.reflection,onBlur:N=>L(s,N.target.value)},s):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[o.jsx("div",{className:"mb-2 opacity-30",children:o.jsx(Ld,{className:"w-6 h-6"})}),o.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),o.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},CAe=({user:t})=>{const e=mi(),[r,n]=k.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=k.useState(""),[s,c]=k.useState(""),[d,h]=k.useState("");k.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(x,T)=>{try{return $x.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");i(y)},[r.content]);const p=async()=>{await Pe.saveLabReport(r),await Pe.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(s),x=parseFloat(d);!isNaN(y)&&!isNaN(x)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:x}].sort((S,w)=>S.x-w.x)})),c(""),h(""))};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[o.jsx(A2,{className:"w-6 h-6"})," Physics Laboratory"]}),o.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[o.jsx(lH,{className:"w-4 h-4"})," Save Report"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:o.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),o.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[o.jsxs("div",{className:"w-1/3",children:[o.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),o.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),o.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(bW,{width:"100%",height:"100%",children:o.jsxs(FSe,{children:[o.jsx(AQ,{strokeDasharray:"3 3",stroke:"#333"}),o.jsx(yw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),o.jsx(vw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),o.jsx(Lo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),o.jsx(A1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),o.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:o.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[o.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(x=>({...x,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),o.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:fG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},OAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],IAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],RAe=({userId:t,classType:e,onClose:r})=>{var L,O,M,N,A;const[n,a]=k.useState(null),[i,s]=k.useState(!0);if(k.useEffect(()=>{(async()=>{const z=await Pe.getPublicProfile(t);a(z),s(!1)})()},[t]),i)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=Kh(p),y=gX(p),{equipped:x,appearance:T}=Jd(n,e),S=iE({gamification:{...c,equipped:x}}),w=Qh(x),E=((O=c.classXp)==null?void 0:O[e])||0,I=Object.values(x).filter(Boolean),R=mX(I);return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:o.jsx(Da,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-24 h-32 shrink-0",children:o.jsx(Vg,{equipped:x,appearance:T})}),o.jsxs("div",{children:[o.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),o.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-cyan-400"}),o.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3 text-yellow-400"}),o.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Stats"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:OAe.map(({key:j,label:z,color:B,icon:F})=>{const U=S[j]||0;return o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:F}),o.jsx("span",{className:"text-xs text-gray-400",children:z}),o.jsx("span",{className:`text-sm font-bold ${B} ml-auto`,children:U})]},j)})})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:IAe.map(j=>{const z=x[j];if(!z)return o.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:j}),o.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},j);const B=ca(z.rarity);return o.jsxs("div",{className:`p-2 rounded-lg border ${B.border} ${B.bg}`,children:[o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:j}),o.jsx("div",{className:`text-xs font-bold truncate ${B.text}`,children:z.name}),o.jsx("div",{className:"text-[9px] text-gray-500",children:z.rarity})]},j)})})]}),R.length>0&&o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(E2,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),R.map(({set:j,activeBonus:z})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[o.jsx("div",{className:"text-xs font-bold text-purple-400",children:j.name}),o.jsxs("div",{className:"text-[10px] text-gray-400",children:[z.label,": ",z.effects.map(B=>`+${B.value} ${B.stat}`).join(", ")]})]},j.id))]}),(((M=c.unlockedAchievements)==null?void 0:M.length)||0)>0&&o.jsxs("div",{className:"p-6",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(ec,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(N=c.unlockedAchievements)==null?void 0:N.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:(A=c.unlockedAchievements)==null?void 0:A.slice(0,12).map(j=>o.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:j.replace(/_/g," ")},j))})]})]})})},MAe=()=>o.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>o.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[o.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),o.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),o.jsxs("div",{className:"space-y-2 text-right",children:[o.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),PAe=({user:t})=>{var m;const[e,r]=k.useState([]),[n,a]=k.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Lr.AP_PHYSICS),[i,s]=k.useState(!0),[c,d]=k.useState(null);k.useEffect(()=>{const y=Pe.subscribeToLeaderboard(x=>{r(x),s(!1)});return()=>y()},[]);const h=k.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const x=new Set;return e.forEach(T=>{var S;return(S=T.enrolledClasses)==null?void 0:S.forEach(w=>x.add(w))}),Array.from(x).sort()},[t.enrolledClasses,e]),p=k.useMemo(()=>e.filter(y=>{var x;return(x=y.enrolledClasses)==null?void 0:x.includes(n)}).sort((y,x)=>{var w,E,I,R;const T=((E=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:E[n])||0;return(((R=(I=x.gamification)==null?void 0:I.classXp)==null?void 0:R[n])||0)-T}).slice(0,10),[e,n]);return o.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),o.jsxs("div",{className:"inline-block relative",children:[o.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>o.jsx("option",{value:y,children:y},y)),h.length===0&&o.jsx("option",{children:n})]}),o.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?o.jsx(MAe,{}):o.jsxs(o.Fragment,{children:[p.length>=3&&o.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var N,A,j,z;const x=p[y];if(!x)return null;const T=(N=x.settings)==null?void 0:N.privacyMode,S=T?((A=x.gamification)==null?void 0:A.codename)||"Unknown Agent":x.name,w=((z=(j=x.gamification)==null?void 0:j.classXp)==null?void 0:z[n])||0,E=Math.floor(w/1e3)+1,I=Kh(E),R=y===0,L=["h-28","h-20","h-16"],O=["w-20 h-20","w-14 h-14","w-14 h-14"],M=[{icon:o.jsx(ec,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:o.jsx(iv,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:o.jsx(iv,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return o.jsxs("div",{className:`flex flex-col items-center ${R?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[o.jsxs("div",{className:`relative mb-2 ${R?"mb-3":""}`,children:[o.jsx("div",{className:`${O[y]} rounded-full p-0.5 bg-white/10 ring-2 ${M[y].ring} relative ${R?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:o.jsx("img",{src:x.avatarUrl,alt:S,className:`w-full h-full rounded-full border-2 ${I.tierColor.split(" ")[0]} object-cover`})}),o.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${M[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:M[y].icon})]}),o.jsxs("div",{className:`text-center ${R?"mt-2":"mt-1"}`,children:[o.jsx("div",{className:`font-bold truncate max-w-[100px] ${R?"text-sm text-white":"text-xs text-gray-300"} ${T?"italic":""}`,children:S}),o.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${R?"text-xl":"text-base"}`,children:w.toLocaleString()}),o.jsx("div",{className:`text-[9px] font-mono uppercase ${I.tierColor.split(" ")[1]}`,children:I.rankName}),o.jsxs("button",{onClick:()=>d(x.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[o.jsx(Hh,{className:"w-3 h-3"})," Inspect"]})]}),o.jsx("div",{className:`${L[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},x.id)})}),o.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,x)=>{var L,O,M,N;const T=p.length>=3?x+3:x,S=(L=y.settings)==null?void 0:L.privacyMode,w=S?((O=y.gamification)==null?void 0:O.codename)||"Unknown Agent":y.name,E=((N=(M=y.gamification)==null?void 0:M.classXp)==null?void 0:N[n])||0,I=Math.floor(E/1e3)+1,R=Kh(I);return o.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*T}s both`},children:[o.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[T<3&&T===0&&o.jsx(ec,{className:"w-6 h-6 text-yellow-400 mx-auto"}),T<3&&T===1&&o.jsx(iv,{className:"w-6 h-6 text-gray-300 mx-auto"}),T<3&&T===2&&o.jsx(iv,{className:"w-6 h-6 text-amber-600 mx-auto"}),T>=3&&`#${T+1}`]}),o.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[o.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]}`}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:I})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h3",{className:`text-base font-bold truncate ${S?"text-purple-300 italic":"text-white"}`,children:[w,S&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${R.tierColor.split(" ")[1]}`,children:R.rankName})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:E.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),o.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:o.jsx(Hh,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&o.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[o.jsx(Es,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&o.jsx(RAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class DAe extends se.Component{constructor(r){super(r);HC(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),o.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&o.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),o.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[o.jsx(Rx,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const Mz={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:o.jsx(Vo,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:o.jsx(tH,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:o.jsx(E2,{className:"w-4 h-4"})}},LAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},LT=3;function BT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const BAe=({assignment:t})=>{const e=mi(),[r,n]=k.useState([]),[a,i]=k.useState([]),[s,c]=k.useState(!0),[d,h]=k.useState(!1),[p,m]=k.useState({}),[y,x]=k.useState(1),[T,S]=k.useState(null),[w,E]=k.useState(new Set),I=k.useRef({engagementTime:0}),R=k.useRef(Date.now());k.useEffect(()=>{const X=setInterval(()=>{Date.now()-R.current<6e4&&(I.current.engagementTime+=1)},1e3);return()=>clearInterval(X)},[]),k.useEffect(()=>{const X=()=>{R.current=Date.now()},W=["mousemove","keydown","scroll","click"];return W.forEach(H=>window.addEventListener(H,X)),()=>W.forEach(H=>window.removeEventListener(H,X))},[]),k.useEffect(()=>()=>{var W;const X=I.current.engagementTime;if(X>=5){const H=(W=KT().currentUser)==null?void 0:W.uid;H&&Pe.submitReviewEngagement(H,t.id,t.title,t.classType,X).catch(()=>{})}},[t.id,t.title,t.classType]);const L=k.useCallback(X=>{const W=BT(X.filter(ie=>ie.tier===1),LT),H=BT(X.filter(ie=>ie.tier===2),LT),Z=BT(X.filter(ie=>ie.tier===3),LT);i([...W,...H,...Z]),m({}),S(null)},[]);k.useEffect(()=>{(async()=>{var W;c(!0),h(!1);try{const H=await Ma(lt(Le,"question_banks",t.id));if(!H.exists()){h(!0);return}const Z=H.data().questions||[];n(Z),L(Z)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(W=KT().currentUser)==null?void 0:W.uid;if(H){const Z=await Ma(lt(Le,"review_progress",`${H}_${t.id}`));Z.exists()&&E(new Set(Z.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const O=()=>{r.length>0&&L(r)},M=(X,W,H)=>{const Z=p[X];if(!(Z!=null&&Z.submitted))if(H==="multiple_select"||H==="ranking"){const ie=(Z==null?void 0:Z.selected)||[],fe=ie.includes(W)?ie.filter(me=>me!==W):[...ie,W];m(me=>({...me,[X]:{...me[X],selected:fe,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ie=>({...ie,[X]:{selected:W,submitted:!1,correct:!1,xpAwarded:!1}}))},N=(X,W)=>{var H;(H=p[X])!=null&&H.submitted||m(Z=>({...Z,[X]:{...Z[X],linkedSelected:W}}))},A=async X=>{const W=p[X.id];if(!(W!=null&&W.selected))return;let H=!1;if(X.type==="multiple_select"||X.type==="ranking"){const Z=W.selected,ie=X.correctAnswer;H=Z.length===ie.length&&Z.every((fe,me)=>fe===ie[me])}else X.type==="linked_mc"?H=W.selected===X.correctAnswer&&(!X.linkedFollowUp||W.linkedSelected===X.linkedFollowUp.correctAnswer):H=W.selected===X.correctAnswer;if(H)if(w.has(X.id))m(Z=>({...Z,[X.id]:{...Z[X.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(Z=>({...Z,[X.id]:{...Z[X.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Kq({assignmentId:t.id,questionId:X.id,xpAmount:X.xp,classType:t.classType})).data.awarded?(e.success(`+${X.xp} XP earned!`),m(fe=>({...fe,[X.id]:{...fe[X.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(fe=>new Set([...fe,X.id]))):e.success("Correct! (XP already claimed)")}catch(Z){console.error("XP award error:",Z)}}else{const Z=Math.ceil(X.xp/2);m(ie=>({...ie,[X.id]:{...ie[X.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:Z}})),e.error(`-${Z} XP penalty`);try{await coe({assignmentId:t.id,questionId:X.id,classType:t.classType})}catch(ie){console.error("Penalty error:",ie)}}},j=k.useMemo(()=>a.filter(X=>X.tier===y),[a,y]),z=k.useMemo(()=>Object.entries(p).filter(([,X])=>X.correct&&X.xpAwarded).reduce((X,[W])=>{var H;return X+(((H=a.find(Z=>Z.id===W))==null?void 0:H.xp)||0)},0),[p,a]),B=k.useMemo(()=>Object.values(p).reduce((X,W)=>X+(W.penalty||0),0),[p]),F=k.useMemo(()=>a.reduce((X,W)=>X+W.xp,0),[a]),U=k.useMemo(()=>a.length>0&&a.every(X=>{var W;return(W=p[X.id])==null?void 0:W.submitted}),[a,p]);return s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Vo,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):o.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Vo,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),o.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($a,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:z}),B>0&&o.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",B]}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",F," XP"]})]}),o.jsxs("button",{onClick:O,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[o.jsx(Rx,{className:"w-3 h-3"})," New Set"]})]})]}),o.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(X=>{const W=Mz[X],H=a.filter(fe=>fe.tier===X),Z=H.filter(fe=>{var me;return(me=p[fe.id])==null?void 0:me.submitted}).length,ie=H.filter(fe=>{var me;return(me=p[fe.id])==null?void 0:me.correct}).length;return o.jsxs("button",{onClick:()=>x(X),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===X?`${W.bg} ${W.color} ${W.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[W.icon,o.jsx("span",{className:"hidden sm:inline",children:W.name}),o.jsxs("span",{className:"sm:hidden",children:["Tier ",X]}),Z>0&&o.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ie===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ie,"/",H.length]})]},X)})}),U&&o.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),o.jsxs("button",{onClick:O,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[o.jsx(Rx,{className:"w-3 h-3"})," New Questions"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[j.map((X,W)=>{const H=p[X.id],Z=T===X.id,ie=H==null?void 0:H.submitted,fe=H==null?void 0:H.correct,me=Mz[X.tier];return o.jsxs("div",{className:`rounded-2xl border transition-all ${ie?fe?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Z?`${me.border} ${me.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[o.jsxs("button",{onClick:()=>S(Z?null:X.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ie?fe?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${me.bg} ${me.color}`}`,children:ie?fe?o.jsx(Rn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}):W+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${me.color}`,children:X.bloomsLevel}),o.jsx("span",{className:"text-[9px] text-gray-600",children:""}),o.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:LAe[X.type]||X.type}),o.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx($a,{className:"w-3 h-3"}),X.xp," XP"]}),o.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(X.xp/2)," if wrong"]})]}),o.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:X.stem})]}),o.jsx(Ld,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Z?"rotate-90":""}`})]}),Z&&o.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[X.context&&o.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:X.context}),X.type==="ranking"?o.jsx(zAe,{question:X,answer:H,onSelect:M}):X.type==="multiple_select"?o.jsx(UAe,{question:X,answer:H,onSelect:M}):o.jsx($Ae,{question:X,answer:H,onSelect:M}),X.type==="linked_mc"&&X.linkedFollowUp&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[o.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),o.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:X.linkedFollowUp.stem}),o.jsx("div",{className:"space-y-2",children:X.linkedFollowUp.options.map(K=>{const te=(H==null?void 0:H.linkedSelected)===K.id,re=ie,Ne=K.id===X.linkedFollowUp.correctAnswer;return o.jsxs("button",{onClick:()=>N(X.id,K.id),disabled:ie,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${re?Ne?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":te?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":te?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[K.id.toUpperCase(),"."]})," ",K.text]},K.id)})})]}),ie?o.jsxs("div",{className:`p-4 rounded-xl border ${fe?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[fe?o.jsx(Rn,{className:"w-5 h-5 text-emerald-400"}):o.jsx(qh,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:`font-bold text-sm ${fe?"text-emerald-400":"text-red-400"}`,children:fe?`Correct! +${X.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(X.xp/2)} XP penalty`})]}),o.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:X.explanation})]}):o.jsx("button",{onClick:()=>A(X),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},X.id)}),j.length===0&&o.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[o.jsx(Gh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},$Ae=({question:t,answer:e,onSelect:r})=>o.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return o.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),UAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const s=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return o.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&o.jsx(Rn,{className:"w-3 h-3 text-white"})}),o.jsxs("span",{children:[o.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},zAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[o.jsx(Ooe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&o.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(p=>p.id===s),h=a&&i[c]===s;return o.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return o.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?o.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):o.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function VAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${$x.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return $x.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const FAe=({assignment:t,onComplete:e})=>{const[r,n]=k.useState(null),[a,i]=k.useState(!0),[s,c]=k.useState(!1),d=k.useRef(Nx()),h=k.useRef(Date.now()),p=k.useRef(e),[m,y]=k.useState(!0),[x,T]=k.useState(0);k.useEffect(()=>{p.current=e},[e]);const S=k.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);k.useEffect(()=>{const E=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(E)},[m]),k.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(I=>window.addEventListener(I,S)),()=>{E.forEach(I=>window.removeEventListener(I,S))}},[S]),k.useEffect(()=>()=>{p.current(d.current)},[]),k.useEffect(()=>{(async()=>{i(!0);try{const I=await Ma(lt(Le,"reading_materials",t.id));I.exists()?n(I.data()):c(!0)}catch(I){console.error("Failed to load reading material:",I),c(!0)}finally{i(!1)}})()},[t.id]);const w=k.useMemo(()=>r?r.sections.map(E=>({title:E.title,html:VAe(E.content)})):[],[r]);return a?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(_o,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?o.jsx(D7,{className:"w-4 h-4"}):o.jsx(Os,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&o.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(Is,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:o.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&o.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),o.jsx("div",{className:"space-y-10",children:w.map((E,I)=>o.jsxs("div",{className:"group",children:[o.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:I+1}),E.title]}),o.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},I))}),o.jsx("div",{className:"mt-12 mb-4 text-center",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[o.jsx(_o,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},Pz={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},qAe=()=>{var ee,Me;const[t,e]=k.useState(null),[r,n]=k.useState("Dashboard"),[a,i]=k.useState([]),[s,c]=k.useState([]),[d,h]=k.useState([]),[p,m]=k.useState([]),[y,x]=k.useState([]),[T,S]=k.useState(null),[w,E]=k.useState("STUDENT"),[I,R]=k.useState("WORK"),[L,O]=k.useState(!1),[M,N]=k.useState(!1),[A,j]=k.useState(!0),[z,B]=k.useState(!1),[F,U]=k.useState(new Set),X=k.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),W=k.useRef(new Set);k.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Ka.ADMIN)return;const ne=Pe.subscribeToMyGroups(t.id,pe=>{W.current=new Set(pe.map(Xe=>Xe.id))});return()=>ne()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=k.useCallback(ne=>{const pe=Date.now();X.current[ne]=pe,localStorage.setItem("chatChannelLastSeen",JSON.stringify(X.current)),U(Xe=>{if(!Xe.has(ne))return Xe;const Qe=new Set(Xe);return Qe.delete(ne),Qe})},[]);k.useEffect(()=>{const ne=Pe.subscribeToRecentMessages(pe=>{const Xe=new Set,Qe=X.current,St=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(ct=>`class_${ct.replace(/\s+/g,"_").toLowerCase()}`));for(const ct of pe){if(!ct.channelId||ct.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Ka.ADMIN){if(ct.channelId.startsWith("group_")){const Ve=ct.channelId.slice(6);if(!W.current.has(Ve))continue}else if(ct.channelId.startsWith("class_")&&!St.has(ct.channelId))continue}const _t=new Date(ct.timestamp).getTime(),Ee=Qe[ct.channelId]||0;_t>Ee&&Xe.add(ct.channelId)}U(Xe)});return()=>ne()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const Z=k.useMemo(()=>{const ne=new Map;return s.forEach(pe=>{const Xe=ne.get(pe.userId)||[];Xe.push(pe),ne.set(pe.userId,Xe)}),d.map(pe=>{const Xe=ne.get(pe.id)||[],Qe=Xe.length,St=Math.round(Xe.reduce((ct,_t)=>{var Ee;return ct+(((Ee=_t.metrics)==null?void 0:Ee.engagementTime)||0)},0)/60);return{...pe,stats:{problemsCompleted:Qe,avgScore:0,rawAccuracy:0,totalTime:St}}})},[d,s]),ie=k.useMemo(()=>{const ne=new Set;return d.forEach(pe=>{pe.section&&ne.add(pe.section)}),Array.from(ne).sort()},[d]),fe=k.useMemo(()=>a.find(ne=>ne.id===T)||null,[a,T]);k.useEffect(()=>{if(O(!1),N(!1),!T)return;const ne=Ma(lt(Le,"question_banks",T)).then(Xe=>{Xe.exists()&&(Xe.data().questions||[]).length>0&&O(!0)}).catch(()=>{}),pe=Ma(lt(Le,"reading_materials",T)).then(Xe=>{Xe.exists()&&N(!0)}).catch(()=>{});Promise.all([ne,pe]).then(()=>{})},[T]),k.useEffect(()=>{let ne=null;const pe=Dee(wA,async Xe=>{Xe?(await me(Xe),ne=on(lt(Le,"users",Xe.uid),Qe=>{Qe.exists()&&e(St=>({...St||{},...Qe.data(),id:Xe.uid}))})):(e(null),ne&&ne(),j(!1))});return()=>{pe(),ne&&ne()}},[]),k.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Ka.ADMIN)){const ne=Pe.subscribeToAssignments(i),pe=Pe.subscribeToClassConfigs(x),Xe=[ne,pe];return t.role===Ka.ADMIN?(Xe.push(Pe.subscribeToSubmissions(c)),Xe.push(Pe.subscribeToUsers(h)),Xe.push(Pe.subscribeToWhitelist(m))):Xe.push(Pe.subscribeToUserSubmissions(t.id,c)),()=>Xe.forEach(Qe=>Qe())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),k.useEffect(()=>{(t==null?void 0:t.role)===Ka.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),k.useEffect(()=>{var ne;Cle(((ne=t==null?void 0:t.settings)==null?void 0:ne.soundEffects)!==!1)},[(ee=t==null?void 0:t.settings)==null?void 0:ee.soundEffects]),jle((t==null?void 0:t.id)||null,((Me=t==null?void 0:t.settings)==null?void 0:Me.pushNotifications)===!0);const me=async ne=>{try{const pe=lt(Le,"users",ne.uid),Xe=await Ma(pe),Qe=await Ma(lt(Le,"allowed_emails",ne.email||"")),ct=(await ne.getIdTokenResult()).claims.admin===!0||ne.email===ble,_t=Qe.exists()||ct,Ee=Qe.exists()?Qe.data():null,Ve=(Ee==null?void 0:Ee.classType)||Lr.UNCATEGORIZED,nt=(Ee==null?void 0:Ee.classTypes)||(Ve!==Lr.UNCATEGORIZED?[Ve]:[]);if(Xe.exists()){const mt=Xe.data(),Je={lastLoginAt:new Date().toISOString(),isWhitelisted:_t};if(ct&&(Je.role="ADMIN"),!_t&&!ct&&(Je.enrolledClasses=[]),_t&&nt.length>0){const de=mt.enrolledClasses||[],Ye=Array.from(new Set([...de,...nt]));Ye.length!==de.length&&(Je.enrolledClasses=Ye,(!mt.classType||mt.classType===Lr.UNCATEGORIZED)&&(Je.classType=nt[0]))}await wr(pe,Je)}else{const mt={email:ne.email,name:ne.displayName||"Student",avatarUrl:ne.photoURL||"",role:ct?"ADMIN":"STUDENT",classType:Ve,enrolledClasses:_t?nt:[],isWhitelisted:_t,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await ra(pe,mt)}}catch(pe){console.error(pe)}finally{j(!1)}},K=async()=>{await Lee(wA),e(null),S(null)},te=ne=>{R("WORK"),S(ne)},re=k.useRef(fe),Ne=k.useRef(t);k.useEffect(()=>{re.current=fe},[fe]),k.useEffect(()=>{Ne.current=t},[t]);const ae=async ne=>{const pe=Ne.current,Xe=re.current;if(!(!pe||!Xe||pe.role===Ka.ADMIN)&&!(ne.engagementTime<10))try{await Pe.submitEngagement(pe.id,pe.name,Xe.id,Xe.title,ne,Xe.classType)}catch(Qe){console.error("Engagement submission failed:",Qe)}},xe=k.useMemo(()=>{const ne={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const pe=y.find(Xe=>Xe.className===t.classType);if(pe)return pe.features}return ne},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return o.jsx(lde,{});if(!t.isWhitelisted&&t.role!==Ka.ADMIN)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[o.jsx(N2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),o.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",hH," for authorization."]}),o.jsx("button",{onClick:K,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const ye=t.role===Ka.ADMIN||xe.physicsTools,Ue=t.role===Ka.ADMIN||xe.communications;return o.jsx(DAe,{children:o.jsx(cde,{children:o.jsx(Tle,{children:o.jsxs(o.Fragment,{children:[o.jsx(Ale,{}),ye&&o.jsx(Mde,{onToggleChat:Ue?()=>B(!z):void 0,hasUnreadChat:F.size>0}),Ue&&o.jsx(Lde,{user:t,isOpen:z,onClose:()=>B(!1),assignments:a,classConfigs:y,unreadChannels:F,onMarkChannelRead:H,onOpenResource:ne=>{te(ne)}}),o.jsx(Rle,{user:t,onLogout:K,activeTab:r,setActiveTab:n,children:fe?o.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[fe.title,t.role===Ka.ADMIN&&o.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),o.jsxs("div",{className:"flex gap-4 mt-2",children:[o.jsx("button",{onClick:()=>R("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${I==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&o.jsxs("button",{onClick:()=>R("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(Vo,{className:"w-3.5 h-3.5"})," Review"]}),M&&o.jsxs("button",{onClick:()=>R("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&o.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[o.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),o.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),o.jsxs("button",{onClick:()=>{S(null),R("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[o.jsx(Coe,{className:"w-4 h-4"})," Exit"]})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[I==="WORK"&&o.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ode,{onComplete:ae,contentUrl:fe.contentUrl,htmlContent:fe.htmlContent,userId:t.id,assignmentId:fe.id,classType:fe.classType})}),w==="ADMIN"&&t.role===Ka.ADMIN&&o.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Ym,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:o.jsx(Es,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ne=>ne.assignmentId===fe.id&&!ne.isArchived).length}),o.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),o.jsx("button",{onClick:()=>B(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),I==="REVIEW"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(BAe,{assignment:fe})}),I==="STUDY"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(FAe,{assignment:fe,onComplete:ae})})]})]}):o.jsx("div",{className:"h-full",children:o.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Ka.ADMIN&&o.jsxs(o.Fragment,{children:[r==="Dashboard"&&o.jsx(gde,{users:Z,assignments:a,submissions:s}),r==="User Management"&&o.jsx(yde,{users:Z,whitelistedEmails:p,classConfigs:y,onWhitelist:async(ne,pe)=>Pe.addToWhitelist(ne,pe)}),r==="Admin Panel"&&o.jsx(Sde,{assignments:a,submissions:s,users:d,onCreateAssignment:async ne=>{ne.title&&await Pe.addAssignment(ne)},classConfigs:y,availableSections:ie,onPreviewAssignment:ne=>{E("STUDENT"),te(ne)}}),r==="XP Command"&&o.jsx(Ide,{users:d})]}),t.role===Ka.STUDENT&&o.jsxs(o.Fragment,{children:[r in Pz&&o.jsx(eAe,{user:t,assignments:a,submissions:s,enabledFeatures:xe,onNavigate:n,onStartAssignment:te,studentTab:Pz[r]}),r==="Forensics"&&xe.evidenceLocker&&o.jsx(kAe,{user:t}),r==="Physics Lab"&&xe.physicsLab&&o.jsx(CAe,{user:t}),r==="Leaderboard"&&xe.leaderboard&&o.jsx(PAe,{user:t})]})]},r)})})]})})})})},CX=document.getElementById("root");if(!CX)throw new Error("Could not find root element to mount to");const HAe=gZ.createRoot(CX);HAe.render(o.jsx(se.StrictMode,{children:o.jsx(qAe,{})}));
